<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
	<!--<link rel="stylesheet" href="css/bootstrap.min.css" >-->
  <link rel="stylesheet" href="https://leanprover-community.github.io//css/lean.css" >
  <link rel="shortcut icon" href="https://leanprover-community.github.io//img/favicon.ico">
	<link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Merriweather:700">
    

	<script>
                function buildShortcutsForStructures(names) {
                        const o = {}
                        names.forEach(name => o[name] = `\\mathbb\{${name}\}`)
                        return o
                }
		MathJax = {
			  tex: {
                                  macros: {
                                          ...buildShortcutsForStructures(["R", "Q", "Z", "N", "C"]),
                                  },
				      inlineMath: [['$', '$'], ['\\(', '\\)']]
				    },
		};
	</script>
	<script type="text/javascript" id="MathJax-script" async
		  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
	</script>

	<title>Documentation style</title>
  </head>
  <body>
  <div id="wrapper">
  <nav class="navbar navbar-expand-lg navbar-light bg-gradient-light">
    <div class="d-flex flex-grow-1">
		<a class="navbar-brand" href="https://leanprover-community.github.io/index.html">Lean Community
    </a>
    </div>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse flex-grow-1 text-right" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto">
		
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			  Try it!
          </a>
		  <div class="dropdown-menu " aria-labelledby="navbarDropdown">
			
			
			<a class="dropdown-item" href="https://leanprover-community.github.io/lean-web-editor">Lean online</a>
			
			
			
			<a class="dropdown-item" href="https://leanprover-community.github.io/get_started.html">Install</a>
			
			
          </div>
        </li>
		
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			  Learn
          </a>
		  <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="navbarDropdown">
			
			
			<a class="dropdown-item" href="https://leanprover-community.github.io/learn.html">Resources</a>
			
			
			
			<a class="dropdown-item" href="https://leanprover.github.io/theorem_proving_in_lean/">Theorem proving in Lean</a>
			
			
			
			<a class="dropdown-item" href="http://wwwf.imperial.ac.uk/~buzzard/xena/natural_number_game/">The natural number game</a>
			
			
			
			<a class="dropdown-item" href="https://leanprover-community.github.io/mathlib-overview.html">Library overview</a>
			
			
			
			<a class="dropdown-item" href="https://leanprover-community.github.io/mathlib_docs">API documentation</a>
			
			
          </div>
        </li>
		
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			  Community
          </a>
		  <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="navbarDropdown">
			
			
			<a class="dropdown-item" href="https://leanprover-community.github.io/meet.html">Meet us</a>
			
			
			
			<a class="dropdown-item" href="https://leanprover.zulipchat.com/">Zulip chat</a>
			
			
			
			<a class="dropdown-item" href="https://leanprover-community.github.io/meet.html#maintainers">Maintainers</a>
			
			
			
			<a class="dropdown-item" href="https://leanprover-community.github.io/contribute/index.html">How to contribute</a>
			
			
			
			<a class="dropdown-item" href="https://leanprover-community.github.io/papers.html">Papers</a>
			
			
			
			<a class="dropdown-item" href="https://leanprover-community.github.io/lean_projects.html">Projects</a>
			
			
          </div>
        </li>
		
      </ul>
    </div>
  </nav>
  <div class="container-sm mt-4">
	  
<h1 id="documentation-style" class="markdown-heading">Documentation style <a class="hover-link" href="#documentation-style">#</a></h1>
<p>All pull requests must meet the following documentation standards. See
<a href="https://github.com/leanprover-community/doc-gen">the <code>doc-gen</code> repo</a> for information about the
<a href="https://leanprover-community.github.io/mathlib_docs/">automatically generated doc pages</a>.</p>
<p>You can preview the markdown processing of a GitHub page or pull request
using the <a href="https://observablehq.com/@bryangingechen/github-lean-doc-preview">Lean doc preview page</a>.</p>
<h2 id="header-comment" class="markdown-heading">Header comment <a class="hover-link" href="#header-comment">#</a></h2>
<p>Each mathlib file should start with:</p>
<ul>
<li>a header comment with copyright information (see the <a href="style.html#header-and-imports">recommendations in our style guidelines</a>);</li>
<li>the list of imports (one on each line);</li>
<li>a module docstring containing general documentation, written using Markdown.</li>
</ul>
<p>(See the example below.)</p>
<p>Headers use atx-style headers (with hash signs, no underlying dash).
The open and close delimiters <code>/-!</code> and <code>-/</code> should appear on their own lines.</p>
<p>The mandatory title of the file is a first level header. It is followed by a summary of the content
of the file.</p>
<p>The other sections, with second level headers are (in this order):</p>
<ul>
<li><em>Main definitions</em> (optional, can be covered in the summary)</li>
<li><em>Main statements</em> (optional, can be covered in the summary)</li>
<li><em>Notations</em> (omitted only if no notation is introduced in this file)</li>
<li><em>Implementation notes</em> (description of important design decisions or interface features,
including use of type classes and <code>simp</code> canonical form for new definitions)</li>
<li><em>References</em> (references to textbooks or papers, or Wikipedia pages)</li>
<li><em>Tags</em> (a list of keywords that could be useful when doing text search in mathlib to find where
something is covered)</li>
</ul>
<p>References should refer to bibtex entries in <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/references.bib">the mathlib citations file</a>.</p>
<p>The following code block is an example of a file header.</p>
<div class="highlight"><pre><span></span><span class="c">/-</span><span class="cm"></span>
<span class="cm">Copyright (c) 2018 Robert Y. Lewis. All rights reserved.</span>
<span class="cm">Released under Apache 2.0 license as described in the file LICENSE.</span>
<span class="cm">Authors: Robert Y. Lewis</span>
<span class="cm">-/</span>

<span class="kn">import</span> <span class="n">data.rat</span>
<span class="kn">import</span> <span class="n">algebra.gcd_domain</span>
<span class="kn">import</span> <span class="n">algebra.field_power</span>
<span class="kn">import</span> <span class="n">ring_theory.multiplicity</span>
<span class="kn">import</span> <span class="n">tactic.ring</span>
<span class="kn">import</span> <span class="n">data.real.cau_seq</span>
<span class="kn">import</span> <span class="n">tactic.norm_cast</span>

<span class="c">/-</span><span class="cm">!</span>
<span class="cm"># p-adic norm</span>

<span class="cm">This file defines the p-adic valuation and the p-adic norm on ℚ.</span>

<span class="cm">The p-adic valuation on ℚ is the difference of the multiplicities of `p` in the numerator and</span>
<span class="cm">denominator of `q`. This function obeys the standard properties of a valuation, with the appropriate</span>
<span class="cm">assumptions on p.</span>

<span class="cm">The valuation induces a norm on ℚ. This norm is a nonarchimedean absolute value.</span>
<span class="cm">It takes values in {0} ∪ {1/p^k | k ∈ ℤ}.</span>

<span class="cm">## Notations</span>

<span class="cm">This file uses the local notation `/.` for `rat.mk`.</span>

<span class="cm">## Implementation notes</span>

<span class="cm">Much, but not all, of this file assumes that `p` is prime. This assumption is inferred automatically</span>
<span class="cm">by taking (prime p) as a type class argument.</span>

<span class="cm">## References</span>

<span class="cm">* [F. Q. Gouêva, *p-adic numbers*][gouvea1997]</span>
<span class="cm">* https://en.wikipedia.org/wiki/P-adic_number</span>

<span class="cm">## Tags</span>

<span class="cm">p-adic, p adic, padic, norm, valuation</span>
<span class="cm">-/</span>
</pre></div>

<h2 id="doc-strings" class="markdown-heading">Doc strings <a class="hover-link" href="#doc-strings">#</a></h2>
<p>Every definition and major theorem is required to have a doc string.
(Doc strings on lemmas are also encouraged, particularly if the lemma has any mathematical content
or might be useful in another file.)
These are introduced using <code>/--</code> and closed by <code>-/</code> above the definition.
They can contain some markdown, e.g. backtick quotes. LaTeX can be included between single dollar
signs <code>$ ... $</code> to be rendered inline or double dollar signs <code>$$ ... $$</code> to be rendered in &quot;display
mode&quot; by MathJax in <a href="https://leanprover-community.github.io/mathlib_docs/">the online mathlib docs</a>.</p>
<p>Doc strings should convey the mathematical meaning of the definition. They are allowed to lie
slightly about the actual implementation. The following is a doc string example:</p>
<div class="highlight"><pre><span></span><span class="sd">/--</span>
<span class="sd">If `q ≠ 0`, the p-adic norm of a rational `q` is `p ^ (-(padic_val_rat p q))`.</span>
<span class="sd">If `q = 0`, the p-adic norm of `q` is 0.</span>
<span class="sd">-/</span>
<span class="kd">def</span> <span class="n">padic_norm</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℚ</span> <span class="o">:=</span>
<span class="k">if</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="mi">0</span> <span class="k">else</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">^</span> <span class="o">(</span><span class="bp">-</span><span class="o">(</span><span class="n">padic_val_rat</span> <span class="n">p</span> <span class="n">q</span><span class="o">))</span>
</pre></div>

<p>An example that is slightly lying but still describes the mathematical content would be:</p>
<div class="highlight"><pre><span></span><span class="sd">/--</span>
<span class="sd">For `p ≠ 1`, the p-adic valuation of an integer `z ≠ 0` is the largest natural number `n` such that</span>
<span class="sd">p^n divides z.</span>
<span class="sd">`padic_val_rat` defines the valuation of a rational `q` to be the valuation of `q.num` minus the</span>
<span class="sd">valuation of `q.denom`.</span>
<span class="sd">If `q = 0` or `p = 1`, then `padic_val_rat p q` defaults to 0.</span>
<span class="sd">-/</span>
<span class="kd">def</span> <span class="n">padic_val_rat</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="o">:=</span>
<span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">∧</span> <span class="n">p</span> <span class="bp">≠</span> <span class="mi">1</span>
<span class="k">then</span> <span class="o">(</span><span class="n">multiplicity</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="n">q.num</span><span class="o">)</span><span class="bp">.</span><span class="n">get</span>
    <span class="o">(</span><span class="n">multiplicity.finite_int_iff.2</span> <span class="o">⟨</span><span class="n">h.2</span><span class="o">,</span> <span class="n">rat.num_ne_zero_of_ne_zero</span> <span class="n">h.1</span><span class="o">⟩)</span> <span class="bp">-</span>
  <span class="o">(</span><span class="n">multiplicity</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="n">q.denom</span><span class="o">)</span><span class="bp">.</span><span class="n">get</span>
    <span class="o">(</span><span class="n">multiplicity.finite_int_iff.2</span> <span class="o">⟨</span><span class="n">h.2</span><span class="o">,</span> <span class="kd">by</span> <span class="n">exact_mod_cast</span> <span class="n">rat.denom_ne_zero</span> <span class="n">_</span><span class="o">⟩)</span>
<span class="k">else</span> <span class="mi">0</span>
</pre></div>

<p>The <code>#doc_blame</code> command can be run at the bottom of a file to list all definitions that do not have
doc strings. <code>#doc_blame!</code> will also list theorems and lemmas.</p>
<h2 id="tactic-doc-entries" class="markdown-heading">Tactic doc entries <a class="hover-link" href="#tactic-doc-entries">#</a></h2>
<p>Interactive tactics, user commands, hole commands and user attributes should have doc strings
explaining how they can be used. The <code>add_tactic_doc</code> command should be invoked afterwards to add a
doc entry to the appropriate page in the online docs.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><span class="sd">/--</span>
<span class="sd">describe what the command does here</span>
<span class="sd">-/</span>
<span class="n">add_tactic_doc</span>
<span class="o">{</span> <span class="n">name</span> <span class="o">:=</span> <span class="s2">&quot;display name of the tactic&quot;</span><span class="o">,</span>
  <span class="n">category</span> <span class="o">:=</span> <span class="n">cat</span><span class="o">,</span>
  <span class="n">decl_names</span> <span class="o">:=</span> <span class="o">[</span><span class="bp">`</span><span class="n">dcl_1</span><span class="o">,</span> <span class="bp">`</span><span class="n">dcl_2</span><span class="o">],</span>
  <span class="n">tags</span> <span class="o">:=</span> <span class="o">[</span><span class="s2">&quot;tag_1&quot;</span><span class="o">,</span> <span class="s2">&quot;tag_2&quot;</span><span class="o">]</span>
<span class="o">}</span>
</pre></div>

<p>The argument to <code>add_tactic_doc</code> is a structure of type <code>tactic_doc_entry</code>.</p>
<ul>
<li><code>name</code> refers to the display name of the tactic; it is used as the header of the doc entry.</li>
<li><code>cat</code> refers to the category of doc entry.
Options: <code>doc_category.tactic</code>, <code>doc_category.cmd</code>, <code>doc_category.hole_cmd</code>, <code>doc_category.attr</code></li>
<li><code>decl_names</code> is a list of the declarations associated with this doc. For instance,
the entry for <code>linarith</code> would set <code>decl_names := [`tactic.interactive.linarith]</code>.
Some entries may cover multiple declarations.
It is only necessary to list the interactive versions of tactics.</li>
<li><code>tags</code> is an optional list of strings used to categorize entries.</li>
<li>The doc string is the body of the entry. It can be formatted with markdown.
What you are reading now is taken from the description of <code>add_tactic_doc</code>.</li>
</ul>
<p>If only one related declaration is listed in <code>decl_names</code> and if this
invocation of <code>add_tactic_doc</code> does not have a doc string, the doc string of
that declaration will become the body of the tactic doc entry. If there are
multiple declarations, you can select the one to be used by passing a name to
the <code>inherit_description_from</code> field.</p>
<p>If you prefer a tactic to have a doc string that is different then the doc entry, then between
the <code>/--</code> <code>-/</code> markers, write the desired doc string first, then <code>---</code> surrounded by new lines,
and then the doc entry.</p>
<p>Note that providing a badly formed <code>tactic_doc_entry</code> to the command can result in strange error
messages.</p>
<h2 id="sectioning-comments" class="markdown-heading">Sectioning comments <a class="hover-link" href="#sectioning-comments">#</a></h2>
<p>It is common to structure a file in sections, where each section contains related declarations.
By describing the sections with module documentation <code>/-! ... -/</code> at the beginning,
these sections can be seen in the documentation.</p>
<p>While these sectioning comments will often correspond to <code>section</code> or <code>namespace</code> commands,
this is not required. You can use sectioning comments inside of a section or namespace, and you can
have multiple sections or namespaces following one sectioning comment.</p>
<p>Sectioning comments are for display and readability only. They have no semantic meaning.</p>
<p>Third-level headers <code>###</code> should be used for titles inside sectioning comments.</p>
<p>If the comment is more than one line long, the delimiters <code>/-!</code> and <code>-/</code> should appear on their own
lines.</p>
<p>See <a href="https://github.com/leanprover-community/mathlib/blob/master/src/meta/expr.lean">meta/expr.lean</a> for an example in practice.</p>
<div class="highlight"><pre><span></span><span class="kn">namespace</span> <span class="n">binder_info</span>

<span class="c">/-</span><span class="cm">!</span>
<span class="cm">### Declarations about `binder_info`</span>

<span class="cm">This section develops an extended API for the type `binder_info`.</span>
<span class="cm">-/</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">inhabited</span> <span class="n">binder_info</span> <span class="o">:=</span> <span class="o">⟨</span> <span class="n">binder_info.default</span> <span class="o">⟩</span>

<span class="sd">/-- The brackets corresponding to a given binder_info. -/</span>
<span class="kd">def</span> <span class="n">brackets</span> <span class="o">:</span> <span class="n">binder_info</span> <span class="bp">→</span> <span class="n">string</span> <span class="bp">×</span> <span class="n">string</span>
<span class="bp">|</span> <span class="n">binder_info.implicit</span>        <span class="o">:=</span> <span class="o">(</span><span class="s2">&quot;{&quot;</span><span class="o">,</span> <span class="s2">&quot;}&quot;</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">binder_info.strict_implicit</span> <span class="o">:=</span> <span class="o">(</span><span class="s2">&quot;{{&quot;</span><span class="o">,</span> <span class="s2">&quot;}}&quot;</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">binder_info.inst_implicit</span>   <span class="o">:=</span> <span class="o">(</span><span class="s2">&quot;[&quot;</span><span class="o">,</span> <span class="s2">&quot;]&quot;</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">_</span>                           <span class="o">:=</span> <span class="o">(</span><span class="s2">&quot;(&quot;</span><span class="o">,</span> <span class="s2">&quot;)&quot;</span><span class="o">)</span>

<span class="kd">end</span> <span class="n">binder_info</span>

<span class="kn">namespace</span> <span class="n">name</span>

<span class="c">/-</span><span class="cm">! ### Declarations about `name` -/</span>

<span class="sd">/-- Find the largest prefix `n` of a `name` such that `f n ≠ none`, then replace this prefix</span>
<span class="sd">with the value of `f n`. -/</span>
<span class="kd">def</span> <span class="n">map_prefix</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">name</span> <span class="bp">→</span> <span class="n">option</span> <span class="n">name</span><span class="o">)</span> <span class="o">:</span> <span class="n">name</span> <span class="bp">→</span> <span class="n">name</span>
<span class="bp">|</span> <span class="n">anonymous</span> <span class="o">:=</span> <span class="n">anonymous</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">mk_string</span> <span class="n">s</span> <span class="n">n&#39;</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">mk_string</span> <span class="n">s</span> <span class="n">n&#39;</span><span class="o">))</span><span class="bp">.</span><span class="n">get_or_else</span> <span class="o">(</span><span class="n">mk_string</span> <span class="n">s</span> <span class="bp">$</span> <span class="n">map_prefix</span> <span class="n">n&#39;</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">mk_numeral</span> <span class="n">d</span> <span class="n">n&#39;</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">mk_numeral</span> <span class="n">d</span> <span class="n">n&#39;</span><span class="o">))</span><span class="bp">.</span><span class="n">get_or_else</span> <span class="o">(</span><span class="n">mk_numeral</span> <span class="n">d</span> <span class="bp">$</span> <span class="n">map_prefix</span> <span class="n">n&#39;</span><span class="o">)</span>
</pre></div>

<h2 id="theories-documentation" class="markdown-heading">Theories documentation <a class="hover-link" href="#theories-documentation">#</a></h2>
<p>In addition to documentation living in Lean files, we have <a href="../theories.html">theories documentation</a>
where we give overviews spanning several Lean files, and
more mathematical explanations in cases where formalization requires slightly exotic points of view,
see for instance the <a href="../theories/topology.html">topology documentation</a>.</p>
<h2 id="examples" class="markdown-heading">Examples <a class="hover-link" href="#examples">#</a></h2>
<p>The following files are maintained as examples of good documentation style:</p>
<ul>
<li><a href="https://github.com/leanprover-community/mathlib/blob/master/src/data/padics/padic_norm.lean">data/padics/padic_norm</a></li>
<li><a href="https://github.com/leanprover-community/mathlib/blob/master/src/topology/basic.lean">topology/basic</a></li>
<li><a href="https://github.com/leanprover-community/mathlib/blob/master/src/analysis/calculus/times_cont_diff.lean">analysis/calculus/times_cont_diff</a></li>
</ul>

  </div>
</div>

  <nav class="footer navbar navbar-expand-lg navbar-light bg-light justify-content-end">
  <ul class="nav">
    <li class="nav-item">
      <a class="nav-link active" href="https://github.com/leanprover-community/leanprover-community.github.io/blob/newsite/templates/contribute/doc.md">Suggest edits to this page on GitHub</a>
    </li>
  </ul>
</nav>

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://leanprover-community.github.io//js/bootstrap.min.js"></script>
    
  </body>
</html>