<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="https://leanprover-community.github.io//css/lean.css" >
  <link rel="shortcut icon" href="https://leanprover-community.github.io//img/favicon.ico">
  <link rel="search" type="application/opensearchdescription+xml" title="mathlib docs" href="https://leanprover-community.github.io//opensearch.xml">
  <link href="https://fonts.googleapis.com/css2?family=Merriweather&family=Open+Sans&family=Source+Code+Pro:wght@400;600&display=swap" rel="stylesheet">
    

	<script>
                function buildShortcutsForStructures(names) {
                        const o = {}
                        names.forEach(name => o[name] = `\\mathbb\{${name}\}`)
                        return o
                }
		MathJax = {
			  tex: {
                                  macros: {
                                          ...buildShortcutsForStructures(["R", "Q", "Z", "N", "C"]),
                                  },
				      inlineMath: [['$', '$'], ['\\(', '\\)']]
				    },
		};
	</script>
	<script type="text/javascript" id="MathJax-script" async
		  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
	</script>

	<title>Mathlib statistics</title>
  </head>
  <body>
  <nav class="navbar navbar-expand-lg navbar-light bg-gradient-light d-md-none">
    <div class="d-flex flex-grow-1">
		<a class="navbar-brand" href="https://leanprover-community.github.io/index.html">Lean Community
    </a>
    </div>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </nav>

<div id="mainbox">

  <main>
    

<h1>Mathlib statistics</h1>

<h2>Counts</h2>

<table class="table table-borderless table-sm mt-4 ml-5" style="font-size: 1.25rem">
  <tr>
    <th>Definitions</th>
    <th>Theorems</th>
    <th>Contributors</th>
  </tr>
  <tr>
    <td>118050</td>
    <td>237748</td>
    <td>653</td>
  </tr>
</table>

<h2>Code growth</h2>

<canvas id="files_by_date"></canvas>

<canvas id="lines_by_date"></canvas>

<h2>Temporal distribution</h2>

<canvas id="by_year_month"></canvas>

<canvas id="by_year"></canvas>

<h3>Temporal distribution of commits by type (<code>feat</code>, <code>chore</code>, etc.)</h3>

  <canvas id="by_labels_by_year_month"></canvas>

  <canvas id="by_labels_by_year"></canvas>

<h2>Dependency graph</h2>

<p>
  A visualization showing how the various topics in mathlib interact and their
  relative sizes can be found <a href="https://leanprover-community.github.io//mathlib4_docs/mathlib.html">here</a>.
</p>


  </main>

    <nav id="navbar" class="d-md-block bg-light sidebar collapse navbar-light pb-4">
      <div class="d-none d-md-block mt-4"><a class="navbar-brand" href="https://leanprover-community.github.io/index.html">Lean Community</a></div>
      
        <h6 class="sidebar-heading mt-4">Community</h6>
        <ul class="nav">
          <li class="nav-item col-12"><a href="https://leanprover.zulipchat.com/">Zulip chat</a></li>
        
          <li class="nav-item col-12"><a href="https://github.com/leanprover-community/mathlib4">GitHub</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/blog">Blog</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/meet.html">Community information</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/meet.html#community-guidelines">Community guidelines</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/teams.html">Teams</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/papers.html">Papers about Lean</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/lean_projects.html">Projects using Lean</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/teaching/index.html">Teaching using Lean</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/events.html">Events</a></li>
        </ul>
      
        <h6 class="sidebar-heading mt-4">Use Lean</h6>
        <ul class="nav">
          <li class="nav-item col-12"><a href="https://live.lean-lang.org/">Online version (no installation)</a></li>
        
          <li class="nav-item col-12"><a href="https://docs.lean-lang.org/lean4/doc/quickstart.html">Install Lean</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/get_started.html">More options</a></li>
        </ul>
      
        <h6 class="sidebar-heading mt-4">Documentation</h6>
        <ul class="nav">
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/learn.html">Learning resources (start here)</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/mathlib4_docs">API documentation</a></li>
        
          <li class="nav-item col-12"><a href="https://loogle.lean-lang.org/">Declaration search (Loogle)</a></li>
        
          <li class="nav-item col-12"><a href="https://lean-lang.org/doc/reference/latest/">Language reference</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/mathlib-manual/html-multi/">Tactic list</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/extras/calc.html">Calc mode</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/extras/conv.html">Conv mode</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/extras/simp.html">Simplifier</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/extras/well_founded_recursion.html">Well-founded recursion</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/extras/speedup.html">Speeding up Lean files</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/extras/pitfalls.html">Pitfalls and common mistakes</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/mwe.html">About MWEs</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/glossary.html">Glossary</a></li>
        </ul>
      
        <h6 class="sidebar-heading mt-4">Library overviews</h6>
        <ul class="nav">
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/mathlib-overview.html">Library overview</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/undergrad.html">Undergraduate maths</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/100.html">Wiedijk's 100 theorems</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/1000.html">1000+ theorems</a></li>
        </ul>
      
        <h6 class="sidebar-heading mt-4">Theories</h6>
        <ul class="nav">
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/theories/naturals.html">Natural Numbers</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/theories/linear_algebra.html">Linear Algebra</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/theories/sets.html">Sets and finite sets</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/theories/topology.html">Topology</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/theories/category_theory.html">Category Theory</a></li>
        </ul>
      
        <h6 class="sidebar-heading mt-4">Contributing</h6>
        <ul class="nav">
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/index.html">Pull request lifecycle</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/queueboard/">Mathlib review and triage dashboard</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/git.html">Git Guide for Mathlib4 Contributors</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/naming.html">Naming conventions</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/style.html">Code style guideline</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/doc.html">Documentation style</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/commit.html">Commit conventions</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/pr-review.html">Pull request review guide</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/mathlib_stats.html">Contribution statistics</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/tags_and_branches.html">Tags and branches</a></li>
        </ul>
      
    </nav>

</div>


    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"></script>
    <script src="https://leanprover-community.github.io//js/bootstrap.min.js"></script>
    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true });
    </script>
    
<script type="text/javascript" src="js/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>

<link href="https://unpkg.com/tabulator-tables@4.6.2/dist/css/tabulator.min.css" rel="stylesheet">
<script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.6.2/dist/js/tabulator.min.js"></script>


<script type="text/javascript" src="https://leanprover-community.github.io/mathlib_stats/gitstats4.js"></script>
<script>
  // because both gitstats files use the same variable names, rename the mathlib4 ones before importing the mathlib3 ones
  const by_year_month4 = by_year_month;
  const by_year4 = by_year;
  const by_labels_by_year_month4 = by_labels_by_year_month;
  const by_labels_by_year4 = by_labels_by_year;
  const files_stamps4 = files_stamps;
  const lines_stamps4 = lines_stamps;
  const files_by_date4 = files_by_date;
  const lines_by_date4 = lines_by_date;
</script>
<script type="text/javascript" src="https://leanprover-community.github.io//mathlib_stats/gitstats.js"></script>

<script>
  const color = Chart.helpers.color;
  const blue = '#377eb8';
  const red = '#ff0029';

  // Optimal qualitative colour palettes: Normal, 12 colors from https://tsitsul.in/blog/coloropt/
  const palette_array = ['#ebac23','#b80058','#008cf9','#006e00','#00bbad','#d163e6','#b24502','#ff9287','#5954d6','#00c6f8','#878500','#00a76c','#bdbdbd'];
  let palette = {};

  /* Given `by_labels_by_year_month` or `by_labels_by_year` objects, return an object with cleaned
  commit labels as keys and datasets (objects containing `labels` and `data` arrays) as values.
  Note that the initial format is the same, we just want to merge some of the raw commit labels together.

  There is an unfortunate clash of terminology here: the `labels` array correspond to the labels on the
  x-coordinates of the charts (either 'MM-YYYY' or 'YYYY'strings), whereas the "labels" in "by_labels_by_*"
  refers to the commit types.
  */
  function merge_commit_type_data(by_labels) {
    /*
    Commit types from https://leanprover-community.github.io/contribute/commit.html
    "feat" (feature)
    "fix" (bug fix)
    "doc" (documentation)
    "style" (formatting, missing semicolons, ...)
    "refactor"
    "test" (when adding missing tests)
    "chore" (maintain)
    "perf" (performance improvement, optimization, ...)

    We also include:
    "feat: port" (these will be excluded from the "feat" type above)
    "ci"
    "other"
    */
    const result = {};
    for (const commit_type in by_labels) {
      if (commit_type === "feat: port" ||
        commit_type === "fix" ||
        commit_type === "doc" ||
        commit_type === "style" ||
        commit_type === "refactor" ||
        commit_type === "test" ||
        commit_type === "chore" ||
        commit_type === "perf" ||
        commit_type === "ci") {
        result[commit_type] = {
          // copy the data since we may modify in place later
          labels: by_labels[commit_type]["labels"].slice(),
          data: by_labels[commit_type]["data"].slice(),
        };
      } else if (commit_type === "feat" || commit_type === "feature") {
        // assume that for each of these, all the `labels` arrays are the same
        if (!result["feat"])
          result["feat"] = {
            labels: by_labels[commit_type]["labels"].slice(),
            data: by_labels[commit_type]["data"].slice(),
          };
        else {
          result["feat"]["data"] = result["feat"]["data"].map(
            (val, i) => val += by_labels[commit_type]["data"][i]
          );
        }
      } else { // we could do more merging of commit labels with typos, etc. but they seem to be quite rare
        // assume that for each of these, all the "labels" arrays are the same
        if (!result["other"])
          result["other"] = {
            labels: by_labels[commit_type]["labels"].slice(),
            data: by_labels[commit_type]["data"].slice(),
          };
        else {
          result["other"]["data"] = result["other"]["data"].map(
            (val, i) => val += by_labels[commit_type]["data"][i]
          );
        }
      }
    }
    return result;
  }

  function pad_data(mathlib3_data, mathlib4_data) {
    /* This function assumes `mathlib3_data` and `mathlib4_data` are objects with
    fields `labels` and `data` which are arrays of the same length and `labels` is sorted.
    It also assumes `mathlib3_data` can have labels smaller than `mathlib4_data` and `mathlib4_data` can
    have labels larger than `mathlib3_data`, but not the other way around.
    The goal is to pad both to have the same labels, using 0 as the newly created data.
    Efficiency is not crucial since we expect to have less than 200 labels during the lifetime
    of this webpage. */
    const length3 = mathlib3_data.labels.length;
    const length4 = mathlib4_data.labels.length;
    const mathlib4_start = mathlib4_data.labels[0];
    const mathlib3_end = mathlib3_data.labels[length3 - 1];

    let nb_new4 = 0;
    for (let i = length3 - 1; i >= 0; i--) {
      const label = mathlib3_data.labels[i];
      if (label < mathlib4_start) {
        mathlib4_data.labels.unshift(label);
        mathlib4_data.data.unshift(0);
        nb_new4++;
      }
    }
    for (let i = 0; i < length4; i++) {
      const label = mathlib4_data.labels[nb_new4 + i];
      if (label > mathlib3_end) {
        mathlib3_data.labels.push(label);
        mathlib3_data.data.push(0);
      }
    }
  }

  /* Given both mathlib3 and mathlib4 `by_labels_by_year_month` or `by_labels_by_year` objects,
  return an object with keys:
  - labels: array of x-coordinates of the data points (note that the "labels" in `by_labels_*` refers to commit labels, not these labels)
  - datasets: array of data objects (one for each label + mathlib3 / mathlib4 combination), with keys:
    - data: array of y-coordinates (padded, if necessary to align properly with `labels`)
    - label: string containing "mathlib3: " or "mathlib4: " + commit type
    - stack: string containing 'mathlib3' or 'mathlib4'
    - commit_type: nonstandard field containing string commit type

  the commit types in `datasets` are sorted in descending order, by the greatest number of commits (across both mathlib3 and mathlib4)
  */
  function pad_labels_data(mathlib3_data, mathlib4_data) {
    // assume both mathlib3_data and mathlib4_data contain a nonempty 'chore' object:
    const mathlib3_labels = mathlib3_data['chore'].labels.slice();
    const mathlib4_labels = mathlib4_data['chore'].labels.slice();
    const length3 = mathlib3_labels.length;
    const length4 = mathlib4_labels.length;
    const mathlib4_start = mathlib4_labels[0];
    const mathlib3_end = mathlib3_labels[length3 - 1];

    // labels in mathlib4_data that are not in mathlib3_data
    const mathlib4_tail = mathlib4_labels.filter(label => label > mathlib3_end);

    // number of zero entries to put at the end of mathlib3 data
    const padding3 = mathlib4_tail.length;
    // number of zero entries to put at the beginning of mathlib4 data
    const padding4 = mathlib3_labels.filter(label => label < mathlib4_start).length;

    const labels = mathlib3_labels.concat(mathlib4_tail);

    const datasets = [];

    // total number of commits of each commit type
    const totals = {};

    for ([commit_type, {data}] of Object.entries(mathlib3_data)) {
      const zeros = new Array(padding3).fill(0);
      if (!totals[commit_type]) totals[commit_type] = 0;
      totals[commit_type] += data.reduce((val, sum) => val + sum, 0);
      datasets.push({
        data: data.concat(zeros),
        commit_type,
        label: 'mathlib3: ' + commit_type,
        stack: 'mathlib3'
      });
    }

    for ([commit_type, {data}] of Object.entries(mathlib4_data)) {
      const zeros = new Array(padding4).fill(0);
      if (!totals[commit_type]) totals[commit_type] = 0;
      totals[commit_type] += data.reduce((val, sum) => val + sum, 0);
      datasets.push({
        data: zeros.concat(data),
        commit_type,
        label: 'mathlib4: ' + commit_type,
        stack: 'mathlib4'
      });
    }

    datasets.sort((d1, d2) => totals[d2.commit_type] - totals[d1.commit_type]);

    let index = 0;
    for (const {commit_type} of datasets) {
      if (palette[commit_type]) continue;
      palette[commit_type] = palette_array[index];
      index++;
    }

    return {labels, datasets};
  }

  function merge_timestamps_and_values(mathlib3_ts, mathlib3_vals, mathlib4_ts, mathlib4_vals) {
    // Initialize arrays for merged timestamps, mathlib3 values, and mathlib4 values
    const mergedTimestamps = [];
    const mergedMathlib3Vals = [];
    const mergedMathlib4Vals = [];

    // Initialize variables to track the previous values
    let prevMathlib3Val = 0;
    let prevMathlib4Val = 0;

    // Initialize index variables for both arrays
    let index3 = 0;
    let index4 = 0;

    // Merge timestamps and values with previous values
    while (index3 < mathlib3_ts.length && index4 < mathlib4_ts.length) {
      const timestamp3 = mathlib3_ts[index3];
      const timestamp4 = mathlib4_ts[index4];

      if (timestamp3 < timestamp4) {
        // Timestamp from mathlib3 is earlier
        mergedTimestamps.push(timestamp3);
        mergedMathlib3Vals.push(mathlib3_vals[index3]);
        mergedMathlib4Vals.push(prevMathlib4Val);
        prevMathlib3Val = mathlib3_vals[index3];
        index3++;
      } else if (timestamp4 < timestamp3) {
        // Timestamp from mathlib4 is earlier
        mergedTimestamps.push(timestamp4);
        mergedMathlib4Vals.push(mathlib4_vals[index4]);
        mergedMathlib3Vals.push(prevMathlib3Val);
        prevMathlib4Val = mathlib4_vals[index4];
        index4++;
      } else {
        // Timestamps are equal
        mergedTimestamps.push(timestamp3);
        mergedMathlib3Vals.push(mathlib3_vals[index3]);
        mergedMathlib4Vals.push(mathlib4_vals[index4]);
        prevMathlib3Val = mathlib3_vals[index3];
        prevMathlib4Val = mathlib4_vals[index4];
        index3++;
        index4++;
      }
    }

    // If there are remaining elements in either array, add them
    while (index3 < mathlib3_ts.length) {
      mergedTimestamps.push(mathlib3_ts[index3]);
      mergedMathlib3Vals.push(mathlib3_vals[index3]);
      mergedMathlib4Vals.push(prevMathlib4Val);
      prevMathlib3Val = mathlib3_vals[index3];
      index3++;
    }

    while (index4 < mathlib4_ts.length) {
      mergedTimestamps.push(mathlib4_ts[index4]);
      mergedMathlib4Vals.push(mathlib4_vals[index4]);
      mergedMathlib3Vals.push(prevMathlib3Val);
      prevMathlib4Val = mathlib4_vals[index4];
      index4++;
    }

    return {
      mergedTimestamps,
      mergedMathlib3Vals,
      mergedMathlib4Vals,
    };
  }

  function makeBarChart(id, title, mathlib3_data, mathlib4_data, show_legend = true) {
    const barChartData = {
      labels: mathlib3_data.labels,
      datasets: [{
        label: "mathlib3",
        backgroundColor: color(blue).alpha(0.5).rgbString(),
        borderColor: blue,
        borderWidth: 1,
        data: mathlib3_data.data
      },
      {
        label: "mathlib4",
        backgroundColor: color(red).alpha(0.5).rgbString(),
        borderColor: red,
        borderWidth: 1,
        data: mathlib4_data.data
      }]
    };

    const ctx = document.getElementById(id).getContext('2d');
    new Chart(ctx, {
      type: 'bar',
      data: barChartData,
      options: {
        responsive: true,
        legend: {
          display: show_legend,
        },
        title: {
          display: true,
          text: title
        }
      }
    });
  }

  function makeStackedBarChart(id, title, data, show_legend = true) {
    const barChartData = {
      labels: data.labels,
      datasets: data.datasets.map(({data, commit_type, label, stack}, i) => ({
        data,
        label,
        stack,
        backgroundColor: color(palette[commit_type]).alpha(0.5).rgbString(),
        borderColor: color(palette[commit_type]),
        borderWidth: 1,
      }))
    };

    const ctx = document.getElementById(id).getContext('2d');
    new Chart(ctx, {
      type: 'bar',
      data: barChartData,
      options: {
        responsive: true,
        scales: {
          xAxes: [{
            stacked: true
          }],
          yAxes: [{
            stacked: true
          }]
        },
        legend: {
          display: show_legend,
        },
        title: {
          display: true,
          text: title
        }
      }
    });
  }

  const colors = [blue, red];

  function makeLineChart(id, title, stamps, mathlib3_datas, mathlib4_datas, show_title = true,
    show_legend = true) {
    const ctx = document.getElementById(id).getContext('2d');
    const datasets = [];
    let colidx = 0;
    for (const [name, data] of Object.entries(mathlib3_datas)) {
      datasets.push(
        {
          label: "mathlib3",
          fill: false,
          borderColor: colors[colidx],
          // 1721779200 is the Unix timestamp of Wed Jul 24 2024 00:00:00 GMT+0000
          // which is roughly the date when the mathlib3 repo was archived
          data: data.map((val, i) => ({ x: stamps[i], y: val })).filter(({ x, _ }) => x < 1721779200),
          cubicInterpolationMode: 'monotone',
          pointRadius: 1,
        });
      colidx = colidx + 1;
    };
    for (const [name, data] of Object.entries(mathlib4_datas)) {
      datasets.push(
        {
          label: "mathlib4",
          fill: false,
          borderColor: colors[colidx],
          // by filtering out datapoints with 0 files or lines, we avoid showing data from before mathlib4 was created
          data: data.map((val, i) => ({ x: stamps[i], y: val })).filter(({ _, y }) => y > 0),
          cubicInterpolationMode: 'monotone',
          pointRadius: 1,
        });
      colidx = colidx + 1;
    };
    new Chart(ctx, {
      type: 'line',
      data: {
        labels: stamps,
        datasets: datasets
      },
      options: {
        title: {
          display: show_title,
          text: title
        },
        legend: {
          display: show_legend,
        },
        scales: {
          xAxes: [{
            type: 'time',
            time: {
              unit: 'month',
              parser: moment.unix,
            },
          }]
        },
      },
    });
  }


  window.onload = function () {
    // Code growth: line charts for "Number of files" and "Number of commits"
    const files_data = merge_timestamps_and_values(files_stamps, files_by_date['Number of files'], files_stamps4, files_by_date4['Number of files']);
    const lines_data = merge_timestamps_and_values(lines_stamps, lines_by_date['Number of lines'], lines_stamps4, lines_by_date4['Number of lines']);

    // makeLineChart('lines_by_authors', 'Number of lines by author', stamps, lines_by_authors);
    // makeLineChart('commits_by_authors', 'Number of commits by author', stamps, commits_by_authors);
    makeLineChart('files_by_date', 'Number of files', files_data.mergedTimestamps,
      { 'Number of files': files_data.mergedMathlib3Vals }, { 'Number of files': files_data.mergedMathlib4Vals }, true);
    makeLineChart('lines_by_date', 'Number of lines', lines_data.mergedTimestamps,
      { 'Number of lines': lines_data.mergedMathlib3Vals }, { 'Number of lines': lines_data.mergedMathlib4Vals }, true);

    // Temporal distribution: bar charts for "Commits by month" and "Commits by year"
    pad_data(by_year_month, by_year_month4);
    pad_data(by_year, by_year4);

    makeBarChart('by_year_month', 'Commits by month', by_year_month, by_year_month4);
    makeBarChart('by_year', 'Commits by year', by_year, by_year4);

    // stacked bar charts for "Commits by labels by month" and "Commits by label by year"
    const by_labels_by_year_month_merged = merge_commit_type_data(by_labels_by_year_month);
    const by_labels_by_year_month_merged4 = merge_commit_type_data(by_labels_by_year_month4);

    const by_labels_by_year_merged = merge_commit_type_data(by_labels_by_year);
    const by_labels_by_year_merged4 = merge_commit_type_data(by_labels_by_year4);

    const by_labels_by_year_month_padded = pad_labels_data(by_labels_by_year_month_merged, by_labels_by_year_month_merged4);
    const by_labels_by_year_padded = pad_labels_data(by_labels_by_year_merged, by_labels_by_year_merged4);

    makeStackedBarChart('by_labels_by_year_month', 'Commits by month', by_labels_by_year_month_padded);
    makeStackedBarChart('by_labels_by_year', 'Commits by year', by_labels_by_year_padded);
  };
</script>

  </body>
</html>