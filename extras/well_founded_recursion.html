<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="https://leanprover-community.github.io//css/lean.css" >
  <link rel="shortcut icon" href="https://leanprover-community.github.io//img/favicon.ico">
  <link rel="search" type="application/opensearchdescription+xml" title="mathlib docs" href="https://leanprover-community.github.io//opensearch.xml">
  <link href="https://fonts.googleapis.com/css2?family=Merriweather&family=Open+Sans&family=Source+Code+Pro:wght@400;600&display=swap" rel="stylesheet">
    

	<script>
                function buildShortcutsForStructures(names) {
                        const o = {}
                        names.forEach(name => o[name] = `\\mathbb\{${name}\}`)
                        return o
                }
		MathJax = {
			  tex: {
                                  macros: {
                                          ...buildShortcutsForStructures(["R", "Q", "Z", "N", "C"]),
                                  },
				      inlineMath: [['$', '$'], ['\\(', '\\)']]
				    },
		};
	</script>
	<script type="text/javascript" id="MathJax-script" async
		  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
	</script>

	<title>The equation compiler and WellFoundedRelation</title>
  </head>
  <body>
  <nav class="navbar navbar-expand-lg navbar-light bg-gradient-light d-md-none">
    <div class="d-flex flex-grow-1">
		<a class="navbar-brand" href="https://leanprover-community.github.io/index.html">Lean Community
    </a>
    </div>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </nav>

<div id="mainbox">

  <main>
    
<h1 id="the-equation-compiler-and-wellfoundedrelation" class="markdown-heading">The equation compiler and WellFoundedRelation <a class="hover-link" href="#the-equation-compiler-and-wellfoundedrelation">#</a></h1>
<p>To define functions and proofs recursively you can use the equation compiler, if you have a well founded relation on that type</p>
<p>For example the definition of gcd on naturals uses well founded recursion</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">def</span><span class="w"> </span><span class="n">gcd</span><span class="w"> </span><span class="o">(</span><span class="n">m</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="n">n</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="n">gcd</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="n">m</span><span class="o">)</span><span class="w"> </span><span class="n">m</span>
<span class="w">  </span><span class="n">termination_by</span><span class="w"> </span><span class="n">m</span>
<span class="w">  </span><span class="n">decreasing_by</span><span class="w"> </span><span class="n">simp_wf</span><span class="bp">;</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">mod_lt</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">(</span><span class="n">zero_lt_of_ne_zero</span><span class="w"> </span><span class="n">_</span><span class="o">)</span><span class="bp">;</span><span class="w"> </span><span class="n">assumption</span>
</code></pre></div>
</div>

<p>Because &lt; is a well founded relation on naturals, and because <code>¬m = 0 → n % m &lt; m</code> this recursive function is well-founded.</p>
<p>Whenever you use the equation compiler, there will be a default well founded relation on the type being recursed on (given by the <code>WellFoundedRelation</code> instance) and the equation compiler will automatically attempt to prove the function is well founded under said relation.</p>
<p>When the equation compiler fails, there are two main causes.</p>
<ol>
<li>It could not find a decreasing measure.</li>
<li>It has failed to prove the required inequality.</li>
</ol>
<h2 id="proving-required-inequality" class="markdown-heading">Proving required inequality <a class="hover-link" href="#proving-required-inequality">#</a></h2>
<p>If we modify the gcd example above, by removing the <code>termination_by</code> &amp; <code>decreasing_by</code>, we get an error.</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">def</span><span class="w"> </span><span class="n">gcd</span><span class="w"> </span><span class="o">(</span><span class="n">m</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="n">n</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="n">gcd</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="n">m</span><span class="o">)</span><span class="w"> </span><span class="n">m</span>
</code></pre></div>
</div>

<div class="codehilite"><div class="codehilite"><pre><span></span><code>fail to show termination for
  Nat.gcd
with errors
argument #1 was not used for structural recursion
  failed to eliminate recursive application
    (n % m).gcd m

argument #2 was not used for structural recursion
  failed to eliminate recursive application
    (n % m).gcd m

structural recursion cannot be used

Could not find a decreasing measure.
The arguments relate at each recursive call as follows:
(&lt;, ≤, =: relation proved, ? all proofs failed, _: no proof attempted)
           m n
1) 93:4-18 ? ?
Please use `termination_by` to specify a decreasing measure.
</code></pre></div>
</div>

<p>The error message says us to use <code>termination_by</code> to specify decreasing measure, so we use <code>m</code> as a decreasing measure, but we get an another error.</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">def</span><span class="w"> </span><span class="n">gcd</span><span class="w"> </span><span class="o">(</span><span class="n">m</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="n">n</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="n">gcd</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="n">m</span><span class="o">)</span><span class="w"> </span><span class="n">m</span>
<span class="w">  </span><span class="n">termination_by</span><span class="w"> </span><span class="n">m</span>
</code></pre></div>
</div>

<div class="codehilite"><div class="codehilite"><pre><span></span><code>failed to prove termination, possible solutions:
  - Use `have`-expressions to prove the remaining goals
  - Use `termination_by` to specify a different well-founded relation
  - Use `decreasing_by` to specify your own tactic for discharging this kind of goal
m n : ℕ
h✝ : ¬m = 0
⊢ n % m &lt; m
</code></pre></div>
</div>

<p>We specified the correct decreasing measure, so our options are to use <code>have</code>-expressions or to use <code>decreasing_by</code>.
Here, we use <code>decreasing_by tactics</code> to prove the termination of this function.
At the first, let's placeholder by <code>sorry</code> to show the goal.</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">def</span><span class="w"> </span><span class="n">gcd</span><span class="w"> </span><span class="o">(</span><span class="n">m</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="n">n</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="n">gcd</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="n">m</span><span class="o">)</span><span class="w"> </span><span class="n">m</span>
<span class="w">  </span><span class="n">termination_by</span><span class="w"> </span><span class="n">m</span>
<span class="w">  </span><span class="n">decreasing_by</span><span class="w"> </span><span class="gr">sorry</span>
</code></pre></div>
</div>

<div class="codehilite"><div class="codehilite"><pre><span></span><code>m n : ℕ
h✝ : ¬m = 0
⊢ (invImage (fun x ↦ PSigma.casesOn x fun m n ↦ m) instWellFoundedRelationOfSizeOf).1 ⟨n % m, m⟩ ⟨m, n⟩
</code></pre></div>
</div>

<p>This goal is compiler-generated so difficult to read, so we simplify the goal with <code>simp_wf</code>.</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">def</span><span class="w"> </span><span class="n">gcd</span><span class="w"> </span><span class="o">(</span><span class="n">m</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="n">n</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="n">gcd</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="n">m</span><span class="o">)</span><span class="w"> </span><span class="n">m</span>
<span class="w">  </span><span class="n">termination_by</span><span class="w"> </span><span class="n">m</span>
<span class="w">  </span><span class="n">decreasing_by</span><span class="w"> </span><span class="n">simp_wf</span><span class="bp">;</span><span class="w"> </span><span class="gr">sorry</span>
</code></pre></div>
</div>

<div class="codehilite"><div class="codehilite"><pre><span></span><code>m n : ℕ
h✝ : ¬m = 0
⊢ n % m &lt; m
</code></pre></div>
</div>

<p>By the way, where the hypothesis <code>h✝ : ¬m = 0</code> come from? Indeed, during a proof of termination, <code>if p then t else f</code> is rewritten into <code>if h : p then t else f</code>, so
the hypothesis <code>p</code> becomes available.</p>
<p>The remained task is only to prove this goal:</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">def</span><span class="w"> </span><span class="n">gcd</span><span class="w"> </span><span class="o">(</span><span class="n">m</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="n">n</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="n">gcd</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="n">m</span><span class="o">)</span><span class="w"> </span><span class="n">m</span>
<span class="w">  </span><span class="n">termination_by</span><span class="w"> </span><span class="n">m</span>
<span class="w">  </span><span class="n">decreasing_by</span><span class="w"> </span><span class="n">simp_wf</span><span class="bp">;</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">mod_lt</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">(</span><span class="n">zero_lt_of_ne_zero</span><span class="w"> </span><span class="n">_</span><span class="o">)</span><span class="bp">;</span><span class="w"> </span><span class="n">assumption</span>
</code></pre></div>
</div>

<p>For your information, if we use the option to use <code>have</code>-expressions, the function is the following form:</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">def</span><span class="w"> </span><span class="n">gcd</span><span class="w"> </span><span class="o">(</span><span class="n">m</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="n">n</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="k">have</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">mod_lt</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">(</span><span class="n">zero_lt_of_ne_zero</span><span class="w"> </span><span class="n">h</span><span class="o">)</span>
<span class="w">    </span><span class="n">gcd</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="n">m</span><span class="o">)</span><span class="w"> </span><span class="n">m</span>
</code></pre></div>
</div>

<p>But the <code>have</code>-expressions may be an obstacle when we use the equation lemma.</p>
<p>Another example is the following function in <code>Data.Multiset.Basic</code>.</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">def</span><span class="w"> </span><span class="n">strongInductionOn</span><span class="w"> </span><span class="o">{</span><span class="n">p</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Multiset</span><span class="w"> </span><span class="n">α</span><span class="w"> </span><span class="bp">→</span><span class="w"> </span><span class="kt">Sort</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Multiset</span><span class="w"> </span><span class="n">α</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">ih</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">∀</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="o">(</span><span class="bp">∀</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&lt;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="bp">→</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">s</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">:=</span>
<span class="w">    </span><span class="o">(</span><span class="n">ih</span><span class="w"> </span><span class="n">s</span><span class="o">)</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">_h</span><span class="w"> </span><span class="bp">=&gt;</span>
<span class="w">      </span><span class="n">strongInductionOn</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">ih</span>
<span class="n">termination_by</span><span class="w"> </span><span class="n">card</span><span class="w"> </span><span class="n">s</span>
<span class="n">decreasing_by</span><span class="w"> </span><span class="n">exact</span><span class="w"> </span><span class="n">card_lt_card</span><span class="w"> </span><span class="n">_h</span>
</code></pre></div>
</div>

<p>This example uses <code>card s</code> as a decreasing measure instead of the argument itself.</p>
<h2 id="wellfoundedrelation-instance" class="markdown-heading">WellFoundedRelation instance <a class="hover-link" href="#wellfoundedrelation-instance">#</a></h2>
<p>We can specify not only an <code>Nat</code> value but also any types with <code>WellFoundedRelation</code> as a decreasing measure, as you can see in <code>Data.List.Defs</code>:</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">def</span><span class="w"> </span><span class="n">permutationsAux.rec</span><span class="w"> </span><span class="o">{</span><span class="n">C</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">α</span><span class="w"> </span><span class="bp">→</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">α</span><span class="w"> </span><span class="bp">→</span><span class="w"> </span><span class="kt">Sort</span><span class="w"> </span><span class="n">v</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">H0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">∀</span><span class="w"> </span><span class="n">is</span><span class="o">,</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="n">is</span><span class="o">)</span>
<span class="w">    </span><span class="o">(</span><span class="n">H1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">∀</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">ts</span><span class="w"> </span><span class="n">is</span><span class="o">,</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="n">ts</span><span class="w"> </span><span class="o">(</span><span class="n">t</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">is</span><span class="o">)</span><span class="w"> </span><span class="bp">→</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="bp">→</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">(</span><span class="n">t</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">ts</span><span class="o">)</span><span class="w"> </span><span class="n">is</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">∀</span><span class="w"> </span><span class="n">l₁</span><span class="w"> </span><span class="n">l₂</span><span class="o">,</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="n">l₁</span><span class="w"> </span><span class="n">l₂</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="o">[],</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">H0</span><span class="w"> </span><span class="n">is</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">ts</span><span class="o">,</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="bp">=&gt;</span>
<span class="w">      </span><span class="n">H1</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">ts</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">(</span><span class="n">permutationsAux.rec</span><span class="w"> </span><span class="n">H0</span><span class="w"> </span><span class="n">H1</span><span class="w"> </span><span class="n">ts</span><span class="w"> </span><span class="o">(</span><span class="n">t</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">is</span><span class="o">))</span><span class="w"> </span><span class="o">(</span><span class="n">permutationsAux.rec</span><span class="w"> </span><span class="n">H0</span><span class="w"> </span><span class="n">H1</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">[])</span>
<span class="w">  </span><span class="n">termination_by</span><span class="w"> </span><span class="n">ts</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="o">(</span><span class="n">length</span><span class="w"> </span><span class="n">ts</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="n">is</span><span class="o">,</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="n">ts</span><span class="o">)</span>
<span class="w">  </span><span class="n">decreasing_by</span><span class="w"> </span><span class="n">all_goals</span><span class="w"> </span><span class="o">(</span><span class="n">simp_wf</span><span class="bp">;</span><span class="w"> </span><span class="n">omega</span><span class="o">)</span>
</code></pre></div>
</div>

<p>This example uses an <code>Nat × Nat</code> value as a decreasing measure. The <code>WellFoundedRelation</code> on this type is a lexicographical order on natural numbers,
defined by the following instance in <code>Init.WF</code>:</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">instance</span><span class="w"> </span><span class="o">[</span><span class="n">ha</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">WellFoundedRelation</span><span class="w"> </span><span class="n">α</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">hb</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">WellFoundedRelation</span><span class="w"> </span><span class="n">β</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">WellFoundedRelation</span><span class="w"> </span><span class="o">(</span><span class="n">α</span><span class="w"> </span><span class="bp">×</span><span class="w"> </span><span class="n">β</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">lex</span><span class="w"> </span><span class="n">ha</span><span class="w"> </span><span class="n">hb</span>
</code></pre></div>
</div>

  </main>

    <nav id="navbar" class="d-md-block bg-light sidebar collapse navbar-light pb-4">
      <div class="d-none d-md-block mt-4"><a class="navbar-brand" href="https://leanprover-community.github.io/index.html">Lean Community</a></div>
      
        <h6 class="sidebar-heading mt-4">Community</h6>
        <ul class="nav">
          <li class="nav-item col-12"><a href="https://leanprover.zulipchat.com/">Zulip chat</a></li>
        
          <li class="nav-item col-12"><a href="https://github.com/leanprover-community/mathlib4">GitHub</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/blog">Blog</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/meet.html">Community information</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/meet.html#community-guidelines">Community guidelines</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/teams.html">Teams</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/papers.html">Papers about Lean</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/lean_projects.html">Projects using Lean</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/teaching/index.html">Teaching using Lean</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/events.html">Events</a></li>
        </ul>
      
        <h6 class="sidebar-heading mt-4">Installation</h6>
        <ul class="nav">
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/get_started.html">Get started</a></li>
        
          <li class="nav-item col-12"><a href="https://live.lean-lang.org/">Online version (no installation)</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/install/project.html">Using Lake (build system)</a></li>
        </ul>
      
        <h6 class="sidebar-heading mt-4">Documentation</h6>
        <ul class="nav">
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/learn.html">Learning resources (start here)</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/mathlib4_docs">API documentation</a></li>
        
          <li class="nav-item col-12"><a href="https://loogle.lean-lang.org/">Declaration search (Loogle)</a></li>
        
          <li class="nav-item col-12"><a href="https://lean-lang.org/doc/reference/latest/">Language reference</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/mathlib-manual/html-multi/">Tactic list</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/extras/calc.html">Calc mode</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/extras/conv.html">Conv mode</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/extras/simp.html">Simplifier</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/extras/well_founded_recursion.html">Well-founded recursion</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/extras/speedup.html">Speeding up Lean files</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/extras/pitfalls.html">Pitfalls and common mistakes</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/mwe.html">About MWEs</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/glossary.html">Glossary</a></li>
        </ul>
      
        <h6 class="sidebar-heading mt-4">Library overviews</h6>
        <ul class="nav">
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/mathlib-overview.html">Library overview</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/undergrad.html">Undergraduate maths</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/100.html">Wiedijk's 100 theorems</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/1000.html">1000+ theorems</a></li>
        </ul>
      
        <h6 class="sidebar-heading mt-4">Theories</h6>
        <ul class="nav">
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/theories/naturals.html">Natural Numbers</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/theories/linear_algebra.html">Linear Algebra</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/theories/sets.html">Sets and finite sets</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/theories/topology.html">Topology</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/theories/category_theory.html">Category Theory</a></li>
        </ul>
      
        <h6 class="sidebar-heading mt-4">Contributing</h6>
        <ul class="nav">
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/index.html">Pull request lifecycle</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/git.html">Git Guide for Mathlib4 Contributors</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/naming.html">Naming conventions</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/style.html">Code style guideline</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/doc.html">Documentation style</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/commit.html">Commit conventions</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/pr-review.html">Pull request review guide</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/mathlib_stats.html">Contribution statistics</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/tags_and_branches.html">Tags and branches</a></li>
        </ul>
      
    </nav>

</div>


  <nav class="footer navbar navbar-expand-lg navbar-light bg-light justify-content-end">
  <ul class="nav">
    <li class="nav-item">
      <a class="nav-link active" href="https://github.com/leanprover-community/leanprover-community.github.io/blob/lean4/templates/extras/well_founded_recursion.md">Suggest edits to this page on GitHub</a>
    </li>
  </ul>
  </nav>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"></script>
    <script src="https://leanprover-community.github.io//js/bootstrap.min.js"></script>
    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true });
    </script>
    
  </body>
</html>