---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/144837PRreviews/00706734freeringandfreecommring.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/144837PRreviews/index.html">PR reviews</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html">#734 free_ring and free_comm_ring</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="158735716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158735716" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158735716">Kenny Lau (Feb 17 2019 at 09:18)</a>:</h4>
<p>Suggestions / Discussions? Do we like polynomials? <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span></p>

<a name="158735867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158735867" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158735867">Chris Hughes (Feb 17 2019 at 09:23)</a>:</h4>
<p>Isn't a free comm ring an integer polynomial?</p>

<a name="158735870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158735870" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158735870">Kenny Lau (Feb 17 2019 at 09:23)</a>:</h4>
<p>they're isomorphic</p>

<a name="158735921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158735921" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158735921">Chris Hughes (Feb 17 2019 at 09:24)</a>:</h4>
<p>So why define them twice?</p>

<a name="158736048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158736048" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158736048">Kevin Buzzard (Feb 17 2019 at 09:29)</a>:</h4>
<p>This sounds like an implementation issue to me so I don't think I'll be much help</p>

<a name="158736128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158736128" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158736128">Kenny Lau (Feb 17 2019 at 09:31)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> because here we don't need <code>\a</code> discrete for <code>free_comm_ring \a</code> to be a <code>comm_ring</code></p>

<a name="158736186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158736186" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158736186">Chris Hughes (Feb 17 2019 at 09:32)</a>:</h4>
<p>Does discrete mean decidable equality?</p>

<a name="158736205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158736205" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158736205">Kenny Lau (Feb 17 2019 at 09:33)</a>:</h4>
<p>yes</p>

<a name="158736616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158736616" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158736616">Johannes Hölzl (Feb 17 2019 at 09:44)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> when you write a PR like this you should more clearly state your intention. Github PR's provide a comment field for a reason. I guess your idea is to replace the current <code>data.polynomial</code> with this implementation?</p>

<a name="158736670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158736670" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158736670">Kenny Lau (Feb 17 2019 at 09:46)</a>:</h4>
<p>well I think <code>free_ring</code> is important in and of itself; I see a lot of work that has to be done if one wants to replace <code>data.polynomial</code> with this implementation</p>

<a name="158736743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158736743" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158736743">Kenny Lau (Feb 17 2019 at 09:49)</a>:</h4>
<p><span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> don't we like free functors?</p>

<a name="158736746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158736746" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158736746">Chris Hughes (Feb 17 2019 at 09:49)</a>:</h4>
<p>He's talking about <code>free_comm_ring</code> I'm guessing.</p>

<a name="158736803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158736803" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158736803">Johannes Hölzl (Feb 17 2019 at 09:50)</a>:</h4>
<p>Yes, the title is <code>free_comm_ring</code>. If this is added to mathlib I think we should replace <code>polynomial</code> and <code>mv_polynomial</code> otherwise we will have a lot of duplicate work</p>

<a name="158736909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158736909" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158736909">Kenny Lau (Feb 17 2019 at 09:54)</a>:</h4>
<p>changed thread title</p>

<a name="158736917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158736917" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158736917">Kenny Lau (Feb 17 2019 at 09:55)</a>:</h4>
<p>I am talking about both</p>

<a name="158738839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158738839" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158738839">Jan-David Salchow (Feb 17 2019 at 10:56)</a>:</h4>
<p>I'm already confused about <code>free_abelian_group α</code>. What's the difference between it at the add_comm_group pi_instance on <code>α → ℤ</code>?</p>

<a name="158738968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158738968" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158738968">Kenny Lau (Feb 17 2019 at 11:00)</a>:</h4>
<p>you need decidable equality on <code>\a</code> for the latter</p>

<a name="158738972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158738972" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158738972">Chris Hughes (Feb 17 2019 at 11:00)</a>:</h4>
<p>Free abelian groups need to be finitely supported functions. So <code>α →₀ ℤ</code> would be isomorphic.</p>

<a name="158738983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158738983" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158738983">Chris Hughes (Feb 17 2019 at 11:01)</a>:</h4>
<p>But decidable equality isn't a very good justification to define things twice.</p>

<a name="158738999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158738999" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158738999">Jan-David Salchow (Feb 17 2019 at 11:01)</a>:</h4>
<p>Where is decidable equality needed?</p>

<a name="158739131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158739131" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158739131">Chris Hughes (Feb 17 2019 at 11:05)</a>:</h4>
<p>The support of the sum of two finsupps is the union of the supports. You need decidable equality for union of finsets.</p>

<a name="158739188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158739188" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158739188">Jan-David Salchow (Feb 17 2019 at 11:06)</a>:</h4>
<p>I see, thanks</p>

<a name="158739246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158739246" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158739246">Chris Hughes (Feb 17 2019 at 11:08)</a>:</h4>
<p>Kenny I think used multisets, and effectively quotiented by extensionality, and ignoring zeros. I'm not a fan of this approach. I don't think computing on types without decidable equality is very often useful, and you are slowing down the computations quite a bit with this approach I guess as well.</p>

<a name="158739511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158739511" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158739511">Mario Carneiro (Feb 17 2019 at 11:16)</a>:</h4>
<p>For actual computations, neither approach is much good</p>

<a name="158739521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158739521" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158739521">Mario Carneiro (Feb 17 2019 at 11:17)</a>:</h4>
<p>we would need an explicit computational type that looks more like some GAP data type</p>

<a name="158739572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158739572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158739572">Mario Carneiro (Feb 17 2019 at 11:18)</a>:</h4>
<p>so the "computable" marker is not much more than a gimmick in any case</p>

<a name="158739630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158739630" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158739630">Mario Carneiro (Feb 17 2019 at 11:20)</a>:</h4>
<p>I think maybe we should just remove the <code>decidable_eq</code> constraint from <code>finsupp</code></p>

<a name="158739644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158739644" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158739644">Chris Hughes (Feb 17 2019 at 11:20)</a>:</h4>
<p>It depends how hard the computations are.</p>

<a name="158739647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158739647" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158739647">Mario Carneiro (Feb 17 2019 at 11:20)</a>:</h4>
<p>I think it's one of the factors in why typeclass inference on polynomials is so slow</p>

<a name="158739656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158739656" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158739656">Mario Carneiro (Feb 17 2019 at 11:21)</a>:</h4>
<p>For provable computations we should use <code>ring</code> or something that manipulates polynomial expressions</p>

<a name="158739661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158739661" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158739661">Mario Carneiro (Feb 17 2019 at 11:21)</a>:</h4>
<p>and computability doesn't matter for this</p>

<a name="158739709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158739709" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158739709">Chris Hughes (Feb 17 2019 at 11:22)</a>:</h4>
<p>There was some talk about removing finsupp, and replacing it with dfinsupp, which is a quotient and doesn't use decidable equality. In any case, I'm not in favour of having two different versions of the same thing, just because of some decidable equality issue.</p>

<a name="158739712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158739712" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158739712">Mario Carneiro (Feb 17 2019 at 11:23)</a>:</h4>
<p>I agree there</p>

<a name="158739721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158739721" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158739721">Mario Carneiro (Feb 17 2019 at 11:23)</a>:</h4>
<p>I don't know whether kenny's latest version of <code>free_comm_ring</code> is better than <code>polynomial</code> but there should only be one</p>

<a name="158740867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/158740867" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#158740867">Kenny Lau (Feb 17 2019 at 11:58)</a>:</h4>
<p>Also, I sneaked in some monad instance; should I do that?</p>

<a name="159094840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23734%20free_ring%20and%20free_comm_ring/near/159094840" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/00706734freeringandfreecommring.html#159094840">Kenny Lau (Feb 21 2019 at 19:06)</a>:</h4>
<p>free_comm_ring is faster than mv_polynomial in my usecase</p>


{% endraw %}

{% include archive_update.html %}