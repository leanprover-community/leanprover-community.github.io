---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/144837PRreviews/84759766cacheolean.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/144837PRreviews/index.html">PR reviews</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html">#766 cache-olean</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="161719001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161719001" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161719001">Scott Morrison (Mar 26 2019 at 00:36)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span>, could you explain the logic in <code>auth_github</code> in <code>cache-olean.sh</code>? It seems the <code>github.oauthtoken</code> will only ever be looked at if we've failed to find a user and password?</p>

<a name="161719005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161719005" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161719005">Scott Morrison (Mar 26 2019 at 00:36)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/766/files#diff-dbd7f4184984f905b3e1ed514ca280ccR20" target="_blank" title="https://github.com/leanprover-community/mathlib/pull/766/files#diff-dbd7f4184984f905b3e1ed514ca280ccR20">https://github.com/leanprover-community/mathlib/pull/766/files#diff-dbd7f4184984f905b3e1ed514ca280ccR20</a></p>

<a name="161719354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161719354" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161719354">Scott Morrison (Mar 26 2019 at 00:43)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> --- also, what access is needed by the OAuth token, if <code>cache-olean.sh</code> is using that to talk to github?</p>

<a name="161719412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161719412" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161719412">Scott Morrison (Mar 26 2019 at 00:44)</a>:</h4>
<p>Ah, regarding the logic, I see what's going on, and will tweak it so an error is only printed if _neither_ a password _nor_ an OAuth token are found</p>

<a name="161719418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161719418" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161719418">Simon Hudon (Mar 26 2019 at 00:44)</a>:</h4>
<p>That sounds good.</p>

<a name="161719437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161719437" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161719437">Simon Hudon (Mar 26 2019 at 00:45)</a>:</h4>
<p>I don't think you actually need any permission with the token</p>

<a name="161719655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161719655" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161719655">Scott Morrison (Mar 26 2019 at 00:49)</a>:</h4>
<p>ok!</p>

<a name="161719713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161719713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161719713">Scott Morrison (Mar 26 2019 at 00:50)</a>:</h4>
<p>I just pushed a commit to this PR that improved the error handling.</p>

<a name="161719720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161719720" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161719720">Scott Morrison (Mar 26 2019 at 00:50)</a>:</h4>
<p>I will test the permisson on the token an update.</p>

<a name="161719813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161719813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161719813">Simon Hudon (Mar 26 2019 at 00:52)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span>  thanks</p>

<a name="161719818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161719818" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161719818">Scott Morrison (Mar 26 2019 at 00:52)</a>:</h4>
<p>looks good with no scopes</p>

<a name="161719821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161719821" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161719821">Scott Morrison (Mar 26 2019 at 00:52)</a>:</h4>
<p>So -- now whenever I <code>git checkout master</code>, I get the following:</p>

<a name="161719833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161719833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161719833">Scott Morrison (Mar 26 2019 at 00:53)</a>:</h4>
<div class="codehilite"><pre><span></span>idaeus:mathlib scott$ git checkout master
Switched to branch &#39;master&#39;
Your branch is up to date with &#39;origin/master&#39;.
Trying to fetch cached olean
Querying GitHub...
Error: no nightly archive found
no cache found
</pre></div>

<a name="161719845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161719845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161719845">Scott Morrison (Mar 26 2019 at 00:53)</a>:</h4>
<p>how do I convince it to just use the <code>olean</code> files on hand?</p>

<a name="161719959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161719959" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161719959">Simon Hudon (Mar 26 2019 at 00:56)</a>:</h4>
<p>What do you mean by "on hand"?</p>

<a name="161720105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720105" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720105">Scott Morrison (Mar 26 2019 at 00:58)</a>:</h4>
<p>I've run <code>leanpkg build</code>, so they are all sitting around</p>

<a name="161720116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720116">Scott Morrison (Mar 26 2019 at 00:58)</a>:</h4>
<p>or is this not the intended use?</p>

<a name="161720141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720141" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720141">Simon Hudon (Mar 26 2019 at 00:59)</a>:</h4>
<p>They're not discarded. If no cache is found, they will still be lying around and you default to using them.</p>

<a name="161720148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720148" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720148">Scott Morrison (Mar 26 2019 at 00:59)</a>:</h4>
<p>On the other hand, when I <code>git checkout olean-cache</code>, I see:</p>
<div class="codehilite"><pre><span></span>idaeus:mathlib scott$ git checkout olean-cache
Switched to branch &#39;olean-cache&#39;
Your branch is up to date with &#39;origin/olean-cache&#39;.
Trying to fetch cached olean
</pre></div>


<p>but then nothing more.</p>

<a name="161720151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720151" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720151">Scott Morrison (Mar 26 2019 at 00:59)</a>:</h4>
<p>What does that indicate?</p>

<a name="161720160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720160">Scott Morrison (Mar 26 2019 at 00:59)</a>:</h4>
<p>Presumably there should be a "success!" message somewhere?</p>

<a name="161720228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720228" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720228">Scott Morrison (Mar 26 2019 at 01:00)</a>:</h4>
<p>So, while I'm on the master branch, how do I tell <code>cache-olean</code> that is should "make use of" the currently existing <code>olean</code> files?</p>

<a name="161720230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720230" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720230">Scott Morrison (Mar 26 2019 at 01:00)</a>:</h4>
<p>i.e., so I can switch to some other branch, and then back to <code>master</code>, and not get error messages?</p>

<a name="161720313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720313" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720313">Scott Morrison (Mar 26 2019 at 01:02)</a>:</h4>
<p>Hmm... strangely, when I checkout master, I get the error messages above, but if I run <code>cache-olean --fetch</code> while on the master branch it says nothing.</p>

<a name="161720314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720314">Chris Hughes (Mar 26 2019 at 01:02)</a>:</h4>
<p>I guess you have to fiddle with timestamps.</p>

<a name="161720331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720331" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720331">Scott Morrison (Mar 26 2019 at 01:03)</a>:</h4>
<p>hmm... I thought that the point was that <code>cache-olean</code> was dealing with timestamps for us?</p>

<a name="161720336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720336" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720336">Simon Hudon (Mar 26 2019 at 01:03)</a>:</h4>
<p>It should</p>

<a name="161720397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720397" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720397">Simon Hudon (Mar 26 2019 at 01:04)</a>:</h4>
<p>It zips <code>.lean</code> files and <code>.olean</code> files together so their time stamps have the proper relation to each other</p>

<a name="161720530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720530" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720530">Simon Hudon (Mar 26 2019 at 01:07)</a>:</h4>
<p>try <code>git rev-parse HEAD</code>, take the hash and see if you find a corresponding file in <code>_cache</code></p>

<a name="161720544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720544" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720544">Scott Morrison (Mar 26 2019 at 01:07)</a>:</h4>
<p>oh dear, now a <code>NameError: name 'urllib3' is not defined</code></p>

<a name="161720603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720603">Simon Hudon (Mar 26 2019 at 01:08)</a>:</h4>
<p>What did you do?</p>

<a name="161720613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720613" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720613">Scott Morrison (Mar 26 2019 at 01:08)</a>:</h4>
<p>That error just came from <code>git checkout master</code></p>

<a name="161720618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720618" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720618">Simon Hudon (Mar 26 2019 at 01:09)</a>:</h4>
<p>No more outputs?</p>

<a name="161720634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720634" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720634">Scott Morrison (Mar 26 2019 at 01:09)</a>:</h4>
<div class="codehilite"><pre><span></span>idaeus:scripts scott$ git checkout master
Switched to branch &#39;master&#39;
Your branch is up to date with &#39;origin/master&#39;.
Trying to fetch cached olean
Querying GitHub...
Downloading nightly...
Traceback (most recent call last):
  File &quot;/Users/scott/.mathlib/bin/cache-olean&quot;, line 117, in &lt;module&gt;
    fetch_mathlib(asset)
  File &quot;/Users/scott/.mathlib/bin/cache-olean&quot;, line 74, in fetch_mathlib
    http = urllib3.PoolManager(
NameError: name &#39;urllib3&#39; is not defined
</pre></div>

<a name="161720646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720646" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720646">Scott Morrison (Mar 26 2019 at 01:09)</a>:</h4>
<p>Sorry, have to run, I will investigate again later.</p>

<a name="161720651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720651" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720651">Simon Hudon (Mar 26 2019 at 01:10)</a>:</h4>
<p>Oh ok, add <code>import urllib3</code> at the beginning</p>

<a name="161720699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720699" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720699">Scott Morrison (Mar 26 2019 at 01:10)</a>:</h4>
<p>(I've run <code>setup-dev-scripts</code> or whatever, and it reported urllib3 was already there.)</p>

<a name="161720700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720700" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720700">Simon Hudon (Mar 26 2019 at 01:10)</a>:</h4>
<p>(dynamic languages are the worse)</p>

<a name="161720717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720717" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720717">Simon Hudon (Mar 26 2019 at 01:10)</a>:</h4>
<p>Yeah but <code>cache-olean.py</code> has to import it</p>

<a name="161720832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720832" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720832">Scott Morrison (Mar 26 2019 at 01:12)</a>:</h4>
<p>woot!</p>

<a name="161720836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720836" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720836">Scott Morrison (Mar 26 2019 at 01:12)</a>:</h4>
<p>another missing import, but things may be working now</p>

<a name="161720838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720838" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720838">Scott Morrison (Mar 26 2019 at 01:12)</a>:</h4>
<p>later!</p>

<a name="161720846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161720846" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161720846">Simon Hudon (Mar 26 2019 at 01:12)</a>:</h4>
<p>See you later!</p>

<a name="161723460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161723460" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161723460">Scott Morrison (Mar 26 2019 at 02:10)</a>:</h4>
<p>Ooof... <code>cache-olean</code> is having a bad interaction with the GUI I use to rebase.</p>

<a name="161723462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161723462" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161723462">Scott Morrison (Mar 26 2019 at 02:10)</a>:</h4>
<p>Sample error message:</p>
<div class="codehilite"><pre><span></span>Note: checking out &#39;d5e5a3adf687e8d19d93e57d317ad8c5bc307fc7&#39;.

You are in &#39;detached HEAD&#39; state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

  git checkout -b &lt;new-branch-name&gt;

HEAD is now at d5e5a3ad adding some more user feedback
Trying to fetch cached olean
env: python3: No such file or directory
error: could not detach HEAD
</pre></div>

<a name="161723485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161723485" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161723485">Scott Morrison (Mar 26 2019 at 02:11)</a>:</h4>
<p>I guess we should make sure the hooks fail gracefully.</p>

<a name="161724208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161724208" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161724208">Scott Morrison (Mar 26 2019 at 02:25)</a>:</h4>
<p>ok, fixed</p>

<a name="161759055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161759055" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161759055">Simon Hudon (Mar 26 2019 at 13:03)</a>:</h4>
<p>Good! Thanks so much for doing this!</p>

<a name="161835113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161835113" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161835113">Scott Morrison (Mar 27 2019 at 07:23)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span>, what is the reasoning for not storing the cache in <code>cache-olean --build</code> when the build fails? Surely many people often spend a long time working on a branch that is failing, before everything comes good.</p>

<a name="161836179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161836179" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161836179">Kevin Buzzard (Mar 27 2019 at 07:46)</a>:</h4>
<p>Why is it Simon's job to store stuff that the community in general is not interested in?</p>

<a name="161836200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161836200" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161836200">Mario Carneiro (Mar 27 2019 at 07:47)</a>:</h4>
<p>I think <code>cache-olean</code> stores stuff locally</p>

<a name="161851231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161851231" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161851231">Simon Hudon (Mar 27 2019 at 11:48)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> I think you're right. We could change that. I'm wondering if we could also store the cache when the user interrupts the build (e.g. with <code>ctrl+C</code>) but I'm not sure if there's a way to do that.</p>

<a name="161851396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161851396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161851396">Johan Commelin (Mar 27 2019 at 11:50)</a>:</h4>
<p>Why would you need that second feature?</p>

<a name="161851404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161851404" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161851404">Johan Commelin (Mar 27 2019 at 11:50)</a>:</h4>
<p>Lean will pick up from where you stopped, right?</p>

<a name="161852041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161852041" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161852041">Simon Hudon (Mar 27 2019 at 12:00)</a>:</h4>
<p>That's right</p>

<a name="161892737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161892737" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161892737">Scott Morrison (Mar 27 2019 at 19:28)</a>:</h4>
<p>at least on OS X this happens already; the first ctrl-C stops the build, but python continues.</p>

<a name="161899616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161899616" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161899616">Scott Morrison (Mar 27 2019 at 20:54)</a>:</h4>
<p>Okay, we now store the cache even when the build fails (or is cancelled by ctrl-c).</p>

<a name="161899623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161899623" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161899623">Scott Morrison (Mar 27 2019 at 20:54)</a>:</h4>
<p>I'm pretty happy with this now. I need to write some docs.</p>

<a name="161899667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161899667" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161899667">Scott Morrison (Mar 27 2019 at 20:55)</a>:</h4>
<p>I would also like --fetch to work more often. :-) If travis has seen that commit, there could be a cached copy of the oleans!</p>

<a name="161899732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161899732" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161899732">Scott Morrison (Mar 27 2019 at 20:56)</a>:</h4>
<p>I might also try writing <code>--list</code>, which shows the status of the cache for each local branch. But I won't hold up the PR to do that.</p>

<a name="161900277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161900277" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161900277">Patrick Massot (Mar 27 2019 at 21:03)</a>:</h4>
<p>Of course we would like cached olean for everything that Travis once compiled. It would help PR reviewing a lot (at least for me). For instance I compiled the convexity PR (but haven't found time to carefully look at it). But there are storage issues. GitHub won't let us store infinitely many releases</p>

<a name="161901566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161901566" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161901566">Scott Morrison (Mar 27 2019 at 21:21)</a>:</h4>
<p>If storage is the only requirement, I have a server that we could use. I'm not concerned about storage or bandwidth, and I'd be happy to allow uploads in some moderately controlled fashion.</p>

<a name="161901575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161901575" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161901575">Scott Morrison (Mar 27 2019 at 21:21)</a>:</h4>
<p>For cached oleans, high reliability is not necessary.</p>

<a name="161905664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161905664" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161905664">Simon Hudon (Mar 27 2019 at 22:23)</a>:</h4>
<p>That would be nice. We can get Travis to upload the cache then and decide to delete caches older than 1 or 2 months</p>

<a name="161925977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161925977" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161925977">Scott Morrison (Mar 28 2019 at 05:48)</a>:</h4>
<p>maybe the right approach is to not directly upload to my server, which sounds hard to manage, security wise</p>

<a name="161926005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161926005" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161926005">Scott Morrison (Mar 28 2019 at 05:50)</a>:</h4>
<p>Instead perhaps we could have travis post everything it builds somewhere (along with the olean artifacts from master?) but deleting them after a few days. I can then have my machine poll that supply of caches, and copy them to a publicly accessible location, where it can store them for much longer.</p>

<a name="161926060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161926060" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161926060">Scott Morrison (Mar 28 2019 at 05:50)</a>:</h4>
<p>I can certainly set up the "scrape the following webpage for artifacts, post them online" step, if someone else, presumably <span class="user-mention" data-user-id="110026">@Simon Hudon</span> could handle the travis part.</p>

<a name="161926279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161926279" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161926279">Scott Morrison (Mar 28 2019 at 05:57)</a>:</h4>
<p>Another issue we need to fix with this PR eventually: hitting Ctrl-C can break the cache, and result in ... crap all over your repository :-) I'm not a python ninja, but <a href="https://stackoverflow.com/questions/842557/how-to-prevent-a-block-of-code-from-being-interrupted-by-keyboardinterrupt-in-py" target="_blank" title="https://stackoverflow.com/questions/842557/how-to-prevent-a-block-of-code-from-being-interrupted-by-keyboardinterrupt-in-py">https://stackoverflow.com/questions/842557/how-to-prevent-a-block-of-code-from-being-interrupted-by-keyboardinterrupt-in-py</a> seems to have some solutions.</p>

<a name="161937168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/161937168" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#161937168">Scott Morrison (Mar 28 2019 at 09:53)</a>:</h4>
<p>cf <a href="https://github.com/leanprover-community/mathlib/issues/857" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/857">#857</a> and <a href="https://github.com/leanprover-community/mathlib/issues/858" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/858">#858</a> for some improvements</p>

<a name="162155722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/162155722" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#162155722">Scott Morrison (Mar 31 2019 at 04:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span>, we still have some problems... The post-checkout hooks is working great when I work solely on the commandline, but I often also change branches from VS Code, or from Sourcetree.</p>
<p>Changing branches from VS Code seems to work fine (although if you don't restart the server VS Code gets unhappy --- can we add a hook to prompt restarting the server anytime the olean cache is restored??)</p>

<a name="162155727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/162155727" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#162155727">Scott Morrison (Mar 31 2019 at 04:39)</a>:</h4>
<p>However changing branches from sourcetree, the post-checkout hook is not being called.</p>

<a name="162156035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/162156035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#162156035">Scott Morrison (Mar 31 2019 at 04:48)</a>:</h4>
<p>The problem is just one I'd seen before --- the environment git is run in from sourcetree doesn't know how to find python3, so our scripts can't run.</p>

<a name="162156433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/162156433" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#162156433">Scott Morrison (Mar 31 2019 at 04:59)</a>:</h4>
<p>Okay... it seems that Sourcetree <a href="https://community.atlassian.com/t5/Bitbucket-questions/SourceTree-Hook-failing-because-paths-don-t-seem-to-be-set/qaq-p/274792" target="_blank" title="https://community.atlassian.com/t5/Bitbucket-questions/SourceTree-Hook-failing-because-paths-don-t-seem-to-be-set/qaq-p/274792">doesn't</a> like to put /usr/local/bin/ on the path, and that's where <code>python3</code> lives. I'm going to put</p>
<div class="codehilite"><pre><span></span>export PATH=/usr/local/bin:$PATH
</pre></div>


<p>in our git hooks.</p>

<a name="162175649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/162175649" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#162175649">Simon Hudon (Mar 31 2019 at 13:52)</a>:</h4>
<p>Can we use <code>source ~/.profile</code> instead? Or maybe use <code>env</code>?</p>

<a name="162192030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/162192030" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#162192030">Scott Morrison (Mar 31 2019 at 21:07)</a>:</h4>
<p>So <code>env</code> isn't working (precisely because <code>/usr/local/bin/</code> is not on the PATH), and <code>source ~/.profile</code> doesn't work, because it seems that on mac OS a shell usually starts with <code>/usr/local/bin</code> on the PATH already. (I checked <code>env -i bash --norc --noprofile</code>, and it's already there.)</p>

<a name="162192157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/162192157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#162192157">Simon Hudon (Mar 31 2019 at 21:11)</a>:</h4>
<p>what if we only add <code>/usr/local/bin</code> to the path and then invoke <code>env</code>?</p>

<a name="162192212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/162192212" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#162192212">Scott Morrison (Mar 31 2019 at 21:12)</a>:</h4>
<p>Somehow sourcetree is doing something dumb, and managing to provide a shell without a OS default path.</p>

<a name="162192213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/162192213" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#162192213">Scott Morrison (Mar 31 2019 at 21:12)</a>:</h4>
<p>I can try raising a bug with them, but I want this to work in the meantime.</p>

<a name="162192222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/162192222" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#162192222">Scott Morrison (Mar 31 2019 at 21:13)</a>:</h4>
<blockquote>
<p>what if we only add /usr/local/bin to the path and then invoke env?</p>
</blockquote>
<p>Isn't this what we're doing?</p>

<a name="162192364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/162192364" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#162192364">Simon Hudon (Mar 31 2019 at 21:17)</a>:</h4>
<p>Sorry, I think I saw something else on github. That sounds more reasonable. I was hesitant to put <code>~/.mathlib/bin</code> in the path.</p>

<a name="162197400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/162197400" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#162197400">Scott Morrison (Mar 31 2019 at 23:34)</a>:</h4>
<p>err... I think <code>~/.mathlib/bin</code> has been put on the path at the beginning of the hook all along, so we can call <code>cache-olean</code>?</p>

<a name="162197495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/162197495" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#162197495">Simon Hudon (Mar 31 2019 at 23:37)</a>:</h4>
<p>oh</p>

<a name="162197498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23766%20cache-olean/near/162197498" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/84759766cacheolean.html#162197498">Simon Hudon (Mar 31 2019 at 23:37)</a>:</h4>
<p>Alright, anything goes then</p>


{% endraw %}

{% include archive_update.html %}