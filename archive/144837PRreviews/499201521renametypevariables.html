---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/144837PRreviews/499201521renametypevariables.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/144837PRreviews/index.html">PR reviews</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html">#1521 rename type variables</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="177649293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177649293" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177649293">Patrick Massot (Oct 08 2019 at 19:18)</a>:</h4>
<p>I'd like to work a bit on that PR. How to we coordinate?</p>

<a name="177649316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177649316" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177649316">Patrick Massot (Oct 08 2019 at 19:18)</a>:</h4>
<p><span class="user-mention" data-user-id="110596">@Rob Lewis</span> are you currently working on it?</p>

<a name="177649324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177649324" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177649324">Rob Lewis (Oct 08 2019 at 19:19)</a>:</h4>
<p>Claim a file. I'm done with it for the evening at least.</p>

<a name="177649357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177649357" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177649357">Patrick Massot (Oct 08 2019 at 19:19)</a>:</h4>
<p>Is there an ordering?</p>

<a name="177649479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177649479" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177649479">Rob Lewis (Oct 08 2019 at 19:20)</a>:</h4>
<p>Uh, I don't think so.</p>

<a name="177649501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177649501" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177649501">Patrick Massot (Oct 08 2019 at 19:20)</a>:</h4>
<p>Let's say I'm doing <code>bilinear_form.lean</code></p>

<a name="177649507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177649507" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177649507">Patrick Massot (Oct 08 2019 at 19:20)</a>:</h4>
<p>I'll create a task list.</p>

<a name="177649662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177649662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177649662">Rob Lewis (Oct 08 2019 at 19:22)</a>:</h4>
<p>What are the odds we accidentally change something non-cosmetic in this PR?</p>

<a name="177649739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177649739" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177649739">Rob Lewis (Oct 08 2019 at 19:23)</a>:</h4>
<p>We should probably write something to check that we don't accidentally mess things up.</p>

<a name="177649752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177649752" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177649752">Rob Lewis (Oct 08 2019 at 19:23)</a>:</h4>
<p>But I'm not sure how.</p>

<a name="177649840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177649840" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177649840">Patrick Massot (Oct 08 2019 at 19:24)</a>:</h4>
<p>Well, we will check it will build</p>

<a name="177649857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177649857" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177649857">Patrick Massot (Oct 08 2019 at 19:24)</a>:</h4>
<p>I assumed the three files that were edited were done.</p>

<a name="177649871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177649871" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177649871">Patrick Massot (Oct 08 2019 at 19:25)</a>:</h4>
<p>See the list on the PR page</p>

<a name="177650045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177650045" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177650045">Rob Lewis (Oct 08 2019 at 19:26)</a>:</h4>
<p>Yeah, they're done.</p>

<a name="177650094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177650094" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177650094">Rob Lewis (Oct 08 2019 at 19:27)</a>:</h4>
<p>But I'm worried we'll accidentally specialize a universe level or something that doesn't break the build.</p>

<a name="177650197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177650197" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177650197">Rob Lewis (Oct 08 2019 at 19:28)</a>:</h4>
<p>We probably want to update <code>algebra.module</code> too.</p>

<a name="177650236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177650236" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177650236">Patrick Massot (Oct 08 2019 at 19:29)</a>:</h4>
<p>Can't you use meta-programming to assert that two statements are the same modulo naming?</p>

<a name="177650270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177650270" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177650270">Patrick Massot (Oct 08 2019 at 19:29)</a>:</h4>
<p>We could have a folder ¬†<code>renamed_linear_algebra</code> to access both versions at the same time</p>

<a name="177650436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177650436" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177650436">Rob Lewis (Oct 08 2019 at 19:31)</a>:</h4>
<p>Yes, but you need to fix the nameclashes somehow. I'm not sure if putting the whole file in a namespace will work.</p>

<a name="177650470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177650470" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177650470">Patrick Massot (Oct 08 2019 at 19:31)</a>:</h4>
<p>True.</p>

<a name="177650615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177650615" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177650615">Patrick Massot (Oct 08 2019 at 19:33)</a>:</h4>
<p>What should be the name of another ring? <code>S</code>?</p>

<a name="177650746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177650746" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177650746">Rob Lewis (Oct 08 2019 at 19:35)</a>:</h4>
<p>I used <code>M M‚ÇÇ V V‚ÇÇ ...</code>. Didn't have more than one ring, but there's an obvious pattern.</p>

<a name="177650847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177650847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177650847">Patrick Massot (Oct 08 2019 at 19:36)</a>:</h4>
<p>Actually it's not really a second ring. The first one is a <code>ring</code> and the second one is <code>comm_ring</code>, but the first variable is still there.</p>

<a name="177650949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177650949" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177650949">Rob Lewis (Oct 08 2019 at 19:37)</a>:</h4>
<p>Up to you then.</p>

<a name="177651345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177651345" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177651345">Patrick Massot (Oct 08 2019 at 19:41)</a>:</h4>
<p><code>bilinear_form.lean</code> is done</p>

<a name="177651406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177651406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177651406">Patrick Massot (Oct 08 2019 at 19:42)</a>:</h4>
<p>I'll work on determinant</p>

<a name="177651438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177651438" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177651438">Patrick Massot (Oct 08 2019 at 19:42)</a>:</h4>
<p>It's also done</p>

<a name="177651450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177651450" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177651450">Patrick Massot (Oct 08 2019 at 19:42)</a>:</h4>
<p>That was actually a rebellious file.</p>

<a name="177651513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177651513" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177651513">Patrick Massot (Oct 08 2019 at 19:43)</a>:</h4>
<p>I'll move to <code>direct_sum_module</code></p>

<a name="177652385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177652385" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177652385">Johan Commelin (Oct 08 2019 at 19:53)</a>:</h4>
<p>I'll start working on <code>dual.lean</code></p>

<a name="177652432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177652432" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177652432">Johan Commelin (Oct 08 2019 at 19:53)</a>:</h4>
<p>Lol... it was already written by a mathematician. Next.</p>

<a name="177652493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177652493" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177652493">Johan Commelin (Oct 08 2019 at 19:54)</a>:</h4>
<p>I'll start on <code>finite_dimensional.lean</code></p>

<a name="177652576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177652576" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177652576">Johan Commelin (Oct 08 2019 at 19:55)</a>:</h4>
<p>Is it ok if fields are called <code>K</code>? Or do we insist on blackboard bold <code>k</code>?</p>

<a name="177652596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177652596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177652596">Johan Commelin (Oct 08 2019 at 19:55)</a>:</h4>
<p>In the algebra directory we are using <code>K</code> a lot</p>

<a name="177652617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177652617" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177652617">Johan Commelin (Oct 08 2019 at 19:55)</a>:</h4>
<p>If there are no compact subgroups in sight, I wouldn't mind <code>K</code></p>

<a name="177652699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177652699" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177652699">Rob Lewis (Oct 08 2019 at 19:56)</a>:</h4>
<p>Oh, wait, I just noticed I used a different <code>k</code> from Alex.</p>

<a name="177652772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177652772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177652772">Rob Lewis (Oct 08 2019 at 19:57)</a>:</h4>
<p>We should probably pick one and standardize on it if we're going through all this trouble.</p>

<a name="177652933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177652933" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177652933">Johan Commelin (Oct 08 2019 at 19:59)</a>:</h4>
<p>But a field extension is called <code>L</code></p>

<a name="177652953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177652953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177652953">Johan Commelin (Oct 08 2019 at 19:59)</a>:</h4>
<p>And <code>L</code> over blackboard bold <code>k</code> looks weird</p>

<a name="177652970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177652970" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177652970">Johan Commelin (Oct 08 2019 at 19:59)</a>:</h4>
<p>So I think we should allow different things for fields in different parts of the library</p>

<a name="177653087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177653087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177653087">Johan Commelin (Oct 08 2019 at 20:00)</a>:</h4>
<p>I'm currently looking at <code>finsupp_vector_space.lean</code>.</p>

<a name="177653147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177653147" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177653147">Johan Commelin (Oct 08 2019 at 20:00)</a>:</h4>
<p>It needs index sets for families of vectors. Do we call those <code>alpha</code>? or <code>iota</code>?</p>

<a name="177653159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177653159" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177653159">Rob Lewis (Oct 08 2019 at 20:00)</a>:</h4>
<p><code>iota</code> for index sets.</p>

<a name="177653171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177653171" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177653171">Rob Lewis (Oct 08 2019 at 20:00)</a>:</h4>
<p>I don't care what K we use as long as we use the same K.</p>

<a name="177653182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177653182" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177653182">Patrick Massot (Oct 08 2019 at 20:01)</a>:</h4>
<p><code>direct_sum_module</code> is done</p>

<a name="177653238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177653238" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177653238">Patrick Massot (Oct 08 2019 at 20:01)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="double-struck">k</mi></mrow><annotation encoding="application/x-tex">\mathbb{k}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">k</span></span></span></span></span> is used in the calculus library</p>

<a name="177653447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177653447" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177653447">Johan Commelin (Oct 08 2019 at 20:03)</a>:</h4>
<p>Yes, and for good reasons</p>

<a name="177653451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177653451" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177653451">Johan Commelin (Oct 08 2019 at 20:03)</a>:</h4>
<p>But it doesn't scale</p>

<a name="177654684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177654684" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177654684">Patrick Massot (Oct 08 2019 at 20:16)</a>:</h4>
<p>I meant: I don't think it matters too much to be consistent from <code>linear_algebra</code> to <code>calculus</code></p>

<a name="177654764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177654764" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177654764">Patrick Massot (Oct 08 2019 at 20:17)</a>:</h4>
<p>And I guess it's not too late to switch in the PR, especially since <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="double-struck">k</mi></mrow><annotation encoding="application/x-tex">\mathbb{k}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">k</span></span></span></span></span> is easy to search and replace (after checking there aren't too many <code>k</code> or <code>K</code> lying around)</p>

<a name="177655520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177655520" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177655520">Patrick Massot (Oct 08 2019 at 20:26)</a>:</h4>
<p>I've done matrix.lean</p>

<a name="177655630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177655630" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177655630">Patrick Massot (Oct 08 2019 at 20:27)</a>:</h4>
<p>I'll do sesquilinear</p>

<a name="177655710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177655710" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177655710">Johan Commelin (Oct 08 2019 at 20:28)</a>:</h4>
<p>I'm going to stop for tonight</p>

<a name="177655718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177655718" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177655718">Johan Commelin (Oct 08 2019 at 20:28)</a>:</h4>
<p>Good luck with the last 3 files</p>

<a name="177655761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177655761" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177655761">Patrick Massot (Oct 08 2019 at 20:29)</a>:</h4>
<p>Ok, thanks!</p>

<a name="177656503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177656503" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177656503">Patrick Massot (Oct 08 2019 at 20:37)</a>:</h4>
<p>I've done sesquilinear, moving to tensor product</p>

<a name="177657215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177657215" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177657215">Patrick Massot (Oct 08 2019 at 20:44)</a>:</h4>
<p>Done, moving to finsupp</p>

<a name="177657395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177657395" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177657395">Rob Lewis (Oct 08 2019 at 20:47)</a>:</h4>
<p>I changed my kappas to bb k's.</p>

<a name="177657977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177657977" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177657977">Patrick Massot (Oct 08 2019 at 20:52)</a>:</h4>
<p>In finsupp, do you want to replace alpha with iota?</p>

<a name="177657995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177657995" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177657995">Patrick Massot (Oct 08 2019 at 20:52)</a>:</h4>
<p>I think it's a different usage, but one could disagree</p>

<a name="177658016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177658016" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177658016">Sebastien Gouezel (Oct 08 2019 at 20:53)</a>:</h4>
<p>The field extension could be <code>ùïÉ</code> or <code>ùïù</code> (the latter is not very readable I think).</p>

<a name="177660015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177660015" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177660015">Patrick Massot (Oct 08 2019 at 21:16)</a>:</h4>
<p>All files in <code>linear_algebra</code> have been edited.</p>

<a name="177730360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177730360" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177730360">Rob Lewis (Oct 09 2019 at 16:19)</a>:</h4>
<p>How risk-tolerant are we feeling about merging this? I'm still not sure how to (easily) write a metaprogram that checks all declarations are alpha-equivalent to what they were before.</p>

<a name="177730496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177730496" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177730496">Rob Lewis (Oct 09 2019 at 16:20)</a>:</h4>
<p>Chris' PRs are getting dangerously close to here. <a href="https://github.com/leanprover-community/mathlib/issues/1523" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/1523">#1523</a> will conflict if we do this renaming in <code>algebra.module</code>, which we eventually should.</p>

<a name="177730569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177730569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177730569">Patrick Massot (Oct 09 2019 at 16:21)</a>:</h4>
<p>Did you try using that branch with the capset repo?</p>

<a name="177730596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177730596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177730596">Patrick Massot (Oct 09 2019 at 16:21)</a>:</h4>
<p>and sensitivity conjecture? As far as I know, this are the only uses of this linear algebra lib</p>

<a name="177730689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177730689" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177730689">Rob Lewis (Oct 09 2019 at 16:22)</a>:</h4>
<p>Hmm, no, that's a reasonable test. I'll try that in a bit.</p>

<a name="177730704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177730704" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177730704">Rob Lewis (Oct 09 2019 at 16:22)</a>:</h4>
<p>Definitely not comprehensive, but it's a start.</p>

<a name="177731325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177731325" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177731325">Reid Barton (Oct 09 2019 at 16:31)</a>:</h4>
<p>If you have two version which you really think only differ by alpha renaming then probably their <code>lean --export</code>s should be the same if you ignore the name part of a <code>#NS</code></p>

<a name="177736191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177736191" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177736191">Reid Barton (Oct 09 2019 at 17:23)</a>:</h4>
<p>Though I don't know how stable the numbering of items is, maybe it depends on variable names somehow</p>

<a name="177736901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177736901" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177736901">Chris Hughes (Oct 09 2019 at 17:30)</a>:</h4>
<blockquote>
<p>Chris' PRs are getting dangerously close to here. <a href="https://github.com/leanprover-community/mathlib/issues/1523" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/1523">#1523</a> will conflict if we do this renaming in <code>algebra.module</code>, which we eventually should.</p>
</blockquote>
<p>There's no need for it to all be done in one go. Why not merge what's done already, and finish the rest off in some other PR?</p>

<a name="177742834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177742834" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177742834">Reid Barton (Oct 09 2019 at 18:34)</a>:</h4>
<blockquote>
<p>How risk-tolerant are we feeling about merging this? I'm still not sure how to (easily) write a metaprogram that checks all declarations are alpha-equivalent to what they were before.</p>
</blockquote>
<p>I'm going to attempt to do this. We think <code>lin_alg_rename</code> is the same as commit 7c560512b849832824493949a29fbf6b6b7ac223 right?</p>

<a name="177745049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177745049" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177745049">Rob Lewis (Oct 09 2019 at 18:59)</a>:</h4>
<blockquote>
<blockquote>
<p>How risk-tolerant are we feeling about merging this? I'm still not sure how to (easily) write a metaprogram that checks all declarations are alpha-equivalent to what they were before.</p>
</blockquote>
<p>I'm going to attempt to do this. We think <code>lin_alg_rename</code> is the same as commit 7c560512b849832824493949a29fbf6b6b7ac223 right?</p>
</blockquote>
<p>Yeah, that should be right. I'm building the exports right now, but it's slow on my laptop.</p>

<a name="177745561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177745561" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177745561">Rob Lewis (Oct 09 2019 at 19:05)</a>:</h4>
<p>Heh, one of the exports somehow has 4000 more lines than the other...</p>

<a name="177745680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177745680" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177745680">Rob Lewis (Oct 09 2019 at 19:06)</a>:</h4>
<p>Either something changed, or it's not an accurate way to compare.</p>

<a name="177745976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177745976" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177745976">Reid Barton (Oct 09 2019 at 19:10)</a>:</h4>
<p>Unfortunately if the exports are not the same then it's going to be very hard to tell how they differ</p>

<a name="177746588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177746588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177746588">Reid Barton (Oct 09 2019 at 19:17)</a>:</h4>
<p>Here is my attempt to alpha normalize everything. Does it look reasonable? It's quite slow to run on all of the core library already...</p>
<div class="codehilite"><pre><span></span><span class="kn">open</span> <span class="n">tactic</span> <span class="n">expr</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">gen_name</span> <span class="o">(</span><span class="n">hint</span> <span class="o">:</span> <span class="n">string</span><span class="o">)</span> <span class="o">:</span> <span class="n">state_t</span> <span class="n">nat</span> <span class="n">tactic</span> <span class="n">name</span> <span class="o">:=</span>
<span class="n">do</span> <span class="n">i</span> <span class="err">‚Üê</span> <span class="n">get</span><span class="o">,</span>
   <span class="n">put</span> <span class="o">(</span><span class="n">i</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span>
   <span class="n">return</span> <span class="o">(</span><span class="n">mk_simple_name</span> <span class="o">(</span><span class="n">hint</span> <span class="bp">++</span> <span class="n">to_string</span> <span class="n">i</span><span class="o">))</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">alpha_normalize_aux</span> <span class="o">:</span> <span class="n">expr</span> <span class="bp">‚Üí</span> <span class="n">state_t</span> <span class="n">nat</span> <span class="n">tactic</span> <span class="n">expr</span>
<span class="bp">|</span> <span class="n">e</span><span class="bp">@</span><span class="o">(</span><span class="n">var</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">return</span> <span class="n">e</span>
<span class="bp">|</span> <span class="n">e</span><span class="bp">@</span><span class="o">(</span><span class="n">sort</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">return</span> <span class="n">e</span>
<span class="bp">|</span> <span class="n">e</span><span class="bp">@</span><span class="o">(</span><span class="n">const</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">return</span> <span class="n">e</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">mvar</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">state_t</span><span class="bp">.</span><span class="n">lift</span> <span class="o">(</span><span class="n">fail</span> <span class="s2">&quot;Unexpected mvar in type&quot;</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">local_const</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">state_t</span><span class="bp">.</span><span class="n">lift</span> <span class="o">(</span><span class="n">fail</span> <span class="s2">&quot;Unexpected local_const in type&quot;</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">app</span> <span class="n">e‚ÇÅ</span> <span class="n">e‚ÇÇ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">app</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="n">alpha_normalize_aux</span> <span class="n">e‚ÇÅ</span> <span class="bp">&lt;*&gt;</span> <span class="n">alpha_normalize_aux</span> <span class="n">e‚ÇÇ</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">lam</span> <span class="bp">_</span> <span class="n">bi</span> <span class="n">e‚ÇÅ</span> <span class="n">e‚ÇÇ</span><span class="o">)</span> <span class="o">:=</span>
  <span class="n">lam</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="n">gen_name</span> <span class="s2">&quot;x&quot;</span> <span class="bp">&lt;*&gt;</span>
    <span class="n">pure</span> <span class="n">bi</span> <span class="bp">&lt;*&gt;</span> <span class="n">alpha_normalize_aux</span> <span class="n">e‚ÇÅ</span> <span class="bp">&lt;*&gt;</span> <span class="n">alpha_normalize_aux</span> <span class="n">e‚ÇÇ</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">pi</span> <span class="bp">_</span> <span class="n">bi</span> <span class="n">e‚ÇÅ</span> <span class="n">e‚ÇÇ</span><span class="o">)</span> <span class="o">:=</span>
  <span class="n">pi</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="n">gen_name</span> <span class="s2">&quot;a&quot;</span> <span class="bp">&lt;*&gt;</span>
    <span class="n">pure</span> <span class="n">bi</span> <span class="bp">&lt;*&gt;</span> <span class="n">alpha_normalize_aux</span> <span class="n">e‚ÇÅ</span> <span class="bp">&lt;*&gt;</span> <span class="n">alpha_normalize_aux</span> <span class="n">e‚ÇÇ</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">elet</span> <span class="bp">_</span> <span class="n">bi</span> <span class="n">e‚ÇÅ</span> <span class="n">e‚ÇÇ</span><span class="o">)</span> <span class="o">:=</span>
  <span class="n">elet</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="n">gen_name</span> <span class="s2">&quot;v&quot;</span> <span class="bp">&lt;*&gt;</span>
    <span class="n">pure</span> <span class="n">bi</span> <span class="bp">&lt;*&gt;</span> <span class="n">alpha_normalize_aux</span> <span class="n">e‚ÇÅ</span> <span class="bp">&lt;*&gt;</span> <span class="n">alpha_normalize_aux</span> <span class="n">e‚ÇÇ</span>
<span class="c1">-- I have no idea whether this macro case is reasonable</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">macro</span> <span class="n">m</span> <span class="n">es</span><span class="o">)</span> <span class="o">:=</span> <span class="n">macro</span> <span class="n">m</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="n">mmap</span> <span class="n">alpha_normalize_aux</span> <span class="n">es</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">alpha_normalize</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">expr</span><span class="o">)</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">expr</span> <span class="o">:=</span>
<span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="o">((</span><span class="n">alpha_normalize_aux</span> <span class="n">e</span><span class="o">)</span><span class="bp">.</span><span class="n">run</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">emit_declaration</span> <span class="o">(</span><span class="n">d</span> <span class="o">:</span> <span class="n">declaration</span><span class="o">)</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="n">do</span> <span class="k">let</span> <span class="n">ls</span> <span class="o">:=</span> <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">range</span> <span class="n">d</span><span class="bp">.</span><span class="n">univ_params</span><span class="bp">.</span><span class="n">length</span><span class="o">)</span><span class="bp">.</span><span class="n">map</span>
       <span class="o">(</span><span class="bp">Œª</span> <span class="n">i</span><span class="o">,</span> <span class="n">level</span><span class="bp">.</span><span class="n">param</span> <span class="o">(</span><span class="n">mk_simple_name</span> <span class="err">$</span> <span class="s2">&quot;u&quot;</span> <span class="bp">++</span> <span class="n">to_string</span> <span class="n">i</span><span class="o">)),</span>
   <span class="n">t</span> <span class="err">‚Üê</span> <span class="n">d</span><span class="bp">.</span><span class="n">instantiate_type_univ_params</span> <span class="n">ls</span><span class="o">,</span>
   <span class="n">t&#39;</span> <span class="err">‚Üê</span> <span class="n">alpha_normalize</span> <span class="n">t</span> <span class="bp">&lt;|&gt;</span> <span class="n">fail</span> <span class="o">(</span><span class="s2">&quot;failed on declaration &quot;</span> <span class="bp">++</span> <span class="n">d</span><span class="bp">.</span><span class="n">to_name</span><span class="bp">.</span><span class="n">to_string</span><span class="o">),</span>
   <span class="n">vs</span> <span class="err">‚Üê</span> <span class="k">match</span> <span class="n">d</span> <span class="k">with</span>
   <span class="bp">|</span> <span class="o">(</span><span class="n">declaration</span><span class="bp">.</span><span class="n">defn</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">do</span>
       <span class="n">v</span> <span class="err">‚Üê</span> <span class="n">d</span><span class="bp">.</span><span class="n">instantiate_value_univ_params</span> <span class="n">ls</span><span class="o">,</span>
       <span class="n">v&#39;</span> <span class="err">‚Üê</span> <span class="n">alpha_normalize</span> <span class="n">v</span> <span class="bp">&lt;|&gt;</span> <span class="n">fail</span> <span class="o">(</span><span class="s2">&quot;failed on declaration &quot;</span> <span class="bp">++</span> <span class="n">d</span><span class="bp">.</span><span class="n">to_name</span><span class="bp">.</span><span class="n">to_string</span><span class="o">),</span>
       <span class="n">return</span> <span class="n">v&#39;</span><span class="bp">.</span><span class="n">to_string</span>
   <span class="bp">|</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">return</span> <span class="s2">&quot;_&quot;</span>
   <span class="kn">end</span><span class="o">,</span>
   <span class="n">tactic</span><span class="bp">.</span><span class="n">trace</span> <span class="o">(</span><span class="n">d</span><span class="bp">.</span><span class="n">to_name</span><span class="bp">.</span><span class="n">to_string</span> <span class="bp">++</span> <span class="s2">&quot;</span><span class="err">\</span><span class="s2">t&quot;</span> <span class="bp">++</span> <span class="n">t&#39;</span><span class="bp">.</span><span class="n">to_string</span> <span class="bp">++</span> <span class="s2">&quot;</span><span class="err">\</span><span class="s2">t&quot;</span> <span class="bp">++</span> <span class="n">vs</span><span class="o">),</span>
   <span class="n">return</span> <span class="o">()</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">emit_all</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="n">do</span> <span class="n">e</span> <span class="err">‚Üê</span> <span class="n">get_env</span><span class="o">,</span>
   <span class="n">e</span><span class="bp">.</span><span class="n">fold</span> <span class="o">(</span><span class="n">return</span> <span class="o">())</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">d</span> <span class="n">m</span><span class="o">,</span> <span class="n">emit_declaration</span> <span class="n">d</span> <span class="bp">&gt;&gt;</span> <span class="n">m</span><span class="o">)</span>

<span class="kn">set_option</span> <span class="n">pp</span><span class="bp">.</span><span class="n">all</span> <span class="n">true</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">unit</span> <span class="o">:=</span> <span class="k">begin</span>
  <span class="n">emit_all</span><span class="o">,</span>
  <span class="n">constructor</span>
<span class="kn">end</span>
</pre></div>

<a name="177746651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177746651" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177746651">Reid Barton (Oct 09 2019 at 19:18)</a>:</h4>
<p>oh, actually it only took 43 seconds to run on core</p>

<a name="177746856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177746856" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177746856">Reid Barton (Oct 09 2019 at 19:21)</a>:</h4>
<p>The idea is to run this on both mathlibs, then sort and compare the outputs. I guess this only checks the types currently, not the values (for definitions).</p>

<a name="177747735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177747735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177747735">Rob Lewis (Oct 09 2019 at 19:31)</a>:</h4>
<p>The sensitivity proof is very slightly broken but not caused by our changes.</p>

<a name="177747904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177747904" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177747904">Rob Lewis (Oct 09 2019 at 19:33)</a>:</h4>
<p>Incidentally, I just noticed something. Tooltips in VSCode specialize universe levels when you hover over declarations to see the type, but only sometimes. Hover over <code>vector_space.dim</code> in the following and compare.</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">f</span> <span class="o">{</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span> <span class="mi">10</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">[</span><span class="n">vector_space</span> <span class="n">‚Ñù</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span> <span class="k">have</span> <span class="n">vector_space</span><span class="bp">.</span><span class="n">dim</span> <span class="n">‚Ñù</span> <span class="n">Œ±</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span> <span class="n">trivial</span>
<span class="n">def</span> <span class="n">g</span> <span class="o">{</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span> <span class="mi">10</span><span class="o">}</span>  <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">[</span><span class="n">vector_space</span> <span class="n">‚Ñù</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">:=</span> <span class="n">vector_space</span><span class="bp">.</span><span class="n">dim</span> <span class="n">‚Ñù</span> <span class="n">Œ±</span>
</pre></div>

<a name="177748058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177748058" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177748058">Rob Lewis (Oct 09 2019 at 19:35)</a>:</h4>
<p>I think that script looks reasonable? The output will be enormous.</p>

<a name="177748122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177748122" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177748122">Reid Barton (Oct 09 2019 at 19:36)</a>:</h4>
<p>I modified my tactic to emit the values of definitions as well.</p>

<a name="177748145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177748145" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177748145">Patrick Massot (Oct 09 2019 at 19:36)</a>:</h4>
<p>We really need to PR that sensitivity thing to mathlib's example folder</p>

<a name="177748207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177748207" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177748207">Rob Lewis (Oct 09 2019 at 19:37)</a>:</h4>
<p>Yeah, it's been on my todo list for ages but hasn't reached the top.</p>

<a name="177748209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177748209" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177748209">Reid Barton (Oct 09 2019 at 19:37)</a>:</h4>
<p>some of the individual types it outputs are around a megabyte</p>

<a name="177748250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177748250" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177748250">Rob Lewis (Oct 09 2019 at 19:37)</a>:</h4>
<blockquote>
<p>some of the individual types it outputs are around a megabyte</p>
</blockquote>
<p>Sounds about right!</p>

<a name="177748305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177748305" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177748305">Patrick Massot (Oct 09 2019 at 19:38)</a>:</h4>
<blockquote>
<p>Yeah, it's been on my todo list for ages but hasn't reached the top.</p>
</blockquote>
<p>Same here...</p>

<a name="177748318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177748318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177748318">Reid Barton (Oct 09 2019 at 19:38)</a>:</h4>
<p>It still takes less than a minute on core, so hopefully it will take less than a day on mathlib?</p>

<a name="177748342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177748342" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177748342">Rob Lewis (Oct 09 2019 at 19:38)</a>:</h4>
<p>The breakage in the sensitivity proof was really minor, but one of the breaks I don't understand.</p>

<a name="177748359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177748359" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177748359">Rob Lewis (Oct 09 2019 at 19:39)</a>:</h4>
<p>It's easy to fix but I don't know why it happened.</p>

<a name="177748636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231521%20rename%20type%20variables/near/177748636" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/499201521renametypevariables.html#177748636">Rob Lewis (Oct 09 2019 at 19:42)</a>:</h4>
<blockquote>
<p>It still takes less than a minute on core, so hopefully it will take less than a day on mathlib?</p>
</blockquote>
<p>And you have to run it twice to compare!</p>


{% endraw %}

{% include archive_update.html %}