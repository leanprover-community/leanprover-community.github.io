---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/144837PRreviews/09235510oppositecategories.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/144837PRreviews/index.html">PR reviews</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html">#510 opposite categories</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="152239436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/152239436" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#152239436">Johan Commelin (Dec 20 2018 at 07:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> I saw you fixed some stuff, but Travis is still complaining... If you don't have time for this, just let me know, and I'll try to take a look.</p>

<a name="152241278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/152241278" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#152241278">Scott Morrison (Dec 20 2018 at 08:24)</a>:</h4>
<p>Think I've got it now. That intermediate commit was just getting work from my office computer to my laptop.</p>

<a name="152389993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/152389993" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#152389993">Johan Commelin (Dec 22 2018 at 13:49)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I get that you don't like the idea of making <code>op</code> irreducible. So what is the best way forward? Just now I had to compose two arrows <code>f</code> and <code>g</code>, but <code>f</code> lived in the opposite category... so Lean complained. I would love to just write <code>f.unop</code> and move on. What do you think is the best solution?</p>

<a name="152390040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/152390040" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#152390040">Mario Carneiro (Dec 22 2018 at 13:50)</a>:</h4>
<p>you can have <code>unop</code> without making <code>op</code> irreducible</p>

<a name="155339244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/155339244" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#155339244">Johan Commelin (Jan 17 2019 at 14:34)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Would you welcome a PR that puts <code>op</code> and <code>unop</code> throughout the library without making <code>op</code> irreducible?</p>

<a name="155345431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/155345431" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#155345431">Mario Carneiro (Jan 17 2019 at 15:47)</a>:</h4>
<p>sure</p>

<a name="156433638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156433638" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156433638">Scott Morrison (Jan 19 2019 at 11:27)</a>:</h4>
<p>Ok, <a href="https://github.com/leanprover/mathlib/issues/510" target="_blank" title="https://github.com/leanprover/mathlib/issues/510">#510</a> no longer actually makes <code>opposite</code> irreducible. This PR has some useful cleanup in other category_theory files, as well.</p>

<a name="156597595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156597595" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156597595">Reid Barton (Jan 22 2019 at 11:36)</a>:</h4>
<p>It's hard to understand what is going on when reviewing a commit which contains a combination of substantial changes (like to <code>op</code>), general cleanup, and new features.</p>

<a name="156597623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156597623" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156597623">Reid Barton (Jan 22 2019 at 11:37)</a>:</h4>
<p>Miscellaneous cleanup PRs are fine, but they shouldn't be mixed in with actual changes.</p>

<a name="156597697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156597697" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156597697">Reid Barton (Jan 22 2019 at 11:38)</a>:</h4>
<p>Did we come to the conclusion that <code>opposite</code> should not be irreducible? Or are we just not changing it for now?</p>

<a name="156597713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156597713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156597713">Johan Commelin (Jan 22 2019 at 11:39)</a>:</h4>
<p>Mario does not want it to be irreducible. I have no clue what's good. And others seemed to not care very much (-;</p>

<a name="156597718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156597718" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156597718">Johan Commelin (Jan 22 2019 at 11:39)</a>:</h4>
<p>So for now it won't be irreducible.</p>

<a name="156598117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156598117" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156598117">Reid Barton (Jan 22 2019 at 11:48)</a>:</h4>
<p>Hmm, but I see <code>hom.op</code> and <code>hom.unop</code> are irreducible?</p>

<a name="156598120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156598120" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156598120">Reid Barton (Jan 22 2019 at 11:48)</a>:</h4>
<p>Is that intentional?</p>

<a name="156598126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156598126" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156598126">Reid Barton (Jan 22 2019 at 11:48)</a>:</h4>
<p>and then sometimes they get made not irreducible</p>

<a name="156598378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156598378" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156598378">Reid Barton (Jan 22 2019 at 11:55)</a>:</h4>
<p>I guess I don't really understand what the plan is that involves introducing <code>op</code> and <code>unop</code> but not making <code>opposite</code> irreducible (or even a structure). I feel like we don't have a good chance of putting <code>op</code>/<code>unop</code> in all the right spots if not forced to do so by irreducibility of <code>opposite</code>, and then whatever problem we solve with <code>op</code>/<code>unop</code> will continue to show up later.</p>

<a name="156598402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156598402" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156598402">Johan Commelin (Jan 22 2019 at 11:55)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> What do you think about <span class="emoji emoji-2b06" title="up">:up:</span> ?</p>

<a name="156598476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156598476" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156598476">Reid Barton (Jan 22 2019 at 11:57)</a>:</h4>
<p>I think what we really want is a one-member structure with definitional eta, and this <code>irreducible</code> thing is the closest approximation we can make</p>

<a name="156599932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156599932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156599932">Reid Barton (Jan 22 2019 at 12:24)</a>:</h4>
<p>I wonder whether we need <code>category.hom.op</code> at all</p>

<a name="156600126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156600126" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156600126">Johan Commelin (Jan 22 2019 at 12:29)</a>:</h4>
<p>I've had breakage because Lean thought <code>f</code> was in the opposite category and I wanted something in <code>C</code>.</p>

<a name="156600132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156600132" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156600132">Johan Commelin (Jan 22 2019 at 12:29)</a>:</h4>
<p>Or are you saying we only need <code>unop</code>?</p>

<a name="156600316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156600316" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156600316">Reid Barton (Jan 22 2019 at 12:32)</a>:</h4>
<p>Okay, after some experimentation, removing <code>category.hom.op</code> seems like a bad idea</p>

<a name="156600338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156600338" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156600338">Reid Barton (Jan 22 2019 at 12:33)</a>:</h4>
<p>But I'm not very happy about marking them as irreducible but then undoing that in various places.</p>

<a name="156600750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156600750" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156600750">Reid Barton (Jan 22 2019 at 12:40)</a>:</h4>
<p>I think all this <code>hom.op</code> stuff doesn't address the real issue though</p>

<a name="156600821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156600821" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156600821">Reid Barton (Jan 22 2019 at 12:41)</a>:</h4>
<p>it's still easy to end up with goals like <code>F.map g ≫ F.map f = F.map f ≫ F.map g</code></p>

<a name="156601769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156601769" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156601769">Reid Barton (Jan 22 2019 at 12:58)</a>:</h4>
<p>I think the right way to do this would be to give the hom sets the same treatment as the objects, but it seems to be impossible without splitting out the <code>hom</code> field into its own class</p>

<a name="156601780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156601780" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156601780">Reid Barton (Jan 22 2019 at 12:59)</a>:</h4>
<p>which I think we may want to do anyways</p>

<a name="156603158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156603158" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156603158">Reid Barton (Jan 22 2019 at 13:23)</a>:</h4>
<p>For example, the definition of composition in the opposite category should not be <code>λ _ _ _ f g, g ≫ f</code> but <code>λ _ _ _ f g, (g.unop ≫ f.unop).op</code></p>

<a name="156604715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156604715" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156604715">Reid Barton (Jan 22 2019 at 13:50)</a>:</h4>
<p>I would also be willing to try just using a structure</p>

<a name="156606540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23510%20opposite%20categories/near/156606540" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09235510oppositecategories.html#156606540">Reid Barton (Jan 22 2019 at 14:14)</a>:</h4>
<p>In fact, maybe we can even reuse <a href="https://github.com/leanprover/mathlib/pull/538" target="_blank" title="https://github.com/leanprover/mathlib/pull/538">https://github.com/leanprover/mathlib/pull/538</a>?</p>


{% endraw %}
