---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/144837PRreviews/index.html">PR reviews</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html">#463 removing coercions from category_theory/</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="146929906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/146929906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#146929906">Scott Morrison (Nov 07 2018 at 09:55)</a>:</h4>
<p>For your consideration, <span class="user-mention" data-user-id="110049">@Mario Carneiro</span>, <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span>, <span class="user-mention" data-user-id="112680">@Johan Commelin</span>, <span class="user-mention" data-user-id="110032">@Reid Barton</span>, <span class="user-mention" data-user-id="128547">@Michael Jendrusch</span>.</p>
<p>I propose removing all the coercions. It only took about 20 minutes to take them out, and I think overall it already simplifies the mathlib code, and will simplify lots of other things going forward.</p>

<a name="146929916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/146929916" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#146929916">Scott Morrison (Nov 07 2018 at 09:55)</a>:</h4>
<p>The cost is having to write <code>F.obj X</code> instead of <code>F X</code>, and having to write <code>t.app X</code> instead of <code>t X</code>.</p>

<a name="146929959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/146929959" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#146929959">Scott Morrison (Nov 07 2018 at 09:56)</a>:</h4>
<p>The benefit is not having to work out why <code>F X</code> doesn't work some fraction of the time.</p>

<a name="146929965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/146929965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#146929965">Scott Morrison (Nov 07 2018 at 09:56)</a>:</h4>
<p>and not having to jump through hoops with extra variations of structure fields, to introduce coercions.</p>

<a name="146929970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/146929970" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#146929970">Scott Morrison (Nov 07 2018 at 09:56)</a>:</h4>
<p>and ... various other things as discussed in recent threads.</p>

<a name="146929985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/146929985" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#146929985">Scott Morrison (Nov 07 2018 at 09:57)</a>:</h4>
<p><a href="https://github.com/leanprover/mathlib/pull/463/files" target="_blank" title="https://github.com/leanprover/mathlib/pull/463/files">https://github.com/leanprover/mathlib/pull/463/files</a></p>

<a name="146929990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/146929990" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#146929990">Scott Morrison (Nov 07 2018 at 09:57)</a>:</h4>
<p>Notice that overall it reduces the codebase: +247 −317</p>

<a name="146930066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/146930066" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#146930066">Kevin Buzzard (Nov 07 2018 at 09:59)</a>:</h4>
<p>I don't really see this as a cost. It's sort-of how I think of functors anyway :-)</p>

<a name="146930864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/146930864" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#146930864">Kenny Lau (Nov 07 2018 at 10:19)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> do you think this will also benefit modules?</p>

<a name="146931051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/146931051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#146931051">Johan Commelin (Nov 07 2018 at 10:23)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> I think this is totally fine. In the sheaf stuff I've already avoided coercions; it wasn't too painful.</p>

<a name="146931064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/146931064" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#146931064">Mario Carneiro (Nov 07 2018 at 10:23)</a>:</h4>
<p>you know, I'm not sure how to take the lines reduction when you are reformatting at the same time :P</p>

<a name="146931112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/146931112" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#146931112">Mario Carneiro (Nov 07 2018 at 10:24)</a>:</h4>
<p><a href="https://github.com/leanprover/mathlib/pull/463/files#diff-d821da3f10c3bc4b40e7718069576210R81" target="_blank" title="https://github.com/leanprover/mathlib/pull/463/files#diff-d821da3f10c3bc4b40e7718069576210R81">https://github.com/leanprover/mathlib/pull/463/files#diff-d821da3f10c3bc4b40e7718069576210R81</a></p>

<a name="146931252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/146931252" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#146931252">Mario Carneiro (Nov 07 2018 at 10:27)</a>:</h4>
<p>there are also almost no actual proofs involved. Is it all just definitions?</p>

<a name="146931583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/146931583" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#146931583">Kevin Buzzard (Nov 07 2018 at 10:34)</a>:</h4>
<p>This night be a silly question because I don't know the previous setup -- could you just have the coercion on objects and only explicitly have to write F.app for the morphisms?</p>

<a name="146931654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/146931654" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#146931654">Kevin Buzzard (Nov 07 2018 at 10:36)</a>:</h4>
<p>Oh I see, this is exactly what was causing problems</p>

<a name="146931665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/146931665" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#146931665">Kevin Buzzard (Nov 07 2018 at 10:37)</a>:</h4>
<p>I now realise t is not a functor but probably a natural transformation</p>

<a name="146932793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/146932793" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#146932793">Scott Morrison (Nov 07 2018 at 11:06)</a>:</h4>
<blockquote>
<p>there are also almost no actual proofs involved. Is it all just definitions?</p>
</blockquote>
<p>Yeah, nothing in <code>category_theory/</code> so far counts as a "theorem" except perhaps yoneda.</p>

<a name="146933605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/146933605" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#146933605">Kevin Buzzard (Nov 07 2018 at 11:25)</a>:</h4>
<p>I am reminded of <a href="https://mathoverflow.net/a/10899/1384" target="_blank" title="https://mathoverflow.net/a/10899/1384">https://mathoverflow.net/a/10899/1384</a></p>

<a name="146933680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/146933680" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#146933680">Scott Morrison (Nov 07 2018 at 11:27)</a>:</h4>
<p>Hmm... Does sounds like Lang. :-)</p>

<a name="147273670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/147273670" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#147273670">Scott Morrison (Nov 08 2018 at 02:55)</a>:</h4>
<p>Hi @Mario, I'd be interested to hear your thoughts on this. I'm hesitant to continue working on later parts of the category theory development, because in several spots my current issues are connected to coercions. If I know whether or not it's likely this will be merged, I can decide whether or not to continue fighting those issues. :-)</p>

<a name="147273876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/147273876" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#147273876">Mario Carneiro (Nov 08 2018 at 03:00)</a>:</h4>
<p>I want to hear what <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> has to say. You've been fighting these demons more than me, so I'll go with it if you think it helps, but I think it is a stylistic loss</p>

<a name="147276465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/147276465" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#147276465">Johan Commelin (Nov 08 2018 at 04:17)</a>:</h4>
<p>I would be happy with merging this. I think <span class="user-mention" data-user-id="110032">@Reid Barton</span> expressed a similar opinion.</p>

<a name="147285804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/147285804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#147285804">Johannes Hölzl (Nov 08 2018 at 08:48)</a>:</h4>
<p>I agree that it is a stylisitic loss, but its not too bad. Also we get rid of a lot of boilerplate code.<br>
So I'm okay with removing the coercions</p>

<a name="147285900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/147285900" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#147285900">Scott Morrison (Nov 08 2018 at 08:51)</a>:</h4>
<p>Whee... :-) After <span class="emoji emoji-1f340" title="four leaf clover">:four_leaf_clover:</span>, I will see if we can do better.</p>

<a name="147285913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/147285913" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#147285913">Scott Morrison (Nov 08 2018 at 08:51)</a>:</h4>
<p>Would it be better with a symbol in between, instead of just field notation?</p>

<a name="147285958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/147285958" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#147285958">Johan Commelin (Nov 08 2018 at 08:52)</a>:</h4>
<p>Naahh, I would find it less readable with a symbol</p>

<a name="147285959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/147285959" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#147285959">Mario Carneiro (Nov 08 2018 at 08:52)</a>:</h4>
<p>I'm a bit worried that you can't do the same thing with notations</p>

<a name="147285967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/147285967" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#147285967">Mario Carneiro (Nov 08 2018 at 08:52)</a>:</h4>
<p>in particular that example with monoidal functor application</p>

<a name="147285994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/147285994" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#147285994">Scott Morrison (Nov 08 2018 at 08:53)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span>, could you clarify that? I'm not sure what you mean yet.</p>

<a name="147286041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/147286041" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#147286041">Mario Carneiro (Nov 08 2018 at 08:54)</a>:</h4>
<p>if <code>F</code> is a monoidal functor, then <code>F.app X</code> is magically parsed to <code>F.to_functor.app X</code></p>

<a name="147286048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/147286048" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#147286048">Mario Carneiro (Nov 08 2018 at 08:54)</a>:</h4>
<p>You don't get the same magic if you write <code>F +&gt; X</code> or whatever</p>

<a name="147286639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/147286639" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#147286639">Johannes Hölzl (Nov 08 2018 at 09:07)</a>:</h4>
<p>is it ready to be merged?</p>

<a name="147286899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/147286899" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#147286899">Mario Carneiro (Nov 08 2018 at 09:13)</a>:</h4>
<p>go for launch</p>

<a name="147287069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23463%20removing%20coercions%20from%20category_theory//near/147287069" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/96488463removingcoercionsfromcategorytheory.html#147287069">Johannes Hölzl (Nov 08 2018 at 09:16)</a>:</h4>
<p>merged</p>


{% endraw %}
