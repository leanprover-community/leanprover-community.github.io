---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/144837PRreviews/09865443docsforNZQRC.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/144837PRreviews/index.html">PR reviews</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html">#443 docs for N -> Z -> Q -> R -> C</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="136607409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136607409" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136607409">Kevin Buzzard (Oct 27 2018 at 13:28)</a>:</h4>
<p>Mathematicians find it frustrating when their goal is "obviously the same" as a hypothesis, except the hypothesis is about integers and the goal is about real numbers. These docs attempt to give some hints about how to deal with this, plus a slightly more in-depth discussion about what is going on for those who are interested. Comments are welcome.</p>

<a name="136614223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136614223" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136614223">Johan Commelin (Oct 27 2018 at 16:54)</a>:</h4>
<p>I suggested to fix two typos, and had two other minor comments. See my review on Github.</p>

<a name="136614403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136614403" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136614403">Scott Olson (Oct 27 2018 at 16:59)</a>:</h4>
<p>I was struck by the comment "your goal is <code>↑x * ↑y = ↑z</code>, something which you suspect is a statement about real numbers", which reminds me that in HoTT they always write <code>Path ℝ (↑x * ↑y) ↑z</code>. We can get goals like <code>⊢ @eq real x y</code> with <code>pp</code> options, but as soon as you throw in coercions or operator syntax, it's unreadable... I'm dreaming of more laser-focused <code>pp</code> options that would just show the types of coercions or equalities in a nice way</p>

<a name="136615244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136615244" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136615244">Kevin Buzzard (Oct 27 2018 at 17:24)</a>:</h4>
<p>There might be a way of doing it by switching <code>pp.implicit</code> on or something</p>

<a name="136615246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136615246" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136615246">Kevin Buzzard (Oct 27 2018 at 17:24)</a>:</h4>
<p>I didn't think about it too hard</p>

<a name="136615271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136615271" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136615271">Scott Olson (Oct 27 2018 at 17:25)</a>:</h4>
<p>Unfortunately it doesn't work because <code>pp.notation</code> (on by default) hides the implicit arguments of the operators, and setting that to false makes up most of the mess that <code>pp.all</code> causes</p>

<a name="136650007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650007">Kevin Buzzard (Oct 28 2018 at 12:24)</a>:</h4>
<p>Aargh. My PR is not quite ready. My plan was to give a recipe so that undergraduate mathematicians had an algorithm to deal with any such "easy in maths" issues they came up with. But I've just found one that does not seem to be covered by what I wrote:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">simp</span>
<span class="kn">end</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">3</span><span class="o">)</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="c1">-- what now?</span>
  <span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>


<p>The first one is fine. For the second one, I am hoping for a proof which does not require knowing the explicit name of the theorem that says that two rationals are equal iff the corresponding reals are equal. You can see that in the first example I did not need to know the name of any theorem in mathlib; there are 5 choose 2 such theorems and ideally I would like students not to have to know their names explicitly. How do I solve the second goal? I would like to add this to the docs but I don't know myself (in the past I've just found the name of the theorem and applied it directly)</p>

<a name="136650021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650021" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650021">Mario Carneiro (Oct 28 2018 at 12:25)</a>:</h4>
<p>There are not 5 choose 2 theorems, there are 5</p>

<a name="136650029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650029" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650029">Kevin Buzzard (Oct 28 2018 at 12:25)</a>:</h4>
<p>That sentence does not bode well</p>

<a name="136650038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650038" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650038">Mario Carneiro (Oct 28 2018 at 12:25)</a>:</h4>
<p>I think it would help if rather than speaking vaguely about the coercions you just list all of them and their names</p>

<a name="136650039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650039" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650039">Mario Carneiro (Oct 28 2018 at 12:25)</a>:</h4>
<p><code>nat.cast</code>, <code>int.cast</code>, <code>rat.cast</code>, <code>complex.of_real</code>, <code>int.coe_nat</code></p>

<a name="136650079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650079" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650079">Mario Carneiro (Oct 28 2018 at 12:26)</a>:</h4>
<p>all the names are based on these segments</p>

<a name="136650087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650087">Kenny Lau (Oct 28 2018 at 12:26)</a>:</h4>
<blockquote>
<p>Aargh. My PR is not quite ready.</p>
</blockquote>
<p>Don't worry, they haven't accepted any PR in 10 days</p>

<a name="136650097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650097" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650097">Mario Carneiro (Oct 28 2018 at 12:27)</a>:</h4>
<p>I was looking at them earlier today FYI... I would have merged Kevin's but there were some outstanding fixes</p>

<a name="136650102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650102" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650102">Kevin Buzzard (Oct 28 2018 at 12:27)</a>:</h4>
<p>The point of the docs was to show 1st year mathematicians an algorithm for proving everything of this nature which is "trivial in maths". The algorithm currently only relies on the students knowing <code>rw</code> and <code>simp</code> but if we cannot do this one with these tools then of course I am going to have to tell them about more tools</p>

<a name="136650151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650151" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650151">Mario Carneiro (Oct 28 2018 at 12:28)</a>:</h4>
<p>I mean for the section where you talk about the names of the theorems</p>

<a name="136650167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650167" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650167">Kevin Buzzard (Oct 28 2018 at 12:29)</a>:</h4>
<p>Mario what I need -- what <em>they</em> need -- is an algorithm which generates all 5 choose 2 proofs of <code>example (a b : X) (H : (a : Y) = b) : a = b</code> for <code>X</code> and <code>Y</code> running through NZQRC with <code>X&lt;Y</code></p>

<a name="136650173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650173" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650173">Kevin Buzzard (Oct 28 2018 at 12:29)</a>:</h4>
<p>If the algorithm is "here are 5 choose 2 proofs" then so be it</p>

<a name="136650219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650219" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650219">Kevin Buzzard (Oct 28 2018 at 12:30)</a>:</h4>
<p>I really want to hide the names of the theorems from the students, because we are well into "trivial in maths" territory here.</p>

<a name="136650222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650222" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650222">Mario Carneiro (Oct 28 2018 at 12:30)</a>:</h4>
<p>This is what that <code>cast</code> tactic we talked about would be for</p>

<a name="136650227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650227" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650227">Kevin Buzzard (Oct 28 2018 at 12:30)</a>:</h4>
<p>And my philosophy is: if it's trivial in maths, make it easy in Lean.</p>

<a name="136650288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650288" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650288">Mario Carneiro (Oct 28 2018 at 12:32)</a>:</h4>
<p>If the theorem is literally <code>a = b</code> with variables, simp can figure it out</p>

<a name="136650295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650295" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650295">Mario Carneiro (Oct 28 2018 at 12:32)</a>:</h4>
<p>the problem is when you have <code>a + b = c</code> so that <code>\u (a + b) = \u c</code> can simplify in two ways, to <code>a + b = c</code> and <code>\u a + \u b = \u c</code></p>

<a name="136650310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650310" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650310">Mario Carneiro (Oct 28 2018 at 12:33)</a>:</h4>
<p>You usually want to convert between those last two, but the path is "uphill" part of the way, to the non-simp normal form <code>\u (a + b) = \u c</code></p>

<a name="136650378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650378" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650378">Kevin Buzzard (Oct 28 2018 at 12:35)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">3</span><span class="o">)</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">have</span> <span class="n">H2</span> <span class="o">:</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">),</span>
    <span class="n">simp</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">H2</span> <span class="n">at</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">revert</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">,</span> <span class="c1">--- gaargh dammit</span>
  <span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>

<a name="136650432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650432" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650432">Mario Carneiro (Oct 28 2018 at 12:36)</a>:</h4>
<p>and simp chooses one of them kind of at random, leading to "gaargh dammit" moments</p>

<a name="136650433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650433" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650433">Kevin Buzzard (Oct 28 2018 at 12:36)</a>:</h4>
<p>I understand how to get from <code>\u a + \u b = \u c</code> to <code>\u (a + b) = \u c</code> and hopefully I explain that in the docs. The trick which beginners can use is to prove <code>\u a + \u b = \u (a + b)</code> using <code>simp</code> and then rewrite.</p>

<a name="136650435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650435" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650435">Kevin Buzzard (Oct 28 2018 at 12:37)</a>:</h4>
<p>But here I am struggling to do this just using simp and rw</p>

<a name="136650441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650441">Kevin Buzzard (Oct 28 2018 at 12:37)</a>:</h4>
<p>and I would like to put more examples of this in until I never struggle again</p>

<a name="136650444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650444" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650444">Mario Carneiro (Oct 28 2018 at 12:37)</a>:</h4>
<p>I know how to achieve it using only the explicit lemma <code>\u a = \u b &lt;-&gt; a = b</code></p>

<a name="136650456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650456" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650456">Kevin Buzzard (Oct 28 2018 at 12:37)</a>:</h4>
<p>Invoking <code>real.of_int_inj</code> or whatever, magical functions with mysterious and inconsistent names, is exactly what I want to avoid</p>

<a name="136650503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650503" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650503">Kevin Buzzard (Oct 28 2018 at 12:38)</a>:</h4>
<p>However if these cannot be avoided then I think they should be explicitly listed in the docs</p>

<a name="136650511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650511" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650511">Kevin Buzzard (Oct 28 2018 at 12:38)</a>:</h4>
<p>all 5 choose 2 of them</p>

<a name="136650515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650515" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650515">Mario Carneiro (Oct 28 2018 at 12:39)</a>:</h4>
<p>there are not 5 choose 2!</p>

<a name="136650518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650518" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650518">Kevin Buzzard (Oct 28 2018 at 12:39)</a>:</h4>
<p>:-)</p>

<a name="136650523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650523" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650523">Kevin Buzzard (Oct 28 2018 at 12:39)</a>:</h4>
<p>there are, it's just that you can't tell some of them apart ;-)</p>

<a name="136650526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650526" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650526">Mario Carneiro (Oct 28 2018 at 12:39)</a>:</h4>
<p>some of them are the same theorem</p>

<a name="136650528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650528" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650528">Kevin Buzzard (Oct 28 2018 at 12:39)</a>:</h4>
<p>not if you fill in the implicit arguments</p>

<a name="136650529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650529" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650529">Mario Carneiro (Oct 28 2018 at 12:39)</a>:</h4>
<p>like N -&gt; Q and N -&gt; R</p>

<a name="136650589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650589" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650589">Kevin Buzzard (Oct 28 2018 at 12:40)</a>:</h4>
<p>I know I know. What I need is an algorithm which takes 5 choose 2 inputs and spits out an output in each case, and you're observing that the underlying function isn't injective.</p>

<a name="136650651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650651" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650651">Kevin Buzzard (Oct 28 2018 at 12:42)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">3</span><span class="o">)</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">have</span> <span class="n">H2</span> <span class="o">:</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">),</span>
    <span class="n">simp</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">H2</span> <span class="n">at</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">revert</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">rat</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="136650653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650653" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650653">Kevin Buzzard (Oct 28 2018 at 12:42)</a>:</h4>
<p>Mathematician sees : "q = 3 -&gt; q = 3"</p>

<a name="136650661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650661" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650661">Mario Carneiro (Oct 28 2018 at 12:43)</a>:</h4>
<p>If it is the "initial" function for N,Z,Q, it's named after the source (because it can't be named after the target, which is generic) and it's called <code>cast</code>. The functions <code>int.coe_nat</code> and <code>complex.of_real</code> are separate for reasons, and they (and other such specialized functions) are usually named by the target. More generally, the rule of thumb is it's named after whatever is introduced last</p>

<a name="136650663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650663" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650663">Kevin Buzzard (Oct 28 2018 at 12:43)</a>:</h4>
<p>Dammit why isn't this easier</p>

<a name="136650664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650664" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650664">Kevin Buzzard (Oct 28 2018 at 12:43)</a>:</h4>
<p>it's trivial in maths.</p>

<a name="136650665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650665" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650665">Kevin Buzzard (Oct 28 2018 at 12:43)</a>:</h4>
<p>Did you say something about a <code>cast</code> tactic?</p>

<a name="136650704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650704" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650704">Mario Carneiro (Oct 28 2018 at 12:44)</a>:</h4>
<p>a wishlist tactic, yes</p>

<a name="136650731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650731" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650731">Mario Carneiro (Oct 28 2018 at 12:45)</a>:</h4>
<p>The strategy for using the <code>inj</code> functions is to take the "smaller" field and lift it to the larger one using <code>inj</code> (on the goal or the hypothesis, wherever it is). Then <code>simp</code> will bring them together</p>

<a name="136650780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650780" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650780">Mario Carneiro (Oct 28 2018 at 12:47)</a>:</h4>
<p>does <code>rat.cast_inj.1 $ by simpa</code> work for your example?</p>

<a name="136650781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650781" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650781">Kevin Buzzard (Oct 28 2018 at 12:47)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">complex</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
</pre></div>


<p>Lean scores 9/10 on this one</p>

<a name="136650826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650826" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650826">Mario Carneiro (Oct 28 2018 at 12:48)</a>:</h4>
<p>like I said, try <code>q + q = r</code> and lean will score a lot less</p>

<a name="136650827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650827" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650827">Mario Carneiro (Oct 28 2018 at 12:48)</a>:</h4>
<p>which one fails?</p>

<a name="136650828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650828" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650828">Kevin Buzzard (Oct 28 2018 at 12:48)</a>:</h4>
<p>First one</p>

<a name="136650831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650831" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650831">Kevin Buzzard (Oct 28 2018 at 12:49)</a>:</h4>
<p>In my notes I explain an algorithm for <code>q + q = r</code>; I think <code>\u q + \u q = \u (q + q)</code> gets solved by <code>simp</code> in all ten cases</p>

<a name="136650893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650893" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650893">Mario Carneiro (Oct 28 2018 at 12:50)</a>:</h4>
<p>oh, <code>(@rat.cast_inj ℝ _ _ _ _).1 $ by simpa</code> works, not so nice</p>

<a name="136650899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650899" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650899">Kevin Buzzard (Oct 28 2018 at 12:51)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">q</span> <span class="bp">+</span> <span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
</pre></div>


<p>Lean gets 10/10 for this one</p>

<a name="136650903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650903" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650903">Mario Carneiro (Oct 28 2018 at 12:51)</a>:</h4>
<p>no, I mean <code>q + q = r -&gt; q + q = r</code></p>

<a name="136650951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650951" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650951">Mario Carneiro (Oct 28 2018 at 12:52)</a>:</h4>
<p><code>q = 3</code> is the same kind of problem</p>

<a name="136650953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650953">Kevin Buzzard (Oct 28 2018 at 12:52)</a>:</h4>
<p>I know, but this can be reduced to <code>\u a = \u b -&gt; a = b</code> by proving the sublemma which I just proved above, and then rewriting it</p>

<a name="136650954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650954" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650954">Mario Carneiro (Oct 28 2018 at 12:52)</a>:</h4>
<p>of course, they are all trivial theorems</p>

<a name="136650955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650955" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650955">Mario Carneiro (Oct 28 2018 at 12:52)</a>:</h4>
<p>like literally two applications of lemmas</p>

<a name="136650960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650960" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650960">Mario Carneiro (Oct 28 2018 at 12:53)</a>:</h4>
<p>but you don't want to refer to any lemmas, so it is hard</p>

<a name="136650961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650961" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650961">Kevin Buzzard (Oct 28 2018 at 12:53)</a>:</h4>
<p>I know!</p>

<a name="136650962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650962" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650962">Kevin Buzzard (Oct 28 2018 at 12:53)</a>:</h4>
<p>That's the point of the docs.</p>

<a name="136650966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136650966" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136650966">Kevin Buzzard (Oct 28 2018 at 12:53)</a>:</h4>
<p>To find out if I have to refer to the lemmas, and to spell out explicitly which lemmas to use, so that beginners ultimately have an algorithm for proving any "trivial in maths" statements of this form</p>

<a name="136651009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651009" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651009">Kevin Buzzard (Oct 28 2018 at 12:54)</a>:</h4>
<p>Yesterday I thought I had got it down to 0 lemmas but now I realise there is this one glitch</p>

<a name="136651011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651011" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651011">Mario Carneiro (Oct 28 2018 at 12:54)</a>:</h4>
<p>if you want to codify it to this extent, it's better to (prod someone to) write a tactic</p>

<a name="136651020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651020">Johan Commelin (Oct 28 2018 at 12:55)</a>:</h4>
<p>All these things ought to be "cast everything to <code>complex</code> and run <code>ring</code>".</p>

<a name="136651044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651044" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651044">Mario Carneiro (Oct 28 2018 at 12:55)</a>:</h4>
<p>you don't need <code>ring</code>, <code>simp</code> is enough. But "cast everything to <code>complex</code>" is the hard part here</p>

<a name="136651164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651164" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651164">Kevin Buzzard (Oct 28 2018 at 12:59)</a>:</h4>
<blockquote>
<p>All these things ought to be "cast everything to <code>complex</code> and run <code>ring</code>".</p>
</blockquote>
<p>Octonians, surely?</p>

<a name="136651234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651234" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651234">Mario Carneiro (Oct 28 2018 at 13:00)</a>:</h4>
<p>lol, you complain about <code>nat</code> subtraction having poor properties and then you cast to a number field which isn't even associative</p>

<a name="136651303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651303" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651303">Kevin Buzzard (Oct 28 2018 at 13:02)</a>:</h4>
<p>OK maybe quaternions are better</p>

<a name="136651305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651305" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651305">Kevin Buzzard (Oct 28 2018 at 13:02)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
</pre></div>


<p>0/10 for Lean here</p>

<a name="136651313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651313" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651313">Kevin Buzzard (Oct 28 2018 at 13:03)</a>:</h4>
<p>and we also learn that someone thinks that Q R C are a different colour to N and Z, I only just noticed this</p>

<a name="136651435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651435" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651435">Kevin Buzzard (Oct 28 2018 at 13:07)</a>:</h4>
<p>The reason I am interested in these questions is that they come up in real life and I am being asked them again and again by beginners attempting to do mathematics. Just a simple question such as "prove that the square root of 2 is irrational" is fraught with these difficulties. The numerator of a rational is an int, the denominator is a nat, and getting from <code>q ^ 2 = 2</code> to <code>n ^ 2 = 2 * d ^ 2</code> (the latter in int) is hard for beginners. And then getting from this to a statement about q not being <code>sqrt 2</code>in the reals is hard again. The fact that I've just been teaching this stuff in M1F means that these questions come up, and my docs are an attempt to resolve these issues once and for all. The reason I think this is important is that it's exactly the "trivial in maths, hard in Lean" phenomenon which puts beginners off, and once they're gone, I've lost them.</p>

<a name="136651480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651480" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651480">Kevin Buzzard (Oct 28 2018 at 13:08)</a>:</h4>
<p>I realise now however that my docs do not cover all use cases, because I am currently stuck on <code>example (q : ℚ) (H : (q : ℝ) = 3) : q = 3</code>.</p>

<a name="136651493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651493" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651493">Mario Carneiro (Oct 28 2018 at 13:09)</a>:</h4>
<p>you don't need to convince me that these problems are important, or come up often. But I am apparently more comfortable than you with asking people to use the theorems that are there expressly for the purpose</p>

<a name="136651543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651543" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651543">Kevin Buzzard (Oct 28 2018 at 13:10)</a>:</h4>
<p>I am too old to remember a big list of theorems, and my users are too new to know the list, so this is two reasons why I really need to write this list down.</p>

<a name="136651553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651553" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651553">Kevin Buzzard (Oct 28 2018 at 13:10)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">rat</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">rat</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
</pre></div>


<p>Two down, eight to go</p>

<a name="136651559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651559" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651559">Kevin Buzzard (Oct 28 2018 at 13:11)</a>:</h4>
<p>[just to be clear, simp never works here]</p>

<a name="136651612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651612" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651612">Kevin Buzzard (Oct 28 2018 at 13:13)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat_inj</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">rat</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">rat</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">complex</span><span class="bp">.</span><span class="n">of_real_inj</span><span class="bp">.</span><span class="mi">1</span>
</pre></div>

<a name="136651657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651657">Mario Carneiro (Oct 28 2018 at 13:14)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_inj&#39;</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">@</span><span class="n">nat</span><span class="bp">.</span><span class="n">cast_inj</span> <span class="n">ℚ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">@</span><span class="n">nat</span><span class="bp">.</span><span class="n">cast_inj</span> <span class="n">ℝ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">@</span><span class="n">nat</span><span class="bp">.</span><span class="n">cast_inj</span> <span class="n">ℂ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">@</span><span class="n">int</span><span class="bp">.</span><span class="n">cast_inj</span> <span class="n">ℚ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">@</span><span class="n">int</span><span class="bp">.</span><span class="n">cast_inj</span> <span class="n">ℝ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">@</span><span class="n">int</span><span class="bp">.</span><span class="n">cast_inj</span> <span class="n">ℂ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">@</span><span class="n">rat</span><span class="bp">.</span><span class="n">cast_inj</span> <span class="n">ℝ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">@</span><span class="n">rat</span><span class="bp">.</span><span class="n">cast_inj</span> <span class="n">ℂ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">complex</span><span class="bp">.</span><span class="n">of_real_inj</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span>
</pre></div>


<p>8/10</p>

<a name="136651662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651662">Mario Carneiro (Oct 28 2018 at 13:15)</a>:</h4>
<p>the <code>rat.cast_inj</code> ones don't work for some reason</p>

<a name="136651672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651672" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651672">Kevin Buzzard (Oct 28 2018 at 13:15)</a>:</h4>
<p>?! :-)</p>

<a name="136651732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651732" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651732">Mario Carneiro (Oct 28 2018 at 13:16)</a>:</h4>
<p>lol, <code>by simpa using h</code> works</p>

<a name="136651813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651813">Mario Carneiro (Oct 28 2018 at 13:19)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_inj&#39;</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">h</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">@</span><span class="n">nat</span><span class="bp">.</span><span class="n">cast_inj</span> <span class="n">ℚ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">h</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">@</span><span class="n">nat</span><span class="bp">.</span><span class="n">cast_inj</span> <span class="n">ℝ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">h</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">@</span><span class="n">nat</span><span class="bp">.</span><span class="n">cast_inj</span> <span class="n">ℂ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">h</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">@</span><span class="n">int</span><span class="bp">.</span><span class="n">cast_inj</span> <span class="n">ℚ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">h</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">@</span><span class="n">int</span><span class="bp">.</span><span class="n">cast_inj</span> <span class="n">ℝ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">h</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">@</span><span class="n">int</span><span class="bp">.</span><span class="n">cast_inj</span> <span class="n">ℂ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">h</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">@</span><span class="n">rat</span><span class="bp">.</span><span class="n">cast_inj</span> <span class="n">ℝ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">h</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">@</span><span class="n">rat</span><span class="bp">.</span><span class="n">cast_inj</span> <span class="n">ℂ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">h</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">complex</span><span class="bp">.</span><span class="n">of_real_inj</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">h</span>
</pre></div>


<p>10/10</p>

<a name="136651866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651866" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651866">Kevin Buzzard (Oct 28 2018 at 13:20)</a>:</h4>
<p>You still need to know the names of the five theorems though :-(</p>

<a name="136651889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651889">Mario Carneiro (Oct 28 2018 at 13:21)</a>:</h4>
<p>that's probably the best you will get unless you write a tactic that applies these five theorems. (It's not that hard, I'm sure your minions can do it)</p>

<a name="136651891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651891" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651891">Kevin Buzzard (Oct 28 2018 at 13:21)</a>:</h4>
<p>I will fix up the docs giving as much of an algorithm as I can.</p>

<a name="136651930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651930" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651930">Kevin Buzzard (Oct 28 2018 at 13:22)</a>:</h4>
<p>But I am always looking for challenges for my minions.</p>

<a name="136651933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651933" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651933">Kevin Buzzard (Oct 28 2018 at 13:22)</a>:</h4>
<p>What exactly are you envisaging?</p>

<a name="136651937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651937" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651937">Kevin Buzzard (Oct 28 2018 at 13:22)</a>:</h4>
<p>How much can one hope for?</p>

<a name="136651947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136651947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136651947">Mario Carneiro (Oct 28 2018 at 13:23)</a>:</h4>
<p>look at the type of the equality of the selected hypothesis or the target, if it's real or int or rat you can apply the right theorem by a lookup table</p>

<a name="136652004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136652004" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136652004">Kevin Buzzard (Oct 28 2018 at 13:25)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">(</span><span class="n">d</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">((((</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">c</span> <span class="bp">*</span> <span class="n">d</span><span class="o">))</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">+</span> <span class="n">e</span> <span class="bp">=</span> <span class="mi">53</span><span class="o">)</span> <span class="o">:</span>
<span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">d</span> <span class="bp">+</span> <span class="n">e</span> <span class="bp">=</span> <span class="mi">53</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">cast</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span>
</pre></div>

<a name="136652005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136652005" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136652005">Kevin Buzzard (Oct 28 2018 at 13:25)</a>:</h4>
<p>Would something like that require Hudon-like powers?</p>

<a name="136652052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136652052" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136652052">Mario Carneiro (Oct 28 2018 at 13:26)</a>:</h4>
<p>as long as you keep the scope limited it should be fine</p>

<a name="136652058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136652058" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136652058">Kevin Buzzard (Oct 28 2018 at 13:26)</a>:</h4>
<p>I am trying to get from you a feeling as to what is reasonable here</p>

<a name="136652060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136652060" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136652060">Kevin Buzzard (Oct 28 2018 at 13:26)</a>:</h4>
<p>so I can give them an accessible challenge</p>

<a name="136652063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136652063" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136652063">Mario Carneiro (Oct 28 2018 at 13:26)</a>:</h4>
<p>the hudon powers come in when generalizing it to multiple hypotheses, reverting things, evaluating numerals or something</p>

<a name="136652072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136652072" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136652072">Mario Carneiro (Oct 28 2018 at 13:27)</a>:</h4>
<p>I'm thinking closer to just automating literally those 10 examples</p>

<a name="136652075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136652075" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136652075">Kevin Buzzard (Oct 28 2018 at 13:27)</a>:</h4>
<p>OK! I guess that is already a challenge as far as I am concerned!</p>

<a name="136652124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136652124" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136652124">Mario Carneiro (Oct 28 2018 at 13:28)</a>:</h4>
<p>also possibly where the hypothesis and goal are switched</p>

<a name="136652751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136652751" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136652751">Kevin Buzzard (Oct 28 2018 at 13:47)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="c1">-- fails</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">should_I_be_a_simp_lemma</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span>
<span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">↔</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat_inj</span><span class="o">,</span><span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="n">h</span> <span class="bp">▸</span> <span class="n">rfl</span><span class="bp">⟩</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="c1">-- works</span>
</pre></div>


<p>Is that a bad simp lemma? Is it already there if I do the right import?</p>

<a name="136653290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136653290" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136653290">Johan Commelin (Oct 28 2018 at 14:02)</a>:</h4>
<p><span class="user-mention" data-user-id="110111">@Keeley Hoek</span> How would <code>rewrite_search</code> fare on these problems?</p>

<a name="136653417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136653417" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136653417">Keeley Hoek (Oct 28 2018 at 14:06)</a>:</h4>
<p>I suspect <code>rewrite_search!</code> (bang) will dispatch them using <code>simp</code> accidentally, but I'll give <code>rewrite_search</code> a try and see if it gets lost.</p>

<a name="136653478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136653478" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136653478">Johan Commelin (Oct 28 2018 at 14:08)</a>:</h4>
<p>Well, I don't really mind which version you try... it would be nice if some tactic kills these.</p>

<a name="136653623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136653623" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136653623">Kevin Buzzard (Oct 28 2018 at 14:13)</a>:</h4>
<p>Here are the 11 examples which <code>simp</code> doesn't kill.</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat_inj</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">rat</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">rat</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="n">complex</span><span class="bp">.</span><span class="n">of_real_inj</span><span class="bp">.</span><span class="mi">1</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat_inj</span>
</pre></div>

<a name="136653673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136653673" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136653673">Kevin Buzzard (Oct 28 2018 at 14:14)</a>:</h4>
<p>My understanding is that <code>simp</code> knows the right lemma in most cases, but applies things in the wrong order and gets stuck (it simplifies <code>\u 3</code> to 3). The iff statement corresponding to<code>int.of_nat_inj</code> should perhaps be a simp lemma, and if I've got this right then that kills the last example.</p>

<a name="136654313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136654313" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136654313">Keeley Hoek (Oct 28 2018 at 14:31)</a>:</h4>
<p>I fed it</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">complex</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">cast_add</span> <span class="n">a</span> <span class="n">b</span>
<span class="c1">-- set_option trace.simplify.rewrite true</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">(</span><span class="n">d</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span>
<span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">-</span> <span class="n">d</span> <span class="bp">=</span> <span class="o">(((</span><span class="n">a</span> <span class="bp">+</span> <span class="o">((</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">-</span> <span class="n">d</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="n">rat</span><span class="bp">.</span><span class="n">cast_add</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">rat</span><span class="bp">.</span><span class="n">cast_coe_int</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">complex</span><span class="bp">.</span><span class="n">of_real_sub</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">complex</span><span class="bp">.</span><span class="n">of_real_add</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">rat</span><span class="bp">.</span><span class="n">cast_mul</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">complex</span><span class="bp">.</span><span class="n">of_real_mul</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">rat</span><span class="bp">.</span><span class="n">cast_coe_nat</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">complex</span><span class="bp">.</span><span class="n">of_real_int_cast</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">complex</span><span class="bp">.</span><span class="n">of_real_nat_cast</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">complex</span><span class="bp">.</span><span class="n">of_real_rat_cast</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>and it gives back the proof</p>
<div class="codehilite"><pre><span></span>rw complex.of_real_sub,
rw complex.of_real_rat_cast,
rw rat.cast_add,
rw rat.cast_mul,
rw rat.cast_coe_int,
rw rat.cast_coe_nat,
</pre></div>


<p>or in short form</p>
<div class="codehilite"><pre><span></span>conv_rhs { rw complex.of_real_sub, congr, rw [complex.of_real_rat_cast, rat.cast_add],
           congr, rw rat.cast_coe_int, skip, rw rat.cast_mul, congr, rw rat.cast_coe_nat }
</pre></div>

<a name="136654427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136654427" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136654427">Johan Commelin (Oct 28 2018 at 14:35)</a>:</h4>
<p>Ok, I don't understand completely. Did you give it hints, or did it find these proofs all alone?</p>

<a name="136654501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136654501" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136654501">Keeley Hoek (Oct 28 2018 at 14:37)</a>:</h4>
<p>I had to cheat an tell it "use the coersion bundle of lemmas",<br>
we have a cute little command <code>suggestion coes</code> to do this</p>
<p>To get it I just stripped out the body of the <code>begin...end</code> block and inserted a call to <code>rewrite_search {trace_result := tt}</code> instead<br>
And yeah <code>rewrite_search!</code> just cheats</p>

<a name="136654571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136654571" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136654571">Johan Commelin (Oct 28 2018 at 14:39)</a>:</h4>
<p>Ok, but could we potentially use this as a hammer to kill variants of these lemmas in one line (one word)...</p>

<a name="136654660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136654660" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136654660">Keeley Hoek (Oct 28 2018 at 14:41)</a>:</h4>
<p>Actually I didn't even need to write <code>suggestion coes</code>, I just needed to <em>create</em> the coes bundle, which didn't exist until it needed to just now. Rewrite search can detect its getting desperate and searches through its library of things to see if any bundle of things "coersions, category_theory, arithmetic, etc." are applicable and it starts trying the detected most relevant ones. This is still pretty crude though, we want to minimise the amount of handling like this</p>
<p>That's right. I mean, so long as you give it access to <code>simp</code> (which it doesn't have without the bang) it is just like a shotgun version of <code>simp</code>, which should be at least as strong</p>

<a name="136654705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136654705" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136654705">Johan Commelin (Oct 28 2018 at 14:42)</a>:</h4>
<p>Cool! <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> What do you think of this?</p>

<a name="136655787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136655787" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136655787">Kevin Buzzard (Oct 28 2018 at 15:10)</a>:</h4>
<p>I don't really understand what is being said. I generated that long begin end proof with simp. Proving the equalities is not the problem, proving the injectivity of the coercions is the problem</p>

<a name="136657206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136657206" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136657206">Kenny Lau (Oct 28 2018 at 15:39)</a>:</h4>
<p><a href="https://github.com/leanprover/mathlib/pull/447" target="_blank" title="https://github.com/leanprover/mathlib/pull/447">https://github.com/leanprover/mathlib/pull/447</a></p>

<a name="136665415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136665415" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136665415">Jean Lo (Oct 28 2018 at 18:46)</a>:</h4>
<p>Hi. I'm one of <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>'s minions who's just started learning about Lean. Here's a first attempt at a tactic that obviates the need to remember the names for all the <code>cast_inj</code> things by just trying each of them in sequence:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">rat</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span> <span class="n">data</span><span class="bp">.</span><span class="n">complex</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">open</span> <span class="n">tactic</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">nzqrc</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span> <span class="n">do</span>
  <span class="n">eh</span> <span class="err">←</span> <span class="n">intro</span> <span class="bp">`</span><span class="n">h</span><span class="o">,</span>
  <span class="n">to_expr</span> <span class="bp">```</span><span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat_inj</span> <span class="n">h</span><span class="o">)</span> <span class="bp">&gt;&gt;=</span> <span class="n">exact</span> <span class="bp">&lt;|&gt;</span>
  <span class="n">to_expr</span> <span class="bp">```</span><span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span> <span class="n">h</span><span class="o">)</span> <span class="bp">&gt;&gt;=</span> <span class="n">exact</span> <span class="bp">&lt;|&gt;</span>
  <span class="n">to_expr</span> <span class="bp">```</span><span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span> <span class="n">h</span><span class="o">)</span> <span class="bp">&gt;&gt;=</span> <span class="n">exact</span> <span class="bp">&lt;|&gt;</span>
  <span class="n">to_expr</span> <span class="bp">```</span><span class="o">(</span><span class="n">rat</span><span class="bp">.</span><span class="n">cast_inj</span><span class="bp">.</span><span class="mi">1</span> <span class="n">h</span><span class="o">)</span> <span class="bp">&gt;&gt;=</span> <span class="n">exact</span> <span class="bp">&lt;|&gt;</span>
  <span class="n">to_expr</span> <span class="bp">```</span><span class="o">(</span><span class="n">complex</span><span class="bp">.</span><span class="n">of_real_inj</span><span class="bp">.</span><span class="mi">1</span> <span class="n">h</span><span class="o">)</span> <span class="bp">&gt;&gt;=</span> <span class="n">exact</span> <span class="bp">&lt;|&gt;</span>
  <span class="n">trace</span> <span class="s2">&quot;failed: no matching coercion&quot;</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">nzqrc</span>
</pre></div>


<p>I mentioned that I suspect the code could be made a lot tidier, and he suggested that I post it again in this stream. Would be very grateful if I could get some guidance with maybe taking something like this further as a tactic that makes dealing with coercions more straightforward for beginners?</p>

<a name="136665750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136665750" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136665750">Kevin Buzzard (Oct 28 2018 at 18:57)</a>:</h4>
<p>I guess my dream would be a tactic which takes as input a hypothesis which a mathematician would find indistinguishable from the goal (ie the same modulo coercions) and solves the goal. Is that asking too much?</p>

<a name="136665790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136665790" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136665790">Kevin Buzzard (Oct 28 2018 at 18:58)</a>:</h4>
<p>I wouldn't have a clue how to start writing it though</p>

<a name="136665870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136665870" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136665870">Johan Commelin (Oct 28 2018 at 19:01)</a>:</h4>
<p>I think Keeley demonstrated that <code>rewrite_search!</code> can do that. So we should just get that tactic into mathlib.</p>

<a name="136665925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136665925" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136665925">Chris Hughes (Oct 28 2018 at 19:03)</a>:</h4>
<p>Can <code>rewrite_search</code> simplify this proof from <code>data.zmod.quadratic_reciprocity</code></p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">euler_criterion_units</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">units</span> <span class="o">(</span><span class="n">zmodp</span> <span class="n">p</span> <span class="n">hp</span><span class="o">)}</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="n">units</span> <span class="o">(</span><span class="n">zmodp</span> <span class="n">p</span> <span class="n">hp</span><span class="o">),</span> <span class="n">y</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="bp">↔</span> <span class="n">x</span> <span class="err">^</span> <span class="o">(</span><span class="n">p</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="bp">_</span>

<span class="kn">lemma</span> <span class="n">euler_criterion</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">zmodp</span> <span class="n">p</span> <span class="n">hp</span><span class="o">}</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="n">zmodp</span> <span class="n">p</span> <span class="n">hp</span><span class="o">,</span> <span class="n">y</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span> <span class="bp">↔</span> <span class="n">a</span> <span class="err">^</span> <span class="o">(</span><span class="n">p</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="bp">⟨λ</span> <span class="bp">⟨</span><span class="n">y</span><span class="o">,</span> <span class="n">hy</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hy0</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">,</span> <span class="k">from</span> <span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="bp">_</span><span class="n">root_</span><span class="bp">.</span><span class="n">zero_pow</span> <span class="o">(</span><span class="n">succ_pos</span> <span class="mi">1</span><span class="o">)]</span> <span class="n">at</span> <span class="n">hy</span><span class="bp">;</span> <span class="n">cc</span><span class="o">,</span>
  <span class="k">by</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="o">(</span><span class="n">units</span><span class="bp">.</span><span class="n">ext_iff</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span> <span class="o">(</span><span class="n">euler_criterion_units</span> <span class="n">hp</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">⟨</span><span class="n">units</span><span class="bp">.</span><span class="n">mk0</span> <span class="bp">_</span> <span class="n">hy0</span><span class="o">,</span> <span class="k">show</span> <span class="bp">_</span> <span class="bp">=</span> <span class="n">units</span><span class="bp">.</span><span class="n">mk0</span> <span class="bp">_</span> <span class="n">ha</span><span class="o">,</span>
    <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">units</span><span class="bp">.</span><span class="n">ext_iff</span><span class="o">]</span><span class="bp">;</span> <span class="n">simpa</span><span class="bp">⟩</span><span class="o">),</span>
<span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="k">let</span> <span class="bp">⟨</span><span class="n">y</span><span class="o">,</span> <span class="n">hy</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="o">(</span><span class="n">euler_criterion_units</span> <span class="n">hp</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span> <span class="o">(</span><span class="k">show</span> <span class="n">units</span><span class="bp">.</span><span class="n">mk0</span> <span class="bp">_</span> <span class="n">ha</span> <span class="err">^</span> <span class="o">(</span><span class="n">p</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">,</span> <span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">units</span><span class="bp">.</span><span class="n">ext_iff</span><span class="o">])</span> <span class="k">in</span>
  <span class="bp">⟨</span><span class="n">y</span><span class="o">,</span> <span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">units</span><span class="bp">.</span><span class="n">ext_iff</span><span class="o">]</span> <span class="kn">using</span> <span class="n">hy</span><span class="bp">⟩⟩</span>
</pre></div>

<a name="136665964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136665964" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136665964">Chris Hughes (Oct 28 2018 at 19:04)</a>:</h4>
<p>6 lines is outrageously long.</p>

<a name="136665992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136665992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136665992">Chris Hughes (Oct 28 2018 at 19:05)</a>:</h4>
<p>And this certainly fits into the category of indistinguishable to most mathematicians.</p>

<a name="136681427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136681427" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136681427">Keeley Hoek (Oct 29 2018 at 03:10)</a>:</h4>
<p>It cannot Chris, but maybe it is just missing a lemma. If you strip the body of that proof and replace it with a call to <code>tidy</code> I get two goals (this is with the suped-up <code>tidy</code> of Scott's category theory library though, so mathlib tidy might be different). Do the goals you get look reasonable? I just looked very quickly and couldn't tell if they were nonsense or not.</p>

<a name="136690806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136690806" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136690806">Kevin Buzzard (Oct 29 2018 at 08:11)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> <span class="user-mention" data-user-id="110111">@Keeley Hoek</span> <span class="user-mention" data-user-id="132889">@Jean Lo</span> if I take a step back and look at the current state of <a href="https://github.com/leanprover-community/mathlib/blob/cast_docs/docs/extras/casts.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/cast_docs/docs/extras/casts.md">what I wrote</a>, it seems to me that where we are is something like the following:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">complex</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">3</span><span class="o">)</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="c1">-- fails</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">=</span> <span class="mi">3</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">3</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="c1">-- works</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span> <span class="n">q</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">+</span> <span class="mi">7</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">+</span> <span class="mi">7</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="c1">-- fails</span>
<span class="c1">-- next one fails but</span>
<span class="c1">-- attribute [simp] int.of_nat_eq_of_nat_iff</span>
<span class="c1">-- fixes is it. Is this a good simp lemma?</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="c1">-- currently fails</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">(</span><span class="n">d</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="o">:</span>
<span class="o">((((</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span><span class="bp">=</span> <span class="n">d</span> <span class="bp">*</span> <span class="n">e</span> <span class="bp">+</span> <span class="mi">12</span> <span class="bp">↔</span> <span class="o">((</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">d</span> <span class="bp">*</span> <span class="n">e</span> <span class="bp">+</span> <span class="mi">12</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="c1">-- works</span>
</pre></div>


<p>I think beginners would be rightly confused about the randomness of this. I am dreaming of a failsafe <code>cast_num</code> tactic which can replace <code>simp</code> here and which would solve every case. I do not know anything about <code>rewrite_search!</code> other than the fact that it doesn't seem to be in my mathlib -- sorry -- I've not been following these tactic developments. But this post is supposed to be some sort of indication as to what my <del>minions</del>clients would be after.</p>

<a name="136726568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136726568" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136726568">Chris Hughes (Oct 29 2018 at 18:45)</a>:</h4>
<blockquote>
<p>It cannot Chris, but maybe it is just missing a lemma. If you strip the body of that proof and replace it with a call to <code>tidy</code> I get two goals (this is with the suped-up <code>tidy</code> of Scott's category theory library though, so mathlib tidy might be different). Do the goals you get look reasonable? I just looked very quickly and couldn't tell if they were nonsense or not.</p>
</blockquote>
<p>I tried it. The second goal was false, it guessed <code>1</code> as a solution for the <code>exists</code> statement.</p>

<a name="136726817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136726817" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136726817">Johan Commelin (Oct 29 2018 at 18:49)</a>:</h4>
<p>But this is not related to the NZQRC casts, right?</p>

<a name="136727453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136727453" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136727453">Chris Hughes (Oct 29 2018 at 18:58)</a>:</h4>
<p>No</p>

<a name="136727490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23443%20docs%20for%20N%20-%3E%20Z%20-%3E%20Q%20-%3E%20R%20-%3E%20C/near/136727490" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/09865443docsforNZQRC.html#136727490">Chris Hughes (Oct 29 2018 at 18:59)</a>:</h4>
<p>But actually you might find similar problems with more complicated statements involving things like exists.</p>


{% endraw %}
