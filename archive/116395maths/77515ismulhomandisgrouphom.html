---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/77515ismulhomandisgrouphom.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html">is_mul_hom and is_group_hom</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="169357548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169357548" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169357548">Yury G. Kudryashov (Jun 30 2019 at 23:03)</a>:</h4>
<p>Hi, is there any reason why <code>is_group_hom</code> does not extend <code>is_mul_hom</code>?<br>
BTW, they use slightly different <code>map_mul</code> types (explicit vs implicit arguments).</p>

<a name="169361781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169361781" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169361781">Johan Commelin (Jul 01 2019 at 01:22)</a>:</h4>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> The reason is history. <code>is_mul_hom</code> was added only very recently. And there was no big refactor, as maybe there should have been.</p>

<a name="169373918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169373918" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169373918">Yury G. Kudryashov (Jul 01 2019 at 07:25)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> Thank you for the explanation.</p>

<a name="169723417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169723417" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169723417">Yury G. Kudryashov (Jul 05 2019 at 17:16)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span>  Probably I'll try to merge <code>is_mul_hom</code> with <code>is_group_hom</code> (I mean, make <code>is_group_hom</code> extend <code>is_mul_hom</code>). Which version of <code>map_mul</code> do you prefer: <code>∀ x y, ...</code> or <code>∀ {x y}, ...</code>?</p>

<a name="169723455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169723455" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169723455">Mario Carneiro (Jul 05 2019 at 17:17)</a>:</h4>
<p><code>∀ x y, ...</code></p>

<a name="169723471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169723471" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169723471">Chris Hughes (Jul 05 2019 at 17:17)</a>:</h4>
<p>Personally I don't think they should be different things.</p>

<a name="169723530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169723530" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169723530">Chris Hughes (Jul 05 2019 at 17:18)</a>:</h4>
<p>It just means you have to duplicate a lot of proofs.</p>

<a name="169723564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169723564" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169723564">Mario Carneiro (Jul 05 2019 at 17:18)</a>:</h4>
<p>It seems similar to <code>vector_space</code> vs <code>module</code></p>

<a name="169723582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169723582" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169723582">Mario Carneiro (Jul 05 2019 at 17:19)</a>:</h4>
<p>the definition isn't different, just the constraints</p>

<a name="169723591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169723591" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169723591">Chris Hughes (Jul 05 2019 at 17:19)</a>:</h4>
<p>But why add constraints?</p>

<a name="169723612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169723612" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169723612">Mario Carneiro (Jul 05 2019 at 17:19)</a>:</h4>
<p>I'm not saying what is better, and actually I forget what we did for <code>vector_space</code></p>

<a name="169723900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169723900" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169723900">Yury G. Kudryashov (Jul 05 2019 at 17:24)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> I guess, it improves readability. If you see <code>[group α] [group β] (f : α → β) (h : is_mul_hom f)</code>, you have to know that any <code>is_mul_hom</code> plays nice with <code>1</code> and <code>inv</code> to understand the text. However, <code>(h : is_group_hom f)</code> makes is much easier to read.</p>

<a name="169723927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169723927" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169723927">Mario Carneiro (Jul 05 2019 at 17:25)</a>:</h4>
<p>it could be a notation</p>

<a name="169723989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169723989" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169723989">Mario Carneiro (Jul 05 2019 at 17:26)</a>:</h4>
<p>I am not a big fan of when "readability" makes my proofs harder</p>

<a name="169724007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169724007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169724007">Mario Carneiro (Jul 05 2019 at 17:26)</a>:</h4>
<p>or I have to do a bunch of boilerplate to support what is effectively notation</p>

<a name="169724155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169724155" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169724155">Yury G. Kudryashov (Jul 05 2019 at 17:29)</a>:</h4>
<p>Given instances <code>is_monoid_hom.to_is_mul_hom</code> and <code>is_mul_hom.to_is_monoid_hom [group β]</code>, will Lean enter a loop?</p>

<a name="169724220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169724220" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169724220">Mario Carneiro (Jul 05 2019 at 17:30)</a>:</h4>
<p>yes</p>

<a name="169724245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169724245" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169724245">Yury G. Kudryashov (Jul 05 2019 at 17:30)</a>:</h4>
<p>Then we have a reason for <code>is_group_hom</code> to exist.</p>

<a name="169724287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169724287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169724287">Mario Carneiro (Jul 05 2019 at 17:31)</a>:</h4>
<p>fair point</p>

<a name="169725650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169725650" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169725650">Johan Commelin (Jul 05 2019 at 17:57)</a>:</h4>
<p>Right... the fact that <code>is_group_hom</code> is just an <code>is_mul_hom</code> is a coincidence.</p>

<a name="169725655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169725655" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169725655">Johan Commelin (Jul 05 2019 at 17:57)</a>:</h4>
<p>But in case of <code>vector_space</code> I can't think of such a reason. I would be happy to see it go away.</p>

<a name="169728737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169728737" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169728737">Yury G. Kudryashov (Jul 05 2019 at 18:48)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> , could you please have another look at <a href="https://github.com/leanprover-community/mathlib/issues/1164" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/1164">#1164</a>? It's a step towards making <code>is_group_hom</code> extend <code>is_mul_hom</code>.</p>

<a name="169729007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169729007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169729007">Johan Commelin (Jul 05 2019 at 18:53)</a>:</h4>
<p>Thanks for reminding me <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> <br>
It's on the merge queue now.</p>

<a name="169729072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/169729072" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#169729072">Yury G. Kudryashov (Jul 05 2019 at 18:54)</a>:</h4>
<p>Thanks!</p>

<a name="170799026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170799026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170799026">Yury G. Kudryashov (Jul 13 2019 at 17:47)</a>:</h4>
<p>Hi, I'm making <code>is_semiring_hom</code> and <code>is_ring_hom</code> extend <code>is_add_monoid_hom</code> etc.<br>
I have a few choices:<br>
1. Add <code>map_mul</code> and friends to the root namespace as <span class="user-mention" data-user-id="112680">@Johan Commelin</span>  suggested <a href="https://github.com/leanprover-community/mathlib/pull/1214#pullrequestreview-260461482" target="_blank" title="https://github.com/leanprover-community/mathlib/pull/1214#pullrequestreview-260461482">here</a>. This way <code>map_add</code> conflicts with <code>multiset.map_add</code> (so I have to explicitly add <code>_root_.map_add</code> or <code>multiset.map_add</code>) and <code>map_inv</code> conflicts with its version for fields.<br>
2. Use <code>is_mul_hom.map_mul</code>, <code>is_monoid_hom.map_one</code>, <code>is_group_hom.map_inv</code>. This way users have to know which class defines <code>map_mul</code> etc.<br>
3. Use <code>export (is_mul_hom) map_mul</code> etc. This way it should be possible to use <code>is_ring_hom.map_add</code> etc unless you want to provide <code>[is_ring_hom f]</code> argument explicitly; then you find out that you need <code>[is_add_hom f]</code>, not <code>[is_ring_hom f]</code>.<br>
4. Manually export substituting arguments. I'd prefer to have a tactic for this but I never tried to write a Lean tactic and failed to find any docs on the <code>meta</code>-specific API (e.g., implemented monads).</p>

<a name="170802312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170802312" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170802312">Yury G. Kudryashov (Jul 13 2019 at 19:27)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span>  Which approach would you prefer?</p>

<a name="170802730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170802730" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170802730">Johan Commelin (Jul 13 2019 at 19:40)</a>:</h4>
<p>The conflicts in (1) are unfortunate.</p>

<a name="170802733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170802733" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170802733">Johan Commelin (Jul 13 2019 at 19:40)</a>:</h4>
<p>Otherwise I would have very much preferred that one.</p>

<a name="170802744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170802744" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170802744">Johan Commelin (Jul 13 2019 at 19:41)</a>:</h4>
<p>But I would be happy to write <code>is_field_hom.map_inv</code> to avoid the conflict.</p>

<a name="170802747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170802747" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170802747">Johan Commelin (Jul 13 2019 at 19:41)</a>:</h4>
<p>So we could make <code>is_field_hom.map_inv</code> protected.</p>

<a name="170802790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170802790" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170802790">Johan Commelin (Jul 13 2019 at 19:42)</a>:</h4>
<p>(Btw, maybe that should be <code>is_division_ring_hom</code>?? But I don't know if that one exists <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span>)</p>

<a name="170802795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170802795" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170802795">Johan Commelin (Jul 13 2019 at 19:43)</a>:</h4>
<p>I don't really like (2). It's quite unfriendly to users and to refactors.</p>

<a name="170802843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170802843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170802843">Chris Hughes (Jul 13 2019 at 19:44)</a>:</h4>
<p>There is a plan to bundle all of them at some point by the way. Someone just has to get around to doing it.</p>

<a name="170802927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170802927" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170802927">Johan Commelin (Jul 13 2019 at 19:47)</a>:</h4>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> If we choose (1), this probably means that all the simp-lemmas <code>multiset.map_add</code> and <code>foobar.map_add</code>, etc..., should be made <code>protected</code>. I don't think that's a bad idea anyway.</p>

<a name="170802973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170802973" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170802973">Yury G. Kudryashov (Jul 13 2019 at 19:48)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> What exactly do you want to have? Could you post some code, e.g, for the simplest case of semigroups?</p>

<a name="170802975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170802975" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170802975">Yury G. Kudryashov (Jul 13 2019 at 19:48)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> I'll try (1)</p>

<a name="170803031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170803031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170803031">Johan Commelin (Jul 13 2019 at 19:50)</a>:</h4>
<p>I would just want something like</p>
<div class="codehilite"><pre><span></span><span class="c1">-- root namespace</span>
<span class="kn">lemma</span> <span class="n">map_add</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">[</span><span class="n">is_add_hom</span> <span class="n">f</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">f</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">is_add_hom</span><span class="bp">.</span><span class="n">map_add</span> <span class="n">f</span> <span class="n">x</span> <span class="n">y</span>
</pre></div>

<a name="170803037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170803037" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170803037">Yury G. Kudryashov (Jul 13 2019 at 19:51)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> Yes, this is what I have now (with α and β instead of X and Y)</p>

<a name="170803042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170803042" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170803042">Johan Commelin (Jul 13 2019 at 19:51)</a>:</h4>
<p>And similar for <code>map_mul</code>, <code>map_zero</code>, <code>map_one</code>, <code>map_sub</code>, <code>map_neg</code>, <code>map_inv</code>, <code>map_div</code>, and any others that I forgot...</p>

<a name="170803045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170803045" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170803045">Yury G. Kudryashov (Jul 13 2019 at 19:51)</a>:</h4>
<p>My question to <span class="user-mention" data-user-id="110044">@Chris Hughes</span>  is about bundling. What should be bundled and how should it look like.</p>

<a name="170803089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170803089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170803089">Johan Commelin (Jul 13 2019 at 19:52)</a>:</h4>
<p>Ok, I understand.</p>

<a name="170803091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170803091" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170803091">Johan Commelin (Jul 13 2019 at 19:52)</a>:</h4>
<p>Need to go now. See you later!</p>

<a name="170803093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170803093" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170803093">Yury G. Kudryashov (Jul 13 2019 at 19:52)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> Now I have just (in root namespace) <code>export is_mul_hom (map_mul)</code></p>

<a name="170803637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170803637" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170803637">Kevin Buzzard (Jul 13 2019 at 20:10)</a>:</h4>
<p>Module homomorphisms are bundled and this worked, so the plan is to bundle group homs, ring homs etc, but people seem to be of the opinion that it all needs to be done in one go which makes it a daunting task</p>

<a name="170803881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170803881" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170803881">Yury G. Kudryashov (Jul 13 2019 at 20:19)</a>:</h4>
<p>I see that <code>is_linear_map</code> is used in at least 7 files.</p>

<a name="170803888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170803888" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170803888">Yury G. Kudryashov (Jul 13 2019 at 20:20)</a>:</h4>
<p>And <code>linear_map</code> is used in at least 21 files.</p>

<a name="170804165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170804165" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170804165">Yury G. Kudryashov (Jul 13 2019 at 20:29)</a>:</h4>
<p>How should people use these bundled versions for specific maps? E.g., now we have <code>instance : is_semiring_hom (coe : nat -&gt; α)</code>. What should be the bundled version of this?</p>

<a name="170804221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170804221" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170804221">Mario Carneiro (Jul 13 2019 at 20:30)</a>:</h4>
<p><code>of_nat : semiring_hom nat A</code>, <code>of_nat_apply : of_nat a = \u a</code></p>

<a name="170804502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170804502" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170804502">Yury G. Kudryashov (Jul 13 2019 at 20:40)</a>:</h4>
<p>So, we need <code>add_monoid.of_nat</code> and <code>semiring.of_nat</code>.</p>

<a name="170804518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170804518" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170804518">Yury G. Kudryashov (Jul 13 2019 at 20:41)</a>:</h4>
<p>Another question: I have a theorem about <code>add_group_hom</code>. How should I apply it to a <code>ring_hom</code>? Explicit conversion? Some implicit coercion?</p>

<a name="170804678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170804678" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170804678">Yury G. Kudryashov (Jul 13 2019 at 20:47)</a>:</h4>
<p>If this is going to be rewritten, I think that I'll switch from making <code>is_ring_hom</code> extend <code>is_monoid_hom</code> and <code>is_add_group_hom</code> to something more useful.</p>

<a name="170818080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170818080" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170818080">Johan Commelin (Jul 14 2019 at 04:36)</a>:</h4>
<blockquote>
<p>Another question: I have a theorem about <code>add_group_hom</code>. How should I apply it to a <code>ring_hom</code>? Explicit conversion? Some implicit coercion?</p>
</blockquote>
<p>This is a hard question. If I recall correctly, experiments so far have not really been satisfactory.</p>

<a name="170818091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170818091" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170818091">Johan Commelin (Jul 14 2019 at 04:37)</a>:</h4>
<p>I think that your "export stuff in the root namespace" PR would hopefully not be too much work. So you could still just do that. I'm not sure if bundling of morphisms will happen in the near future...</p>

<a name="170877290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170877290" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170877290">Yury G. Kudryashov (Jul 15 2019 at 09:32)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> It takes more time&amp;effort than I expected. There are a few reasons:<br>
1. Many namespaces have <code>map_mul</code>, <code>map_add</code> etc. I have to make all of them <code>protected</code>, then figure out where I need to add <code>namespace.</code><br>
2. Sometimes class instance resolution fails to find <code>is_add_monoid_hom f</code> a few lines after <code>instance : is_ring_hom f</code>, and I don't know how to fix this but supplying the conversion explicitly (and this looks ugly).<br>
So, I'm going to do the following:<br>
1. Push current state to a branch (compile fails).<br>
2. Submit PRs on various small fixes I made while trying to do this move.<br>
3. Try to make <code>is_ring_hom</code> extend <code>is_add_group_hom</code> by "manually exporting" <code>map_add</code> etc into <code>is_ring_hom</code> namespace.<br>
3b. Try to turn the "manual export" in (3) into a tactic, if I find some docs on writing tactics.</p>

<a name="170877674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170877674" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170877674">Johan Commelin (Jul 15 2019 at 09:39)</a>:</h4>
<p>Hmmm, I'm sorry that it is so painful.</p>

<a name="170877695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170877695" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170877695">Johan Commelin (Jul 15 2019 at 09:39)</a>:</h4>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> Concerning writing tactics. Are you aware of <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/tactic_writing.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/tactic_writing.md">https://github.com/leanprover-community/mathlib/blob/master/docs/extras/tactic_writing.md</a>?</p>

<a name="170878985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170878985" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170878985">Yury G. Kudryashov (Jul 15 2019 at 10:01)</a>:</h4>
<p>Thanks, I somehow missed it</p>

<a name="170879429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170879429" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170879429">Kevin Buzzard (Jul 15 2019 at 10:10)</a>:</h4>
<p>There will be general "mathlib-style" principles about how to do this sort of stuff and it would probably best to hear from a maintainer or expert who understands e.g. the details of typeclass inference and how it works in mathlib, before doing too much more on this.</p>

<a name="170892079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170892079" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170892079">Yury G. Kudryashov (Jul 15 2019 at 13:26)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Then I'll just do (1) and (2)</p>

<a name="170892418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/is_mul_hom%20and%20is_group_hom/near/170892418" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/77515ismulhomandisgrouphom.html#170892418">Chris Hughes (Jul 15 2019 at 13:29)</a>:</h4>
<p>I did make a start on bundling homs <a href="https://github.com/leanprover-community/mathlib/tree/bundled-homs" target="_blank" title="https://github.com/leanprover-community/mathlib/tree/bundled-homs">https://github.com/leanprover-community/mathlib/tree/bundled-homs</a>. My plan was to make group hom be the same as monoid hom (reducible def or something), on the grounds that nobody really cares about semigroups, so this is more useful than it extending mul hom (the downside is one unnecessary axiom, but this isn't much of a downside, and you can just write a new constructor). I also wanted to get rid of <code>is_field_hom</code>.</p>


{% endraw %}

{% include archive_update.html %}