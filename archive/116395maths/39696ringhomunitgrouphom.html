---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/39696ringhomunitgrouphom.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/39696ringhomunitgrouphom.html">ring hom -> unit group hom?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="159795147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ring%20hom%20-%3E%20unit%20group%20hom%3F/near/159795147" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/39696ringhomunitgrouphom.html#159795147">Kevin Buzzard (Mar 02 2019 at 13:10)</a>:</h4>
<p>If <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>:</mo><mi>A</mi><mo>→</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">f:A\to B</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mrel">:</span><span class="mord mathit">A</span><span class="mrel">→</span><span class="mord mathit" style="margin-right:0.05017em;">B</span></span></span></span> is a homomorphism of commutative rings, do we have the induced map <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>A</mi><mo>×</mo></msup><mo>→</mo><msup><mi>B</mi><mo>×</mo></msup></mrow><annotation encoding="application/x-tex">A^\times\to B^\times</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">×</span></span></span></span></span></span></span></span><span class="mrel">→</span><span class="mord"><span class="mord mathit" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">×</span></span></span></span></span></span></span></span></span></span></span> plus the proof that it's a group homomorphism? It feels like it should sit in <code>algebra.ring</code> but I can't spot it in there.</p>

<a name="159795181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ring%20hom%20-%3E%20unit%20group%20hom%3F/near/159795181" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/39696ringhomunitgrouphom.html#159795181">Kevin Buzzard (Mar 02 2019 at 13:11)</a>:</h4>
<p>gaargh is it a theorem about monoids?</p>

<a name="159795235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ring%20hom%20-%3E%20unit%20group%20hom%3F/near/159795235" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/39696ringhomunitgrouphom.html#159795235">Chris Hughes (Mar 02 2019 at 13:12)</a>:</h4>
<p>It's called <code>units.map</code></p>

<a name="159795238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ring%20hom%20-%3E%20unit%20group%20hom%3F/near/159795238" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/39696ringhomunitgrouphom.html#159795238">Chris Hughes (Mar 02 2019 at 13:13)</a>:</h4>
<p>Probably <code>algebra.group</code></p>

<a name="159795266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ring%20hom%20-%3E%20unit%20group%20hom%3F/near/159795266" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/39696ringhomunitgrouphom.html#159795266">Kevin Buzzard (Mar 02 2019 at 13:13)</a>:</h4>
<p>Yes I just found it after you replied. I was looking in the wrong place. Bloody monoids.</p>

<a name="159795267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ring%20hom%20-%3E%20unit%20group%20hom%3F/near/159795267" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/39696ringhomunitgrouphom.html#159795267">Kevin Buzzard (Mar 02 2019 at 13:13)</a>:</h4>
<p>Thanks by the way.</p>

<a name="159795522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ring%20hom%20-%3E%20unit%20group%20hom%3F/near/159795522" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/39696ringhomunitgrouphom.html#159795522">Kevin Buzzard (Mar 02 2019 at 13:20)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">set_option</span> <span class="n">class</span><span class="bp">.</span><span class="n">instance_max_depth</span> <span class="mi">35</span>

<span class="n">def</span> <span class="n">valfield_units_of_valfield_units_of_eq_supp</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">supp</span> <span class="n">v₁</span> <span class="bp">=</span> <span class="n">supp</span> <span class="n">v₂</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">units</span> <span class="o">(</span><span class="n">valuation_field</span> <span class="n">v₁</span><span class="o">)</span> <span class="bp">→</span> <span class="n">units</span> <span class="o">(</span><span class="n">valuation_field</span> <span class="n">v₂</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">units</span><span class="bp">.</span><span class="n">map</span> <span class="err">$</span> <span class="n">valfield_of_valfield_of_eq_supp</span> <span class="n">h</span>
</pre></div>


<p>I have a field hom K -&gt; L and I want a map on the units; I've just had to <code>set_option class.instance_max_depth 35</code> to make it happen. I don't like it when this starts. Is there some way to persuade type class resolution that life isn't so difficult?</p>

<a name="159795613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ring%20hom%20-%3E%20unit%20group%20hom%3F/near/159795613" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/39696ringhomunitgrouphom.html#159795613">Chris Hughes (Mar 02 2019 at 13:21)</a>:</h4>
<p>I guess maybe just introduce a bunch of instances for <code>valuation_field</code> is a semiring etc.</p>

<a name="159795657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ring%20hom%20-%3E%20unit%20group%20hom%3F/near/159795657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/39696ringhomunitgrouphom.html#159795657">Kevin Buzzard (Mar 02 2019 at 13:22)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">supp</span> <span class="n">v₁</span> <span class="bp">=</span> <span class="n">supp</span> <span class="n">v₂</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_field_hom</span> <span class="o">(</span><span class="n">valfield_of_valfield_of_eq_supp</span> <span class="n">h</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">delta</span> <span class="n">valfield_of_valfield_of_eq_supp</span><span class="bp">;</span> <span class="n">apply_instance</span>

<span class="c1">--set_option class.instance_max_depth 35</span>

<span class="kn">instance</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">supp</span> <span class="n">v₁</span> <span class="bp">=</span> <span class="n">supp</span> <span class="n">v₂</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_monoid_hom</span> <span class="o">(</span><span class="n">valfield_of_valfield_of_eq_supp</span> <span class="n">h</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">apply_instance</span>
</pre></div>


<p>This fails without the set_option.</p>

<a name="159795700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ring%20hom%20-%3E%20unit%20group%20hom%3F/near/159795700" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/39696ringhomunitgrouphom.html#159795700">Kevin Buzzard (Mar 02 2019 at 13:22)</a>:</h4>
<p>Getting from a field hom to a monoid hom is too hard for Lean</p>

<a name="159796062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ring%20hom%20-%3E%20unit%20group%20hom%3F/near/159796062" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/39696ringhomunitgrouphom.html#159796062">Kevin Buzzard (Mar 02 2019 at 13:25)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">supp</span> <span class="n">v₁</span> <span class="bp">=</span> <span class="n">supp</span> <span class="n">v₂</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_field_hom</span> <span class="o">(</span><span class="n">valfield_of_valfield_of_eq_supp</span> <span class="n">h</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">delta</span> <span class="n">valfield_of_valfield_of_eq_supp</span><span class="bp">;</span> <span class="n">apply_instance</span>

<span class="kn">instance</span> <span class="n">meh</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">supp</span> <span class="n">v₁</span> <span class="bp">=</span> <span class="n">supp</span> <span class="n">v₂</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_ring_hom</span> <span class="o">(</span><span class="n">valfield_of_valfield_of_eq_supp</span> <span class="n">h</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">apply_instance</span>

<span class="kn">set_option</span> <span class="n">class</span><span class="bp">.</span><span class="n">instance_max_depth</span> <span class="mi">44</span>

<span class="kn">instance</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">supp</span> <span class="n">v₁</span> <span class="bp">=</span> <span class="n">supp</span> <span class="n">v₂</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_monoid_hom</span> <span class="o">(</span><span class="n">valfield_of_valfield_of_eq_supp</span> <span class="n">h</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">delta</span> <span class="n">valfield_of_valfield_of_eq_supp</span><span class="bp">;</span> <span class="n">apply_instance</span>
</pre></div>


<p>Things are getting worse not better :-/ [the numbers are minimal in each case]</p>

<a name="159796102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ring%20hom%20-%3E%20unit%20group%20hom%3F/near/159796102" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/39696ringhomunitgrouphom.html#159796102">Kevin Buzzard (Mar 02 2019 at 13:25)</a>:</h4>
<p>I can get back down to 35 if I don't do the delta first before apply_instance</p>

<a name="159797082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ring%20hom%20-%3E%20unit%20group%20hom%3F/near/159797082" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/39696ringhomunitgrouphom.html#159797082">Kevin Buzzard (Mar 02 2019 at 13:30)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">supp</span> <span class="n">v₁</span> <span class="bp">=</span> <span class="n">supp</span> <span class="n">v₂</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_field_hom</span> <span class="o">(</span><span class="n">valfield_of_valfield_of_eq_supp</span> <span class="n">h</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">delta</span> <span class="n">valfield_of_valfield_of_eq_supp</span><span class="bp">;</span> <span class="n">apply_instance</span>

<span class="kn">instance</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">supp</span> <span class="n">v₁</span> <span class="bp">=</span> <span class="n">supp</span> <span class="n">v₂</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_monoid_hom</span> <span class="o">(</span><span class="n">valfield_of_valfield_of_eq_supp</span> <span class="n">h</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">is_semiring_hom</span><span class="bp">.</span><span class="n">is_monoid_hom</span> <span class="o">(</span><span class="n">valfield_of_valfield_of_eq_supp</span> <span class="n">h</span><span class="o">)</span>
</pre></div>


<p>OK so there's my fix; just supply the term directly. Now I don't need to change the max depth. Is this good practice or should I be using another solution?</p>


{% endraw %}

{% include archive_update.html %}