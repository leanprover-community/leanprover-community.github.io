---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/20928CauchySchwarzcalc.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html">Cauchy-Schwarz calc</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="127276213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276213" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276213">Patrick Massot (May 29 2018 at 21:51)</a>:</h4>
<p>Sometimes when someone new comes here to ask maths questions, I wonder if we have a new mathematician interested in Lean. So I googled <span class="user-mention" data-user-id="117987">@Patrick Stevens</span>  and found <a href="https://www.patrickstevens.co.uk/cauchy-schwarz-proof/" target="_blank" title="https://www.patrickstevens.co.uk/cauchy-schwarz-proof/">https://www.patrickstevens.co.uk/cauchy-schwarz-proof/</a></p>

<a name="127276218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276218" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276218">Patrick Massot (May 29 2018 at 21:51)</a>:</h4>
<p>So I thought: good opportunity to try again to compute with Lean</p>

<a name="127276275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276275" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276275">Patrick Massot (May 29 2018 at 21:52)</a>:</h4>
<p>And of course I'm disappointed</p>

<a name="127276280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276280" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276280">Patrick Massot (May 29 2018 at 21:52)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">ring</span>
<span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">real</span>


<span class="kn">lemma</span> <span class="n">key</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">real</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="bp">→</span>  <span class="n">y</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="bp">→</span> <span class="o">(</span><span class="n">a</span><span class="bp">+</span><span class="n">b</span><span class="o">)</span><span class="err">^</span><span class="mi">2</span><span class="bp">/</span><span class="o">(</span><span class="n">x</span><span class="bp">+</span><span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">a</span><span class="err">^</span><span class="mi">2</span><span class="bp">/</span><span class="n">x</span> <span class="bp">+</span> <span class="n">b</span><span class="err">^</span><span class="mi">2</span><span class="bp">/</span><span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">x_pos</span> <span class="n">y_pos</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">add_pos_of_pos_of_nonneg</span> <span class="n">x_pos</span> <span class="o">(</span><span class="n">le_of_lt</span> <span class="n">y_pos</span><span class="o">),</span>
  <span class="n">suffices</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span><span class="bp">+</span><span class="n">b</span><span class="o">)</span><span class="err">^</span><span class="mi">2</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">x</span><span class="bp">+</span><span class="n">y</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">a</span><span class="err">^</span><span class="mi">2</span><span class="bp">/</span><span class="n">x</span> <span class="bp">+</span> <span class="n">b</span><span class="err">^</span><span class="mi">2</span><span class="bp">/</span><span class="n">y</span><span class="o">),</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">div_le_of_le_mul</span> <span class="bp">;</span> <span class="n">assumption</span>  <span class="o">},</span>
  <span class="n">apply</span> <span class="n">le_of_sub_nonneg</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">le_of_mul_le_mul_right</span> <span class="bp">_</span> <span class="n">x_pos</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">le_of_mul_le_mul_right</span> <span class="bp">_</span> <span class="n">y_pos</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">mul_sub_right_distrib</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">mul_sub_right_distrib</span><span class="o">,</span>
  <span class="n">suffices</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="bp">-</span><span class="o">((</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">/</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">b</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">/</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">,</span>
  <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="bp">*</span><span class="o">],</span>
  <span class="n">conv</span>
  <span class="o">{</span> <span class="n">to_rhs</span><span class="o">,</span>
    <span class="n">congr</span><span class="o">,</span>
    <span class="n">skip</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">mul_assoc</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">mul_assoc</span><span class="o">,</span>
    <span class="n">congr</span><span class="o">,</span>
    <span class="n">skip</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">right_distrib</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span><span class="n">mul_assoc</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">div_mul_cancel</span> <span class="bp">_</span> <span class="o">(</span><span class="n">ne_of_gt</span> <span class="n">x_pos</span><span class="o">),</span>
    <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="n">b</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">/</span> <span class="n">y</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">/</span> <span class="n">y</span> <span class="bp">*</span> <span class="o">(</span><span class="n">y</span><span class="bp">*</span><span class="n">x</span><span class="o">),</span> <span class="k">by</span> <span class="n">simp</span><span class="o">[</span><span class="n">mul_comm</span><span class="o">]),</span>
    <span class="n">rw</span> <span class="err">←</span><span class="n">mul_assoc</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">div_mul_cancel</span> <span class="bp">_</span> <span class="o">(</span><span class="n">ne_of_gt</span> <span class="n">y_pos</span><span class="o">)</span> <span class="o">},</span>
  <span class="k">have</span> <span class="o">:</span> <span class="bp">-</span><span class="o">((</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">b</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">y</span><span class="bp">-</span><span class="n">b</span><span class="bp">*</span><span class="n">x</span><span class="o">)</span><span class="err">^</span><span class="mi">2</span> <span class="o">:=</span>
    <span class="k">begin</span>
      <span class="n">ring</span><span class="o">,</span><span class="n">ring</span><span class="o">,</span>
    <span class="kn">end</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">this</span><span class="o">,</span>
  <span class="n">suffices</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">-</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">x</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">-</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">x</span><span class="o">),</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
    <span class="n">finish</span> <span class="o">},</span>
  <span class="n">apply</span> <span class="n">mul_self_nonneg</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="127276289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276289" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276289">Patrick Massot (May 29 2018 at 21:52)</a>:</h4>
<p>It's not only about the banana phone issue</p>

<a name="127276311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276311" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276311">Patrick Massot (May 29 2018 at 21:53)</a>:</h4>
<p>Everything has been painful</p>

<a name="127276316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276316" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276316">Patrick Massot (May 29 2018 at 21:53)</a>:</h4>
<p>How should I write such proofs?</p>

<a name="127276375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276375" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276375">Patrick Stevens (May 29 2018 at 21:54)</a>:</h4>
<p>That's quite a collection - it's a direct conversion of the one I linked, isn't it, which is very slick for human consumption</p>

<a name="127276383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276383" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276383">Patrick Stevens (May 29 2018 at 21:54)</a>:</h4>
<p>Presumably there are easier proofs to transcribe for Lean</p>

<a name="127276389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276389" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276389">Andrew Ashworth (May 29 2018 at 21:54)</a>:</h4>
<p>someday, <a href="https://en.wikipedia.org/wiki/Cylindrical_algebraic_decomposition" target="_blank" title="https://en.wikipedia.org/wiki/Cylindrical_algebraic_decomposition">https://en.wikipedia.org/wiki/Cylindrical_algebraic_decomposition</a> might show up in Lean</p>

<a name="127276393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276393">Patrick Massot (May 29 2018 at 21:54)</a>:</h4>
<p>only the key lemma "Naturally, this lemma is trivial — once it is conceived."</p>

<a name="127276408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276408" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276408">Patrick Massot (May 29 2018 at 21:55)</a>:</h4>
<p>My interest was not in proving Cauchy-Schwarz. It was this sentence "Naturally, this lemma is trivial — once it is conceived."</p>

<a name="127276413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276413" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276413">Kenny Lau (May 29 2018 at 21:55)</a>:</h4>
<p>use better theorems</p>

<a name="127276424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276424" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276424">Kenny Lau (May 29 2018 at 21:55)</a>:</h4>
<p>e.g. you can use <code>add_pos</code> instead of that business</p>

<a name="127276425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276425" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276425">Patrick Massot (May 29 2018 at 21:55)</a>:</h4>
<p>I did the exercise on paper in 30 seconds and thought I would try in Lean</p>

<a name="127276433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276433" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276433">Kenny Lau (May 29 2018 at 21:55)</a>:</h4>
<p><code>add_pos_of_pos_of_nonneg x_pos (le_of_lt y_pos)</code></p>

<a name="127276482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276482" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276482">Kenny Lau (May 29 2018 at 21:56)</a>:</h4>
<p>and e.g. there is a theorem linking <code>(x+y)^-1</code> to <code>x^-1</code> and <code>y^-1</code></p>

<a name="127276498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276498" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276498">Patrick Massot (May 29 2018 at 21:56)</a>:</h4>
<p>I couldn't find add_pos because I was looking for add_pos_of_pos_of_pos</p>

<a name="127276519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276519" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276519">Patrick Massot (May 29 2018 at 21:57)</a>:</h4>
<p>The question is: I stare at my paper proof, how can I get a Lean proof?</p>

<a name="127276524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276524" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276524">Kenny Lau (May 29 2018 at 21:57)</a>:</h4>
<p>a lot of training and familiarity with existing theorems</p>

<a name="127276578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276578" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276578">Patrick Massot (May 29 2018 at 21:58)</a>:</h4>
<p>I did that as training indeed</p>

<a name="127276580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276580" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276580">Patrick Massot (May 29 2018 at 21:58)</a>:</h4>
<p>But probably Andrew is right</p>

<a name="127276581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276581">Patrick Massot (May 29 2018 at 21:58)</a>:</h4>
<p>We need more automation</p>

<a name="127276583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276583" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276583">Patrick Massot (May 29 2018 at 21:58)</a>:</h4>
<p>nothing else is viable</p>

<a name="127276598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276598" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276598">Patrick Massot (May 29 2018 at 21:59)</a>:</h4>
<p>Note that the situation would be much worse without <code>ring</code></p>

<a name="127276621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276621" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276621">Andrew Ashworth (May 29 2018 at 21:59)</a>:</h4>
<p>there are limits to algorithms such as the above though. they will take forever to run if you have a particularly giant set of real inequalities since the time it takes to run increases exponentially vs the number of terms</p>

<a name="127276622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276622" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276622">Kenny Lau (May 29 2018 at 21:59)</a>:</h4>
<p>I disagree</p>

<a name="127276626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276626" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276626">Kenny Lau (May 29 2018 at 21:59)</a>:</h4>
<p>but I don't have time to disprove your claim</p>

<a name="127276696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276696">Patrick Massot (May 29 2018 at 22:00)</a>:</h4>
<p>I should be sleeping anyway (of course I thought this calculation would be shorter...)</p>

<a name="127276810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276810" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276810">Patrick Stevens (May 29 2018 at 22:03)</a>:</h4>
<p>Of course, "expand and clear denominators" should be mechanically easy, right? Is there some reason why an "expand" tactic couldn't exist? and "clear denominators" likewise, though that requires a bit of casewise am-i-negative reasoning in general</p>

<a name="127276908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276908" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276908">Andrew Ashworth (May 29 2018 at 22:05)</a>:</h4>
<p>if you stuck the same equation into Sage math, what would its simplifier spit out?</p>

<a name="127276986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127276986" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127276986">Patrick Stevens (May 29 2018 at 22:07)</a>:</h4>
<p>Mathematica:</p>
<div class="codehilite"><pre><span></span>In[43]:= (a + b)^2/(x + y) &lt;= a^2/x + b^2/y //
 FullSimplify[#, x &gt; 0 &amp;&amp; y &gt; 0] &amp;

Out[43]= (b x - a y)^2 &gt;= 0
</pre></div>

<a name="127277039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127277039" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127277039">Patrick Stevens (May 29 2018 at 22:08)</a>:</h4>
<p>simplifies to True under the additional assumption that a,b are real</p>

<a name="127277050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127277050" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127277050">Patrick Stevens (May 29 2018 at 22:08)</a>:</h4>
<p>don't know about sage, i'm afraid</p>

<a name="127277668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127277668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127277668">Kenny Lau (May 29 2018 at 22:24)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">ring</span>

<span class="kn">lemma</span> <span class="n">key</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">Hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">Hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">a</span><span class="bp">+</span><span class="n">b</span><span class="o">)</span><span class="err">^</span><span class="mi">2</span><span class="bp">/</span><span class="o">(</span><span class="n">x</span><span class="bp">+</span><span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">a</span><span class="err">^</span><span class="mi">2</span><span class="bp">/</span><span class="n">x</span> <span class="bp">+</span> <span class="n">b</span><span class="err">^</span><span class="mi">2</span><span class="bp">/</span><span class="n">y</span> <span class="o">:=</span>
<span class="k">have</span> <span class="n">H</span> <span class="o">:</span> <span class="o">((</span><span class="n">x</span><span class="bp">+</span><span class="n">y</span><span class="o">)</span><span class="bp">*</span><span class="n">x</span><span class="bp">*</span><span class="n">y</span><span class="o">)</span><span class="bp">*</span><span class="o">((</span><span class="n">a</span><span class="bp">+</span><span class="n">b</span><span class="o">)</span><span class="err">^</span><span class="mi">2</span><span class="bp">/</span><span class="o">(</span><span class="n">x</span><span class="bp">+</span><span class="n">y</span><span class="o">))</span> <span class="bp">≤</span> <span class="o">((</span><span class="n">x</span><span class="bp">+</span><span class="n">y</span><span class="o">)</span><span class="bp">*</span><span class="n">x</span><span class="bp">*</span><span class="n">y</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">a</span><span class="err">^</span><span class="mi">2</span><span class="bp">/</span><span class="n">x</span> <span class="bp">+</span> <span class="n">b</span><span class="err">^</span><span class="mi">2</span><span class="bp">/</span><span class="n">y</span><span class="o">),</span>
<span class="k">from</span> <span class="k">calc</span> <span class="o">((</span><span class="n">x</span><span class="bp">+</span><span class="n">y</span><span class="o">)</span><span class="bp">*</span><span class="n">x</span><span class="bp">*</span><span class="n">y</span><span class="o">)</span><span class="bp">*</span><span class="o">((</span><span class="n">a</span><span class="bp">+</span><span class="n">b</span><span class="o">)</span><span class="err">^</span><span class="mi">2</span><span class="bp">/</span><span class="o">(</span><span class="n">x</span><span class="bp">+</span><span class="n">y</span><span class="o">))</span>
    <span class="bp">=</span> <span class="n">x</span><span class="bp">*</span><span class="o">(</span><span class="n">y</span><span class="bp">*</span><span class="o">(</span><span class="n">a</span><span class="bp">+</span><span class="n">b</span><span class="o">)</span><span class="err">^</span><span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">mul_div_assoc</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">mul_div_cancel_left</span><span class="o">]</span><span class="bp">;</span>
  <span class="k">from</span> <span class="n">ne_of_gt</span> <span class="o">(</span><span class="n">add_pos</span> <span class="n">Hx</span> <span class="n">Hy</span><span class="o">)</span>
<span class="bp">...</span> <span class="bp">≤</span> <span class="n">x</span><span class="bp">*</span><span class="o">(</span><span class="n">y</span><span class="bp">*</span><span class="o">(</span><span class="n">a</span><span class="bp">+</span><span class="n">b</span><span class="o">)</span><span class="err">^</span><span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">y</span><span class="bp">-</span><span class="n">b</span><span class="bp">*</span><span class="n">x</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">y</span><span class="bp">-</span><span class="n">b</span><span class="bp">*</span><span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">le_add_of_nonneg_right</span> <span class="err">$</span> <span class="n">mul_self_nonneg</span> <span class="bp">_</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span><span class="bp">+</span><span class="n">y</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">y</span><span class="bp">*</span><span class="n">a</span><span class="err">^</span><span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">x</span><span class="bp">+</span><span class="n">y</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">x</span><span class="bp">*</span><span class="n">b</span><span class="err">^</span><span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">ring</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">x</span><span class="bp">+</span><span class="n">y</span><span class="o">)</span><span class="bp">*</span><span class="n">x</span><span class="bp">*</span><span class="n">y</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">a</span><span class="err">^</span><span class="mi">2</span><span class="bp">/</span><span class="n">x</span> <span class="bp">+</span> <span class="n">b</span><span class="err">^</span><span class="mi">2</span><span class="bp">/</span><span class="n">y</span><span class="o">)</span> <span class="o">:</span>
  <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="err">←</span> <span class="n">mul_div_assoc</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">mul_div_cancel&#39;</span> <span class="bp">_</span> <span class="o">(</span><span class="n">ne_of_gt</span> <span class="n">Hy</span><span class="o">),</span> <span class="n">mul_div_assoc</span><span class="o">,</span> <span class="n">mul_div_cancel_left</span> <span class="bp">_</span> <span class="o">(</span><span class="n">ne_of_gt</span> <span class="n">Hx</span><span class="o">)],</span>
<span class="n">le_of_mul_le_mul_left</span> <span class="n">H</span> <span class="err">$</span> <span class="n">mul_pos</span> <span class="o">(</span><span class="n">mul_pos</span> <span class="o">(</span><span class="n">add_pos</span> <span class="n">Hx</span> <span class="n">Hy</span><span class="o">)</span> <span class="n">Hx</span><span class="o">)</span> <span class="n">Hy</span>
</pre></div>

<a name="127277669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127277669" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127277669">Kenny Lau (May 29 2018 at 22:24)</a>:</h4>
<p>ok I did use <code>ring</code></p>

<a name="127277672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127277672" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127277672">Kenny Lau (May 29 2018 at 22:24)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span></p>

<a name="127277675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127277675" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127277675">Kenny Lau (May 29 2018 at 22:24)</a>:</h4>
<p>and I just burnt a lot of my time</p>

<a name="127277676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127277676" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127277676">Kenny Lau (May 29 2018 at 22:24)</a>:</h4>
<p>I'm busy</p>

<a name="127278096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127278096" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127278096">Mario Carneiro (May 29 2018 at 22:35)</a>:</h4>
<div class="codehilite"><pre><span></span>import tactic.ring data.real.basic

theorem pow_two_nonneg {α} [linear_ordered_ring α] (a : α) : 0 ≤ a ^ 2 :=
by rw pow_two; exact mul_self_nonneg _

lemma key (a b x y : ℝ) (x0 : 0 &lt; x) (y0 : 0 &lt; y) : (a+b)^2/(x+y) ≤ a^2/x + b^2/y :=
begin
  apply (div_le_iff (add_pos x0 y0)).2,
  apply (mul_le_mul_left (mul_pos x0 y0)).1,
  apply sub_nonneg.1,
  refine calc x * y * ((a ^ 2 / x + b ^ 2 / y) * (x + y)) - x * y * (a + b) ^ 2
       = ((x / x * a ^ 2 * y + y / y * b ^ 2 * x) * (x + y)) - x * y * (a + b) ^ 2 : by ring
   ... = ((a ^ 2 * y + b ^ 2 * x) * (x + y)) - x * y * (a + b) ^ 2 : by simp [ne_of_gt x0, ne_of_gt y0]
   ... = (b * x - a * y) ^ 2 : by ring; ring
   ... ≥ 0 : pow_two_nonneg _
end
</pre></div>

<a name="127278173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127278173" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127278173">Mario Carneiro (May 29 2018 at 22:37)</a>:</h4>
<p>Since <code>ring</code> can handle everything except the divisions, I insert a step in the middle for <code>simp</code> to cancel the <code>x/x</code> terms, but otherwise this is all <code>ring</code></p>

<a name="127278788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127278788" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127278788">Mario Carneiro (May 29 2018 at 22:52)</a>:</h4>
<p>or with a bit more up front cross multiplication:</p>
<div class="codehilite"><pre><span></span>lemma key (a b x y : ℝ) (x0 : 0 &lt; x) (y0 : 0 &lt; y) : (a+b)^2/(x+y) ≤ a^2/x + b^2/y :=
begin
  rw [div_add_div _ _ (ne_of_gt x0) (ne_of_gt y0),
    div_le_iff (add_pos x0 y0), div_mul_eq_mul_div, le_div_iff (mul_pos x0 y0),
    ← sub_nonneg],
  refine calc 0 ≤ (b * x - a * y) ^ 2 : pow_two_nonneg _
   ... = (a ^ 2 * y + x * b ^ 2) * (x + y) - (a + b) ^ 2 * (x * y) : by ring; ring
end
</pre></div>

<a name="127279233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127279233" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127279233">Andrew Ashworth (May 29 2018 at 23:04)</a>:</h4>
<p>^. I feel like whenever I have a complicated thing like this, <code>calc</code> is the way to go. And I solve the whole thing by hand on scratch paper, like I time-traveled back to high-school algebra class...</p>

<a name="127279240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127279240" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127279240">Kenny Lau (May 29 2018 at 23:05)</a>:</h4>
<p>throwbacks</p>

<a name="127279293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127279293" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127279293">Andrew Ashworth (May 29 2018 at 23:06)</a>:</h4>
<p>but if this stuff is super obvious, and you dislike proving it, why not use <code>sorry</code>?</p>

<a name="127294574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127294574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127294574">Patrick Massot (May 30 2018 at 07:25)</a>:</h4>
<p>Thank you very much Kenny and Mario. Kenny's proof is exactly what I don't want to do (and nobody should have to do if proof assistants want to become tools for mathematicians). Mario's proof is what I wanted to do (clear denominators and use ring). I think the most important thing I missed was:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span><span class="err">^</span><span class="mi">2</span> <span class="bp">/</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span>  <span class="n">y</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span><span class="err">^</span><span class="mi">2</span> <span class="bp">*</span><span class="n">x</span> <span class="bp">/</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">ring</span>
</pre></div>


<p>I thought that, in such a case, <code>ring</code> would see <code>(a^2 / x)</code> as atomic and fail. It makes it even harder for me to understand why <code>ring</code> couldn't be extended to do the whole computation, searching for <code>x &gt; 0</code> or <code>x ≠ 0</code> in context</p>

<a name="127294647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127294647" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127294647">Johan Commelin (May 30 2018 at 07:27)</a>:</h4>
<p><code>ring</code> doesn't know anything about orders, right? So it doesn't know what to do with <code>x &gt; 0</code>.</p>

<a name="127294690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127294690" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127294690">Patrick Massot (May 30 2018 at 07:28)</a>:</h4>
<p>it could try to apply <code>ne_of_gt</code> and <code>ne_of_lt</code> on all hypotheses</p>

<a name="127294714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127294714" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127294714">Patrick Massot (May 30 2018 at 07:29)</a>:</h4>
<p>One more question for Mario: why did you use <code>refine</code> instead of <code>exact</code>, which also works and is more explicit?</p>

<a name="127294715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127294715" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127294715">Johan Commelin (May 30 2018 at 07:29)</a>:</h4>
<p>Buth it isn't meant to be a generic tactic. It only uses ring axioms.</p>

<a name="127294762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127294762" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127294762">Patrick Massot (May 30 2018 at 07:30)</a>:</h4>
<p>Then give another name to the more general tactic</p>

<a name="127294765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127294765" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127294765">Johan Commelin (May 30 2018 at 07:30)</a>:</h4>
<p>But you would want to do something like <code>by schoolkid using ring</code> or something like that</p>

<a name="127294825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127294825" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127294825">Johan Commelin (May 30 2018 at 07:32)</a>:</h4>
<p>We want a <code>schoolkid</code> tactic that does the completely easy stuff, and it should have a feature that you can give it a specialised tactic like <code>ring</code> as a hint, so that all of a sudden the schoolkid is lord of the rings.</p>

<a name="127294906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127294906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127294906">Patrick Massot (May 30 2018 at 07:34)</a>:</h4>
<p>What about building a <code>clear_denominator</code> tactic? It would search for all divisions in the goal, generate sub-goals saying denominators are non-zero, try to discharge these goals using assumptions (and <code>ne_of_gt</code> and <code>ne_of_lt</code> of assumptions), check whether the goal is equality or inequality and apply <code>mul_le_mul_left</code> and its friend, followed by <code>ring</code> to simplify, and <code>simp [all stuff ≠ 0 gathered so far]</code></p>

<a name="127294965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127294965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127294965">Patrick Massot (May 30 2018 at 07:36)</a>:</h4>
<p>We really need to get back Simon</p>

<a name="127294967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127294967" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127294967">Patrick Massot (May 30 2018 at 07:36)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> where are you?</p>

<a name="127295049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127295049" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127295049">Johan Commelin (May 30 2018 at 07:40)</a>:</h4>
<p>Right. A clear denominator tactic makes sense as well.</p>

<a name="127295106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127295106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127295106">Johan Commelin (May 30 2018 at 07:41)</a>:</h4>
<p>So, here is a proposal for <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> 's next "Live Zulip": walk through a tactic file, and teach mathematicians how to write tactics (-;</p>

<a name="127303161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127303161" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127303161">Simon Hudon (May 30 2018 at 11:31)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="110031">@Patrick Massot</span>! I haven't completely disappeared. Is it just me or has there been a whole lot more activity in here? It's getting hard to follow part time!</p>

<a name="127303262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127303262" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127303262">Simon Hudon (May 30 2018 at 11:34)</a>:</h4>
<p>I'm not sure I get what <code>clear_denominator</code> would do exactly. How does <code>mul_le_mul_left</code> help with division?</p>

<a name="127303516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127303516" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127303516">Sean Leather (May 30 2018 at 11:43)</a>:</h4>
<blockquote>
<p>Is it just me or has there been a whole lot more activity in here?</p>
</blockquote>
<p>It's not just you. Even being away from Zulip for a weekend leaves one with thousands of messages to either wade through or mark as read. <span class="emoji emoji-1f61d" title="stuck out tongue closed eyes">:stuck_out_tongue_closed_eyes:</span></p>

<a name="127303597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127303597" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127303597">Simon Hudon (May 30 2018 at 11:45)</a>:</h4>
<p>I thought the Zulip threads would help keeping track of stuff. I'm not sure what would make it easier</p>

<a name="127303640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127303640" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127303640">Simon Hudon (May 30 2018 at 11:46)</a>:</h4>
<p>The plus side is, it's awesome that Lean is getting used like this</p>

<a name="127303852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127303852" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127303852">Patrick Massot (May 30 2018 at 11:53)</a>:</h4>
<p>We have trouble with thread discipline</p>

<a name="127303855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127303855" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127303855">Patrick Massot (May 30 2018 at 11:53)</a>:</h4>
<p>But we try</p>

<a name="127305130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127305130" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127305130">Simon Hudon (May 30 2018 at 12:31)</a>:</h4>
<p>Yeah? What kind of trouble? It seems like specific threads are getting created for the right subjects. The problem might just be in the number of threads. I don't know if we need to categorize them better or something else</p>

<a name="127305822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127305822" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127305822">Patrick Massot (May 30 2018 at 12:46)</a>:</h4>
<p>Many thread actually mix different topics</p>

<a name="127306593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127306593" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127306593">Mario Carneiro (May 30 2018 at 13:04)</a>:</h4>
<p>I think Kevin should speak in complete sentences</p>

<a name="127306602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127306602" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127306602">Mario Carneiro (May 30 2018 at 13:05)</a>:</h4>
<p>instead of fragments</p>

<a name="127306607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127306607" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127306607">Mario Carneiro (May 30 2018 at 13:05)</a>:</h4>
<p>of sentences</p>

<a name="127306617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127306617" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127306617">Mario Carneiro (May 30 2018 at 13:05)</a>:</h4>
<p>that create tons of messages and fill</p>

<a name="127306622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127306622" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127306622">Mario Carneiro (May 30 2018 at 13:05)</a>:</h4>
<p>my screen</p>

<a name="127306911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127306911" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127306911">Simon Hudon (May 30 2018 at 13:12)</a>:</h4>
<p>Yeah I noticed that too. Also, write one message with one self contained question and wait for an answer. Right now, when I see his messages I don't know when he's going to be done writing and I eventually just stop reading. One message would help me (and I suspect others) decide whether the question is something I can help with</p>

<a name="127312365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127312365" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127312365">Patrick Massot (May 30 2018 at 15:11)</a>:</h4>
<p>Why did you provoked him?!</p>

<a name="127315830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127315830" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127315830">Simon Hudon (May 30 2018 at 16:19)</a>:</h4>
<p>Provoke how?</p>

<a name="127315894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127315894" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127315894">Patrick Massot (May 30 2018 at 16:20)</a>:</h4>
<p>Did you see how many times he hit return in the middle of a sentence since you posted that message?</p>

<a name="127315903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127315903" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127315903">Patrick Massot (May 30 2018 at 16:20)</a>:</h4>
<p>That's all your fault <span class="emoji emoji-1f61c" title="stuck out tongue winking eye">:stuck_out_tongue_winking_eye:</span></p>

<a name="127315921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127315921" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127315921">Simon Hudon (May 30 2018 at 16:21)</a>:</h4>
<p>Haha! I'm secretly a terrorist!</p>

<a name="127315925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127315925" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127315925">Simon Hudon (May 30 2018 at 16:21)</a>:</h4>
<p>Sorry typo: theorist</p>

<a name="127315967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127315967" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127315967">Simon Hudon (May 30 2018 at 16:22)</a>:</h4>
<p>I don't follow that thread so I didn't suffer the consequences of that carnage</p>

<a name="127317785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127317785" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127317785">Kevin Buzzard (May 30 2018 at 17:08)</a>:</h4>
<blockquote>
<p>So, here is a proposal for <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> 's next "Live Zulip": walk through a tactic file, and teach mathematicians how to write tactics (-;</p>
</blockquote>
<p>So I was just catching up in this thread, and you and Patrick were talking about tactics and "maybe Simon can write us a tactic" -- and who is the only mathematician who knows how to write tactics? I reckon it's <span class="user-mention" data-user-id="110087">@Scott Morrison</span> . Scott -- how did you learn to write tactics? I don't want to keep pestering Simon. I see dumb stuff like the proof that pnat is a comm_monoid, and the proof of every axiom is "it's true for nat so done"</p>

<a name="127317833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127317833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127317833">Kevin Buzzard (May 30 2018 at 17:08)</a>:</h4>
<p>and that happened to me several times myself when doing comm_ring stuff with schemse</p>

<a name="127317842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127317842" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127317842">Kevin Buzzard (May 30 2018 at 17:08)</a>:</h4>
<p>"I've got to prove this direct limit satisfies all the ring axioms"</p>

<a name="127317843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127317843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127317843">Kevin Buzzard (May 30 2018 at 17:08)</a>:</h4>
<p>"let's see what this entails"</p>

<a name="127317850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127317850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127317850">Kevin Buzzard (May 30 2018 at 17:08)</a>:</h4>
<p>"it entails invoking that same axiom for that other ring"</p>

<a name="127317866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127317866" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127317866">Kevin Buzzard (May 30 2018 at 17:09)</a>:</h4>
<p>It's about time I learnt to automate that. It comes up a lot.</p>

<a name="127317878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127317878" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127317878">Kevin Buzzard (May 30 2018 at 17:09)</a>:</h4>
<p>When we start on perfectoid spaces we'll be proving limits of topological rings are topological rings</p>

<a name="127317892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127317892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127317892">Kevin Buzzard (May 30 2018 at 17:09)</a>:</h4>
<p>there's going to be a lot of "this proof is obvious but not rfl" stuff</p>

<a name="127317937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127317937" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127317937">Kevin Buzzard (May 30 2018 at 17:10)</a>:</h4>
<p>and this can surely be done with tactics</p>

<a name="127320901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127320901" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127320901">Simon Hudon (May 30 2018 at 18:06)</a>:</h4>
<p>I actually enjoy getting your automation challenges. I admit (sorry!) that I'm not as quick to address them as I'd like. And lately, I've only gotten slower as I took a part time job and stepped up my writing efforts</p>

<a name="127322540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127322540" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127322540">Sebastien Gouezel (May 30 2018 at 18:38)</a>:</h4>
<p>Just for fun, I checked it in Isabelle to see where next-level automation can get you. It did not work directly, but almost:</p>
<div class="codehilite"><pre><span></span>lemma
  fixes a b x y::real
  assumes &quot;x &gt; 0&quot; &quot;y &gt; 0&quot;
  shows &quot;(a+b)^2/(x+y) ≤ a^2/x + b^2/y&quot;
proof -
  have &quot;(a * y - b * x)^2 ≥ 0&quot; by simp
  then show ?thesis
    using assms by (simp add: algebra_simps divide_simps power2_eq_square)
qed
</pre></div>


<p>I first tried to show the goal just by applying <code>simp</code> with <code>divide_simps</code> and  <code>algebra_simps</code> (simplification rules which clear out divisors, and apply associativity, commutativity), but square expansion is not automatic so I had to add it simp. It reduced everything to something which clearly was equivalent to the positivity of <code>(ay-bx)^2</code>, so I added it as an intermediate step, and done. No piece of paper, no computation on my side (and no fancy tactic such as <code>ring</code> or <code>omega</code>, everything was done by the simplifier). I really hope Lean can do the same in the near future!</p>

<a name="127322647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127322647" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127322647">Mario Carneiro (May 30 2018 at 18:40)</a>:</h4>
<p>The main problem with using <code>simp</code> for ring equalities is that simp isn't good with cancelling negatives</p>

<a name="127323145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127323145" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127323145">Sebastien Gouezel (May 30 2018 at 18:51)</a>:</h4>
<p>To be honest, <code>simp</code> in Isabelle is in fact <code>simp</code> on steroids: it has built-in "simprocs" that will cancel out negatives, group together common factors, and things like that. I guess it makes <code>by (simp add: algebra_simps)</code> as powerful as the <code>ring</code>tactic in Lean. If I understand correctly, Johannes is working on simprocs for Lean, right?</p>

<a name="127323497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127323497" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127323497">Johannes Hölzl (May 30 2018 at 18:59)</a>:</h4>
<p>Yes, I'm working on a simplifier tactic with simp proc support.</p>

<a name="127323678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127323678" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127323678">Johan Commelin (May 30 2018 at 19:03)</a>:</h4>
<p>Is there a one-line explanation of what "simpprocs" are?</p>

<a name="127324193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cauchy-Schwarz%20calc/near/127324193" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/20928CauchySchwarzcalc.html#127324193">Johannes Hölzl (May 30 2018 at 19:14)</a>:</h4>
<p>instead of simp rules, it is a tactic which gets invoced by the simplifier. E.g. canellation would be a simproc which is called on a pattern of the form <code>_ = _</code> where the type of _  has a cancellative monoid, then it tries to find common elements on both sides of the equation and remove them.</p>


{% endraw %}
