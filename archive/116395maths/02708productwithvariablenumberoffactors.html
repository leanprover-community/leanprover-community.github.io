---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/02708productwithvariablenumberoffactors.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html">product with variable number of factors</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="188652679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/product%20with%20variable%20number%20of%20factors/near/188652679" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html#188652679">Nicholas McConnell (Feb 20 2020 at 16:18)</a>:</h4>
<p>To prove that if p is prime and p = 4k + 1, then -1 is a square modulo p.</p>
<p>I propose to use Wilson's Theorem, which states (p-1)! == -1 (mod p).</p>
<p>In Lean, what's the best way to tackle a product of a variable number of factors?</p>

<a name="188652713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/product%20with%20variable%20number%20of%20factors/near/188652713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html#188652713">Kevin Buzzard (Feb 20 2020 at 16:19)</a>:</h4>
<p><code>finset.prod</code></p>

<a name="188652736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/product%20with%20variable%20number%20of%20factors/near/188652736" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html#188652736">Nicholas McConnell (Feb 20 2020 at 16:19)</a>:</h4>
<p>Alright, thanks, I'll look into that</p>

<a name="188652810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/product%20with%20variable%20number%20of%20factors/near/188652810" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html#188652810">Kevin Buzzard (Feb 20 2020 at 16:20)</a>:</h4>
<p>Things like this are often more challenging than they look for beginners, but go for it and get stuck and ask here and people will be happy to help. This is a great little project.</p>

<a name="189410051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/product%20with%20variable%20number%20of%20factors/near/189410051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html#189410051">Nicholas McConnell (Feb 29 2020 at 23:33)</a>:</h4>
<p>I just imported finset today, and apparently, finset.prod actually takes the Cartesian product of two sets</p>
<p>Not what I'm asking...</p>

<a name="189410110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/product%20with%20variable%20number%20of%20factors/near/189410110" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html#189410110">Nicholas McConnell (Feb 29 2020 at 23:35)</a>:</h4>
<p>But I'm willing to believe they relate.</p>

<a name="189410112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/product%20with%20variable%20number%20of%20factors/near/189410112" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html#189410112">Reid Barton (Feb 29 2020 at 23:35)</a>:</h4>
<p>Are you sure? I think <code>finset.product</code> does that</p>

<a name="189410116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/product%20with%20variable%20number%20of%20factors/near/189410116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html#189410116">Nicholas McConnell (Feb 29 2020 at 23:35)</a>:</h4>
<p>"product" is an unknown identifier</p>

<a name="189410156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/product%20with%20variable%20number%20of%20factors/near/189410156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html#189410156">Reid Barton (Feb 29 2020 at 23:36)</a>:</h4>
<p>I'm doubly confused now, but <code>finset.prod</code> is in <code>algebra.big_operators</code>.</p>

<a name="189410157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/product%20with%20variable%20number%20of%20factors/near/189410157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html#189410157">Nicholas McConnell (Feb 29 2020 at 23:36)</a>:</h4>
<p>Oh, okay...</p>

<a name="189410212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/product%20with%20variable%20number%20of%20factors/near/189410212" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html#189410212">Kevin Buzzard (Feb 29 2020 at 23:38)</a>:</h4>
<p>Another confusing thing about <code>finset.prod</code> is that it doesn't take the product of the elements of the finset, it also takes a map from the underlying type to a comm_monoid and takes the product of the images. In particular you can have repeated factors in your product.</p>

<a name="189410222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/product%20with%20variable%20number%20of%20factors/near/189410222" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html#189410222">Kevin Buzzard (Feb 29 2020 at 23:39)</a>:</h4>
<p>Another confusing thing about it is that there's also <code>finset.sum</code> but it's hard to find the definition, because it's generated automatically by the <code>@[to_additive]</code> tag on <code>finset.prod</code>.</p>

<a name="189410346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/product%20with%20variable%20number%20of%20factors/near/189410346" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html#189410346">Kevin Buzzard (Feb 29 2020 at 23:42)</a>:</h4>
<p><code>#eval finset.prod (finset.range 3) (Î» n, n^2+1) -- 1*2*5=10</code></p>

<a name="189410466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/product%20with%20variable%20number%20of%20factors/near/189410466" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html#189410466">Kevin Buzzard (Feb 29 2020 at 23:46)</a>:</h4>
<p>It might be worth adding that factorials are already in mathlib (as is the fact that -1 is a square mod p iff p isn't 3 mod 4, and probably Wilson's theorem too, but this definitely shouldn't stop you trying them yourself)</p>

<a name="189410796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/product%20with%20variable%20number%20of%20factors/near/189410796" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html#189410796">Nicholas McConnell (Feb 29 2020 at 23:57)</a>:</h4>
<p>Out of curiosity, where are factorials and -1 being a square mod p in mathlib?</p>

<a name="189410961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/product%20with%20variable%20number%20of%20factors/near/189410961" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html#189410961">Bryan Gin-ge Chen (Mar 01 2020 at 00:03)</a>:</h4>
<p>Here are <a href="https://github.com/leanprover-community/mathlib/blob/master/src/data/nat/basic.lean#L981" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/src/data/nat/basic.lean#L981">factorials</a> (I searched for "factorial"). The other fact that Kevin mentioned is <a href="https://github.com/leanprover-community/mathlib/blob/master/src/data/zmod/quadratic_reciprocity.lean#L65" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/src/data/zmod/quadratic_reciprocity.lean#L65">here</a>.</p>

<a name="189411069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/product%20with%20variable%20number%20of%20factors/near/189411069" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html#189411069">Nicholas McConnell (Mar 01 2020 at 00:06)</a>:</h4>
<p>Alright, thanks Bryan</p>

<a name="189443635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/product%20with%20variable%20number%20of%20factors/near/189443635" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html#189443635">Nicholas McConnell (Mar 01 2020 at 18:55)</a>:</h4>
<p>I'm just going to use the builtin ones now because my file is already really big and I have little time left to complete the project.</p>
<p>When I imported data.zmod.quadratic_reciprocity, the file broke down with 1000 problems, and they even persisted when I deleted that import and made the file have the same text it started with, until I restarted VSC.  Is that supposedly the wrong import?</p>

<a name="189444078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/product%20with%20variable%20number%20of%20factors/near/189444078" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/02708productwithvariablenumberoffactors.html#189444078">Bryan Gin-ge Chen (Mar 01 2020 at 19:11)</a>:</h4>
<p>I don't think it's the wrong import, but I can't reproduce your issue either. Sometimes things like this happen if Lean runs out of memory. If it goes away after you restart Lean, I wouldn't worry too much about it. (Note that you can restart Lean without starting VS Code by hitting ctrl+shift+p and typing 'Lean: restart')</p>


{% endraw %}

{% include archive_update.html %}