---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/01949minimumoffiniteset.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html">minimum of finite set</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="126993170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993170" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993170">Patrick Massot (May 23 2018 at 19:43)</a>:</h4>
<blockquote>
<p>with <code>sup</code> you don't need to use <code>iget</code>. <code>max</code> is the better name but I think <code>sup</code> has the better behaviour.</p>
</blockquote>
<p>What is this sup you are talking about?</p>

<a name="126993263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993263" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993263">Chris Hughes (May 23 2018 at 19:45)</a>:</h4>
<p><code>finset.sup</code> defined, or at least used in <code>multivariate_polynomial</code></p>

<a name="126993324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993324" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993324">Chris Hughes (May 23 2018 at 19:46)</a>:</h4>
<p>Only defined for <code>semilattice_sup_bot</code></p>

<a name="126993423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993423" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993423">Patrick Massot (May 23 2018 at 19:48)</a>:</h4>
<p>That's unexpected</p>

<a name="126993424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993424" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993424">Patrick Massot (May 23 2018 at 19:48)</a>:</h4>
<p>Thanks</p>

<a name="126993428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993428" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993428">Patrick Massot (May 23 2018 at 19:49)</a>:</h4>
<p>I still can't use it though. I'll try harder</p>

<a name="126993435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993435" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993435">Chris Hughes (May 23 2018 at 19:49)</a>:</h4>
<p>Why not?</p>

<a name="126993443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993443" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993443">Chris Hughes (May 23 2018 at 19:49)</a>:</h4>
<p>It takes the sup of the image of a given function.</p>

<a name="126993499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993499" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993499">Patrick Massot (May 23 2018 at 19:50)</a>:</h4>
<p>failed to synthesize type class instance for ⊢ semilattice_sup_bot ℝ</p>

<a name="126993510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993510" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993510">Patrick Massot (May 23 2018 at 19:50)</a>:</h4>
<p>It means I need to learn</p>

<a name="126993514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993514" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993514">Patrick Massot (May 23 2018 at 19:50)</a>:</h4>
<p>what is a semilattice_sup_bot</p>

<a name="126993517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993517" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993517">Chris Hughes (May 23 2018 at 19:50)</a>:</h4>
<p>reals aren't a semilattice sup bot</p>

<a name="126993519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993519" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993519">Chris Hughes (May 23 2018 at 19:50)</a>:</h4>
<p>It needs a least element of the type.</p>

<a name="126993522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993522" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993522">Kenny Lau (May 23 2018 at 19:50)</a>:</h4>
<p><code>ennreal</code> is</p>

<a name="126993533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993533" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993533">Kenny Lau (May 23 2018 at 19:50)</a>:</h4>
<p>the nonnegative (in your case, positif) reals also is</p>

<a name="126993723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993723" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993723">Patrick Massot (May 23 2018 at 19:54)</a>:</h4>
<p>Using the type of nonnegative real would probably mess up lots of things</p>

<a name="126993749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993749" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993749">Patrick Massot (May 23 2018 at 19:54)</a>:</h4>
<p>in my norms.lean</p>

<a name="126993759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993759" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993759">Johan Commelin (May 23 2018 at 19:55)</a>:</h4>
<p>Incidentally, I just defined some stuff on nonnegative reals this week...</p>

<a name="126993770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993770" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993770">Johan Commelin (May 23 2018 at 19:55)</a>:</h4>
<p>Like that it is a comm_semiring, and its topology</p>

<a name="126993831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993831" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993831">Patrick Massot (May 23 2018 at 19:56)</a>:</h4>
<p>Nooo! I don't want to do topological commutative semi-ring theory!</p>

<a name="126993927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993927" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993927">Johan Commelin (May 23 2018 at 19:58)</a>:</h4>
<p>Well, it is very useful for defining the standard simplices. Because it takes care of the condition that all the coordinates are positive</p>

<a name="126993946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126993946" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126993946">Andrew Ashworth (May 23 2018 at 19:59)</a>:</h4>
<p>is this part of your bigop project? I am dying to have useable matrices and summations in Lean, maybe I will take a look</p>

<a name="126994048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126994048" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126994048">Patrick Massot (May 23 2018 at 20:01)</a>:</h4>
<p>No, I'm back to calculus while I wait for omega/cooper to be usable, just in case it makes using nat possible</p>

<a name="126994149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126994149" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126994149">Andrew Ashworth (May 23 2018 at 20:02)</a>:</h4>
<p>well, studying cooper was also on my recreational to-do list, so i'll have to get on it</p>

<a name="126994166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126994166" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126994166">Patrick Massot (May 23 2018 at 20:02)</a>:</h4>
<p>I was not able to import it in any way</p>

<a name="126995176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126995176" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126995176">Patrick Massot (May 23 2018 at 20:21)</a>:</h4>
<p><span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> The point of my questions about max is to try to get a norm on ℝ^n. But this goes through the dreaded definition of Lean metric spaces. Could you get me started by doing</p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">metric_space</span><span class="bp">.</span><span class="n">fintype_function</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">metric_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">β</span><span class="o">]</span>
<span class="o">:</span> <span class="n">metric_space</span> <span class="o">(</span><span class="n">β</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span>
</pre></div>


<p>(using the max distance between images) I think I could manage from there.</p>

<a name="126995281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126995281" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126995281">Johannes Hölzl (May 23 2018 at 20:22)</a>:</h4>
<p>Do you want to use the max distance in general, or just because we don't have sqrt yet?</p>

<a name="126995324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126995324" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126995324">Patrick Massot (May 23 2018 at 20:23)</a>:</h4>
<p>We started using max on products a long time ago. It's partly for lack of square root tooling, but I also don't see why square root would be better</p>

<a name="126995353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126995353" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126995353">Patrick Massot (May 23 2018 at 20:23)</a>:</h4>
<p>The current state of this story is <a href="https://github.com/PatrickMassot/lean-differential-topology/blob/master/src/norms.lean" target="_blank" title="https://github.com/PatrickMassot/lean-differential-topology/blob/master/src/norms.lean">https://github.com/PatrickMassot/lean-differential-topology/blob/master/src/norms.lean</a></p>

<a name="126995399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126995399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126995399">Patrick Massot (May 23 2018 at 20:24)</a>:</h4>
<p>(with products of two types only)</p>

<a name="126995564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126995564" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126995564">Kevin Buzzard (May 23 2018 at 20:26)</a>:</h4>
<p>(and added segfault)</p>

<a name="126995569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126995569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126995569">Kevin Buzzard (May 23 2018 at 20:26)</a>:</h4>
<p>(no)</p>

<a name="126995576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126995576" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126995576">Kevin Buzzard (May 23 2018 at 20:26)</a>:</h4>
<p>(assertion violation)</p>

<a name="126995619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126995619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126995619">Patrick Massot (May 23 2018 at 20:27)</a>:</h4>
<p>The version up at github has no assertion violation</p>

<a name="126995689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126995689" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126995689">Patrick Massot (May 23 2018 at 20:28)</a>:</h4>
<p>And I was linking to this only so that Johannes could see my definition of normed group</p>

<a name="126996448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126996448" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126996448">Johannes Hölzl (May 23 2018 at 20:42)</a>:</h4>
<p>For me somehow the Euclidean distance (l_2-norm) as the canonical distance. But yeah, we can first start with the max-distance. That's one advantage of uniform spaces: the produce construction is more canonical :-)</p>

<a name="126997326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126997326" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126997326">Kevin Buzzard (May 23 2018 at 21:01)</a>:</h4>
<p>"more canonical" :-)</p>

<a name="126997332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126997332" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126997332">Kevin Buzzard (May 23 2018 at 21:01)</a>:</h4>
<p>We didn't formalise canonical yet</p>

<a name="126997334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/126997334" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#126997334">Kevin Buzzard (May 23 2018 at 21:01)</a>:</h4>
<p>let alone make it a partial order</p>

<a name="127000110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127000110" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127000110">Johannes Hölzl (May 23 2018 at 22:04)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span>  <a href="https://gist.github.com/johoelzl/2ea9c95fb3a4773c8da5f63384906105" target="_blank" title="https://gist.github.com/johoelzl/2ea9c95fb3a4773c8da5f63384906105">https://gist.github.com/johoelzl/2ea9c95fb3a4773c8da5f63384906105</a> here is the metric space for finite function.<br>
<span class="user-mention" data-user-id="110026">@Simon Hudon</span>  I think I will change <code>max</code> to my version of <code>maxi</code>. How would you do these kind of proofs?</p>

<a name="127000293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127000293" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127000293">Mario Carneiro (May 23 2018 at 22:09)</a>:</h4>
<p>We can make <code>imax</code> (I usually use the <code>i</code> as a prefix) as an alternative to <code>max</code> defined for inhabited sets if you like. If it is defined as <code>max.iget</code> then we get all the theorems for free</p>

<a name="127000354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127000354" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127000354">Mario Carneiro (May 23 2018 at 22:10)</a>:</h4>
<p>I want to make <code>finset.max</code> a special case of <code>finset.sup</code> by defining a <code>with_bot A := option A</code>  type which extends the order with <code>none &lt;= some a</code></p>

<a name="127002306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127002306" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127002306">Johannes Hölzl (May 23 2018 at 22:58)</a>:</h4>
<p>I still don't see cases where the current <code>max</code> has advantages, or how to do proofs properly. Using <code>with_bot</code>, could we just use <code>sup</code> instead of the current <code>max</code>, and use <code>sup</code> + <code>iget</code> as <code>max</code>?</p>

<a name="127003581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127003581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127003581">Simon Hudon (May 23 2018 at 23:34)</a>:</h4>
<p><span class="user-mention" data-user-id="110294">@Johannes Hölzl</span>  Sorry, I haven't been following. Which proofs do you mean?</p>

<a name="127012241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127012241" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127012241">Mario Carneiro (May 24 2018 at 04:27)</a>:</h4>
<p>Using <code>with_bot</code>, <code>sup</code> over <code>with_bot</code> would be the same as <code>max</code> is currently (in particular, it would return an <code>option</code>), and then you could postprocess the result with <code>iget</code> if that makes sense in your application. I like the way <code>max</code> works at the moment because it lets you work relationally with max, i.e. "x is the max of s" rather than a term "max of s" which may or may not actually be a max of s</p>

<a name="127014486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127014486" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127014486">Sean Leather (May 24 2018 at 05:55)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">maxi</span> <span class="o">[</span><span class="n">decidable_linear_order</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">inhabited</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">β</span> <span class="o">:=</span> <span class="o">(</span><span class="n">s</span><span class="bp">.</span><span class="n">image</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">max</span><span class="bp">.</span><span class="n">iget</span>

<span class="kn">lemma</span> <span class="n">maxi_empty</span> <span class="o">:</span> <span class="o">(</span><span class="err">∅</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span><span class="bp">.</span><span class="n">maxi</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">default</span> <span class="n">β</span>
</pre></div>


<p>I don't understand how <code>maxi_empty</code> is useful.</p>

<a name="127014487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127014487" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127014487">Johannes Hölzl (May 24 2018 at 05:55)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> the proofs in <a href="https://gist.github.com/johoelzl/2ea9c95fb3a4773c8da5f63384906105" target="_blank" title="https://gist.github.com/johoelzl/2ea9c95fb3a4773c8da5f63384906105">https://gist.github.com/johoelzl/2ea9c95fb3a4773c8da5f63384906105</a> Its a little bit of a special case (we are working essentially in R &gt;= 0) and we explicitly want <code>s = empty -&gt; max s = 0</code>. Without adding my own rules for <code>maxi</code> (a.k.a. <code>imax</code>) I would need a lot of annoying case distinctions (ala <code>finset.univ = empty</code>)</p>

<a name="127014574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127014574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127014574">Johannes Hölzl (May 24 2018 at 05:59)</a>:</h4>
<p>At least at the beginning <code>maxi_empty</code> is helpful: the following rules have a special condition to compare to the default when <code>s = empty</code>, which can be resolved using <code>by simp * at *</code>.</p>

<a name="127014687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127014687" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127014687">Sean Leather (May 24 2018 at 06:03)</a>:</h4>
<p>I see: <code>(hd : s = ∅ → b ≤ default β)</code> is what you mean. So with an <code>option</code> result, you don't need that? But you still think using <code>inhabited</code> is better?</p>

<a name="127014782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127014782" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127014782">Sean Leather (May 24 2018 at 06:06)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">le_maxi_of_forall</span> <span class="o">{</span><span class="n">b</span> <span class="o">:</span> <span class="n">β</span><span class="o">}</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">a</span><span class="err">∈</span><span class="n">s</span><span class="o">,</span> <span class="n">b</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">hd</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">=</span> <span class="err">∅</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">≤</span> <span class="n">default</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≤</span> <span class="n">s</span><span class="bp">.</span><span class="n">maxi</span> <span class="n">f</span>
</pre></div>


<p>looks a lot <a href="https://github.com/leanprover/mathlib/pull/133/commits/351dd66c84cc45c53f7de49836f0086d35071327#diff-e7d41a6a4fb2225734fc2fb30e4dceeeR1069" target="_blank" title="https://github.com/leanprover/mathlib/pull/133/commits/351dd66c84cc45c53f7de49836f0086d35071327#diff-e7d41a6a4fb2225734fc2fb30e4dceeeR1069">like</a></p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">le_max_of_mem</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">max</span> <span class="n">b</span> <span class="n">s</span>
</pre></div>

<a name="127014831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127014831" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127014831">Sean Leather (May 24 2018 at 06:08)</a>:</h4>
<p>BTW, I'm really just trying to wrap my head around the use of <code>inhabited</code> and why it's better. I'm not trying to claim mine is universally better or anything. Since I haven't tried to implement it or use it myself, I don't have an intuition for it.</p>

<a name="127015010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127015010" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127015010">Johannes Hölzl (May 24 2018 at 06:15)</a>:</h4>
<p><code>le_maxi_of_forall</code> is slightly different, as it is about a lower bound. Either <code>s</code> is empty, than you compare it to the default: handling the case where <code>s</code> is empty, <strong>or</strong> where the default value is well defined. In your <code>le_max_of_mem</code> case you show that an element is a lower bound, also there is no difference between non-empty <code>s</code> and <code>b</code> being well defined.</p>

<a name="127015170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127015170" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127015170">Sean Leather (May 24 2018 at 06:21)</a>:</h4>
<p>Right. But they both deal with a “default,” whether that be <code>b</code> in <code>le_max_of_mem</code> or <code>default β</code> in <code>le_maxi_of_forall</code>. That's the similarity I see.</p>

<a name="127015318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127015318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127015318">Mario Carneiro (May 24 2018 at 06:26)</a>:</h4>
<p>I'm not a fan of these <code>inhabited</code> solutions because <code>default</code> is (supposed to be) a completely arbitrary element with no semantic value. It's not supposed to be compared to stuff because in a given structure you have no idea what it could be. If it happens to work out in some type, that should be treated as coincidence and should not be relied on.</p>

<a name="127015323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127015323" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127015323">Mario Carneiro (May 24 2018 at 06:26)</a>:</h4>
<p>which is why I find the hypothesis <code> s = ∅ → b ≤ default β</code> very strange</p>

<a name="127015335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127015335" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127015335">Mario Carneiro (May 24 2018 at 06:27)</a>:</h4>
<p>if you care about having a particular fallback value, there is <code>get_or_else</code> for that</p>

<a name="127197478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127197478" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127197478">Patrick Massot (May 28 2018 at 09:37)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> and <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> did you decide something about this <code>max</code> debate? Can I use <a href="https://gist.github.com/johoelzl/2ea9c95fb3a4773c8da5f63384906105" target="_blank" title="https://gist.github.com/johoelzl/2ea9c95fb3a4773c8da5f63384906105">https://gist.github.com/johoelzl/2ea9c95fb3a4773c8da5f63384906105</a> or is it already outdated with respect to current mathlib?</p>

<a name="127197858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127197858" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127197858">Johannes Hölzl (May 28 2018 at 09:46)</a>:</h4>
<p>I'm not sure yet. I didn't try to write the proof only using the <code>option</code> variant of <code>max</code>. <span class="user-mention" data-user-id="110045">@Sean Leather</span> did you use <code>max</code> already?<br>
But we have a new possibility now: use <code>nnreal</code> to define <code>dist</code> and <code>norm</code> (or maybe <code>nndist</code>). Then we can use <code>sup</code> and don't need to worry about the empty case. It should still easily embed into <code>real</code>.</p>

<a name="127197894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127197894" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127197894">Patrick Massot (May 28 2018 at 09:48)</a>:</h4>
<p>I don't understand how <code>nnreal</code> could help here</p>

<a name="127198066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127198066" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127198066">Sebastien Gouezel (May 28 2018 at 09:51)</a>:</h4>
<p>Please, please, please don't use nnreals for dist and norm! I tried to do something like that for Gromov hyperbolic space (except that I needed distances taking the value infinity, so I used ennreal). And then I had to start everything over again using ereal once I was deep enough in the theory, when I had to do serious computations and inequalities, as the fact that subtraction on ennreal (or nnreal, or nat) is truncating things makes everything a total mess -- I think Patrick has been bitten by this quite a few times, right?</p>

<a name="127198135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127198135" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127198135">Patrick Massot (May 28 2018 at 09:52)</a>:</h4>
<p>Oh yes, I don't want more crazy substraction</p>

<a name="127200413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/minimum%20of%20finite%20set/near/127200413" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/01949minimumoffiniteset.html#127200413">Sean Leather (May 28 2018 at 10:54)</a>:</h4>
<blockquote>
<p>I'm not sure yet. I didn't try to write the proof only using the <code>option</code> variant of <code>max</code>. <span class="user-mention" data-user-id="110045">@Sean Leather</span> did you use <code>max</code> already?</p>
</blockquote>
<p><span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> No, I haven't started using the <code>max</code> in mathlib.</p>


{% endraw %}
