---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/53656Algebraicgeometrycourse.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html">Algebraic geometry course</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="185481245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185481245" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185481245">Kevin Buzzard (Jan 13 2020 at 10:39)</a>:</h4>
<p>I'm starting my algebraic geometry course today, M4P33. <a href="https://github.com/ImperialCollegeLondon/M4P33/blob/master/src/affine_algebraic_set/union.lean" target="_blank" title="https://github.com/ImperialCollegeLondon/M4P33/blob/master/src/affine_algebraic_set/union.lean">Here are my notes for lecture 1</a>. Any comments welcome. The lecture is 4-5 in London, I'll use Lean on my laptop at some point and I'll leave Zulip on so that if anyone posts in this thread it'll flash up on the screen lol</p>

<a name="185481343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185481343" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185481343">Kevin Buzzard (Jan 13 2020 at 10:40)</a>:</h4>
<p>Will tidy it up later but need to do 100 other things first</p>

<a name="185482239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185482239" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185482239">Johan Commelin (Jan 13 2020 at 10:56)</a>:</h4>
<p>Good luck!</p>

<a name="185521398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185521398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185521398">Johan Commelin (Jan 13 2020 at 18:31)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> How did the first lecture go?</p>

<a name="185533302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185533302" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185533302">Kevin Buzzard (Jan 13 2020 at 20:20)</a>:</h4>
<p>Well I started late because something else over-ran beforehand, but it seemed to go fine. We talked about the union of two algebraic sets being an algebraic set.</p>

<a name="185580100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185580100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185580100">Kevin Buzzard (Jan 14 2020 at 10:01)</a>:</h4>
<p>I'm going to be formalising the proof of the Nullstellensatz in my course soon. Do we already have this in Lean?</p>

<a name="185580428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185580428" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185580428">Johan Commelin (Jan 14 2020 at 10:05)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="231800">@Lennard Henze</span> was working on this</p>

<a name="185580436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185580436" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185580436">Johan Commelin (Jan 14 2020 at 10:05)</a>:</h4>
<p>How are things going, Lennard?</p>

<a name="185587858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185587858" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185587858">Johan Commelin (Jan 14 2020 at 11:50)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Did you show those 4th year students Lean during the lecture? If so, how did they react?</p>

<a name="185588465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185588465" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185588465">Kevin Buzzard (Jan 14 2020 at 11:57)</a>:</h4>
<p>It was a bit hectic :-) because I've got so much to do and had no real time to think about how to explain the Lean. It's in a better state now.</p>

<a name="185598087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185598087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185598087">Agnishom Chattopadhyay (Jan 14 2020 at 14:03)</a>:</h4>
<p>Naive Question: This does not begin with the definition of affine algebraic sets. If that was not taught in Lecture 1 of Algebraic Geometry, in which course was it taught?</p>

<a name="185598189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185598189" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185598189">Johan Commelin (Jan 14 2020 at 14:04)</a>:</h4>
<p>Probably commutative algebra</p>

<a name="185603451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185603451" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185603451">Kevin Buzzard (Jan 14 2020 at 14:57)</a>:</h4>
<p>We're following <a href="https://homepages.warwick.ac.uk/staff/Martin.Orr/2017-8/alg-geom/" target="_blank" title="https://homepages.warwick.ac.uk/staff/Martin.Orr/2017-8/alg-geom/">these notes</a> by Martin Orr.</p>

<a name="185603517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185603517" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185603517">Kevin Buzzard (Jan 14 2020 at 14:58)</a>:</h4>
<p>The definition is in there, except I have removed what I believe to be an unnecessary finiteness assumption.</p>

<a name="185605274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185605274" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185605274">Lennard Henze (Jan 14 2020 at 15:17)</a>:</h4>
<p>Yes I was working on that, but I discontinued my work because I was overwhelmed by the task. My work so far can be found here <a href="https://github.com/Forsetes/mathlib/blob/hilberts_nullstellensatz/src/ring_theory/noether_normalization.lean" target="_blank" title="https://github.com/Forsetes/mathlib/blob/hilberts_nullstellensatz/src/ring_theory/noether_normalization.lean">https://github.com/Forsetes/mathlib/blob/hilberts_nullstellensatz/src/ring_theory/noether_normalization.lean</a></p>

<a name="185904131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185904131" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185904131">Kevin Buzzard (Jan 17 2020 at 10:39)</a>:</h4>
<p><a href="https://github.com/ImperialCollegeLondon/M4P33/blob/master/src/abstract_V_and_I.lean" target="_blank" title="https://github.com/ImperialCollegeLondon/M4P33/blob/master/src/abstract_V_and_I.lean">Lecture 3 of my course</a>. Can <em>anyone</em> tell me how to get rid of those bloody <code>P</code>s everywhere?</p>

<a name="185905603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185905603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185905603">Mario Carneiro (Jan 17 2020 at 11:01)</a>:</h4>
<p>Use parameters</p>

<a name="185905710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185905710" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185905710">Mario Carneiro (Jan 17 2020 at 11:02)</a>:</h4>
<p>Alternatively, bake the application of <code>P</code> into the notations for V and I as in Sebastian's comment</p>

<a name="185906188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185906188" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185906188">Kevin Buzzard (Jan 17 2020 at 11:10)</a>:</h4>
<p>What automation does these proofs? Is there a good name for V and I? For all I know they are both <code>comp.left_distrib</code></p>

<a name="185906212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185906212" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185906212">Kevin Buzzard (Jan 17 2020 at 11:11)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> how close am I to getting lecture 3 into a beautiful html file?</p>

<a name="185906415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185906415" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185906415">Kevin Buzzard (Jan 17 2020 at 11:14)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I thought notation didn't work with variables?</p>

<a name="185906562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185906562" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185906562">Mario Carneiro (Jan 17 2020 at 11:17)</a>:</h4>
<p>I don't know any relevant automation for the last proof, but it is what I would call a one-liner</p>

<a name="185906615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185906615" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185906615">Mario Carneiro (Jan 17 2020 at 11:18)</a>:</h4>
<p>You have a lot of <code>??</code> in the proof, did you want to ask a question about it?</p>

<a name="185906643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185906643" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185906643">Mario Carneiro (Jan 17 2020 at 11:19)</a>:</h4>
<p>I don't often put free variables in notations because it's confusing, but I think Sebastian's idea will work</p>

<a name="185907002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185907002" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185907002">Kevin Buzzard (Jan 17 2020 at 11:25)</a>:</h4>
<p>I cut and pasted one proof and then started switching V's to I's, and then it compiled before I had finished :-)</p>

<a name="185907064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185907064" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185907064">Kevin Buzzard (Jan 17 2020 at 11:26)</a>:</h4>
<blockquote>
<p>I don't often put free variables in notations because it's confusing, but I think Sebastian's idea will work</p>
</blockquote>
<p>What is Sebastian's idea?</p>

<a name="185907104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185907104" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185907104">Mario Carneiro (Jan 17 2020 at 11:27)</a>:</h4>
<p>Hm, I had to mess with it a bit, but with this preamble you can replace each <code>ğ• P</code> with <code>ğ•</code> and similarly for <code>ğ•€</code>:</p>
<div class="codehilite"><pre><span></span><span class="kn">variable</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>
<span class="kn">variable</span> <span class="o">{</span><span class="n">W</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span>
<span class="kn">variable</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">â†’</span> <span class="n">W</span> <span class="bp">â†’</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="n">include</span> <span class="n">P</span>

<span class="n">def</span> <span class="err">ğ•</span><span class="bp">_</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">W</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">W</span> <span class="bp">|</span> <span class="bp">âˆ€</span> <span class="n">f</span> <span class="err">âˆˆ</span> <span class="n">S</span><span class="o">,</span> <span class="n">P</span> <span class="n">f</span> <span class="n">x</span><span class="o">}</span>
<span class="kn">notation</span> <span class="bp">`</span><span class="err">ğ•</span><span class="bp">`</span><span class="o">:</span><span class="n">max</span> <span class="o">:=</span> <span class="err">ğ•</span><span class="bp">_</span> <span class="o">(</span><span class="k">by</span> <span class="n">exact</span> <span class="n">P</span><span class="o">)</span>

<span class="n">def</span> <span class="err">ğ•€</span><span class="bp">_</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">set</span> <span class="n">W</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">|</span> <span class="bp">âˆ€</span> <span class="n">x</span> <span class="err">âˆˆ</span> <span class="n">X</span><span class="o">,</span> <span class="n">P</span> <span class="n">f</span> <span class="n">x</span><span class="o">}</span>
<span class="kn">notation</span> <span class="bp">`</span><span class="err">ğ•€</span><span class="bp">`</span><span class="o">:</span><span class="n">max</span> <span class="o">:=</span> <span class="err">ğ•€</span><span class="bp">_</span> <span class="o">(</span><span class="k">by</span> <span class="n">exact</span> <span class="n">P</span><span class="o">)</span>
</pre></div>

<a name="185907279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185907279" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185907279">Mario Carneiro (Jan 17 2020 at 11:30)</a>:</h4>
<p>It also works, without the notation, if you just change all the variables to parameters</p>

<a name="185907402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185907402" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185907402">Mario Carneiro (Jan 17 2020 at 11:32)</a>:</h4>
<p>Oh I see, your proof of <code>ğ•€ğ•ğ•€_eq_ğ•€</code> goes through because lean noticed that if it substitutes <code>X</code> for <code>S</code> and vice versa then <code>V</code> becomes <code>I</code> and vice versa... so <code>ğ•€ğ•ğ•€_eq_ğ•€</code> and <code>ğ•ğ•€ğ•_eq_ğ•</code> are actually the same proof</p>

<a name="185907407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185907407" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185907407">Mario Carneiro (Jan 17 2020 at 11:32)</a>:</h4>
<p>See?</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="err">ğ•€ğ•ğ•€</span><span class="bp">_</span><span class="n">eq_</span><span class="err">ğ•€</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">set</span> <span class="n">W</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="err">ğ•€</span> <span class="o">(</span><span class="err">ğ•</span> <span class="o">(</span><span class="err">ğ•€</span> <span class="n">V</span><span class="o">)))</span> <span class="bp">=</span> <span class="err">ğ•€</span> <span class="n">V</span> <span class="o">:=</span>
<span class="err">ğ•ğ•€ğ•</span><span class="bp">_</span><span class="n">eq_</span><span class="err">ğ•</span> <span class="bp">_</span> <span class="bp">_</span>
</pre></div>

<a name="185907432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185907432" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185907432">Mario Carneiro (Jan 17 2020 at 11:33)</a>:</h4>
<p>If you use parameters, this trick doesn't work</p>

<a name="185908985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185908985" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185908985">Patrick Massot (Jan 17 2020 at 11:55)</a>:</h4>
<blockquote>
<p>Patrick Massot how close am I to getting lecture 3 into a beautiful html file?</p>
</blockquote>
<p>What do you want the html file to look like? Are you aiming for something as on the mathlib website or something as in my lecture notes?</p>

<a name="185914066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185914066" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185914066">Kevin Buzzard (Jan 17 2020 at 13:11)</a>:</h4>
<p>Something I could slap up before the end of this lecture at 1:50pm</p>

<a name="185914079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185914079" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185914079">Kevin Buzzard (Jan 17 2020 at 13:11)</a>:</h4>
<p>which I'm currently giving</p>

<a name="185937369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185937369" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185937369">Kevin Buzzard (Jan 17 2020 at 17:17)</a>:</h4>
<p>do we not have nilradical in Lean?</p>

<a name="185937631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185937631" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185937631">Alex J. Best (Jan 17 2020 at 17:20)</a>:</h4>
<p>Nope!</p>

<a name="185937787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185937787" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185937787">Alex J. Best (Jan 17 2020 at 17:22)</a>:</h4>
<p>Or nilpotents etc. I added some bits at <a href="https://github.com/leanprover-community/mathlib/blob/ece70146a142c8b04563c21edb34c87d192b172b/src/ring_theory/dedekind_finite.lean" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/ece70146a142c8b04563c21edb34c87d192b172b/src/ring_theory/dedekind_finite.lean">https://github.com/leanprover-community/mathlib/blob/ece70146a142c8b04563c21edb34c87d192b172b/src/ring_theory/dedekind_finite.lean</a> but its almost nothing</p>

<a name="185941507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185941507" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185941507">Kevin Buzzard (Jan 17 2020 at 18:07)</a>:</h4>
<p>Today my main achievement was that I managed to reproduce the proof which I knew as a kid of something which I knew couldn't possibly be the Nullstellensatz:</p>
<p><a href="https://github.com/ImperialCollegeLondon/M4P33/blob/ac0a28f19936a7f861ff3c6c0dc57d9b6093e8e6/src/abstract_V_and_I.lean#L151" target="_blank" title="https://github.com/ImperialCollegeLondon/M4P33/blob/ac0a28f19936a7f861ff3c6c0dc57d9b6093e8e6/src/abstract_V_and_I.lean#L151">https://github.com/ImperialCollegeLondon/M4P33/blob/ac0a28f19936a7f861ff3c6c0dc57d9b6093e8e6/src/abstract_V_and_I.lean#L151</a></p>
<p>I managed to abstract out all of the algebraic geometry completely :D I only import data.set.basic (although there's a joke at the top of the file)</p>

<a name="185944812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185944812" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185944812">Kevin Buzzard (Jan 17 2020 at 18:44)</a>:</h4>
<blockquote>
<p>If you use parameters, this trick doesn't work</p>
</blockquote>
<p>Right, because P needs to be reversed.</p>

<a name="185944869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185944869" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185944869">Kevin Buzzard (Jan 17 2020 at 18:46)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="err">ğ•</span><span class="bp">_</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">W</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">W</span> <span class="bp">|</span> <span class="bp">âˆ€</span> <span class="n">f</span> <span class="err">âˆˆ</span> <span class="n">S</span><span class="o">,</span> <span class="n">P</span> <span class="n">f</span> <span class="n">x</span><span class="o">}</span>
<span class="kn">notation</span> <span class="bp">`</span><span class="err">ğ•</span><span class="bp">`</span><span class="o">:</span><span class="n">max</span> <span class="o">:=</span> <span class="err">ğ•</span><span class="bp">_</span> <span class="o">(</span><span class="k">by</span> <span class="n">exact</span> <span class="n">P</span><span class="o">)</span>
</pre></div>


<p>This hack enables me to state theorems the way mathematicians would expect to see them, but when I'm working on proofs I still see the <code>P</code> in the tactic state. Is there any way to get rid of this?</p>

<a name="185956929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185956929" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185956929">Kevin Buzzard (Jan 17 2020 at 21:05)</a>:</h4>
<p>Is there a one-line tactic which solves this sort of thing:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">lattice</span>

<span class="kn">open</span> <span class="n">set</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">â†’</span> <span class="n">A</span> <span class="bp">â†’</span> <span class="kt">Prop</span><span class="o">)</span>
  <span class="o">(</span><span class="n">Î¹</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">Î¹</span> <span class="bp">â†’</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span>
<span class="o">(</span><span class="bp">âˆ€</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="err">âˆˆ</span> <span class="err">â‹ƒ</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">Î¹</span><span class="o">),</span> <span class="n">S</span> <span class="n">i</span><span class="o">)</span> <span class="bp">â†’</span> <span class="n">P</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">â†”</span>
  <span class="bp">âˆ€</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">Î¹</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span> <span class="n">f</span> <span class="err">âˆˆ</span> <span class="n">S</span> <span class="n">i</span> <span class="bp">â†’</span> <span class="n">P</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span><span class="o">,</span>
    <span class="n">intros</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">a</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">mem_Union</span><span class="o">,</span>
    <span class="n">use</span> <span class="n">i</span><span class="o">,</span>
    <span class="n">assumption</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">h</span> <span class="n">f</span> <span class="n">hf</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">mem_Union</span> <span class="n">at</span> <span class="n">hf</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">hf</span> <span class="k">with</span> <span class="n">i</span> <span class="n">hi</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">h</span> <span class="n">i</span><span class="o">,</span>
  <span class="n">assumption</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>I really feel like I'm following my nose at all points and so am hoping this is just the sort of thing that CS people have tacticised</p>

<a name="185957312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185957312" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185957312">Chris Hughes (Jan 17 2020 at 21:08)</a>:</h4>
<p><code>simp, tauto</code></p>

<a name="185961199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185961199" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185961199">Kevin Buzzard (Jan 17 2020 at 21:47)</a>:</h4>
<p>Do we have this:</p>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm">- Over an infinite integral domain a polynomial f is zero iff it</span>
<span class="cm">    evaluates to zero everywhere -/</span>
<span class="kn">lemma</span> <span class="n">mv_polynomial</span><span class="bp">.</span><span class="n">eval_eq_zero</span>  <span class="o">{</span><span class="n">k</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">integral_domain</span> <span class="n">k</span><span class="o">]</span> <span class="o">[</span><span class="n">infinite</span> <span class="n">k</span><span class="o">]</span>
  <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">n</span> <span class="n">k</span><span class="o">}</span> <span class="o">:</span>
<span class="o">(</span><span class="bp">âˆ€</span> <span class="n">x</span><span class="o">,</span> <span class="kn">eval</span> <span class="n">x</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">â†”</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>


<p>? I think you can prove it in the case when n is finite, by induction on the size of n, and then for general n you write the polynomial ring as a filtered colimit of finite n's. </p>
<p>I would like to prove this myself, if it's not there, but I suspect there might be some quite high-powered ways to do this. For example I don't know whether I'm supposed to be reducing to the case of <code>n = fin m</code> or <code>n : fintype</code> or what. The reduction needs the concept of the variables which appear in f, which might be some sort of monad bind thing?</p>

<a name="185961290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185961290" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185961290">Kevin Buzzard (Jan 17 2020 at 21:48)</a>:</h4>
<p><span class="user-mention" data-user-id="258511">@Alexander Uhlmann</span> isolated this property at Xena yesterday.</p>

<a name="185982751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185982751" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185982751">Jesse Michael Han (Jan 18 2020 at 06:33)</a>:</h4>
<blockquote>
<p><code>simp, tauto</code></p>
</blockquote>
<p>i was surprised <code>finish</code> couldn't do it alone, you have to spoon-feed it:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">lattice</span>

<span class="kn">open</span> <span class="n">set</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">â†’</span> <span class="n">A</span> <span class="bp">â†’</span> <span class="kt">Prop</span><span class="o">)</span>
  <span class="o">(</span><span class="n">Î¹</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">Î¹</span> <span class="bp">â†’</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span>
<span class="o">(</span><span class="bp">âˆ€</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="err">âˆˆ</span> <span class="err">â‹ƒ</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">Î¹</span><span class="o">),</span> <span class="n">S</span> <span class="n">i</span><span class="o">)</span> <span class="bp">â†’</span> <span class="n">P</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">â†”</span>
  <span class="bp">âˆ€</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">Î¹</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span> <span class="n">f</span> <span class="err">âˆˆ</span> <span class="n">S</span> <span class="n">i</span> <span class="bp">â†’</span> <span class="n">P</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">finish</span><span class="o">[</span><span class="n">iff_iff_implies_and_implies</span><span class="o">]</span>
</pre></div>

<a name="185992349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185992349" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185992349">Kevin Buzzard (Jan 18 2020 at 11:52)</a>:</h4>
<p>Urs Schreiber <a href="https://ncatlab.org/nlab/show/Nullstellensatz#GeneralAbstract" target="_blank" title="https://ncatlab.org/nlab/show/Nullstellensatz#GeneralAbstract">pointed me to this nLab page</a> on Twitter. Does anyone have a clue what is going on here?</p>

<a name="185997417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/185997417" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#185997417">Johan Commelin (Jan 18 2020 at 14:24)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I've no idea what's going on there, but I do know that it is completely useless for our purposes. We're miles away from cohesive sheaf toposes.</p>

<a name="186013426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186013426" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186013426">Johan Commelin (Jan 18 2020 at 21:57)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I want to go to bed, so I'm just dumping what I hacked together:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">mv_polynomial</span>

<span class="n">noncomputable</span> <span class="n">theory</span>
<span class="n">open_locale</span> <span class="n">classical</span>

<span class="kn">open</span> <span class="n">mv_polynomial</span> <span class="n">polynomial</span>

<span class="c">/-</span><span class="cm">- Over an infinite integral domain a polynomial f is zero if it</span>
<span class="cm">    evaluates to zero everywhere -/</span>
<span class="kn">lemma</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">eval_eq_zero</span>
  <span class="o">{</span><span class="n">k</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">integral_domain</span> <span class="n">k</span><span class="o">]</span> <span class="o">[</span><span class="n">infinite</span> <span class="n">k</span><span class="o">]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">k</span><span class="o">}</span>
  <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">âˆ€</span> <span class="n">x</span><span class="o">,</span> <span class="kn">eval</span> <span class="n">x</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rcases</span> <span class="n">infinite</span><span class="bp">.</span><span class="n">exists_not_mem_finset</span> <span class="o">(</span><span class="n">roots</span> <span class="n">f</span><span class="o">)</span> <span class="k">with</span> <span class="bp">âŸ¨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="bp">âŸ©</span><span class="o">,</span>
  <span class="n">contrapose</span><span class="bp">!</span> <span class="n">hx</span> <span class="k">with</span> <span class="n">hf</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">mem_roots</span> <span class="n">hf</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">H</span><span class="o">,</span>
<span class="kn">end</span>

<span class="c">/-</span><span class="cm">- Over an infinite integral domain a polynomial f is zero iff it</span>
<span class="cm">    evaluates to zero everywhere -/</span>
<span class="kn">lemma</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">eval_eq_zero_iff</span>
  <span class="o">{</span><span class="n">k</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">integral_domain</span> <span class="n">k</span><span class="o">]</span> <span class="o">[</span><span class="n">infinite</span> <span class="n">k</span><span class="o">]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">k</span><span class="o">}</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">âˆ€</span> <span class="n">x</span><span class="o">,</span> <span class="kn">eval</span> <span class="n">x</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">â†”</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="bp">âŸ¨</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">eval_eq_zero</span><span class="o">,</span> <span class="k">by</span> <span class="o">{</span> <span class="n">rintro</span> <span class="n">rfl</span> <span class="n">x</span><span class="o">,</span> <span class="n">exact</span> <span class="n">rfl</span> <span class="o">}</span><span class="bp">âŸ©</span>

<span class="n">def</span> <span class="n">fin</span><span class="bp">.</span><span class="n">equiv_empty</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">0</span> <span class="err">â‰ƒ</span> <span class="n">empty</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">i</span><span class="o">,</span> <span class="n">false</span><span class="bp">.</span><span class="n">elim</span> <span class="err">$</span> <span class="n">nat</span><span class="bp">.</span><span class="n">not_lt_zero</span> <span class="bp">_</span> <span class="n">i</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="n">empty</span><span class="bp">.</span><span class="n">elim</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">i</span><span class="o">,</span> <span class="n">false</span><span class="bp">.</span><span class="n">elim</span> <span class="err">$</span> <span class="n">nat</span><span class="bp">.</span><span class="n">not_lt_zero</span> <span class="bp">_</span> <span class="n">i</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">.</span><span class="n">elim</span> <span class="o">}</span>

<span class="n">def</span> <span class="n">fin</span><span class="bp">.</span><span class="n">equiv_pempty</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">0</span> <span class="err">â‰ƒ</span> <span class="n">pempty</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">i</span><span class="o">,</span> <span class="n">false</span><span class="bp">.</span><span class="n">elim</span> <span class="err">$</span> <span class="n">nat</span><span class="bp">.</span><span class="n">not_lt_zero</span> <span class="bp">_</span> <span class="n">i</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="n">pempty</span><span class="bp">.</span><span class="n">elim</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">i</span><span class="o">,</span> <span class="n">false</span><span class="bp">.</span><span class="n">elim</span> <span class="err">$</span> <span class="n">nat</span><span class="bp">.</span><span class="n">not_lt_zero</span> <span class="bp">_</span> <span class="n">i</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">.</span><span class="n">elim</span> <span class="o">}</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">mv_polynomial</span><span class="bp">.</span><span class="n">eval_rename</span>
  <span class="o">{</span><span class="n">k</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">k</span><span class="o">]</span>
  <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">m</span> <span class="err">â‰ƒ</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">m</span> <span class="n">k</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">:</span>
  <span class="kn">eval</span> <span class="n">x</span> <span class="o">(</span><span class="n">rename</span> <span class="n">e</span> <span class="n">f</span><span class="o">)</span> <span class="bp">=</span> <span class="kn">eval</span> <span class="o">(</span><span class="n">x</span> <span class="err">âˆ˜</span> <span class="n">e</span><span class="o">)</span> <span class="n">f</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">apply</span> <span class="n">f</span><span class="bp">.</span><span class="n">induction_on</span><span class="bp">;</span> <span class="o">{</span> <span class="n">intros</span><span class="o">,</span> <span class="n">simp</span> <span class="bp">*</span> <span class="o">}</span>

<span class="kn">lemma</span> <span class="n">mv_polynomial</span><span class="bp">.</span><span class="n">equiv_eval_eq_zero</span>
  <span class="o">{</span><span class="n">k</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">k</span><span class="o">]</span>
  <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">m</span> <span class="err">â‰ƒ</span> <span class="n">n</span><span class="o">)</span>
  <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="o">(</span><span class="bp">âˆ€</span> <span class="n">f</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">m</span> <span class="n">k</span><span class="o">,</span> <span class="o">(</span><span class="bp">âˆ€</span> <span class="n">x</span><span class="o">,</span> <span class="kn">eval</span> <span class="n">x</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">â†’</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">))</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">n</span> <span class="n">k</span><span class="o">)</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="bp">âˆ€</span> <span class="n">x</span><span class="o">,</span> <span class="kn">eval</span> <span class="n">x</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">Ï†</span> <span class="o">:=</span> <span class="n">ring_equiv_of_equiv</span> <span class="n">k</span> <span class="n">e</span><span class="o">,</span>
  <span class="n">suffices</span> <span class="n">h</span> <span class="o">:</span> <span class="n">Ï†</span><span class="bp">.</span><span class="n">symm</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span> <span class="o">{</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">congr_arg</span> <span class="n">Ï†</span> <span class="n">h</span> <span class="o">},</span>
  <span class="n">apply</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">x</span><span class="o">,</span>
  <span class="k">show</span> <span class="kn">eval</span> <span class="n">x</span> <span class="o">(</span><span class="n">rename</span> <span class="n">e</span><span class="bp">.</span><span class="n">symm</span> <span class="n">f</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">hf</span><span class="o">],</span>
<span class="kn">end</span>

<span class="kn">universe</span> <span class="kn">variables</span> <span class="n">u</span> <span class="n">v</span>

<span class="n">def</span> <span class="n">equiv</span><span class="bp">.</span><span class="n">option</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">X</span> <span class="err">â‰ƒ</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span> <span class="n">option</span> <span class="n">X</span> <span class="err">â‰ƒ</span> <span class="n">option</span> <span class="n">Y</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="n">option</span><span class="bp">.</span><span class="n">map</span> <span class="n">e</span><span class="o">,</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="n">option</span><span class="bp">.</span><span class="n">map</span> <span class="n">e</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">x</span><span class="o">,</span> <span class="k">by</span> <span class="o">{</span> <span class="n">cases</span> <span class="n">x</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span> <span class="n">simp</span> <span class="o">},</span>
  <span class="n">right_inv</span> <span class="o">:=</span>  <span class="bp">Î»</span> <span class="n">x</span><span class="o">,</span> <span class="k">by</span> <span class="o">{</span> <span class="n">cases</span> <span class="n">x</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span> <span class="n">simp</span> <span class="o">}</span> <span class="o">}</span>

<span class="n">def</span> <span class="n">fin_succ_equiv_option</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">â„•</span><span class="o">)</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="err">â‰ƒ</span> <span class="n">option</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kn">set_option</span> <span class="n">pp</span><span class="bp">.</span><span class="n">universes</span> <span class="n">true</span>

<span class="kn">lemma</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">induction</span> <span class="o">{</span><span class="n">P</span> <span class="o">:</span> <span class="bp">Î </span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">X</span><span class="o">],</span> <span class="kt">Prop</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h0</span> <span class="o">:</span> <span class="n">P</span> <span class="n">pempty</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="bp">âˆ€</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">X</span><span class="o">],</span> <span class="n">P</span> <span class="n">X</span> <span class="bp">â†’</span> <span class="n">P</span> <span class="o">(</span><span class="n">option</span> <span class="n">X</span><span class="o">))</span>
  <span class="o">(</span><span class="n">he</span> <span class="o">:</span> <span class="bp">âˆ€</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">Y</span><span class="o">]</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">X</span> <span class="err">â‰ƒ</span> <span class="n">Y</span><span class="o">),</span> <span class="n">P</span> <span class="n">X</span> <span class="bp">â†’</span> <span class="n">P</span> <span class="n">Y</span><span class="o">)</span>
  <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">X</span><span class="o">]</span> <span class="o">:</span> <span class="n">P</span> <span class="n">X</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rcases</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">exists_equiv_fin</span> <span class="n">X</span> <span class="k">with</span> <span class="bp">âŸ¨</span><span class="n">n</span><span class="o">,</span> <span class="bp">âŸ¨</span><span class="n">e</span><span class="bp">âŸ©âŸ©</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">he</span> <span class="o">(</span><span class="n">equiv</span><span class="bp">.</span><span class="n">ulift</span><span class="bp">.</span><span class="n">trans</span> <span class="n">e</span><span class="bp">.</span><span class="n">symm</span><span class="o">),</span> <span class="n">clear</span> <span class="n">e</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">ih</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">he</span> <span class="o">(</span><span class="n">equiv</span><span class="bp">.</span><span class="n">ulift</span><span class="bp">.</span><span class="n">trans</span> <span class="n">fin</span><span class="bp">.</span><span class="n">equiv_pempty</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span> <span class="n">h0</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">specialize</span> <span class="n">hs</span> <span class="bp">_</span> <span class="n">ih</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">he</span> <span class="bp">_</span> <span class="n">hs</span><span class="o">,</span>
    <span class="n">refine</span> <span class="o">(</span><span class="n">equiv</span><span class="bp">.</span><span class="n">ulift</span><span class="bp">.</span><span class="n">trans</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
    <span class="n">refine</span> <span class="o">(</span><span class="n">fin_succ_equiv_option</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">trans</span> <span class="bp">_</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">equiv</span><span class="bp">.</span><span class="n">ulift</span><span class="bp">.</span><span class="n">option</span><span class="bp">.</span><span class="n">symm</span> <span class="o">}</span>
<span class="kn">end</span>

<span class="c">/-</span><span class="cm">- Over an infinite integral domain a polynomial f is zero if it</span>
<span class="cm">    evaluates to zero everywhere -/</span>
<span class="kn">lemma</span> <span class="n">mv_polynomial</span><span class="bp">.</span><span class="n">fin_eval_eq_zero</span>
  <span class="o">{</span><span class="n">k</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">int</span> <span class="o">:</span> <span class="n">integral_domain</span> <span class="n">k</span><span class="o">]</span> <span class="o">[</span><span class="n">inf</span> <span class="o">:</span> <span class="n">infinite</span> <span class="n">k</span><span class="o">]</span>
  <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fin</span> <span class="o">:</span> <span class="n">fintype</span> <span class="n">n</span><span class="o">]</span> <span class="o">:</span>
  <span class="bp">âˆ€</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">n</span> <span class="n">k</span><span class="o">},</span> <span class="o">(</span><span class="bp">âˆ€</span> <span class="n">x</span><span class="o">,</span> <span class="kn">eval</span> <span class="n">x</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">â†’</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">unfreezeI</span><span class="o">,</span>
  <span class="n">revert</span> <span class="n">inf</span> <span class="n">int</span> <span class="n">k</span><span class="o">,</span>
  <span class="n">revert</span> <span class="n">fin</span> <span class="n">n</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">induction</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">k</span> <span class="n">int</span> <span class="n">inf</span> <span class="n">f</span> <span class="n">H</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">pempty_ring_equiv</span> <span class="n">k</span><span class="o">)</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">H</span> <span class="bp">_</span><span class="o">,</span>
    <span class="n">replace</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">congr_arg</span> <span class="o">(</span><span class="n">pempty_ring_equiv</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">ring_equiv</span><span class="bp">.</span><span class="n">symm_apply_apply</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">convert</span> <span class="n">h</span><span class="o">,</span> <span class="n">symmetry</span><span class="o">,</span> <span class="n">exact</span> <span class="n">ring_equiv</span><span class="bp">.</span><span class="n">map_zero</span> <span class="bp">_</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">n</span> <span class="bp">_</span> <span class="n">ih</span> <span class="n">k</span> <span class="n">int</span> <span class="n">inf</span> <span class="n">f</span> <span class="n">hf</span><span class="o">,</span>
    <span class="k">let</span> <span class="n">Ï†</span> <span class="o">:=</span> <span class="n">option_equiv_right</span> <span class="n">k</span> <span class="n">n</span><span class="o">,</span>
    <span class="n">suffices</span> <span class="n">h</span> <span class="o">:</span> <span class="n">Ï†</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span> <span class="o">{</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">congr_arg</span> <span class="n">Ï†</span><span class="bp">.</span><span class="n">symm</span> <span class="n">h</span> <span class="o">},</span>
    <span class="n">apply</span> <span class="n">ih</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">sorry</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">resetI</span><span class="o">,</span> <span class="n">sorry</span> <span class="o">}</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">m</span> <span class="n">n</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">e</span> <span class="n">H</span> <span class="n">k</span> <span class="n">int</span> <span class="n">inf</span> <span class="n">f</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">mv_polynomial</span><span class="bp">.</span><span class="n">equiv_eval_eq_zero</span> <span class="n">e</span><span class="o">,</span>
    <span class="n">apply</span> <span class="bp">@</span><span class="n">H</span> <span class="o">}</span>
<span class="kn">end</span>

<span class="c">/-</span><span class="cm">- Over an infinite integral domain a polynomial f is zero iff it</span>
<span class="cm">    evaluates to zero everywhere -/</span>
<span class="kn">lemma</span> <span class="n">mv_polynomial</span><span class="bp">.</span><span class="n">eval_eq_zero_iff</span>
  <span class="o">{</span><span class="n">k</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">integral_domain</span> <span class="n">k</span><span class="o">]</span> <span class="o">[</span><span class="n">infinite</span> <span class="n">k</span><span class="o">]</span>
  <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">n</span> <span class="n">k</span><span class="o">}</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">âˆ€</span> <span class="n">x</span><span class="o">,</span> <span class="kn">eval</span> <span class="n">x</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">â†”</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>

<a name="186013429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186013429" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186013429">Johan Commelin (Jan 18 2020 at 21:57)</a>:</h4>
<p>Could probably use some cleaning...</p>

<a name="186015351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186015351" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186015351">Kevin Buzzard (Jan 18 2020 at 22:59)</a>:</h4>
<p>Thanks!</p>

<a name="186047827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186047827" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186047827">Kevin Buzzard (Jan 19 2020 at 17:18)</a>:</h4>
<p>I'm reading proofs of the Nullstellensatz. Here is something which comes up more than once. Say <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span> is a field (probably a commutative semiring would work fine) and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span> is a finitely-generated <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span>-algebra: this means that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span> is a ring which is isomorphic to a quotient of a polynomial ring <code>mv_polynomial X k</code> with <code>X</code> a fintype -- alternatively it means that there's a ring map <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>â†’</mo><mi>R</mi></mrow><annotation encoding="application/x-tex">k\to R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span> and there's some <code>Y : finset R</code> such that the induced ring hom <code>mv_polynomial Y k -&gt; R</code> is surjective. Mathematicians would write <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>=</mo><mi>k</mi><mo stretchy="false">[</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">R=k[x_1,x_2,\ldots,x_n]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">[</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span> and note that this is not a polynomial ring -- it's "the ring generated by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span> and the set <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{x_1,x_2,\ldots,x_n\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span>", so it's a quotient of a polynomial ring.</p>
<p>Now every text I've read just says "after re-ordering the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">x_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> we can find some <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>â‰¤</mo><mi>t</mi><mo>â‰¤</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1\leq t\leq n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span> such that the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">x_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>â‰¤</mo><mi>t</mi><mo>â‰¤</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1\leq t\leq n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span> are independent transcendentals over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span>, and the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">x_j</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>+</mo><mn>1</mn><mo>â‰¤</mo><mi>j</mi><mo>â‰¤</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">t+1\leq j\leq n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69841em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span> are algebraic over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>x</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">k(x_1,\ldots,x_t)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>". As a mathematician this does indeed feel like a triviality. One sets <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mn>0</mn></msub><mo>=</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">R_0=k</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span> (this ring will change but it will always be equipped with a map to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>) and simply loops through the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">x_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> and does one of two things: if the map from <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mn>0</mn></msub><mo stretchy="false">[</mo><mi>X</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">R_0[X]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mclose">]</span></span></span></span> to $$R$ sending <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">x_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> is injective, then add <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">x_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> to the "transcendental" pile and update <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">R_0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mn>0</mn></msub><mo stretchy="false">[</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">R_0[x_i]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span>. If the map isn't injective, add <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">x_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> to the "algebraic" pile. Then renumber the  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">t</span></span></span></span> "transcendental" <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">x_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> to be the first few <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">x_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> and renumber the "algebraic" <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">x_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> to be the rest. </p>
<p>How do I do this in Lean? My algorithm above feels very natural to code in an imperative language. Because <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">R_0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> changes one has to think a little carefully about doing this in a functional  language. I guess I'm just showing that I never learnt functional programming properly. </p>
<p>Of course a lot of the ring theory above is of no relevance; what is really happening, I guess, is that I have a list <code>[x1,x2,...,xn]</code> and I want to break it into two sublists, the "in" ones and the "out" ones, but the predicate of whether you're "in" or not depends on what has happened so far. I have no doubt that this set-up is very well-understood, but not by me. I am a bit scared that if I hack my way through this then I will end up with something awful. </p>
<p>Reference: I am reading "A note on Zariski's Lemma" by J. McCabe (AMM Vol 83 number 7, 1976). This proof seems to me to be easiest to formalise, out of the ones I have seen.</p>

<a name="186049597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186049597" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186049597">Reid Barton (Jan 19 2020 at 18:13)</a>:</h4>
<p>It might be most natural to do this by induction</p>

<a name="186050657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186050657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186050657">Koundinya Vajjha (Jan 19 2020 at 18:45)</a>:</h4>
<p>Tangential remark: <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  have you also seen <a href="http://www.math.uchicago.edu/~may/PAPERS/MunshiFinal2.pdf" target="_blank" title="http://www.math.uchicago.edu/~may/PAPERS/MunshiFinal2.pdf">Munshi's proof</a> of the Nullstellensatz?</p>

<a name="186051065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186051065" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186051065">Kevin Buzzard (Jan 19 2020 at 18:58)</a>:</h4>
<p>I hadn't -- many thanks!</p>

<a name="186051076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186051076" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186051076">Kevin Buzzard (Jan 19 2020 at 18:59)</a>:</h4>
<blockquote>
<p>It might be most natural to do this by induction</p>
</blockquote>
<p>Oh -- not induction on the size, but on the finset itself? Maybe!</p>

<a name="186140945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186140945" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186140945">Kevin Buzzard (Jan 20 2020 at 23:32)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> <span class="user-mention" data-user-id="110044">@Chris Hughes</span> is there some less painless way to make an interface for <code>mv_polynomial.iter_to_sum</code> than this?</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">mv_polynomial</span>

<span class="kn">lemma</span> <span class="n">sum</span><span class="bp">.</span><span class="n">rec_comp_left</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">Î²</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">Î³</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">Î²</span> <span class="bp">â†’</span> <span class="n">X</span><span class="o">)</span>
  <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">Î³</span> <span class="bp">â†’</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">â†’</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">Î²</span> <span class="err">âŠ•</span> <span class="n">Î³</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">f</span> <span class="o">(</span><span class="n">sum</span><span class="bp">.</span><span class="n">rec</span> <span class="n">i</span> <span class="n">j</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">sum</span><span class="bp">.</span><span class="n">rec</span> <span class="o">(</span><span class="n">f</span> <span class="err">âˆ˜</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="err">âˆ˜</span> <span class="n">j</span><span class="o">)</span> <span class="n">x</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">cases</span> <span class="n">x</span><span class="bp">;</span> <span class="n">refl</span>

<span class="kn">namespace</span> <span class="n">mv_polynomial</span>

<span class="kn">theorem</span> <span class="n">evalâ‚‚_evalâ‚‚</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">Î²</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">Î³</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">S</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">â†’</span> <span class="n">S</span><span class="o">)</span> <span class="o">[</span><span class="n">is_semiring_hom</span> <span class="n">f</span><span class="o">]</span>
<span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">Î²</span> <span class="bp">â†’</span> <span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">Î³</span> <span class="bp">â†’</span> <span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">Î²</span> <span class="o">(</span><span class="n">mv_polynomial</span> <span class="n">Î³</span> <span class="n">R</span><span class="o">))</span> <span class="o">:</span>
<span class="n">evalâ‚‚</span> <span class="o">(</span><span class="n">evalâ‚‚</span> <span class="n">f</span> <span class="n">j</span><span class="o">)</span> <span class="n">i</span> <span class="n">p</span> <span class="bp">=</span> <span class="kn">eval</span> <span class="n">i</span> <span class="o">(</span><span class="n">map</span> <span class="o">(</span><span class="n">evalâ‚‚</span> <span class="n">f</span> <span class="n">j</span><span class="o">)</span> <span class="n">p</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">hom_eq_hom</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="k">by</span> <span class="n">apply_instance</span><span class="o">)</span> <span class="o">(</span><span class="k">by</span> <span class="n">apply_instance</span><span class="o">)</span>
  <span class="o">(</span><span class="bp">Î»</span> <span class="bp">_</span><span class="o">,</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">evalâ‚‚_C</span><span class="o">,</span> <span class="n">map_C</span><span class="o">,</span> <span class="n">eval_C</span><span class="o">])</span> <span class="o">(</span><span class="bp">Î»</span> <span class="bp">_</span><span class="o">,</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">evalâ‚‚_X</span><span class="o">,</span> <span class="n">map_X</span><span class="o">,</span> <span class="n">eval_X</span><span class="o">])</span> <span class="n">p</span>

<span class="kn">set_option</span> <span class="n">class</span><span class="bp">.</span><span class="n">instance_max_depth</span> <span class="mi">100</span>
<span class="kn">theorem</span> <span class="n">map_evalâ‚‚&#39;</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">{</span><span class="n">Î²</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">Î³</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">S</span><span class="o">]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">â†’</span> <span class="n">S</span><span class="o">}</span> <span class="o">[</span><span class="n">is_semiring_hom</span> <span class="n">f</span><span class="o">]</span>
  <span class="o">{</span><span class="n">j</span> <span class="o">:</span> <span class="n">Î³</span> <span class="bp">â†’</span> <span class="n">S</span><span class="o">}</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">Î²</span> <span class="o">(</span><span class="n">mv_polynomial</span> <span class="n">Î³</span> <span class="n">R</span><span class="o">)}</span> <span class="o">:</span>
  <span class="n">map</span> <span class="o">(</span><span class="n">evalâ‚‚</span> <span class="n">f</span> <span class="n">j</span><span class="o">)</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">evalâ‚‚</span> <span class="o">(</span><span class="n">C</span> <span class="err">âˆ˜</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="bp">Î»</span> <span class="n">n</span><span class="o">,</span> <span class="n">sum</span><span class="bp">.</span><span class="n">rec</span> <span class="n">X</span> <span class="o">(</span><span class="n">C</span> <span class="err">âˆ˜</span> <span class="n">j</span><span class="o">)</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">iter_to_sum</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">p</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="n">iter_to_sum</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">evalâ‚‚_evalâ‚‚</span><span class="o">,</span>
  <span class="n">rw</span> <span class="err">â†</span><span class="n">evalâ‚‚_eq_eval_map</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">hom_eq_hom</span><span class="o">,</span> <span class="n">apply_instance</span><span class="o">,</span> <span class="n">apply_instance</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">b</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span>
    <span class="n">suffices</span> <span class="o">:</span> <span class="o">(</span><span class="n">C</span> <span class="o">(</span><span class="n">evalâ‚‚</span> <span class="n">f</span> <span class="n">j</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">Î²</span> <span class="n">S</span><span class="o">)</span> <span class="bp">=</span>
      <span class="n">evalâ‚‚</span> <span class="o">(</span><span class="n">C</span> <span class="err">âˆ˜</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="bp">Î»</span> <span class="n">n</span><span class="o">,</span> <span class="n">sum</span><span class="bp">.</span><span class="n">rec</span> <span class="n">X</span> <span class="o">(</span><span class="n">C</span> <span class="err">âˆ˜</span> <span class="n">j</span><span class="o">)</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">evalâ‚‚</span> <span class="n">C</span> <span class="o">(</span><span class="n">X</span> <span class="err">âˆ˜</span> <span class="n">sum</span><span class="bp">.</span><span class="n">inr</span><span class="o">)</span> <span class="n">b</span><span class="o">),</span>
    <span class="n">simpa</span> <span class="kn">using</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">â†</span><span class="n">rename</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">evalâ‚‚_rename</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="k">show</span> <span class="o">((</span><span class="bp">Î»</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">Î²</span> <span class="err">âŠ•</span> <span class="n">Î³</span><span class="o">),</span> <span class="n">sum</span><span class="bp">.</span><span class="n">rec</span> <span class="n">X</span> <span class="o">(</span><span class="n">C</span> <span class="err">âˆ˜</span> <span class="n">j</span><span class="o">)</span> <span class="n">n</span><span class="o">)</span> <span class="err">âˆ˜</span> <span class="n">sum</span><span class="bp">.</span><span class="n">inr</span> <span class="o">:</span> <span class="n">Î³</span> <span class="bp">â†’</span> <span class="n">mv_polynomial</span> <span class="n">Î²</span> <span class="n">S</span><span class="o">)</span> <span class="bp">=</span> <span class="n">C</span> <span class="err">âˆ˜</span> <span class="n">j</span><span class="o">,</span>
      <span class="k">by</span> <span class="n">funext</span> <span class="n">b</span><span class="bp">;</span> <span class="n">refl</span><span class="o">],</span>
    <span class="n">apply</span> <span class="n">evalâ‚‚_comp_left</span><span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">b</span><span class="o">,</span>
    <span class="n">simp</span><span class="o">},</span>
<span class="kn">end</span>

<span class="kn">theorem</span> <span class="n">evalâ‚‚_evalâ‚‚&#39;</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">Î²</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">Î³</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">S</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">â†’</span> <span class="n">S</span><span class="o">)</span> <span class="o">[</span><span class="n">is_semiring_hom</span> <span class="n">f</span><span class="o">]</span>
<span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">Î²</span> <span class="bp">â†’</span> <span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">Î³</span> <span class="bp">â†’</span> <span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">Î²</span> <span class="o">(</span><span class="n">mv_polynomial</span> <span class="n">Î³</span> <span class="n">R</span><span class="o">))</span> <span class="o">:</span>
<span class="n">evalâ‚‚</span> <span class="o">(</span><span class="n">evalâ‚‚</span> <span class="n">f</span> <span class="n">j</span><span class="o">)</span> <span class="n">i</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">evalâ‚‚</span> <span class="n">f</span> <span class="o">(</span><span class="bp">Î»</span> <span class="n">n</span><span class="o">,</span> <span class="n">sum</span><span class="bp">.</span><span class="n">rec</span> <span class="n">i</span> <span class="n">j</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">iter_to_sum</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">p</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="n">evalâ‚‚_evalâ‚‚</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">map_evalâ‚‚&#39;</span><span class="o">,</span>
  <span class="n">generalize</span> <span class="o">:</span> <span class="n">iter_to_sum</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">p&#39;</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">hom_eq_hom</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">p&#39;</span><span class="o">,</span>
    <span class="n">apply_instance</span><span class="o">,</span> <span class="n">apply_instance</span><span class="o">,</span> <span class="n">apply_instance</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">r</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">evalâ‚‚_C</span><span class="o">,</span> <span class="n">evalâ‚‚_C</span><span class="o">,</span> <span class="n">eval_C</span><span class="o">]},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="o">(</span><span class="n">b</span> <span class="bp">|</span> <span class="n">c</span><span class="o">),</span>
    <span class="o">{</span> <span class="n">simp</span><span class="o">},</span>
    <span class="o">{</span> <span class="n">simp</span><span class="o">},</span>
  <span class="o">}</span>
<span class="kn">end</span>

<span class="kn">end</span> <span class="n">mv_polynomial</span>
</pre></div>

<a name="186141059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186141059" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186141059">Kevin Buzzard (Jan 20 2020 at 23:35)</a>:</h4>
<p>I am trying to use multivariate polynomials to do things in MSc level commutative algebra and it's very interesting but I am also extremely slow.</p>

<a name="186162741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186162741" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186162741">Johan Commelin (Jan 21 2020 at 08:32)</a>:</h4>
<p>All the different ways of composing evaluation of polynomials is quite brittle in my experience. Lean of gets stuck on elaborating concise statements, and there are many holes in the library. This is one reason why I'm in favour of <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> proposal to ditch <code>eval2</code> (even though I may have been the one asking to introduce it), and only have <code>map</code> and <code>eval</code>. Because it significantly reduces the amount of library interface that one has to develop and maintain. Nevertheless it is frustrating that many statements about plugging polynomials into polynomials that look trivial in informal math (after years of usage, I agree) become pretty unreadable in Lean. To the point that I no longer understand the code that I wrote 25 seconds ago...<br>
(End of rant <span aria-label="oops" class="emoji emoji-1f643" role="img" title="oops">:oops:</span>)</p>

<a name="186163466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186163466" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186163466">Mario Carneiro (Jan 21 2020 at 08:47)</a>:</h4>
<p>I don't think eval2 needs to be ditched, because it can be used to define the other two, but I'm fine with having only the basic theorems about it with everything else in <code>map</code> and <code>eval</code></p>

<a name="186163726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186163726" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186163726">Johan Commelin (Jan 21 2020 at 08:52)</a>:</h4>
<p>Does that mean that users should avoid it?</p>

<a name="186163769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186163769" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186163769">Johan Commelin (Jan 21 2020 at 08:53)</a>:</h4>
<p>Also, for <code>eval2</code> you need ring structure and a ring hom, etc. <code>map</code> could be defined coefficient-wise which avoids some tc search that has failed me several times.</p>

<a name="186163874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186163874" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186163874">Patrick Massot (Jan 21 2020 at 08:54)</a>:</h4>
<p>Johan and Mario, isn't 3am where you are?</p>

<a name="186164007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186164007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186164007">Johan Commelin (Jan 21 2020 at 08:56)</a>:</h4>
<p>In a very small neighbourhood around me, it is 09:55. But I can't globalise that property (-;</p>

<a name="186164015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186164015" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186164015">Johan Commelin (Jan 21 2020 at 08:56)</a>:</h4>
<p>I will need to kill 3 more hours before I'm allowed to break my fast</p>

<a name="186164156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186164156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186164156">Patrick Massot (Jan 21 2020 at 08:59)</a>:</h4>
<p>I see.</p>

<a name="186197310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186197310" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186197310">Yury G. Kudryashov (Jan 21 2020 at 16:05)</a>:</h4>
<p>My proposal was to use aeval, not just ditch eval2.</p>

<a name="186214223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186214223" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186214223">Chris Hughes (Jan 21 2020 at 18:51)</a>:</h4>
<p>Do we need <code>bind</code> for polynomials?</p>

<a name="186221030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186221030" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186221030">Johan Commelin (Jan 21 2020 at 20:01)</a>:</h4>
<p>what would that look like?</p>

<a name="186222694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186222694" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186222694">Chris Hughes (Jan 21 2020 at 20:18)</a>:</h4>
<p><code>bind (f : A - &gt; polynomial B) (p : polynomial A) : polynomial B :=
p.eval2 f X</code> I think. It's the canonical map with that type.</p>

<a name="186222854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186222854" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186222854">Johan Commelin (Jan 21 2020 at 20:20)</a>:</h4>
<p>Ooh right, it's one of those things that rolls out of an adjunction</p>

<a name="186223314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186223314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186223314">Chris Hughes (Jan 21 2020 at 20:24)</a>:</h4>
<p>I don't actually think it's that useful. I remember these things requiring a surprising amount of thought to prove. Stuff like with M:L:K, then if a polynomial in K has a root in L it has a root in M.</p>

<a name="186223418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186223418" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186223418">Johan Commelin (Jan 21 2020 at 20:26)</a>:</h4>
<p>Right, that's exactly the kind of trivialities that are extremely hard to prove in the current library.</p>

<a name="186223494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186223494" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186223494">Chris Hughes (Jan 21 2020 at 20:26)</a>:</h4>
<p>I do remember something that looked a bit like bind popping up recently.</p>

<a name="186224729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186224729" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186224729">Patrick Massot (Jan 21 2020 at 20:39)</a>:</h4>
<p>I remember Cyril explaining in Amsterdam that you should always use polynomials with coefficients a priori in the biggest field that could show up, with a predicate saying it actually has coefficients in a smaller field.</p>

<a name="186229967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186229967" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186229967">Kevin Buzzard (Jan 21 2020 at 21:29)</a>:</h4>
<p>I can't do that in my application, because I am doing <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo stretchy="false">[</mo><msub><mi>X</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>X</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>X</mi><mi>n</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">k[X_1,X_2,\ldots,X_n]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mopen">[</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span> with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span> an arbitrary algebraically closed field.</p>

<a name="186243342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186243342" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186243342">Johan Commelin (Jan 22 2020 at 00:26)</a>:</h4>
<p><span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> You see what Kevin did there? You added <code>^n</code> notation to Lean 4, and now he's using <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">X_n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>... in a subscript...</p>

<a name="186243361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186243361" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186243361">Kevin Buzzard (Jan 22 2020 at 00:27)</a>:</h4>
<p>and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mrow><mi>i</mi><mi>j</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">X_{ijk}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> right?</p>

<a name="186246757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186246757" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186246757">Johan Commelin (Jan 22 2020 at 01:24)</a>:</h4>
<blockquote>
<p>My proposal was to use aeval, not just ditch eval2.</p>
</blockquote>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> I like that idea. We only want <code>eval2</code> for algebras. For all the others, I guess a combo of <code>map</code> and <code>eval</code> is quite sufficient. And I would prefer a <code>map</code> that doesn't depend on ring hom conditions.</p>

<a name="186249247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186249247" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186249247">Yury G. Kudryashov (Jan 22 2020 at 02:09)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> The whole proposal is here: <a href="https://github.com/leanprover-community/mathlib/issues/1864" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/1864">#1864</a>. Comments are welcome. Volunteers to actually implement this are more than welcome.</p>

<a name="186338055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186338055" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186338055">Kevin Buzzard (Jan 22 2020 at 22:27)</a>:</h4>
<p>I am finding the following "trivialities"</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">mv_polynomial</span>

<span class="bp">#</span><span class="kn">check</span> <span class="n">mv_polynomial</span><span class="bp">.</span><span class="n">option_equiv_right</span>
<span class="c1">-- mv_polynomial (option Î²) Î± â‰ƒ+* mv_polynomial Î² (polynomial Î±)</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">mv_polynomial</span><span class="bp">.</span><span class="n">option_equiv_right</span>
<span class="c">/-</span><span class="cm"> it&#39;s built from</span>

<span class="cm">. mv_polynomial.ring_equiv_of_equiv</span>
<span class="cm">. mv_polynomial.sum_ring_equiv</span>
<span class="cm">. mv_polynomial.ring_equiv_congr</span>

<span class="cm">glued together with</span>

<span class="cm">. ring_equiv.trans</span>
<span class="cm">-/</span>

<span class="kn">open</span> <span class="n">mv_polynomial</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">k</span><span class="o">]</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">â†’</span> <span class="n">polynomial</span> <span class="n">k</span><span class="o">)</span>
  <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">k</span><span class="o">)</span> <span class="o">:</span>
<span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">a</span> <span class="o">(</span><span class="kn">eval</span> <span class="n">g</span> <span class="o">((</span><span class="n">option_equiv_right</span> <span class="n">k</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="n">none</span><span class="o">)))</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">k</span><span class="o">]</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">â†’</span> <span class="n">polynomial</span> <span class="n">k</span><span class="o">)</span>
  <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span>
<span class="kn">eval</span> <span class="n">g</span> <span class="o">((</span><span class="n">option_equiv_right</span> <span class="n">k</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">(</span><span class="n">some</span> <span class="n">i</span><span class="o">)))</span> <span class="bp">=</span> <span class="n">g</span> <span class="n">i</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>


<p>very painful. What should I be doing here?</p>

<a name="186339248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186339248" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186339248">Kevin Buzzard (Jan 22 2020 at 22:40)</a>:</h4>
<p>I think maybe this should be the first line?</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">k</span><span class="o">]</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">â†’</span> <span class="n">polynomial</span> <span class="n">k</span><span class="o">)</span>
  <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">k</span><span class="o">)</span> <span class="o">:</span>
<span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">a</span> <span class="o">(</span><span class="kn">eval</span> <span class="n">g</span> <span class="o">((</span><span class="n">option_equiv_right</span> <span class="n">k</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="n">none</span><span class="o">)))</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">show</span> <span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span> <span class="n">a</span> <span class="o">(</span><span class="kn">eval</span> <span class="n">g</span> <span class="o">(((</span>
    <span class="o">(</span><span class="bp">@</span><span class="n">mv_polynomial</span><span class="bp">.</span><span class="n">ring_equiv_congr</span>
      <span class="o">(</span><span class="n">mv_polynomial</span> <span class="n">unit</span> <span class="n">k</span><span class="o">)</span> <span class="n">n</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">mv_polynomial</span><span class="bp">.</span><span class="n">punit_ring_equiv</span> <span class="n">k</span><span class="o">))</span>
    <span class="err">âˆ˜</span>
    <span class="o">(</span><span class="n">mv_polynomial</span><span class="bp">.</span><span class="n">sum_ring_equiv</span> <span class="n">k</span> <span class="n">n</span> <span class="n">unit</span><span class="o">))</span>
    <span class="err">âˆ˜</span>
    <span class="o">(</span><span class="n">mv_polynomial</span><span class="bp">.</span><span class="n">ring_equiv_of_equiv</span> <span class="n">k</span> <span class="o">(</span><span class="n">equiv</span><span class="bp">.</span><span class="n">option_equiv_sum_punit</span> <span class="n">n</span><span class="o">)))</span>
    <span class="o">(</span><span class="n">X</span> <span class="n">none</span><span class="o">)))</span> <span class="bp">=</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>

<a name="186339441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186339441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186339441">Mario Carneiro (Jan 22 2020 at 22:43)</a>:</h4>
<p><code>option_equiv_right</code> lacks definition lemmas</p>

<a name="186339577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186339577" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186339577">Kevin Buzzard (Jan 22 2020 at 22:44)</a>:</h4>
<p>I see. So this first <code>show</code> should be done with a <code>rw</code>? And then after that there should be lemmas <code>eval_sum_ring_equiv_X</code> and <code>eval_ring_equiv_congr_X</code> and <code>eval_ring_equiv_of_equiv_X</code>?</p>

<a name="186339744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186339744" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186339744">Kevin Buzzard (Jan 22 2020 at 22:46)</a>:</h4>
<p>Should it be beta not alpha which is explicit in <code>mv_polynomial.ring_equiv_congr : Î  (Î± : Type u_1) {Î² : Type u_2} {Î³ : Type u_1} [_inst_1 : comm_semiring Î±] [_inst_2 : comm_semiring Î³], Î± â‰ƒ+* Î³ â†’ mv_polynomial Î² Î± â‰ƒ+* mv_polynomial Î² Î³</code>?</p>

<a name="186339795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186339795" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186339795">Mario Carneiro (Jan 22 2020 at 22:47)</a>:</h4>
<p>I think so</p>

<a name="186339856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186339856" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186339856">Mario Carneiro (Jan 22 2020 at 22:48)</a>:</h4>
<p>I think the definitional lemmas should be stated using just application if possible, <code>eval</code> is some derived thing (but it should probably also be available)</p>

<a name="186339905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186339905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186339905">Mario Carneiro (Jan 22 2020 at 22:49)</a>:</h4>
<p>Well, maybe not... I guess since it's a known ring hom you already have info on everything except what happens to constants and variables</p>

<a name="186339986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186339986" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186339986">Kevin Buzzard (Jan 22 2020 at 22:50)</a>:</h4>
<p>there are lots of <code>blah_X</code> and <code>blah_C</code> lemmas</p>

<a name="186340000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186340000" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186340000">Kevin Buzzard (Jan 22 2020 at 22:50)</a>:</h4>
<p>I am suggesting we add a few more ;-)</p>

<a name="186340003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186340003" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186340003">Mario Carneiro (Jan 22 2020 at 22:50)</a>:</h4>
<p>I think you are right</p>

<a name="186340035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186340035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186340035">Kevin Buzzard (Jan 22 2020 at 22:50)</a>:</h4>
<p>I'm slowly getting the hang of this Lean malarkey</p>

<a name="186340055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186340055" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186340055">Mario Carneiro (Jan 22 2020 at 22:51)</a>:</h4>
<p>I really hope it's a <code>rfl</code> proof because there are a whole bunch of definitions in the way</p>

<a name="186340147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186340147" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186340147">Kevin Buzzard (Jan 22 2020 at 22:52)</a>:</h4>
<p>I can iterate the <code>show, rw</code> process ;-)</p>

<a name="186340149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186340149" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186340149">Mario Carneiro (Jan 22 2020 at 22:52)</a>:</h4>
<p>I'm still not even sure what <code>option_equiv_right Î± Î² (X none) = _</code> should complete to</p>

<a name="186340198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186340198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186340198">Kevin Buzzard (Jan 22 2020 at 22:53)</a>:</h4>
<p>you mean <code>option_equiv_right R n (X none) = _</code>?</p>

<a name="186340209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186340209" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186340209">Mario Carneiro (Jan 22 2020 at 22:53)</a>:</h4>
<p>I'm in the same context as the definition, they were called alpha and beta there</p>

<a name="186340214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186340214" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186340214">Kevin Buzzard (Jan 22 2020 at 22:53)</a>:</h4>
<p>It's <code>C unit</code> or <code>C punit</code> or whatever</p>

<a name="186340263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186340263" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186340263">Kevin Buzzard (Jan 22 2020 at 22:54)</a>:</h4>
<p>wait</p>

<a name="186340265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186340265" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186340265">Mario Carneiro (Jan 22 2020 at 22:54)</a>:</h4>
<p>I think it's <code>C polynomial.X</code></p>

<a name="186340268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186340268" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186340268">Kevin Buzzard (Jan 22 2020 at 22:54)</a>:</h4>
<p>yeah, that :-)</p>

<a name="186340269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186340269" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186340269">Mario Carneiro (Jan 22 2020 at 22:54)</a>:</h4>
<p>but lean times out when I write that</p>

<a name="186340347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186340347" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186340347">Mario Carneiro (Jan 22 2020 at 22:55)</a>:</h4>
<p>oh, nvm</p>

<a name="186340931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186340931" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186340931">Mario Carneiro (Jan 22 2020 at 23:03)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">option_equiv_right_CX</span> <span class="o">{</span><span class="n">Î±</span> <span class="n">Î²</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">Î±</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">option_equiv_right</span> <span class="n">Î±</span> <span class="n">Î²</span> <span class="o">(</span><span class="n">X</span> <span class="n">none</span><span class="o">)</span> <span class="bp">=</span> <span class="n">C</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">X</span> <span class="o">:=</span>
<span class="k">show</span> <span class="n">map</span> <span class="o">(</span><span class="n">evalâ‚‚</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="bp">Î»</span><span class="n">u</span><span class="o">:</span><span class="n">punit</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">X</span><span class="o">))</span>
  <span class="o">(</span><span class="n">sum_to_iter</span> <span class="n">Î±</span> <span class="n">Î²</span> <span class="n">unit</span>
    <span class="o">(</span><span class="n">rename</span> <span class="o">(</span><span class="n">equiv</span><span class="bp">.</span><span class="n">option_equiv_sum_punit</span><span class="bp">._</span><span class="n">match_1</span> <span class="n">Î²</span><span class="o">)</span>
      <span class="o">(</span><span class="n">X</span> <span class="n">none</span><span class="o">)))</span> <span class="bp">=</span> <span class="n">C</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">X</span><span class="o">,</span>
<span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">sum_to_iter_Xr</span><span class="o">]</span>
</pre></div>


<p><code>sum_to_iter_Xr</code> should be a simp lemma</p>

<a name="186340988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186340988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186340988">Kevin Buzzard (Jan 22 2020 at 23:04)</a>:</h4>
<p>oh nice!</p>

<a name="186341012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186341012" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186341012">Mario Carneiro (Jan 22 2020 at 23:04)</a>:</h4>
<p>also <code>punit_ring_equiv</code> and like all the other involved functions should have definitional lemmas so I don't have to manually unfold them like this</p>

<a name="186341158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186341158" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186341158">Kevin Buzzard (Jan 22 2020 at 23:06)</a>:</h4>
<p>To people not reading the details: what is happening here is that Lean has four(!) different ways of storing <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">[</mo><mi>X</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>n</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">R[X][n]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault">n</span><span class="mclose">]</span></span></span></span> where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span> is one variable and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span> is a set of variables; it's polynomials with coefficients in <code>option n</code>, or in <code>n + punit</code>, or polynomials in variables <code>n</code> over base ring <code>R[X]</code>, or polynomials in variables <code>n</code> over polynomials in variables <code>punit</code></p>

<a name="186341171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186341171" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186341171">Kevin Buzzard (Jan 22 2020 at 23:06)</a>:</h4>
<p>Of course, all of these are the same, and humans find it extremely easy to switch between representations at the drop of a hat</p>

<a name="186341314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186341314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186341314">Mario Carneiro (Jan 22 2020 at 23:09)</a>:</h4>
<p>the other case is similar, luckily:</p>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">option_equiv_right_X_none</span> <span class="o">{</span><span class="n">Î±</span> <span class="n">Î²</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">Î±</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">option_equiv_right</span> <span class="n">Î±</span> <span class="n">Î²</span> <span class="o">(</span><span class="n">X</span> <span class="n">none</span><span class="o">)</span> <span class="bp">=</span> <span class="n">C</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">X</span> <span class="o">:=</span>
<span class="k">show</span> <span class="n">map</span> <span class="o">(</span><span class="n">evalâ‚‚</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="bp">Î»</span><span class="n">u</span><span class="o">:</span><span class="n">punit</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">X</span><span class="o">))</span>
  <span class="o">(</span><span class="n">sum_to_iter</span> <span class="n">Î±</span> <span class="n">Î²</span> <span class="n">unit</span>
    <span class="o">(</span><span class="n">rename</span> <span class="o">(</span><span class="n">equiv</span><span class="bp">.</span><span class="n">option_equiv_sum_punit</span><span class="bp">._</span><span class="n">match_1</span> <span class="n">Î²</span><span class="o">)</span>
      <span class="o">(</span><span class="n">X</span> <span class="n">none</span><span class="o">)))</span> <span class="bp">=</span> <span class="n">C</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">X</span><span class="o">,</span>
<span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">sum_to_iter_Xr</span><span class="o">]</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">option_equiv_right_X_some</span> <span class="o">{</span><span class="n">Î±</span> <span class="n">Î²</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">Î±</span><span class="o">]</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Î²</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">option_equiv_right</span> <span class="n">Î±</span> <span class="n">Î²</span> <span class="o">(</span><span class="n">X</span> <span class="o">(</span><span class="n">some</span> <span class="n">b</span><span class="o">))</span> <span class="bp">=</span> <span class="n">X</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">show</span> <span class="n">map</span> <span class="o">(</span><span class="n">evalâ‚‚</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="bp">Î»</span><span class="n">u</span><span class="o">:</span><span class="n">punit</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">X</span><span class="o">))</span>
  <span class="o">(</span><span class="n">sum_to_iter</span> <span class="n">Î±</span> <span class="n">Î²</span> <span class="n">unit</span>
    <span class="o">(</span><span class="n">rename</span> <span class="o">(</span><span class="n">equiv</span><span class="bp">.</span><span class="n">option_equiv_sum_punit</span><span class="bp">._</span><span class="n">match_1</span> <span class="n">Î²</span><span class="o">)</span>
      <span class="o">(</span><span class="n">X</span> <span class="o">(</span><span class="n">some</span> <span class="n">b</span><span class="o">))))</span> <span class="bp">=</span> <span class="n">X</span> <span class="n">b</span><span class="o">,</span>
<span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">sum_to_iter_Xl</span><span class="o">]</span>
</pre></div>

<a name="186341455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186341455" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186341455">Mario Carneiro (Jan 22 2020 at 23:10)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">option_equiv_right_C</span> <span class="o">{</span><span class="n">Î±</span> <span class="n">Î²</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">Î±</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">Î±</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">option_equiv_right</span> <span class="n">Î±</span> <span class="n">Î²</span> <span class="o">(</span><span class="n">C</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="n">C</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">show</span> <span class="n">map</span> <span class="o">(</span><span class="n">evalâ‚‚</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">(</span><span class="bp">Î»</span><span class="n">u</span><span class="o">:</span><span class="n">punit</span><span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">X</span><span class="o">))</span>
  <span class="o">(</span><span class="n">sum_to_iter</span> <span class="n">Î±</span> <span class="n">Î²</span> <span class="n">unit</span>
    <span class="o">(</span><span class="n">rename</span> <span class="o">(</span><span class="n">equiv</span><span class="bp">.</span><span class="n">option_equiv_sum_punit</span><span class="bp">._</span><span class="n">match_1</span> <span class="n">Î²</span><span class="o">)</span>
      <span class="o">(</span><span class="n">C</span> <span class="n">a</span><span class="o">)))</span> <span class="bp">=</span> <span class="n">C</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="n">a</span><span class="o">),</span>
<span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">sum_to_iter_C</span><span class="o">]</span>
</pre></div>

<a name="186341572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186341572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186341572">Kevin Buzzard (Jan 22 2020 at 23:12)</a>:</h4>
<p>So all three of the <code>sum_to_iter_?</code> things should be simp lemmas?</p>

<a name="186341581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186341581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186341581">Mario Carneiro (Jan 22 2020 at 23:12)</a>:</h4>
<p>yes</p>

<a name="186341645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186341645" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186341645">Kevin Buzzard (Jan 22 2020 at 23:13)</a>:</h4>
<p>Many thanks! And we can perhaps get rid of the <code>show</code> lines by coming up with some other simp lemmas?</p>

<a name="186341650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186341650" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186341650">Kevin Buzzard (Jan 22 2020 at 23:13)</a>:</h4>
<p>Or is this overoptimistic?</p>

<a name="186341662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186341662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186341662">Mario Carneiro (Jan 22 2020 at 23:13)</a>:</h4>
<p>I also brute forced my way through several other definitions here, that should have definitional lemmas: <code>ring_equiv_of_equiv</code>, <code>option_equiv_sum_punit</code> (the definition should not be simp), <code>sum_comm</code> (ditto), <code>sum_ring_equiv</code>, <code>punit_ring_equiv</code></p>

<a name="186341712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186341712" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186341712">Mario Carneiro (Jan 22 2020 at 23:14)</a>:</h4>
<p>Ideally this proof should be <code>dunfold option_equiv_right; simp</code></p>

<a name="186367454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186367454" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186367454">Johan Commelin (Jan 23 2020 at 08:31)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> The whole proposal is here: <a href="https://github.com/leanprover-community/mathlib/issues/1864" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/1864">#1864</a>. Comments are welcome. Volunteers to actually implement this are more than welcome.</p>
</blockquote>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> I didn't mean to imply that you and Mario should do all the work. (Sorry if it came across like that.) What I meant was that you seemed to have a pretty clear view of what you wanted as an end result. So I was inviting you and Mario to lead the discussion. Once it's clear what we want, I'm willing to write a bunch of code.</p>

<a name="186394059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186394059" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186394059">Kevin Buzzard (Jan 23 2020 at 14:35)</a>:</h4>
<p>Do we not have this?</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">mv_polynomial</span>

<span class="kn">open</span> <span class="n">mv_polynomial</span>

<span class="c1">-- two evaluations of one mv_polynomial coincide, if the evaluation functions</span>
<span class="c1">-- agree on the variables occurring in the polynomial</span>
<span class="kn">example</span>  <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">S</span><span class="o">]</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
 <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">â†’</span> <span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">Ï†</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">â†’</span> <span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">n</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">âˆ€</span> <span class="n">i</span> <span class="err">âˆˆ</span> <span class="n">vars</span> <span class="n">p</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">g</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span>
 <span class="n">evalâ‚‚</span> <span class="n">Ï†</span> <span class="n">f</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">evalâ‚‚</span> <span class="n">Ï†</span> <span class="n">g</span> <span class="n">p</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>


<p>Johan -- I'm on a train, but thanks to Mario's heroic <code>simp</code> efforts yesterday and your efforts from a few days ago, I now have a proof in the finite variable case.</p>

<a name="186394192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186394192" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186394192">Kevin Buzzard (Jan 23 2020 at 14:36)</a>:</h4>
<p>The annoying thing about the example above is that so far I have never needed to penetrate the interface for <code>mv_polynomial</code>, but now I am maybe going to have to think about how the type is implemented?</p>

<a name="186394443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186394443" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186394443">Johan Commelin (Jan 23 2020 at 14:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I guess we don't have this. Try</p>
<div class="codehilite"><pre><span></span><span class="k">begin</span>
  <span class="n">apply</span> <span class="n">p</span><span class="bp">.</span><span class="n">induction_on</span><span class="o">,</span>
  <span class="n">all_goals</span> <span class="o">{</span><span class="n">sorry</span><span class="o">}</span>
<span class="kn">end</span>
</pre></div>

<a name="186394560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186394560" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186394560">Kevin Buzzard (Jan 23 2020 at 14:40)</a>:</h4>
<p>Nice idea!</p>

<a name="186394581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186394581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186394581">Kevin Buzzard (Jan 23 2020 at 14:40)</a>:</h4>
<p>I had just started with <code>unfold eval_2</code> :-) That looked much worse :-)</p>

<a name="186394655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186394655" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186394655">Kevin Buzzard (Jan 23 2020 at 14:41)</a>:</h4>
<p>So apparently I am crazy trying to prove this without assuming that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï•</mi></mrow><annotation encoding="application/x-tex">\phi</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Ï•</span></span></span></span> is a ring hom? I'm not sure we need it...</p>

<a name="186394921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186394921" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186394921">Kevin Buzzard (Jan 23 2020 at 14:44)</a>:</h4>
<p>aargh one of the goals is not true :-/</p>

<a name="186395099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186395099" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186395099">Johan Commelin (Jan 23 2020 at 14:46)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I'm quite sure that you need <code>Ï†</code> to be a ring hom</p>

<a name="186395129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186395129" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186395129">Johan Commelin (Jan 23 2020 at 14:47)</a>:</h4>
<p>Ooh, no, you're right. You shouldn't (in theory).</p>

<a name="186395142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186395142" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186395142">Johan Commelin (Jan 23 2020 at 14:47)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Which goal is false?</p>

<a name="186395162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186395162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186395162">Kevin Buzzard (Jan 23 2020 at 14:47)</a>:</h4>
<p>Why? Not that it matters.</p>
<p>Induction fails because one of the goals is</p>
<div class="codehilite"><pre><span></span><span class="n">p0</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">n</span> <span class="n">R</span><span class="o">,</span>
<span class="n">i</span> <span class="o">:</span> <span class="n">n</span><span class="o">,</span>
<span class="n">hp</span> <span class="o">:</span> <span class="n">evalâ‚‚</span> <span class="n">Ï†</span> <span class="n">f</span> <span class="n">p0</span> <span class="bp">=</span> <span class="n">evalâ‚‚</span> <span class="n">Ï†</span> <span class="n">g</span> <span class="n">p0</span>
<span class="err">âŠ¢</span> <span class="n">evalâ‚‚</span> <span class="n">Ï†</span> <span class="n">f</span> <span class="o">(</span><span class="n">p0</span> <span class="bp">*</span> <span class="n">X</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="n">evalâ‚‚</span> <span class="n">Ï†</span> <span class="n">g</span> <span class="o">(</span><span class="n">p0</span> <span class="bp">*</span> <span class="n">X</span> <span class="n">i</span><span class="o">)</span>
</pre></div>


<p>and my hypothesis is that f and g agree on the variables mentioned in p, but here p0 is arbitrary.</p>

<a name="186395252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186395252" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186395252">Kevin Buzzard (Jan 23 2020 at 14:48)</a>:</h4>
<p>[sorry, on a train with sporadic connection]</p>

<a name="186395489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186395489" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186395489">Kevin Buzzard (Jan 23 2020 at 14:50)</a>:</h4>
<p>In the library there is </p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">hom_eq_hom</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">Î³</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">Ïƒ</span> <span class="n">Î±</span> <span class="bp">â†’</span> <span class="n">Î³</span><span class="o">)</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">is_semiring_hom</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">hg</span> <span class="o">:</span> <span class="n">is_semiring_hom</span> <span class="n">g</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hC</span> <span class="o">:</span> <span class="bp">âˆ€</span><span class="n">a</span><span class="o">:</span><span class="n">Î±</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">C</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">(</span><span class="n">C</span> <span class="n">a</span><span class="o">))</span> <span class="o">(</span><span class="n">hX</span> <span class="o">:</span> <span class="bp">âˆ€</span><span class="n">n</span><span class="o">:</span><span class="n">Ïƒ</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">X</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">(</span><span class="n">X</span> <span class="n">n</span><span class="o">))</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">Ïƒ</span> <span class="n">Î±</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">f</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">g</span> <span class="n">p</span> <span class="o">:=</span> <span class="bp">...</span>
</pre></div>


<p>but if the <code>p</code> were before the <code>hX</code> one could weaken <code>hX</code> and only ask that the equality held for variables in the support (in the obvious sense) of p</p>

<a name="186395534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186395534" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186395534">Kevin Buzzard (Jan 23 2020 at 14:50)</a>:</h4>
<p>I think I might have to modify the proof of <code>induction_on</code></p>

<a name="186395684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186395684" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186395684">Johan Commelin (Jan 23 2020 at 14:52)</a>:</h4>
<p>Aaah, I see.</p>

<a name="186395692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186395692" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186395692">Johan Commelin (Jan 23 2020 at 14:52)</a>:</h4>
<p>Annoying</p>

<a name="186395708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186395708" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186395708">Kevin Buzzard (Jan 23 2020 at 14:52)</a>:</h4>
<p>I'm going in...</p>

<a name="186396635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186396635" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186396635">Kevin Buzzard (Jan 23 2020 at 15:01)</a>:</h4>
<p>aargh we don't even have this as far as I can see:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">vars_map</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">S</span><span class="o">]</span>
  <span class="o">{</span><span class="n">Ïƒ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">Ï†</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">â†’</span> <span class="n">S</span><span class="o">)</span> <span class="o">[</span><span class="n">is_semiring_hom</span> <span class="n">Ï†</span><span class="o">]</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">Ïƒ</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
<span class="n">vars</span> <span class="o">(</span><span class="n">map</span> <span class="n">Ï†</span> <span class="n">p</span><span class="o">)</span> <span class="err">âŠ†</span> <span class="n">vars</span> <span class="n">p</span> <span class="o">:=</span>
</pre></div>

<a name="186400038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186400038" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186400038">Kevin Buzzard (Jan 23 2020 at 15:33)</a>:</h4>
<p>or this?</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">mem_rename_range</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span>
  <span class="o">{</span><span class="n">Ïƒ</span> <span class="n">Ï„</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">Ïƒ</span> <span class="bp">â†’</span> <span class="n">Ï„</span><span class="o">}</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">Ï„</span> <span class="n">R</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">vars</span> <span class="n">p</span><span class="o">)</span><span class="bp">.</span><span class="n">to_set</span> <span class="err">âŠ†</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">âˆƒ</span> <span class="n">q</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">Ïƒ</span> <span class="n">R</span><span class="o">,</span> <span class="n">rename</span> <span class="n">g</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">p</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="186403065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186403065" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186403065">Kevin Buzzard (Jan 23 2020 at 16:01)</a>:</h4>
<p>/me hopes <span class="user-mention" data-user-id="110044">@Chris Hughes</span> is coming to Xena...</p>

<a name="186420269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186420269" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186420269">Kevin Buzzard (Jan 23 2020 at 18:39)</a>:</h4>
<p>He was!</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">evalâ‚‚_eq_of_eq_on_vars</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span>
  <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">S</span><span class="o">]</span> <span class="o">{</span><span class="n">Ïƒ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">Ïƒ</span> <span class="bp">â†’</span> <span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">Ï†</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">â†’</span> <span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">Ïƒ</span> <span class="n">R</span><span class="o">)</span>
  <span class="o">[</span><span class="n">is_semiring_hom</span> <span class="n">Ï†</span><span class="o">]</span> <span class="c1">-- do we need this??</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">âˆ€</span> <span class="n">i</span> <span class="err">âˆˆ</span> <span class="o">(</span><span class="n">p</span><span class="bp">.</span><span class="n">support</span><span class="bp">.</span><span class="n">bind</span> <span class="n">finsupp</span><span class="bp">.</span><span class="n">support</span><span class="o">),</span> <span class="n">f</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">g</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span>
<span class="n">evalâ‚‚</span> <span class="n">Ï†</span> <span class="n">f</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">evalâ‚‚</span> <span class="n">Ï†</span> <span class="n">g</span> <span class="n">p</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">unfold</span> <span class="n">evalâ‚‚</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">finsupp</span><span class="bp">.</span><span class="n">sum</span> <span class="n">finsupp</span><span class="bp">.</span><span class="n">prod</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_congr</span> <span class="n">rfl</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span>
  <span class="n">congr&#39;</span> <span class="mi">1</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">finset</span><span class="bp">.</span><span class="n">prod_congr</span> <span class="n">rfl</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">i</span> <span class="n">hi</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">finset</span><span class="bp">.</span><span class="n">mem_bind</span><span class="o">,</span> <span class="n">exists_imp_distrib</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="n">h</span> <span class="n">i</span> <span class="n">x</span> <span class="n">hx</span> <span class="n">hi</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">this</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="186420408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186420408" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186420408">Johan Commelin (Jan 23 2020 at 18:40)</a>:</h4>
<p>Doesn't that mean you can remove those first two lines with <code>unfold</code>s?</p>

<a name="186420461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186420461" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186420461">Kevin Buzzard (Jan 23 2020 at 18:41)</a>:</h4>
<p>However he also says that the definition of <code>vars</code> in <code>mv_polynomial</code> should be what he wants it to be :P</p>

<a name="186420472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186420472" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186420472">Kevin Buzzard (Jan 23 2020 at 18:41)</a>:</h4>
<p>oh we only just did it :-)</p>

<a name="186576232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186576232" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186576232">Kevin Buzzard (Jan 25 2020 at 14:56)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> I <a href="https://github.com/ImperialCollegeLondon/M4P33/blob/b7d0cc43317df8a67390dafc830f6d576ec6c318/src/for_mathlib/mv_polynomial.lean#L495" target="_blank" title="https://github.com/ImperialCollegeLondon/M4P33/blob/b7d0cc43317df8a67390dafc830f6d576ec6c318/src/for_mathlib/mv_polynomial.lean#L495">finally did it</a>. It's not mathlib-ready ;-)</p>

<a name="186576700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186576700" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186576700">Johan Commelin (Jan 25 2020 at 15:09)</a>:</h4>
<p>Nice!</p>

<a name="186583834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186583834" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186583834">Yury G. Kudryashov (Jan 25 2020 at 18:42)</a>:</h4>
<p>There are two steps mixed together in <code>mv_polynomial</code>. Currently both are done using <code>finsupp</code> but I think that this should be <code>mv_polynomial R Î± := monoid_algebra R (multiplicative $ free_comm_monoid Î±)</code>. Here <code>free_comm_monoid Î±</code> could be either <code>finsupp Î± nat</code> or <code>multiset Î±</code>. I think that we should have both <code>monoid_algebra</code> and <code>free_comm_monoid</code>, and most definitions / lemmas about polynomials should combine lemmas about these two. A big advantage of this approach is that it will make much easier to define, e.g., <code>R[x, y, xâ»Â¹, yâ»Â¹]</code> as <code>monoid_algebra (free_comm_group Î±)</code>, or quasipolynomials as the <code>monoid_algebra</code> of the monoid <code>multiplicative (complex Ã— nat)</code> interpreted as <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>e</mi><mrow><mi>a</mi><mi>t</mi></mrow></msup><msup><mi>t</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">e^{at}t^n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.7935559999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7935559999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">t</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span>. It might make sense to have <code>free_comm_monoid</code> and <code>free_add_comm_monoid</code> with one being <code>multiplicative</code> or `additive of another.</p>

<a name="186585054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186585054" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186585054">Johan Commelin (Jan 25 2020 at 19:16)</a>:</h4>
<p>Didn't Kenny already define <code>free_comm_monoid</code>?</p>

<a name="186585369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186585369" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186585369">Yury G. Kudryashov (Jan 25 2020 at 19:26)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span>  <code>git grep</code> doesn't find it. Are you talking about some PR/WIP?</p>

<a name="186585440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186585440" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186585440">Chris Hughes (Jan 25 2020 at 19:28)</a>:</h4>
<p><code>free_comm_monoid</code> is multiset.</p>

<a name="186585446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186585446" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186585446">Chris Hughes (Jan 25 2020 at 19:28)</a>:</h4>
<p>Kenny did define <code>free_comm_group</code></p>

<a name="186585848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Algebraic%20geometry%20course/near/186585848" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53656Algebraicgeometrycourse.html#186585848">Johan Commelin (Jan 25 2020 at 19:40)</a>:</h4>
<p>Aah, right</p>


{% endraw %}

{% include archive_update.html %}