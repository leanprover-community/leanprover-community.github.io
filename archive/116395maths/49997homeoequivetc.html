---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/49997homeoequivetc.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html">homeo equiv etc.</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="124593811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124593811" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124593811">Patrick Massot (Apr 03 2018 at 21:08)</a>:</h4>
<p>A more specific version of <a href="#narrow/stream/113488-general/subject/structure.20vs.20class/near/124574243" title="#narrow/stream/113488-general/subject/structure.20vs.20class/near/124574243">https://leanprover.zulipchat.com/#narrow/stream/113488-general/subject/structure.20vs.20class/near/124574243</a> (it may be easier to understand my problem by looking at code) is <a href="https://github.com/PatrickMassot/lean-scratchpad/blob/master/src/support.lean#L188" target="_blank" title="https://github.com/PatrickMassot/lean-scratchpad/blob/master/src/support.lean#L188">https://github.com/PatrickMassot/lean-scratchpad/blob/master/src/support.lean#L188</a> where I'm clearly very stupidly trying to Lean some trivial lemma. I'm completely tangled in coercions and type classes</p>

<a name="124593836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124593836" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124593836">Patrick Massot (Apr 03 2018 at 21:09)</a>:</h4>
<p>I need two version of <code>supp</code> because I don't know how to have only one</p>

<a name="124593899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124593899" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124593899">Patrick Massot (Apr 03 2018 at 21:10)</a>:</h4>
<p>Then we have a classical <code>rw</code> failure on line 193 (always the same thing, <code>rw</code> itself doesn't do some kind of elaboration or reduction that is needed, and I still can't quite point out what)</p>

<a name="124593923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124593923" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124593923">Patrick Massot (Apr 03 2018 at 21:11)</a>:</h4>
<p>Then I  would like line 196 to be unnecessary (with the ugly <code> (g.to_equiv).inv_fun</code> never appearing)</p>

<a name="124593970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124593970" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124593970">Patrick Massot (Apr 03 2018 at 21:12)</a>:</h4>
<p>And finally the computation which should be easy (but still the core of the proof) and cannot do it</p>

<a name="124593994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124593994" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124593994">Patrick Massot (Apr 03 2018 at 21:13)</a>:</h4>
<p>I'd like to know whether the full setup is broken from the beginning or I only need a couple a carefully crafted simp lemmas to hide this mess (and prove stuff).</p>

<a name="124594355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124594355" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124594355">Chris Hughes (Apr 03 2018 at 21:20)</a>:</h4>
<p>cons_inj tells me about the lists being equal. Oops wrong topic.</p>

<a name="124688060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688060" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688060">Patrick Massot (Apr 05 2018 at 20:23)</a>:</h4>
<p>I can see this topic has not much success. Maybe the context is too complicated because of topology. But I really think this will come up in other places. The question is: how to do group theory with groups of transformations? As long as you don't need to use the inverse of a transformation, you can easily  functions and composition of function. But what about inverses? Say I'm working with permutations of a type (not necessarily encoded as <code>perm</code> in current mathlib). I define the support of a permutation f as the complement supp f of the fixed point set (no topology here). I want to prove supp gfg⁻¹ = g(supp f). And ideally I would really like f, g and g⁻¹ to live in a type endowed with a group structure, because I have other group theoretic stuff to do. What encoding should I use? How to then talk about the image of a subset as in g(supp f)?</p>

<a name="124688263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688263" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688263">Kevin Buzzard (Apr 05 2018 at 20:28)</a>:</h4>
<p>I got as far as cutting and pasting a 230 line file and then realising I didn't have the imports</p>

<a name="124688289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688289" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688289">Kevin Buzzard (Apr 05 2018 at 20:29)</a>:</h4>
<p>You define <code>suppp f</code> to be <code>supp f</code>?</p>

<a name="124688345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688345" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688345">Patrick Massot (Apr 05 2018 at 20:30)</a>:</h4>
<p>If you want to directly play with code it's much faster to git clone</p>

<a name="124688349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688349" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688349">Patrick Massot (Apr 05 2018 at 20:30)</a>:</h4>
<p>Yes, that definition is part of the problem</p>

<a name="124688354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688354" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688354">Patrick Massot (Apr 05 2018 at 20:30)</a>:</h4>
<p>I couldn't avoid it</p>

<a name="124688432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688432" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688432">Patrick Massot (Apr 05 2018 at 20:33)</a>:</h4>
<p>It's part of coercion/extension hell</p>

<a name="124688448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688448" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688448">Patrick Massot (Apr 05 2018 at 20:33)</a>:</h4>
<p><code>supp</code> is defined on functions from <code>X</code> to <code>X</code></p>

<a name="124688450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688450" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688450">Patrick Massot (Apr 05 2018 at 20:34)</a>:</h4>
<p>homeos have coercions to functions</p>

<a name="124688494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688494" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688494">Patrick Massot (Apr 05 2018 at 20:34)</a>:</h4>
<p>but it's not enough</p>

<a name="124688499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688499" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688499">Patrick Massot (Apr 05 2018 at 20:34)</a>:</h4>
<p>try to replace <code>suppp</code> by <code>supp</code> in the statement following that def and it won't type check</p>

<a name="124688514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688514" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688514">Patrick Massot (Apr 05 2018 at 20:35)</a>:</h4>
<p>But it's probably easier to solve the problem as I described it today than to add the topology layer</p>

<a name="124688561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688561" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688561">Kevin Buzzard (Apr 05 2018 at 20:36)</a>:</h4>
<p>It's just too hard to make it work.</p>

<a name="124688568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688568" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688568">Kevin Buzzard (Apr 05 2018 at 20:36)</a>:</h4>
<p>I have mathlib not compiling.</p>

<a name="124688569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688569">Patrick Massot (Apr 05 2018 at 20:36)</a>:</h4>
<p>make what work?</p>

<a name="124688572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688572">Patrick Massot (Apr 05 2018 at 20:36)</a>:</h4>
<p>I just pushed a version compatible with latest Lean nightly and mathlib head</p>

<a name="124688579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688579" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688579">Patrick Massot (Apr 05 2018 at 20:37)</a>:</h4>
<p>(only handling a renamed lemma)</p>

<a name="124688725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688725" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688725">Kevin Buzzard (Apr 05 2018 at 20:40)</a>:</h4>
<p>Now I have errors in commutators.lean and groups.lean</p>

<a name="124688738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688738" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688738">Patrick Massot (Apr 05 2018 at 20:40)</a>:</h4>
<p>those are old stuff irrelevant here</p>

<a name="124688742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688742" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688742">Patrick Massot (Apr 05 2018 at 20:40)</a>:</h4>
<p>they are not updated</p>

<a name="124688745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688745" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688745">Patrick Massot (Apr 05 2018 at 20:40)</a>:</h4>
<p>(this repo is my garbage repo, I'm sorry)</p>

<a name="124688748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688748" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688748">Patrick Massot (Apr 05 2018 at 20:40)</a>:</h4>
<p>Everything imported in <code>support.lean</code> is ok</p>

<a name="124688757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688757" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688757">Kevin Buzzard (Apr 05 2018 at 20:41)</a>:</h4>
<p>OK it now compiles. What's the question?</p>

<a name="124688762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688762" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688762">Kevin Buzzard (Apr 05 2018 at 20:41)</a>:</h4>
<p>Not that I'm likely to be able to answer it...</p>

<a name="124688811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688811" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688811">Patrick Massot (Apr 05 2018 at 20:42)</a>:</h4>
<p>How do you sort out the mess with <code>supp</code> vs <code>suppp</code>, <code>fundamental</code> vs <code>fundamental''</code>, how to remove the sorries in the proof of <code>supp_conj</code></p>

<a name="124688881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688881" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688881">Chris Hughes (Apr 05 2018 at 20:44)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">open</span> <span class="n">equiv</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="kn">lemma</span> <span class="n">mul_apply</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">perm</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="o">(</span><span class="n">b</span> <span class="n">x</span><span class="o">))</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">one_apply</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">perm</span> <span class="n">α</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="n">def</span> <span class="n">support</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">perm</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">|</span> <span class="n">a</span> <span class="n">x</span> <span class="bp">≠</span> <span class="n">x</span><span class="o">}</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">perm</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">support</span> <span class="o">(</span><span class="n">g</span> <span class="bp">*</span> <span class="n">f</span> <span class="bp">*</span> <span class="n">g</span><span class="bp">⁻¹</span><span class="o">)</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">image</span> <span class="n">g</span> <span class="o">(</span><span class="n">support</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">set</span><span class="bp">.</span><span class="n">ext</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">y</span><span class="o">,</span> <span class="bp">⟨λ</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">_</span> <span class="bp">≠</span> <span class="bp">_</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">g</span><span class="bp">⁻¹</span> <span class="n">y</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">h₁</span><span class="o">,</span> <span class="k">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">mul_apply</span><span class="o">,</span> <span class="n">mul_apply</span><span class="o">,</span> <span class="n">h₁</span><span class="o">,</span> <span class="err">←</span> <span class="n">mul_apply</span><span class="o">,</span> <span class="n">mul_inv_self</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="bp">;</span>
  <span class="n">exact</span> <span class="n">h</span> <span class="n">rfl</span><span class="o">,</span>
<span class="k">show</span> <span class="o">(</span><span class="n">g</span> <span class="bp">*</span> <span class="n">g</span><span class="bp">⁻¹</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span><span class="k">by</span> <span class="n">rw</span> <span class="n">mul_inv_self</span><span class="bp">;</span> <span class="n">refl</span><span class="bp">⟩</span><span class="o">,</span>
<span class="bp">λ</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="bp">_</span> <span class="bp">≠</span> <span class="bp">_</span> <span class="bp">∧</span> <span class="bp">_</span><span class="o">)</span><span class="bp">⟩</span><span class="o">,</span> <span class="k">show</span> <span class="bp">_</span> <span class="bp">≠</span> <span class="bp">_</span><span class="o">,</span> <span class="k">from</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">mul_apply</span><span class="o">,</span> <span class="err">←</span> <span class="n">hx</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span> <span class="err">←</span> <span class="n">mul_apply</span><span class="o">,</span> <span class="err">←</span> <span class="n">mul_apply</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">inv_mul_self</span><span class="o">,</span> <span class="n">mul_one</span><span class="o">,</span> <span class="n">mul_apply</span><span class="o">],</span>
  <span class="k">assume</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">(</span><span class="n">equiv</span><span class="bp">.</span><span class="n">bijective</span> <span class="n">g</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="n">h</span> <span class="n">at</span> <span class="n">hx</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">hx</span><span class="bp">.</span><span class="mi">1</span> <span class="n">rfl</span>
<span class="kn">end</span><span class="bp">⟩</span>
</pre></div>

<a name="124688971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124688971" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124688971">Chris Hughes (Apr 05 2018 at 20:47)</a>:</h4>
<p>(deleted)</p>

<a name="124689034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689034" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689034">Chris Hughes (Apr 05 2018 at 20:48)</a>:</h4>
<p>I proved a bit of stuff about permutations a few months ago.</p>

<a name="124689045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689045" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689045">Patrick Massot (Apr 05 2018 at 20:49)</a>:</h4>
<p>Thank you very much. Now I need to rewrite it in full tactic mode to see how it could help</p>

<a name="124689055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689055" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689055">Kevin Buzzard (Apr 05 2018 at 20:49)</a>:</h4>
<p>The issue is that you are using coe everywhere?</p>

<a name="124689076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689076" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689076">Patrick Massot (Apr 05 2018 at 20:50)</a>:</h4>
<p>What do you mean using coe everywhere?</p>

<a name="124689123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689123" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689123">Patrick Massot (Apr 05 2018 at 20:50)</a>:</h4>
<p>I need homeomorphisms to be able to act as functions</p>

<a name="124689124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689124" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689124">Patrick Massot (Apr 05 2018 at 20:50)</a>:</h4>
<p>So yes, they coerce to functions</p>

<a name="124689126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689126" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689126">Kevin Buzzard (Apr 05 2018 at 20:50)</a>:</h4>
<p>Is the reason the rw doesn't work on line 193 that you are pushing type class inference too hard?</p>

<a name="124689186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689186" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689186">Patrick Massot (Apr 05 2018 at 20:52)</a>:</h4>
<p>I have no idea</p>

<a name="124689188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689188" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689188">Patrick Massot (Apr 05 2018 at 20:52)</a>:</h4>
<p>Clearly there is something I'm doing wrong</p>

<a name="124689194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689194" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689194">Patrick Massot (Apr 05 2018 at 20:52)</a>:</h4>
<p>I only want to learn how to do it right</p>

<a name="124689259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689259" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689259">Kevin Buzzard (Apr 05 2018 at 20:54)</a>:</h4>
<div class="codehilite"><pre><span></span>ambiguous overload, possible interpretations
  right_inverse
  function.right_inverse
</pre></div>

<a name="124689274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689274" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689274">Patrick Massot (Apr 05 2018 at 20:54)</a>:</h4>
<p>where do you see that?</p>

<a name="124689278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689278" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689278">Kevin Buzzard (Apr 05 2018 at 20:54)</a>:</h4>
<p>when I write <code>#check right_inverse</code></p>

<a name="124689281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689281" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689281">Kevin Buzzard (Apr 05 2018 at 20:55)</a>:</h4>
<p>I don't know how to check types of objects in the middle of Lean code.</p>

<a name="124689282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689282" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689282">Patrick Massot (Apr 05 2018 at 20:55)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> don't you have a version of your proof before obfuscation?</p>

<a name="124689287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689287">Kevin Buzzard (Apr 05 2018 at 20:55)</a>:</h4>
<p>Is there an easy way to do that?</p>

<a name="124689288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689288" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689288">Patrick Massot (Apr 05 2018 at 20:55)</a>:</h4>
<p>This is something I wonder all the time</p>

<a name="124689291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689291" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689291">Patrick Massot (Apr 05 2018 at 20:55)</a>:</h4>
<p>it seems the answer is no</p>

<a name="124689294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689294" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689294">Kevin Buzzard (Apr 05 2018 at 20:55)</a>:</h4>
<p>You'd wonder it more if you were reading someone else's code...</p>

<a name="124689413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689413" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689413">Kevin Buzzard (Apr 05 2018 at 20:58)</a>:</h4>
<p>So what is <code> (g.to_equiv).to_fun</code>?</p>

<a name="124689414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689414" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689414">Mario Carneiro (Apr 05 2018 at 20:58)</a>:</h4>
<p>The reason this topic didn't get much discussion is because you basically said "there is something wrong, check out my code base and find the error"</p>

<a name="124689418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689418" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689418">Kevin Buzzard (Apr 05 2018 at 20:58)</a>:</h4>
<p>he said lots of things</p>

<a name="124689420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689420" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689420">Kevin Buzzard (Apr 05 2018 at 20:58)</a>:</h4>
<p>maybe there were lots of errors :-)</p>

<a name="124689421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689421" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689421">Mario Carneiro (Apr 05 2018 at 20:59)</a>:</h4>
<p>Could you at least post the error message?</p>

<a name="124689430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689430" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689430">Mario Carneiro (Apr 05 2018 at 20:59)</a>:</h4>
<p>(s)</p>

<a name="124689431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689431" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689431">Patrick Massot (Apr 05 2018 at 20:59)</a>:</h4>
<p>There is no error message. I can't prove stuff</p>

<a name="124689432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689432" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689432">Patrick Massot (Apr 05 2018 at 20:59)</a>:</h4>
<p>Because I'm clearly going against Lean</p>

<a name="124689436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689436" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689436">Kevin Buzzard (Apr 05 2018 at 20:59)</a>:</h4>
<p>Are you being anti-idiomatic?</p>

<a name="124689437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689437" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689437">Patrick Massot (Apr 05 2018 at 20:59)</a>:</h4>
<p>Not writing idiomatic Lean</p>

<a name="124689479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689479" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689479">Patrick Massot (Apr 05 2018 at 21:00)</a>:</h4>
<p>exactly</p>

<a name="124689487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689487" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689487">Mario Carneiro (Apr 05 2018 at 21:00)</a>:</h4>
<p>what? I am not in a position to see what you are talking about unless you say it here</p>

<a name="124689505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689505">Kevin Buzzard (Apr 05 2018 at 21:01)</a>:</h4>
<p>If you want to get to the bottom of the reason rewrite fails on line 193 you should write a MWE. But I know this isn't your real question.</p>

<a name="124689522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689522" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689522">Chris Hughes (Apr 05 2018 at 21:01)</a>:</h4>
<blockquote>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> don't you have a version of your proof before obfuscation?</p>
</blockquote>
<p>That's how I wrote it first time. I shouldn't have opened the <code>perm</code> namespace, so if it didn't work that's probably why.</p>

<a name="124689526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689526" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689526">Kevin Buzzard (Apr 05 2018 at 21:01)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Is there a way of checking the type of a term in the middle of a tactic proof?</p>

<a name="124689530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689530" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689530">Patrick Massot (Apr 05 2018 at 21:01)</a>:</h4>
<p>I tried to describe my problems in <a href="#narrow/stream/113488-general/subject/structure.20vs.20class/near/124574243" title="#narrow/stream/113488-general/subject/structure.20vs.20class/near/124574243">https://leanprover.zulipchat.com/#narrow/stream/113488-general/subject/structure.20vs.20class/near/124574243</a> without code, and then I posted link to my actual code. Then I tried to describe a simplified problem. I don't what I could do better to ask for help</p>

<a name="124689571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689571" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689571">Kevin Buzzard (Apr 05 2018 at 21:02)</a>:</h4>
<p>i.e. I can't check it outside the begin/end block because the term is only constructed within the block</p>

<a name="124689572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689572">Patrick Massot (Apr 05 2018 at 21:02)</a>:</h4>
<p>I'm honestly asking</p>

<a name="124689582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689582" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689582">Kevin Buzzard (Apr 05 2018 at 21:02)</a>:</h4>
<p>So what is <code> (g.to_equiv).to_fun</code>?</p>

<a name="124689588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689588">Patrick Massot (Apr 05 2018 at 21:03)</a>:</h4>
<p>It's the function underlying the homeomorphism g</p>

<a name="124689592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689592">Kevin Buzzard (Apr 05 2018 at 21:03)</a>:</h4>
<p>for <code>g : homeo X X</code></p>

<a name="124689595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689595" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689595">Patrick Massot (Apr 05 2018 at 21:03)</a>:</h4>
<p>But it goes through two conversions</p>

<a name="124689601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689601" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689601">Patrick Massot (Apr 05 2018 at 21:03)</a>:</h4>
<p>First to <code>equiv X X</code> and then to <code>X -&gt; X</code></p>

<a name="124689602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689602" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689602">Kevin Buzzard (Apr 05 2018 at 21:03)</a>:</h4>
<p>When you write <code>g '' ...</code></p>

<a name="124689604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689604" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689604">Kevin Buzzard (Apr 05 2018 at 21:03)</a>:</h4>
<p>what do you think happens there?</p>

<a name="124689607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689607" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689607">Patrick Massot (Apr 05 2018 at 21:03)</a>:</h4>
<p>That's mathlib notation for image of a subset</p>

<a name="124689647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689647" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689647">Patrick Massot (Apr 05 2018 at 21:04)</a>:</h4>
<p>Lean does figure out the coercions here</p>

<a name="124689649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689649" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689649">Kevin Buzzard (Apr 05 2018 at 21:04)</a>:</h4>
<p><code>set.image</code> so it takes a function</p>

<a name="124689653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689653" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689653">Kevin Buzzard (Apr 05 2018 at 21:04)</a>:</h4>
<p>and which function does it take?</p>

<a name="124689678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689678" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689678">Kevin Buzzard (Apr 05 2018 at 21:05)</a>:</h4>
<p>Is there some coe directly from homeo to the function?</p>

<a name="124689681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689681" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689681">Patrick Massot (Apr 05 2018 at 21:05)</a>:</h4>
<p><code>(g.to_equiv).to_fun</code></p>

<a name="124689684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689684" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689684">Patrick Massot (Apr 05 2018 at 21:05)</a>:</h4>
<p>yes</p>

<a name="124689685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689685" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689685">Kevin Buzzard (Apr 05 2018 at 21:05)</a>:</h4>
<p>That's what it uses?</p>

<a name="124689691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689691" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689691">Patrick Massot (Apr 05 2018 at 21:05)</a>:</h4>
<p><code>instance : has_coe_to_fun (homeo α β) := ⟨_, λ f, f.to_fun⟩</code></p>

<a name="124689695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689695" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689695">Patrick Massot (Apr 05 2018 at 21:05)</a>:</h4>
<p>is defined in <code>homeos.lean</code></p>

<a name="124689723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689723" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689723">Patrick Massot (Apr 05 2018 at 21:06)</a>:</h4>
<p>It's indeed the same as <code>(g.to_equiv).to_fun</code></p>

<a name="124689742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689742" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689742">Kevin Buzzard (Apr 05 2018 at 21:06)</a>:</h4>
<p>This is a funny error message then:</p>

<a name="124689744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689744" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689744">Kevin Buzzard (Apr 05 2018 at 21:06)</a>:</h4>
<div class="codehilite"><pre><span></span>rewrite tactic failed, did not find instance of the pattern in the target expression
  (g.to_equiv).to_fun &#39;&#39; {a : X | (λ (x : X), f x ≠ x) a}
state:
X : Type,
_inst_3 : topological_space X,
f g : homeo X X
⊢ {x : X | conj g f x ≠ x} = g &#39;&#39; {x : X | f x ≠ x}
</pre></div>

<a name="124689756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689756" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689756">Kevin Buzzard (Apr 05 2018 at 21:06)</a>:</h4>
<p>Is it definitionally the same?</p>

<a name="124689771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689771" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689771">Chris Hughes (Apr 05 2018 at 21:07)</a>:</h4>
<p>rw doesn't do definitionally equal things.</p>

<a name="124689776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689776" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689776">Kevin Buzzard (Apr 05 2018 at 21:07)</a>:</h4>
<p>oh yeah</p>

<a name="124689779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689779" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689779">Kevin Buzzard (Apr 05 2018 at 21:07)</a>:</h4>
<p>that's the second time I've forgotten that this week</p>

<a name="124689785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689785" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689785">Patrick Massot (Apr 05 2018 at 21:07)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">variable</span> <span class="o">(</span><span class="n">g</span><span class="o">:</span> <span class="n">homeo</span> <span class="n">X</span> <span class="n">X</span><span class="o">)</span>
<span class="kn">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span><span class="bp">.</span><span class="n">to_equiv</span><span class="bp">.</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="n">rfl</span>
</pre></div>

<a name="124689829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689829" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689829">Kevin Buzzard (Apr 05 2018 at 21:08)</a>:</h4>
<p>Chris points out the problem</p>

<a name="124689831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689831" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689831">Patrick Massot (Apr 05 2018 at 21:08)</a>:</h4>
<p>Yes, I understand this is the problem with the rewrite</p>

<a name="124689833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689833">Kevin Buzzard (Apr 05 2018 at 21:08)</a>:</h4>
<p>definitionally equivalent is not enough</p>

<a name="124689838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689838" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689838">Patrick Massot (Apr 05 2018 at 21:08)</a>:</h4>
<p>But I'd like to know the proper way of either not having this problem or workaround it</p>

<a name="124689850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689850">Patrick Massot (Apr 05 2018 at 21:09)</a>:</h4>
<p>without doing this <code>swap, exact ...</code> thing</p>

<a name="124689854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689854" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689854">Chris Hughes (Apr 05 2018 at 21:09)</a>:</h4>
<p>Never use <code>( g.to_equiv).to_fun</code>?</p>

<a name="124689863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689863" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689863">Patrick Massot (Apr 05 2018 at 21:09)</a>:</h4>
<p>I don't write this myself</p>

<a name="124689868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689868" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689868">Chris Hughes (Apr 05 2018 at 21:09)</a>:</h4>
<p>I usually use <code>show</code> otherwise.</p>

<a name="124689872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689872" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689872">Patrick Massot (Apr 05 2018 at 21:09)</a>:</h4>
<p>it only appears in goals and error messages</p>

<a name="124689928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689928" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689928">Patrick Massot (Apr 05 2018 at 21:10)</a>:</h4>
<p>What is this <code>λ h : _ ≠ _,</code> dark magic?</p>

<a name="124689929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689929" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689929">Kevin Buzzard (Apr 05 2018 at 21:10)</a>:</h4>
<p>I had problems with coercions when I was doing schemes so I just stopped using them completely</p>

<a name="124689930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689930" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689930">Kevin Buzzard (Apr 05 2018 at 21:10)</a>:</h4>
<p>and wrote everything out in full</p>

<a name="124689933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689933" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689933">Patrick Massot (Apr 05 2018 at 21:10)</a>:</h4>
<p>How do you do it in tactic mode?</p>

<a name="124689935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689935" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689935">Kevin Buzzard (Apr 05 2018 at 21:10)</a>:</h4>
<p>show works in tactic mode</p>

<a name="124689952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689952" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689952">Patrick Massot (Apr 05 2018 at 21:11)</a>:</h4>
<p>Kevin, how would you do group theory with permutations of a Type without coercions?</p>

<a name="124689958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689958" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689958">Kevin Buzzard (Apr 05 2018 at 21:11)</a>:</h4>
<p><code> show _ ≠ _ </code> :-)</p>

<a name="124689962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124689962" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124689962">Patrick Massot (Apr 05 2018 at 21:11)</a>:</h4>
<p>You both need elements of the group to act on points and to have inverses</p>

<a name="124690007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690007">Patrick Massot (Apr 05 2018 at 21:12)</a>:</h4>
<p>Re: <code>_ ≠ _</code> he does this in place of <code>intro</code></p>

<a name="124690009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690009" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690009">Kevin Buzzard (Apr 05 2018 at 21:12)</a>:</h4>
<p>I'm just saying that you just write the coercions explicitly.</p>

<a name="124690013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690013" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690013">Kevin Buzzard (Apr 05 2018 at 21:12)</a>:</h4>
<p>That was what I did when I got sick of getting type class inference to work. I just wrote down everything myself.</p>

<a name="124690085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690085" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690085">Patrick Massot (Apr 05 2018 at 21:14)</a>:</h4>
<p>There must be a better way</p>

<a name="124690100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690100">Patrick Massot (Apr 05 2018 at 21:14)</a>:</h4>
<p>In real world you would never need to distinguish the element of a group of transformation from themselves like this</p>

<a name="124690118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690118" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690118">Kevin Buzzard (Apr 05 2018 at 21:15)</a>:</h4>
<p>the real world doesn't use dependent type theory</p>

<a name="124690122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690122" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690122">Kevin Buzzard (Apr 05 2018 at 21:15)</a>:</h4>
<p>it uses one piece of notation to mean more than one thing</p>

<a name="124690129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690129" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690129">Kevin Buzzard (Apr 05 2018 at 21:15)</a>:</h4>
<p>and we're so used to that, that this world can be kind of annoying sometimes</p>

<a name="124690167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690167" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690167">Kevin Buzzard (Apr 05 2018 at 21:16)</a>:</h4>
<p>with their silly pedantic fussing</p>

<a name="124690176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690176" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690176">Kevin Buzzard (Apr 05 2018 at 21:16)</a>:</h4>
<div class="codehilite"><pre><span></span>show {x : X | conj g f x ≠ x} = g.to_equiv.to_fun &#39;&#39; {x : X | f x ≠ x},
rw aux_1 g.right_inv,
</pre></div>

<a name="124690178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690178" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690178">Kevin Buzzard (Apr 05 2018 at 21:16)</a>:</h4>
<p>works for 193 ;-)</p>

<a name="124690265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690265" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690265">Patrick Massot (Apr 05 2018 at 21:18)</a>:</h4>
<p>I don't understand what <code>show</code> does here</p>

<a name="124690267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690267" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690267">Patrick Massot (Apr 05 2018 at 21:18)</a>:</h4>
<p>Usually I need to supply a proof after <code>show</code></p>

<a name="124690273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690273" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690273">Kevin Buzzard (Apr 05 2018 at 21:19)</a>:</h4>
<p>it rewrites the goal into a definitionally equivalent form</p>

<a name="124690277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690277" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690277">Kevin Buzzard (Apr 05 2018 at 21:19)</a>:</h4>
<p>If the goal is X, then <code>show X,</code> does nothing</p>

<a name="124690280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690280" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690280">Kevin Buzzard (Apr 05 2018 at 21:19)</a>:</h4>
<p>if the goal is definitionally equal to X, it changes the goal to X</p>

<a name="124690287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690287">Patrick Massot (Apr 05 2018 at 21:19)</a>:</h4>
<p>I can see it's doing that here. But what's the link with <code>show</code> I usually use?</p>

<a name="124690291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690291" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690291">Patrick Massot (Apr 05 2018 at 21:19)</a>:</h4>
<p>which I guess is in term mode</p>

<a name="124690293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690293" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690293">Kevin Buzzard (Apr 05 2018 at 21:19)</a>:</h4>
<p>I don't know, this is the only show I use</p>

<a name="124690294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690294" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690294">Kevin Buzzard (Apr 05 2018 at 21:19)</a>:</h4>
<p>tactic mode is the bomb</p>

<a name="124690370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690370" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690370">Patrick Massot (Apr 05 2018 at 21:20)</a>:</h4>
<p>I use <code>show</code> in arguments to <code>rw</code> and <code>simp</code> for easy stuff I don't want to state and name using <code>have</code> beforehand</p>

<a name="124690467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690467" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690467">Kevin Buzzard (Apr 05 2018 at 21:23)</a>:</h4>
<p>Line 190: <code>lemma  supp_conj (f g : homeo X X) : supp (conj g f : homeo X X) = g '' supp f :=</code> works</p>

<a name="124690530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690530" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690530">Kevin Buzzard (Apr 05 2018 at 21:24)</a>:</h4>
<p>i.e. I removed <code>suppp</code></p>

<a name="124690543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690543" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690543">Patrick Massot (Apr 05 2018 at 21:24)</a>:</h4>
<p>Very interesting</p>

<a name="124690545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690545" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690545">Kevin Buzzard (Apr 05 2018 at 21:24)</a>:</h4>
<p>You are using <code>f</code> and <code>g</code> to mean two different things, and it guessed you wanted the map not the homeo here</p>

<a name="124690553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690553" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690553">Kevin Buzzard (Apr 05 2018 at 21:25)</a>:</h4>
<p>the second suppp could just be removed, but the first one had to be persuaded</p>

<a name="124690561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690561" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690561">Patrick Massot (Apr 05 2018 at 21:25)</a>:</h4>
<p>Probably because <code>perm X</code> is also a group</p>

<a name="124690627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690627" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690627">Patrick Massot (Apr 05 2018 at 21:26)</a>:</h4>
<p>and Lean doesn't know the group structure on <code>homeo X X</code> is induced as a subgroup of <code>perm X</code></p>

<a name="124690659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690659" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690659">Kevin Buzzard (Apr 05 2018 at 21:28)</a>:</h4>
<blockquote>
<p>Then I  would like line 196 to be unnecessary (with the ugly <code> (g.to_equiv).inv_fun</code> never appearing)</p>
</blockquote>
<p>I don't understand this one. Is there another name for <code>g.to_equiv.inv_fun</code>?</p>

<a name="124690712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690712" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690712">Patrick Massot (Apr 05 2018 at 21:28)</a>:</h4>
<p>It's <code>g⁻¹</code>!</p>

<a name="124690856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690856" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690856">Kevin Buzzard (Apr 05 2018 at 21:32)</a>:</h4>
<p>You can put <code>show {x : X | conj g f x ≠ x} = {b : X | f (g⁻¹ b) ≠ g⁻¹ b}</code> on line 196 if you like...</p>

<a name="124690867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690867" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690867">Kevin Buzzard (Apr 05 2018 at 21:32)</a>:</h4>
<p>but you are complaining about the congr?</p>

<a name="124690884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690884" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690884">Kevin Buzzard (Apr 05 2018 at 21:33)</a>:</h4>
<p>You want to prove two sets are equal and you don't want to use congr then funext?</p>

<a name="124690933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124690933" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124690933">Patrick Massot (Apr 05 2018 at 21:34)</a>:</h4>
<p>No I don't complain about congr and funext</p>

<a name="124691006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691006" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691006">Patrick Massot (Apr 05 2018 at 21:36)</a>:</h4>
<p>I don't complain at all actually, I try to learn</p>

<a name="124691011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691011" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691011">Patrick Massot (Apr 05 2018 at 21:36)</a>:</h4>
<p>I mean I complain that I'm not yet learned</p>

<a name="124691014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691014" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691014">Patrick Massot (Apr 05 2018 at 21:36)</a>:</h4>
<p>but I don't complain to anybody but me</p>

<a name="124691037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691037" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691037">Patrick Massot (Apr 05 2018 at 21:37)</a>:</h4>
<p>I really don't understand Chris's proof at all</p>

<a name="124691080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691080" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691080">Patrick Massot (Apr 05 2018 at 21:38)</a>:</h4>
<p>I can't translate it into tactic mode</p>

<a name="124691084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691084" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691084">Patrick Massot (Apr 05 2018 at 21:38)</a>:</h4>
<p>Hence I cannot understand it</p>

<a name="124691093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691093" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691093">Patrick Massot (Apr 05 2018 at 21:38)</a>:</h4>
<p>I have a really hard time imagining people actually thinking like this (without first writing the tactic proof and then obfuscate it in term mode)</p>

<a name="124691107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691107" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691107">Patrick Massot (Apr 05 2018 at 21:39)</a>:</h4>
<p>I do believe you Chris, but my imagination is failing me</p>

<a name="124691169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691169" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691169">Kevin Buzzard (Apr 05 2018 at 21:40)</a>:</h4>
<p>Your comments before the computation seem a bit superficial to me, in the sense that I would not care about any of them myself if they came up in my Lean work.</p>

<a name="124691173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691173" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691173">Kevin Buzzard (Apr 05 2018 at 21:40)</a>:</h4>
<p>But the computation is a more serious matter.</p>

<a name="124691188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691188" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691188">Patrick Massot (Apr 05 2018 at 21:41)</a>:</h4>
<p>The computation is the actual proof</p>

<a name="124691198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691198">Patrick Massot (Apr 05 2018 at 21:41)</a>:</h4>
<p>everything before the computation is distraction</p>

<a name="124691262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691262" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691262">Kevin Buzzard (Apr 05 2018 at 21:42)</a>:</h4>
<p>oh wait</p>

<a name="124691271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691271" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691271">Kevin Buzzard (Apr 05 2018 at 21:42)</a>:</h4>
<p>the computation</p>

<a name="124691277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691277" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691277">Kevin Buzzard (Apr 05 2018 at 21:42)</a>:</h4>
<p>you write Prop = Prop?</p>

<a name="124691280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691280" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691280">Kevin Buzzard (Apr 05 2018 at 21:42)</a>:</h4>
<p>There's no other way?</p>

<a name="124691283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691283" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691283">Patrick Massot (Apr 05 2018 at 21:42)</a>:</h4>
<p>yes I write Prop = Prop</p>

<a name="124691287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691287">Kevin Buzzard (Apr 05 2018 at 21:42)</a>:</h4>
<p>Maybe iff would be better with props</p>

<a name="124691305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691305" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691305">Patrick Massot (Apr 05 2018 at 21:43)</a>:</h4>
<p>That's because we see sets as map from X to  Prop</p>

<a name="124691316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691316" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691316">Kevin Buzzard (Apr 05 2018 at 21:43)</a>:</h4>
<p>oh</p>

<a name="124691372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691372" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691372">Patrick Massot (Apr 05 2018 at 21:44)</a>:</h4>
<p>So the goal is really Prop = Prop</p>

<a name="124691379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691379" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691379">Kevin Buzzard (Apr 05 2018 at 21:44)</a>:</h4>
<p>eew</p>

<a name="124691384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691384" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691384">Patrick Massot (Apr 05 2018 at 21:44)</a>:</h4>
<p>because we use funext to get rid of X here</p>

<a name="124691387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691387" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691387">Kevin Buzzard (Apr 05 2018 at 21:44)</a>:</h4>
<p>Ok so your question really is something else</p>

<a name="124691394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691394">Patrick Massot (Apr 05 2018 at 21:44)</a>:</h4>
<p>But of course on paper I would write iff</p>

<a name="124691400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691400" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691400">Kevin Buzzard (Apr 05 2018 at 21:44)</a>:</h4>
<p>You want to show <code>{x | p x} = {x | q x}</code></p>

<a name="124691406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691406">Patrick Massot (Apr 05 2018 at 21:45)</a>:</h4>
<p>x is in this set iff .. iff .. iff ... done</p>

<a name="124691409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691409" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691409">Kevin Buzzard (Apr 05 2018 at 21:45)</a>:</h4>
<p>I don't think you should use congr and then funext</p>

<a name="124691420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691420" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691420">Kevin Buzzard (Apr 05 2018 at 21:45)</a>:</h4>
<p>yes</p>

<a name="124691423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691423" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691423">Kevin Buzzard (Apr 05 2018 at 21:45)</a>:</h4>
<p>iff</p>

<a name="124691429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691429" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691429">Patrick Massot (Apr 05 2018 at 21:45)</a>:</h4>
<p>Remember <code>{x | p x}</code> is only syntactic sugar for <code>p</code></p>

<a name="124691433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691433" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691433">Kevin Buzzard (Apr 05 2018 at 21:45)</a>:</h4>
<p>sure</p>

<a name="124691441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691441">Kevin Buzzard (Apr 05 2018 at 21:45)</a>:</h4>
<p>but there are lemmas like sets X and Y are equal iff X subseteq Y and Y subseteq X</p>

<a name="124691480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691480" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691480">Kevin Buzzard (Apr 05 2018 at 21:46)</a>:</h4>
<p>or whatever</p>

<a name="124691493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691493" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691493">Chris Hughes (Apr 05 2018 at 21:46)</a>:</h4>
<p><code>set.ext</code> is what you're talking about</p>

<a name="124691494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691494" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691494">Patrick Massot (Apr 05 2018 at 21:46)</a>:</h4>
<p>Sure, but here I can prove (on paper) direct equality</p>

<a name="124691503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691503" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691503">Kevin Buzzard (Apr 05 2018 at 21:46)</a>:</h4>
<p>But you can't prove any of your intermediate steps!</p>

<a name="124691510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691510" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691510">Kevin Buzzard (Apr 05 2018 at 21:47)</a>:</h4>
<p>So surely this is an indication that trying to prove p x = q x is a bad idea</p>

<a name="124691585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691585" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691585">Kevin Buzzard (Apr 05 2018 at 21:48)</a>:</h4>
<p>I would use set.ext instead of congr, funext</p>

<a name="124691590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691590" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691590">Kevin Buzzard (Apr 05 2018 at 21:48)</a>:</h4>
<p>and then try the calc with iff's</p>

<a name="124691592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691592">Patrick Massot (Apr 05 2018 at 21:48)</a>:</h4>
<p>indeed <code>apply set.ext</code> transforms the goal to iff</p>

<a name="124691606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691606" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691606">Patrick Massot (Apr 05 2018 at 21:49)</a>:</h4>
<p>But my sorry where there because I couldn't use <code>rw</code>, not because I was proving <code>p x = q x</code></p>

<a name="124691686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691686" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691686">Kevin Buzzard (Apr 05 2018 at 21:51)</a>:</h4>
<p>So what happens if you use set.ext and then try to push the calc through? I can't pass the <code>rw show  ∀ b, (g.to_equiv).inv_fun b = g⁻¹ b, from  λ b, rfl,</code> line</p>

<a name="124691689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691689" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691689">Kevin Buzzard (Apr 05 2018 at 21:51)</a>:</h4>
<p>because I don't really know what's going on</p>

<a name="124691752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691752" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691752">Patrick Massot (Apr 05 2018 at 21:52)</a>:</h4>
<p>I don't understand what you don't know</p>

<a name="124691755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691755" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691755">Kevin Buzzard (Apr 05 2018 at 21:52)</a>:</h4>
<p>I have never seen congr_n in my life</p>

<a name="124691758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691758">Kevin Buzzard (Apr 05 2018 at 21:52)</a>:</h4>
<p>I don't know what all this rw show business is all about</p>

<a name="124691762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691762" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691762">Kevin Buzzard (Apr 05 2018 at 21:52)</a>:</h4>
<p>how is that different to just show</p>

<a name="124691771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691771" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691771">Kevin Buzzard (Apr 05 2018 at 21:53)</a>:</h4>
<p>can you just write it for me?</p>

<a name="124691786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691786" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691786">Patrick Massot (Apr 05 2018 at 21:53)</a>:</h4>
<p><code>congr_n 1</code> is like <code>congr</code> but stops after one step instead of recursing</p>

<a name="124691837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691837" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691837">Kevin Buzzard (Apr 05 2018 at 21:54)</a>:</h4>
<p>how do you get from not X iff not Y to X iff Y?</p>

<a name="124691841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691841">Patrick Massot (Apr 05 2018 at 21:54)</a>:</h4>
<p>if the goal is <code>f (a + b) = f (c + d)</code> and you <code>congr_n 1</code>, the new goal will be <code>a+b = c+d</code>. With <code>congr</code> it would become two random goals  like <code>a=c</code> and <code>b = d</code></p>

<a name="124691847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691847">Patrick Massot (Apr 05 2018 at 21:54)</a>:</h4>
<p>In this case <code>f</code> is <code>not</code></p>

<a name="124691922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691922" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691922">Patrick Massot (Apr 05 2018 at 21:56)</a>:</h4>
<p>By the way, I don't know how to get rid of these <code>not</code> once I go to iff instead of =</p>

<a name="124691924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691924" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691924">Kevin Buzzard (Apr 05 2018 at 21:57)</a>:</h4>
<p>not_iff_not.2</p>

<a name="124691942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691942" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691942">Kevin Buzzard (Apr 05 2018 at 21:57)</a>:</h4>
<p>but there's a catch...</p>

<a name="124691945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691945" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691945">Kevin Buzzard (Apr 05 2018 at 21:57)</a>:</h4>
<p><code> ⊢ decidable (f (g⁻¹ x) = g⁻¹ x) </code></p>

<a name="124691946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691946" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691946">Kevin Buzzard (Apr 05 2018 at 21:57)</a>:</h4>
<p>so I hope you are only interested in decidable topological spaces...</p>

<a name="124691947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691947">Kevin Buzzard (Apr 05 2018 at 21:57)</a>:</h4>
<p>;-)</p>

<a name="124691985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691985" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691985">Andrew Ashworth (Apr 05 2018 at 21:58)</a>:</h4>
<p>It's funny, as you saw with Adam, most people with a cs background start out in term mode</p>

<a name="124691993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124691993" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124691993">Kevin Buzzard (Apr 05 2018 at 21:58)</a>:</h4>
<p>most people with a maths background think lambda is a real number</p>

<a name="124692004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124692004" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124692004">Andrew Ashworth (Apr 05 2018 at 21:59)</a>:</h4>
<p>I think it's simply familiarity with functional programming concepts</p>

<a name="124692026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124692026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124692026">Andrew Ashworth (Apr 05 2018 at 21:59)</a>:</h4>
<p>Once you spend enough time looking at term mode statements they really do become more understandable <span class="emoji emoji-1f642" title="simple smile">:simple_smile:</span></p>

<a name="124692030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124692030" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124692030">Patrick Massot (Apr 05 2018 at 22:00)</a>:</h4>
<p>I just found it using <code>find</code>!</p>

<a name="124692079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124692079" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124692079">Patrick Massot (Apr 05 2018 at 22:00)</a>:</h4>
<p><code>#find (¬ _ ↔ ¬ _) ↔ (_ ↔ _)</code> does work!</p>

<a name="124692081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124692081" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124692081">Patrick Massot (Apr 05 2018 at 22:00)</a>:</h4>
<p><span class="emoji emoji-1f389" title="tada">:tada:</span> <span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span></p>

<a name="124692096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124692096" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124692096">Kevin Buzzard (Apr 05 2018 at 22:01)</a>:</h4>
<p>I found it by guessing what it was called ;-)</p>

<a name="124692100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124692100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124692100">Patrick Massot (Apr 05 2018 at 22:02)</a>:</h4>
<p>Now what is this <code>decidable</code> crap? I have <code>noncomputable theory
local attribute [instance] classical.prop_decidable</code> on top of my file</p>

<a name="124692101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124692101" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124692101">Kevin Buzzard (Apr 05 2018 at 22:02)</a>:</h4>
<p>Even the iff's need some work. I'm beginning to think you were better off with =. but I have to go now, childcare calls</p>

<a name="124692146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124692146" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124692146">Patrick Massot (Apr 05 2018 at 22:02)</a>:</h4>
<p>Why isn't it enough</p>

<a name="124692156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124692156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124692156">Patrick Massot (Apr 05 2018 at 22:02)</a>:</h4>
<p>I need to sleep actually, I have a train to catch at an insane time tomorrow to go and give a talk about fuzzy maths in Köln</p>

<a name="124692190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124692190" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124692190">Patrick Massot (Apr 05 2018 at 22:03)</a>:</h4>
<p>and why this <code>decidable</code> stuff didn't come up in my <code>=</code> instead of iff stuff?</p>

<a name="124692239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124692239" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124692239">Patrick Massot (Apr 05 2018 at 22:04)</a>:</h4>
<p>Anyway, thank you very much for your help, and thank Chris to</p>

<a name="124692343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124692343" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124692343">Patrick Massot (Apr 05 2018 at 22:06)</a>:</h4>
<p>I have enough food for thought on the train</p>

<a name="124692361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124692361" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124692361">Patrick Massot (Apr 05 2018 at 22:06)</a>:</h4>
<p>Except that I would like to understand how to tell Lean I really don't care about the <code>decidable</code> metaphysics</p>

<a name="124692389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124692389" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124692389">Patrick Massot (Apr 05 2018 at 22:07)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> is there a global command to say everything should be assumed to have decidable equality?</p>

<a name="124693410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124693410" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124693410">Kevin Buzzard (Apr 05 2018 at 22:33)</a>:</h4>
<p>Is your problem simply that g is not an element of perm X? What happens if you define fp to be the permutation underlying f and gp for g, then use lemmas about groups acting on sets?</p>

<a name="124693620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124693620" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124693620">Kevin Buzzard (Apr 05 2018 at 22:38)</a>:</h4>
<p>All those iff statements are going to follow from standard lemmas about groups acting on sets. I have no idea if they're there already but that is surely the way to finish the job. Groups acting on sets should be in mathlib (I don't know if it's there already) and then all the lemmas should be proved in the same file and then you just apply them and you're home</p>

<a name="124702399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124702399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124702399">Mario Carneiro (Apr 06 2018 at 03:42)</a>:</h4>
<blockquote>
<p>is there a global command to say everything should be assumed to have decidable equality? </p>
</blockquote>
<p><code>local attribute [instance] classical.prop_decidable</code> should do that</p>

<a name="124703691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124703691" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124703691">Patrick Massot (Apr 06 2018 at 04:30)</a>:</h4>
<p>Hum. It turns out I can indeed use <code>apply_instance</code> in both cases. This is the first time I need this tactic in a context where I'm not using <code>example</code> to check whether an instance is working</p>

<a name="124703700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124703700" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124703700">Patrick Massot (Apr 06 2018 at 04:31)</a>:</h4>
<p>Do you understand why <code> apply not_iff_not.2,</code> can spawn those goals without trying <code>apply_instance</code>?</p>

<a name="124703801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124703801" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124703801">Mario Carneiro (Apr 06 2018 at 04:35)</a>:</h4>
<p>What's the context?</p>

<a name="124703841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124703841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124703841">Mario Carneiro (Apr 06 2018 at 04:36)</a>:</h4>
<p>Also, you should probably use <code>not_congr</code> instead, which doesn't have those extra assumptions</p>

<a name="124703844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124703844" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124703844">Mario Carneiro (Apr 06 2018 at 04:36)</a>:</h4>
<p>I'm currently working on doing what I can with your file</p>

<a name="124703849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124703849" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124703849">Mario Carneiro (Apr 06 2018 at 04:37)</a>:</h4>
<p>I don't think <code>aux_1</code> is true without assuming <code>f</code> and <code>g</code> are two-sided inverses</p>

<a name="124703851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124703851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124703851">Mario Carneiro (Apr 06 2018 at 04:37)</a>:</h4>
<div class="codehilite"><pre><span></span>lemma aux_1 {α : Type*} {β : Type*} {f : α → β} {g : β → α}
  (h₁ : function.left_inverse g f) (h₂ : function.right_inverse g f)
  (p : α → Prop) : f &#39;&#39; {a : α | p a} = {b : β | p (g b)} :=
set.ext $ λ b, mem_image_iff_of_inverse h₁ h₂
</pre></div>

<a name="124703946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124703946" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124703946">Mario Carneiro (Apr 06 2018 at 04:40)</a>:</h4>
<p>This works for supp_conj:</p>
<div class="codehilite"><pre><span></span>lemma supp_conj (f g : homeo X X) : supp (conj g f : homeo X X) = g &#39;&#39; supp f :=
</pre></div>

<a name="124705045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124705045" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124705045">Mario Carneiro (Apr 06 2018 at 05:23)</a>:</h4>
<p>Here's a proof of supp_conj:</p>
<div class="codehilite"><pre><span></span>-- should be in equiv.lean
theorem equiv.left_inverse (f : α ≃ β) : left_inverse f.symm f := f.left_inv

theorem equiv.right_inverse (f : α ≃ β) : function.right_inverse f.symm f := f.right_inv

-- should be in homeos.lean
theorem homeo.left_inverse (f : homeo α β) : left_inverse f.symm f := f.left_inv

theorem homeo.right_inverse (f : homeo α β) : function.right_inverse f.symm f := f.right_inv

theorem homeo.bijective (f : homeo α β) : bijective f := f.to_equiv.bijective

@[simp] theorem aut_mul_val (f g : homeo α α) (x) : (f * g) x = f (g x) :=
homeo.comp_val _ _ _

@[simp] theorem aut_one_val (x) : (1 : homeo α α) x = x := rfl

@[simp] theorem aut_inv (f : homeo α α) : f⁻¹ = f.symm := rfl

lemma supp_conj (f g : homeo X X) : supp (conj g f : homeo X X) = g &#39;&#39; supp f :=
begin
  unfold supp,
  rw homeo.image_closure,
  congr_n 1,
  apply set.ext (λ x, _),
  rw mem_image_iff_of_inverse g.left_inverse g.right_inverse,
  apply not_congr,
  dsimp [conj],
  exact calc
     (g * f * g⁻¹) x = x
        ↔ g⁻¹ (g (f (g⁻¹ x))) = g⁻¹ x : by simp [(g⁻¹).bijective.1.eq_iff]
    ... ↔ (f (g⁻¹ x)) = g⁻¹ x : by rw [← aut_mul_val, mul_left_inv]; simp
end
</pre></div>

<a name="124705433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124705433" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124705433">Patrick Massot (Apr 06 2018 at 05:36)</a>:</h4>
<p>A million thanks!</p>

<a name="124705440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124705440" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124705440">Patrick Massot (Apr 06 2018 at 05:36)</a>:</h4>
<p>This looks very nice</p>

<a name="124705459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124705459" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124705459">Patrick Massot (Apr 06 2018 at 05:37)</a>:</h4>
<p>Right now I'm at the train station typing on my phone but I'll try this on the train</p>

<a name="124705561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124705561" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124705561">Patrick Massot (Apr 06 2018 at 05:40)</a>:</h4>
<p>Question about stuff you indicated as belonging to homeos.lean: are those restatements needed because of modeling mistakes I made or is it normal? I don't mind having them but I try to understand how to do things right.</p>

<a name="124705616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124705616" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124705616">Mario Carneiro (Apr 06 2018 at 05:43)</a>:</h4>
<p>It is normal. Since you have a <code>coe_fn</code> instance for homeo, the coercion there is not written by composing other coercions so you have to restate theorems about the underlying function if you want them as simp lemmas or projections</p>

<a name="124705667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124705667" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124705667">Mario Carneiro (Apr 06 2018 at 05:45)</a>:</h4>
<p>I put all the stuff together and PR'd it to your repo: <a href="https://github.com/PatrickMassot/lean-scratchpad/pull/1" target="_blank" title="https://github.com/PatrickMassot/lean-scratchpad/pull/1">https://github.com/PatrickMassot/lean-scratchpad/pull/1</a></p>

<a name="124705762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124705762" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124705762">Patrick Massot (Apr 06 2018 at 05:48)</a>:</h4>
<p>Should I remove this coercion and have a coercion to equiv?</p>

<a name="124705770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124705770" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124705770">Mario Carneiro (Apr 06 2018 at 05:49)</a>:</h4>
<p>I think it is okay, especially if you expect it will get a lot of use. Otherwise the arrows can pile up</p>

<a name="124705945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124705945" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124705945">Patrick Massot (Apr 06 2018 at 05:55)</a>:</h4>
<p>Ok. Thank you very much</p>

<a name="124705948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124705948" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124705948">Patrick Massot (Apr 06 2018 at 05:55)</a>:</h4>
<p>I even managed to merge using the crappy train station wifi</p>

<a name="124706045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124706045" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124706045">Mario Carneiro (Apr 06 2018 at 05:58)</a>:</h4>
<p>let me know if you want an explanation on something I did there</p>

<a name="124714183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124714183" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124714183">Kevin Buzzard (Apr 06 2018 at 10:37)</a>:</h4>
<blockquote>
<p>I tried to describe my problems in <a href="#narrow/stream/113488-general/subject/structure.20vs.20class/near/124574243" title="#narrow/stream/113488-general/subject/structure.20vs.20class/near/124574243">https://leanprover.zulipchat.com/#narrow/stream/113488-general/subject/structure.20vs.20class/near/124574243</a> without code, and then I posted link to my actual code. Then I tried to describe a simplified problem. I don't what I could do better to ask for help</p>
</blockquote>
<p>Write a MWE. I am much more inclined to look at code if I can just cut and paste it and it works first time. Git cloning and then downloading a new mathlib and building everything was a PITA and I couldn't possibly answer a question of the form "why does line 193 not work" without doing all that.</p>

<a name="124714242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124714242" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124714242">Kevin Buzzard (Apr 06 2018 at 10:39)</a>:</h4>
<blockquote>
<p>I even managed to merge using the crappy train station wifi</p>
</blockquote>
<p>git is great for that isn't it.</p>

<a name="124714355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124714355" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124714355">Kevin Buzzard (Apr 06 2018 at 10:42)</a>:</h4>
<blockquote>
<p>Should I remove this coercion and have a coercion to equiv?</p>
</blockquote>
<p>It seemed to me that one problem was you had coes from homeo to perm, from perm to fun and from homeo to fun. You had set it up so that the two maps from homeo to fun were definitionally equal (and if they weren't it would surely have been a nightmare) but even with definitional equality this didn't help with rw. <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Can there be some version of rw which takes definitonal equality into account? i.e. "the user said rw (proof of X = Y) and I can't find X in the goal so I'll now start trying to find some term in the goal which is definitionally equal to X"?</p>

<a name="124714443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/homeo%20equiv%20etc./near/124714443" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/49997homeoequivetc.html#124714443">Chris Hughes (Apr 06 2018 at 10:46)</a>:</h4>
<p>I've read <code>erw</code> does that, but I've never managed to use it.</p>


{% endraw %}

{% include archive_update.html %}