---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/83644continuousfunctiontopitype.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html">continuous function to pi type</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="126969544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969544" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969544">Johan Commelin (May 23 2018 at 09:58)</a>:</h4>
<p>I have no clue how to prove this:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">continuous</span><span class="bp">.</span><span class="n">pi_mk</span> <span class="o">{</span><span class="n">X</span> <span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">Y</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="o">[</span><span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="bp">Π</span><span class="n">i</span><span class="o">,</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">Y</span> <span class="n">i</span><span class="o">)]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span><span class="n">i</span><span class="o">,</span> <span class="n">X</span> <span class="bp">→</span> <span class="o">(</span><span class="n">Y</span> <span class="n">i</span><span class="o">))</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">Π</span><span class="n">i</span><span class="o">,</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">))</span>
<span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">i</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="126969599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969599" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969599">Kevin Buzzard (May 23 2018 at 09:59)</a>:</h4>
<p>Can you prove it in maths?</p>

<a name="126969600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969600" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969600">Kevin Buzzard (May 23 2018 at 09:59)</a>:</h4>
<p>:-)</p>

<a name="126969604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969604" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969604">Kevin Buzzard (May 23 2018 at 09:59)</a>:</h4>
<p>i.e. "is it true"</p>

<a name="126969606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969606" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969606">Johan Commelin (May 23 2018 at 09:59)</a>:</h4>
<p>Unless I made a stupid mistake: yes</p>

<a name="126969651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969651" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969651">Mario Carneiro (May 23 2018 at 10:00)</a>:</h4>
<p>how is the pi topology defined?</p>

<a name="126969652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969652" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969652">Johan Commelin (May 23 2018 at 10:00)</a>:</h4>
<p>It just says that Pi is some sort of categorical product on steroids</p>

<a name="126969654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969654" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969654">Kevin Buzzard (May 23 2018 at 10:00)</a>:</h4>
<p>what Mario said</p>

<a name="126969657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969657">Johan Commelin (May 23 2018 at 10:00)</a>:</h4>
<p>If I have continuous maps to all the factors, I get a continuous map to the Pi</p>

<a name="126969658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969658" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969658">Kevin Buzzard (May 23 2018 at 10:00)</a>:</h4>
<p>(in Lean)</p>

<a name="126969660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969660" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969660">Johan Commelin (May 23 2018 at 10:00)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="k">Pi</span><span class="bp">.</span><span class="n">topological_space</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">t₂</span> <span class="o">:</span> <span class="bp">Π</span><span class="n">a</span><span class="o">,</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">β</span> <span class="n">a</span><span class="o">)]</span>
 <span class="o">:</span> <span class="n">topological_space</span> <span class="o">(</span><span class="bp">Π</span><span class="n">a</span><span class="o">,</span> <span class="n">β</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="err">⨆</span><span class="n">a</span><span class="o">,</span> <span class="n">topological_space</span><span class="bp">.</span><span class="n">induced</span> <span class="o">(</span><span class="bp">λ</span><span class="n">f</span><span class="o">,</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">t₂</span> <span class="n">a</span><span class="o">)</span>
</pre></div>

<a name="126969668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969668">Mario Carneiro (May 23 2018 at 10:01)</a>:</h4>
<p>so look for theorems about continuity on induced</p>

<a name="126969677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969677" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969677">Johan Commelin (May 23 2018 at 10:01)</a>:</h4>
<p>There are loads of those... but how do I deal with the <code>⨆a,</code> that is in front?</p>

<a name="126969678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969678" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969678">Mario Carneiro (May 23 2018 at 10:01)</a>:</h4>
<p>look for continuity on a Sup</p>

<a name="126969728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969728">Johan Commelin (May 23 2018 at 10:02)</a>:</h4>
<p>there is only continuity for <code>sup</code>, not <code>Sup</code></p>

<a name="126969736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969736" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969736">Mario Carneiro (May 23 2018 at 10:03)</a>:</h4>
<p>I think it's called that... serach for the bigcup</p>

<a name="126969740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969740">Johan Commelin (May 23 2018 at 10:03)</a>:</h4>
<p>I'm already down 5 rabbit holes, I really hope I don't need to go down this one as well...</p>

<a name="126969744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969744" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969744">Johan Commelin (May 23 2018 at 10:03)</a>:</h4>
<p>Search for <code>⨆</code> gives <code>No results</code> in <code>continuity.lean</code></p>

<a name="126969801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969801" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969801">Mario Carneiro (May 23 2018 at 10:04)</a>:</h4>
<p>hm, looks like it is missing from the list at <code>continuity.lean</code></p>

<a name="126969827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969827" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969827">Johan Commelin (May 23 2018 at 10:05)</a>:</h4>
<p>Right, there is constructors for products of two topological spaces, and continous maps towards them, etc... but for Pi types this seems missing. And I don't know exactly how to prove this stuff...</p>

<a name="126969872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969872" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969872">Johan Commelin (May 23 2018 at 10:06)</a>:</h4>
<p>/me doesn't know anything about <code>Sup</code> and friends</p>

<a name="126969877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969877" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969877">Mario Carneiro (May 23 2018 at 10:06)</a>:</h4>
<p>okay, so use the existing theorems as guides and write your own version for continuity on supr</p>

<a name="126969887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969887" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969887">Johan Commelin (May 23 2018 at 10:06)</a>:</h4>
<p>\me goes down rabbit hole # 6</p>

<a name="126969888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969888" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969888">Mario Carneiro (May 23 2018 at 10:06)</a>:</h4>
<p>(or I can, if this is going too far afield)</p>

<a name="126969895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969895" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969895">Mario Carneiro (May 23 2018 at 10:06)</a>:</h4>
<p>I'm just showing you what I would do</p>

<a name="126969908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969908" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969908">Johan Commelin (May 23 2018 at 10:07)</a>:</h4>
<p>Well, I'm trying to prove that the face map between two standard simplices is continuous...</p>

<a name="126969975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126969975" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126969975">Johan Commelin (May 23 2018 at 10:08)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> At the moment, I don't even know how to write the statement for <code>Sup</code></p>

<a name="126970325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126970325" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126970325">Mario Carneiro (May 23 2018 at 10:20)</a>:</h4>
<p>here you go:</p>
<div class="codehilite"><pre><span></span>lemma continuous_Sup_dom {t₁ : set (tspace α)} {t₂ : tspace β}
  {t : tspace α} (h₁ : t ∈ t₁) : cont t t₂ f → cont (Sup t₁) t₂ f :=
continuous_le_dom (le_Sup h₁)

lemma continuous_Sup_rng {t₁ : tspace α} {t₂ : set (tspace β)}
  (h : ∀t∈t₂, cont t₁ t f) : cont t₁ (Sup t₂) f :=
continuous_Inf_rng
  (λ t ht, show t ≤ coinduced f t₁, from h t ht)
  continuous_coinduced_rng

lemma continuous_supr_dom {t₁ : ι → tspace α} {t₂ : tspace β}
  {i : ι} : cont (t₁ i) t₂ f → cont (supr t₁) t₂ f :=
continuous_Sup_dom ⟨i, rfl⟩

lemma continuous_supr_rng {t₁ : tspace α} {t₂ : ι → tspace β}
  (h : ∀i, cont t₁ (t₂ i) f) : cont t₁ (supr t₂) f :=
continuous_Sup_rng $ assume t ⟨i, (t_eq : t = t₂ i)⟩, t_eq.symm ▸ h i
</pre></div>

<a name="126970334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126970334" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126970334">Mario Carneiro (May 23 2018 at 10:20)</a>:</h4>
<p>I just copied the Inf stuff and dualized everything</p>

<a name="126970571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126970571" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126970571">Johan Commelin (May 23 2018 at 10:29)</a>:</h4>
<p>Ok, thanks!</p>

<a name="126970576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126970576" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126970576">Johan Commelin (May 23 2018 at 10:29)</a>:</h4>
<p>Let me see if I can continue with rabbit hole # 5 (-;</p>

<a name="126971289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126971289" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126971289">Johan Commelin (May 23 2018 at 10:53)</a>:</h4>
<p>Hurray!</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">continuous</span><span class="bp">.</span><span class="n">pi_mk</span> <span class="o">{</span><span class="n">X</span> <span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">Y</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="o">[</span><span class="n">t₁</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">t₂</span> <span class="o">:</span> <span class="bp">Π</span><span class="n">i</span><span class="o">,</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">Y</span> <span class="n">i</span><span class="o">)]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span><span class="n">i</span><span class="o">,</span> <span class="n">X</span> <span class="bp">→</span> <span class="o">(</span><span class="n">Y</span> <span class="n">i</span><span class="o">))</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">Π</span><span class="n">i</span><span class="o">,</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">))</span>
<span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">i</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="k">let</span> <span class="n">YY</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">Π</span><span class="n">i</span><span class="o">,</span> <span class="n">Y</span> <span class="n">i</span><span class="o">),</span>
<span class="n">apply</span> <span class="n">continuous_Sup_rng</span><span class="o">,</span>
<span class="n">intros</span> <span class="n">t</span> <span class="n">ht</span><span class="o">,</span>
<span class="n">cases</span> <span class="n">ht</span> <span class="k">with</span> <span class="n">i</span> <span class="n">hi</span><span class="o">,</span>
<span class="n">simp</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">hi</span><span class="o">,</span>
<span class="n">apply</span> <span class="n">continuous_induced_rng</span><span class="o">,</span>
<span class="n">unfold</span> <span class="n">function</span><span class="bp">.</span><span class="n">comp</span><span class="o">,</span>
<span class="n">exact</span> <span class="n">H</span> <span class="n">i</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="126972217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126972217" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126972217">Johan Commelin (May 23 2018 at 11:23)</a>:</h4>
<p>Ok, so now I'm stuck with this MWE:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">continuous_sums</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="o">((</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">univ</span><span class="bp">.</span><span class="n">sum</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="126972240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126972240" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126972240">Johan Commelin (May 23 2018 at 11:24)</a>:</h4>
<p>Whatever I try, I'm pulled hard into all sorts of <code>foldr</code> stuff. And I'm completely out of my comfort zone.</p>

<a name="126972265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126972265" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126972265">Mario Carneiro (May 23 2018 at 11:24)</a>:</h4>
<p>that's not a trivial theorem</p>

<a name="126972267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126972267" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126972267">Johan Commelin (May 23 2018 at 11:25)</a>:</h4>
<p>I would like to mumble some think like... well, addition is continuous... if you repeatedly add, you get continuity by induction</p>

<a name="126972274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126972274" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126972274">Johan Commelin (May 23 2018 at 11:25)</a>:</h4>
<p>Can I <code>foldr</code> the continuity proof off <code>add</code>?</p>

<a name="126972276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126972276" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126972276">Mario Carneiro (May 23 2018 at 11:25)</a>:</h4>
<p>I guess you can prove it by induction on <code>n</code>, you will need to show that <code>fin (succ n) -&gt; R</code> is homeomorphic to <code>R x (fin n -&gt; R)</code></p>

<a name="126972319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126972319" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126972319">Johan Commelin (May 23 2018 at 11:27)</a>:</h4>
<p>To link back to the discussion with Kevin, from about an hour ago... do you think this could be made into a trivial theorem?</p>

<a name="126972322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126972322" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126972322">Mario Carneiro (May 23 2018 at 11:27)</a>:</h4>
<p>no</p>

<a name="126972365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126972365" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126972365">Mario Carneiro (May 23 2018 at 11:28)</a>:</h4>
<p>okay, maybe that's too strong, you might be able to prove it by induction on the set instead</p>

<a name="126972371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126972371" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126972371">Johan Commelin (May 23 2018 at 11:29)</a>:</h4>
<p>that sounds closer to what I wanted to mumble</p>

<a name="126972379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126972379" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126972379">Mario Carneiro (May 23 2018 at 11:29)</a>:</h4>
<p>in that case you want to use <code>finset.induction_on</code></p>

<a name="126972424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126972424" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126972424">Mario Carneiro (May 23 2018 at 11:30)</a>:</h4>
<p>and the IH says that a sum of continuous functions over set s is continuous</p>

<a name="126972492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126972492" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126972492">Johan Commelin (May 23 2018 at 11:33)</a>:</h4>
<p>Ok, I'm going to try this. Thanks!</p>

<a name="126974780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126974780" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126974780">Patrick Massot (May 23 2018 at 12:43)</a>:</h4>
<p>Johan, you may already know, but just in case: there very easy clean up steps you can run on such proofs. <code>YY</code> is never used. <code>unfold</code> is actually much less useful that one thinks in the beginning, so I always try to remove all <code>unfold</code> once a proof work. And then we always try to get rid of <code>simp</code> in the middle of proofs. The result is:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">continuous</span><span class="bp">.</span><span class="n">pi_mk</span> <span class="o">{</span><span class="n">X</span> <span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">Y</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="o">[</span><span class="n">t₁</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">t₂</span> <span class="o">:</span> <span class="bp">Π</span><span class="n">i</span><span class="o">,</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">Y</span> <span class="n">i</span><span class="o">)]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span><span class="n">i</span><span class="o">,</span> <span class="n">X</span> <span class="bp">→</span> <span class="o">(</span><span class="n">Y</span> <span class="n">i</span><span class="o">))</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">Π</span><span class="n">i</span><span class="o">,</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">))</span>
<span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">i</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">apply</span> <span class="n">continuous_Sup_rng</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">t</span> <span class="n">ht</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">ht</span> <span class="k">with</span> <span class="n">i</span> <span class="n">hi</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">hi</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">continuous_induced_rng</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">H</span> <span class="n">i</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="126974828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126974828" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126974828">Patrick Massot (May 23 2018 at 12:44)</a>:</h4>
<p>Out of curiosity, I also tried to build a term proof, but haven't succeeded because of the mysterious rewrite in the middle (which rewrites implicit arguments, which has the weird effect of not changing the visible goal)</p>

<a name="126974838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126974838" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126974838">Patrick Massot (May 23 2018 at 12:45)</a>:</h4>
<p>I can't get more obfuscated than:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">continuous</span><span class="bp">.</span><span class="n">pi_mk</span> <span class="o">{</span><span class="n">X</span> <span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">Y</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="o">[</span><span class="n">t₁</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">t₂</span> <span class="o">:</span> <span class="bp">Π</span><span class="n">i</span><span class="o">,</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">Y</span> <span class="n">i</span><span class="o">)]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span><span class="n">i</span><span class="o">,</span> <span class="n">X</span> <span class="bp">→</span> <span class="o">(</span><span class="n">Y</span> <span class="n">i</span><span class="o">))</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">Π</span><span class="n">i</span><span class="o">,</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">))</span>
<span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">i</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">continuous_Sup_rng</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">t</span> <span class="n">ht</span><span class="o">,</span> <span class="k">match</span> <span class="n">ht</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">i</span><span class="o">,</span> <span class="n">hi</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">hi</span> <span class="bp">;</span> <span class="n">apply</span> <span class="n">continuous_induced_rng</span> <span class="bp">;</span> <span class="n">exact</span> <span class="o">(</span><span class="n">H</span> <span class="n">i</span><span class="o">)</span> <span class="kn">end</span>
</pre></div>

<a name="126974960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126974960" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126974960">Johannes Hölzl (May 23 2018 at 12:49)</a>:</h4>
<p>For the sum proof: its easiest to generalize for finset, and then go from list to multiset to finset. I will add this to mathlib:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">continuous_supr_rng</span>
  <span class="o">{</span><span class="n">ι</span> <span class="o">:</span> <span class="n">Sort</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">t₁</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">t₂</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">topological_space</span> <span class="n">β</span><span class="o">}</span>
  <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">i</span><span class="o">,</span> <span class="bp">@</span><span class="n">continuous</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">t₁</span> <span class="o">(</span><span class="n">t₂</span> <span class="n">i</span><span class="o">)</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">@</span><span class="n">continuous</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">t₁</span> <span class="o">(</span><span class="n">lattice</span><span class="bp">.</span><span class="n">supr</span> <span class="n">t₂</span><span class="o">)</span> <span class="n">f</span> <span class="o">:=</span>
<span class="n">continuous_iff_le_coinduced</span><span class="bp">.</span><span class="mi">2</span> <span class="err">$</span> <span class="n">lattice</span><span class="bp">.</span><span class="n">supr_le</span> <span class="err">$</span> <span class="k">assume</span> <span class="n">i</span><span class="o">,</span> <span class="n">continuous_iff_le_coinduced</span><span class="bp">.</span><span class="mi">1</span> <span class="o">(</span><span class="n">h</span> <span class="n">i</span><span class="o">)</span>

<span class="kn">lemma</span> <span class="n">continuous</span><span class="bp">.</span><span class="n">pi_mk</span>
  <span class="o">{</span><span class="n">X</span> <span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">Y</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">t₁</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">t₂</span> <span class="o">:</span> <span class="bp">Π</span><span class="n">i</span><span class="o">,</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">Y</span> <span class="n">i</span><span class="o">)]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span><span class="n">i</span><span class="o">,</span> <span class="n">X</span> <span class="bp">→</span> <span class="o">(</span><span class="n">Y</span> <span class="n">i</span><span class="o">))</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">Π</span><span class="n">i</span><span class="o">,</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">i</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">continuous_supr_rng</span> <span class="err">$</span> <span class="k">assume</span> <span class="n">i</span><span class="o">,</span> <span class="n">continuous_induced_rng</span> <span class="err">$</span> <span class="n">H</span> <span class="n">i</span>

<span class="kn">lemma</span> <span class="n">continuous_list_sum</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">[</span><span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_add_monoid</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">:</span>
  <span class="bp">∀</span><span class="n">l</span><span class="o">:</span><span class="n">list</span> <span class="n">γ</span><span class="o">,</span> <span class="o">(</span><span class="bp">∀</span><span class="n">c</span><span class="err">∈</span><span class="n">l</span><span class="o">,</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">f</span> <span class="n">c</span><span class="o">))</span> <span class="bp">→</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span><span class="n">a</span><span class="o">,</span> <span class="o">(</span><span class="n">l</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span><span class="n">c</span><span class="o">,</span> <span class="n">f</span> <span class="n">c</span> <span class="n">a</span><span class="o">))</span><span class="bp">.</span><span class="n">sum</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">[]</span>       <span class="bp">_</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">continuous_const</span><span class="o">]</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">f</span> <span class="bp">::</span> <span class="n">l</span><span class="o">)</span> <span class="n">h</span> <span class="o">:=</span>
  <span class="k">begin</span>
    <span class="n">simp</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">continuous_add</span>
      <span class="o">(</span><span class="n">h</span> <span class="n">f</span> <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">mem_cons_self</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">))</span>
      <span class="o">(</span><span class="n">continuous_list_sum</span> <span class="n">l</span> <span class="o">(</span><span class="k">assume</span> <span class="n">c</span> <span class="n">hc</span><span class="o">,</span> <span class="n">h</span> <span class="n">c</span> <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">mem_cons_of_mem</span> <span class="bp">_</span> <span class="n">hc</span><span class="o">)))</span>
  <span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">continuous_multiset_sum</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">[</span><span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_add_monoid</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">multiset</span> <span class="n">γ</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">∀</span><span class="n">c</span><span class="err">∈</span><span class="n">s</span><span class="o">,</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">f</span> <span class="n">c</span><span class="o">))</span> <span class="bp">→</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span><span class="n">a</span><span class="o">,</span> <span class="o">(</span><span class="n">s</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span><span class="n">c</span><span class="o">,</span> <span class="n">f</span> <span class="n">c</span> <span class="n">a</span><span class="o">))</span><span class="bp">.</span><span class="n">sum</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">quot</span><span class="bp">.</span><span class="n">induction_on</span> <span class="n">s</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simp</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">continuous_list_sum</span>

<span class="kn">lemma</span> <span class="n">continuous_finset_sum</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">[</span><span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_add_monoid</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">γ</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">∀</span><span class="n">c</span><span class="err">∈</span><span class="n">s</span><span class="o">,</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">f</span> <span class="n">c</span><span class="o">))</span> <span class="bp">→</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span><span class="n">a</span><span class="o">,</span> <span class="n">s</span><span class="bp">.</span><span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span><span class="n">c</span><span class="o">,</span> <span class="n">f</span> <span class="n">c</span> <span class="n">a</span><span class="o">))</span> <span class="o">:=</span>
<span class="n">continuous_multiset_sum</span> <span class="bp">_</span>
</pre></div>

<a name="126975014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126975014" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126975014">Johan Commelin (May 23 2018 at 12:50)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> Yes, you are completely right. But it seems the work is now already done (-;</p>

<a name="126975238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126975238" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126975238">Mario Carneiro (May 23 2018 at 12:57)</a>:</h4>
<p>you can see how Johannes built the term proof for <code>pi_mk</code>; the key is to use <code>continuous_supr_rng</code> not <code>continuous_Sup_rng</code> because the definition uses <code>supr</code> (the indexed supremum) not <code>Sup</code> (the set supremum). In fact <code>supr</code> is defined in terms of <code>Sup</code>, but if you apply the wrong theorem it unfolds this definition and things get harder.</p>

<a name="126975550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126975550" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126975550">Johan Commelin (May 23 2018 at 13:06)</a>:</h4>
<p>Yes, I will take a closer look. I think I can learn a lot from how Johannes improved my kludge</p>

<a name="126975794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126975794" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126975794">Patrick Massot (May 23 2018 at 13:13)</a>:</h4>
<p>Sure. But this is too efficient in a sense. My message was focused on easy local clean up, that you can actually do without any understanding of the proof. Of course this is only the first step. Really efficient proofs like Johannes' require actual thinking</p>

<a name="126975891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126975891" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126975891">Mario Carneiro (May 23 2018 at 13:15)</a>:</h4>
<p>you can also look at my term proof of <code>continuous_supr_rng</code>, which uses the <code>\t</code> for rewriting</p>

<a name="126975965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126975965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126975965">Patrick Massot (May 23 2018 at 13:17)</a>:</h4>
<p>I'm a bit frustrated by this \t thing. I know it's somehow the term version of <code>rw</code> and I see it everywhere in mathlib, but I was almost never able to use it</p>

<a name="126975978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126975978" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126975978">Mario Carneiro (May 23 2018 at 13:17)</a>:</h4>
<p>I admit it was a bit delicate for me at first</p>

<a name="126976035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126976035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126976035">Mario Carneiro (May 23 2018 at 13:18)</a>:</h4>
<p>it is so much weaker than the lean 2 version, it fails whenever the expected type or the thing to rewrite with has metavariables</p>

<a name="126976056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126976056" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126976056">Johan Commelin (May 23 2018 at 13:19)</a>:</h4>
<p>Anyway, I just proved that the face map between standard simplices is continuous!</p>

<a name="126976057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126976057" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126976057">Johan Commelin (May 23 2018 at 13:19)</a>:</h4>
<p>The proof is not cleaned up. But it works (-;</p>

<a name="126976067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126976067" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126976067">Mario Carneiro (May 23 2018 at 13:20)</a>:</h4>
<p>but it's often just the thing when you want to rewrite with an equality in the context</p>

<a name="126976197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126976197" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126976197">Patrick Massot (May 23 2018 at 13:23)</a>:</h4>
<p>What about my attempt? Can you use \t there? (without switching to <code>continuous_supr_rng</code>)</p>

<a name="126976271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126976271" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126976271">Mario Carneiro (May 23 2018 at 13:24)</a>:</h4>
<p>yes, the proof should be almost identical to the one I pointed at</p>

<a name="126976317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126976317" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126976317">Johan Commelin (May 23 2018 at 13:25)</a>:</h4>
<p>Ok, like I said, the proofs are still ugly. But here goes nothing: <a href="https://github.com/jcommelin/mathlib/commit/fec9db2028bea163352f574055dad44029d04788" target="_blank" title="https://github.com/jcommelin/mathlib/commit/fec9db2028bea163352f574055dad44029d04788">https://github.com/jcommelin/mathlib/commit/fec9db2028bea163352f574055dad44029d04788</a></p>

<a name="126976321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126976321" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126976321">Mario Carneiro (May 23 2018 at 13:25)</a>:</h4>
<div class="codehilite"><pre><span></span>lemma continuous.pi_mk
  {X I : Type*} {Y : I → Type*} [t₁ : topological_space X] [t₂ : Πi, topological_space (Y i)]
  (f : Πi, X → (Y i)) (H : Πi, continuous (f i)) :
  continuous (λ x i, f i x) :=
continuous_Sup_rng $ assume t ⟨i, e⟩, e.symm ▸ continuous_induced_rng (H i)
</pre></div>

<a name="126980416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126980416" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126980416">Patrick Massot (May 23 2018 at 15:06)</a>:</h4>
<p>Hum, I think I stupidly missed the <code>eq.symm</code> when I tried</p>

<a name="126981716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126981716" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126981716">Johannes Hölzl (May 23 2018 at 15:31)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> I forgot that there is already <code>tendsto_sum</code>, so you could also derive <code>continuous_finset_sum</code> from this.<br>
Anyway, this all is now in mathlib.</p>

<a name="126985262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/continuous%20function%20to%20pi%20type/near/126985262" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/83644continuousfunctiontopitype.html#126985262">Johan Commelin (May 23 2018 at 16:54)</a>:</h4>
<p>Thanks a lot! I will merge into my fork. Once I clean my stuff up, I think I will make a PR</p>


{% endraw %}
