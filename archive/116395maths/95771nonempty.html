---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/95771nonempty.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/95771nonempty.html">nonempty</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="159940871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonempty/near/159940871" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95771nonempty.html#159940871">Patrick Massot (Mar 04 2019 at 19:12)</a>:</h4>
<p>Is it evil to write </p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">nonempty_of_zero</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">nonempty</span> <span class="n">α</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="mi">0</span><span class="bp">⟩</span>

<span class="kn">instance</span> <span class="n">nonempty_of_one</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">has_one</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">nonempty</span> <span class="n">α</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="mi">1</span><span class="bp">⟩</span>
</pre></div>


<p>I doesn't seem to be there already, and that makes me nervous</p>

<a name="159942538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonempty/near/159942538" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95771nonempty.html#159942538">Kevin Buzzard (Mar 04 2019 at 19:30)</a>:</h4>
<p>The thing that makes me nervous is that you don't know which one Lean will find first in general, and the CS people will get edgy if something with a zero is proved non-empty by using a 1. I tried it with a 37 once and they didn't seem to like it. I guess 1 is a lot closer to zero but still I'm not sure they're going to be happy...</p>

<a name="159942986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonempty/near/159942986" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95771nonempty.html#159942986">Chris Hughes (Mar 04 2019 at 19:35)</a>:</h4>
<p>I PRed that once and was told it was evil.</p>

<a name="159942998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonempty/near/159942998" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95771nonempty.html#159942998">Gabriel Ebner (Mar 04 2019 at 19:36)</a>:</h4>
<p>It should be fine to have non-canonical instances here, since <code>nonempty</code> is a Prop.  I wouldn't do this for <code>inhabited</code>, because then you run into all kinds of problems (which number is <code>default ℕ</code>..).</p>

<a name="159945384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonempty/near/159945384" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95771nonempty.html#159945384">Mario Carneiro (Mar 04 2019 at 20:03)</a>:</h4>
<p>What makes me nervous about this is it makes <code>nonempty</code> searches traverse the whole hierarchy</p>

<a name="159949770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonempty/near/159949770" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95771nonempty.html#159949770">Patrick Massot (Mar 04 2019 at 20:54)</a>:</h4>
<p>Ok, I feared something like this. What about defining a <code>nonmepty</code> instance for modules? vector spaces? please?</p>

<a name="159962758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonempty/near/159962758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95771nonempty.html#159962758">Mario Carneiro (Mar 04 2019 at 23:48)</a>:</h4>
<p>I'm not saying you shouldn't do it, try it and find out if it's a problem</p>

<a name="187731976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonempty/near/187731976" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95771nonempty.html#187731976">Patrick Massot (Feb 08 2020 at 21:22)</a>:</h4>
<p>I just bumped mathlib in the perfectoid project and I really don't like <a href="https://github.com/leanprover-community/mathlib/pull/1954" target="_blank" title="https://github.com/leanprover-community/mathlib/pull/1954">https://github.com/leanprover-community/mathlib/pull/1954</a>. It makes every statement ugly to save a couple of keystrokes in proofs. I know I had very little time for PR review since Christmas, but that PR was really game changing and was merged in one day.</p>

<a name="187732031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonempty/near/187732031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95771nonempty.html#187732031">Patrick Massot (Feb 08 2020 at 21:24)</a>:</h4>
<p>I think readability of statements is really important, even when proofs are unreadable.</p>

<a name="187732264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonempty/near/187732264" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95771nonempty.html#187732264">Patrick Massot (Feb 08 2020 at 21:32)</a>:</h4>
<p>Also, it would be nice to have a log of breaking changes. Currently it's pretty painful to find why code is no longer working. That <code>nonempty</code> thing is obviously breaking <em>lots</em> of proofs, but now I'm chasing what happened to <code>set.pointwise_mul_action</code>.</p>

<a name="187734238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonempty/near/187734238" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95771nonempty.html#187734238">Yury G. Kudryashov (Feb 08 2020 at 22:42)</a>:</h4>
<p>I'm sorry for breaking your code. After reaction to <a href="https://github.com/leanprover-community/mathlib/issues/1779" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/1779">#1779</a> I assumed that migration from <code>≠∅</code> to <code>s.nonempty</code> would be a desired change. If needed, I can revert everything back to <code>≠∅</code>. Though I prefer the <code>s.nonempty</code> version, this is not a strong preference.<br>
Let's also wait at least for <span class="user-mention" data-user-id="111080">@Floris van Doorn</span> and <span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> who approved this PR.</p>


{% endraw %}

{% include archive_update.html %}