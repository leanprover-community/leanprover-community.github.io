---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/80921Dirichletconvolution.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/80921Dirichletconvolution.html">Dirichlet convolution</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="132182031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Dirichlet%20convolution/near/132182031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/80921Dirichletconvolution.html#132182031">Elliott Macneil (Aug 15 2018 at 15:43)</a>:</h4>
<p>I'm trying to define the Dirichlet convolution on two arithmetic functions f,g but I'm having difficulty with writing the following sum in Lean.</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="normal">Σ</mi><mrow><mi>d</mi><mo>∣</mo><mi>n</mi></mrow></msub><mi>f</mi><mo>(</mo><mi>d</mi><mo>)</mo><mi>g</mi><mo>(</mo><mi>n</mi><mi mathvariant="normal">/</mi><mi>d</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\Sigma_{d \mid n } f(d) g(n/d)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.1052em;vertical-align:-0.3551999999999999em;"></span><span class="base"><span class="mord"><span class="mord mathrm">Σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">d</span><span class="mrel mtight">∣</span><span class="mord mathit mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"></span></span></span></span></span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">d</span><span class="mclose">)</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mord mathrm">/</span><span class="mord mathit">d</span><span class="mclose">)</span></span></span></span></span></p>
<p>Could anyone possibly  write this in Lean?</p>

<a name="132182207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Dirichlet%20convolution/near/132182207" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/80921Dirichletconvolution.html#132182207">Kevin Buzzard (Aug 15 2018 at 15:46)</a>:</h4>
<p>Elliott I pushed a function which did this this morning.</p>

<a name="132182215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Dirichlet%20convolution/near/132182215" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/80921Dirichletconvolution.html#132182215">Kevin Buzzard (Aug 15 2018 at 15:46)</a>:</h4>
<p>What does this mean if n=0?</p>

<a name="132182218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Dirichlet%20convolution/near/132182218" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/80921Dirichletconvolution.html#132182218">Kevin Buzzard (Aug 15 2018 at 15:47)</a>:</h4>
<p>I stuck to <code>pnat</code></p>

<a name="132182242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Dirichlet%20convolution/near/132182242" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/80921Dirichletconvolution.html#132182242">Kevin Buzzard (Aug 15 2018 at 15:47)</a>:</h4>
<p><a href="https://github.com/ImperialCollegeLondon/xena-UROP-2018/blob/master/src/M3P14/sum_over_divisors.lean" target="_blank" title="https://github.com/ImperialCollegeLondon/xena-UROP-2018/blob/master/src/M3P14/sum_over_divisors.lean">https://github.com/ImperialCollegeLondon/xena-UROP-2018/blob/master/src/M3P14/sum_over_divisors.lean</a></p>

<a name="132182326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Dirichlet%20convolution/near/132182326" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/80921Dirichletconvolution.html#132182326">Kevin Buzzard (Aug 15 2018 at 15:49)</a>:</h4>
<p>so it's <code>\lam (n : pnat), divisor_sum (\lam d, f d * g (n / d)) n</code></p>

<a name="132182441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Dirichlet%20convolution/near/132182441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/80921Dirichletconvolution.html#132182441">Mario Carneiro (Aug 15 2018 at 15:51)</a>:</h4>
<div class="codehilite"><pre><span></span>lemma mem_factors_iff_divides (d : ℕ+) (e : ℕ) : e ∈ factors d ↔ e ∣ d :=
by simp [factors, -add_comm, nat.lt_succ_iff];
   exact and_iff_right_of_imp (le_of_dvd d.2)
</pre></div>

<a name="132182491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Dirichlet%20convolution/near/132182491" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/80921Dirichletconvolution.html#132182491">Mario Carneiro (Aug 15 2018 at 15:52)</a>:</h4>
<p>see, <code>logic.basic</code> is useful</p>

<a name="132182531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Dirichlet%20convolution/near/132182531" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/80921Dirichletconvolution.html#132182531">Mario Carneiro (Aug 15 2018 at 15:53)</a>:</h4>
<p>you can also define <code>factors</code> using <code>finset.filter</code> to avoid the nodup proof</p>

<a name="132185364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Dirichlet%20convolution/near/132185364" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/80921Dirichletconvolution.html#132185364">Kevin Buzzard (Aug 15 2018 at 16:45)</a>:</h4>
<p>Thanks and thanks! I was surprised that the divisors function (sending a pnat to a finset of its divisors) wasn't there, but Chris said he hadn't seen it (he had seen <code>factors</code> which in my mind is synonymous, however he said <code>factors</code> was the list of prime factors of n, which is not how the word is usually used in mathematics: factor does not imply prime).</p>

<a name="132185538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Dirichlet%20convolution/near/132185538" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/80921Dirichletconvolution.html#132185538">Mario Carneiro (Aug 15 2018 at 16:49)</a>:</h4>
<p>I had the same train of thought</p>

<a name="132185596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Dirichlet%20convolution/near/132185596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/80921Dirichletconvolution.html#132185596">Mario Carneiro (Aug 15 2018 at 16:50)</a>:</h4>
<p>maybe it should be called <code>factorization</code></p>

<a name="132185612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Dirichlet%20convolution/near/132185612" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/80921Dirichletconvolution.html#132185612">Mario Carneiro (Aug 15 2018 at 16:51)</a>:</h4>
<p>note that it is not just the set of prime factors, it is like a multiset</p>

<a name="132185688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Dirichlet%20convolution/near/132185688" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/80921Dirichletconvolution.html#132185688">Kevin Buzzard (Aug 15 2018 at 16:53)</a>:</h4>
<p>I should use simp for iff statements more...</p>

<a name="132191813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Dirichlet%20convolution/near/132191813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/80921Dirichletconvolution.html#132191813">Elliott Macneil (Aug 15 2018 at 18:37)</a>:</h4>
<p>Thanks for the help!</p>


{% endraw %}
