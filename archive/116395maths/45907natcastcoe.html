---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/45907natcastcoe.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/45907natcastcoe.html">nat.cast_coe</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="162454885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.cast_coe/near/162454885" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45907natcastcoe.html#162454885">Joe Hendrix (Apr 03 2019 at 18:27)</a>:</h4>
<p>We've run into performance problems when <code>nat.cast_coe</code> is triggered when we'd prefer to not have implicit coercisions.   I'd like to hide the <code>nat.cast_coe</code> instance from Lean to avoid this implicit conversion.  Is there a way to hide instances?  Alternatively, would the mathlib folks consider turning nat.cast_coe into an ordinary declaration, and requiring users explicitly enable it with something like <code>local attribute [instance] nat.cast_coe</code>?</p>

<a name="162455380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.cast_coe/near/162455380" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45907natcastcoe.html#162455380">Johan Commelin (Apr 03 2019 at 18:32)</a>:</h4>
<p>I would call that <em>explicit</em> enabling.</p>

<a name="162457540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.cast_coe/near/162457540" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45907natcastcoe.html#162457540">Joe Hendrix (Apr 03 2019 at 18:52)</a>:</h4>
<p>Sorry, yes edited request.</p>

<a name="162917442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.cast_coe/near/162917442" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45907natcastcoe.html#162917442">Keeley Hoek (Apr 09 2019 at 14:48)</a>:</h4>
<p>You can do <code>attribute [-instance] nat.cast_coe</code> to turn it off in-scope</p>

<a name="162917641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.cast_coe/near/162917641" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45907natcastcoe.html#162917641">Johan Commelin (Apr 09 2019 at 14:50)</a>:</h4>
<p>Brilliant! That is going to be useful</p>

<a name="162935063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.cast_coe/near/162935063" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45907natcastcoe.html#162935063">Joe Hendrix (Apr 09 2019 at 18:09)</a>:</h4>
<p>I tried</p>
<div class="codehilite"><pre><span></span>instance nat.cast_coe : has_coe nat string := sorry
local attribute [-instance] nat.cast_coe
</pre></div>


<p>I get <code>test.lean:2:0: error: cannot remove attribute [instance]</code>.  This is with lean3.4.2, commit 1229f9b2d7f0.</p>


{% endraw %}
