---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/45571generalizingpadicval.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html">generalizing padic_val</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="147952749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147952749" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147952749">Chris Hughes (Nov 19 2018 at 08:48)</a>:</h4>
<p>In my proof of FTA, I need the highest power of a polynomial that divides another polynomial. Should <code>padic_val</code> be generalized to do this. What's the correct generality for this function?</p>

<a name="147952773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147952773" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147952773">Mario Carneiro (Nov 19 2018 at 08:49)</a>:</h4>
<p>You should be able to say this in any comm semiring (where dvd is defined)</p>

<a name="147952824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147952824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147952824">Johan Commelin (Nov 19 2018 at 08:50)</a>:</h4>
<p>But maybe UFD's are the right level of generality</p>

<a name="147952829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147952829" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147952829">Mario Carneiro (Nov 19 2018 at 08:50)</a>:</h4>
<p>no, some of this you want to be able to state even without ufd</p>

<a name="147952832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147952832" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147952832">Mario Carneiro (Nov 19 2018 at 08:50)</a>:</h4>
<p>for example you can use it to define a ufd</p>

<a name="147952846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147952846" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147952846">Mario Carneiro (Nov 19 2018 at 08:51)</a>:</h4>
<p>plus that's a hell of a proof obligation for using the notation</p>

<a name="147952992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147952992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147952992">Kevin Buzzard (Nov 19 2018 at 08:55)</a>:</h4>
<p>The theory really takes off in a ring where the notions of prime and irreducible elements coincide; then for r an irreducible element of a comm ring with this property, the "r-adic valuation" is very well-behaved (e.g. it's additive). Even for a ring like <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi mathvariant="double-struck">Z</mi></mrow><mo>[</mo><mo>(</mo><mo>−</mo><mn>5</mn><msup><mo>)</mo><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup><mo>]</mo><mo>:</mo><mo>=</mo><mo>{</mo><mspace width="0.16667em"></mspace><mi>a</mi><mo>+</mo><mi>b</mi><mo>(</mo><mo>−</mo><mn>5</mn><msup><mo>)</mo><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup><mspace width="0.16667em"></mspace><mo>∣</mo><mspace width="0.16667em"></mspace><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo>∈</mo><mrow><mi mathvariant="double-struck">Z</mi></mrow><mspace width="0.16667em"></mspace><mo>}</mo></mrow><annotation encoding="application/x-tex">\mathbb{Z}[(-5)^{1/2}]:=\{\,a+b(-5)^{1/2}\,\mid\,a,b\in\mathbb{Z}\,\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.138em;vertical-align:-0.25em;"></span><span class="base"><span class="mord"><span class="mord mathbb">Z</span></span><span class="mopen">[</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathrm">5</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">1</span><span class="mord mathrm mtight">/</span><span class="mord mathrm mtight">2</span></span></span></span></span></span></span></span></span><span class="mclose">]</span><span class="mrel">:</span><span class="mrel">=</span><span class="mopen">{</span><span class="mord mathit"><span class="mspace thinspace"></span><span class="mord mathit">a</span></span><span class="mbin">+</span><span class="mord mathit">b</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathrm">5</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">1</span><span class="mord mathrm mtight">/</span><span class="mord mathrm mtight">2</span></span></span></span></span></span></span></span></span><span class="mrel"><span class="mspace thinspace"></span><span class="mrel">∣</span></span><span class="mord mathit"><span class="mspace thinspace"></span><span class="mord mathit">a</span></span><span class="mpunct">,</span><span class="mord mathit">b</span><span class="mrel">∈</span><span class="mord"><span class="mord mathbb">Z</span></span><span class="mclose"><span class="mspace thinspace"></span><span class="mclose">}</span></span></span></span></span> the 2-adic valuation of both <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>±</mo><mo>(</mo><mo>−</mo><mn>5</mn><msup><mo>)</mo><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup></mrow><annotation encoding="application/x-tex">1\pm (-5)^{1/2}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.138em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathrm">1</span><span class="mbin">±</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathrm">5</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">1</span><span class="mord mathrm mtight">/</span><span class="mord mathrm mtight">2</span></span></span></span></span></span></span></span></span></span></span></span> is 0 but the 2-adic valuation of $(1+(-5)^{1/2})(1-(-5)^{1/2})$ is 1, and 2 is irreducible.</p>

<a name="147953038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147953038" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147953038">Mario Carneiro (Nov 19 2018 at 08:56)</a>:</h4>
<p>I don't think it necessarily has to be a valuation like in the padics</p>

<a name="147953047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147953047" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147953047">Mario Carneiro (Nov 19 2018 at 08:56)</a>:</h4>
<p>you can say 2 is the highest power of 4 that divides 48</p>

<a name="147953057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147953057" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147953057">Mario Carneiro (Nov 19 2018 at 08:57)</a>:</h4>
<p>and you have to worry about infinity being a possible answer regardless, because of 0</p>

<a name="147953061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147953061" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147953061">Mario Carneiro (Nov 19 2018 at 08:57)</a>:</h4>
<p>so at that point it's really valid as long as dvd and power are defined</p>

<a name="147953104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147953104" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147953104">Mario Carneiro (Nov 19 2018 at 08:58)</a>:</h4>
<p>We do rely on the property a^m | b -&gt; a^n | b when m &gt;= n, but that is true in any monoid</p>

<a name="147953109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147953109" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147953109">Kevin Buzzard (Nov 19 2018 at 08:59)</a>:</h4>
<p>Right. I don't know the answer to Chris' question of the generality it should be defined in Lean, I was just explaining the boundaries of where it started to be useful in commutative algebra.</p>

<a name="147953118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147953118" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147953118">Mario Carneiro (Nov 19 2018 at 08:59)</a>:</h4>
<p>I wish dvd was defined on monoids instead of semirings</p>

<a name="147953170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147953170" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147953170">Mario Carneiro (Nov 19 2018 at 09:00)</a>:</h4>
<p>although you could argue about whether commutative matters</p>

<a name="147953175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147953175" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147953175">Kevin Buzzard (Nov 19 2018 at 09:00)</a>:</h4>
<p>I can't imagine ever needing this function for a non prime element and it won't have any nice properties, but over a UFD this function is used all the time by mathematicians</p>

<a name="147953196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147953196" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147953196">Mario Carneiro (Nov 19 2018 at 09:01)</a>:</h4>
<p>One interesting thing you can do with this function is define the class of rings where it is always finite for nonzeros</p>

<a name="147953202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147953202" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147953202">Mario Carneiro (Nov 19 2018 at 09:01)</a>:</h4>
<p>It's like an archimedean property</p>

<a name="147953329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147953329" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147953329">Mario Carneiro (Nov 19 2018 at 09:04)</a>:</h4>
<p>Here is a silly example using a non-prime: the count of 10 inside a number n is its number of trailing zeros</p>

<a name="147953477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147953477" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147953477">Kevin Buzzard (Nov 19 2018 at 09:08)</a>:</h4>
<p>Maybe Noetherian rings with no nilpotents have this property. Nilpotents will always screw you up, and Noetherian is a finiteness hypothesis which typically makes intuitive things like this true</p>

<a name="147953504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147953504" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147953504">Kevin Buzzard (Nov 19 2018 at 09:09)</a>:</h4>
<p>Maybe it follows from Krull. <span class="user-mention" data-user-id="110064">@Kenny Lau</span> ?</p>

<a name="147953572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147953572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147953572">Kenny Lau (Nov 19 2018 at 09:10)</a>:</h4>
<p>how should I know</p>

<a name="147953639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147953639" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147953639">Kevin Buzzard (Nov 19 2018 at 09:12)</a>:</h4>
<p>Krull needs proper ideals. Aah. So for a unit it's always infinite</p>

<a name="147953662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147953662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147953662">Kevin Buzzard (Nov 19 2018 at 09:12)</a>:</h4>
<p>You didn't do krull yet Kenny? It's in AM. .</p>

<a name="147953687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147953687" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147953687">Mario Carneiro (Nov 19 2018 at 09:13)</a>:</h4>
<p>oh right, ignoring units</p>

<a name="147967315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147967315" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147967315">Chris Hughes (Nov 19 2018 at 14:03)</a>:</h4>
<p>If I define it over a <code>comm_semiring</code> it's going to be noncomputable. Is that the right approach?</p>

<a name="147967633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147967633" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147967633">Mario Carneiro (Nov 19 2018 at 14:08)</a>:</h4>
<p>ah, that's true. How about a <code>decidable_rel dvd</code> assumption?</p>

<a name="147967655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147967655" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147967655">Chris Hughes (Nov 19 2018 at 14:08)</a>:</h4>
<p>Still not computable. I have to decide whether it's finite or not.</p>

<a name="147967755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147967755" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147967755">Mario Carneiro (Nov 19 2018 at 14:10)</a>:</h4>
<p>right, this puts it in the same class as order-finding</p>

<a name="147967784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147967784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147967784">Mario Carneiro (Nov 19 2018 at 14:11)</a>:</h4>
<p>how is it being represented in the first place? are you using with_top nat?</p>

<a name="147967826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147967826" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147967826">Chris Hughes (Nov 19 2018 at 14:11)</a>:</h4>
<p>I haven't decided. Probably default to zero since zero's not being used for anything else.</p>

<a name="147967880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147967880" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147967880">Mario Carneiro (Nov 19 2018 at 14:12)</a>:</h4>
<p>well, zero has a meaning here (no powers of p in the number)</p>

<a name="147967886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147967886" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147967886">Mario Carneiro (Nov 19 2018 at 14:12)</a>:</h4>
<p>is that a problem?</p>

<a name="147967893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147967893" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147967893">Chris Hughes (Nov 19 2018 at 14:12)</a>:</h4>
<p>Sorry yeah.</p>

<a name="147967897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147967897" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147967897">Chris Hughes (Nov 19 2018 at 14:12)</a>:</h4>
<p>Might be a problem</p>

<a name="147967910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147967910" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147967910">Chris Hughes (Nov 19 2018 at 14:12)</a>:</h4>
<p>It just means <code>p_adic_val_eq_zero_iff</code> has an extra assumption</p>

<a name="147967949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147967949" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147967949">Mario Carneiro (Nov 19 2018 at 14:13)</a>:</h4>
<p>although for general comm semirings that assumption is kind of complicated, right?</p>

<a name="147967953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147967953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147967953">Chris Hughes (Nov 19 2018 at 14:13)</a>:</h4>
<p>Currently it defaults to zero.</p>

<a name="147967965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147967965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147967965">Chris Hughes (Nov 19 2018 at 14:13)</a>:</h4>
<p>Yes.</p>

<a name="147968031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147968031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147968031">Chris Hughes (Nov 19 2018 at 14:14)</a>:</h4>
<p>But maybe in a UFD or something it's simpler, so there'll have to be a UFD version of the lemma.</p>

<a name="147968056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147968056" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147968056">Mario Carneiro (Nov 19 2018 at 14:14)</a>:</h4>
<p>or a proposition asserting finiteness</p>

<a name="147968081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147968081" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147968081">Mario Carneiro (Nov 19 2018 at 14:15)</a>:</h4>
<p>perhaps the <code>roption nat</code> version works best here</p>

<a name="147968107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147968107" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147968107">Mario Carneiro (Nov 19 2018 at 14:15)</a>:</h4>
<p>since that way you get the proposition for free, encoded in the <code>roption</code>, and it's computable</p>

<a name="147968192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147968192" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147968192">Mario Carneiro (Nov 19 2018 at 14:16)</a>:</h4>
<p>but we will want to specialize the function to rings where we can prove finiteness</p>

<a name="147968197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147968197" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147968197">Mario Carneiro (Nov 19 2018 at 14:16)</a>:</h4>
<p>like padics</p>

<a name="147968220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147968220" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147968220">Chris Hughes (Nov 19 2018 at 14:17)</a>:</h4>
<p>You still have to decide if somethings a unit or not.</p>

<a name="147968273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147968273" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147968273">Mario Carneiro (Nov 19 2018 at 14:18)</a>:</h4>
<p>With the <code>roption</code> version, you can just do the naive search and it's computable</p>

<a name="147968281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147968281" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147968281">Mario Carneiro (Nov 19 2018 at 14:18)</a>:</h4>
<p>because of <code>pfun.fix</code></p>

<a name="147968380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147968380" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147968380">Mario Carneiro (Nov 19 2018 at 14:20)</a>:</h4>
<p>maybe <code>nat.rfind</code> is easier to use</p>

<a name="147968382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147968382" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147968382">Chris Hughes (Nov 19 2018 at 14:21)</a>:</h4>
<p>It's "computable" but you still have to give a proof to actually compute it. I'm not a fan of worsening ease of proof for the sake of computability.</p>

<a name="147968409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147968409" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147968409">Mario Carneiro (Nov 19 2018 at 14:21)</a>:</h4>
<p>my point is that here the mathematics and computability aspects coincide</p>

<a name="147968415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147968415" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147968415">Mario Carneiro (Nov 19 2018 at 14:21)</a>:</h4>
<p>we need an extra "infinity" value, and roption gives us that</p>

<a name="147968471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147968471" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147968471">Mario Carneiro (Nov 19 2018 at 14:22)</a>:</h4>
<p>and as far as giving a proof, that is exactly what we can do in nice rings like <code>int</code></p>

<a name="147968524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/147968524" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#147968524">Mario Carneiro (Nov 19 2018 at 14:24)</a>:</h4>
<p>(actually, in the VM you can cheat and evaluate any <code>roption</code>, even if it is an infinite search)</p>

<a name="148115154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148115154" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148115154">Chris Hughes (Nov 21 2018 at 14:59)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> One downside of generalizing padic val, is that now for integers it will return an <code>int</code> rather than a <code>nat</code>, which I know can be very annoying. Is this a good reason to have two definitions?</p>

<a name="148115253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148115253" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148115253">Mario Carneiro (Nov 21 2018 at 15:00)</a>:</h4>
<p>How so? If it's defined based on monoid.pow then it should give a nat</p>

<a name="148115990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148115990" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148115990">Chris Hughes (Nov 21 2018 at 15:10)</a>:</h4>
<p>You're right. I'm being stupid.</p>

<a name="148127500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148127500" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148127500">Kevin Buzzard (Nov 21 2018 at 18:06)</a>:</h4>
<p>In maths you would have valuations taking on natural values on the "integers" and valuations taking integer values on the "rationals", and both would be used (in some generality).</p>

<a name="148130014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148130014" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148130014">Chris Hughes (Nov 21 2018 at 18:46)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Is the statement that every non-zero non unit has a finite padic val equivalent to UFD. It seems to be provided there aren't any elements which can be divided by infinitely many distinct primes, and I'm not sure if that's possible or not.</p>

<a name="148130128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148130128" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148130128">Johan Commelin (Nov 21 2018 at 18:48)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> In <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi mathvariant="double-struck">Z</mi></mrow><mo>[</mo><mi mathvariant="normal">√</mi><mrow><mo>−</mo><mn>5</mn></mrow><mo>]</mo></mrow><annotation encoding="application/x-tex">\mathbb{Z}[\surd{-5}]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8em;"></span><span class="strut bottom" style="height:1.05em;vertical-align:-0.25em;"></span><span class="base"><span class="mord"><span class="mord mathbb">Z</span></span><span class="mopen">[</span><span class="mord mathrm">√</span><span class="mord"><span class="mord">−</span><span class="mord mathrm">5</span></span><span class="mclose">]</span></span></span></span> you have <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mn>1</mn><mo>−</mo><mi mathvariant="normal">√</mi><mrow><mo>−</mo><mn>5</mn></mrow><mo>)</mo><mo>(</mo><mn>1</mn><mo>+</mo><mi mathvariant="normal">√</mi><mrow><mo>−</mo><mn>5</mn></mrow><mo>)</mo><mo>=</mo><mn>6</mn><mo>=</mo><mn>2</mn><mo>⋅</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">(1 - \surd{-5})(1 + \surd{-5}) = 6 = 2 \cdot 3</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8em;"></span><span class="strut bottom" style="height:1.05em;vertical-align:-0.25em;"></span><span class="base"><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">−</span><span class="mord mathrm">√</span><span class="mord"><span class="mord">−</span><span class="mord mathrm">5</span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">+</span><span class="mord mathrm">√</span><span class="mord"><span class="mord">−</span><span class="mord mathrm">5</span></span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathrm">6</span><span class="mrel">=</span><span class="mord mathrm">2</span><span class="mbin">⋅</span><span class="mord mathrm">3</span></span></span></span>. So that is not a UFD.</p>

<a name="148130239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148130239" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148130239">Johan Commelin (Nov 21 2018 at 18:50)</a>:</h4>
<p>But I think it satisfies your other requirement.</p>

<a name="148141439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148141439" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148141439">Chris Hughes (Nov 21 2018 at 22:34)</a>:</h4>
<p>Situation like that happening didn't occur to me.</p>

<a name="148154102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148154102" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148154102">Chris Hughes (Nov 22 2018 at 04:57)</a>:</h4>
<p>Some of the statements become a bit ugly with <code>roption</code>. Is there a good way around this?</p>
<div class="codehilite"><pre><span></span><span class="kn">protected</span> <span class="kn">lemma</span> <span class="n">mul</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">ha0</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hb0</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">get</span> <span class="o">(</span><span class="n">padic_val</span> <span class="n">p</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">finite_of_prime</span> <span class="n">hp</span> <span class="n">ha0</span><span class="o">)</span> <span class="bp">+</span>
  <span class="n">get</span> <span class="o">(</span><span class="n">padic_val</span> <span class="n">p</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">finite_of_prime</span> <span class="n">hp</span> <span class="n">hb0</span><span class="o">)</span> <span class="bp">=</span>
  <span class="n">get</span> <span class="o">(</span><span class="n">padic_val</span> <span class="n">p</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">))</span> <span class="o">(</span><span class="n">finite_of_prime</span> <span class="n">hp</span> <span class="o">(</span><span class="n">mul_ne_zero</span> <span class="n">ha0</span> <span class="n">hb0</span><span class="o">))</span>
</pre></div>

<a name="148158928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148158928" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148158928">Johan Commelin (Nov 22 2018 at 07:29)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> What is your current definition of <code>padic_val</code>? Is there someplace we can read your latest code?<br>
I think the idea was that you don't even assume that <code>p</code> is prime... (I didn't even know that we had prime elements in arbitrary rings already). If you want to make an assumption on the element, it is probably most natural to assume that it is irreducible. Also, maybe the name should now also be generalised to <code>adic_val</code>?</p>

<a name="148159267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148159267" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148159267">Mario Carneiro (Nov 22 2018 at 07:38)</a>:</h4>
<p>I called it "prime count" in metamath, although it wasn't defined only on primes</p>

<a name="148159273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148159273" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148159273">Mario Carneiro (Nov 22 2018 at 07:38)</a>:</h4>
<p>it's not really the padic valuation since usually that involves a reciprocal</p>

<a name="148159287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148159287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148159287">Mario Carneiro (Nov 22 2018 at 07:39)</a>:</h4>
<p>how about <code>divisibility</code>?</p>

<a name="148161166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148161166" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148161166">Kevin Buzzard (Nov 22 2018 at 08:26)</a>:</h4>
<p>Re the <code>get</code>s -- can you just define addition on <code>roption</code>? I don't quite know what I'm talking about here. Re</p>
<blockquote>
<p>it's not really the padic valuation since usually that involves a reciprocal</p>
</blockquote>
<p>even though the term is used for both the multiplicative and additive versions of this idea, I think "the <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base"><span class="mord mathit">p</span></span></span></span>-adic  valuation" usually refers to the map <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>v</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">v_p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span></span></span></span> with <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>v</mi><mi>p</mi></msub><mo>(</mo><mi>p</mi><mo>)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">v_p(p)=1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">p</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span></span>, where as "the <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base"><span class="mord mathit">p</span></span></span></span>-adic norm" is the one with <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∣</mi><mi>p</mi><msub><mi mathvariant="normal">∣</mi><mi>p</mi></msub><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">|p|_{p}=1/p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="base"><span class="mord mathrm">∣</span><span class="mord mathit">p</span><span class="mord"><span class="mord mathrm">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">p</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span><span class="mrel">=</span><span class="mord mathrm">1</span><span class="mord mathrm">/</span><span class="mord mathit">p</span></span></span></span>. Sadly, in perfectoid land, the norm is referred to as a "valuation" :-(</p>

<a name="148171739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148171739" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148171739">Chris Hughes (Nov 22 2018 at 12:12)</a>:</h4>
<p>The current definition is </p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">padic_val</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_rel</span> <span class="o">((</span><span class="err">∣</span><span class="o">)</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">roption</span> <span class="bp">ℕ</span> <span class="o">:=</span>
<span class="bp">⟨∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="bp">¬</span><span class="n">a</span> <span class="err">^</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="err">∣</span> <span class="n">b</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">find</span> <span class="n">h</span><span class="bp">⟩</span>
</pre></div>

<a name="148172800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148172800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148172800">Chris Hughes (Nov 22 2018 at 12:35)</a>:</h4>
<p>I'll probably change the name at some point.</p>

<a name="148225756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148225756" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148225756">Chris Hughes (Nov 23 2018 at 12:19)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Are you in favour of making a version of <code>with_top</code> with <code>roption</code> instead of <code>option</code>, with all the order and algebra on it? It would make sense for <code>padic_val</code>, but also order of elements of infinite groups.</p>

<a name="148225784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148225784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148225784">Mario Carneiro (Nov 23 2018 at 12:19)</a>:</h4>
<p>maybe specialized to <code>enat</code>?</p>

<a name="148225838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148225838" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148225838">Mario Carneiro (Nov 23 2018 at 12:20)</a>:</h4>
<p>that particular structure seems useful, not so sure about generally with-topping a set</p>

<a name="148225854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148225854" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148225854">Chris Hughes (Nov 23 2018 at 12:21)</a>:</h4>
<p>Okay sure.</p>

<a name="148231085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/generalizing%20padic_val/near/148231085" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/45571generalizingpadicval.html#148231085">Chris Hughes (Nov 23 2018 at 14:03)</a>:</h4>
<p>I can't do <code>inf</code> computably for the lattice on enat. Should I leave it out?</p>


{% endraw %}
