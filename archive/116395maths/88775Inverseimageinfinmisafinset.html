---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/88775Inverseimageinfinmisafinset.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html">Inverse image in `fin m` is a `finset`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="126647766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126647766" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126647766">Johan Commelin (May 16 2018 at 14:32)</a>:</h4>
<p>The following code is (obviously) not typechecking. How do I make this work?</p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">finvj</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">finset</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">exact</span> <span class="o">{</span><span class="n">i</span> <span class="bp">//</span> <span class="n">f</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">j</span><span class="o">}</span>
<span class="kn">end</span>
</pre></div>

<a name="126648041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648041" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648041">Kevin Buzzard (May 16 2018 at 14:38)</a>:</h4>
<p>Well, I guess <code>{i // f i = j}</code> has type <code>Type</code></p>

<a name="126648075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648075" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648075">Kevin Buzzard (May 16 2018 at 14:39)</a>:</h4>
<p>and you want something of type <code>finset (fin m)</code></p>

<a name="126648124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648124" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648124">Kevin Buzzard (May 16 2018 at 14:40)</a>:</h4>
<p>so I guess you'd better find a way of constructing something of type <code>finset (fin m)</code></p>

<a name="126648132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648132" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648132">Kevin Buzzard (May 16 2018 at 14:40)</a>:</h4>
<p>I don't know the first thing about finsets so I guess I start with <code>#print finset</code></p>

<a name="126648144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648144" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648144">Kevin Buzzard (May 16 2018 at 14:41)</a>:</h4>
<p>oh and that doesn't look too good</p>

<a name="126648158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648158" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648158">Kevin Buzzard (May 16 2018 at 14:41)</a>:</h4>
<p>you seem to have to supply a multiset and a proof that this multiset has no duplicates</p>

<a name="126648215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648215" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648215">Kevin Buzzard (May 16 2018 at 14:42)</a>:</h4>
<p>but fortunately finset is in mathlib so there will probably exist a good interface</p>

<a name="126648230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648230" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648230">Kevin Buzzard (May 16 2018 at 14:42)</a>:</h4>
<p>which in this case will mean "other constructors"</p>

<a name="126648235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648235" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648235">Kevin Buzzard (May 16 2018 at 14:42)</a>:</h4>
<p>so next I guess I'd have a look at <code>finset.lean</code></p>

<a name="126648257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648257" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648257">Kevin Buzzard (May 16 2018 at 14:43)</a>:</h4>
<p>or maybe I could look for other constructors by typing <code>finset.</code> in VS code and then hitting ctrl-space a while</p>

<a name="126648415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648415" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648415">Kevin Buzzard (May 16 2018 at 14:46)</a>:</h4>
<p>oh -- <code>finset.filter</code> exists</p>

<a name="126648416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648416" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648416">Chris Hughes (May 16 2018 at 14:46)</a>:</h4>
<p><code>univ.filter (\la i, f i = j)</code></p>
<p>I think you might need the finset  namespace open.</p>

<a name="126648422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648422" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648422">Kevin Buzzard (May 16 2018 at 14:47)</a>:</h4>
<p>aah, here's a finset expert</p>

<a name="126648430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648430" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648430">Johan Commelin (May 16 2018 at 14:47)</a>:</h4>
<p>Aah, cool.</p>

<a name="126648432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648432" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648432">Kevin Buzzard (May 16 2018 at 14:47)</a>:</h4>
<p>but I was seconds ahead of him ;-)</p>

<a name="126648437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648437" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648437">Johan Commelin (May 16 2018 at 14:47)</a>:</h4>
<p>Yeah, congrats (-;</p>

<a name="126648438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648438" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648438">Johan Commelin (May 16 2018 at 14:47)</a>:</h4>
<p>I'll look at filter!</p>

<a name="126648456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648456" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648456">Kevin Buzzard (May 16 2018 at 14:47)</a>:</h4>
<p>I was just showing you how I think about these things of course</p>

<a name="126648489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648489" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648489">Kevin Buzzard (May 16 2018 at 14:48)</a>:</h4>
<p>but actually in retrospect I missed a trick</p>

<a name="126648503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648503" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648503">Kevin Buzzard (May 16 2018 at 14:48)</a>:</h4>
<p>Instead of saying "I wonder what's there -- let's take a look at everything"</p>

<a name="126648510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648510" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648510">Kevin Buzzard (May 16 2018 at 14:48)</a>:</h4>
<p>I should have said "let's assume everything is there -- what do I actually want?"</p>

<a name="126648523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648523" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648523">Kevin Buzzard (May 16 2018 at 14:49)</a>:</h4>
<p>and what I want is (1) fin n is a finset and (2) a subset of a finset defined by a predicate being true is a finset</p>

<a name="126648532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648532" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648532">Kevin Buzzard (May 16 2018 at 14:49)</a>:</h4>
<p>and I should by now know that (2) is called <code>filter</code></p>

<a name="126648537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648537" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648537">Johan Commelin (May 16 2018 at 14:49)</a>:</h4>
<p>And I learned that today (-;</p>

<a name="126648541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648541" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648541">Johan Commelin (May 16 2018 at 14:49)</a>:</h4>
<p>I did not yet find out (1)...</p>

<a name="126648587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648587" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648587">Johan Commelin (May 16 2018 at 14:50)</a>:</h4>
<p>Chris's answer isn't working flawlessly here</p>

<a name="126648591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648591" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648591">Kevin Buzzard (May 16 2018 at 14:50)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> How does one prove fin n is a finset?</p>

<a name="126648600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648600" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648600">Johan Commelin (May 16 2018 at 14:50)</a>:</h4>
<p>My search continues</p>

<a name="126648614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648614" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648614">Kevin Buzzard (May 16 2018 at 14:50)</a>:</h4>
<p>it'll be there somewhere</p>

<a name="126648618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648618" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648618">Kevin Buzzard (May 16 2018 at 14:50)</a>:</h4>
<p>hmm</p>

<a name="126648620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648620" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648620">Kevin Buzzard (May 16 2018 at 14:50)</a>:</h4>
<p>it's somehow not strictly speaking meaningful</p>

<a name="126648635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648635" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648635">Kevin Buzzard (May 16 2018 at 14:51)</a>:</h4>
<p>fin n is not a finset -- fin n and something of type finset are different things</p>

<a name="126648637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648637" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648637">Chris Hughes (May 16 2018 at 14:51)</a>:</h4>
<p>fin n is not a finset. It is a fintype, and that should be automatically deduced as an instance</p>

<a name="126648639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648639" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648639">Kevin Buzzard (May 16 2018 at 14:51)</a>:</h4>
<p>right</p>

<a name="126648646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648646" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648646">Chris Hughes (May 16 2018 at 14:51)</a>:</h4>
<p>sometimes (univ : finset (fin n)) helps</p>

<a name="126648698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648698" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648698">Kevin Buzzard (May 16 2018 at 14:52)</a>:</h4>
<p>Johan -- why do you want to use finset?</p>

<a name="126648699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648699" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648699">Chris Hughes (May 16 2018 at 14:52)</a>:</h4>
<p>because otherwise it doesn't know the intended type. Also import data.fintype</p>

<a name="126648736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648736" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648736">Kevin Buzzard (May 16 2018 at 14:53)</a>:</h4>
<p>"set" doesn't mean what mathematicians think it means</p>

<a name="126648742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648742" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648742">Kevin Buzzard (May 16 2018 at 14:53)</a>:</h4>
<p>"set" in Lean means "subset of a set"</p>

<a name="126648749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648749" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648749">Kevin Buzzard (May 16 2018 at 14:53)</a>:</h4>
<p>"subset of a given type"</p>

<a name="126648751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648751" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648751">Kevin Buzzard (May 16 2018 at 14:53)</a>:</h4>
<p>rather than "arbitrary set of anything"</p>

<a name="126648797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648797" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648797">Kevin Buzzard (May 16 2018 at 14:54)</a>:</h4>
<p>This took me a while to get my head around</p>

<a name="126648813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648813">Kevin Buzzard (May 16 2018 at 14:54)</a>:</h4>
<p>"X : set N" doesn't mean "X is a proof that N is a set", it means "X is a subset of N". I sometimes read "set" as "subset_of".</p>

<a name="126648912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648912" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648912">Kevin Buzzard (May 16 2018 at 14:56)</a>:</h4>
<p>Because fin n is a type, and you have a predicate on that type, the natural thing to make is either a subtype or a <code>set (fin m)</code></p>

<a name="126648916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648916" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648916">Johan Commelin (May 16 2018 at 14:56)</a>:</h4>
<p>Kevin, I want to use finset, because I want to sum a function over it.</p>

<a name="126648928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648928" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648928">Johan Commelin (May 16 2018 at 14:56)</a>:</h4>
<p>And finset's have all sorts of stuff for that</p>

<a name="126648930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648930" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648930">Kevin Buzzard (May 16 2018 at 14:56)</a>:</h4>
<p>My guess is that any type with a reasonable finiteness property will have sums</p>

<a name="126648934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648934" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648934">Kevin Buzzard (May 16 2018 at 14:56)</a>:</h4>
<p>with all sorts of stuff</p>

<a name="126648945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648945" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648945">Kevin Buzzard (May 16 2018 at 14:57)</a>:</h4>
<p>but on the other hand maybe finsets have the stuff you need</p>

<a name="126648965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648965">Johan Commelin (May 16 2018 at 14:57)</a>:</h4>
<p>I couldn't find it for fin</p>

<a name="126648968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126648968" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126648968">Kevin Buzzard (May 16 2018 at 14:57)</a>:</h4>
<p>In which case I think Chris' answer sounds best. Why not do the dirty work with fintype (which presumably also has filter) and then turn it into a finset</p>

<a name="126649037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649037" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649037">Kevin Buzzard (May 16 2018 at 14:59)</a>:</h4>
<p>hmm I don't know what a fintype is either</p>

<a name="126649039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649039" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649039">Kevin Buzzard (May 16 2018 at 14:59)</a>:</h4>
<p>well, I just looked</p>

<a name="126649042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649042" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649042">Kevin Buzzard (May 16 2018 at 14:59)</a>:</h4>
<p>I know nothing about these finite gadgets</p>

<a name="126649043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649043" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649043">Chris Hughes (May 16 2018 at 14:59)</a>:</h4>
<p>It's only finsets that have sums.</p>

<a name="126649089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649089">Kevin Buzzard (May 16 2018 at 15:00)</a>:</h4>
<p>but there's a coercion from fintype to finset?</p>

<a name="126649103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649103" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649103">Chris Hughes (May 16 2018 at 15:00)</a>:</h4>
<p>There is a function from fintype to finset. It's not a coercion.</p>

<a name="126649106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649106">Chris Hughes (May 16 2018 at 15:00)</a>:</h4>
<p>It's called univ</p>

<a name="126649109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649109" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649109">Kevin Buzzard (May 16 2018 at 15:00)</a>:</h4>
<p><code>example (m : ℕ) : fintype (fin m) := by apply_instance</code></p>

<a name="126649110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649110" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649110">Kevin Buzzard (May 16 2018 at 15:01)</a>:</h4>
<p>that's a good start</p>

<a name="126649123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649123" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649123">Kevin Buzzard (May 16 2018 at 15:01)</a>:</h4>
<p>type class inference will tell you that (fin m) is a fintype</p>

<a name="126649138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649138" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649138">Johan Commelin (May 16 2018 at 15:01)</a>:</h4>
<p>Yes, it's working now</p>

<a name="126649139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649139" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649139">Kevin Buzzard (May 16 2018 at 15:01)</a>:</h4>
<p>OK great</p>

<a name="126649143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649143" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649143">Johan Commelin (May 16 2018 at 15:01)</a>:</h4>
<p>So now I can start mangling around with my sums</p>

<a name="126649144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649144" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649144">Johan Commelin (May 16 2018 at 15:02)</a>:</h4>
<p>(-;</p>

<a name="126649185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649185" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649185">Kevin Buzzard (May 16 2018 at 15:02)</a>:</h4>
<p>Now it's Patrick you want to talk to :-)</p>

<a name="126649186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649186" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649186">Johan Commelin (May 16 2018 at 15:02)</a>:</h4>
<p>But first I need to catch a train</p>

<a name="126649187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649187" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649187">Johan Commelin (May 16 2018 at 15:02)</a>:</h4>
<p>Yes, I am using big_ops</p>

<a name="126649343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649343" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649343">Patrick Massot (May 16 2018 at 15:06)</a>:</h4>
<p>Actually I currently focused on non-commutative operations. That's why I can't work with finite sets. I'm summing (or multiplying or composing or whatever) elements of (ordered!) lists</p>

<a name="126649408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649408" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649408">Patrick Massot (May 16 2018 at 15:08)</a>:</h4>
<p>That's why I can't use <code>algebra.big_operators</code></p>

<a name="126649647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Inverse%20image%20in%20%60fin%20m%60%20is%20a%20%60finset%60/near/126649647" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/88775Inverseimageinfinmisafinset.html#126649647">Chris Hughes (May 16 2018 at 15:14)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> <code>algebra.big_operators</code> is probably better than Patrick's big operators in this case.</p>


{% endraw %}
