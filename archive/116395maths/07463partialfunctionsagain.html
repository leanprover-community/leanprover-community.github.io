---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/07463partialfunctionsagain.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html">partial functions again</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="133331307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133331307" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133331307">Patrick Massot (Sep 04 2018 at 19:31)</a>:</h4>
<p>With the recent merges from my so-called differential topology repository to mathlib, the next target in this direction is the definition of derivatives (Fréchet derivative if you insist on this terminology). It is very easy to say that a function defined on a whole normed vector space is differentiable at some point a: <a href="https://github.com/PatrickMassot/lean-differential-topology/blob/master/src/calculus.lean#L17" target="_blank" title="https://github.com/PatrickMassot/lean-differential-topology/blob/master/src/calculus.lean#L17">https://github.com/PatrickMassot/lean-differential-topology/blob/master/src/calculus.lean#L17</a> But of course we want derivatives of functions defined on a subset of a normed space, at least allowing an open set. I can clearly try to adapt the definition, but I'd be happy to read any advice.</p>

<a name="133331524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133331524" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133331524">Patrick Massot (Sep 04 2018 at 19:35)</a>:</h4>
<p>For instance, <a href="https://github.com/thalesant/formalabstracts/blob/riemann_hypothesis/folklore/complex.lean#L227" target="_blank" title="https://github.com/thalesant/formalabstracts/blob/riemann_hypothesis/folklore/complex.lean#L227">https://github.com/thalesant/formalabstracts/blob/riemann_hypothesis/folklore/complex.lean#L227</a> (in the holomorphic case, but this doesn't matter) define a function from a subset of a normed space to be differentiable at x if the subset is open and the extension by zero (which is defined everywhere) is differentiable at x. This is one option</p>

<a name="133333155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133333155" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133333155">Patrick Massot (Sep 04 2018 at 20:03)</a>:</h4>
<p>I ran a quick sanity check on the definition from FAbstract (I wanted to see with my own eyes that division by zero works as intended).</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">complex</span>
<span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">limits</span>

<span class="kn">open</span> <span class="n">filter</span> <span class="n">complex</span>

<span class="n">def</span> <span class="n">has_complex_derivative_at</span>
<span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℂ</span> <span class="bp">→</span> <span class="n">ℂ</span><span class="o">)</span>
<span class="o">(</span><span class="n">f&#39;z</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span>
<span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="k">let</span> <span class="n">error_term</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="o">:=</span>
    <span class="n">abs</span><span class="o">((</span><span class="n">f</span> <span class="o">(</span><span class="n">z</span> <span class="bp">+</span> <span class="n">h</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">f</span> <span class="n">z</span> <span class="bp">+</span> <span class="n">f&#39;z</span> <span class="bp">*</span> <span class="n">h</span><span class="o">))</span><span class="bp">/</span><span class="n">h</span><span class="o">)</span> <span class="k">in</span>
<span class="o">(</span><span class="n">tendsto</span> <span class="n">error_term</span> <span class="o">(</span><span class="n">nhds</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">))</span> <span class="o">(</span><span class="n">nhds</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)))</span>

<span class="kn">lemma</span> <span class="n">test</span> <span class="o">:</span> <span class="n">has_complex_derivative_at</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">z</span><span class="o">,</span> <span class="n">z</span><span class="err">^</span><span class="mi">2</span><span class="o">)</span> <span class="mi">2</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">dsimp</span> <span class="n">only</span> <span class="o">[</span><span class="n">has_complex_derivative_at</span><span class="o">],</span>

  <span class="k">have</span> <span class="o">:</span>  <span class="o">(</span><span class="bp">λ</span> <span class="n">h</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(((</span><span class="mi">1</span> <span class="bp">+</span> <span class="n">h</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="o">(</span><span class="mi">1</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">h</span><span class="o">))</span><span class="bp">/</span><span class="n">h</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="n">abs</span><span class="o">(</span><span class="n">h</span><span class="err">^</span><span class="mi">2</span><span class="bp">/</span><span class="n">h</span><span class="o">)),</span>
  <span class="k">by</span> <span class="n">ext</span> <span class="bp">;</span> <span class="n">congr</span><span class="bp">;</span> <span class="n">ring</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">this</span><span class="o">,</span>

  <span class="n">rw</span> <span class="n">tendsto_nhds_of_metric</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">ε</span> <span class="n">ε_pos</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="o">[</span><span class="n">ε</span><span class="o">,</span> <span class="n">ε_pos</span><span class="o">],</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">dx</span><span class="o">,</span>
  <span class="n">by_cases</span> <span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">ε_pos</span><span class="o">]</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">pow_two</span><span class="o">,</span> <span class="n">mul_div_cancel</span> <span class="n">x</span> <span class="n">h</span><span class="o">],</span>
    <span class="n">dsimp</span><span class="o">[</span><span class="n">dist</span><span class="o">]</span> <span class="n">at</span> <span class="n">dx</span> <span class="err">⊢</span><span class="o">,</span>
    <span class="n">simpa</span> <span class="kn">using</span> <span class="n">dx</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>

<a name="133333260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133333260" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133333260">Patrick Massot (Sep 04 2018 at 20:05)</a>:</h4>
<p>First I'm both amazed and ashamed that I wrote that so quickly without insulting my computer. But of course I'd be very happy to read a simpler proof. <span class="user-mention" data-user-id="110596">@Rob Lewis</span> please feel free to explain that your Lean/Sage bridge allows to do this limit computation in one line.</p>

<a name="133333813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133333813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133333813">Patrick Massot (Sep 04 2018 at 20:14)</a>:</h4>
<p>I can merge the last two lines in <code>simpa [dist] using dx</code></p>

<a name="133333948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133333948" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133333948">Patrick Massot (Sep 04 2018 at 20:17)</a>:</h4>
<p>Anyway, this great success of division by zero makes me wonder whether I should define differentiability using  <code>∥f (a + h) - f a - L h∥/ ∥h∥</code></p>

<a name="133334379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133334379" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133334379">Chris Hughes (Sep 04 2018 at 20:24)</a>:</h4>
<p>Golfed as requested</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">test</span> <span class="o">:</span> <span class="n">has_complex_derivative_at</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">z</span><span class="o">,</span> <span class="n">z</span><span class="err">^</span><span class="mi">2</span><span class="o">)</span> <span class="mi">2</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">have</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">h</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(((</span><span class="mi">1</span> <span class="bp">+</span> <span class="n">h</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="o">(</span><span class="mi">1</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">h</span><span class="o">))</span> <span class="bp">/</span> <span class="n">h</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="n">abs</span> <span class="o">(</span><span class="n">h</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">/</span> <span class="n">h</span><span class="o">)),</span>
  <span class="k">by</span> <span class="n">ext</span><span class="bp">;</span> <span class="n">congr</span><span class="bp">;</span> <span class="n">ring</span><span class="o">,</span>
<span class="k">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">has_complex_derivative_at</span><span class="o">,</span> <span class="n">this</span><span class="o">,</span> <span class="n">tendsto_nhds_of_metric</span><span class="o">]</span><span class="bp">;</span>
  <span class="n">exact</span> <span class="bp">λ</span> <span class="n">ε</span> <span class="n">ε0</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">ε</span><span class="o">,</span> <span class="n">ε0</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">dx</span><span class="o">,</span> <span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">ε0</span><span class="o">]</span>
  <span class="k">else</span> <span class="k">by</span> <span class="n">dsimp</span> <span class="o">[</span><span class="n">dist</span><span class="o">]</span> <span class="n">at</span> <span class="bp">*;</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">pow_two</span><span class="o">,</span> <span class="n">mul_div_cancel</span> <span class="n">x</span> <span class="n">h</span><span class="o">]</span> <span class="kn">using</span> <span class="n">dx</span><span class="bp">⟩</span>
</pre></div>

<a name="133334501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133334501" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133334501">Kevin Buzzard (Sep 04 2018 at 20:26)</a>:</h4>
<p>So 0/0 isn't 1? ;-)</p>

<a name="133334514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133334514" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133334514">Kevin Buzzard (Sep 04 2018 at 20:26)</a>:</h4>
<p>The applied mathematicians were lying to me</p>

<a name="133334544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133334544" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133334544">Mario Carneiro (Sep 04 2018 at 20:27)</a>:</h4>
<p>0/0 = 0 is actually really convenient for stating the definition of the derivative</p>

<a name="133334553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133334553" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133334553">Kevin Buzzard (Sep 04 2018 at 20:27)</a>:</h4>
<p>PS are we witnessing the first time Lean has ever differentiated a function here?</p>

<a name="133334564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133334564" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133334564">Mario Carneiro (Sep 04 2018 at 20:28)</a>:</h4>
<p>well, the chain rule was a derivative</p>

<a name="133334572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133334572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133334572">Kevin Buzzard (Sep 04 2018 at 20:28)</a>:</h4>
<p>0/0 -- you got lucky :-)</p>

<a name="133334645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133334645" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133334645">Kevin Buzzard (Sep 04 2018 at 20:29)</a>:</h4>
<p>Chris -- with the binomial theorem you can differentiate x^n and with Patrick's knowledge of filters he can prove differentiation is linear, and then we can differentiate polynomials!</p>

<a name="133334654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133334654" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133334654">Kenny Lau (Sep 04 2018 at 20:29)</a>:</h4>
<p>we can differentiate polynomials just fine</p>

<a name="133334657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133334657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133334657">Kenny Lau (Sep 04 2018 at 20:29)</a>:</h4>
<p>(hey, you teach Galois theory)</p>

<a name="133334701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133334701" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133334701">Mario Carneiro (Sep 04 2018 at 20:30)</a>:</h4>
<p>not formal derivatives, real derivatives</p>

<a name="133334735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133334735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133334735">Kevin Buzzard (Sep 04 2018 at 20:30)</a>:</h4>
<p>But of course we need to differentiate <code>cos</code> too :-)</p>

<a name="133334784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133334784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133334784">Kevin Buzzard (Sep 04 2018 at 20:31)</a>:</h4>
<p>That will follow from C-linearity if someone can differentiate exp. Mario did you say there was a dirty trick for that?</p>

<a name="133334838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133334838" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133334838">Kevin Buzzard (Sep 04 2018 at 20:32)</a>:</h4>
<p>I guess step one is to get exp in mathlib...</p>

<a name="133334847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133334847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133334847">Mario Carneiro (Sep 04 2018 at 20:32)</a>:</h4>
<p>yes, <code>1 + x &lt;= exp x &lt;= 1/(1-x)</code> proves <code>exp' 0 = 1</code> and then it's easy</p>

<a name="133335121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133335121" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133335121">Patrick Massot (Sep 04 2018 at 20:38)</a>:</h4>
<p>Thanks Chris. I think it's exactly the same proof though.</p>

<a name="133335145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133335145" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133335145">Chris Hughes (Sep 04 2018 at 20:38)</a>:</h4>
<p>That is correct</p>

<a name="133335163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133335163" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133335163">Kevin Buzzard (Sep 04 2018 at 20:39)</a>:</h4>
<p>It's easy if you have the product rule, but Patrick doesn't believe in the product rule</p>

<a name="133335170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133335170" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133335170">Patrick Massot (Sep 04 2018 at 20:39)</a>:</h4>
<p>What?</p>

<a name="133335226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133335226" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133335226">Kevin Buzzard (Sep 04 2018 at 20:40)</a>:</h4>
<p>The product rule is a low-dimensional coincidence</p>

<a name="133335251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133335251" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133335251">Kenny Lau (Sep 04 2018 at 20:41)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">test</span> <span class="o">:</span> <span class="n">has_complex_derivative_at</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">z</span><span class="o">,</span> <span class="n">z</span><span class="err">^</span><span class="mi">2</span><span class="o">)</span> <span class="mi">2</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="n">tendsto_nhds_of_metric</span><span class="bp">.</span><span class="mi">2</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">ε</span><span class="o">,</span> <span class="n">hε</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">z</span> <span class="n">hz</span><span class="o">,</span>
<span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="k">else</span>
<span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">pow_two</span><span class="o">,</span> <span class="n">mul_add</span><span class="o">,</span> <span class="n">add_mul</span><span class="o">,</span> <span class="n">two_mul</span><span class="o">,</span> <span class="n">dist</span><span class="o">]</span><span class="bp">;</span>
<span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">complex</span><span class="bp">.</span><span class="n">abs_mul</span> <span class="n">z</span><span class="o">,</span> <span class="err">←</span> <span class="n">complex</span><span class="bp">.</span><span class="n">abs_div</span><span class="o">,</span> <span class="n">mul_div_cancel</span> <span class="bp">_</span> <span class="n">h</span><span class="o">]</span><span class="bp">;</span>
<span class="n">simpa</span> <span class="o">[</span><span class="n">dist</span><span class="o">]</span> <span class="kn">using</span> <span class="n">hz</span><span class="bp">⟩</span>
</pre></div>

<a name="133335477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133335477" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133335477">Kenny Lau (Sep 04 2018 at 20:45)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">test</span> <span class="o">:</span> <span class="n">has_complex_derivative_at</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">z</span><span class="o">,</span> <span class="n">z</span><span class="err">^</span><span class="mi">2</span><span class="o">)</span> <span class="mi">2</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">have</span> <span class="n">H</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">z</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span> <span class="bp">+</span> <span class="o">(</span><span class="bp">-</span><span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">z</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">z</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">=</span> <span class="n">z</span> <span class="bp">*</span> <span class="n">z</span><span class="o">,</span>
  <span class="k">from</span> <span class="bp">λ</span> <span class="bp">_</span><span class="o">,</span> <span class="k">by</span> <span class="n">ring</span><span class="o">,</span>
<span class="n">tendsto_nhds_of_metric</span><span class="bp">.</span><span class="mi">2</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">ε</span><span class="o">,</span> <span class="n">hε</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">z</span> <span class="n">hz</span><span class="o">,</span>
<span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="k">else</span>
<span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">H</span><span class="o">,</span> <span class="n">mul_div_cancel</span> <span class="bp">_</span> <span class="n">h</span><span class="o">,</span> <span class="bp">-</span><span class="n">complex</span><span class="bp">.</span><span class="n">abs_div</span><span class="o">]</span><span class="bp">;</span>
<span class="n">simpa</span> <span class="o">[</span><span class="n">dist</span><span class="o">]</span> <span class="kn">using</span> <span class="n">hz</span><span class="bp">⟩</span>
</pre></div>

<a name="133335582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133335582" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133335582">Kenny Lau (Sep 04 2018 at 20:47)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">test</span> <span class="o">:</span> <span class="n">has_complex_derivative_at</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">z</span><span class="o">,</span> <span class="n">z</span><span class="err">^</span><span class="mi">2</span><span class="o">)</span> <span class="mi">2</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="n">tendsto_nhds_of_metric</span><span class="bp">.</span><span class="mi">2</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">ε</span><span class="o">,</span> <span class="n">hε</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">z</span> <span class="n">hz</span><span class="o">,</span>
<span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="k">else</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">pow_two</span><span class="o">,</span>
<span class="n">mul_add</span><span class="o">,</span> <span class="n">add_mul</span><span class="o">,</span> <span class="n">two_mul</span><span class="o">,</span> <span class="n">mul_div_cancel</span> <span class="bp">_</span> <span class="n">h</span><span class="o">,</span>
<span class="bp">-</span><span class="n">complex</span><span class="bp">.</span><span class="n">abs_div</span><span class="o">]</span><span class="bp">;</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">dist</span><span class="o">]</span> <span class="kn">using</span> <span class="n">hz</span><span class="bp">⟩</span>
</pre></div>

<a name="133335588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133335588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133335588">Kenny Lau (Sep 04 2018 at 20:47)</a>:</h4>
<p>finally 4 lines</p>

<a name="133335659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133335659" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133335659">Chris Hughes (Sep 04 2018 at 20:48)</a>:</h4>
<p>I think you broke the style guidelines with the last one.</p>

<a name="133335813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133335813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133335813">Kenny Lau (Sep 04 2018 at 20:51)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">test</span> <span class="o">:</span> <span class="n">has_complex_derivative_at</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">z</span><span class="o">,</span> <span class="n">z</span><span class="err">^</span><span class="mi">2</span><span class="o">)</span> <span class="mi">2</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="n">tendsto_nhds_of_metric</span><span class="bp">.</span><span class="mi">2</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">ε</span><span class="o">,</span> <span class="n">hε</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">z</span> <span class="n">hz</span><span class="o">,</span>
<span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="k">else</span>
<span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">pow_two</span><span class="o">,</span> <span class="n">add_mul_self_eq</span><span class="o">,</span> <span class="n">mul_div_cancel</span> <span class="bp">_</span> <span class="n">h</span><span class="o">,</span> <span class="bp">-</span><span class="n">complex</span><span class="bp">.</span><span class="n">abs_div</span><span class="o">]</span><span class="bp">;</span>
<span class="n">simpa</span> <span class="o">[</span><span class="n">dist</span><span class="o">]</span> <span class="kn">using</span> <span class="n">hz</span><span class="bp">⟩</span>
</pre></div>

<a name="133335883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133335883" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133335883">Kenny Lau (Sep 04 2018 at 20:52)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">test</span> <span class="o">:</span> <span class="n">has_complex_derivative_at</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">z</span><span class="o">,</span> <span class="n">z</span><span class="err">^</span><span class="mi">2</span><span class="o">)</span> <span class="mi">2</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="n">tendsto_nhds_of_metric</span><span class="bp">.</span><span class="mi">2</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">ε</span><span class="o">,</span> <span class="n">hε</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">z</span> <span class="n">hz</span><span class="o">,</span>
<span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="k">else</span>
<span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">pow_two</span><span class="o">,</span> <span class="n">add_mul_self_eq</span><span class="o">,</span> <span class="bp">-</span><span class="n">complex</span><span class="bp">.</span><span class="n">abs_div</span><span class="o">]</span><span class="bp">;</span>
<span class="n">simpa</span> <span class="o">[</span><span class="n">mul_div_cancel</span> <span class="bp">_</span> <span class="n">h</span><span class="o">,</span> <span class="n">dist</span><span class="o">]</span> <span class="kn">using</span> <span class="n">hz</span><span class="bp">⟩</span>
</pre></div>

<a name="133335938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133335938" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133335938">Kevin Buzzard (Sep 04 2018 at 20:54)</a>:</h4>
<p>Kenny this reminds me of Chris Ford's question "differentiate x^10*sin(x) five times"</p>

<a name="133335986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133335986" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133335986">Kevin Buzzard (Sep 04 2018 at 20:54)</a>:</h4>
<p>for which my answer was "10 x^9*sin(x) + x^10*cos(x) every time"</p>

<a name="133336000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133336000" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133336000">Kevin Buzzard (Sep 04 2018 at 20:54)</a>:</h4>
<p>Why don't you prove the product rule one time instead?</p>

<a name="133336022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133336022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133336022">Mario Carneiro (Sep 04 2018 at 20:55)</a>:</h4>
<p>or prove that the derivative of <code>x^2</code> is <code>2x</code> and then prove <code>2*1=2</code></p>

<a name="133336364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133336364" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133336364">Kenny Lau (Sep 04 2018 at 21:01)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">test</span> <span class="o">:</span> <span class="n">has_complex_derivative_at</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">z</span><span class="o">,</span> <span class="n">z</span><span class="err">^</span><span class="mi">2</span><span class="o">)</span> <span class="mi">2</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="n">tendsto_nhds_of_metric</span><span class="bp">.</span><span class="mi">2</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">ε</span><span class="o">,</span> <span class="n">hε</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">z</span> <span class="n">hz</span><span class="o">,</span>
<span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="k">else</span> <span class="n">trans_rel_right</span> <span class="bp">_</span>
<span class="o">(</span><span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">dist</span><span class="o">,</span> <span class="n">pow_two</span><span class="o">,</span> <span class="n">add_mul_self_eq</span><span class="o">,</span> <span class="n">mul_div_cancel</span> <span class="bp">_</span> <span class="n">h</span><span class="o">,</span> <span class="bp">-</span><span class="n">complex</span><span class="bp">.</span><span class="n">abs_div</span><span class="o">])</span> <span class="n">hz</span><span class="bp">⟩</span>
</pre></div>

<a name="133336621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133336621" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133336621">Kenny Lau (Sep 04 2018 at 21:05)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">test</span> <span class="o">:</span> <span class="n">has_complex_derivative_at</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">z</span><span class="o">,</span> <span class="n">z</span><span class="err">^</span><span class="mi">2</span><span class="o">)</span> <span class="mi">2</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="n">tendsto_nhds_of_metric</span><span class="bp">.</span><span class="mi">2</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">ε</span><span class="o">,</span> <span class="n">hε</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">z</span> <span class="n">hz</span><span class="o">,</span>
<span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="k">else</span> <span class="k">by</span> <span class="n">dsimp</span><span class="bp">;</span> <span class="n">rw</span> <span class="o">[</span><span class="n">pow_two</span><span class="o">]</span><span class="bp">;</span>
<span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">dist</span><span class="o">,</span> <span class="n">add_mul_self_eq</span><span class="o">,</span> <span class="n">mul_div_cancel</span> <span class="bp">_</span> <span class="n">h</span><span class="o">,</span> <span class="bp">-</span><span class="n">complex</span><span class="bp">.</span><span class="n">abs_div</span><span class="o">]</span> <span class="kn">using</span> <span class="n">hz</span><span class="bp">⟩</span>
</pre></div>

<a name="133337102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133337102" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133337102">Kenny Lau (Sep 04 2018 at 21:13)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">test</span> <span class="o">:</span> <span class="n">has_complex_derivative_at</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">z</span><span class="o">,</span> <span class="n">z</span><span class="err">^</span><span class="mi">2</span><span class="o">)</span> <span class="mi">2</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="n">tendsto_nhds_of_metric</span><span class="bp">.</span><span class="mi">2</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">ε</span><span class="o">,</span> <span class="n">hε</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">z</span> <span class="n">hz</span><span class="o">,</span>
<span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">pow_two</span><span class="o">,</span> <span class="n">add_mul_self_eq</span><span class="o">,</span> <span class="n">dist</span><span class="o">,</span> <span class="bp">-</span><span class="n">complex</span><span class="bp">.</span><span class="n">abs_div</span><span class="o">]</span> <span class="n">at</span> <span class="bp">*;</span>
<span class="n">by_cases</span> <span class="n">h</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="mi">0</span><span class="bp">;</span> <span class="o">[</span><span class="n">simpa</span> <span class="o">[</span><span class="n">h</span><span class="o">],</span> <span class="n">rwa</span> <span class="n">mul_div_cancel</span> <span class="bp">_</span> <span class="n">h</span><span class="o">]</span><span class="bp">⟩</span>
</pre></div>

<a name="133338281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133338281" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133338281">Kevin Buzzard (Sep 04 2018 at 21:34)</a>:</h4>
<p>one of those proofs actually conformed to the guidelines!</p>

<a name="133338317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133338317" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133338317">Kevin Buzzard (Sep 04 2018 at 21:35)</a>:</h4>
<p>I don't understand the last one. What is this <code>[simpa [h], rwa mul_div_cancel _ h]</code>?</p>

<a name="133338330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133338330" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133338330">Kevin Buzzard (Sep 04 2018 at 21:35)</a>:</h4>
<p>I mean, why is there a list of tactics?</p>

<a name="133338383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133338383" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133338383">Kenny Lau (Sep 04 2018 at 21:36)</a>:</h4>
<p>because there are two goals</p>

<a name="133338398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133338398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133338398">Kevin Buzzard (Sep 04 2018 at 21:36)</a>:</h4>
<p>oh! The n'th term in the list acts on the n'th goal?</p>

<a name="133338498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133338498" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133338498">Kevin Buzzard (Sep 04 2018 at 21:38)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">hq</span> <span class="o">:</span> <span class="n">q</span><span class="o">)</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∧</span> <span class="n">q</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span><span class="bp">;</span><span class="o">[</span><span class="n">exact</span> <span class="n">hp</span><span class="o">,</span><span class="n">exact</span> <span class="n">hq</span><span class="o">]</span>
<span class="kn">end</span>
</pre></div>


<p>woo!</p>

<a name="133359026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133359026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133359026">Sebastien Gouezel (Sep 05 2018 at 07:02)</a>:</h4>
<p>If you want to define differentiability in a rather broad setting, you certainly want it to contain differentiability on the left and on the right for 1-dimensional functions, and differentiability on manifolds with boundaries. The best setting for this is probably differentiability in the sense of Whitney, i.e., <code>f</code> is differentiable at <code>x</code> on <code>S</code> if there is a linear operator such that <code>f(y)-f(x) -L (y-x)/ ||y-x||</code> tends to <code>0</code> when <code>y</code>tends to <code>x</code>while remaining in <code>S</code>. This is certainly easy to define if you have a filter like <code>nhbds_within</code> (defined using <code>nhbds x</code> and <code>principal S</code> and the good filter operation (I never know in which direction they go)). This filter would also be useful to define continuity within <code>S</code>, as far as I can tell this is not in Lean?. </p>
<p>With the big warning that the differential is not unique in general, if the tangent directions of <code>S</code> at <code>x</code> do not span the whole subspace. For uniquenss statement, you would probably want that <code>S</code> is a neighborhood of <code>x</code>, say.</p>

<a name="133359631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/partial%20functions%20again/near/133359631" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/07463partialfunctionsagain.html#133359631">Johannes Hölzl (Sep 05 2018 at 07:20)</a>:</h4>
<p>the good filter operation is infimum: <code>nhds_within a s := nhds a ⊓ principal s</code></p>


{% endraw %}

{% include archive_update.html %}