---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/56373fundamentalsystemofneighborhoods.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html">fundamental system of neighborhoods</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="135166983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135166983" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135166983">Johan Commelin (Oct 04 2018 at 11:24)</a>:</h4>
<p>Do we have the notion of a <em>fundamental system of neighborhoods of 0</em> for topological groups?</p>

<a name="135171190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135171190" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135171190">Kevin Buzzard (Oct 04 2018 at 12:30)</a>:</h4>
<p>This would be a basis for the filter <code>nhds 0</code>, right? Or are you asking for more?</p>

<a name="135171928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135171928" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135171928">Johan Commelin (Oct 04 2018 at 12:35)</a>:</h4>
<p>It probably is. I just don't know enough about filters to be sure...</p>

<a name="135173055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135173055" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135173055">Kevin Buzzard (Oct 04 2018 at 12:42)</a>:</h4>
<p>I read some blog post about filters recently. Here are two examples of filters on a topological space X. Choose x in X. Then (1) the set of all subsets of X containing x is a filter (the principal filter). But much more interesting (2) the set of all subsets V of X such that x is in the interior of V -- this is also a filter. This is the filter of neighbourhoods of x and it comes up a lot. For example one can formalise the notion that a map of topological spaces f:X -&gt; Y is continuous at a point x using this neighbourhood filter (more naive attempts at a definition, such as "pre-image of an open set containing f(x) is open" are hopelessly poorly behaved and wrong; the filter language is perfect for this). If F is a filter and V is in F then any set containing V is also in F, so you could imagine a filter being generated by a subset and the construction basically being that you throw in any set that contains one of your basis sets; if your basis is well-behaved then this will be a filter. I think this is the notion you want. Any V whose interior contains 0 will contain as a subset some element of your fundamental system.</p>

<a name="135173763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135173763" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135173763">Johan Commelin (Oct 04 2018 at 12:46)</a>:</h4>
<p>Ok, so I want to write <code>(nhds 0) = "the smallest filter containing {myset}"</code>. Is that right?</p>

<a name="135173818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135173818" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135173818">Johan Commelin (Oct 04 2018 at 12:46)</a>:</h4>
<p>That would mean that <code>{myset}</code> is a fundamental system of neighbourhoods around 0.</p>

<a name="135174187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135174187" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135174187">Kevin Buzzard (Oct 04 2018 at 12:49)</a>:</h4>
<p>I think that's right. It probably goes something like this (and you could easily check in Lean!) If B is a bunch of subsets of X (maybe B has to be non-empty), and if the intersection of any two elements of B contains an element of B, then I think that the set F of all subsets of X with the property that they contain an element of B, should be a filter. I'm thinking of B as a fund system of nhds of x and <code>F = nhds x</code>. Hopefully someone will correct me if I've missed something.</p>

<a name="135174575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135174575" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135174575">Kevin Buzzard (Oct 04 2018 at 12:51)</a>:</h4>
<p>I'm pretty sure that arbitrary intersection of filters is a filter, so one can always look at the filter generated by a random collection of subsets of X, but in the basis case it's simpler because you only have to look at sets containing a basis element, rather than sets containing a finite intersection of basis elements. These were just my thoughts after reading the definition, I don't know some reference where this is all treated succinctly and clearly, although I would imagine that there will be one somewhere.</p>

<a name="135174585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135174585" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135174585">Johannes Hölzl (Oct 04 2018 at 12:51)</a>:</h4>
<p>The smallest filter containing <code>s</code> is <code>filter.generate s</code> (<a href="https://github.com/leanprover/mathlib/blob/master/order/filter.lean#L241" target="_blank" title="https://github.com/leanprover/mathlib/blob/master/order/filter.lean#L241">https://github.com/leanprover/mathlib/blob/master/order/filter.lean#L241</a>)</p>

<a name="135174787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135174787" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135174787">Kevin Buzzard (Oct 04 2018 at 12:52)</a>:</h4>
<p>But it would be easier to prove stuff about the smallest filter containing s if s had some nice properties to start with, because then you wouldn't need all the cases in the inductive definition.</p>

<a name="135174846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135174846" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135174846">Johannes Hölzl (Oct 04 2018 at 12:52)</a>:</h4>
<p>Note that the order on filter is flipped, i.e. the arbitrary set-intersection of the sets of filters is the supremum on filters.</p>

<a name="135175198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135175198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135175198">Kevin Buzzard (Oct 04 2018 at 12:54)</a>:</h4>
<p>Thanks Johannes for that important reminder! I'm sure there's some logic to it but it always makes me very nervous about filters. There is I think both top and bottom filters, but I am always a bit confused about whether the empty set is allowed to be an element of a filter, and whether the empty collection is a filter. Conventions maybe differ in different places?</p>

<a name="135175242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135175242" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135175242">Kevin Buzzard (Oct 04 2018 at 12:54)</a>:</h4>
<p>In particular I never seem to know what is top and bot :-)</p>

<a name="135175587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135175587" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135175587">Patrick Massot (Oct 04 2018 at 12:56)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/completions/analysis/topology/topological_groups.lean#L102" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/completions/analysis/topology/topological_groups.lean#L102">https://github.com/leanprover-community/mathlib/blob/completions/analysis/topology/topological_groups.lean#L102</a></p>

<a name="135175922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135175922" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135175922">Johannes Hölzl (Oct 04 2018 at 12:57)</a>:</h4>
<p>the empty set is not a filter, the filter containing the empty set is the bottom filter</p>

<a name="135176397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135176397" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135176397">Johan Commelin (Oct 04 2018 at 13:00)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> Why do you ask <code>pure 0 ≤ Z</code>? Why not equality?</p>

<a name="135176446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135176446" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135176446">Johan Commelin (Oct 04 2018 at 13:00)</a>:</h4>
<p>I've got the very ugly</p>
<div class="codehilite"><pre><span></span><span class="o">(</span><span class="n">filter</span><span class="bp">.</span><span class="n">generate</span> <span class="o">{</span><span class="n">U&#39;</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="n">pnat</span><span class="o">,</span> <span class="n">U&#39;</span> <span class="bp">=</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="n">y</span><span class="err">^</span><span class="o">(</span><span class="n">n</span><span class="o">:</span><span class="bp">ℕ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span><span class="o">}}</span> <span class="bp">=</span> <span class="o">(</span><span class="n">nhds</span> <span class="mi">0</span><span class="o">))</span>
</pre></div>

<a name="135176459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135176459" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135176459">Kevin Buzzard (Oct 04 2018 at 13:00)</a>:</h4>
<p>Note that if a filter contains the empty set then it contains all sets, and because of this backwards convention this is the one at the bottom</p>

<a name="135176522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135176522" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135176522">Johan Commelin (Oct 04 2018 at 13:00)</a>:</h4>
<p>I hope that is the same thing as: <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><msup><mi>U</mi><mi>n</mi></msup><mi mathvariant="normal">∣</mi><mi>n</mi><mo>≥</mo><mn>1</mn><mo>}</mo></mrow><annotation encoding="application/x-tex">\{ U^n | n \ge 1 \}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mopen">{</span><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span></span></span></span></span><span class="mord mathrm">∣</span><span class="mord mathit">n</span><span class="mrel">≥</span><span class="mord mathrm">1</span><span class="mclose">}</span></span></span></span> forms a neighbourhood basis of <code>0</code>.</p>

<a name="135177578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135177578" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135177578">Johannes Hölzl (Oct 04 2018 at 13:06)</a>:</h4>
<p><code>Z</code> is supposed to be the neighborhood filter around <code>0</code>. <code>Z = pure 0</code> would be wrong, it would result in the discrete topology.</p>

<a name="135178743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135178743" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135178743">Johannes Hölzl (Oct 04 2018 at 13:11)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> there are some rules to work with <code>generate</code>. The best is to use <code>le_antisymm</code>, one side is reduced with <code>sets_iff_generate </code> to the inclusion that all generated elements are neighborhoods. For the other direction it depends on your topology which base element you can select</p>

<a name="135179271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135179271" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135179271">Johan Commelin (Oct 04 2018 at 13:14)</a>:</h4>
<p>Hmm, I'll have to try and figure out if I can make sense of that.</p>

<a name="135179296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135179296" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135179296">Johan Commelin (Oct 04 2018 at 13:14)</a>:</h4>
<p>I need to prove</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">tfae_i_to_ii</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">U</span> <span class="n">T</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">,</span> <span class="n">T</span> <span class="err">⊆</span> <span class="n">U</span> <span class="bp">∧</span> <span class="n">set</span><span class="bp">.</span><span class="n">finite</span> <span class="n">T</span> <span class="bp">∧</span>
<span class="o">(</span><span class="n">filter</span><span class="bp">.</span><span class="n">generate</span> <span class="o">{</span><span class="n">U&#39;</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="n">pnat</span><span class="o">,</span> <span class="n">U&#39;</span> <span class="bp">=</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="n">y</span><span class="err">^</span><span class="o">(</span><span class="n">n</span><span class="o">:</span><span class="bp">ℕ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span><span class="o">}}</span> <span class="bp">=</span> <span class="o">(</span><span class="n">nhds</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">∧</span>
<span class="o">{</span><span class="n">y</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">t</span> <span class="err">∈</span> <span class="n">T</span><span class="o">)</span> <span class="o">(</span><span class="n">u</span> <span class="err">∈</span> <span class="n">U</span><span class="o">),</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">u</span><span class="o">}</span> <span class="bp">=</span> <span class="o">{</span><span class="n">y</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">t</span> <span class="err">∈</span> <span class="n">U</span><span class="o">)</span> <span class="o">(</span><span class="n">u</span> <span class="err">∈</span> <span class="n">U</span><span class="o">),</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">u</span><span class="o">}</span> <span class="bp">∧</span>
<span class="o">{</span><span class="n">y</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">t</span> <span class="err">∈</span> <span class="n">U</span><span class="o">)</span> <span class="o">(</span><span class="n">u</span> <span class="err">∈</span> <span class="n">U</span><span class="o">),</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">t</span> <span class="bp">*</span> <span class="n">u</span><span class="o">}</span> <span class="err">⊆</span> <span class="n">U</span><span class="o">)</span> <span class="bp">→</span>
<span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">A₀</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="o">[</span><span class="n">h</span> <span class="o">:</span> <span class="n">is_subring</span> <span class="n">A₀</span><span class="o">],</span> <span class="k">by</span> <span class="n">haveI</span> <span class="o">:=</span> <span class="n">h</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">is_ring_of_definition</span> <span class="n">A₀</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
 <span class="n">rintro</span> <span class="bp">⟨</span><span class="n">U</span><span class="o">,</span> <span class="n">T</span><span class="o">,</span> <span class="n">Tsub</span><span class="o">,</span> <span class="n">Tfin</span><span class="o">,</span> <span class="n">hnhds</span><span class="o">,</span> <span class="n">hTU</span><span class="o">,</span> <span class="n">hU2</span><span class="bp">⟩</span><span class="o">,</span>
 <span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>

<a name="135179311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135179311" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135179311">Johan Commelin (Oct 04 2018 at 13:14)</a>:</h4>
<p>It looks really scary</p>

<a name="135180278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135180278" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135180278">Johannes Hölzl (Oct 04 2018 at 13:18)</a>:</h4>
<p>Uh, the <code>haveI</code> is super ugly. One more reason to not use type classes too often...<br>
I think I would prefer if you use <code>@is_ring_of_definition ...</code></p>

<a name="135180692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135180692" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135180692">Johan Commelin (Oct 04 2018 at 13:20)</a>:</h4>
<p>Hmm... we should just have bundled subrings (-;</p>

<a name="135180717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135180717" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135180717">Johannes Hölzl (Oct 04 2018 at 13:20)</a>:</h4>
<p>also an option</p>

<a name="135180743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135180743" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135180743">Johannes Hölzl (Oct 04 2018 at 13:21)</a>:</h4>
<p>what is <code>is_ring_of_definition</code>?</p>

<a name="135180784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135180784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135180784">Johan Commelin (Oct 04 2018 at 13:21)</a>:</h4>
<p>Also nasty (-;</p>

<a name="135180942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135180942" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135180942">Johan Commelin (Oct 04 2018 at 13:22)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">is_ring_of_definition</span> <span class="o">(</span><span class="n">A₀</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="o">[</span><span class="n">is_subring</span> <span class="n">A₀</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="n">is_open</span> <span class="n">A₀</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">J</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A₀</span><span class="o">)</span> <span class="o">[</span><span class="n">hJ</span> <span class="o">:</span> <span class="n">is_ideal</span> <span class="n">J</span><span class="o">]</span> <span class="o">(</span><span class="n">gen</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A₀</span><span class="o">),</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">finite</span> <span class="n">gen</span> <span class="bp">∧</span> <span class="n">span</span> <span class="n">gen</span> <span class="bp">=</span> <span class="n">J</span><span class="o">)</span> <span class="bp">∧</span>
<span class="o">(</span><span class="k">by</span> <span class="n">haveI</span> <span class="o">:=</span> <span class="n">topological_subring</span> <span class="n">A₀</span><span class="bp">;</span> <span class="n">haveI</span> <span class="o">:=</span> <span class="n">hJ</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">is_ideal_adic</span> <span class="n">J</span><span class="o">))</span>
</pre></div>

<a name="135181044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135181044" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135181044">Johan Commelin (Oct 04 2018 at 13:22)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">is_ideal_adic</span> <span class="o">(</span><span class="n">J</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="o">[</span><span class="n">is_ideal</span> <span class="n">J</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="bp">∀</span> <span class="n">n</span><span class="o">,</span> <span class="n">is_open</span> <span class="o">(</span><span class="n">pow_ideal</span> <span class="n">J</span> <span class="n">n</span><span class="o">))</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">,</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="err">∈</span> <span class="n">S</span> <span class="bp">→</span> <span class="n">is_open</span> <span class="n">S</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="n">n</span><span class="o">,</span> <span class="n">pow_ideal</span> <span class="n">J</span> <span class="n">n</span> <span class="err">⊆</span> <span class="n">S</span><span class="o">)</span>

<span class="n">def</span> <span class="n">is_adic</span> <span class="o">(</span><span class="n">A₀</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="o">[</span><span class="n">is_subring</span> <span class="n">A₀</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">J</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A₀</span><span class="o">)</span> <span class="o">[</span><span class="n">hJ</span> <span class="o">:</span> <span class="n">is_ideal</span> <span class="n">J</span><span class="o">],</span>
<span class="o">(</span><span class="k">by</span> <span class="n">haveI</span> <span class="o">:=</span> <span class="n">topological_subring</span> <span class="n">A₀</span><span class="bp">;</span> <span class="n">haveI</span> <span class="o">:=</span> <span class="n">hJ</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">is_ideal_adic</span> <span class="n">J</span><span class="o">)</span>
</pre></div>

<a name="135181605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135181605" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135181605">Johan Commelin (Oct 04 2018 at 13:25)</a>:</h4>
<p>But, I'm not looking for help with the maths. I'm just wondering how the assumptions could be formulated in a nicer way.</p>

<a name="135181690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135181690" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135181690">Johan Commelin (Oct 04 2018 at 13:25)</a>:</h4>
<p>Should we put a <code>has_mul</code> on <code>set A</code> if <code>A</code> has <code>has_mul</code>?</p>

<a name="135181830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135181830" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135181830">Johan Commelin (Oct 04 2018 at 13:26)</a>:</h4>
<p>if <code>set A</code> is a monoid, then I could just write <code>U^n</code> and <code>T * U</code>.</p>

<a name="135182127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135182127" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135182127">Johannes Hölzl (Oct 04 2018 at 13:27)</a>:</h4>
<p>First thing: I wouldn't use the existential quantifier in the assumption, have all the things in there directly as assumption</p>

<a name="135182221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135182221" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135182221">Johannes Hölzl (Oct 04 2018 at 13:28)</a>:</h4>
<p><code>{y : A | ∃ (t ∈ U) (u ∈ U), y = t * u} = (*) &lt;$&gt; U &lt;*&gt; T</code></p>

<a name="135182274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135182274" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135182274">Johan Commelin (Oct 04 2018 at 13:28)</a>:</h4>
<p>Hmm, in fact it is an iff, but I only stated one implication.</p>

<a name="135182389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135182389" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135182389">Johannes Hölzl (Oct 04 2018 at 13:28)</a>:</h4>
<p><code>(*) &lt;$&gt; T &lt;*&gt; U = (*) &lt;$&gt; U &lt;*&gt; U ∧ (*) &lt;$&gt; U &lt;*&gt; U ⊆ U</code></p>

<a name="135182531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135182531" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135182531">Johan Commelin (Oct 04 2018 at 13:29)</a>:</h4>
<p>Not sure if that improves readability.... what do you think of my <code>monoid (set A)</code> suggestion?</p>

<a name="135182577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135182577" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135182577">Johannes Hölzl (Oct 04 2018 at 13:29)</a>:</h4>
<p>The <code>&lt;$&gt;</code> and <code>&lt;*&gt;</code> are from the applicative functor structor on <code>set</code>. Their function is to lift arbitrary functions to sets.</p>

<a name="135182755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135182755" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135182755">Johan Commelin (Oct 04 2018 at 13:30)</a>:</h4>
<p>I don't think a random mathematician will care about that. When they read Kevin's perfectoid paper, they will want to see code that they roughly understand</p>

<a name="135182974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135182974" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135182974">Johannes Hölzl (Oct 04 2018 at 13:31)</a>:</h4>
<p>you can certainly add the <code>monoid (set A)</code> locally. I'm not sure if we want to have this setup generally</p>

<a name="135193215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135193215" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135193215">Mario Carneiro (Oct 04 2018 at 14:40)</a>:</h4>
<p>Ooh, this is nice. I know the mathematicians here are going to freak, but I really like that the CS version of abstract nonsense has given us a way to easily talk about lifting functions to sets like <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo>+</mo><mi>T</mi></mrow><annotation encoding="application/x-tex">S + T</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span></span></p>

<a name="135193942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135193942" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135193942">Johan Commelin (Oct 04 2018 at 14:50)</a>:</h4>
<p>What does "Ooh, this is nice" mean? As in: just use it, even if it is completely unreadable?</p>

<a name="135194347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135194347" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135194347">Mario Carneiro (Oct 04 2018 at 14:55)</a>:</h4>
<p>Basically yes. Treat it like an idiom or set phrase to say this</p>

<a name="135194459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135194459" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135194459">Mario Carneiro (Oct 04 2018 at 14:57)</a>:</h4>
<p>When Simon first showed me the <code>f &lt;$&gt; x &lt;*&gt; y</code> idiom for applying functions to monadic values I was mystified, but now I quite like it since it looks so much like regular function application</p>

<a name="135194503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135194503" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135194503">Mario Carneiro (Oct 04 2018 at 14:58)</a>:</h4>
<p>(It is equivalent to the monadic block <code>do a &lt;- x, b &lt;- y, return (f a b)</code>)</p>

<a name="135194647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135194647" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135194647">Mario Carneiro (Oct 04 2018 at 14:59)</a>:</h4>
<p>Until I saw this thread I thought that we would basically have to define a function <code>lift2 f A B</code> for doing this, and it would be even less nice to read</p>

<a name="135194792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135194792" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135194792">Johan Commelin (Oct 04 2018 at 15:01)</a>:</h4>
<p>What is wrong with the <code>monoid</code> instance?</p>

<a name="135194816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135194816" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135194816">Mario Carneiro (Oct 04 2018 at 15:01)</a>:</h4>
<p>That said, there are also other semi-slick ways of talking about this, like <code>uncurry (+) '' (A × B)</code></p>

<a name="135194901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135194901" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135194901">Mario Carneiro (Oct 04 2018 at 15:02)</a>:</h4>
<p>Well, it doesn't generalize as much as this</p>

<a name="135194967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135194967" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135194967">Mario Carneiro (Oct 04 2018 at 15:03)</a>:</h4>
<p>It may also cause a problem when we have a conflicting meaning for multiplication of sets</p>

<a name="135195018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fundamental%20system%20of%20neighborhoods/near/135195018" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/56373fundamentalsystemofneighborhoods.html#135195018">Mario Carneiro (Oct 04 2018 at 15:04)</a>:</h4>
<p>I think <code>has_sub</code> has a conflict</p>


{% endraw %}
