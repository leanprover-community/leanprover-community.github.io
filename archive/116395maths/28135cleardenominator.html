---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/28135cleardenominator.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/28135cleardenominator.html">clear_denominator</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="127303903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/clear_denominator/near/127303903" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/28135cleardenominator.html#127303903">Patrick Massot (May 30 2018 at 11:54)</a>:</h4>
<p>Let's start a new thread about this</p>

<a name="127303917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/clear_denominator/near/127303917" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/28135cleardenominator.html#127303917">Patrick Massot (May 30 2018 at 11:55)</a>:</h4>
<p>It's a dream about a tactic called <code>clear_denominator</code></p>

<a name="127303920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/clear_denominator/near/127303920" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/28135cleardenominator.html#127303920">Patrick Massot (May 30 2018 at 11:55)</a>:</h4>
<p>Assume the current goal is either an equality or an inequality</p>

<a name="127303973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/clear_denominator/near/127303973" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/28135cleardenominator.html#127303973">Patrick Massot (May 30 2018 at 11:57)</a>:</h4>
<p>It has a bunch of +, -, *, /, maybe • (scalar multiplication)</p>

<a name="127303979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/clear_denominator/near/127303979" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/28135cleardenominator.html#127303979">Patrick Massot (May 30 2018 at 11:57)</a>:</h4>
<p>we want to get rid of all divisions</p>

<a name="127303981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/clear_denominator/near/127303981" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/28135cleardenominator.html#127303981">Patrick Massot (May 30 2018 at 11:57)</a>:</h4>
<p>the tactic walks through the goal and builds a list of all denominators (right-hand argument of a /)</p>

<a name="127304035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/clear_denominator/near/127304035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/28135cleardenominator.html#127304035">Patrick Massot (May 30 2018 at 11:59)</a>:</h4>
<p>It creates sub-goals <code>x ≠ 0</code> for all denominators <code>x</code>, and immediately tries to discharge them by <code>assumption</code> or applying <code>ne_of_gt</code> or <code>ne_of_lt</code> to all assumptions</p>

<a name="127304043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/clear_denominator/near/127304043" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/28135cleardenominator.html#127304043">Patrick Massot (May 30 2018 at 12:00)</a>:</h4>
<p>then it multiplies both sides of the goal by the product of all denominators, using the relevant lemmas (assuming the subgoals)</p>

<a name="127304095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/clear_denominator/near/127304095" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/28135cleardenominator.html#127304095">Patrick Massot (May 30 2018 at 12:00)</a>:</h4>
<p>and then simplifies the goal to get rid of divisions by using <code>x/x = 1</code></p>

<a name="127304100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/clear_denominator/near/127304100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/28135cleardenominator.html#127304100">Patrick Massot (May 30 2018 at 12:01)</a>:</h4>
<p>Of course nested divisions would be problematic</p>

<a name="127304107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/clear_denominator/near/127304107" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/28135cleardenominator.html#127304107">Patrick Massot (May 30 2018 at 12:01)</a>:</h4>
<p>The Cauchy-Schwarz thread is an example where you could use this</p>

<a name="127304282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/clear_denominator/near/127304282" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/28135cleardenominator.html#127304282">Assia Mahboubi (May 30 2018 at 12:06)</a>:</h4>
<p>The inequality case is more difficult because of sign conditions, isn't it? But even in the equality case, the size of the formula to be proved can become quite large. Coq has a <code>field</code> tactic, built on top of <code>ring</code>, that does about the same thing as what you describe I think.</p>

<a name="127304898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/clear_denominator/near/127304898" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/28135cleardenominator.html#127304898">Patrick Massot (May 30 2018 at 12:25)</a>:</h4>
<p>Indeed signs matter in inequalities</p>

<a name="127304904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/clear_denominator/near/127304904" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/28135cleardenominator.html#127304904">Patrick Massot (May 30 2018 at 12:25)</a>:</h4>
<p>And we clearly need this field tactic (but Mario always want us to suffer instead of using automation)</p>

<a name="127306985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/clear_denominator/near/127306985" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/28135cleardenominator.html#127306985">Assia Mahboubi (May 30 2018 at 13:14)</a>:</h4>
<p>The <code>field</code> problem is more difficult than the <code>ring</code> one. It probably has to start as a partial procedure, like the one you describe, because a complete one is much more delicate from an algorithmic point of view (you need stuff like subresultants or even may be probabilistic methods otherwise the complexity and growth of the polynomials are dreadful).</p>


{% endraw %}

{% include archive_update.html %}