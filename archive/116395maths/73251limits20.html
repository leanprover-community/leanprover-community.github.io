---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/73251limits20.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html">limits 2.0</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="137084883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137084883" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137084883">Reid Barton (Nov 02 2018 at 21:49)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span>, how are the new limits coming along? I took a peek at community mathlib and it looks like things are happening!</p>

<a name="137086701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137086701" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137086701">Scott Morrison (Nov 02 2018 at 22:27)</a>:</h4>
<p>Yes, I think it's pretty close now.</p>

<a name="137086760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137086760" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137086760">Scott Morrison (Nov 02 2018 at 22:28)</a>:</h4>
<p>I spent (too long) trying to follow the argument Emily Riehl uses in her book to explain why (C \func D) has limits of shape J whenever D has limits of shape J.</p>

<a name="137086763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137086763" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137086763">Scott Morrison (Nov 02 2018 at 22:28)</a>:</h4>
<p>It turned out to be really gross to formalise.</p>

<a name="137086772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137086772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137086772">Scott Morrison (Nov 02 2018 at 22:29)</a>:</h4>
<p>(She first explains that (discrete C) \func D has those limits, and then shows that the forgetful functor (C \func D) \func ((discete C) \func D) creates limits.)</p>

<a name="137086854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137086854" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137086854">Scott Morrison (Nov 02 2018 at 22:30)</a>:</h4>
<p>So I've just switched to much more directly constructing limits in (C \func D), and then showing that the evaluation functor ev_X : (C \func D) \func D preserves limits.</p>

<a name="137086861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137086861" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137086861">Scott Morrison (Nov 02 2018 at 22:30)</a>:</h4>
<p>This seems to be nice and clean, so I think I'm happy with that for now.</p>

<a name="137087044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137087044" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137087044">Scott Morrison (Nov 02 2018 at 22:34)</a>:</h4>
<p>Still to do:<br>
1. copy-and-pasting for all the dual notions (I think I'm not ready to make tactics for this yet)<br>
2. quite a bit of cleanup...<br>
3. port a few examples from the old development<br>
4. a few @[simp] lemmas describing how colimit.pre and colimit.desc work in the category of types, which I got confused about...</p>

<a name="137087053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137087053" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137087053">Scott Morrison (Nov 02 2018 at 22:34)</a>:</h4>
<p>If anyone wants to hack on the <code>limits-others-new</code> branch on leanprover-community, feel free. :-)</p>

<a name="137087081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137087081" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137087081">Scott Morrison (Nov 02 2018 at 22:35)</a>:</h4>
<p>oh, and 5. I need to try porting the construction of limits from equalizers and products to the new setup.</p>

<a name="137090585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137090585" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137090585">Reid Barton (Nov 02 2018 at 23:59)</a>:</h4>
<p>Sounds good! I fixed the build by making <code>auto_cases</code> work on quotients again and I also made a couple of minor simplifications which you might still be interested in.</p>

<a name="137090591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137090591" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137090591">Reid Barton (Nov 02 2018 at 23:59)</a>:</h4>
<p>I think I will try to check off a few of the items on my "basic category theory" list, then.</p>

<a name="137107888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137107888" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137107888">Johan Commelin (Nov 03 2018 at 10:08)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> I'm happy to help out with some of the dualising work. Which parts would I best start to work on?</p>

<a name="137107895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137107895" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137107895">Johan Commelin (Nov 03 2018 at 10:09)</a>:</h4>
<p>Are certain files pretty stable, and others in flux? Or can I just start anywhere?</p>

<a name="137116560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137116560" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137116560">Reid Barton (Nov 03 2018 at 15:17)</a>:</h4>
<p>lol, I started looking at the new limits in more detail, and got annoyed by all these <code>const J C X</code> with so many explicit arguments, and tried making at least the <code>C</code> argument implicit (<code>X : C</code>), and immediately got a bunch of errors related to coercions</p>

<a name="137116561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137116561" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137116561">Reid Barton (Nov 03 2018 at 15:18)</a>:</h4>
<p>No wonder Scott went on that rant recently :)</p>

<a name="137131371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137131371" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137131371">Scott Morrison (Nov 03 2018 at 22:36)</a>:</h4>
<p>That rant got started after I tried making a coercion all the way from <code>C</code> to <code>J \func C</code>, so you really could just write <code>X</code> instead of <code>const J C X</code>, as we do in the real world.</p>

<a name="137131372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137131372" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137131372">Scott Morrison (Nov 03 2018 at 22:36)</a>:</h4>
<p>Let's just say it didn't work out. :-)</p>

<a name="137138441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137138441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137138441">Scott Morrison (Nov 04 2018 at 02:43)</a>:</h4>
<p>(deleted a dumb question; I really should check the statement when I'm having trouble proving something....)</p>

<a name="137151311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137151311" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137151311">Scott Morrison (Nov 04 2018 at 10:33)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="110032">@Reid Barton</span>, any chance you'd like to help me with any of the following sorries, on the HEAD of <code>limits-others-new</code>:</p>
<div class="codehilite"><pre><span></span>def is_limit.of_extensions_iso (h : is_iso t.extensions) : is_limit t :=
{ lift := λ s, (inv t.extensions) s.X s.π,
  fac&#39; := begin tidy, sorry, end,
  uniq&#39; := begin tidy, sorry, end }
</pre></div>

<a name="137151313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137151313" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137151313">Scott Morrison (Nov 04 2018 at 10:33)</a>:</h4>
<div class="codehilite"><pre><span></span>def cone.of_representable_cones (F : J ⥤ C) [r : representable F.cones] : cone F :=
{ X := r.X,
  π := r.w.hom r.X (𝟙 r.X) }

def extensions_iso_of_representable_cones (F : J ⥤ C) [r : representable F.cones] :
  is_iso (cone.of_representable_cones F).extensions :=
{ inv :=
  { app := λ X, r.w.inv X,
    naturality&#39; := λ X Y f, begin tidy, sorry end },
  hom_inv_id&#39; := begin tidy, sorry end,
  inv_hom_id&#39; := sorry }

def has_limit_of_cones_representable (F : J ⥤ C) [r : representable F.cones] : has_limit F :=
{ cone := cone.of_representable_cones F,
  is_limit := is_limit.of_extensions_iso (extensions_iso_of_representable_cones F) }

def cones_representable_of_has_limit (F : J ⥤ C) [has_limit F] : representable F.cones :=
{ X := (has_limit.cone F).X,
  w := (has_limit.is_limit F).natural_equiv }
</pre></div>

<a name="137151406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137151406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137151406">Scott Morrison (Nov 04 2018 at 10:36)</a>:</h4>
<p>For context, here <code>F.cones</code> is the functor <code>C^op \to Type</code> so <code>F.cones X</code> is the type of natural transformations <code>X \natt F</code>, and <code>t.extensions</code>, for <code>t</code> a cone, is the natural transformation <code>yoneda C t.X ⟶ F.cones</code> given by whiskering a cone.</p>

<a name="137151412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137151412" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137151412">Scott Morrison (Nov 04 2018 at 10:36)</a>:</h4>
<p>I'm finding these sorries very confusing. I'm not sure that this is a sign that the design is bad, just that this is a corner of basic category theory that no one ever writes out the details of. :-)</p>

<a name="137175002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137175002" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137175002">Reid Barton (Nov 04 2018 at 23:12)</a>:</h4>
<p>I managed to prove them. It took me 2 hours to write about a dozen lines of code.</p>

<a name="137175591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137175591" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137175591">Scott Morrison (Nov 04 2018 at 23:34)</a>:</h4>
<p>Awesome!</p>

<a name="137175819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137175819" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137175819">Scott Morrison (Nov 04 2018 at 23:42)</a>:</h4>
<p>1. I'm glad it took you a while, it makes me feel less incompetent. :-)</p>

<a name="137175821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137175821" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137175821">Scott Morrison (Nov 04 2018 at 23:42)</a>:</h4>
<p>2. Is there something we can learn from this having been hard??</p>

<a name="137175831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137175831" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137175831">Scott Morrison (Nov 04 2018 at 23:43)</a>:</h4>
<p>It seems like a bad sign that something a textbook contents itself with merely stating, was a struggle in the library.</p>

<a name="137175893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137175893" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137175893">Reid Barton (Nov 04 2018 at 23:45)</a>:</h4>
<p>I also just proved that equalizers are monomorphisms, since that was the other sorry</p>

<a name="137175939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137175939" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137175939">Reid Barton (Nov 04 2018 at 23:46)</a>:</h4>
<p>and the lemma I needed to prove it (<code>is_limit.hom_eq</code>; maybe not a very good name? but it's hard to think of different names for all the different aspects of the universal property) is something that I used extensively in my homotopy theory library</p>

<a name="137175949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137175949" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137175949">Scott Morrison (Nov 04 2018 at 23:47)</a>:</h4>
<p>Ah, thanks!</p>

<a name="137175995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137175995" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137175995">Reid Barton (Nov 04 2018 at 23:48)</a>:</h4>
<p>I tend to think of it as a general "extensionality" property for limits, since it generalizes funext/prod.ext</p>

<a name="137176009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176009" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176009">Scott Morrison (Nov 04 2018 at 23:49)</a>:</h4>
<p>It's a close relative of</p>
<div class="codehilite"><pre><span></span>@[extensionality] lemma limit.hom_ext {F : J ⥤ C} [has_limit F] {X : C}
  {f g : X ⟶ limit F}
  (w : ∀ j, f ≫ limit.π F j = g ≫ limit.π F j) : f = g :=
</pre></div>

<a name="137176055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176055" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176055">Scott Morrison (Nov 04 2018 at 23:50)</a>:</h4>
<p>I wonder if we should unify them.</p>

<a name="137176066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176066" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176066">Reid Barton (Nov 04 2018 at 23:51)</a>:</h4>
<p>Oh yeah. Isn't it the same thing?</p>

<a name="137176067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176067" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176067">Reid Barton (Nov 04 2018 at 23:51)</a>:</h4>
<p>I think you should never prove anything about <code>limit</code>, always <code>is_limit</code></p>

<a name="137176068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176068" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176068">Reid Barton (Nov 04 2018 at 23:51)</a>:</h4>
<p>and then provide a wrapper for <code>limit</code> if that seems useful</p>

<a name="137176108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176108" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176108">Reid Barton (Nov 04 2018 at 23:52)</a>:</h4>
<p>because there are lots of ways you could get your hands on a limit cone, only one of which is from the category's chosen limits (if it even has them)</p>

<a name="137176114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176114" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176114">Reid Barton (Nov 04 2018 at 23:53)</a>:</h4>
<p>I also did this for <code>is_equalizer.mono</code></p>

<a name="137176162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176162">Scott Morrison (Nov 04 2018 at 23:54)</a>:</h4>
<p>Hmm, I'm on the fence here.</p>

<a name="137176178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176178" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176178">Scott Morrison (Nov 04 2018 at 23:55)</a>:</h4>
<p>One can of course, with some hassle, use theorems stated in terms of <code>limit</code> in situations where you just have an <code>is_limit</code>, by using <code>is_limit.ext</code> to prove that your <code>is_limit</code> is actually equal to the one <code>limit</code> thinks it's using.</p>

<a name="137176217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176217" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176217">Reid Barton (Nov 04 2018 at 23:56)</a>:</h4>
<blockquote>
<p>2. Is there something we can learn from this having been hard??</p>
</blockquote>
<p>I wondered about this too. My initial feeling was that there were too many definitions built up (<code>cones</code>/<code>representable</code>) with too little supporting theory, but upon reflection this didn't really seem to stand up, considering the eventually successful proof was to think hard about the actual fact which was needed, and then have Lean observe that it was enough.</p>

<a name="137176238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176238" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176238">Reid Barton (Nov 04 2018 at 23:57)</a>:</h4>
<p>In lean-homotopy-theory I have many, many applications of facts like "a pushout of a pushout is a pushout" and I work in a setting where the category is not assumed to have pushouts</p>

<a name="137176282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176282" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176282">Reid Barton (Nov 04 2018 at 23:58)</a>:</h4>
<p>So that's one obstruction to rewriting things in terms of chosen <code>limit</code>s</p>

<a name="137176346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176346" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176346">Reid Barton (Nov 05 2018 at 00:00)</a>:</h4>
<p>But it is actually also just more practical in general, because it saves you from transporting the relevant facts across an isomorphism, and dealing with isomorphisms is disproportionately difficult in Lean</p>

<a name="137176403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176403" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176403">Scott Morrison (Nov 05 2018 at 00:02)</a>:</h4>
<p>okay --- so the question is: how much of the stuff I currently have written in terms of <code>limit</code> should we:<br>
1) remove (for now)<br>
2) rewrite in terms of <code>is_limit</code>, possible re-adding wrappers<br>
3) leave as is?</p>

<a name="137176450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176450" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176450">Reid Barton (Nov 05 2018 at 00:04)</a>:</h4>
<p>Well, I suggest 3, with 2 as needed</p>

<a name="137176467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176467" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176467">Reid Barton (Nov 05 2018 at 00:05)</a>:</h4>
<p>Some things, like "<code>limit F</code> is functorial in <code>F</code>", really need <code>limit</code></p>

<a name="137176649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176649" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176649">Reid Barton (Nov 05 2018 at 00:10)</a>:</h4>
<p>Some other things like <code>limit.pre</code> and <code>limit.pre_pre</code> which involve multiple limit cones are in a sort of middle area. I'm fine with just leaving them how they are until someone wants an <code>is_limit</code> version.</p>

<a name="137176713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176713">Reid Barton (Nov 05 2018 at 00:13)</a>:</h4>
<p>Oh, I guess I missed that these functions only require limits of the specific diagrams which appear now. That means you can also use them as their <code>is_limit</code> equivalents, at least in principle...</p>

<a name="137176758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176758">Reid Barton (Nov 05 2018 at 00:14)</a>:</h4>
<p>Still, I don't see any particular advantage to defining, say, <code>instance : mono (equalizer.ι f g)</code> directly over the way that I did it.</p>

<a name="137176763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176763" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176763">Scott Morrison (Nov 05 2018 at 00:14)</a>:</h4>
<p>I agree there. I think this was my mistake, being over-eager to prove things in the <code>limit</code> variation.</p>

<a name="137176824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176824">Reid Barton (Nov 05 2018 at 00:16)</a>:</h4>
<p>Now I remember that I actually considered a design like this at one point in lean-homotopy-theory, where you have a specific class <code>coproduct a b</code> which provides a chosen coproduct of two specific objects. I never tried it out though</p>

<a name="137176827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176827" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176827">Scott Morrison (Nov 05 2018 at 00:16)</a>:</h4>
<p>I guess my hesitation is that switching to <code>is_limit</code> for, for example:</p>
<div class="codehilite"><pre><span></span>def limit.pre (F : J ⥤ C) [has_limit F] (E : K ⥤ J) [has_limit (E ⋙ F)] : limit F ⟶ limit (E ⋙ F) :=
limit.lift (E ⋙ F)
{ X := limit F,
  π := { app := λ k, limit.π F (E k) } }
</pre></div>


<p>involves more variables.</p>

<a name="137176833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176833">Scott Morrison (Nov 05 2018 at 00:17)</a>:</h4>
<p>The <code>has_limit</code> typeclasses each have to turn into a <code>cone</code> and an <code>is_limit</code>.</p>

<a name="137176836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176836" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176836">Scott Morrison (Nov 05 2018 at 00:17)</a>:</h4>
<p>A somewhat scary option is to make <code>is_limit</code> a typeclass again, and make <code>has_limit</code> be inferrable from it...</p>

<a name="137176894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176894" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176894">Scott Morrison (Nov 05 2018 at 00:18)</a>:</h4>
<p>It would be nice if the "typeclass inferred wasn't the one expected" class of errors were all solved by appropriate <code>subsingleton</code> instances...</p>

<a name="137176941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137176941" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137176941">Reid Barton (Nov 05 2018 at 00:19)</a>:</h4>
<p>Right, so there are just two differences really: whether or not <code>cone</code> and <code>is_limit</code> are bundled together, and whether or not the pair is a type class argument</p>

<a name="137177013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137177013" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137177013">Reid Barton (Nov 05 2018 at 00:21)</a>:</h4>
<p>Well, <code>has_limit</code> is not even a subsingleton, unfortunately :)</p>

<a name="137177065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137177065" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137177065">Scott Morrison (Nov 05 2018 at 00:22)</a>:</h4>
<p>yeah, so at the moment we're in the upside situation: the typeclass is not a singleton, the non-typeclass is...</p>

<a name="137177066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137177066" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137177066">Scott Morrison (Nov 05 2018 at 00:22)</a>:</h4>
<p>yuck! :-)</p>

<a name="137177141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137177141" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137177141">Reid Barton (Nov 05 2018 at 00:24)</a>:</h4>
<p>Well anyways, this just makes me even more want to leave all the <code>limit.*</code> functions alone (besides <code>limit.hom_ext</code> I guess) and just wait and see, in practice, how necessary it is to do "cone-based reasoning" vs "limit-based reasoning", for lack of better terms, and how inconvenient it is to feed the limit cones you want into <code>limit.*</code></p>

<a name="137177222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137177222" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137177222">Scott Morrison (Nov 05 2018 at 00:27)</a>:</h4>
<p>okay, great :-)</p>

<a name="137177288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137177288" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137177288">Reid Barton (Nov 05 2018 at 00:29)</a>:</h4>
<p>Hmm, does using <code>limit.hom_ext</code> as an <code>[extensionality]</code> lemma really work?</p>

<a name="137177398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137177398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137177398">Reid Barton (Nov 05 2018 at 00:32)</a>:</h4>
<p>I guess it might. I wasn't brave enough to try to make <code>is_limit.hom_ext</code> one too, that seems like it would be bad since it would match basically everything.</p>

<a name="137180007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/137180007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#137180007">Scott Morrison (Nov 05 2018 at 02:00)</a>:</h4>
<p><code>@[extensionality] lemma limit.hom_ext</code> seems to work great!</p>

<a name="146043773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146043773" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146043773">Johan Commelin (Nov 05 2018 at 07:59)</a>:</h4>
<p>I really need a lot of <code>coblah</code> at the moment. Which approach are we going to take? I advocate putting every <code>costatement</code> right after <code>statement</code>. So the highest level of interleaving that is possible.<br>
I think every other approach will lead to things going hopelessly out of sync.</p>

<a name="146785601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146785601" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146785601">Scott Morrison (Nov 05 2018 at 09:50)</a>:</h4>
<p>Hmm, I have been keeping them pretty separate. :-(</p>

<a name="146785615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146785615" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146785615">Scott Morrison (Nov 05 2018 at 09:51)</a>:</h4>
<p>Mostly so that I can work on limits, and then once it has settled down doing a bunch of copy-paste.</p>

<a name="146785670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146785670" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146785670">Scott Morrison (Nov 05 2018 at 09:52)</a>:</h4>
<p>Which bits of <code>coblah</code> have you been needing?</p>

<a name="146785676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146785676" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146785676">Scott Morrison (Nov 05 2018 at 09:52)</a>:</h4>
<p>(Are you guys all at Freiburg?)</p>

<a name="146785682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146785682" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146785682">Johan Commelin (Nov 05 2018 at 09:52)</a>:</h4>
<p>Mostly coequalizers</p>

<a name="146785704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146785704" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146785704">Johan Commelin (Nov 05 2018 at 09:53)</a>:</h4>
<p>There is Kenny, Johannes, Rob, Tobias, Cyril, Patrick, Michael, and me</p>

<a name="146785747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146785747" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146785747">Scott Morrison (Nov 05 2018 at 09:54)</a>:</h4>
<p>Did you do it yet?</p>

<a name="146785753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146785753" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146785753">Scott Morrison (Nov 05 2018 at 09:54)</a>:</h4>
<p>It looks like I could dualize everything in equalizers.lean on short notice.</p>

<a name="146785764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146785764" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146785764">Johan Commelin (Nov 05 2018 at 09:54)</a>:</h4>
<p>No, I got stuck somewhere.</p>

<a name="146785772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146785772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146785772">Scott Morrison (Nov 05 2018 at 09:55)</a>:</h4>
<p>(I have been synchronizing the two halves of things using a split window editor, and going line by line.)</p>

<a name="146785774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146785774" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146785774">Scott Morrison (Nov 05 2018 at 09:55)</a>:</h4>
<p>Is it okay if I do that now?</p>

<a name="146785785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146785785" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146785785">Johan Commelin (Nov 05 2018 at 09:55)</a>:</h4>
<p>Yeah cool. Then I'll try to do some sheaves stuff again.</p>

<a name="146786592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146786592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146786592">Scott Morrison (Nov 05 2018 at 10:13)</a>:</h4>
<p>ok, done!</p>

<a name="146786598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146786598" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146786598">Scott Morrison (Nov 05 2018 at 10:13)</a>:</h4>
<p>(with one sorry, that I'm very confused about. we may have to ask Reid about it)</p>

<a name="146786702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146786702" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146786702">Kenny Lau (Nov 05 2018 at 10:15)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> do you want to skype with us?</p>

<a name="146787331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146787331" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146787331">Johan Commelin (Nov 05 2018 at 10:29)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> Thanks for adding coequalizers!</p>

<a name="146787480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146787480" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146787480">Johan Commelin (Nov 05 2018 at 10:32)</a>:</h4>
<p>Hmmm, I'm also needing coproducts. But I don't want to overload you...</p>

<a name="146787754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146787754" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146787754">Scott Morrison (Nov 05 2018 at 10:38)</a>:</h4>
<p>Didn't I do those earlier this evening? Maybe you need to fetch. :-)</p>

<a name="146794617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146794617" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146794617">Reid Barton (Nov 05 2018 at 13:22)</a>:</h4>
<blockquote>
<p>(with one sorry, that I'm very confused about. we may have to ask Reid about it)</p>
</blockquote>
<p>I fixed it.</p>

<a name="146796842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146796842" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146796842">Reid Barton (Nov 05 2018 at 14:02)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> do you mind if at some point I merge mathlib master into the limits branch?</p>

<a name="146815058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146815058" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146815058">Scott Morrison (Nov 05 2018 at 18:48)</a>:</h4>
<p>Thanks for the fix! No problem, merge with master whenever you like.</p>

<a name="146815085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146815085" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146815085">Scott Morrison (Nov 05 2018 at 18:48)</a>:</h4>
<p>Sorry that my git hygiene has been so poor on this branch. We should also rebase and do some squashing.</p>

<a name="146815263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146815263" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146815263">Johan Commelin (Nov 05 2018 at 18:51)</a>:</h4>
<p>No, please don't do that on public branches.</p>

<a name="146815271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146815271" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146815271">Johan Commelin (Nov 05 2018 at 18:52)</a>:</h4>
<p>I think we should only squash when merging into mathlib.</p>

<a name="146815314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146815314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146815314">Johan Commelin (Nov 05 2018 at 18:52)</a>:</h4>
<p>Not when multiple people are working on it.</p>

<a name="146851248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146851248" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146851248">Scott Morrison (Nov 06 2018 at 08:03)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span>, two questions/suggestions:<br>
1) don't you think we should do "easy" sheaves _first_, before the ones with sites and coverages?<br>
2) for your definition <code>def sieve : presheaf X (Type v) :=</code>, I think it's much easier if you start off working in tactic mode, and <code>have</code> each of the four maps you're building, so that it's easy to inspect their types. Once everything works you can obfuscate everything into term mode if you prefer. :-)</p>

<a name="146851810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146851810" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146851810">Johan Commelin (Nov 06 2018 at 08:18)</a>:</h4>
<p>Thanks for the feedback.<br>
1) It might be a good idea. But I really want sheaves on a basis. And a basis is a site... And I think I'm almost there.<br>
2) This sounds like a very good plan!</p>

<a name="146856102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146856102" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146856102">Scott Morrison (Nov 06 2018 at 10:09)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span>, <span class="user-mention" data-user-id="112680">@Johan Commelin</span>,  I'm close to "sticking a fork in it and saying it's done" on the new limits branch. It's certainly not exhaustively complete, but I want to leave it for a while. Do you think I should re-PR it?</p>

<a name="146856103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146856103" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146856103">Scott Morrison (Nov 06 2018 at 10:09)</a>:</h4>
<p>It all compiles, and the only sorries are inside comments. :-)</p>

<a name="146856168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146856168" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146856168">Johan Commelin (Nov 06 2018 at 10:10)</a>:</h4>
<p>Cool! We are making some progress with sheaves. Maybe let's wait for a couple hours and see what happens there?</p>

<a name="146856173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146856173" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146856173">Scott Morrison (Nov 06 2018 at 10:11)</a>:</h4>
<p>Of course, it's still conspicuously missing examples!</p>

<a name="146856184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146856184" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146856184">Scott Morrison (Nov 06 2018 at 10:11)</a>:</h4>
<p>Really I'd like to see all the limits and filtered colimits for CommRing in place...</p>

<a name="146856745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146856745" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146856745">Johan Commelin (Nov 06 2018 at 10:25)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> Would it be an idea to use <code>coproduct</code> instead of <code>limits.sigma</code>? I think that is just as readable, and less confusing with the existing <code>sigma</code>?</p>

<a name="146856807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146856807" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146856807">Scott Morrison (Nov 06 2018 at 10:26)</a>:</h4>
<p>I'm open. If we change, we should change <code>prod</code> to <code>binary_product</code>, <code>sum</code> to <code>binary_coproduct</code>, <code>pi</code> to <code>product</code> and <code>sigma</code> to <code>coproduct</code>.</p>

<a name="146856822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146856822" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146856822">Scott Morrison (Nov 06 2018 at 10:27)</a>:</h4>
<p>I actually find calling it sigma helpful, at this point. :-)</p>

<a name="146856885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146856885" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146856885">Scott Morrison (Nov 06 2018 at 10:28)</a>:</h4>
<p>(because it's just the same as the built-in sigma, just for arbitrary categories, not just Type)</p>

<a name="146856886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146856886" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146856886">Johan Commelin (Nov 06 2018 at 10:28)</a>:</h4>
<p>Well, we were writing <code>sigma.map</code> and it took a while to figure out that we actually wanted <code>limits.sigma.map</code>.</p>

<a name="146856892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146856892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146856892">Scott Morrison (Nov 06 2018 at 10:28)</a>:</h4>
<p>Yeah, okay, I've done that too.</p>

<a name="146856908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146856908" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146856908">Johan Commelin (Nov 06 2018 at 10:29)</a>:</h4>
<p>Another point, this <code>sigma.map</code> could be a bit more general. The domains of <code>f</code> and <code>g</code> could differ. (In our case we have <code>c × c</code> and <code>c</code>, and they are related via the projections.</p>

<a name="146856910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146856910" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146856910">Johan Commelin (Nov 06 2018 at 10:29)</a>:</h4>
<p>Does it make sense what I'm saying?</p>

<a name="146856966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146856966" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146856966">Johan Commelin (Nov 06 2018 at 10:30)</a>:</h4>
<p>We would need a map <code>h : beta → beta'</code> such that <code>g \circ h = f</code> or something like that.</p>

<a name="146873856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146873856" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146873856">Reid Barton (Nov 06 2018 at 16:02)</a>:</h4>
<p>Perhaps it would be worthwhile to make a list of remaining category theory ingredients needed for schemes and perfectoid spaces?</p>

<a name="146874029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146874029" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146874029">Kevin Buzzard (Nov 06 2018 at 16:05)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> My student <span class="user-mention" data-user-id="132858">@Ramon Fernandez Mir</span> wants sheaves on a basis. Is there a way he can look at your code?</p>

<a name="146874319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146874319" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146874319">Patrick Massot (Nov 06 2018 at 16:08)</a>:</h4>
<p>Johan and Johannes are currently working hard on this, the situation will probably be rather different in 24 hours.</p>

<a name="146874572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146874572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146874572">Johan Commelin (Nov 06 2018 at 16:12)</a>:</h4>
<p>Yes, look at the <code>sheaf</code> branch on community mathlib.</p>

<a name="146874581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146874581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146874581">Johan Commelin (Nov 06 2018 at 16:12)</a>:</h4>
<p>We are pretty close to a definition for sheaves of types on a basis.</p>

<a name="146874608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146874608" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146874608">Johan Commelin (Nov 06 2018 at 16:13)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> We are collecting holes in the api in the <code>sheaf.lean</code> file on the sheaf branch.</p>

<a name="146876335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146876335" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146876335">Johan Commelin (Nov 06 2018 at 16:34)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> So I think we can have sheaves of types on a basis rather soon. Generalising to sheaves of groups/rings shouldn't be hard. (We will need to prove that the respective categories have pullbacks and equalizers and such... but I think that should be doable. If <span class="user-mention" data-user-id="132858">@Ramon Fernandez Mir</span> wants, he could also look into that.)<br>
The bigger problem is extending sheaves on a basis to sheaves on the topology. Defining the functor on presheaves is not hard (I already did that a while ago); but proving that it preserves sheaves (it is even an equivalence!) seems to be harder.</p>

<a name="146876360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146876360" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146876360">Johan Commelin (Nov 06 2018 at 16:35)</a>:</h4>
<p>At least it will be hard if I want to use the general machinery of morphisms of sites.</p>

<a name="146876453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146876453" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146876453">Johan Commelin (Nov 06 2018 at 16:36)</a>:</h4>
<p>Maybe this special case is easier... it might help that it is an equivalence.</p>

<a name="146876492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146876492" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146876492">Kevin Buzzard (Nov 06 2018 at 16:36)</a>:</h4>
<p>So what does this currently look like in Lean? I've not been following developments in category theory since term started.</p>

<a name="146876513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146876513" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146876513">Johan Commelin (Nov 06 2018 at 16:37)</a>:</h4>
<p>Look at the <code>sheaf</code> branch on community-mathlib.</p>

<a name="146876627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146876627" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146876627">Johan Commelin (Nov 06 2018 at 16:38)</a>:</h4>
<p>Most of the proofs stay really close to the level that we as mathematicians would use. Sometimes you have to go into gory details, which means we didn't set up enough rules for <code>obviously</code>. But that should be easy to improve.</p>

<a name="146876636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146876636" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146876636">Kevin Buzzard (Nov 06 2018 at 16:38)</a>:</h4>
<p>no, I mean what does the definition of a sheaf look like?</p>

<a name="146876645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146876645" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146876645">Kevin Buzzard (Nov 06 2018 at 16:38)</a>:</h4>
<p>Oh I see, sorry, I missed the first message</p>

<a name="146876649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146876649" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146876649">Johan Commelin (Nov 06 2018 at 16:39)</a>:</h4>
<p>On the <code>sheaf</code> branch, you want to look at <code>category_theory/sheaf.lean</code></p>

<a name="146876678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146876678" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146876678">Johan Commelin (Nov 06 2018 at 16:39)</a>:</h4>
<p>I still need to prove a fundamental lemma, which reduces the sheaf condition to the usual thing in the case of topological spaces.</p>

<a name="146876758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146876758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146876758">Kevin Buzzard (Nov 06 2018 at 16:40)</a>:</h4>
<p>great thanks, this is all we needed to know right now. Thanks a lot!</p>

<a name="146884999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146884999" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146884999">Johan Commelin (Nov 06 2018 at 18:49)</a>:</h4>
<p>This is throwing up type class issues again:</p>
<div class="codehilite"><pre><span></span><span class="kn">namespace</span> <span class="n">lattice</span><span class="bp">.</span><span class="n">complete_lattice</span>

<span class="kn">open</span> <span class="n">lattice</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">complete_lattice</span> <span class="n">X</span><span class="o">]</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_limits</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">u</span><span class="o">}</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">cone</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">J</span> <span class="bp">_</span> <span class="n">F</span><span class="o">,</span> <span class="c1">-- now I have two instances of small_category J -- HELP</span>
  <span class="o">{</span> <span class="n">X</span> <span class="o">:=</span> <span class="n">infi</span> <span class="n">F</span><span class="bp">.</span><span class="n">obj</span><span class="o">,</span>
    <span class="n">π</span> <span class="o">:=</span> <span class="bp">_</span> <span class="o">},</span>
  <span class="n">is_limit</span> <span class="o">:=</span> <span class="bp">_</span> <span class="o">}</span>

<span class="kn">end</span> <span class="n">lattice</span><span class="bp">.</span><span class="n">complete_lattice</span>
</pre></div>

<a name="146885724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146885724" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146885724">Reid Barton (Nov 06 2018 at 19:00)</a>:</h4>
<p>I think the problem is actually that you have 0 instances</p>

<a name="146885766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146885766" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146885766">Reid Barton (Nov 06 2018 at 19:01)</a>:</h4>
<p>I put <code>by exactI</code> before <code>infi</code>, and now at least that line is accepted.</p>

<a name="146885785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146885785" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146885785">Reid Barton (Nov 06 2018 at 19:01)</a>:</h4>
<p>(Or, possibly you have some different imports/mathlib commit than I do.)</p>

<a name="146885922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146885922" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146885922">Reid Barton (Nov 06 2018 at 19:03)</a>:</h4>
<p>If you want to avoid <code>by exactI</code> tricks then you could probably define the limits of <code>X</code> in a separate top-level definition, taking care to put the arguments in the correct order for <code>has_limits</code>, and also to put the <code>[small_category J]</code> bit to the left of the colon</p>

<a name="146886039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146886039" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146886039">Reid Barton (Nov 06 2018 at 19:05)</a>:</h4>
<p>By the way, <span class="user-mention" data-user-id="110087">@Scott Morrison</span>, is there a particular reason for the duplication between <code>has_limits_of</code>, <code>has_limits_of_shapes</code>, <code>has_limits</code>? Why isn't for example <code>has_limits C = Π {J : Type v} [small_category J], has_limits_of_shape J C</code>?</p>

<a name="146886288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146886288" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146886288">Johan Commelin (Nov 06 2018 at 19:09)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> Let me see if I understand what you are suggesting...</p>

<a name="146886291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146886291" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146886291">Reid Barton (Nov 06 2018 at 19:09)</a>:</h4>
<p>(Obviously it can't make that big a difference, I just intuitively feel that this duplication will lead to unpacking/repacking down the line. But maybe it's actually more convenient to use for some other reason.)</p>

<a name="146886416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146886416" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146886416">Reid Barton (Nov 06 2018 at 19:11)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> Actually <code>limits/types.lean</code> is already written in the style I was suggesting, so you can use that as an example.</p>

<a name="146888196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146888196" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146888196">Johan Commelin (Nov 06 2018 at 19:36)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> It's working quite well! Thanks! Now I'm left fighting <code>plift</code>:</p>
<div class="codehilite"><pre><span></span><span class="kn">namespace</span> <span class="n">lattice</span><span class="bp">.</span><span class="n">complete_lattice</span>

<span class="kn">open</span> <span class="n">lattice</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">complete_lattice</span> <span class="n">X</span><span class="o">]</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">J</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">small_category</span> <span class="n">J</span><span class="o">]</span>

<span class="n">def</span> <span class="n">limit</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">J</span> <span class="err">⥤</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">cone</span> <span class="n">F</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">X</span> <span class="o">:=</span> <span class="n">infi</span> <span class="n">F</span><span class="bp">.</span><span class="n">obj</span><span class="o">,</span>
  <span class="n">π</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">app</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">j</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">plift</span><span class="bp">.</span><span class="n">up</span> <span class="o">(</span><span class="n">infi_le</span> <span class="bp">_</span> <span class="n">j</span><span class="o">)</span><span class="bp">⟩</span> <span class="o">}</span> <span class="o">}</span>

<span class="n">def</span> <span class="n">limit_is_limit</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">J</span> <span class="err">⥤</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_limit</span> <span class="o">(</span><span class="n">limit</span> <span class="n">F</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">lift</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">s</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">plift</span><span class="bp">.</span><span class="n">up</span> <span class="err">$</span> <span class="n">le_infi</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">plift</span><span class="bp">.</span><span class="n">down</span> <span class="err">$</span> <span class="n">s</span><span class="bp">.</span><span class="n">π</span> <span class="n">i</span><span class="o">)</span><span class="bp">⟩</span> <span class="o">}</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_limits</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">u</span><span class="o">}</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">cone</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">J</span> <span class="n">hJ</span> <span class="n">F</span><span class="o">,</span> <span class="bp">@</span><span class="n">limit</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">J</span> <span class="n">hJ</span> <span class="n">F</span><span class="o">,</span>
  <span class="n">is_limit</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">J</span> <span class="n">hJ</span> <span class="n">F</span><span class="o">,</span> <span class="bp">@</span><span class="n">limit_is_limit</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">J</span> <span class="n">hJ</span> <span class="n">F</span> <span class="o">}</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_pullbacks</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">u</span><span class="o">}</span> <span class="n">X</span> <span class="o">:=</span> <span class="n">has_pullbacks_of_has_limits</span> <span class="bp">_</span>

<span class="kn">end</span> <span class="n">lattice</span><span class="bp">.</span><span class="n">complete_lattice</span>
</pre></div>

<a name="146888229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146888229" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146888229">Johan Commelin (Nov 06 2018 at 19:37)</a>:</h4>
<p><code>limit_is_limit</code> is still broken. The <code>plift.down</code> is illegal.</p>

<a name="146888373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146888373" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146888373">Reid Barton (Nov 06 2018 at 19:39)</a>:</h4>
<p>Probably because there is <code>ulift</code> involved too? I wonder why your <code>limit</code> was accepted?</p>

<a name="146888402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146888402" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146888402">Reid Barton (Nov 06 2018 at 19:39)</a>:</h4>
<p>oh, I didn't notice the angle brackets!</p>

<a name="146888502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146888502" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146888502">Johan Commelin (Nov 06 2018 at 19:40)</a>:</h4>
<p>I think the other problem has to do with the constant functor etc... I have to look into it...</p>

<a name="146888509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146888509" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146888509">Reid Barton (Nov 06 2018 at 19:40)</a>:</h4>
<p>I need to do something about my terminal font. or maybe set up emacs to display them in different colors</p>

<a name="146888543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146888543" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146888543">Reid Barton (Nov 06 2018 at 19:41)</a>:</h4>
<p>For <code>has_pullbacks</code>? Deleting <code>_</code> worked for me</p>

<a name="146888676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146888676" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146888676">Reid Barton (Nov 06 2018 at 19:42)</a>:</h4>
<p>(If using angle brackets for <code>ulift.up</code>, why not also for <code>plift.up</code>?)</p>

<a name="146888721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146888721" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146888721">Johan Commelin (Nov 06 2018 at 19:43)</a>:</h4>
<p>Yes, maybe I should do that...</p>

<a name="146889619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146889619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146889619">Johan Commelin (Nov 06 2018 at 19:55)</a>:</h4>
<p>Done:</p>
<div class="codehilite"><pre><span></span><span class="kn">namespace</span> <span class="n">lattice</span><span class="bp">.</span><span class="n">complete_lattice</span>

<span class="kn">open</span> <span class="n">lattice</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">complete_lattice</span> <span class="n">X</span><span class="o">]</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">J</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">small_category</span> <span class="n">J</span><span class="o">]</span>

<span class="n">def</span> <span class="n">limit</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">J</span> <span class="err">⥤</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">cone</span> <span class="n">F</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">X</span> <span class="o">:=</span> <span class="n">infi</span> <span class="n">F</span><span class="bp">.</span><span class="n">obj</span><span class="o">,</span>
  <span class="n">π</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">app</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">j</span><span class="o">,</span> <span class="bp">⟨⟨</span><span class="n">infi_le</span> <span class="bp">_</span> <span class="n">j</span><span class="bp">⟩⟩</span> <span class="o">}</span> <span class="o">}</span>

<span class="n">def</span> <span class="n">limit_is_limit</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">J</span> <span class="err">⥤</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_limit</span> <span class="o">(</span><span class="n">limit</span> <span class="n">F</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">lift</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">s</span><span class="o">,</span> <span class="bp">⟨⟨</span><span class="n">le_infi</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">plift</span><span class="bp">.</span><span class="n">down</span> <span class="err">$</span> <span class="n">ulift</span><span class="bp">.</span><span class="n">down</span> <span class="err">$</span> <span class="n">s</span><span class="bp">.</span><span class="n">π</span> <span class="n">i</span><span class="o">)</span><span class="bp">⟩⟩</span> <span class="o">}</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_limits</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">u</span><span class="o">}</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">cone</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">J</span> <span class="n">hJ</span> <span class="n">F</span><span class="o">,</span> <span class="bp">@</span><span class="n">limit</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">J</span> <span class="n">hJ</span> <span class="n">F</span><span class="o">,</span>
  <span class="n">is_limit</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">J</span> <span class="n">hJ</span> <span class="n">F</span><span class="o">,</span> <span class="bp">@</span><span class="n">limit_is_limit</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">J</span> <span class="n">hJ</span> <span class="n">F</span> <span class="o">}</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_pullbacks</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">u</span><span class="o">}</span> <span class="n">X</span> <span class="o">:=</span> <span class="n">has_pullbacks_of_has_limits</span> <span class="bp">_</span>

<span class="kn">end</span> <span class="n">lattice</span><span class="bp">.</span><span class="n">complete_lattice</span>
</pre></div>

<a name="146896116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146896116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146896116">Scott Morrison (Nov 06 2018 at 21:29)</a>:</h4>
<blockquote>
<p>By the way, <span class="user-mention" data-user-id="110087">@Scott Morrison</span>, is there a particular reason for the duplication between <code>has_limits_of</code>, <code>has_limits_of_shapes</code>, <code>has_limits</code>? Why isn't for example <code>has_limits C = Π {J : Type v} [small_category J], has_limits_of_shape J C</code>?</p>
</blockquote>
<p>Oh, it didn't occur to me that this could be possible. I've only recently realised that you can put Pi types in typeclass arguments sometimes.<br>
It sounds like a good idea.</p>

<a name="146933791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146933791" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146933791">Scott Morrison (Nov 07 2018 at 11:29)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> please don't rely on 'theorems' like your</p>
<div class="codehilite"><pre><span></span>lemma cone.ext&#39; {F : J ⥤ C} :
  ∀{x y : cone F} (eq : x.X = y.X), x.π == y.π → x = y ...
</pre></div>

<a name="146933795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146933795" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146933795">Scott Morrison (Nov 07 2018 at 11:29)</a>:</h4>
<p>it will lead to tears.</p>

<a name="146933802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146933802" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146933802">Scott Morrison (Nov 07 2018 at 11:29)</a>:</h4>
<p>If you replace the equalities with isos, it's fine.</p>

<a name="146933848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146933848" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146933848">Scott Morrison (Nov 07 2018 at 11:30)</a>:</h4>
<p>(and the <code>==</code> with an appropriate composition)</p>

<a name="146933965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146933965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146933965">Scott Morrison (Nov 07 2018 at 11:32)</a>:</h4>
<p>It looks like you've made lots of progress on sheaves!!</p>

<a name="146933990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146933990" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146933990">Scott Morrison (Nov 07 2018 at 11:33)</a>:</h4>
<p>ah, it seems you don't actually use <code>cone.ext'</code> anywhere, so I shouldn't get too upset about it. :-)</p>

<a name="146936058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146936058" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146936058">Johannes Hölzl (Nov 07 2018 at 12:27)</a>:</h4>
<p>yes, I removed to prove which used it afterwards, I couldn't apply it. so in the end I unfolded the proof in <code>pullback.lift_id</code>.</p>

<a name="146936569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146936569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146936569">Scott Morrison (Nov 07 2018 at 12:37)</a>:</h4>
<p>I've just pushed some work on <code>sheaf.lean</code>.</p>

<a name="146936612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146936612" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146936612">Scott Morrison (Nov 07 2018 at 12:38)</a>:</h4>
<p>I moved a bunch of the API stuff you guys added to the limits branch, and then fixed the errors in <code>comap</code>.</p>

<a name="146937583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146937583" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146937583">Johan Commelin (Nov 07 2018 at 12:56)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> Thanks a lot!</p>

<a name="146963725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/146963725" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#146963725">Johan Commelin (Nov 07 2018 at 14:58)</a>:</h4>
<p>Is <code>preorder (over U)</code> going to create diamond issues? Here <code>U : opens X</code> and <code>X</code> is a type with a topology.</p>

<a name="147248600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147248600" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147248600">Johan Commelin (Nov 07 2018 at 19:24)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> I saw that in the stuff on over categories you added <code>right := punit.star</code> a couple of times. Why is this necessary? I thought <code>obviously</code> was handling it. As a user I was very happy that I could ignore <code>right</code> when it was so trivial that you would like to think it didn't even exist.</p>

<a name="147250830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147250830" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147250830">Johan Commelin (Nov 07 2018 at 19:54)</a>:</h4>
<p>Does mathlib have the indiscrete (codiscrete?) topology, and if so, what is its name?</p>

<a name="147250863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147250863" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147250863">Johan Commelin (Nov 07 2018 at 19:55)</a>:</h4>
<p><code>git grep</code> didn't find either of those...</p>

<a name="147251441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147251441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147251441">Johannes Hölzl (Nov 07 2018 at 20:01)</a>:</h4>
<p><code>⊥</code></p>

<a name="147251491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147251491" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147251491">Johannes Hölzl (Nov 07 2018 at 20:02)</a>:</h4>
<p>this is the indiscrete topology</p>

<a name="147251832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147251832" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147251832">Johan Commelin (Nov 07 2018 at 20:07)</a>:</h4>
<p>Ok, but it doesn't have a name, I guess?</p>

<a name="147251840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147251840" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147251840">Johan Commelin (Nov 07 2018 at 20:07)</a>:</h4>
<p>I have now pushed <code>site.trivial</code> and <code>site.discrete</code>.</p>

<a name="147251856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147251856" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147251856">Johan Commelin (Nov 07 2018 at 20:07)</a>:</h4>
<p>They are the only sorry-free examples of sites we have so far.</p>

<a name="147252430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147252430" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147252430">Scott Morrison (Nov 07 2018 at 20:17)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span>, regarding <code>right := punit.star</code>. I did remove this, but I think only temporarily. The problem is that every field with an <code>autoparam</code> should be restated, otherwise the auto_param garbage clutters up the goal view, and sometimes gets in the way of elaboration.  I want to restore <code>obviously</code> to <code>left</code> and <code>right</code>, but it will involve restating <code>hom</code> by hand, and I didn't want to do that on the spot.</p>

<a name="147252459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147252459" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147252459">Scott Morrison (Nov 07 2018 at 20:17)</a>:</h4>
<p>btw, <code>comap</code> is awesome, I'm really glad it's achievable with the current setup, and hopefully the proofs can even be trimmed down further.</p>

<a name="147252713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147252713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147252713">Johan Commelin (Nov 07 2018 at 20:21)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> If you have a couple of minutes. Would you mind taking a look at the bottom of the current version of the sheaf file? There is a very ugly mixing of category theory, lattices and topological stuff.</p>

<a name="147252724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147252724" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147252724">Johan Commelin (Nov 07 2018 at 20:21)</a>:</h4>
<p>Probably I need to layer things better. But I currently don't see exactly how.</p>

<a name="147252776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147252776" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147252776">Johan Commelin (Nov 07 2018 at 20:22)</a>:</h4>
<p>Especially the case for a <code>basis</code>.</p>

<a name="147252788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147252788" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147252788">Johan Commelin (Nov 07 2018 at 20:22)</a>:</h4>
<p>That one is pretty important, it is math-trivial, and it is getting very ugly.</p>

<a name="147252981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147252981" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147252981">Johannes Hölzl (Nov 07 2018 at 20:26)</a>:</h4>
<p>the name of <code>⊥</code> is <code>bot</code>. I guess the concrete structure is something like <code>topological_space.has_bot</code>? But you can just use <code>⊥</code>  whenever you need the indiscrete topology</p>

<a name="147253052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147253052" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147253052">Johan Commelin (Nov 07 2018 at 20:26)</a>:</h4>
<p>Ok, I was just looking for a name to give to <code>site.trivial</code>. But maybe <code>site.trivial</code> is fine as it is...</p>

<a name="147253056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147253056" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147253056">Johan Commelin (Nov 07 2018 at 20:26)</a>:</h4>
<p>Or is this going to be <code>site.has_bot</code> at some point <span class="emoji emoji-1f606" title="lol">:lol:</span>?</p>

<a name="147253162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147253162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147253162">Johan Commelin (Nov 07 2018 at 20:28)</a>:</h4>
<p>Anyway...</p>

<a name="147253179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147253179" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147253179">Johan Commelin (Nov 07 2018 at 20:28)</a>:</h4>
<p>I'm feeling like <code>basis.site</code> needs choice somewhere...</p>

<a name="147254105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147254105" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147254105">Johan Commelin (Nov 07 2018 at 20:43)</a>:</h4>
<p>Aah, progress has been made and pushed. It's not done yet, but I need sleep. And now it looks a lot better.</p>

<a name="147254123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147254123" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147254123">Johan Commelin (Nov 07 2018 at 20:43)</a>:</h4>
<p>Anyone who wants to step in: please go ahead!</p>

<a name="147254218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147254218" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147254218">Scott Morrison (Nov 07 2018 at 20:44)</a>:</h4>
<p>okay, I've just been having a look, but it's going to take me a while to get up to speed here. :-(</p>

<a name="147254452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147254452" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147254452">Scott Morrison (Nov 07 2018 at 20:48)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span>, I'm starting to doubt using <code>def over (X : C) := comma (functor.id C) (functor.of_obj X)</code></p>

<a name="147254481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147254481" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147254481">Scott Morrison (Nov 07 2018 at 20:48)</a>:</h4>
<p>It means the <code>comma_morphism.w</code> field is a bit unusable, because it has lurking <code>functor.id</code>s in it that we have to dsimp and then <code>rw category.id_comp</code> to get out of the way.</p>

<a name="147254513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147254513" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147254513">Scott Morrison (Nov 07 2018 at 20:49)</a>:</h4>
<p>At very least we should not use <code>g.w</code> for <code>g</code> a morphisms of <code>over</code>s, but write a cleaner lemma.</p>

<a name="147255822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147255822" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147255822">Scott Morrison (Nov 07 2018 at 21:08)</a>:</h4>
<p>Okay, I've fixed that issue, and cleaned up proofs a little. I don't yet have any help for your sorries, however .:-)</p>

<a name="147276527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147276527" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147276527">Johan Commelin (Nov 08 2018 at 04:19)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> Thanks for your help! I didn't think <code>over</code> was creating too many problems yet. And I would hope that they would be fixable by API otherwise...</p>

<a name="147276772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147276772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147276772">Scott Morrison (Nov 08 2018 at 04:27)</a>:</h4>
<p>I think I solved the over issue; the simp lemma <code>cone_morphism.over_w</code> is all we needed.</p>

<a name="147277421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147277421" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147277421">Scott Morrison (Nov 08 2018 at 04:46)</a>:</h4>
<p>Ugh.. I just sat down to clean some things up in the limits branch, and within minutes I was dealing with something that wouldn't be a problem if we didn't use coercions... <span class="emoji emoji-1f4a9" title="pile of poo">:pile_of_poo:</span></p>

<a name="147278698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147278698" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147278698">Johan Commelin (Nov 08 2018 at 05:27)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> <span class="emoji emoji-2b06" title="up">:up:</span></p>

<a name="147285969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147285969" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147285969">Johannes Hölzl (Nov 08 2018 at 08:52)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> when you cleanup the limits branch, take care that no line is longer than 100 chars, also don't indent like</p>
<div class="codehilite"><pre><span></span><span class="o">{</span> <span class="n">long_field_name</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">g</span> <span class="o">:=</span> <span class="bp">...</span><span class="o">,</span>
                         <span class="bp">...</span> <span class="o">}</span> <span class="o">}</span>
</pre></div>


<p>but</p>
<div class="codehilite"><pre><span></span><span class="o">{</span> <span class="n">long_field_name</span> <span class="o">:=</span>
  <span class="o">{</span> <span class="bp">...</span>
  <span class="o">}</span> <span class="o">}</span>
</pre></div>

<a name="147285982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147285982" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147285982">Scott Morrison (Nov 08 2018 at 08:53)</a>:</h4>
<p>Yep, I've been doing this. I'm now in cleanup mode, and will check everything before the PR. :-)</p>

<a name="147287542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147287542" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147287542">Scott Morrison (Nov 08 2018 at 09:26)</a>:</h4>
<p>Oof, I just realised you said 100 characters, I thought I'd got away with 120 before. I'll trim some more. :-)</p>

<a name="147287766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147287766" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147287766">Johannes Hölzl (Nov 08 2018 at 09:30)</a>:</h4>
<p>I'm personally fine with 120 but most people say they cannot read my laptop screen as my resolution is too high... So I think 100 is the better solution. And I get the feeling Mario would prefer 60 :-)</p>

<a name="147287904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147287904" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147287904">Scott Morrison (Nov 08 2018 at 09:33)</a>:</h4>
<p>No worries, I'm going for 100 for now. :-)</p>

<a name="147616558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147616558" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147616558">Reid Barton (Nov 13 2018 at 18:54)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> is it intentional that <code>category_theory.limits.types</code> and <code>category_theory.limits.functor_category</code> aren't imported from <code>category_theory.limits.default</code>?</p>

<a name="147624385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147624385" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147624385">Scott Morrison (Nov 13 2018 at 20:51)</a>:</h4>
<p>I wasn't sure. My inclination is always to import less by default, but I don't really mind.</p>

<a name="147625430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147625430" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147625430">Johan Commelin (Nov 13 2018 at 21:07)</a>:</h4>
<p>Would it make sense to add filtered limits to this PR?</p>

<a name="147626278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147626278" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147626278">Reid Barton (Nov 13 2018 at 21:21)</a>:</h4>
<p>I have a bunch of stuff related to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>κ</mi></mrow><annotation encoding="application/x-tex">\kappa</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">κ</span></span></span></span>-filtered colimits somewhere</p>

<a name="147661810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147661810" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147661810">Johan Commelin (Nov 14 2018 at 11:27)</a>:</h4>
<p>The file <code>preserves.lean</code> is not fully dualised. For example, there is no <code>preserved_colimit</code>.</p>

<a name="147692070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147692070" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147692070">Johan Commelin (Nov 14 2018 at 19:15)</a>:</h4>
<p>Comma categories come with two natural forgetful functors: on this page <a href="https://ncatlab.org/nlab/show/comma+category#InComponents" target="_blank" title="https://ncatlab.org/nlab/show/comma+category#InComponents">https://ncatlab.org/nlab/show/comma+category#InComponents</a> they are called <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>H</mi><mi>C</mi></msub></mrow><annotation encoding="application/x-tex">H_C</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right:0.07153em;">C</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>H</mi><mi>D</mi></msub></mrow><annotation encoding="application/x-tex">H_D</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.08125em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span>.<br>
See <a href="https://github.com/leanprover-community/mathlib/blob/limits/category_theory/commas.lean" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/limits/category_theory/commas.lean">https://github.com/leanprover-community/mathlib/blob/limits/category_theory/commas.lean</a> for what we have in the current limits PR. What would be good names for these forgetful functors in Lean?</p>

<a name="147692082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147692082" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147692082">Johan Commelin (Nov 14 2018 at 19:15)</a>:</h4>
<p>This is not just hypothetical, I want to use them in my sheaves project now...</p>

<a name="147692133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147692133" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147692133">Johan Commelin (Nov 14 2018 at 19:16)</a>:</h4>
<p><code>forget_left</code> could mean that we forget <em>towards</em> the left... or that we forget the left component, and keep the right...</p>

<a name="147692145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147692145" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147692145">Johan Commelin (Nov 14 2018 at 19:16)</a>:</h4>
<p>So, should we go with <code>to_left</code> or <code>forget_to_left</code>?</p>

<a name="147692229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147692229" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147692229">Scott Morrison (Nov 14 2018 at 19:18)</a>:</h4>
<p>How about just <code>fst</code> and <code>snd</code>?</p>

<a name="147692260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147692260" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147692260">Scott Morrison (Nov 14 2018 at 19:19)</a>:</h4>
<p>These are the usual names for the projections on a pair-like object.</p>

<a name="147692287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147692287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147692287">Johan Commelin (Nov 14 2018 at 19:19)</a>:</h4>
<p>Ok, fine with me.</p>

<a name="147692646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147692646" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147692646">Johan Commelin (Nov 14 2018 at 19:24)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">namespace</span> <span class="n">comma</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">L</span><span class="o">)</span> <span class="o">(</span><span class="n">R</span><span class="o">)</span>

<span class="n">def</span> <span class="n">fst</span> <span class="o">:</span> <span class="n">comma</span> <span class="n">L</span> <span class="n">R</span> <span class="err">⥤</span> <span class="n">A</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">obj</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">X</span><span class="o">,</span> <span class="n">X</span><span class="bp">.</span><span class="n">left</span><span class="o">,</span>
  <span class="n">map</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">f</span><span class="o">,</span> <span class="n">f</span><span class="bp">.</span><span class="n">left</span> <span class="o">}</span>

<span class="n">def</span> <span class="n">snd</span> <span class="o">:</span> <span class="n">comma</span> <span class="n">L</span> <span class="n">R</span> <span class="err">⥤</span> <span class="n">B</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">obj</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">X</span><span class="o">,</span> <span class="n">X</span><span class="bp">.</span><span class="n">right</span><span class="o">,</span>
  <span class="n">map</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">f</span><span class="o">,</span> <span class="n">f</span><span class="bp">.</span><span class="n">right</span> <span class="o">}</span>

<span class="kn">end</span> <span class="n">comma</span>
</pre></div>

<a name="147692669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147692669" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147692669">Johan Commelin (Nov 14 2018 at 19:24)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> Should I push this to <code>limits</code>?</p>

<a name="147692711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147692711" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147692711">Scott Morrison (Nov 14 2018 at 19:25)</a>:</h4>
<p>yes, thanks</p>

<a name="147692756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147692756" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147692756">Scott Morrison (Nov 14 2018 at 19:25)</a>:</h4>
<p>While you're at it, how about we even rename the fields of commas and comma morphisms to <code>fst</code> and <code>snd</code>?</p>

<a name="147692972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147692972" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147692972">Johan Commelin (Nov 14 2018 at 19:28)</a>:</h4>
<p>Aah, hmm. I pushed already.</p>

<a name="147692981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147692981" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147692981">Johan Commelin (Nov 14 2018 at 19:28)</a>:</h4>
<p>But yes, that might be a good idea.</p>

<a name="147692990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147692990" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147692990">Johan Commelin (Nov 14 2018 at 19:29)</a>:</h4>
<p>But doesn't that lead to conflicts?</p>

<a name="147693020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147693020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147693020">Johan Commelin (Nov 14 2018 at 19:29)</a>:</h4>
<p>As in, we are defining a structure <code>comma</code> with fields <code>fst</code> and <code>snd</code>, and then in the <code>comma</code> namespace we also want to define <code>fst</code> and <code>snd</code>...</p>

<a name="147693187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147693187" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147693187">Johan Commelin (Nov 14 2018 at 19:32)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> Is this one of the reasons you sometimes add <code>'</code> to names?</p>

<a name="147704970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147704970" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147704970">Scott Morrison (Nov 14 2018 at 22:32)</a>:</h4>
<p>No, that's not why I sometimes add <code>'</code>. That's purely so we can give restated, <code>dsimp</code>ed (or coercioned, back in the bad old days)) versions of the structure fields.</p>

<a name="147704994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147704994" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147704994">Scott Morrison (Nov 14 2018 at 22:33)</a>:</h4>
<p>Not sure how to deal with that name conflict....</p>

<a name="147722024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722024" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722024">Johan Commelin (Nov 15 2018 at 05:30)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> So, what is the common way to resolve naming conflicts like this? The general question is this: what do we do with structures that have a field <code>foo</code> and the projection on <code>foo</code> happens to be a functor... Would this have been easier if functors were a class?</p>

<a name="147722030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722030" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722030">Mario Carneiro (Nov 15 2018 at 05:30)</a>:</h4>
<p>I've been using one letter prefixes in a few places</p>

<a name="147722042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722042" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722042">Mario Carneiro (Nov 15 2018 at 05:31)</a>:</h4>
<p>like <code>linear_map.comp</code> is composition of linear maps, and <code>linear_map.lcomp</code> is a linear composition function</p>

<a name="147722051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722051">Mario Carneiro (Nov 15 2018 at 05:31)</a>:</h4>
<p>and <code>llcomp</code> is linear in a really high order type</p>

<a name="147722092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722092" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722092">Johan Commelin (Nov 15 2018 at 05:32)</a>:</h4>
<p>So in this case you would propose <code>ffst</code> and <code>fsnd</code>?</p>

<a name="147722110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722110" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722110">Mario Carneiro (Nov 15 2018 at 05:33)</a>:</h4>
<p>yeah... you might also want to ask <span class="user-mention" data-user-id="110087">@Scott Morrison</span> in case he has already found a naming convention for this</p>

<a name="147722113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722113" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722113">Johan Commelin (Nov 15 2018 at 05:33)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> Have you documented somewhere why functors are not a class?</p>

<a name="147722117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722117" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722117">Scott Morrison (Nov 15 2018 at 05:33)</a>:</h4>
<p>You mean a typeclass on the underlying function of objects?</p>

<a name="147722129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722129" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722129">Scott Morrison (Nov 15 2018 at 05:34)</a>:</h4>
<p>It's a good question, which I've been meaning to try to remember the answer to. :-)</p>

<a name="147722158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722158" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722158">Johan Commelin (Nov 15 2018 at 05:34)</a>:</h4>
<p>Because if we could just write <code>instance : functor (fst)</code> then someone could write <code>X.fst</code> and get functorial behaviour out of that...</p>

<a name="147722161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722161" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722161">Johan Commelin (Nov 15 2018 at 05:34)</a>:</h4>
<p>Or am I dreaming?</p>

<a name="147722168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722168" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722168">Johan Commelin (Nov 15 2018 at 05:35)</a>:</h4>
<p>Because now I have a bunch of code containing <code>X.fst</code> which will probably have to be written as the defeq <code>ffst.obj X</code> just to make sure that it plays nice with later constructions.</p>

<a name="147722265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722265" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722265">Scott Morrison (Nov 15 2018 at 05:38)</a>:</h4>
<p>At some point in the past I had a strong opinion about this (against the typeclass version), but it's worth revisiting.</p>

<a name="147722270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722270" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722270">Scott Morrison (Nov 15 2018 at 05:38)</a>:</h4>
<p>My opinion may have been based on trying to refactor everything to this form and it being miserable. :-)</p>

<a name="147722280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722280" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722280">Scott Morrison (Nov 15 2018 at 05:39)</a>:</h4>
<p>ah,</p>

<a name="147722287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722287">Scott Morrison (Nov 15 2018 at 05:39)</a>:</h4>
<p>So you do quickly want the bundled version as well, to talk about the category of functors and natural transformations</p>

<a name="147722312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722312" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722312">Scott Morrison (Nov 15 2018 at 05:40)</a>:</h4>
<p>But that's not an obstacle in itself.</p>

<a name="147722341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722341" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722341">Scott Morrison (Nov 15 2018 at 05:41)</a>:</h4>
<p>When you want to write <code>yoneda : C \func (C^op \func Type)</code>, what would we do? Just write <code>yoneda : C \to (C^op \to Type)</code></p>

<a name="147722345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722345" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722345">Scott Morrison (Nov 15 2018 at 05:41)</a>:</h4>
<p>and then separate instances <code>functorial (yoneda X)</code>, and ...?</p>

<a name="147722385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722385" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722385">Scott Morrison (Nov 15 2018 at 05:42)</a>:</h4>
<p>the problem is you can't write <code>functorial yoneda</code></p>

<a name="147722389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722389" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722389">Scott Morrison (Nov 15 2018 at 05:42)</a>:</h4>
<p>because we would need a category structure on <code>C^op \to Type</code></p>

<a name="147722391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722391" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722391">Scott Morrison (Nov 15 2018 at 05:42)</a>:</h4>
<p>and where would that come from?</p>

<a name="147722398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722398">Scott Morrison (Nov 15 2018 at 05:43)</a>:</h4>
<p>the category structure is only on the bundled functors</p>

<a name="147722453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722453" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722453">Scott Morrison (Nov 15 2018 at 05:44)</a>:</h4>
<p>so.... you define <code>yoneda_2 : C \to (C^op \func Type)</code>, and prove that its underlying functions are the same as <code>yoneda</code>, and then construct <code>functorial yoneda_2</code>?</p>

<a name="147722454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722454" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722454">Scott Morrison (Nov 15 2018 at 05:44)</a>:</h4>
<p>Seems a bit gross.</p>

<a name="147722852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722852" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722852">Johan Commelin (Nov 15 2018 at 05:57)</a>:</h4>
<p>I see, those are good points. Thanks for pointing them out! Otoh it might be consistent with what we have been doing so far? (Having both an unbundled and a bundled version.)</p>

<a name="147722857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722857" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722857">Johan Commelin (Nov 15 2018 at 05:58)</a>:</h4>
<p>I hope that with the unbundled version a lot of other code might become cleaner...</p>

<a name="147722914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147722914" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147722914">Johan Commelin (Nov 15 2018 at 05:59)</a>:</h4>
<p>Another reason against unbundling is if we can cook up a plethora of examples where functors have the same underlying function on objects... But can only cook up pathological examples at the moment.</p>

<a name="147724188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724188" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724188">Mario Carneiro (Nov 15 2018 at 06:39)</a>:</h4>
<p>it is worth mentioning that this is basically the opposite direction to the one I took in the module refactor</p>

<a name="147724192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724192" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724192">Mario Carneiro (Nov 15 2018 at 06:39)</a>:</h4>
<p>with bundling linear maps</p>

<a name="147724254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724254" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724254">Mario Carneiro (Nov 15 2018 at 06:40)</a>:</h4>
<p>I'm not saying it's a bad idea per se, but the reasons that apply to one equally apply to the other</p>

<a name="147724263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724263" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724263">Johan Commelin (Nov 15 2018 at 06:40)</a>:</h4>
<p>I was also very surprised that you did that <span class="emoji emoji-1f600" title="grinning">:grinning:</span> <br>
I remember that about half a year ago you told me that bundling comes with quite some drawbacks, and that a lot of stuff should be dealt with in an unbundled setting first...</p>

<a name="147724281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724281" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724281">Johan Commelin (Nov 15 2018 at 06:41)</a>:</h4>
<p>As a recent example, the bundled version <code>open_set (X : Top)</code> was changed into the unbundled <code>opens (X : Type) [topological_space X]</code></p>

<a name="147724327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724327" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724327">Mario Carneiro (Nov 15 2018 at 06:42)</a>:</h4>
<p>not only there are drawbacks in every direction, some are innate and some are artifacts of lean 3 implementation</p>

<a name="147724332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724332" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724332">Mario Carneiro (Nov 15 2018 at 06:42)</a>:</h4>
<p>but I stand by that last one</p>

<a name="147724342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724342" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724342">Mario Carneiro (Nov 15 2018 at 06:43)</a>:</h4>
<p>The point is that <code>opens</code> is not a functor, it is a function on a fixed topological space</p>

<a name="147724347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724347" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724347">Mario Carneiro (Nov 15 2018 at 06:43)</a>:</h4>
<p>er, actually I think it is a functor from the preorder category, but you get the idea</p>

<a name="147724389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724389" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724389">Johan Commelin (Nov 15 2018 at 06:44)</a>:</h4>
<p>It is a <code>functor</code> from <code>Top</code> to <code>Type</code></p>

<a name="147724392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724392" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724392">Mario Carneiro (Nov 15 2018 at 06:44)</a>:</h4>
<p>it's not, though</p>

<a name="147724393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724393">Johan Commelin (Nov 15 2018 at 06:44)</a>:</h4>
<p>contravariant</p>

<a name="147724395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724395" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724395">Mario Carneiro (Nov 15 2018 at 06:44)</a>:</h4>
<p>like not literally</p>

<a name="147724396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724396">Johan Commelin (Nov 15 2018 at 06:44)</a>:</h4>
<p>???</p>

<a name="147724397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724397" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724397">Mario Carneiro (Nov 15 2018 at 06:44)</a>:</h4>
<p>this is what <code>fopens</code> would be for</p>

<a name="147724398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724398">Mario Carneiro (Nov 15 2018 at 06:44)</a>:</h4>
<p>you take the function and bundle it up into a functor</p>

<a name="147724409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724409" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724409">Johan Commelin (Nov 15 2018 at 06:45)</a>:</h4>
<p>Ok, so I want <code>instance : functorial opens</code></p>

<a name="147724413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724413" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724413">Mario Carneiro (Nov 15 2018 at 06:45)</a>:</h4>
<p>this is also what scott is talking about with <code>yoneda_2</code></p>

<a name="147724427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724427" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724427">Mario Carneiro (Nov 15 2018 at 06:45)</a>:</h4>
<p>that's not going to help if you need a functor though</p>

<a name="147724428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724428" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724428">Mario Carneiro (Nov 15 2018 at 06:45)</a>:</h4>
<p>it's still unbundled</p>

<a name="147724429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724429" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724429">Johan Commelin (Nov 15 2018 at 06:45)</a>:</h4>
<p>Or maybe we rename the current <code>functor</code> to <code>Functor</code>, and then have <code>functor</code> for the unbundled version.</p>

<a name="147724431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724431" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724431">Mario Carneiro (Nov 15 2018 at 06:46)</a>:</h4>
<p>like if you need to inhabit a functor category like scott said</p>

<a name="147724472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147724472" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147724472">Johan Commelin (Nov 15 2018 at 06:46)</a>:</h4>
<p>Anyway, my train is calling me. See you in 45min.</p>

<a name="147726032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147726032" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147726032">Johan Commelin (Nov 15 2018 at 07:34)</a>:</h4>
<p>Ok, so what is the verdict? Would it make sense to introduce an unbundled version of <code>functor</code> or should I go for the prefix naming scheme? Or is  this something that isn't clear, and deserves more experimentation?</p>

<a name="147726036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147726036" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147726036">Johan Commelin (Nov 15 2018 at 07:34)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Also, which parts exactly do you think a br0xen because of Lean 3? And which parts are inherent drawbacks?</p>

<a name="147726115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147726115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147726115">Mario Carneiro (Nov 15 2018 at 07:37)</a>:</h4>
<p>the stuff about coercions is broken because of lean 3</p>

<a name="147726174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147726174" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147726174">Mario Carneiro (Nov 15 2018 at 07:39)</a>:</h4>
<p>some of the stuff about using bundled classes for <code>Group</code>, <code>Top</code> etc could be solved but only with significant changes to how elaboration works (i.e. unification hints)</p>

<a name="147726220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147726220" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147726220">Mario Carneiro (Nov 15 2018 at 07:40)</a>:</h4>
<p>I think you shouldn't bother making an unbundled version of functor. This already exists, and it's called <code>functor</code></p>

<a name="147726353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147726353" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147726353">Johan Commelin (Nov 15 2018 at 07:44)</a>:</h4>
<p>I don't follow</p>

<a name="147726369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147726369" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147726369">Johan Commelin (Nov 15 2018 at 07:45)</a>:</h4>
<p>If <code>functor</code> is unbundled, what would be a bundled functor?</p>

<a name="147727014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147727014" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147727014">Mario Carneiro (Nov 15 2018 at 08:02)</a>:</h4>
<p><code>_root_.functor</code></p>

<a name="147727117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147727117" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147727117">Johan Commelin (Nov 15 2018 at 08:05)</a>:</h4>
<p>What? That is not even in the category theory library...</p>

<a name="147727119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147727119" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147727119">Johan Commelin (Nov 15 2018 at 08:05)</a>:</h4>
<p>Also, it isn't bundling the function on objects. So I would call this an unbundled endofunctor of <code>Type</code></p>

<a name="147727158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147727158" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147727158">Johan Commelin (Nov 15 2018 at 08:06)</a>:</h4>
<p>Maybe I'm just very confused about terminology.</p>

<a name="147727294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147727294" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147727294">Johan Commelin (Nov 15 2018 at 08:11)</a>:</h4>
<p>What we have now is</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">functor</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₁</span><span class="o">)</span> <span class="o">[</span><span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">u₁</span> <span class="n">v₁</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₂</span><span class="o">)</span> <span class="o">[</span><span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">u₂</span> <span class="n">v₂</span><span class="o">}</span> <span class="n">D</span><span class="o">]</span> <span class="o">:</span>
  <span class="kt">Type</span> <span class="o">(</span><span class="n">max</span> <span class="n">u₁</span> <span class="n">v₁</span> <span class="n">u₂</span> <span class="n">v₂</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">obj</span>       <span class="o">:</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">D</span><span class="o">)</span>
<span class="o">(</span><span class="n">map</span>       <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">},</span> <span class="o">(</span><span class="n">X</span> <span class="err">⟶</span> <span class="n">Y</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="n">obj</span> <span class="n">X</span><span class="o">)</span> <span class="err">⟶</span> <span class="o">(</span><span class="n">obj</span> <span class="n">Y</span><span class="o">)))</span>
<span class="o">(</span><span class="n">map_id&#39;</span>   <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C</span><span class="o">),</span> <span class="n">map</span> <span class="o">(</span><span class="mi">𝟙</span> <span class="n">X</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">𝟙</span> <span class="o">(</span><span class="n">obj</span> <span class="n">X</span><span class="o">)</span> <span class="bp">.</span> <span class="n">obviously</span><span class="o">)</span>
<span class="o">(</span><span class="n">map_comp&#39;</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">Z</span><span class="o">),</span> <span class="n">map</span> <span class="o">(</span><span class="n">f</span> <span class="err">≫</span> <span class="n">g</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">map</span> <span class="n">f</span><span class="o">)</span> <span class="err">≫</span> <span class="o">(</span><span class="n">map</span> <span class="n">g</span><span class="o">)</span> <span class="bp">.</span> <span class="n">obviously</span><span class="o">)</span>
</pre></div>


<p>And I'm asking whether it makes sense to also have</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">functor</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₁</span><span class="o">}</span> <span class="o">[</span><span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">u₁</span> <span class="n">v₁</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span> <span class="o">{</span><span class="n">D</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₂</span><span class="o">}</span> <span class="o">[</span><span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">u₂</span> <span class="n">v₂</span><span class="o">}</span> <span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="n">obj</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">D</span><span class="o">)</span> <span class="o">:</span>
  <span class="kt">Type</span> <span class="o">(</span><span class="n">max</span> <span class="n">u₁</span> <span class="n">v₁</span> <span class="n">u₂</span> <span class="n">v₂</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">map</span>       <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">},</span> <span class="o">(</span><span class="n">X</span> <span class="err">⟶</span> <span class="n">Y</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="n">obj</span> <span class="n">X</span><span class="o">)</span> <span class="err">⟶</span> <span class="o">(</span><span class="n">obj</span> <span class="n">Y</span><span class="o">)))</span>
<span class="o">(</span><span class="n">map_id&#39;</span>   <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C</span><span class="o">),</span> <span class="n">map</span> <span class="o">(</span><span class="mi">𝟙</span> <span class="n">X</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">𝟙</span> <span class="o">(</span><span class="n">obj</span> <span class="n">X</span><span class="o">)</span> <span class="bp">.</span> <span class="n">obviously</span><span class="o">)</span>
<span class="o">(</span><span class="n">map_comp&#39;</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">Z</span><span class="o">),</span> <span class="n">map</span> <span class="o">(</span><span class="n">f</span> <span class="err">≫</span> <span class="n">g</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">map</span> <span class="n">f</span><span class="o">)</span> <span class="err">≫</span> <span class="o">(</span><span class="n">map</span> <span class="n">g</span><span class="o">)</span> <span class="bp">.</span> <span class="n">obviously</span><span class="o">)</span>
</pre></div>

<a name="147727698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147727698" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147727698">Mario Carneiro (Nov 15 2018 at 08:22)</a>:</h4>
<p>possibly... in particular it may work better with notations, just like the <code>&lt;$&gt;</code> notation in <code>_root_.functor</code></p>

<a name="147727703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147727703" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147727703">Mario Carneiro (Nov 15 2018 at 08:23)</a>:</h4>
<p>which is not necessarily an endofunctor btw</p>

<a name="147727713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147727713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147727713">Mario Carneiro (Nov 15 2018 at 08:23)</a>:</h4>
<p>I was saying that <code>_root_.functor</code> is unbundled</p>

<a name="147727832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147727832" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147727832">Mario Carneiro (Nov 15 2018 at 08:26)</a>:</h4>
<p>but I think it doesn't work well with identity and composition of functors</p>

<a name="147727843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147727843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147727843">Mario Carneiro (Nov 15 2018 at 08:26)</a>:</h4>
<p>I recall Simon had to do some workaround stuff to define the composition of <code>_root_.functor</code>s</p>

<a name="147727858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147727858" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147727858">Mario Carneiro (Nov 15 2018 at 08:27)</a>:</h4>
<p>It is best when all the functors are "atomic", i.e. <code>F A : D</code> if <code>A : C</code>, and <code>F</code> is a variable or constant here</p>

<a name="147727905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147727905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147727905">Mario Carneiro (Nov 15 2018 at 08:28)</a>:</h4>
<p>when you have things like <code>(F o G) A = F (G A)</code> it gets hard for lean</p>

<a name="147728150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147728150" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147728150">Johan Commelin (Nov 15 2018 at 08:35)</a>:</h4>
<p>Ok, I don't understand all the issues, but I'll believe you (-;</p>

<a name="147728206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147728206" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147728206">Johan Commelin (Nov 15 2018 at 08:36)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> The <code>f</code> in <code>_root_.functor f</code> goes from <code>Type u</code> to <code>Type v</code>, so up to universes it is an endofunctor, right?</p>

<a name="147729217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147729217" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147729217">Johannes Hölzl (Nov 15 2018 at 09:02)</a>:</h4>
<p>Yes, <code>_root_.functor</code> is an endofunctor in the <code>Type</code> category (as you said, up to universes)</p>

<a name="147729225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147729225" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147729225">Johannes Hölzl (Nov 15 2018 at 09:02)</a>:</h4>
<p>I guess you meant also <code>class functor {C : Type u₁} [category.{u₁ v₁} C] {D : Type u₂} [category.{u₂ v₂} D] (obj : C → D) : ...</code> (<code>class</code> instead of <code>structure</code>)?</p>

<a name="147729239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147729239" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147729239">Johan Commelin (Nov 15 2018 at 09:03)</a>:</h4>
<p>Aah sure, that was an "edito"</p>

<a name="147729410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147729410" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147729410">Johannes Hölzl (Nov 15 2018 at 09:06)</a>:</h4>
<p>The problem with classes is that the <code>.func_in_namespace</code> syntax doesn't work. So while you can add a specific function (like <code>fst</code>) <code>map</code> needs to be named <code>fmap</code> or we need to introduce a infix operator. Similar with the theorem names.</p>

<a name="147729444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147729444" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147729444">Johan Commelin (Nov 15 2018 at 09:07)</a>:</h4>
<p>I see, that makes sense.</p>

<a name="147729580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147729580" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147729580">Johannes Hölzl (Nov 15 2018 at 09:10)</a>:</h4>
<p>This is a hard decision. I think there is no clear answer (at least not in Lean 3)</p>

<a name="147729597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147729597" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147729597">Johan Commelin (Nov 15 2018 at 09:10)</a>:</h4>
<p>The correct solution in this case is probably that we should define <code>comma</code> as a 2-categorical pullback. That would instantly make <code>fst</code> and <code>snd</code> into functors (à la Scott).</p>

<a name="147734668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147734668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147734668">Johan Commelin (Nov 15 2018 at 11:08)</a>:</h4>
<p>Next naming question: given a natural transformation <code>R₁ \nattrans R₂</code> you get a functor <code>comma L R₁ → comma L R₂</code>. How should we call this gadget? Would this be <code>map_right</code>, and the corresponding thing for <code>L₁</code> and <code>L₂</code> would be <code>map_left</code>?</p>

<a name="147735408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147735408" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147735408">Johan Commelin (Nov 15 2018 at 11:24)</a>:</h4>
<p><span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> Is it safe to add <code>@[simp]</code> in the following way?</p>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">def</span> <span class="n">fst</span> <span class="o">:</span> <span class="n">comma</span> <span class="n">L</span> <span class="n">R</span> <span class="err">⥤</span> <span class="n">A</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">obj</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">X</span><span class="o">,</span> <span class="n">X</span><span class="bp">.</span><span class="n">left</span><span class="o">,</span>
  <span class="n">map</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">f</span><span class="o">,</span> <span class="n">f</span><span class="bp">.</span><span class="n">left</span> <span class="o">}</span>
</pre></div>

<a name="147735458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147735458" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147735458">Johannes Hölzl (Nov 15 2018 at 11:26)</a>:</h4>
<p>It is safe, but would be annoying. I think you only want to unfold <code>fst</code> under a projection (i.e. <code>obj (fst _) = _</code> and <code>map (fst _) = _</code>) or some other operation</p>

<a name="147735554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147735554" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147735554">Johan Commelin (Nov 15 2018 at 11:29)</a>:</h4>
<p>Ok, so I should write my own explicit simp-lemmas</p>

<a name="147736369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147736369" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147736369">Johan Commelin (Nov 15 2018 at 11:49)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> I just pushed <code>map_left</code> and <code>map_right</code> to <code>limits</code>. I don't know if you like that, but I think they are pretty useful. Maybe I shouldn't be touching this branch too much. I can keep further stuff in the <code>sheaf</code> branch.</p>

<a name="147736431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147736431" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147736431">Johan Commelin (Nov 15 2018 at 11:50)</a>:</h4>
<p>Also, I didn't have the <code>-- obviously says</code> comments. Maybe that is bad, because then you won't find this code for future clean-ups??</p>

<a name="147769051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147769051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147769051">Scott Morrison (Nov 15 2018 at 19:59)</a>:</h4>
<p>No, it's fine. I think my point that <code>rewrite_search</code> is awesome but for now slow has been made, and we can drop those comments. :-)</p>

<a name="147769663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147769663" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147769663">Johan Commelin (Nov 15 2018 at 20:08)</a>:</h4>
<p>Well, maybe you put the comments there so that you could easily clean up those blocks once mathlib has a fast <code>rewrite_search</code>...</p>

<a name="147829089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147829089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147829089">Reid Barton (Nov 16 2018 at 16:47)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> do you have an opinion about this change?</p>
<div class="codehilite"><pre><span></span><span class="gh">diff --git a/category_theory/limits/cones.lean b/category_theory/limits/cones.lean</span>
<span class="gh">index 6d68844..7fce15c 100644</span>
<span class="gd">--- a/category_theory/limits/cones.lean</span>
<span class="gi">+++ b/category_theory/limits/cones.lean</span>
<span class="gu">@@ -228,16 +228,17 @@ include 𝒟</span>

 @[simp] def functoriality (F : J ⥤ C) (G : C ⥤ D) : (cocone F) ⥤ (cocone (F ⋙ G)) :=
 { obj := λ A,
<span class="gd">-  { X  := G.obj A.X,</span>
<span class="gd">-    ι  :=  whisker_right A.ι G ⊟ (functor.const_compose _ _ _).inv },</span>
<span class="gi">+  { X := G.obj A.X,</span>
<span class="gi">+    ι :=</span>
<span class="gi">+    { app := λ j, G.map (A.ι.app j), naturality&#39; := by intros; erw ←G.map_comp; tidy } },</span>
   map := λ _ _ f,
   { hom := G.map f.hom,
     w&#39;  :=
     begin
       intros, dsimp,
<span class="gd">-      erw [category.comp_id, ←functor.map_comp, cocone_morphism.w, category.comp_id],</span>
<span class="gi">+      erw [←functor.map_comp, cocone_morphism.w],</span>
     end } }
 end
 end cocones

 end category_theory.limits
<span class="gu">@@ -257,6 +261,6 @@ def map_cocone_morphism (H : C ⥤ D) {c c&#39; : cocone F} (f : cocone_morphism c c</span>
 @[simp] lemma map_cone_π (H : C ⥤ D) (c : cone F) (j : J) :
   (map_cone H c).π.app j = ((functor.const_compose _ _ _).hom ⊟ whisker_right c.π H).app j := rfl
 @[simp] lemma map_cocone_ι (H : C ⥤ D) (c : cocone F) (j : J) :
<span class="gd">-  (map_cocone H c).ι.app j = (whisker_right c.ι H ⊟ (functor.const_compose _ _ _).inv).app j := rfl</span>
<span class="gi">+  (map_cocone H c).ι.app j = H.map (c.ι.app j) := rfl</span>

 end category_theory.functor
</pre></div>

<a name="147848336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/147848336" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#147848336">Scott Morrison (Nov 16 2018 at 21:45)</a>:</h4>
<p>Looks fine.</p>

<a name="148053105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148053105" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148053105">Kevin Buzzard (Nov 20 2018 at 17:03)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">,</span> <span class="n">priority</span> <span class="mi">0</span><span class="o">]</span> <span class="n">classical</span><span class="bp">.</span><span class="n">prop_decidable</span>
<span class="n">noncomputable</span> <span class="kn">instance</span> <span class="o">:</span> <span class="n">has_colimits</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="bp">+</span><span class="mi">1</span> <span class="n">v</span><span class="o">}</span> <span class="n">CommRing</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">cocone</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">J</span> <span class="n">HJ</span> <span class="n">F</span><span class="o">,</span> <span class="o">{</span>
    <span class="n">X</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">letI</span> <span class="o">:=</span> <span class="n">HJ</span><span class="bp">;</span> <span class="n">exact</span>
         <span class="k">let</span> <span class="n">poly_vars</span> <span class="o">:=</span> <span class="err">Σ</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">J</span><span class="o">),</span> <span class="n">F</span><span class="bp">.</span><span class="n">obj</span> <span class="n">j</span> <span class="k">in</span>
         <span class="k">let</span> <span class="n">R</span> <span class="o">:=</span> <span class="n">mv_polynomial</span> <span class="n">poly_vars</span> <span class="bp">ℤ</span> <span class="k">in</span>
         <span class="k">by</span> <span class="n">letI</span> <span class="o">:</span> <span class="n">comm_ring</span> <span class="n">R</span> <span class="o">:=</span> <span class="n">finsupp</span><span class="bp">.</span><span class="n">to_comm_ring</span><span class="bp">;</span> <span class="n">exact</span>
         <span class="k">let</span> <span class="n">I</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">R</span> <span class="o">:=</span> <span class="n">ideal</span><span class="bp">.</span><span class="n">span</span> <span class="o">(</span><span class="err">∅</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span> <span class="k">in</span>
         <span class="o">{</span><span class="n">α</span> <span class="o">:=</span> <span class="n">I</span><span class="bp">.</span><span class="n">quotient</span><span class="o">},</span><span class="bp">...</span>
</pre></div>


<p>Why do I have to put all these <code>letI</code>'s in? Is this expected? I'm trying to construct the colimit of a diagram of commutative rings. The ideal is currently wrong. </p>
<p>Oh -- I also made this change to mathlib:</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">bundled</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span>
<span class="o">(</span><span class="n">str</span> <span class="o">:</span> <span class="n">c</span> <span class="n">α</span> <span class="bp">.</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">interactive</span><span class="bp">.</span><span class="n">apply_instance</span><span class="o">)</span>
</pre></div>


<p>Is that crazy?</p>

<a name="148053183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148053183" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148053183">Patrick Massot (Nov 20 2018 at 17:04)</a>:</h4>
<p>A much more trivial remark is that, as far as I understand, nested <code>let</code> can be flattened</p>

<a name="148053208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148053208" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148053208">Kevin Buzzard (Nov 20 2018 at 17:05)</a>:</h4>
<p>the <code>letI</code>'s can't though and they are interspersed with the lets :-/</p>

<a name="148053215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148053215" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148053215">Patrick Massot (Nov 20 2018 at 17:05)</a>:</h4>
<p>not for <code>poly_vars</code> and <code>R</code></p>

<a name="148054778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148054778" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148054778">Reid Barton (Nov 20 2018 at 17:32)</a>:</h4>
<p>The first <code>letI</code> is expected; or you can use <code>by exactI ...</code></p>

<a name="148054889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148054889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148054889">Reid Barton (Nov 20 2018 at 17:34)</a>:</h4>
<p>I don't know why you would need the second one though</p>

<a name="148054916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148054916" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148054916">Kevin Buzzard (Nov 20 2018 at 17:35)</a>:</h4>
<p>We don't need it! Thanks! We needed it at some point -- maybe I was confused by another error.</p>

<a name="148054921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148054921" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148054921">Reid Barton (Nov 20 2018 at 17:35)</a>:</h4>
<p>For making objects of <code>bundled</code>, the intent was to use <code>mk_ob</code> in the situation where the instance is one that will be provided by type class inference</p>

<a name="148054972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148054972" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148054972">Reid Barton (Nov 20 2018 at 17:36)</a>:</h4>
<p>though I'm not sure whether it really works... it worked great in <code>lean-homotopy-theory</code>, where the category <code>Top</code> was fixed, but I'm not sure it works as well with <code>c</code> variable</p>

<a name="148054974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148054974" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148054974">Kevin Buzzard (Nov 20 2018 at 17:36)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">,</span> <span class="n">priority</span> <span class="mi">0</span><span class="o">]</span> <span class="n">classical</span><span class="bp">.</span><span class="n">prop_decidable</span>
<span class="n">noncomputable</span> <span class="kn">instance</span> <span class="o">:</span> <span class="n">has_colimits</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="bp">+</span><span class="mi">1</span> <span class="n">v</span><span class="o">}</span> <span class="n">CommRing</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">cocone</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">J</span> <span class="n">HJ</span> <span class="n">F</span><span class="o">,</span> <span class="o">{</span>
    <span class="n">X</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">exactI</span>
         <span class="k">let</span> <span class="n">poly_vars</span> <span class="o">:=</span> <span class="err">Σ</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">J</span><span class="o">),</span> <span class="n">F</span><span class="bp">.</span><span class="n">obj</span> <span class="n">j</span><span class="o">,</span>
         <span class="n">R</span> <span class="o">:=</span> <span class="n">mv_polynomial</span> <span class="n">poly_vars</span> <span class="bp">ℤ</span> <span class="k">in</span>
         <span class="k">let</span> <span class="n">I</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">R</span> <span class="o">:=</span> <span class="n">ideal</span><span class="bp">.</span><span class="n">span</span> <span class="o">(</span><span class="err">∅</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span> <span class="k">in</span>
         <span class="o">{</span><span class="n">α</span> <span class="o">:=</span> <span class="n">I</span><span class="bp">.</span><span class="n">quotient</span><span class="o">,</span> <span class="n">str</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">apply_instance</span><span class="o">},</span>
    <span class="n">ι</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">app</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">j</span><span class="o">,</span> <span class="bp">⟨λ</span> <span class="n">r</span><span class="o">,</span><span class="k">begin</span> <span class="n">sorry</span> <span class="kn">end</span><span class="o">,</span> <span class="k">begin</span> <span class="n">sorry</span> <span class="kn">end</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">naturality&#39;</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">}</span>
    <span class="o">},</span>
  <span class="n">is_colimit</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="o">}</span>
</pre></div>


<p>I have a student making colimits -- this is how far we are.</p>

<a name="148054991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148054991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148054991">Kevin Buzzard (Nov 20 2018 at 17:37)</a>:</h4>
<p>I see, I didn't know about <code>mk_ob</code></p>

<a name="148055005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148055005" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148055005">Reid Barton (Nov 20 2018 at 17:37)</a>:</h4>
<p>however, I also found making the <code>str</code> field into a <code>()</code> field more convenient, for the case where you want to provide it explicitly</p>

<a name="148055050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148055050" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148055050">Reid Barton (Nov 20 2018 at 17:38)</a>:</h4>
<p>using <code>\&lt;_, _\&gt;</code></p>

<a name="148055055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148055055" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148055055">Kevin Buzzard (Nov 20 2018 at 17:38)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">,</span> <span class="n">priority</span> <span class="mi">0</span><span class="o">]</span> <span class="n">classical</span><span class="bp">.</span><span class="n">prop_decidable</span>
<span class="n">noncomputable</span> <span class="kn">instance</span> <span class="o">:</span> <span class="n">has_colimits</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="bp">+</span><span class="mi">1</span> <span class="n">v</span><span class="o">}</span> <span class="n">CommRing</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">cocone</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">J</span> <span class="n">HJ</span> <span class="n">F</span><span class="o">,</span> <span class="o">{</span>
    <span class="n">X</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">exactI</span>
         <span class="k">let</span> <span class="n">poly_vars</span> <span class="o">:=</span> <span class="err">Σ</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">J</span><span class="o">),</span> <span class="n">F</span><span class="bp">.</span><span class="n">obj</span> <span class="n">j</span><span class="o">,</span>
         <span class="n">R</span> <span class="o">:=</span> <span class="n">mv_polynomial</span> <span class="n">poly_vars</span> <span class="bp">ℤ</span> <span class="k">in</span>
         <span class="k">let</span> <span class="n">I</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">R</span> <span class="o">:=</span> <span class="n">ideal</span><span class="bp">.</span><span class="n">span</span> <span class="o">(</span><span class="err">∅</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span> <span class="k">in</span>
         <span class="n">category_theory</span><span class="bp">.</span><span class="n">mk_ob</span> <span class="o">(</span><span class="n">I</span><span class="bp">.</span><span class="n">quotient</span><span class="o">),</span>
    <span class="n">ι</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">app</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">j</span><span class="o">,</span> <span class="bp">⟨λ</span> <span class="n">r</span><span class="o">,</span><span class="k">begin</span> <span class="n">sorry</span> <span class="kn">end</span><span class="o">,</span> <span class="k">begin</span> <span class="n">sorry</span> <span class="kn">end</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">naturality&#39;</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">}</span>
    <span class="o">},</span>
  <span class="n">is_colimit</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="o">}</span>
</pre></div>


<p><code>mk_ob</code> added</p>

<a name="148055059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148055059" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148055059">Reid Barton (Nov 20 2018 at 17:38)</a>:</h4>
<p>Yes, looks like a good start</p>

<a name="148055063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148055063" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148055063">Kevin Buzzard (Nov 20 2018 at 17:38)</a>:</h4>
<p>I have never used this library before, I didn't know about <code>mk_ob</code>. Are there any docs or basic worked examples?</p>

<a name="148055068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148055068" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148055068">Kevin Buzzard (Nov 20 2018 at 17:38)</a>:</h4>
<p>Maybe I'm writing it :-)</p>

<a name="148055078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148055078" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148055078">Reid Barton (Nov 20 2018 at 17:39)</a>:</h4>
<p>I think possibly nobody has used it before</p>

<a name="148639534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148639534" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148639534">Johan Commelin (Nov 27 2018 at 14:04)</a>:</h4>
<p>I think something like this might be useful, and I couldn't find it elsewhere:</p>
<div class="codehilite"><pre><span></span><span class="kn">namespace</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span>
<span class="kn">open</span> <span class="n">category_theory</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">J</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="err">𝒞</span> <span class="o">:</span> <span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span> <span class="o">[</span><span class="err">𝒦</span> <span class="o">:</span> <span class="n">small_category</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">small_category</span> <span class="n">J</span><span class="o">]</span>
<span class="n">include</span> <span class="n">C</span> <span class="err">𝒞</span> <span class="n">K</span> <span class="err">𝒦</span>

<span class="kn">lemma</span> <span class="n">colimit</span><span class="bp">.</span><span class="n">pre_map</span>
  <span class="o">[</span><span class="n">has_colimits_of_shape</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">J</span> <span class="n">C</span><span class="o">]</span> <span class="o">[</span><span class="n">has_colimits_of_shape</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">K</span> <span class="n">C</span><span class="o">]</span>
  <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="n">J</span> <span class="err">⥤</span> <span class="n">C</span><span class="o">}</span> <span class="o">{</span><span class="n">E₁</span> <span class="n">E₂</span> <span class="o">:</span> <span class="n">K</span> <span class="err">⥤</span> <span class="n">J</span><span class="o">}</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">E₁</span> <span class="err">⟹</span> <span class="n">E₂</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">colimit</span><span class="bp">.</span><span class="n">pre</span> <span class="n">F</span> <span class="n">E₁</span> <span class="bp">=</span> <span class="n">colim</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="n">whisker_right</span> <span class="n">α</span> <span class="n">F</span><span class="o">)</span> <span class="err">≫</span> <span class="n">colimit</span><span class="bp">.</span><span class="n">pre</span> <span class="n">F</span> <span class="n">E₂</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">ext1</span><span class="o">,</span> <span class="n">dsimp</span><span class="o">,</span>
  <span class="n">conv</span> <span class="o">{</span><span class="n">to_rhs</span><span class="o">,</span> <span class="n">rw</span> <span class="err">←</span><span class="n">category</span><span class="bp">.</span><span class="n">assoc</span><span class="o">},</span>
  <span class="n">simp</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">end</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span>
</pre></div>

<a name="148796377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148796377" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148796377">Johan Commelin (Nov 29 2018 at 16:00)</a>:</h4>
<p>I don't have time to finish this atm, but I think we want lemmas like</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">colimit</span><span class="bp">.</span><span class="n">coyoneda</span> <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="n">J</span> <span class="err">⥤</span> <span class="n">C</span><span class="o">}</span> <span class="o">[</span><span class="n">has_colimit</span> <span class="n">F</span><span class="o">]</span> <span class="o">:</span> <span class="n">coyoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">colimit</span> <span class="n">F</span><span class="o">)</span> <span class="err">≅</span> <span class="n">F</span><span class="bp">.</span><span class="n">cocones</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">hom</span> <span class="o">:=</span>
  <span class="o">{</span> <span class="n">app</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">P</span> <span class="n">f</span><span class="o">,</span> <span class="n">cocones_of_cocone</span> <span class="o">((</span><span class="n">colimit</span><span class="bp">.</span><span class="n">cocone</span> <span class="n">F</span><span class="o">)</span><span class="bp">.</span><span class="n">extend</span> <span class="n">f</span><span class="o">),</span>
    <span class="n">naturality&#39;</span> <span class="o">:=</span>
    <span class="k">begin</span>
      <span class="n">tidy</span> <span class="o">{</span><span class="n">trace_result</span> <span class="o">:=</span> <span class="n">tt</span><span class="o">},</span>
      <span class="n">sorry</span>
    <span class="kn">end</span> <span class="o">},</span>
  <span class="n">inv</span> <span class="o">:=</span>
  <span class="o">{</span> <span class="n">app</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">P</span> <span class="n">c</span><span class="o">,</span> <span class="n">colimit</span><span class="bp">.</span><span class="n">desc</span> <span class="n">F</span> <span class="o">(</span><span class="n">cocone_of_cocones</span> <span class="n">c</span><span class="o">),</span>
    <span class="n">naturality&#39;</span> <span class="o">:=</span>
    <span class="k">begin</span>
      <span class="n">tidy</span> <span class="o">{</span><span class="n">trace_result</span> <span class="o">:=</span> <span class="n">tt</span><span class="o">},</span>
      <span class="n">sorry</span>
    <span class="kn">end</span> <span class="o">}</span> <span class="o">}</span>
</pre></div>

<a name="148796397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148796397" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148796397">Johan Commelin (Nov 29 2018 at 16:01)</a>:</h4>
<p>This generalises</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">colimit</span><span class="bp">.</span><span class="n">hom_equiv</span> <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="n">J</span> <span class="err">⥤</span> <span class="n">C</span><span class="o">}</span> <span class="o">[</span><span class="n">has_colimit</span> <span class="n">F</span><span class="o">]</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">colimit</span> <span class="n">F</span> <span class="err">⟶</span> <span class="n">P</span><span class="o">)</span> <span class="err">≅</span> <span class="o">(</span><span class="n">F</span><span class="bp">.</span><span class="n">cocones</span><span class="bp">.</span><span class="n">obj</span> <span class="n">P</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">hom</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="n">cocones_of_cocone</span> <span class="o">((</span><span class="n">colimit</span><span class="bp">.</span><span class="n">cocone</span> <span class="n">F</span><span class="o">)</span><span class="bp">.</span><span class="n">extend</span> <span class="n">f</span><span class="o">),</span>
  <span class="n">inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">c</span><span class="o">,</span> <span class="n">colimit</span><span class="bp">.</span><span class="n">desc</span> <span class="n">F</span> <span class="o">(</span><span class="n">cocone_of_cocones</span> <span class="n">c</span><span class="o">)</span> <span class="o">}</span>
</pre></div>

<a name="148797402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148797402" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148797402">Reid Barton (Nov 29 2018 at 16:13)</a>:</h4>
<p>Yes, probably. But this one is kind of automatic, I think. You might have an easier time constructing it with <code>nat_iso.of_components</code>.</p>

<a name="148797474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148797474" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148797474">Reid Barton (Nov 29 2018 at 16:14)</a>:</h4>
<p>The more crucial one is that the isomorphism is also natural in F</p>

<a name="148797932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148797932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148797932">Reid Barton (Nov 29 2018 at 16:20)</a>:</h4>
<p>And I guess we should state these simultaneously somehow</p>

<a name="148801479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148801479" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148801479">Johan Commelin (Nov 29 2018 at 17:13)</a>:</h4>
<p>Yes, I realised that while I was on the train. I'm not general enough...</p>

<a name="148801571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148801571" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148801571">Johan Commelin (Nov 29 2018 at 17:14)</a>:</h4>
<p>So <code>cocones</code> has to be turned into a functor, and then <code>colim &gt;&gt;&gt; coyoneda</code> should be naturally isomorphic to it, I guess.</p>

<a name="148802040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148802040" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148802040">Johan Commelin (Nov 29 2018 at 17:21)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> Do you think it makes sense to do this before the <code>limits-2</code> branch is merged?</p>

<a name="148802171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148802171" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148802171">Reid Barton (Nov 29 2018 at 17:23)</a>:</h4>
<p>No</p>

<a name="148802173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148802173" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148802173">Reid Barton (Nov 29 2018 at 17:23)</a>:</h4>
<p>No adding things!</p>

<a name="148802390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/148802390" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#148802390">Johan Commelin (Nov 29 2018 at 17:26)</a>:</h4>
<p>Sure... I'll create a <code>limits-2.epsilon</code> after this one is merged <span class="emoji emoji-1f609" title="wink">:wink:</span></p>

<a name="150749766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150749766" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150749766">Reid Barton (Dec 03 2018 at 04:21)</a>:</h4>
<p>This business with special shapes of limits is more subtle than I expected</p>

<a name="150749768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150749768" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150749768">Reid Barton (Dec 03 2018 at 04:22)</a>:</h4>
<p>Nothing is defeq to anything...</p>

<a name="150750517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150750517" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150750517">Reid Barton (Dec 03 2018 at 04:43)</a>:</h4>
<p>Maybe we should just not do anything here?</p>

<a name="150751753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150751753" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150751753">Johan Commelin (Dec 03 2018 at 05:22)</a>:</h4>
<p>What does "not do anything" mean?</p>

<a name="150751764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150751764" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150751764">Johan Commelin (Dec 03 2018 at 05:22)</a>:</h4>
<p>Do you mean to not have these special cases at all? Or do you mean that you don't want to change anything of what Scott did?</p>

<a name="150782044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150782044" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150782044">Reid Barton (Dec 03 2018 at 16:35)</a>:</h4>
<p>I mean not to have these special cases, or more precisely, still provide the functions for building functors and cones out of discrete categories, for example, but don't use the word "product" anywhere</p>

<a name="150783206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150783206" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150783206">Johan Commelin (Dec 03 2018 at 16:53)</a>:</h4>
<p>Ok, I would have to see that in action. I guess it would be useful if it increases the defeqness (defeqtitude?) of the library.</p>

<a name="150788548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150788548" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150788548">Johan Commelin (Dec 03 2018 at 18:13)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> Are you currently testing this out? Could you show what it would look like for (binary) products?</p>

<a name="150789492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150789492" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150789492">Reid Barton (Dec 03 2018 at 18:28)</a>:</h4>
<p>I haven't tried to put this into practice yet (hopefully I will be able to do so over the next few days) but you can approximate it by just ignoring the existence of files like <code>limits/products.lean</code>.</p>

<a name="150789525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150789525" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150789525">Reid Barton (Dec 03 2018 at 18:29)</a>:</h4>
<p>The definition of <code>pi</code> there for example is essentially just <code>pi f := limit (functor.of_function f)</code>--I'm suggesting you work with the right-hand side directly</p>

<a name="150789803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150789803" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150789803">Johan Commelin (Dec 03 2018 at 18:33)</a>:</h4>
<p>Hmm, but it is surprising that that would increase defeqness, right?</p>

<a name="150789813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150789813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150789813">Reid Barton (Dec 03 2018 at 18:33)</a>:</h4>
<p>I'm "increasing defeqness" by removing all the parts of the library which have defeq issues</p>

<a name="150789817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150789817" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150789817">Reid Barton (Dec 03 2018 at 18:33)</a>:</h4>
<p>it's a right adjoint</p>

<a name="150789918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150789918" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150789918">Reid Barton (Dec 03 2018 at 18:35)</a>:</h4>
<p>Here is an example: <code>limit.post : G.obj (limit F) ⟶ limit (F ⋙ G)</code><br>
The products version should look like <code>pi.post : G.obj (limits.pi f) ⟶ (limits.pi (G.obj ∘ f))</code> where <code>limits.pi f = limit (functor.of_function f)</code></p>

<a name="150790016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150790016" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150790016">Reid Barton (Dec 03 2018 at 18:36)</a>:</h4>
<p>Unfortunately <code>functor.of_function (G.obj ∘ f)</code> is not definitionally equal to <code>functor.of_function f ⋙ G</code></p>

<a name="150790029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150790029" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150790029">Reid Barton (Dec 03 2018 at 18:36)</a>:</h4>
<p>so <code>pi.post</code> is not a special case of <code>limit.post</code></p>

<a name="150790062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150790062" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150790062">Reid Barton (Dec 03 2018 at 18:37)</a>:</h4>
<p>So. my current feeling is that I have no idea how to solve this kind of issue clearly in the library, and so I would rather not even try, and let the user deal with it instead.</p>

<a name="150790136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150790136" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150790136">Johan Commelin (Dec 03 2018 at 18:38)</a>:</h4>
<p>Hmm... I see. So what kind of functions would you still provide?</p>

<a name="150790153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150790153" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150790153">Reid Barton (Dec 03 2018 at 18:38)</a>:</h4>
<p><code>functor.of_function</code> and similar things</p>

<a name="150790344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150790344" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150790344">Reid Barton (Dec 03 2018 at 18:41)</a>:</h4>
<p>Anything which lets you build a functor, natural transformation, cone, etc. out of one of these special indexing categories from simpler data. That amount clearly seems to be required, since building those manually is a big pain.</p>

<a name="150790414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150790414" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150790414">Reid Barton (Dec 03 2018 at 18:42)</a>:</h4>
<p>I want to make the overall API of size O(N+M) where N is the number of facts I know about limits and M is the number of special cases of limits I care about, not O(N*M)</p>

<a name="150791572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150791572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150791572">Johan Commelin (Dec 03 2018 at 18:58)</a>:</h4>
<p>I wouldn't mind having nice binder notation for <code>limit (functor.of_function f)</code>, but I guess we need to use a weird <code>\Pi</code>, because the other one is stolen...</p>

<a name="150791631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150791631" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150791631">Johan Commelin (Dec 03 2018 at 18:59)</a>:</h4>
<p>And writing <code>limit (functor.of_pair X Y)</code> seems pretty verbose. But we'll see. For now I think it is a good idea to at least make a PR with all the special shapes.</p>

<a name="150828818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150828818" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150828818">Scott Morrison (Dec 04 2018 at 07:27)</a>:</h4>
<p><code>limit (functor.of_pair X Y)</code> feels pretty lame to me. I agree the interface size is an issue, but we should set aside the pain of producing it, and decide whether the <code>N+M</code> or <code>N*M</code> interface is actually more usable.</p>

<a name="150828865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150828865" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150828865">Scott Morrison (Dec 04 2018 at 07:28)</a>:</h4>
<p>I worry that all the things you're proposing to leave out because they suffer from defeq issues are exactly putting the pain of dealing with those defeq issues on the user of the library.</p>

<a name="150828882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150828882" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150828882">Scott Morrison (Dec 04 2018 at 07:29)</a>:</h4>
<p>I mean, this is why I wrote everything out again in each special shape --- precisely because you can't just use the general one (or rather, if you do, you get a clumsier statement).</p>

<a name="150828966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150828966" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150828966">Scott Morrison (Dec 04 2018 at 07:31)</a>:</h4>
<p>That said, I absolutely appreciate the horror of an N*M size library.</p>

<a name="150829264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150829264" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150829264">Johan Commelin (Dec 04 2018 at 07:39)</a>:</h4>
<p>I would really have to see how this works out in practice.</p>

<a name="150848260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150848260" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150848260">Reid Barton (Dec 04 2018 at 14:01)</a>:</h4>
<blockquote>
<p>I worry that all the things you're proposing to leave out because they suffer from defeq issues are exactly putting the pain of dealing with those defeq issues on the user of the library.</p>
</blockquote>
<p>Yes, this is exactly the plan.</p>

<a name="150849330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150849330" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150849330">Reid Barton (Dec 04 2018 at 14:10)</a>:</h4>
<p>Note that the example <code>pi.post</code> where things start to go wrong is again a <em>definition</em>. That means it will appear in the statement of theorems about limits. It will not be possible to specialize these theorems to facts about <code>pi.post</code> if the latter is defined in a way unrelated to <code>limit.post</code>.</p>

<a name="150850056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150850056" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150850056">Reid Barton (Dec 04 2018 at 14:20)</a>:</h4>
<p>Basically my claim is that we don't actually how to address these issues (yet?) and I would rather not make O(N*M) guesses about the best way to proceed.</p>

<a name="150850070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150850070" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150850070">Reid Barton (Dec 04 2018 at 14:20)</a>:</h4>
<p>In my mind M and especially N are not fixed, but variable. So it's not just a matter of "write out all the N*M things, and then you're done"</p>

<a name="150850190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150850190" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150850190">Johan Commelin (Dec 04 2018 at 14:22)</a>:</h4>
<p>I think I agree with both of you.</p>

<a name="150850229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150850229" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150850229">Johan Commelin (Dec 04 2018 at 14:22)</a>:</h4>
<p>For the short-term future, I would follow Reid, but in the long-term I wouldn't mind having a really slick and polished library the way that Scott envisions it.</p>

<a name="150850248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150850248" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150850248">Reid Barton (Dec 04 2018 at 14:23)</a>:</h4>
<p>I do think we could define <code>product X Y := limit (functor.of_pair X Y)</code> and maybe 2-3 minor conveniences per limit type.</p>

<a name="150850250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150850250" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150850250">Johan Commelin (Dec 04 2018 at 14:23)</a>:</h4>
<p>Anyway, we've had an O(N) chunk merged. Next up seems to be an O(M) chunk. (-;</p>

<a name="150859092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150859092" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150859092">Johan Commelin (Dec 04 2018 at 16:25)</a>:</h4>
<p>So, how about the classes <code>has_products</code>, <code>has_pullbacks</code>, <code>has_equalizers</code>, etc... will they remain? Or do we just write <code>has_limits_of_shape walking_pair</code>?</p>

<a name="150863424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150863424" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150863424">Reid Barton (Dec 04 2018 at 17:32)</a>:</h4>
<p>I was planning on getting rid of those as well, though for a different reason, namely that the class system doesn't seem to deal with them well</p>

<a name="150870290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150870290" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150870290">Scott Morrison (Dec 04 2018 at 19:09)</a>:</h4>
<p>I'm really pretty dubious. We know that in many categories, there should be separate implementations of, say, binary_products and general limits. How will this be achieved in the minimal API?</p>

<a name="150870609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150870609" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150870609">Reid Barton (Dec 04 2018 at 19:12)</a>:</h4>
<p>No, don't do that</p>

<a name="150870639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150870639" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150870639">Reid Barton (Dec 04 2018 at 19:13)</a>:</h4>
<p>Better: provide specialized ways to construct <code>is_limit</code> cones</p>

<a name="150870808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150870808" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150870808">Scott Morrison (Dec 04 2018 at 19:14)</a>:</h4>
<p>I'm confused. What will it look like when someone needs to compare the carrier type of <code>limit (functor.of_pair X Y)</code> with the Lean built-in product of the carrier types of <code>X</code> and <code>Y</code>?</p>

<a name="150870833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150870833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150870833">Scott Morrison (Dec 04 2018 at 19:15)</a>:</h4>
<p>(supposing we're in an algebraic category)</p>

<a name="150870858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150870858" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150870858">Reid Barton (Dec 04 2018 at 19:15)</a>:</h4>
<p>I think you should not do that either, if by "compare" you mean expect them to be defeq</p>

<a name="150870959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150870959" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150870959">Reid Barton (Dec 04 2018 at 19:17)</a>:</h4>
<p>But you can use the <code>is_limit</code> for the cone for the product type to get an isomorphism to the <code>limit</code></p>

<a name="150871011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150871011" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150871011">Scott Morrison (Dec 04 2018 at 19:17)</a>:</h4>
<p>So, will we provide the natural isomorphism between the two functors <code>C x C -&gt; Type</code> at some point?</p>

<a name="150871051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150871051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150871051">Reid Barton (Dec 04 2018 at 19:18)</a>:</h4>
<p>Or if you're feeling lucky, you can locally set the product type one as an instance</p>

<a name="150871087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150871087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150871087">Reid Barton (Dec 04 2018 at 19:18)</a>:</h4>
<p>What two functors?</p>

<a name="150871213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150871213" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150871213">Reid Barton (Dec 04 2018 at 19:20)</a>:</h4>
<p>Do you mean Type x Type -&gt; Type?</p>

<a name="150871525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150871525" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150871525">Reid Barton (Dec 04 2018 at 19:24)</a>:</h4>
<p>There's going to be a difference between the underlying type of a limit over a discrete diagram that comes from <code>limit</code> and the Pi type in any case.</p>

<a name="150871574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150871574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150871574">Reid Barton (Dec 04 2018 at 19:25)</a>:</h4>
<p>I'd rather have this difference out in the open where I can deal with it explicitly, than buried inside some implicit parameter to a class instance</p>

<a name="150872073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150872073" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150872073">Johan Commelin (Dec 04 2018 at 19:30)</a>:</h4>
<p>I'm afraid I'm too much of an ITP-newbie to contribute meaningfully to this discussion. But for what it's worth, I'dd love to use sheaves as a testing ground of what <span class="user-mention" data-user-id="110032">@Reid Barton</span> is suggesting.</p>

<a name="150872086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150872086" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150872086">Reid Barton (Dec 04 2018 at 19:31)</a>:</h4>
<p>Recall Johan's issue <a href="#narrow/stream/116395-maths/subject/sheaves.20and.20sites/near/148024839" title="#narrow/stream/116395-maths/subject/sheaves.20and.20sites/near/148024839">https://leanprover.zulipchat.com/#narrow/stream/116395-maths/subject/sheaves.20and.20sites/near/148024839</a>. It took me a long time to even understand how the two sides could be different</p>

<a name="150878374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150878374" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150878374">Scott Morrison (Dec 04 2018 at 20:54)</a>:</h4>
<p>Okay, I'm definitely happy with the plan to just provide the bare minimum (e.g. functor.of_function and its friends), and then see if we can rebase the sheaf branch onto that.</p>

<a name="150878380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150878380" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150878380">Scott Morrison (Dec 04 2018 at 20:54)</a>:</h4>
<p>And learn what we need from that development.</p>

<a name="150878403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150878403" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150878403">Scott Morrison (Dec 04 2018 at 20:54)</a>:</h4>
<p>I agree it's hard to know how bad leaving things out is going to be, in the abstract.</p>

<a name="150905894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150905894" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150905894">Scott Morrison (Dec 05 2018 at 05:46)</a>:</h4>
<p>As mentioned elsewhere, I've rebased what remains of my limits PR into two pieces: some assorted stuff that can be merged, and the remaining remaining stuff, about special shapes, that shouldn't (yet) be.</p>

<a name="150905922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/150905922" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#150905922">Scott Morrison (Dec 05 2018 at 05:47)</a>:</h4>
<p>I did, in the special shapes part, remove a few very naughty <code>[instance]</code> attributes that really shouldn't have been there. I will, sometime, investigate whether their removal has helped.</p>

<a name="151229767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151229767" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151229767">Johan Commelin (Dec 09 2018 at 17:47)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> Any news about the next stage? Can you use any help?</p>

<a name="151235379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151235379" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151235379">Reid Barton (Dec 09 2018 at 20:36)</a>:</h4>
<p>I've been focusing on other Lean projects recently but actually the next thing I was going to do was PR a version of discrete categories, which Scott has already done in the meantime.</p>

<a name="151235463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151235463" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151235463">Reid Barton (Dec 09 2018 at 20:39)</a>:</h4>
<p>I'm going to be needing some of the other shapes before too long as well</p>

<a name="151566382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151566382" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151566382">Reid Barton (Dec 12 2018 at 21:51)</a>:</h4>
<p>I need to prove that <code>cocone.whisker</code>ing with an equivalence preserves <code>is_colimit</code>. <span class="user-mention" data-user-id="110087">@Scott Morrison</span> <span class="user-mention" data-user-id="112680">@Johan Commelin</span> I don't suppose either of you has already done this?</p>

<a name="151567210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151567210" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151567210">Kevin Buzzard (Dec 12 2018 at 22:05)</a>:</h4>
<p>What does whisker mean?</p>

<a name="151567222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151567222" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151567222">Kevin Buzzard (Dec 12 2018 at 22:05)</a>:</h4>
<p>I know what a cocone is.</p>

<a name="151567445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151567445" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151567445">Scott Morrison (Dec 12 2018 at 22:09)</a>:</h4>
<p>No, sorry, haven't done this.</p>

<a name="151567712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151567712" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151567712">Scott Morrison (Dec 12 2018 at 22:14)</a>:</h4>
<p>A cocone on F is a natural transformation from F : J \func C to a constant functor X. Whiskering means whiskering this natural transformation by a functor (i.e. horizontal composition with the identity natural transformation on a functor) (but we still need to work out if we mean by a functor J' \func J or by a functor C \func C'). Looking up <code>category_theory/limits/cones.lean</code>, it seems we have <code>def whisker {K : Type v} [small_category K] (E : K ⥤ J) (c : cocone F) : cocone (E ⋙ F)</code>,  so it's whiskering on the left.</p>

<a name="151567877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151567877" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151567877">Reid Barton (Dec 12 2018 at 22:17)</a>:</h4>
<p>I kind of want to rename <code>whisker</code> to <code>whisker_left</code> and make it a functor and rename <code>functoriality</code> to <code>whisker_right</code></p>

<a name="151567938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151567938" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151567938">Reid Barton (Dec 12 2018 at 22:18)</a>:</h4>
<p>I think the definition you originally wrote made the relationship to <code>whisker_right</code> more obvious</p>

<a name="151568636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151568636" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151568636">Scott Morrison (Dec 12 2018 at 22:31)</a>:</h4>
<p>I agree, these would be good changes.</p>

<a name="151587223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151587223" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151587223">Johan Commelin (Dec 13 2018 at 05:52)</a>:</h4>
<p>Only seeing this now, but sounds good to me.</p>

<a name="151831861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151831861" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151831861">Johan Commelin (Dec 15 2018 at 10:21)</a>:</h4>
<p>I would like to get more access to specialised shapes. But I don't have a good feeling which for which direction we want to go now. If we can get one example into a PR-ready form, then I could work on the others myself. <span class="user-mention" data-user-id="110032">@Reid Barton</span> <span class="user-mention" data-user-id="110087">@Scott Morrison</span> Do you think you have time to work on (say) products, this week?</p>

<a name="151831870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151831870" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151831870">Johan Commelin (Dec 15 2018 at 10:21)</a>:</h4>
<p>For example, I want to connect binary (co)products to <code>sup</code> and <code>inf</code> for lattices.</p>

<a name="151842125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151842125" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151842125">Reid Barton (Dec 15 2018 at 16:12)</a>:</h4>
<p>I'm going to take a look at special shapes again today. However, I'm not entirely sure how to proceed, both in terms of what we want the API to look like, and also in view of the fact that there is already an outstanding PR which adds discrete categories.</p>

<a name="151844141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151844141" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151844141">Johan Commelin (Dec 15 2018 at 17:07)</a>:</h4>
<p>Ok, cool. <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Would you have some time to take care of the outstanding PR's? Then we could start moving forward again. It seems to be blocking some work... (But I understand completely if you have other deadlines that are more important.)</p>

<a name="151844146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151844146" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151844146">Mario Carneiro (Dec 15 2018 at 17:08)</a>:</h4>
<p>Any advice on where to focus?</p>

<a name="151844468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151844468" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151844468">Johan Commelin (Dec 15 2018 at 17:16)</a>:</h4>
<p>(eg <a href="https://github.com/leanprover/mathlib/issues/503" target="_blank" title="https://github.com/leanprover/mathlib/issues/503">#503</a>, <a href="https://github.com/leanprover/mathlib/issues/505" target="_blank" title="https://github.com/leanprover/mathlib/issues/505">#505</a>)</p>

<a name="151844534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151844534" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151844534">Reid Barton (Dec 15 2018 at 17:18)</a>:</h4>
<p><a href="https://github.com/leanprover/mathlib/issues/512" target="_blank" title="https://github.com/leanprover/mathlib/issues/512">#512</a> has discrete categories which I think are the least problematic of the "special shapes"</p>

<a name="151844795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151844795" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151844795">Mario Carneiro (Dec 15 2018 at 17:26)</a>:</h4>
<p>I commented on that PR, but it looks like there are still some outstanding comments of yours as well</p>

<a name="151844812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151844812" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151844812">Reid Barton (Dec 15 2018 at 17:27)</a>:</h4>
<p>Indeed</p>

<a name="151844959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151844959" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151844959">Johan Commelin (Dec 15 2018 at 17:30)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> While you are at it, would you mind taking a look at my other PR's? I think they are all pretty straight-forward. Just adding little tidbits to the category lib</p>

<a name="151845078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151845078" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151845078">Mario Carneiro (Dec 15 2018 at 17:34)</a>:</h4>
<p>I'm not sure about the <code>op</code> thing though</p>

<a name="151845089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151845089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151845089">Mario Carneiro (Dec 15 2018 at 17:35)</a>:</h4>
<p>I thought there was a reason it was a type synonym rather than a wrapper</p>

<a name="151845094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151845094" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151845094">Mario Carneiro (Dec 15 2018 at 17:35)</a>:</h4>
<p>I agree that if it is irreducible it may as well just be a separate inductive type</p>

<a name="151845140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151845140" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151845140">Mario Carneiro (Dec 15 2018 at 17:36)</a>:</h4>
<p>although with up and down functions you won't get <code>up (down x) = x</code> and <code>down (up x) = x</code> both being rfl</p>

<a name="151845149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151845149" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151845149">Mario Carneiro (Dec 15 2018 at 17:37)</a>:</h4>
<p>maybe this doesn't matter because these are object equalities...?</p>

<a name="151845151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151845151" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151845151">Reid Barton (Dec 15 2018 at 17:37)</a>:</h4>
<p>Oh yeah, that could be annoying...</p>

<a name="151845195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151845195" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151845195">Mario Carneiro (Dec 15 2018 at 17:38)</a>:</h4>
<p>with irreducible you will get strange things not being refl, like with real</p>

<a name="151845198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151845198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151845198">Mario Carneiro (Dec 15 2018 at 17:38)</a>:</h4>
<p>I tend to shy away from it for that reason</p>

<a name="151845258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151845258" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151845258">Reid Barton (Dec 15 2018 at 17:40)</a>:</h4>
<p>I notice that PR doesn't build currently anyways</p>

<a name="151845509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151845509" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151845509">Reid Barton (Dec 15 2018 at 17:49)</a>:</h4>
<p>With the <code>irreducible</code> definition, would the elaborator treat both <code>unop (op x) = x</code> and <code>op (unop x) = x</code> as definitional equalities?</p>

<a name="151845511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151845511" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151845511">Johan Commelin (Dec 15 2018 at 17:49)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Thanks for the merges!</p>

<a name="151845566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151845566" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151845566">Reid Barton (Dec 15 2018 at 17:50)</a>:</h4>
<p>I guess I should just experiment... but this particular PR hasn't been a high priority for me</p>

<a name="151846091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151846091" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151846091">Reid Barton (Dec 15 2018 at 18:08)</a>:</h4>
<p>I think these being questions about equalities between objects makes it more important whether the equalities are definitional, not less</p>

<a name="151846670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151846670" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151846670">Mario Carneiro (Dec 15 2018 at 18:28)</a>:</h4>
<p>with the irreducible definition I think they would both not be defeq</p>

<a name="151846738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151846738" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151846738">Mario Carneiro (Dec 15 2018 at 18:31)</a>:</h4>
<p>I stand corrected:</p>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="kn">irreducible</span><span class="o">]</span> <span class="n">def</span> <span class="n">A</span> <span class="o">:=</span> <span class="n">nat</span>

<span class="n">def</span> <span class="n">to_nat</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">nat</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">delta</span> <span class="n">A</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">id</span>
<span class="n">def</span> <span class="n">of_nat</span> <span class="o">:</span> <span class="n">nat</span> <span class="bp">→</span> <span class="n">A</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">delta</span> <span class="n">A</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">id</span>

<span class="kn">theorem</span> <span class="n">to_of</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">to_nat</span> <span class="o">(</span><span class="n">of_nat</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">rfl</span> <span class="c1">--ok</span>
<span class="kn">theorem</span> <span class="n">of_to</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">of_nat</span> <span class="o">(</span><span class="n">to_nat</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">rfl</span> <span class="c1">--ok</span>
</pre></div>

<a name="151846902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151846902" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151846902">Johan Commelin (Dec 15 2018 at 18:37)</a>:</h4>
<p>What the heck is <code>delta</code>? I've never seen it before...</p>

<a name="151846950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151846950" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151846950">Patrick Massot (Dec 15 2018 at 18:38)</a>:</h4>
<p>it's a variation on <code>dunfold</code></p>

<a name="151847009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151847009" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151847009">Patrick Massot (Dec 15 2018 at 18:40)</a>:</h4>
<p>I've never used it</p>

<a name="151847488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151847488" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151847488">Mario Carneiro (Dec 15 2018 at 18:56)</a>:</h4>
<p>it's a very low level definition unfolding tactic</p>

<a name="151847490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151847490" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151847490">Mario Carneiro (Dec 15 2018 at 18:57)</a>:</h4>
<p>it's good for cases when the elaborator doesn't want it to unfold</p>

<a name="151847497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151847497" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151847497">Mario Carneiro (Dec 15 2018 at 18:57)</a>:</h4>
<p>although I guess in this case <code>dunfold</code> suffices</p>

<a name="151847602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151847602" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151847602">Mario Carneiro (Dec 15 2018 at 19:00)</a>:</h4>
<p>I used <code>delta</code> also in the <code>hidden</code> thread, to unfold <code>nat.add</code> into its underlying recursor</p>

<a name="151847608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151847608" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151847608">Mario Carneiro (Dec 15 2018 at 19:00)</a>:</h4>
<p><code>dunfold</code> and its friends refuse to use the definition, they only use equation lemmas</p>

<a name="151847627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151847627" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151847627">Patrick Massot (Dec 15 2018 at 19:01)</a>:</h4>
<p>I knew I saw it not a long time ago!</p>

<a name="151848133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/151848133" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#151848133">Kevin Buzzard (Dec 15 2018 at 19:18)</a>:</h4>
<p>It was when I was writing a blog post about equality (a post which is still in the queue of jobs).</p>

<a name="152253229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/152253229" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#152253229">Scott Morrison (Dec 20 2018 at 12:30)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="110032">@Reid Barton</span>, <span class="user-mention" data-user-id="112680">@Johan Commelin</span>, I just separated out what remains of my limits PR into two branches. <code>limits-shapes</code> just provides convenience methods for dealing with cones of special shapes, but doesn't attempt to introduce <code>has_products</code> or any similar gadgets.</p>

<a name="152253241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/152253241" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#152253241">Scott Morrison (Dec 20 2018 at 12:30)</a>:</h4>
<p>There's also <code>limits-other</code> which still has everything (the O(M*N) approach...) rebased onto this.</p>

<a name="152304748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/152304748" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#152304748">Johan Commelin (Dec 21 2018 at 03:02)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> Does this also mean that you are planning to split <a href="https://github.com/leanprover/mathlib/issues/512" target="_blank" title="https://github.com/leanprover/mathlib/issues/512">#512</a> into two pieces?</p>

<a name="152305601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/152305601" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#152305601">Scott Morrison (Dec 21 2018 at 03:22)</a>:</h4>
<p>I guess I was hoping to just get <a href="https://github.com/leanprover/mathlib/issues/512" target="_blank" title="https://github.com/leanprover/mathlib/issues/512">#512</a> merged.</p>

<a name="152305618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/152305618" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#152305618">Scott Morrison (Dec 21 2018 at 03:23)</a>:</h4>
<p>It's such a grab bag it's not obvious to me where a split would go.</p>

<a name="152315453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/152315453" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#152315453">Johan Commelin (Dec 21 2018 at 08:17)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> The merge of <a href="https://github.com/leanprover/mathlib/issues/512" target="_blank" title="https://github.com/leanprover/mathlib/issues/512">#512</a> introduced some regressions.</p>

<a name="152315459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/152315459" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#152315459">Mario Carneiro (Dec 21 2018 at 08:18)</a>:</h4>
<p>okay, then progress it</p>

<a name="152315464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/152315464" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#152315464">Johan Commelin (Dec 21 2018 at 08:18)</a>:</h4>
<p>At least <a href="https://github.com/leanprover/mathlib/pull/512/files#diff-c997371393c06bacaf4074ef43915f3e" target="_blank" title="https://github.com/leanprover/mathlib/pull/512/files#diff-c997371393c06bacaf4074ef43915f3e">https://github.com/leanprover/mathlib/pull/512/files#diff-c997371393c06bacaf4074ef43915f3e</a></p>

<a name="152315502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/152315502" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#152315502">Johan Commelin (Dec 21 2018 at 08:18)</a>:</h4>
<p>I think the rest is fine.</p>

<a name="152315512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/152315512" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#152315512">Mario Carneiro (Dec 21 2018 at 08:18)</a>:</h4>
<p>I will leave it to you and scott to figure out what needs fixing</p>

<a name="152317406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/152317406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#152317406">Johan Commelin (Dec 21 2018 at 09:04)</a>:</h4>
<p>Done (finally): <a href="https://github.com/leanprover/mathlib/issues/550" target="_blank" title="https://github.com/leanprover/mathlib/issues/550">#550</a></p>

<a name="152320743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/limits%202.0/near/152320743" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/73251limits20.html#152320743">Scott Morrison (Dec 21 2018 at 10:15)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="112680">@Johan Commelin</span>.</p>


{% endraw %}
