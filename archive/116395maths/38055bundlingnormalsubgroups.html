---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/38055bundlingnormalsubgroups.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html">bundling normal subgroups</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="172578230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172578230" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172578230">Kevin Buzzard (Aug 06 2019 at 11:01)</a>:</h4>
<p>Should normal subgroups be bundled? I am a bit confused about this.</p>
<p>Subsets of a group G are bundled -- they're <code>set G</code>. The general concensus amongst the community is that subgroups of G should also be bundled -- they can be <code>subgroup G</code>. There's a local project at Imperial with bundled subgroups and they're working fine.</p>
<p>But we're venturing into quotients so we need the notion of a normal subgroup. If we also bundle these as <code>normal_subgroup' G</code> then we have the issue that a normal subgroup of G is now not a subgroup. We can put a coercion to subgroups, but then there's sometimes a coercion from subgroups to subsets, and we are ending up with double coercions and things just don't look good.</p>
<p>Thinking about how to solve this made me realise that I don't really understand what's going on. Are we bundling subgroups because they just seem to work better? Is the idea that we bundled submodules and they worked really well? Is there an argument for making normal subgroups a typeclass on subgroups? This feels similar to making subgroups a typeclass on subsets  -- which is what the community decided to move away from. What are the disadvantages of letting normal subgroups be a typeclass on bundled subgroups?</p>

<a name="172589063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172589063" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172589063">Kevin Buzzard (Aug 06 2019 at 13:41)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> do you have an opinion about this? Sorry to bother you.</p>

<a name="172589463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172589463" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172589463">Chris Hughes (Aug 06 2019 at 13:46)</a>:</h4>
<p>I think that probably bundling normal subgroups will be best. There'll be type class inference problems otherwise with quotient groups. A lot of these decisions depend on what happens in Lean4. Hopefully we'll have unification hints that work nicely.</p>

<a name="172589529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172589529" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172589529">Kevin Buzzard (Aug 06 2019 at 13:46)</a>:</h4>
<p>Then should there be coercions from normal subgroups to subgroups, and from subgroups to subsets, and from normal subgroups to subsets?</p>

<a name="172589708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172589708" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172589708">Chris Hughes (Aug 06 2019 at 13:48)</a>:</h4>
<p>Yes, but then there should probably be mem on all of this stuff as well.</p>

<a name="172589734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172589734" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172589734">Kevin Buzzard (Aug 06 2019 at 13:48)</a>:</h4>
<p>I guess <code>ideal R</code> is bundled ideals and <code>Spec R</code> is bundled prime ideals.</p>

<a name="172589817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172589817" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172589817">Kevin Buzzard (Aug 06 2019 at 13:49)</a>:</h4>
<p>Oh wow Amelia just pointed out</p>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="n">class</span><span class="o">]</span> <span class="n">def</span> <span class="n">is_prime</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="n">I</span> <span class="bp">≠</span> <span class="err">⊤</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">I</span> <span class="bp">∨</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">I</span>
</pre></div>


<p>What's going on there? I don't even understand how a definition which isn't a structure can be tagged as a class.</p>

<a name="172589841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172589841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172589841">Kevin Buzzard (Aug 06 2019 at 13:49)</a>:</h4>
<p>Is that another way of doing normal subgroups?</p>

<a name="172589946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172589946" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172589946">Chris Hughes (Aug 06 2019 at 13:50)</a>:</h4>
<p>It's possible but a bad idea, but I can't remember why. Something to do with it being semireducible.</p>

<a name="172596467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172596467" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172596467">Mario Carneiro (Aug 06 2019 at 14:59)</a>:</h4>
<p>I think normal should be a predicate on subgroups, and quotient groups should be defined relative to arbitrary sets or arbitrary subgroups (not sure which) by taking the normal closure</p>

<a name="172596564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172596564" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172596564">Kevin Buzzard (Aug 06 2019 at 15:00)</a>:</h4>
<p>You can make a quotient by a non-normal subgroup, it's just a set with an action of the big group</p>

<a name="172596584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172596584" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172596584">Mario Carneiro (Aug 06 2019 at 15:00)</a>:</h4>
<p>it's not a group though</p>

<a name="172596603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172596603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172596603">Kevin Buzzard (Aug 06 2019 at 15:01)</a>:</h4>
<p>No. What do you mean by predicate? No type class inference at all?</p>

<a name="172596632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172596632" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172596632">Mario Carneiro (Aug 06 2019 at 15:01)</a>:</h4>
<p>right</p>

<a name="172596666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172596666" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172596666">Mario Carneiro (Aug 06 2019 at 15:01)</a>:</h4>
<p>I'm not positive, it depends on how this predicate is used</p>

<a name="172596726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172596726" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172596726">Mario Carneiro (Aug 06 2019 at 15:02)</a>:</h4>
<p>when do you need normality anyway?</p>

<a name="172596748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172596748" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172596748">Kevin Buzzard (Aug 06 2019 at 15:02)</a>:</h4>
<p>When you're teaching undergraduates group theory</p>

<a name="172596777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172596777" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172596777">Mario Carneiro (Aug 06 2019 at 15:02)</a>:</h4>
<p>a predicate is preferable for teaching undergrads</p>

<a name="172596792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172596792" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172596792">Mario Carneiro (Aug 06 2019 at 15:02)</a>:</h4>
<p>typeclass inference is confusing</p>

<a name="172596887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/172596887" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#172596887">Kevin Buzzard (Aug 06 2019 at 15:04)</a>:</h4>
<p>Fair point</p>

<a name="194549633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/194549633" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#194549633">Kevin Buzzard (Apr 18 2020 at 15:19)</a>:</h4>
<p>OK, now <a href="https://github.com/leanprover-community/mathlib/issues/2140" title="https://github.com/leanprover-community/mathlib/issues/2140">#2140</a> is close to hitting mathlib (hopefully -- any reviews welcome) we need to make a decision on normal subgroups. There are two possibilities: (1) bundling (i.e. a new type <code>normal_subgroup G</code>) (2) a predicate <code>is_normal</code> on <code>subgroup G</code> which isn't a class (3) a predicate <code>is_normal</code> on subgroup G` which is a class.</p>
<p>Mario asked "when do you need normality anyway?" and my initial answer was "teaching" but now it's "research" -- we use quotient groups in the perfectoid project, and currently we're quotienting out by an unbundled normal subgroup. I'd like to get started on this but I don't know what to do. Mario suggested quotienting out by general subsets (defined to be quotienting out by the normal closure) and because I don't actually need normal subgroups per se, but rather quotient groups, this would also be good for me. </p>
<p>I am completely happy if the answer is "make a random choice and see how it works out" but what I want to avoid is me refactoring <code>group_theory/quotient_group.lean</code> and then in the PR process someone saying "you should have done it another way". </p>
<p>In fact maybe this is not even the right question! I don't even care about normal subgroups. I care about quotient groups. Currently the set-up is </p>
<div class="codehilite"><pre><span></span><span class="n">quotient_group</span><span class="bp">.</span><span class="n">quotient</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">[</span><span class="bp">_</span><span class="n">inst_2</span> <span class="o">:</span> <span class="n">is_subgroup</span> <span class="n">s</span><span class="o">],</span> <span class="kt">Type</span> <span class="n">u_1</span>
</pre></div>


<p>(this is just the type of cosets) and then an instance of type</p>
<div class="codehilite"><pre><span></span><span class="bp">Π</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">N</span> <span class="o">:</span> <span class="n">set</span> <span class="n">G</span><span class="o">)</span> <span class="o">[</span><span class="bp">_</span><span class="n">inst_2</span> <span class="o">:</span> <span class="n">normal_subgroup</span> <span class="n">N</span><span class="o">],</span> <span class="n">group</span> <span class="o">(</span><span class="n">quotient</span> <span class="n">N</span><span class="o">)</span>
</pre></div>


<p>My question is simple: should I PR some more lemmas about quotient groups, or should I take the opportunity to refactor quotient groups in some way? If so, how? I would like to come to a firm decision before starting the PR.</p>

<a name="194549697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/194549697" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#194549697">Reid Barton (Apr 18 2020 at 15:20)</a>:</h4>
<p>You should randomly choose (1)</p>

<a name="194549713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/194549713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#194549713">Reid Barton (Apr 18 2020 at 15:21)</a>:</h4>
<p>But it sounds like this is what you have already?</p>

<a name="194549715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/194549715" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#194549715">Reid Barton (Apr 18 2020 at 15:21)</a>:</h4>
<p>Oh wait, no I misread.</p>

<a name="194549892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/194549892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#194549892">Reid Barton (Apr 18 2020 at 15:25)</a>:</h4>
<p>In perfectoid spaces, are you taking quotients of abelian groups?</p>

<a name="194549960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/194549960" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#194549960">Kevin Buzzard (Apr 18 2020 at 15:26)</a>:</h4>
<p>Yes</p>

<a name="194549977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/bundling%20normal%20subgroups/near/194549977" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/38055bundlingnormalsubgroups.html#194549977">Kevin Buzzard (Apr 18 2020 at 15:27)</a>:</h4>
<p>but I decided not to mention this because I thought it would muddy the water.</p>


{% endraw %}

{% include archive_update.html %}