---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/47790deltarings.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html">delta rings</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="129993188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993188" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993188">Johan Commelin (Jul 20 2018 at 12:17)</a>:</h4>
<p>Fix a prime <code>p</code>.</p>

<a name="129993189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993189" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993189">Kenny Lau (Jul 20 2018 at 12:17)</a>:</h4>
<p>57</p>

<a name="129993230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993230" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993230">Johan Commelin (Jul 20 2018 at 12:18)</a>:</h4>
<p>Consider the following attempt at a definition:</p>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">delta_ring</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="kn">extends</span> <span class="n">comm_ring</span> <span class="n">A</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">δ</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">A</span><span class="o">)</span>
<span class="o">(</span><span class="n">add_prop</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span><span class="o">},</span> <span class="n">δ</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">δ</span><span class="o">(</span><span class="n">a</span><span class="o">)</span><span class="err">^</span><span class="n">p</span> <span class="bp">+</span> <span class="n">δ</span><span class="o">(</span><span class="n">b</span><span class="o">)</span><span class="err">^</span><span class="n">p</span> <span class="bp">+</span> <span class="o">(</span><span class="n">a</span><span class="err">^</span><span class="n">p</span> <span class="bp">+</span> <span class="n">b</span><span class="err">^</span><span class="n">p</span> <span class="bp">-</span> <span class="o">(</span><span class="n">a</span><span class="bp">+</span><span class="n">b</span><span class="o">)</span><span class="err">^</span><span class="n">p</span><span class="o">)</span><span class="bp">/</span><span class="n">p</span><span class="o">)</span>
</pre></div>

<a name="129993244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993244" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993244">Johan Commelin (Jul 20 2018 at 12:18)</a>:</h4>
<p>How should one explain to Lean that <code>(a^p + b^p - (a+b)^p)/p</code> in fact makes sense?</p>

<a name="129993254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993254" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993254">Kenny Lau (Jul 20 2018 at 12:18)</a>:</h4>
<p>must that expression have a unique value?</p>

<a name="129993256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993256" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993256">Kenny Lau (Jul 20 2018 at 12:18)</a>:</h4>
<p>yes</p>

<a name="129993260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993260" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993260">Kenny Lau (Jul 20 2018 at 12:19)</a>:</h4>
<p>you can define a function that spits out that value?</p>

<a name="129993265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993265" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993265">Johan Commelin (Jul 20 2018 at 12:19)</a>:</h4>
<p>Yes, you can. But doesn't that make the definition extremely convoluted?</p>

<a name="129993273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993273" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993273">Kenny Lau (Jul 20 2018 at 12:19)</a>:</h4>
<p>delta_ring.aux : A \to A \to prime \to A</p>

<a name="129993326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993326" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993326">Johan Commelin (Jul 20 2018 at 12:21)</a>:</h4>
<p>And I guess Lean gets happier if I give an explicit definition? Instead of just claiming that the value exists because certain binomial coefficients will always have a factor <code>p</code>?</p>

<a name="129993331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993331" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993331">Kenny Lau (Jul 20 2018 at 12:21)</a>:</h4>
<p>at least I would be happier</p>

<a name="129993446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993446" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993446">Johan Commelin (Jul 20 2018 at 12:24)</a>:</h4>
<p>Here is the full "definition":</p>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">delta_ring</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="kn">extends</span> <span class="n">comm_ring</span> <span class="n">A</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">δ</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">A</span><span class="o">)</span>
<span class="o">(</span><span class="n">zero_prop</span> <span class="o">:</span> <span class="n">δ</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
<span class="o">(</span><span class="n">one_prop</span> <span class="o">:</span> <span class="n">δ</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
<span class="o">(</span><span class="n">add_prop</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span><span class="o">},</span> <span class="n">δ</span><span class="o">(</span><span class="n">a</span><span class="bp">+</span><span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">δ</span><span class="o">(</span><span class="n">a</span><span class="o">)</span><span class="err">^</span><span class="n">p</span> <span class="bp">+</span> <span class="n">δ</span><span class="o">(</span><span class="n">b</span><span class="o">)</span><span class="err">^</span><span class="n">p</span> <span class="bp">+</span> <span class="o">(</span><span class="n">a</span><span class="err">^</span><span class="n">p</span> <span class="bp">+</span> <span class="n">b</span><span class="err">^</span><span class="n">p</span> <span class="bp">-</span> <span class="o">(</span><span class="n">a</span><span class="bp">+</span><span class="n">b</span><span class="o">)</span><span class="err">^</span><span class="n">p</span><span class="o">)</span><span class="bp">/</span><span class="n">p</span><span class="o">)</span>
<span class="o">(</span><span class="n">mul_prop</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span><span class="o">},</span> <span class="n">δ</span><span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span><span class="err">^</span><span class="n">p</span><span class="bp">*</span><span class="n">δ</span><span class="o">(</span><span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="n">b</span><span class="err">^</span><span class="n">p</span><span class="bp">*</span><span class="n">δ</span><span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="bp">+</span> <span class="n">p</span><span class="bp">*</span><span class="n">δ</span><span class="o">(</span><span class="n">a</span><span class="o">)</span><span class="bp">*</span><span class="n">δ</span><span class="o">(</span><span class="n">b</span><span class="o">))</span>
</pre></div>

<a name="129993460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993460" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993460">Kenny Lau (Jul 20 2018 at 12:25)</a>:</h4>
<p>would you say that including <code>^</code> make the definition more convoluted?</p>

<a name="129993517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993517" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993517">Johan Commelin (Jul 20 2018 at 12:26)</a>:</h4>
<p>What do you mean?</p>

<a name="129993524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993524" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993524">Johan Commelin (Jul 20 2018 at 12:26)</a>:</h4>
<p>Ok, I see what you are getting at...</p>

<a name="129993526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993526" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993526">Kenny Lau (Jul 20 2018 at 12:26)</a>:</h4>
<p><code>^</code> is also an auxiliary function that doesn't follow from the ring axioms</p>

<a name="129993538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993538" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993538">Johan Commelin (Jul 20 2018 at 12:26)</a>:</h4>
<p>Well, as a mathematician, I am used to the notation <code>^</code>, but not to the function <code>delta_ring.aux</code>.</p>

<a name="129993539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993539" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993539">Kenny Lau (Jul 20 2018 at 12:27)</a>:</h4>
<p>that's an arbitrary distinction</p>

<a name="129993552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993552" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993552">Johan Commelin (Jul 20 2018 at 12:27)</a>:</h4>
<p>By that logic every definition in maths is arbitrary.</p>

<a name="129993609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993609" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993609">Kenny Lau (Jul 20 2018 at 12:28)</a>:</h4>
<p>alright</p>

<a name="129993628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993628" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993628">Johan Commelin (Jul 20 2018 at 12:29)</a>:</h4>
<p>Anyway, do you think it is easy to define <code>aux</code> constructively?</p>

<a name="129993631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993631" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993631">Kenny Lau (Jul 20 2018 at 12:29)</a>:</h4>
<p>I think the function ((a+b)^p-a^p-b^p)/p might be useful more generally</p>

<a name="129993686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993686" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993686">Kenny Lau (Jul 20 2018 at 12:30)</a>:</h4>
<p>hmm, let me think about that</p>

<a name="129993702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993702" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993702">Johan Commelin (Jul 20 2018 at 12:30)</a>:</h4>
<p>I guess I first need to prove that <code>binom p i</code> is divisible by <code>p</code> for <code>0 &lt; i &lt; p</code>.</p>

<a name="129993748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993748" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993748">Kenny Lau (Jul 20 2018 at 12:31)</a>:</h4>
<p>can we somehow extend that definition to all natural numbers?</p>

<a name="129993814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993814" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993814">Kevin Buzzard (Jul 20 2018 at 12:32)</a>:</h4>
<p>no, p has to be prime (if you are working over an arbitrary ring)</p>

<a name="129993818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993818" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993818">Kevin Buzzard (Jul 20 2018 at 12:32)</a>:</h4>
<p>Kenny didn't you already write this function somehow?</p>

<a name="129993832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993832" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993832">Kevin Buzzard (Jul 20 2018 at 12:33)</a>:</h4>
<p>I think Chris did some binomial / factorial things</p>

<a name="129993835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993835" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993835">Kenny Lau (Jul 20 2018 at 12:33)</a>:</h4>
<p>f(a,b,2) = ab<br>
f(a,b,3) = aab+abb<br>
f(a,b,5) = aaaab+2aaabb+2aabbb+abbbb<br>
f(a,b,7) = aaaaaab+3aaaaabb+5aaaabbb+5aaabbbb+3aabbbbb+abbbbbb</p>

<a name="129993838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993838" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993838">Kenny Lau (Jul 20 2018 at 12:33)</a>:</h4>
<p>there's nothing that can go between the lines?</p>

<a name="129993841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993841">Kenny Lau (Jul 20 2018 at 12:33)</a>:</h4>
<p>hmm</p>

<a name="129993843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993843">Kevin Buzzard (Jul 20 2018 at 12:33)</a>:</h4>
<p>no</p>

<a name="129993849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993849" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993849">Kenny Lau (Jul 20 2018 at 12:33)</a>:</h4>
<p>what does a mathematician think about this function?</p>

<a name="129993887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993887" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993887">Kevin Buzzard (Jul 20 2018 at 12:34)</a>:</h4>
<p>If Chris proved that binom p i * i! * (p-i)! = p! then proving it's a multiple of p is fine as long as you know that if p divides ab then p divides a or b.</p>

<a name="129993894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993894" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993894">Kevin Buzzard (Jul 20 2018 at 12:34)</a>:</h4>
<p>You then prove that p doesn't divide i! for i&lt;p and you're done</p>

<a name="129993914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993914" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993914">Kenny Lau (Jul 20 2018 at 12:34)</a>:</h4>
<p>I know that "pCa is divisible by p for all a" iff p is a prime</p>

<a name="129993918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993918" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993918">Kenny Lau (Jul 20 2018 at 12:34)</a>:</h4>
<p>i'm asking whether that function can be extended</p>

<a name="129993933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993933" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993933">Kevin Buzzard (Jul 20 2018 at 12:35)</a>:</h4>
<p>sure it can be extended -- just define it to be 37 for n not prime</p>

<a name="129993941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129993941" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129993941">Kenny Lau (Jul 20 2018 at 12:35)</a>:</h4>
<p>well</p>

<a name="129994038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994038" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994038">Kenny Lau (Jul 20 2018 at 12:37)</a>:</h4>
<p>I think the GPOV is to define the relevant elements of Z[X,Y] first</p>

<a name="129994048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994048" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994048">Kevin Buzzard (Jul 20 2018 at 12:37)</a>:</h4>
<p>You're inventing Witt vectors</p>

<a name="129994051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994051">Kevin Buzzard (Jul 20 2018 at 12:37)</a>:</h4>
<p>you can do stuff for prime powers somehow</p>

<a name="129994052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994052" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994052">Kenny Lau (Jul 20 2018 at 12:37)</a>:</h4>
<p>indeed</p>

<a name="129994100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994100">Johan Commelin (Jul 20 2018 at 12:38)</a>:</h4>
<p>Alternatively, Kenny puts Witt vectors into mathlib (-;</p>

<a name="129994126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994126" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994126">Johan Commelin (Jul 20 2018 at 12:38)</a>:</h4>
<p>I mean, we are doing this perfectoid stuff. But the mathematicians are already moving on...</p>

<a name="129994127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994127" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994127">Kevin Buzzard (Jul 20 2018 at 12:38)</a>:</h4>
<p>The trendy way to do Witt vectors nowadays is to note that if k is a perfect field of char p and R is a k-algebra then the cotangent complex vanishes</p>

<a name="129994138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994138" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994138">Kevin Buzzard (Jul 20 2018 at 12:39)</a>:</h4>
<p>a la Scholze perfectoid spaces paper</p>

<a name="129994141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994141" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994141">Johan Commelin (Jul 20 2018 at 12:39)</a>:</h4>
<p>Nowadays you're only hot if you're doing diamonds or prisms...</p>

<a name="129994229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994229" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994229">Patrick Massot (Jul 20 2018 at 12:40)</a>:</h4>
<p>Let's try perfectoid spaces first...</p>

<a name="129994239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994239" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994239">Johan Commelin (Jul 20 2018 at 12:41)</a>:</h4>
<p>(Kevin, I think the perfectoid project is really cool. So I'm just trying to do some related things to the side, while you are wrapping up <code>Cont</code> et al.)</p>

<a name="129994278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994278" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994278">Kenny Lau (Jul 20 2018 at 12:42)</a>:</h4>
<p>where are the prism emojis when I need them</p>

<a name="129994432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994432" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994432">Kenny Lau (Jul 20 2018 at 12:44)</a>:</h4>
<p>do we have valuations of integers at a prime?</p>

<a name="129994437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994437" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994437">Kenny Lau (Jul 20 2018 at 12:44)</a>:</h4>
<p>I think Alexandria has that</p>

<a name="129994447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994447" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994447">Johan Commelin (Jul 20 2018 at 12:45)</a>:</h4>
<p>Ok, mathlib knows how to raise ring elements to <code>nat</code>-powers, right? Why is this failing?</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Frob</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">ring</span> <span class="n">A</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span> <span class="n">x</span><span class="err">^</span><span class="n">p</span>
</pre></div>


<p>Error:</p>
<div class="codehilite"><pre><span></span><span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="n">class</span> <span class="kn">instance</span> <span class="n">for</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">Prime</span><span class="o">,</span>
<span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_2</span> <span class="o">:</span> <span class="n">ring</span> <span class="n">A</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">A</span>
<span class="err">⊢</span> <span class="n">has_pow</span> <span class="n">A</span> <span class="bp">ℕ</span>
</pre></div>

<a name="129994461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994461" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994461">Kenny Lau (Jul 20 2018 at 12:45)</a>:</h4>
<p>did you import the right things?</p>

<a name="129994463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994463" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994463">Johan Commelin (Jul 20 2018 at 12:45)</a>:</h4>
<p>No</p>

<a name="129994465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994465" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994465">Kenny Lau (Jul 20 2018 at 12:45)</a>:</h4>
<p>that's why</p>

<a name="129994467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994467" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994467">Johan Commelin (Jul 20 2018 at 12:45)</a>:</h4>
<p>Hmmm, I want Lean to tell me what to import...</p>

<a name="129994468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994468" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994468">Patrick Massot (Jul 20 2018 at 12:45)</a>:</h4>
<p>Johan, if you don't know what to do for the perfectoid project, you can do</p>
<div class="codehilite"><pre><span></span><span class="kn">variables</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">uniform_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">uniform_space</span> <span class="n">β</span><span class="o">]</span>

<span class="kn">instance</span> <span class="n">complete_space</span><span class="bp">.</span><span class="n">prod</span> <span class="o">[</span><span class="n">complete_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">complete_space</span> <span class="n">β</span><span class="o">]</span> <span class="o">:</span> <span class="n">complete_space</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kn">instance</span> <span class="n">separated</span><span class="bp">.</span><span class="n">prod</span> <span class="o">[</span><span class="n">separated</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">separated</span> <span class="n">β</span><span class="o">]</span> <span class="o">:</span> <span class="n">separated</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>


<p>which is on my TODO list</p>

<a name="129994510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994510" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994510">Kenny Lau (Jul 20 2018 at 12:46)</a>:</h4>
<p>imports? <span class="user-mention" data-user-id="110031">@Patrick Massot</span></p>

<a name="129994523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994523" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994523">Kenny Lau (Jul 20 2018 at 12:46)</a>:</h4>
<p>and is that MWE?</p>

<a name="129994564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994564" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994564">Kenny Lau (Jul 20 2018 at 12:47)</a>:</h4>
<p>never mind</p>

<a name="129994623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994623" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994623">Patrick Massot (Jul 20 2018 at 12:48)</a>:</h4>
<p><code>import analysis.topology.uniform_space</code></p>

<a name="129994632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994632" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994632">Patrick Massot (Jul 20 2018 at 12:48)</a>:</h4>
<p>and then you get a MWE</p>

<a name="129994637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994637" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994637">Kenny Lau (Jul 20 2018 at 12:48)</a>:</h4>
<p>hmm</p>

<a name="129994640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994640" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994640">Patrick Massot (Jul 20 2018 at 12:48)</a>:</h4>
<p>I'm not saying this is difficult</p>

<a name="129994650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129994650" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129994650">Patrick Massot (Jul 20 2018 at 12:48)</a>:</h4>
<p>I see Johan is blocked because he waits for Kevin</p>

<a name="129995452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129995452" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129995452">Kevin Buzzard (Jul 20 2018 at 13:02)</a>:</h4>
<p>I am dealing with universe issues raised by Mario. I have defined an "equivalence class of valuations" on (R : Type u) to be a pre-order on R which is induced from a valuation v : R -&gt; M with M a certain kind of totally ordered monoid, with (M : Type u). I now have to prove that if M had type v then actually there's M' of type u inducing the same pre-order. I dug and dug, and I am now having to define universal properties of quotient groups. But I've screwed up:</p>
<p><a href="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/a0d3bd5de20ed91d2e318914bac742c073b3c4f7/src/for_mathlib/quotient_group.lean#L48" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/a0d3bd5de20ed91d2e318914bac742c073b3c4f7/src/for_mathlib/quotient_group.lean#L48">https://github.com/kbuzzard/lean-perfectoid-spaces/blob/a0d3bd5de20ed91d2e318914bac742c073b3c4f7/src/for_mathlib/quotient_group.lean#L48</a></p>
<p>I need to prove that if G is commutative then so is G/N but I think I managed to define multiplication on G in two different ways. I'm spending all day dealing with admin though. If anyone wants to fix up my easy group theory stuff then feel free!</p>

<a name="129995483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129995483" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129995483">Kevin Buzzard (Jul 20 2018 at 13:03)</a>:</h4>
<p>I will get back to all this this evening hopefully</p>

<a name="129995722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129995722" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129995722">Johan Commelin (Jul 20 2018 at 13:07)</a>:</h4>
<p>Ok, I started doing this because I was watching Bhargav Bhatt's talk from the Gabber birthday conference.</p>

<a name="129995792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129995792" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129995792">Johan Commelin (Jul 20 2018 at 13:08)</a>:</h4>
<p>It's quite fun! So far I've got: <a href="https://gist.github.com/jcommelin/b09dcc1c3494e123e84afc96a91fd61c" target="_blank" title="https://gist.github.com/jcommelin/b09dcc1c3494e123e84afc96a91fd61c">https://gist.github.com/jcommelin/b09dcc1c3494e123e84afc96a91fd61c</a></p>

<a name="129995813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129995813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129995813">Johan Commelin (Jul 20 2018 at 13:09)</a>:</h4>
<p>Making good use of <code>tactic.ring</code>!</p>

<a name="129995924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129995924" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129995924">Kenny Lau (Jul 20 2018 at 13:10)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">wtf</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">set</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">set</span><span class="bp">.</span><span class="n">prod</span> <span class="n">S</span> <span class="n">T</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">inter</span> <span class="o">(</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="n">T</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span>
</pre></div>

<a name="129995932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129995932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129995932">Kenny Lau (Jul 20 2018 at 13:11)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">topology</span><span class="bp">.</span><span class="n">uniform_space</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">uniform_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">uniform_space</span> <span class="n">β</span><span class="o">]</span>

<span class="kn">instance</span> <span class="n">complete_space</span><span class="bp">.</span><span class="n">prod</span> <span class="o">[</span><span class="n">complete_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">complete_space</span> <span class="n">β</span><span class="o">]</span> <span class="o">:</span> <span class="n">complete_space</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">complete</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">f</span> <span class="n">hf</span><span class="o">,</span>
    <span class="k">let</span> <span class="bp">⟨</span><span class="n">x1</span><span class="o">,</span> <span class="n">hx1</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">complete_space</span><span class="bp">.</span><span class="n">complete</span> <span class="err">$</span> <span class="n">cauchy_map</span> <span class="n">uniform_continuous_fst</span> <span class="n">hf</span> <span class="k">in</span>
    <span class="k">let</span> <span class="bp">⟨</span><span class="n">x2</span><span class="o">,</span> <span class="n">hx2</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">complete_space</span><span class="bp">.</span><span class="n">complete</span> <span class="err">$</span> <span class="n">cauchy_map</span> <span class="n">uniform_continuous_snd</span> <span class="n">hf</span> <span class="k">in</span>
    <span class="bp">⟨</span><span class="o">(</span><span class="n">x1</span><span class="o">,</span> <span class="n">x2</span><span class="o">),</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">nhds_prod_eq</span><span class="o">,</span> <span class="n">filter</span><span class="bp">.</span><span class="n">prod_def</span><span class="o">]</span><span class="bp">;</span>
      <span class="k">from</span> <span class="n">filter</span><span class="bp">.</span><span class="n">le_lift</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span> <span class="n">filter</span><span class="bp">.</span><span class="n">le_lift&#39;</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">t</span> <span class="n">ht</span><span class="o">,</span>
        <span class="k">have</span> <span class="n">H1</span> <span class="o">:</span> <span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">f</span><span class="bp">.</span><span class="n">sets</span> <span class="o">:=</span> <span class="n">hx1</span> <span class="n">hs</span><span class="o">,</span>
        <span class="k">have</span> <span class="n">H2</span> <span class="o">:</span> <span class="n">prod</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="n">t</span> <span class="err">∈</span> <span class="n">f</span><span class="bp">.</span><span class="n">sets</span> <span class="o">:=</span> <span class="n">hx2</span> <span class="n">ht</span><span class="o">,</span>
        <span class="n">filter</span><span class="bp">.</span><span class="n">inter_mem_sets</span> <span class="n">H1</span> <span class="n">H2</span><span class="o">)</span><span class="bp">⟩</span> <span class="o">}</span>
</pre></div>

<a name="129995939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129995939" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129995939">Kenny Lau (Jul 20 2018 at 13:11)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span></p>

<a name="129995948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129995948" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129995948">Kenny Lau (Jul 20 2018 at 13:11)</a>:</h4>
<p>26 minutes</p>

<a name="129996119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/129996119" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#129996119">Patrick Massot (Jul 20 2018 at 13:14)</a>:</h4>
<p>Thanks!</p>

<a name="130001219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130001219" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130001219">Johan Commelin (Jul 20 2018 at 14:36)</a>:</h4>
<p>I still don't really know how to go about defining</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">delta_ring</span><span class="bp">.</span><span class="n">aux</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">A</span><span class="o">]</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">A</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="c1">-- λ a b, (a^p + b^p - (a+b)^p)/p</span>
</pre></div>


<p>I know how to do this in maths, but I don't know how to go forward in Lean.</p>

<a name="130001353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130001353" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130001353">Kevin Buzzard (Jul 20 2018 at 14:39)</a>:</h4>
<p>I'm not saying it's the best way, but one way would be to define the function from fin (p-1) to nat sending i to (p choose i) / p, and then do a finset.sum [I guess you need p as an input for this function].</p>

<a name="130001422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130001422" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130001422">Kevin Buzzard (Jul 20 2018 at 14:40)</a>:</h4>
<p>Presumably at some point though you'll need that p times your function is what you want it to be, and there you'll need the binomial theorem, which <span class="user-mention" data-user-id="110044">@Chris Hughes</span> has done I believe. Looking at what he did might help.</p>

<a name="130001461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130001461" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130001461">Johan Commelin (Jul 20 2018 at 14:41)</a>:</h4>
<p>Ok, I already have that property stated (and sorried). So I'm able to prove properties of delta rings already (-;</p>

<a name="130001483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130001483" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130001483">Johan Commelin (Jul 20 2018 at 14:41)</a>:</h4>
<p>I'll take a look at what Chris did.</p>

<a name="130004696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130004696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130004696">Chris Hughes (Jul 20 2018 at 15:29)</a>:</h4>
<blockquote>
<p>Presumably at some point though you'll need that p times your function is what you want it to be, and there you'll need the binomial theorem, which <span class="user-mention" data-user-id="110044">@Chris Hughes</span> has done I believe. Looking at what he did might help.</p>
</blockquote>
<p>I can PR it, but I'm not sure whether to call it <code>binomial</code> or <code>add_pow</code>.</p>

<a name="130008512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130008512" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130008512">Johan Commelin (Jul 20 2018 at 16:34)</a>:</h4>
<p>I wouldn't mind if well-known theorems with well-known names preserve their well-known names.</p>

<a name="130008530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130008530" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130008530">Johan Commelin (Jul 20 2018 at 16:34)</a>:</h4>
<p>To me it would increase readability of proofs</p>

<a name="130008597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130008597" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130008597">Kevin Buzzard (Jul 20 2018 at 16:36)</a>:</h4>
<p>How do you feel about a random German in 1992 deciding to call his seminorms valuations even though they are seminorms, and now we have this annoying problem that our definition of valuation in the perfectoid project is both standard and non-standard simultaneously? :-/</p>

<a name="130008664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130008664" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130008664">Kevin Buzzard (Jul 20 2018 at 16:36)</a>:</h4>
<p>If someone told me that we were going to ditch that stupid bracket notation for quadratic residues, I would crack open the champagne.</p>

<a name="130008683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130008683" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130008683">Kevin Buzzard (Jul 20 2018 at 16:37)</a>:</h4>
<p>Oh -- wait -- for binomial we can just call it both</p>

<a name="130008712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130008712" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130008712">Kevin Buzzard (Jul 20 2018 at 16:37)</a>:</h4>
<p>that's what they do with left_distrib, right? That's the formally correct historical name, but add_mul (or mul_add, which ever one left distrib is) is a modern sensible name.</p>

<a name="130008795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130008795" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130008795">Kevin Buzzard (Jul 20 2018 at 16:38)</a>:</h4>
<p>Chris -- do you prove that <code>binomial(a,b)*b!*(a-b)!=a!</code>?</p>

<a name="130008811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130008811" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130008811">Kenny Lau (Jul 20 2018 at 16:39)</a>:</h4>
<p>do we have valuation of an integer over a prime?</p>

<a name="130008820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130008820" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130008820">Kevin Buzzard (Jul 20 2018 at 16:39)</a>:</h4>
<p>It's <code>list.count p (factor n)</code> Kenny</p>

<a name="130008827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130008827" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130008827">Johan Commelin (Jul 20 2018 at 16:39)</a>:</h4>
<p>Kevin, it is <code>choose(a,b)</code>, I think. So we can call the binomial theorem <code>binomial</code>, if we want...</p>

<a name="130008944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130008944" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130008944">Kevin Buzzard (Jul 20 2018 at 16:41)</a>:</h4>
<p><code>factors n</code> sorry</p>

<a name="130008945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130008945" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130008945">Kevin Buzzard (Jul 20 2018 at 16:41)</a>:</h4>
<p><a href="https://github.com/leanprover/mathlib/blob/master/data/nat/prime.lean" target="_blank" title="https://github.com/leanprover/mathlib/blob/master/data/nat/prime.lean">https://github.com/leanprover/mathlib/blob/master/data/nat/prime.lean</a></p>

<a name="130009004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130009004" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130009004">Kevin Buzzard (Jul 20 2018 at 16:42)</a>:</h4>
<p>lines 226 and 236 show that that's a list of the primes dividing n with multiplicity</p>

<a name="130009294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130009294" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130009294">Kevin Buzzard (Jul 20 2018 at 16:47)</a>:</h4>
<p><a href="https://github.com/dorhinj/leanstuff/blob/3dbf2626138fa7d4ae8ba6d55529713e2d5acd3a/choose.lean#L55" target="_blank" title="https://github.com/dorhinj/leanstuff/blob/3dbf2626138fa7d4ae8ba6d55529713e2d5acd3a/choose.lean#L55">https://github.com/dorhinj/leanstuff/blob/3dbf2626138fa7d4ae8ba6d55529713e2d5acd3a/choose.lean#L55</a> -- there's the factorial fact</p>

<a name="130011551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130011551" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130011551">Chris Hughes (Jul 20 2018 at 17:28)</a>:</h4>
<blockquote>
<p><a href="https://github.com/dorhinj/leanstuff/blob/3dbf2626138fa7d4ae8ba6d55529713e2d5acd3a/choose.lean#L55" target="_blank" title="https://github.com/dorhinj/leanstuff/blob/3dbf2626138fa7d4ae8ba6d55529713e2d5acd3a/choose.lean#L55">https://github.com/dorhinj/leanstuff/blob/3dbf2626138fa7d4ae8ba6d55529713e2d5acd3a/choose.lean#L55</a> -- there's the factorial fact</p>
</blockquote>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> It's also here <a href="https://github.com/leanprover/mathlib/blob/master/data/nat/choose.lean" target="_blank" title="https://github.com/leanprover/mathlib/blob/master/data/nat/choose.lean">https://github.com/leanprover/mathlib/blob/master/data/nat/choose.lean</a></p>

<a name="130012395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130012395" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130012395">Kevin Buzzard (Jul 20 2018 at 17:44)</a>:</h4>
<p>I couldn't find the binomial theorem though</p>

<a name="130012405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130012405" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130012405">Chris Hughes (Jul 20 2018 at 17:44)</a>:</h4>
<p>I haven't PRed it yet.</p>

<a name="130012416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130012416" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130012416">Kevin Buzzard (Jul 20 2018 at 17:44)</a>:</h4>
<p>I mean I couldn't find it in your github repo</p>

<a name="130014183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130014183" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130014183">Mario Carneiro (Jul 20 2018 at 18:21)</a>:</h4>
<p>Question: Why is <code>(a^p + b^p - (a+b)^p)/p</code> uniquely defined? Is division by <code>p</code> always uniquely defined (when applied to multiples of <code>p</code>)? Seems like if the ring has characteristic <code>p</code> this will be a problem...</p>

<a name="130014372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130014372" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130014372">Kenny Lau (Jul 20 2018 at 18:25)</a>:</h4>
<p>it isn't uniquely defined, but there's a canonical choice</p>

<a name="130014441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130014441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130014441">Kevin Buzzard (Jul 20 2018 at 18:26)</a>:</h4>
<p>It's good old informal mathematicians again, meaning "do it in Q, note the answer is in Z, now map it into any ring"</p>

<a name="130014936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130014936" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130014936">Johan Commelin (Jul 20 2018 at 18:37)</a>:</h4>
<blockquote>
<p>it isn't uniquely defined, but there's a canonical choice</p>
</blockquote>
<p>Did you just use the word 'choice'?</p>

<a name="130015002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015002" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015002">Johan Commelin (Jul 20 2018 at 18:39)</a>:</h4>
<p>I just realised that I think Witt vectors and Hensel's lemma are two very nice (and manageable, I hope) companions to the perfectoid project. They aren't logically necessary, but I think they might be really helpful if one wants to do some examples...</p>

<a name="130015089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015089">Kenny Lau (Jul 20 2018 at 18:40)</a>:</h4>
<p>yeah, I chose the word "choice"</p>

<a name="130015091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015091" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015091">Mario Carneiro (Jul 20 2018 at 18:40)</a>:</h4>
<p>I think it's a shame that you have to write it this roundabout way, since it loses the clarity</p>

<a name="130015112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015112" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015112">Mario Carneiro (Jul 20 2018 at 18:41)</a>:</h4>
<p>Another way to say what you are trying to say is to form <code>x^p + y^p - (x+y)^p</code> as a multivariate polynomial in Z[x,y], divide by <code>p</code>, and evaluate it at <code>a,b</code></p>

<a name="130015162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015162">Johan Commelin (Jul 20 2018 at 18:42)</a>:</h4>
<p>Yes, I completely agree. But I don't know yet how to convince Lean that I can divide that polynomial by <code>p</code></p>

<a name="130015179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015179" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015179">Mario Carneiro (Jul 20 2018 at 18:42)</a>:</h4>
<p>As a polynomial in <code>Z[x,y]</code>, you can use <code>int.div</code> on the coefficients</p>

<a name="130015193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015193" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015193">Johan Commelin (Jul 20 2018 at 18:43)</a>:</h4>
<p>Aah, and that is always defined, although it sometimes outputs 57. Is that right?</p>

<a name="130015200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015200" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015200">Johan Commelin (Jul 20 2018 at 18:43)</a>:</h4>
<p>Or probably the floor of x / y.</p>

<a name="130015202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015202" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015202">Mario Carneiro (Jul 20 2018 at 18:43)</a>:</h4>
<p>yes that</p>

<a name="130015206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015206" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015206">Johan Commelin (Jul 20 2018 at 18:43)</a>:</h4>
<p>Ok, so then the definition is not hard.</p>

<a name="130015209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015209" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015209">Kevin Buzzard (Jul 20 2018 at 18:43)</a>:</h4>
<blockquote>
<p>Another way to say what you are trying to say is to form <code>x^p + y^p - (x+y)^p</code> as a multivariate polynomial, divide by <code>p</code>, and evaluate it at <code>a,b</code></p>
</blockquote>
<p>This is just some standard polynomial which shows up in some graduate commutative algebra thing, so mathematicians abuse notation. It means exactly what you said yes. The polynomials even have names -- they're in Z[x,y] but then they get coerced into R[x,y] for any comm_ring R</p>

<a name="130015277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015277" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015277">Kenny Lau (Jul 20 2018 at 18:44)</a>:</h4>
<p>by GPOV</p>

<a name="130015306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015306" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015306">Johan Commelin (Jul 20 2018 at 18:45)</a>:</h4>
<p>So then I only need to prove the property that <code>p * aux_poly = x^p + y^p - (x+y)^p</code></p>

<a name="130015318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015318">Johan Commelin (Jul 20 2018 at 18:45)</a>:</h4>
<p>And that requires the binomial theorem</p>

<a name="130015319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015319" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015319">Kenny Lau (Jul 20 2018 at 18:45)</a>:</h4>
<p>aux_poly x y p</p>

<a name="130015326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015326" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015326">Kevin Buzzard (Jul 20 2018 at 18:45)</a>:</h4>
<p>you're going to need the binomial theorem at some point</p>

<a name="130015329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015329" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015329">Johan Commelin (Jul 20 2018 at 18:45)</a>:</h4>
<p>sure</p>

<a name="130015370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015370" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015370">Chris Hughes (Jul 20 2018 at 18:46)</a>:</h4>
<p>It's in your stack project <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span></p>

<a name="130015374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015374" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015374">Kevin Buzzard (Jul 20 2018 at 18:46)</a>:</h4>
<p>I didn't think to look there</p>

<a name="130015379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015379" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015379">Mario Carneiro (Jul 20 2018 at 18:46)</a>:</h4>
<p>I don't think you actually need the binomial theorem for this, but you mathematicians like your hammers</p>

<a name="130015386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015386" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015386">Johan Commelin (Jul 20 2018 at 18:46)</a>:</h4>
<p>Why not?</p>

<a name="130015389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015389" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015389">Mario Carneiro (Jul 20 2018 at 18:46)</a>:</h4>
<p>It's an easy proof by induction</p>

<a name="130015390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015390" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015390">Kevin Buzzard (Jul 20 2018 at 18:46)</a>:</h4>
<p>if you define <code>aux_poly</code> to be the explicit <code>(choose p i) / p</code> etc etc then it's the same as the binomial theorem</p>

<a name="130015397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015397" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015397">Kenny Lau (Jul 20 2018 at 18:47)</a>:</h4>
<p>it isn't because you can't fill in the gap that p causes</p>

<a name="130015402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015402" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015402">Mario Carneiro (Jul 20 2018 at 18:47)</a>:</h4>
<p>forget that</p>

<a name="130015406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015406">Kenny Lau (Jul 20 2018 at 18:47)</a>:</h4>
<p>you can't extend the definition of aux_poly to all nat</p>

<a name="130015419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015419" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015419">Johan Commelin (Jul 20 2018 at 18:47)</a>:</h4>
<p>you can, he just did that... but you get nonsense</p>

<a name="130015505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015505">Patrick Massot (Jul 20 2018 at 18:49)</a>:</h4>
<p>I'm trying to figure out what GPOV stand for (I mean understand the acronym, I understand the maths). Google is not very helpful</p>

<a name="130015601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015601" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015601">Johan Commelin (Jul 20 2018 at 18:50)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I just realised that trying to convert arithmetic geometers and/or number theorists to Lean is going to be futile. They start every talk with "For me all rings are commutative." If they can't do that at the top of their Lean files, and they really have to type <code>comm_ring</code> instead of <code>ring</code> all the time, they will drop out immediately...</p>

<a name="130015614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015614" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015614">Johan Commelin (Jul 20 2018 at 18:50)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> General Point Of View?</p>

<a name="130015628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015628" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015628">Johan Commelin (Jul 20 2018 at 18:50)</a>:</h4>
<p>There is also nPOV = n-categorical POV</p>

<a name="130015638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015638" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015638">Kenny Lau (Jul 20 2018 at 18:50)</a>:</h4>
<p>Grothendieck's point of view</p>

<a name="130015717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015717" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015717">Kevin Buzzard (Jul 20 2018 at 18:52)</a>:</h4>
<p>you could always fork mathlib</p>

<a name="130015731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015731" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015731">Mario Carneiro (Jul 20 2018 at 18:52)</a>:</h4>
<p><code>comm_ring</code> is in core</p>

<a name="130015735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015735">Kevin Buzzard (Jul 20 2018 at 18:52)</a>:</h4>
<p>oh crap</p>

<a name="130015738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015738" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015738">Kevin Buzzard (Jul 20 2018 at 18:52)</a>:</h4>
<p><code>comm_ring</code> -&gt; <code>ring</code></p>

<a name="130015741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015741" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015741">Kevin Buzzard (Jul 20 2018 at 18:52)</a>:</h4>
<p><code>ring</code> -&gt; <code>non_comm_ring</code></p>

<a name="130015742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015742" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015742">Kevin Buzzard (Jul 20 2018 at 18:53)</a>:</h4>
<p>that's what it should be</p>

<a name="130015765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015765" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015765">Mario Carneiro (Jul 20 2018 at 18:53)</a>:</h4>
<p><code>local notation `ring` := comm_ring</code> should work</p>

<a name="130015784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015784">Kevin Buzzard (Jul 20 2018 at 18:53)</a>:</h4>
<p>and then <code>local notation `non_comm_ring` := ring</code>?</p>

<a name="130015846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015846" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015846">Mario Carneiro (Jul 20 2018 at 18:54)</a>:</h4>
<p>do you actually care about that?</p>

<a name="130015854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015854" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015854">Kevin Buzzard (Jul 20 2018 at 18:54)</a>:</h4>
<p>I will grudgingly confess to occasionally using the ring of 2 x 2 matrices</p>

<a name="130015863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015863" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015863">Kenny Lau (Jul 20 2018 at 18:55)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> you're lucky all rings have unity</p>

<a name="130015872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015872" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015872">Mario Carneiro (Jul 20 2018 at 18:55)</a>:</h4>
<p>maybe don't use stupid overrides in that file</p>

<a name="130015972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015972" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015972">Mario Carneiro (Jul 20 2018 at 18:56)</a>:</h4>
<p>also, overriding the notation for <code>ring</code> doesn't prevent you from using matrix rings</p>

<a name="130015986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130015986" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130015986">Mario Carneiro (Jul 20 2018 at 18:56)</a>:</h4>
<p>of course typeclass inference doesn't care about your notation</p>

<a name="130016100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130016100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130016100">Mario Carneiro (Jul 20 2018 at 18:58)</a>:</h4>
<p>Now I am picturing some mathematician starting their talk with "in this lecture, all rings are commutative" and proceed to do amazing things by commuting matrices that don't commute</p>

<a name="130018032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130018032" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130018032">Johan Commelin (Jul 20 2018 at 19:35)</a>:</h4>
<blockquote>
<p>of course typeclass inference doesn't care about your notation</p>
</blockquote>
<p>It doesn't? I don't know if I am happy or sad about that...</p>

<a name="130018603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130018603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130018603">Mario Carneiro (Jul 20 2018 at 19:46)</a>:</h4>
<p>well the alternative is the "commutative by fiat" lecture scenario I mentioned</p>

<a name="130135388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130135388" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130135388">Johan Commelin (Jul 23 2018 at 08:05)</a>:</h4>
<p>Ok, so now I want to define the <code>aux_poly</code> in two variables. What would be the best way to do that? I currently have</p>
<div class="codehilite"><pre><span></span><span class="kn">section</span> <span class="n">delta_ring_aux_poly</span>

<span class="kn">open</span> <span class="n">mv_polynomial</span>

<span class="n">def</span> <span class="n">delta_ring</span><span class="bp">.</span><span class="n">aux_poly1</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">ℤ</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">X0</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">ℤ</span> <span class="o">:=</span> <span class="n">X</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero_lt_succ</span> <span class="mi">1</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">X1</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">ℤ</span> <span class="o">:=</span> <span class="n">X</span> <span class="bp">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">le_refl</span> <span class="mi">2</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="n">exact</span> <span class="o">(</span><span class="n">X0</span><span class="err">^</span><span class="n">p</span> <span class="bp">+</span> <span class="n">X1</span><span class="err">^</span><span class="n">p</span> <span class="bp">-</span> <span class="o">(</span><span class="n">X0</span><span class="bp">+</span><span class="n">X1</span><span class="o">)</span><span class="err">^</span><span class="n">p</span><span class="o">),</span>
<span class="kn">end</span>

<span class="n">def</span> <span class="n">delta_ring</span><span class="bp">.</span><span class="n">aux_poly2</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">ℤ</span> <span class="o">:=</span>
<span class="n">finsupp</span><span class="bp">.</span><span class="n">map_range</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">,</span> <span class="n">n</span><span class="bp">/</span><span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">zero_div</span> <span class="n">p</span><span class="o">)</span> <span class="n">delta_ring</span><span class="bp">.</span><span class="n">aux_poly1</span>

<span class="kn">end</span> <span class="n">delta_ring_aux_poly</span>

<span class="n">def</span> <span class="n">delta_ring</span><span class="bp">.</span><span class="n">aux</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">A</span><span class="o">]</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">A</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">mv_polynomial</span><span class="bp">.</span><span class="n">functorial</span> <span class="n">int</span><span class="bp">.</span><span class="n">cast</span> <span class="n">delta_ring</span><span class="bp">.</span><span class="n">aux_poly2</span><span class="o">)</span><span class="bp">.</span><span class="kn">eval</span> <span class="err">∘</span>
<span class="o">(</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">i</span><span class="o">,</span>
<span class="kn">end</span>
 <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">A</span> <span class="bp">→</span> <span class="o">((</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">→</span> <span class="n">A</span><span class="o">))</span>
<span class="c1">--  sorry</span>
<span class="c1">-- λ a b, (a^p + b^p - (a+b)^p)/p</span>
</pre></div>

<a name="130135453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130135453" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130135453">Johan Commelin (Jul 23 2018 at 08:06)</a>:</h4>
<p>It it better to use <code>choose</code> here, and explicitly define it as  some <code>finset.sum</code>?</p>

<a name="130135463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130135463" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130135463">Johan Commelin (Jul 23 2018 at 08:06)</a>:</h4>
<p>I don't really like the <code>finsupp.map_range</code>, but that is just <em>my</em> gut feeling.</p>

<a name="130135543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130135543" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130135543">Mario Carneiro (Jul 23 2018 at 08:09)</a>:</h4>
<p>This looks like a pretty faithful rendition of my suggestion</p>

<a name="130135548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130135548" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130135548">Mario Carneiro (Jul 23 2018 at 08:09)</a>:</h4>
<p>the last bit looks incomplete though</p>

<a name="130135588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130135588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130135588">Johan Commelin (Jul 23 2018 at 08:10)</a>:</h4>
<p>It is.</p>

<a name="130135602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130135602" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130135602">Johan Commelin (Jul 23 2018 at 08:10)</a>:</h4>
<p>I don't know how to define functions out of <code>fin n</code>. Do we have to use if-then-else for that?</p>

<a name="130135611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130135611" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130135611">Mario Carneiro (Jul 23 2018 at 08:11)</a>:</h4>
<p>there should be a <code>fin.cons</code> function</p>

<a name="130135619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130135619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130135619">Mario Carneiro (Jul 23 2018 at 08:11)</a>:</h4>
<p>you can also use a <code>match</code> block</p>

<a name="130135625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130135625" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130135625">Mario Carneiro (Jul 23 2018 at 08:11)</a>:</h4>
<p>there is <code>fin.cases</code></p>

<a name="130135683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130135683" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130135683">Mario Carneiro (Jul 23 2018 at 08:13)</a>:</h4>
<p>Probably it is easier to use <code>bool</code> rather than <code>fin 2</code> here</p>

<a name="130135764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130135764" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130135764">Johan Commelin (Jul 23 2018 at 08:15)</a>:</h4>
<p>Aah, that is a nice suggestion</p>

<a name="130135767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130135767" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130135767">Johan Commelin (Jul 23 2018 at 08:15)</a>:</h4>
<p>I'll try that</p>

<a name="130135777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130135777" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130135777">Mario Carneiro (Jul 23 2018 at 08:15)</a>:</h4>
<p>You can use <code>cond</code> to case on <code>bool</code></p>

<a name="130135846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130135846" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130135846">Johan Commelin (Jul 23 2018 at 08:17)</a>:</h4>
<p>Hmm, what exactly do you mean with that?</p>

<a name="130135892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130135892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130135892">Johan Commelin (Jul 23 2018 at 08:18)</a>:</h4>
<p>Aah</p>

<a name="130135898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130135898" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130135898">Johan Commelin (Jul 23 2018 at 08:18)</a>:</h4>
<p>So <code>cond</code> is in fact my function. I want to look at <code>cond i a b</code></p>

<a name="130135907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130135907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130135907">Mario Carneiro (Jul 23 2018 at 08:19)</a>:</h4>
<p>yes</p>

<a name="130136703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130136703" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130136703">Johan Commelin (Jul 23 2018 at 08:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> Are you planning on PR-ing your binomial theorem sometime soon?</p>

<a name="130144619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130144619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130144619">Johan Commelin (Jul 23 2018 at 12:08)</a>:</h4>
<p>So, now I need to sum over <code>fin n</code>. Hooray! I don't even know how to deal with the case <code>n = 1</code>:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">finsupp</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">=</span> <span class="mi">57</span><span class="o">)</span> <span class="o">:</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum</span> <span class="n">finset</span><span class="bp">.</span><span class="n">univ</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)),</span> <span class="n">finsupp</span><span class="bp">.</span><span class="n">single</span> <span class="o">(</span><span class="n">finsupp</span><span class="bp">.</span><span class="n">single</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="n">val</span><span class="o">)</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="err">^</span> <span class="n">x</span><span class="bp">.</span><span class="n">val</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">finsupp</span><span class="bp">.</span><span class="n">single</span> <span class="o">(</span><span class="n">finsupp</span><span class="bp">.</span><span class="n">single</span> <span class="mi">0</span> <span class="mi">1</span><span class="o">)</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="130144647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130144647" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130144647">Johan Commelin (Jul 23 2018 at 12:08)</a>:</h4>
<p>I would like to tell Lean that <code>finset.univ</code> is <code>singleton 0</code> in this case.</p>

<a name="130144649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130144649" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130144649">Johan Commelin (Jul 23 2018 at 12:08)</a>:</h4>
<p>But I don't know how to do that.</p>

<a name="130144655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130144655" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130144655">Johan Commelin (Jul 23 2018 at 12:08)</a>:</h4>
<p>(Technically <code>singleton \&lt;0,_\&gt;</code>...)</p>

<a name="130145367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130145367" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130145367">Kenny Lau (Jul 23 2018 at 12:23)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">finsupp</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">=</span> <span class="mi">57</span><span class="o">)</span> <span class="o">:</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum</span> <span class="n">finset</span><span class="bp">.</span><span class="n">univ</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)),</span> <span class="n">finsupp</span><span class="bp">.</span><span class="n">single</span> <span class="o">(</span><span class="n">finsupp</span><span class="bp">.</span><span class="n">single</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="n">val</span><span class="o">)</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="err">^</span> <span class="n">x</span><span class="bp">.</span><span class="n">val</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">finsupp</span><span class="bp">.</span><span class="n">single</span> <span class="o">(</span><span class="n">finsupp</span><span class="bp">.</span><span class="n">single</span> <span class="mi">0</span> <span class="mi">1</span><span class="o">)</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">have</span> <span class="n">H1</span> <span class="o">:</span> <span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">univ</span> <span class="o">:</span> <span class="n">finset</span> <span class="err">$</span> <span class="n">fin</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">finset</span><span class="bp">.</span><span class="n">singleton</span> <span class="mi">0</span><span class="o">,</span>
  <span class="k">from</span> <span class="n">finset</span><span class="bp">.</span><span class="n">ext&#39;</span> <span class="err">$</span> <span class="bp">λ</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="bp">⟩</span><span class="o">,</span> <span class="k">begin</span>
    <span class="n">cases</span> <span class="n">hx</span> <span class="k">with</span> <span class="n">hx</span> <span class="n">hx1</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="n">refl</span> <span class="o">},</span>
    <span class="n">cases</span> <span class="n">hx1</span>
  <span class="kn">end</span><span class="o">,</span>
<span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">H1</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_singleton</span><span class="o">]</span><span class="bp">;</span> <span class="n">refl</span>
</pre></div>

<a name="130145441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130145441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130145441">Johan Commelin (Jul 23 2018 at 12:25)</a>:</h4>
<p>You were able to convince Lean that you get a singleton! I couldn't even get it to typecheck the type of H1.</p>

<a name="130161570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/delta%20rings/near/130161570" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/47790deltarings.html#130161570">Johan Commelin (Jul 23 2018 at 17:25)</a>:</h4>
<blockquote>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> Are you planning on PR-ing your binomial theorem sometime soon?</p>
</blockquote>
<p>Thanks! <span class="emoji emoji-1f44f" title="clap">:clap:</span> <span class="emoji emoji-1f419" title="octopus">:octopus:</span></p>


{% endraw %}
