---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/04805Perfectoidspaces.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html">Perfectoid spaces</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="127307288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307288" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307288">Kevin Buzzard (May 30 2018 at 13:22)</a>:</h4>
<p>Ok so here is the perfectoid spaces thread. As many people here know, I've long been mulling over the idea of formalising the notion of a perfectoid space in Lean. To the CS people -- it's just some structure, like a group, just a few more axioms and things.</p>

<a name="127307303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307303" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307303">Kevin Buzzard (May 30 2018 at 13:22)</a>:</h4>
<p>The problem is that I'm a mathematician and I'm not very good at building structures in Lean yet because I haven't practiced enough yet.</p>

<a name="127307309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307309" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307309">Kevin Buzzard (May 30 2018 at 13:23)</a>:</h4>
<p>So here's the plan.</p>

<a name="127307320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307320" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307320">Kevin Buzzard (May 30 2018 at 13:23)</a>:</h4>
<p>I'm going to make a public github repo called lean-perfectoid-spaces</p>

<a name="127307327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307327" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307327">Kevin Buzzard (May 30 2018 at 13:23)</a>:</h4>
<p>and then we develop what we need in there.</p>

<a name="127307333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307333" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307333">Kevin Buzzard (May 30 2018 at 13:24)</a>:</h4>
<p>What are the main ingredients? I'll explain these things in an issue.</p>

<a name="127307375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307375" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307375">Kevin Buzzard (May 30 2018 at 13:24)</a>:</h4>
<p>But in short, we need adic spaces</p>

<a name="127307379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307379" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307379">Kevin Buzzard (May 30 2018 at 13:24)</a>:</h4>
<p>so we need presheaves and sheaves of topological rings</p>

<a name="127307384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307384" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307384">Kevin Buzzard (May 30 2018 at 13:24)</a>:</h4>
<p>and we need affinoid adic spaces</p>

<a name="127307387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307387" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307387">Kevin Buzzard (May 30 2018 at 13:24)</a>:</h4>
<p>so we need the notion of a valuation on a ring</p>

<a name="127307407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307407" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307407">Kevin Buzzard (May 30 2018 at 13:25)</a>:</h4>
<p>Now here's a dumb thing that everyone knew already but only dawned on me recently.</p>

<a name="127307465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307465" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307465">Kevin Buzzard (May 30 2018 at 13:26)</a>:</h4>
<p>There are two ways to make a perfectoid space -- a "top down" way, where you define a perfectoid space to be an adic space with some property and define an adic space afterwards -- you sorry your way from the top and attempt to connect to the bottom.</p>

<a name="127307477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307477" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307477">Kevin Buzzard (May 30 2018 at 13:26)</a>:</h4>
<p>Or there's a "bottom up" way, where you think "we'll definitely need adic spaces so we'll need affinoid adic spaces so we'll need valuations so we'll need a way of turning a totally ordered group into a totally ordered monoid by adding a bottom element and I think we have that, or we nearly have that anyway, so let's start with that and then build up"</p>

<a name="127307485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307485" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307485">Kevin Buzzard (May 30 2018 at 13:27)</a>:</h4>
<p>With schemes I read the stacks project from front to back and I made the definition from the bottom up.</p>

<a name="127307495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307495" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307495">Kevin Buzzard (May 30 2018 at 13:27)</a>:</h4>
<p>Are there advantages in working from the top down?</p>

<a name="127307556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307556" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307556">Kevin Buzzard (May 30 2018 at 13:28)</a>:</h4>
<p>Next, who should be allowed to push? Is it sensible to start with just me and force other people to learn about PRs and so on?</p>

<a name="127307565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307565" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307565">Kevin Buzzard (May 30 2018 at 13:29)</a>:</h4>
<p>As a git newbie I found it far easier to just give Kenny full access to the stacks project repo</p>

<a name="127307574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307574">Kevin Buzzard (May 30 2018 at 13:29)</a>:</h4>
<p>but the result of this was that one day I realised there were a bunch of files in my project which I had no idea what they did</p>

<a name="127307578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307578" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307578">Kevin Buzzard (May 30 2018 at 13:29)</a>:</h4>
<p>and then when Lean upgraded and they all broke and Kenny was revising for exams I was sort-of stuck.</p>

<a name="127307635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307635" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307635">Kevin Buzzard (May 30 2018 at 13:30)</a>:</h4>
<p>Should I concentrate on making sure I understand every line of code in the project, or should this be something which I should be happy to delegate?</p>

<a name="127307644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307644" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307644">Kevin Buzzard (May 30 2018 at 13:30)</a>:</h4>
<p>Those are my initial thoughts. I've been really busy recently with marking issues but now these things are over and I hope to find some time to put into this.</p>

<a name="127307979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127307979" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127307979">Assia Mahboubi (May 30 2018 at 13:39)</a>:</h4>
<p>I think that you should be able to understand every line of code in the project, but it does not mean than you cannot delegate and grant push access to others. Just that you should be ready to revert commits, ask for freezing etc. This is how the Feit Thompson proof was written, with many people having commit rights (it was not even a git repo).</p>

<a name="127308229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127308229" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127308229">Assia Mahboubi (May 30 2018 at 13:46)</a>:</h4>
<p>I have never seen anything serious being done top down. I have been working for some time with some axiomatic algebraic numbers, waiting form the completion of the closure construction, and even for such a simple thing, one of the axioms was wrong (I don't remember the details) . So I find it scary because it is usually hard to get definitions right at the first stab. And the one you're aiming at is a truly complex one. But may be you could try to build the bridge simultaneously from the two ends, and hope for the best. One really useful thing is to write down the complete roadmap somewhere, as precise as possible. But this is what will go in your issue right? Are there components that can be done in parallel?</p>

<a name="127309013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127309013" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127309013">Kevin Buzzard (May 30 2018 at 14:02)</a>:</h4>
<p>I love this place.</p>

<a name="127309018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127309018" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127309018">Kevin Buzzard (May 30 2018 at 14:02)</a>:</h4>
<p>Assia -- <em>many</em> thanks for your very quick and extremely helpful response.</p>

<a name="127309036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127309036" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127309036">Kevin Buzzard (May 30 2018 at 14:03)</a>:</h4>
<p>I will begin, hopefully before the weekend, by creating a repo and writing an extended issue explaining as much as I know about what needs to be done.</p>

<a name="127309046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127309046" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127309046">Kevin Buzzard (May 30 2018 at 14:03)</a>:</h4>
<p>There should be several things which can be done in parallel.</p>

<a name="127309097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127309097" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127309097">Kevin Buzzard (May 30 2018 at 14:04)</a>:</h4>
<p>I remember now -- when I talked about making something else I wanted in mathlib, Mario suggested that I wrote as detailed an explanation as possible and made it an issue.</p>

<a name="127312071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312071">Kevin Buzzard (May 30 2018 at 15:06)</a>:</h4>
<p>I'm at the London Number Theory Seminar and it's being given by Matthew Morrow, co-author of several papers with Scholze and perfectoid expert! I just asked him what the definition of a perfectoid space was and I'm glad I did -- he said that he definition has gone through several iterations but he was now happy with it, and gave me a precise reference -- Scholze's paper "etale cohomology of diamonds".</p>

<a name="127312094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312094" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312094">Kevin Buzzard (May 30 2018 at 15:06)</a>:</h4>
<p><a href="https://arxiv.org/abs/1709.07343" target="_blank" title="https://arxiv.org/abs/1709.07343">https://arxiv.org/abs/1709.07343</a></p>

<a name="127312095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312095" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312095">Kevin Buzzard (May 30 2018 at 15:06)</a>:</h4>
<p>That is the definition we will be formalizing.</p>

<a name="127312134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312134" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312134">Kevin Buzzard (May 30 2018 at 15:07)</a>:</h4>
<p>The paper is under 9 months old. To the CS people -- the reason that defining a random structure is interesting to mathematicians is that this is a cutting-edge structure.</p>

<a name="127312247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312247" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312247">Kevin Buzzard (May 30 2018 at 15:09)</a>:</h4>
<p>It is definition 3.19 on page 18 of (v1 of) the paper at the above link</p>

<a name="127312333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312333" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312333">Patrick Massot (May 30 2018 at 15:10)</a>:</h4>
<p>It's funny Scholze refers to Fontaine's Bourbaki talk about Scholze</p>

<a name="127312343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312343" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312343">Patrick Massot (May 30 2018 at 15:10)</a>:</h4>
<p>Maybe this theory is actually circular</p>

<a name="127312587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312587" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312587">Kevin Buzzard (May 30 2018 at 15:15)</a>:</h4>
<p>:-)</p>

<a name="127312594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312594" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312594">Kevin Buzzard (May 30 2018 at 15:15)</a>:</h4>
<p>Fontaine only defines perfectoid rings</p>

<a name="127312661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312661" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312661">Kevin Buzzard (May 30 2018 at 15:16)</a>:</h4>
<p>Technical interlude: in Scholze's original paper he only defined a perfectoid space over a field; Fontaine was the first person to make the definition live independently without being bound to an underlying field</p>

<a name="127312669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312669" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312669">Kevin Buzzard (May 30 2018 at 15:16)</a>:</h4>
<p>OK so here's a theorem in maths:</p>

<a name="127312705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312705" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312705">Kevin Buzzard (May 30 2018 at 15:17)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi mathvariant="double-struck">Z</mi><mi>p</mi><mrow><mi>c</mi><mi>y</mi><mi>c</mi><mi>l</mi></mrow></msubsup><mo>[</mo><mo>[</mo><msup><mi>T</mi><mrow><mn>1</mn><mi mathvariant="normal">/</mi><msup><mi>p</mi><mi mathvariant="normal">∞</mi></msup></mrow></msup><mo>]</mo><mo>]</mo><mo>⟨</mo><mo>(</mo><mi>p</mi><mi mathvariant="normal">/</mi><mi>T</mi><msup><mo>)</mo><mrow><mn>1</mn><mi mathvariant="normal">/</mi><msup><mi>p</mi><mi mathvariant="normal">∞</mi></msup></mrow></msup><mo>⟩</mo><mo>[</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi>T</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">\mathbb{Z}_p^{cycl}[[T^{1/p^\infty}]]\langle(p/T)^{1/p^\infty}\rangle[1/T]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.271108em;vertical-align:-0.383108em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mord mathbb">Z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-2.4530000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">c</span><span class="mord mathit mtight" style="margin-right:0.03588em;">y</span><span class="mord mathit mtight">c</span><span class="mord mathit mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.383108em;"></span></span></span></span></span><span class="mopen">[</span><span class="mopen">[</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">1</span><span class="mord mathrm mtight">/</span><span class="mord mtight"><span class="mord mathit mtight">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385428571428572em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathrm mtight">∞</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">]</span><span class="mclose">]</span><span class="mopen">⟨</span><span class="mopen">(</span><span class="mord mathit">p</span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">1</span><span class="mord mathrm mtight">/</span><span class="mord mtight"><span class="mord mathit mtight">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385428571428572em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathrm mtight">∞</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">⟩</span><span class="mopen">[</span><span class="mord mathrm">1</span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mclose">]</span></span></span></span> is a perfectoid ring</p>

<a name="127312730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312730" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312730">Kevin Buzzard (May 30 2018 at 15:17)</a>:</h4>
<p>You show that to any number theorist in the area and they'll know what that notation means</p>

<a name="127312736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312736" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312736">Kevin Buzzard (May 30 2018 at 15:17)</a>:</h4>
<p>Can we use it in Lean?</p>

<a name="127312782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312782" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312782">Kevin Buzzard (May 30 2018 at 15:18)</a>:</h4>
<p>We refer to the pointy brackets as "langle/rangle"</p>

<a name="127312784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312784">Patrick Massot (May 30 2018 at 15:18)</a>:</h4>
<p>Definitely looks like the kind of sequences of symbols that show up in talks about perfectoid stuff</p>

<a name="127312785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312785" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312785">Kevin Buzzard (May 30 2018 at 15:18)</a>:</h4>
<p>because LaTeX</p>

<a name="127312802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312802" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312802">Kevin Buzzard (May 30 2018 at 15:18)</a>:</h4>
<p>Nobody is raising a prime number to the power infinity</p>

<a name="127312805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312805" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312805">Kevin Buzzard (May 30 2018 at 15:19)</a>:</h4>
<p>this is a limit of rings where the infinity is replaced by n</p>

<a name="127312811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312811" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312811">Kevin Buzzard (May 30 2018 at 15:19)</a>:</h4>
<p>and then n goes to infinity</p>

<a name="127312830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312830" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312830">Mario Carneiro (May 30 2018 at 15:19)</a>:</h4>
<p>That's not the major concern. Of course all those things are schematic</p>

<a name="127312834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312834" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312834">Kevin Buzzard (May 30 2018 at 15:19)</a>:</h4>
<p>If this stuff were written out in full the definition would double in length and would involve two and possibly more limits</p>

<a name="127312835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312835" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312835">Mario Carneiro (May 30 2018 at 15:19)</a>:</h4>
<p>How many ring construction mechanisms are nested there?</p>

<a name="127312896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312896" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312896">Kevin Buzzard (May 30 2018 at 15:20)</a>:</h4>
<p>I think three or four</p>

<a name="127312901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312901" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312901">Kevin Buzzard (May 30 2018 at 15:20)</a>:</h4>
<p>depending on whether it's a theorem that something commutes with something</p>

<a name="127312903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312903" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312903">Kevin Buzzard (May 30 2018 at 15:20)</a>:</h4>
<p>I don't think these things commute</p>

<a name="127312906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312906">Kevin Buzzard (May 30 2018 at 15:20)</a>:</h4>
<p>I think maybe four</p>

<a name="127312910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312910" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312910">Kevin Buzzard (May 30 2018 at 15:20)</a>:</h4>
<p>oh</p>

<a name="127312915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312915" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312915">Kevin Buzzard (May 30 2018 at 15:20)</a>:</h4>
<p>maybe far more</p>

<a name="127312917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312917" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312917">Kevin Buzzard (May 30 2018 at 15:21)</a>:</h4>
<p>it depends on what you mean</p>

<a name="127312928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312928" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312928">Kevin Buzzard (May 30 2018 at 15:21)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi mathvariant="double-struck">Z</mi><mi>p</mi><mrow><mi>c</mi><mi>y</mi><mi>c</mi><mi>l</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">\mathbb{Z}_p^{cycl}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8491079999999999em;"></span><span class="strut bottom" style="height:1.2322159999999998em;vertical-align:-0.383108em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mord mathbb">Z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-2.4530000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">c</span><span class="mord mathit mtight" style="margin-right:0.03588em;">y</span><span class="mord mathit mtight">c</span><span class="mord mathit mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.383108em;"></span></span></span></span></span></span></span></span></p>

<a name="127312930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312930" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312930">Kevin Buzzard (May 30 2018 at 15:21)</a>:</h4>
<p>is a ring</p>

<a name="127312932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312932">Mario Carneiro (May 30 2018 at 15:21)</a>:</h4>
<p>In lean syntax with constants, no notation, what would it look like roughly?</p>

<a name="127312949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312949" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312949">Kevin Buzzard (May 30 2018 at 15:21)</a>:</h4>
<p>So am I allowed to make the ring Z_p^cycl?</p>

<a name="127312951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312951" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312951">Mario Carneiro (May 30 2018 at 15:21)</a>:</h4>
<p>yes</p>

<a name="127312954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312954" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312954">Kevin Buzzard (May 30 2018 at 15:21)</a>:</h4>
<p>I mean I can call it X?</p>

<a name="127312955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312955" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312955">Mario Carneiro (May 30 2018 at 15:21)</a>:</h4>
<p>that's like <code>Z_cycl p</code> I guess</p>

<a name="127312962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312962" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312962">Kevin Buzzard (May 30 2018 at 15:21)</a>:</h4>
<p>no</p>

<a name="127312963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127312963" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127312963">Kevin Buzzard (May 30 2018 at 15:22)</a>:</h4>
<p>it's much worse</p>

<a name="127313007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313007">Kevin Buzzard (May 30 2018 at 15:22)</a>:</h4>
<p>maybe it's about as bad</p>

<a name="127313010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313010" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313010">Kevin Buzzard (May 30 2018 at 15:22)</a>:</h4>
<p>there is an issue with completions</p>

<a name="127313015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313015" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313015">Kevin Buzzard (May 30 2018 at 15:22)</a>:</h4>
<p>everything has to be complete at every stage</p>

<a name="127313026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313026">Mario Carneiro (May 30 2018 at 15:22)</a>:</h4>
<p>so <code>completion (Z_cycl p)</code>?</p>

<a name="127313033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313033" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313033">Kevin Buzzard (May 30 2018 at 15:22)</a>:</h4>
<p>Let me define, for A an abelian group, <code>P A</code> to be the projective limit of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mi mathvariant="normal">/</mi><msup><mi>p</mi><mi>n</mi></msup><mi>A</mi></mrow><annotation encoding="application/x-tex">A/p^nA</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">A</span><span class="mord mathrm">/</span><span class="mord"><span class="mord mathit">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span></span></span></span></span><span class="mord mathit">A</span></span></span></span></p>

<a name="127313036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313036" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313036">Mario Carneiro (May 30 2018 at 15:23)</a>:</h4>
<p>where's <code>p</code>?</p>

<a name="127313042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313042" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313042">Kevin Buzzard (May 30 2018 at 15:23)</a>:</h4>
<p>it's a constant</p>

<a name="127313046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313046" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313046">Kevin Buzzard (May 30 2018 at 15:23)</a>:</h4>
<p>we fix a prime p on line 1</p>

<a name="127313052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313052" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313052">Kevin Buzzard (May 30 2018 at 15:23)</a>:</h4>
<p>It never changes</p>

<a name="127313058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313058" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313058">Mario Carneiro (May 30 2018 at 15:23)</a>:</h4>
<p>yeah okay, parameters</p>

<a name="127313059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313059" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313059">Kevin Buzzard (May 30 2018 at 15:23)</a>:</h4>
<p>there is no relation between the different p-adic theories for different primes p</p>

<a name="127313115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313115">Kevin Buzzard (May 30 2018 at 15:24)</a>:</h4>
<p>So <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi mathvariant="bold">Z</mi><mi>p</mi><mrow><mi>c</mi><mi>y</mi><mi>c</mi><mi>l</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">\mathbf{Z}_p^{cycl}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8491079999999999em;"></span><span class="strut bottom" style="height:1.2322159999999998em;vertical-align:-0.383108em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mord mathbf">Z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-2.4530000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">c</span><span class="mord mathit mtight" style="margin-right:0.03588em;">y</span><span class="mord mathit mtight">c</span><span class="mord mathit mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.383108em;"></span></span></span></span></span></span></span></span> is:</p>

<a name="127313123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313123" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313123">Kevin Buzzard (May 30 2018 at 15:24)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="bold">Z</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">\mathbf{Z}_p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68611em;"></span><span class="strut bottom" style="height:0.972218em;vertical-align:-0.286108em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mord mathbf">Z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span></span></span></span> is the p-adic integers</p>

<a name="127313140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313140" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313140">Kevin Buzzard (May 30 2018 at 15:24)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="bold">Z</mi><mi>p</mi></msub><mo>[</mo><msub><mi>ζ</mi><msup><mi>p</mi><mi>n</mi></msup></msub><mo>]</mo></mrow><annotation encoding="application/x-tex">\mathbf{Z}_p[\zeta_{p^n}]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mord mathbf">Z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathit" style="margin-right:0.07378em;">ζ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.26548em;"><span style="top:-2.5500000000000003em;margin-left:-0.07378em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5935428571428571em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight">n</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span><span class="mclose">]</span></span></span></span> is the extension of that ring obtained by adjoining a primitive $$p^n$$th root of unity</p>

<a name="127313156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313156">Kevin Buzzard (May 30 2018 at 15:25)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="bold">Z</mi><mi>p</mi></msub><mo>[</mo><msub><mi>ζ</mi><msup><mi>p</mi><mi mathvariant="normal">∞</mi></msup></msub><mo>]</mo></mrow><annotation encoding="application/x-tex">\mathbf{Z}_p[\zeta_{p^\infty}]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mord mathbf">Z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathit" style="margin-right:0.07378em;">ζ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.26548em;"><span style="top:-2.5500000000000003em;margin-left:-0.07378em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5935428571428571em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathrm mtight">∞</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span><span class="mclose">]</span></span></span></span> is the direct limit of those things</p>

<a name="127313159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313159" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313159">Mario Carneiro (May 30 2018 at 15:25)</a>:</h4>
<p>But <code>Z_cycl_p</code> is one thing after all that construction</p>

<a name="127313160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313160">Kevin Buzzard (May 30 2018 at 15:25)</a>:</h4>
<p>and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi mathvariant="bold">Z</mi><mi>p</mi><mrow><mi>c</mi><mi>y</mi><mi>c</mi><mi>l</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">\mathbf{Z}_p^{cycl}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8491079999999999em;"></span><span class="strut bottom" style="height:1.2322159999999998em;vertical-align:-0.383108em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mord mathbf">Z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-2.4530000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">c</span><span class="mord mathit mtight" style="margin-right:0.03588em;">y</span><span class="mord mathit mtight">c</span><span class="mord mathit mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.383108em;"></span></span></span></span></span></span></span></span> is <code>P</code> of that</p>

<a name="127313171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313171" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313171">Mario Carneiro (May 30 2018 at 15:25)</a>:</h4>
<p>As in, the notation is not decomposable</p>

<a name="127313173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313173" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313173">Kevin Buzzard (May 30 2018 at 15:25)</a>:</h4>
<p>it depends only on p</p>

<a name="127313204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313204" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313204">Kevin Buzzard (May 30 2018 at 15:26)</a>:</h4>
<p>it's not p of Z^cycl or ^cycl of Z_p, really</p>

<a name="127313225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313225" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313225">Mario Carneiro (May 30 2018 at 15:26)</a>:</h4>
<p>right</p>

<a name="127313232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313232" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313232">Kevin Buzzard (May 30 2018 at 15:26)</a>:</h4>
<p>We build from left to right</p>

<a name="127313243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313243" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313243">Mario Carneiro (May 30 2018 at 15:26)</a>:</h4>
<p>So with that in mind, how many decomposable parts are there in the ring you mentioned at the top?</p>

<a name="127313247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313247" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313247">Kevin Buzzard (May 30 2018 at 15:26)</a>:</h4>
<p>If <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">A</span></span></span></span> is a ring</p>

<a name="127313272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313272" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313272">Kevin Buzzard (May 30 2018 at 15:27)</a>:</h4>
<p>then <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>[</mo><mo>[</mo><msup><mi>T</mi><mrow><mn>1</mn><mi mathvariant="normal">/</mi><msup><mi>p</mi><mi>n</mi></msup></mrow></msup><mo>]</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">A[[T^{1/p^n}]]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.138em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">A</span><span class="mopen">[</span><span class="mopen">[</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">1</span><span class="mord mathrm mtight">/</span><span class="mord mtight"><span class="mord mathit mtight">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385428571428572em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight">n</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">]</span><span class="mclose">]</span></span></span></span> is formal power series in <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>T</mi><mrow><mn>1</mn><mi mathvariant="normal">/</mi><msup><mi>p</mi><mi>n</mi></msup></mrow></msup></mrow><annotation encoding="application/x-tex">T^{1/p^n}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">1</span><span class="mord mathrm mtight">/</span><span class="mord mtight"><span class="mord mathit mtight">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385428571428572em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight">n</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> with coefficients in <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">A</span></span></span></span></p>

<a name="127313288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313288" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313288">Kevin Buzzard (May 30 2018 at 15:27)</a>:</h4>
<p>and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>[</mo><mo>[</mo><msup><mi>T</mi><mrow><mn>1</mn><mi mathvariant="normal">/</mi><msup><mi>p</mi><mi mathvariant="normal">∞</mi></msup></mrow></msup><mo>]</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">A[[T^{1/p^\infty}]]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.138em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">A</span><span class="mopen">[</span><span class="mopen">[</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">1</span><span class="mord mathrm mtight">/</span><span class="mord mtight"><span class="mord mathit mtight">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385428571428572em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathrm mtight">∞</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">]</span><span class="mclose">]</span></span></span></span> is <code>P</code> of the direct limit of these things</p>

<a name="127313289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313289" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313289">Mario Carneiro (May 30 2018 at 15:27)</a>:</h4>
<p>So that's just A[[X]] with some quotient?</p>

<a name="127313294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313294" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313294">Kevin Buzzard (May 30 2018 at 15:27)</a>:</h4>
<p>no quotient involved</p>

<a name="127313302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313302" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313302">Kevin Buzzard (May 30 2018 at 15:27)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span></span> is a variable with no relations</p>

<a name="127313352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313352" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313352">Kevin Buzzard (May 30 2018 at 15:28)</a>:</h4>
<p>Each ring is isomorphic to <code>A[[X]]</code></p>

<a name="127313360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313360" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313360">Kevin Buzzard (May 30 2018 at 15:28)</a>:</h4>
<p>the mentioning of the powers of p is just to show how to take the union</p>

<a name="127313366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313366" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313366">Mario Carneiro (May 30 2018 at 15:28)</a>:</h4>
<p>what makes <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>T</mi><mrow><mn>1</mn><mi mathvariant="normal">/</mi><msup><mi>p</mi><mi>n</mi></msup></mrow></msup></mrow><annotation encoding="application/x-tex">T^{1/p^n}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">1</span><span class="mord mathrm mtight">/</span><span class="mord mtight"><span class="mord mathit mtight">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385428571428572em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight">n</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> different from X</p>

<a name="127313371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313371" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313371">Kevin Buzzard (May 30 2018 at 15:28)</a>:</h4>
<p>the maps between the various rings</p>

<a name="127313375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313375" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313375">Kevin Buzzard (May 30 2018 at 15:28)</a>:</h4>
<p><span class="tex-error">$$T^{1/p^{n+1}}^p=T^{1/p^n}$$</span></p>

<a name="127313396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313396">Kevin Buzzard (May 30 2018 at 15:29)</a>:</h4>
<p>For fixed n all those rings are isomorphic</p>

<a name="127313397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313397" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313397">Kevin Buzzard (May 30 2018 at 15:29)</a>:</h4>
<p>but if you want to call them all X</p>

<a name="127313401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313401" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313401">Mario Carneiro (May 30 2018 at 15:29)</a>:</h4>
<p>So the notation here is <code>p_infty_completion A p</code></p>

<a name="127313402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313402" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313402">Kevin Buzzard (May 30 2018 at 15:29)</a>:</h4>
<p>then the maps all send X to X^p</p>

<a name="127313408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313408" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313408">Mario Carneiro (May 30 2018 at 15:29)</a>:</h4>
<p>where there are only two arguments A and p</p>

<a name="127313418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313418" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313418">Kevin Buzzard (May 30 2018 at 15:29)</a>:</h4>
<p>yes</p>

<a name="127313462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313462" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313462">Kevin Buzzard (May 30 2018 at 15:30)</a>:</h4>
<p>that's what A[[T^{1/p^infty}]] means</p>

<a name="127313473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313473" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313473">Kevin Buzzard (May 30 2018 at 15:30)</a>:</h4>
<p>depends only on A and p</p>

<a name="127313478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313478" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313478">Mario Carneiro (May 30 2018 at 15:30)</a>:</h4>
<p>This is my question</p>

<a name="127313483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313483" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313483">Kevin Buzzard (May 30 2018 at 15:30)</a>:</h4>
<p>Depends only on the ring A and the prime number p</p>

<a name="127313484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313484" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313484">Mario Carneiro (May 30 2018 at 15:30)</a>:</h4>
<p>for each of those notations, what are the dependencies and atomic bits</p>

<a name="127313492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313492" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313492">Kevin Buzzard (May 30 2018 at 15:30)</a>:</h4>
<p>OK so I will say less about what you're not interested in for the pointy brackets</p>

<a name="127313494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313494" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313494">Kevin Buzzard (May 30 2018 at 15:30)</a>:</h4>
<p>I now understand the game we're playing</p>

<a name="127313507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313507" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313507">Kevin Buzzard (May 30 2018 at 15:31)</a>:</h4>
<p>If A is a topological ring</p>

<a name="127313515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313515" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313515">Kevin Buzzard (May 30 2018 at 15:31)</a>:</h4>
<p>and p is a prime number</p>

<a name="127313523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313523" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313523">Kevin Buzzard (May 30 2018 at 15:31)</a>:</h4>
<p>then I can build <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>⟨</mo><mo>(</mo><mi>p</mi><mi mathvariant="normal">/</mi><mi>T</mi><msup><mo>)</mo><mrow><mn>1</mn><mi mathvariant="normal">/</mi><msup><mi>p</mi><mi mathvariant="normal">∞</mi></msup></mrow></msup><mo>⟩</mo></mrow><annotation encoding="application/x-tex">A\langle(p/T)^{1/p^\infty}\rangle</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.138em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">A</span><span class="mopen">⟨</span><span class="mopen">(</span><span class="mord mathit">p</span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">1</span><span class="mord mathrm mtight">/</span><span class="mord mtight"><span class="mord mathit mtight">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385428571428572em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathrm mtight">∞</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">⟩</span></span></span></span></p>

<a name="127313568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313568" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313568">Kevin Buzzard (May 30 2018 at 15:32)</a>:</h4>
<p>Remark: <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi mathvariant="double-struck">Z</mi><mi>p</mi><mrow><mi>c</mi><mi>y</mi><mi>c</mi><mi>l</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">\mathbb{Z}_p^{cycl}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8491079999999999em;"></span><span class="strut bottom" style="height:1.2322159999999998em;vertical-align:-0.383108em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mord mathbb">Z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-2.4530000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">c</span><span class="mord mathit mtight" style="margin-right:0.03588em;">y</span><span class="mord mathit mtight">c</span><span class="mord mathit mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.383108em;"></span></span></span></span></span></span></span></span> has a topology</p>

<a name="127313581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313581">Kevin Buzzard (May 30 2018 at 15:32)</a>:</h4>
<p>and we need this topology to build a topology on <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi mathvariant="bold">Z</mi><mi>p</mi><mrow><mi>c</mi><mi>y</mi><mi>c</mi><mi>l</mi></mrow></msubsup><mo>[</mo><mo>[</mo><msup><mi>T</mi><mrow><mn>1</mn><mi mathvariant="normal">/</mi><msup><mi>p</mi><mi mathvariant="normal">∞</mi></msup></mrow></msup><mo>]</mo><mo>]</mo></mrow><annotation encoding="application/x-tex">\mathbf{Z}_p^{cycl}[[T^{1/p^\infty}]]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.271108em;vertical-align:-0.383108em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mord mathbf">Z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-2.4530000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">c</span><span class="mord mathit mtight" style="margin-right:0.03588em;">y</span><span class="mord mathit mtight">c</span><span class="mord mathit mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.383108em;"></span></span></span></span></span><span class="mopen">[</span><span class="mopen">[</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">1</span><span class="mord mathrm mtight">/</span><span class="mord mtight"><span class="mord mathit mtight">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385428571428572em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathrm mtight">∞</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">]</span><span class="mclose">]</span></span></span></span></p>

<a name="127313591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313591" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313591">Kevin Buzzard (May 30 2018 at 15:32)</a>:</h4>
<p>Finally [1/T] is a localization</p>

<a name="127313602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313602" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313602">Kevin Buzzard (May 30 2018 at 15:33)</a>:</h4>
<p>if A is a ring and T is in A then A[1/T] is a localization of A</p>

<a name="127313604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313604" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313604">Mario Carneiro (May 30 2018 at 15:33)</a>:</h4>
<p>I assume that the big expression is meant to be suggestive of the interpretation of the maps in the limit, but are there other expressions that could go there?</p>

<a name="127313606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313606" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313606">Kevin Buzzard (May 30 2018 at 15:33)</a>:</h4>
<p>It is "standard notation"</p>

<a name="127313615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313615" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313615">Kevin Buzzard (May 30 2018 at 15:33)</a>:</h4>
<p>this is really interesting</p>

<a name="127313617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313617" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313617">Mario Carneiro (May 30 2018 at 15:33)</a>:</h4>
<p>like does <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>⟨</mo><mo>(</mo><mi>p</mi><mi>T</mi><msup><mo>)</mo><mrow><msup><mi>p</mi><mi mathvariant="normal">∞</mi></msup><mo>−</mo><mn>2</mn></mrow></msup><mo>⟩</mo></mrow><annotation encoding="application/x-tex">A\langle(pT)^{p^\infty-2}\rangle</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.87998em;"></span><span class="strut bottom" style="height:1.12998em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">A</span><span class="mopen">⟨</span><span class="mopen">(</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.87998em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathit mtight">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385428571428572em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathrm mtight">∞</span></span></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mathrm mtight">2</span></span></span></span></span></span></span></span></span><span class="mclose">⟩</span></span></span></span> make any sense?</p>

<a name="127313619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313619">Kevin Buzzard (May 30 2018 at 15:33)</a>:</h4>
<p>no!</p>

<a name="127313621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313621" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313621">Kevin Buzzard (May 30 2018 at 15:33)</a>:</h4>
<p>Are you crazy?</p>

<a name="127313671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313671" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313671">Kevin Buzzard (May 30 2018 at 15:34)</a>:</h4>
<p>what kind of nonsense is that?</p>

<a name="127313685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313685" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313685">Kevin Buzzard (May 30 2018 at 15:34)</a>:</h4>
<p>So what is the question? :-/</p>

<a name="127313693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313693" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313693">Mario Carneiro (May 30 2018 at 15:35)</a>:</h4>
<p>if there's only one thing that the expression can be, it seems like a waste of notation :P</p>

<a name="127313709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313709" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313709">Mario Carneiro (May 30 2018 at 15:35)</a>:</h4>
<p>but sure, if you want that exact thing only then you can get a reasonable approximation in lean</p>

<a name="127313717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313717" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313717">Kevin Buzzard (May 30 2018 at 15:35)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>[</mo><mo>[</mo><msup><mi>X</mi><mrow><mn>1</mn><mi mathvariant="normal">/</mi><msup><mi>p</mi><mi mathvariant="normal">∞</mi></msup></mrow></msup><mo>]</mo><mo>]</mo><mo>⟨</mo><mo>(</mo><msup><mi>p</mi><mn>3</mn></msup><mi mathvariant="normal">/</mi><mi>X</mi><msup><mo>)</mo><mrow><mn>1</mn><mi mathvariant="normal">/</mi><msup><mi>p</mi><mi mathvariant="normal">∞</mi></msup></mrow></msup><mo>⟩</mo><mo>[</mo><mi>p</mi><mi mathvariant="normal">/</mi><mi>X</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">A[[X^{1/p^\infty}]]\langle (p^3/X)^{1/p^\infty}\rangle[p/X]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.138em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">A</span><span class="mopen">[</span><span class="mopen">[</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">1</span><span class="mord mathrm mtight">/</span><span class="mord mtight"><span class="mord mathit mtight">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385428571428572em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathrm mtight">∞</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">]</span><span class="mclose">]</span><span class="mopen">⟨</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">3</span></span></span></span></span></span></span></span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">1</span><span class="mord mathrm mtight">/</span><span class="mord mtight"><span class="mord mathit mtight">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7385428571428572em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathrm mtight">∞</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">⟩</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">]</span></span></span></span> makes sense</p>

<a name="127313759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313759" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313759">Mario Carneiro (May 30 2018 at 15:36)</a>:</h4>
<p>I assume changing <code>T</code> for <code>X</code> does nothing?</p>

<a name="127313763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313763" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313763">Kevin Buzzard (May 30 2018 at 15:36)</a>:</h4>
<p>you got me</p>

<a name="127313767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313767" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313767">Kevin Buzzard (May 30 2018 at 15:36)</a>:</h4>
<p>I was just showing you how amazingly flexible our notation was</p>

<a name="127313769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313769" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313769">Kevin Buzzard (May 30 2018 at 15:36)</a>:</h4>
<p>T</p>

<a name="127313770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313770" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313770">Kevin Buzzard (May 30 2018 at 15:36)</a>:</h4>
<p>X</p>

<a name="127313771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313771" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313771">Kevin Buzzard (May 30 2018 at 15:36)</a>:</h4>
<p>any letter at all</p>

<a name="127313773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313773" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313773">Kevin Buzzard (May 30 2018 at 15:36)</a>:</h4>
<p>except most of them would be completely unsuitable</p>

<a name="127313776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313776" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313776">Kevin Buzzard (May 30 2018 at 15:36)</a>:</h4>
<p>I would stick with T</p>

<a name="127313779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313779" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313779">Mario Carneiro (May 30 2018 at 15:37)</a>:</h4>
<p>From a CS standpoint those letters are kind of silly</p>

<a name="127313784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313784">Kevin Buzzard (May 30 2018 at 15:37)</a>:</h4>
<p>I can't quite work out who is laughing at who in this conversation :-)</p>

<a name="127313785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313785" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313785">Mario Carneiro (May 30 2018 at 15:37)</a>:</h4>
<p>it's like a bound variable, but it isn't binding anything</p>

<a name="127313788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313788" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313788">Kevin Buzzard (May 30 2018 at 15:37)</a>:</h4>
<p>The ring contains an element called <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span></span></p>

<a name="127313789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313789" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313789">Kevin Buzzard (May 30 2018 at 15:37)</a>:</h4>
<p>that's the trick</p>

<a name="127313797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313797" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313797">Kevin Buzzard (May 30 2018 at 15:37)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo>[</mo><mi>T</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">k[T]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mclose">]</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo>[</mo><mi>X</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">k[X]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">]</span></span></span></span> for polynomial rings</p>

<a name="127313808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313808" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313808">Kevin Buzzard (May 30 2018 at 15:38)</a>:</h4>
<p>they're defeq for you</p>

<a name="127313846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313846" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313846">Kevin Buzzard (May 30 2018 at 15:38)</a>:</h4>
<p>but for us, one has a T in and the other has an X in</p>

<a name="127313859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313859" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313859">Mario Carneiro (May 30 2018 at 15:38)</a>:</h4>
<p>A simple idea that is surprisingly hard to formalize</p>

<a name="127313862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313862" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313862">Reid Barton (May 30 2018 at 15:38)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>T</mi><mo>∈</mo><mi>k</mi><mo>[</mo><mi>T</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">T \in k[T]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mrel">∈</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mclose">]</span></span></span></span> just like <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">Γ</mi><mo separator="true">,</mo><mi>x</mi><mo>⊢</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">\Gamma, x \vdash x</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base"><span class="mord mathrm">Γ</span><span class="mpunct">,</span><span class="mord mathit">x</span><span class="mrel">⊢</span><span class="mord mathit">x</span></span></span></span></p>

<a name="127313869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313869" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313869">Kevin Buzzard (May 30 2018 at 15:38)</a>:</h4>
<p>A man who speaks both languages</p>

<a name="127313872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313872" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313872">Mario Carneiro (May 30 2018 at 15:38)</a>:</h4>
<p>In that case <code>x</code> is in the context though</p>

<a name="127313879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313879" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313879">Mario Carneiro (May 30 2018 at 15:39)</a>:</h4>
<p><code>k[T]</code> isn't a context or a context like thing, it's a concrete ring</p>

<a name="127313885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313885" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313885">Mario Carneiro (May 30 2018 at 15:39)</a>:</h4>
<p>(I guess <code>k</code> is in the context)</p>

<a name="127313896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313896" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313896">Kevin Buzzard (May 30 2018 at 15:39)</a>:</h4>
<p>Oh here is a question</p>

<a name="127313897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313897" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313897">Kevin Buzzard (May 30 2018 at 15:39)</a>:</h4>
<p>Is this question about notation</p>

<a name="127313902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313902" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313902">Kevin Buzzard (May 30 2018 at 15:39)</a>:</h4>
<p><em>completely independent</em> of the question of formalizing the definition?</p>

<a name="127313950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313950" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313950">Kevin Buzzard (May 30 2018 at 15:40)</a>:</h4>
<p>i.e. the notation is something which can be thought about later</p>

<a name="127313953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313953">Mario Carneiro (May 30 2018 at 15:40)</a>:</h4>
<p>not completely, but for the most part yes</p>

<a name="127313954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313954" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313954">Kevin Buzzard (May 30 2018 at 15:40)</a>:</h4>
<p>Those rings are not needed in the definition</p>

<a name="127313957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313957" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313957">Mario Carneiro (May 30 2018 at 15:40)</a>:</h4>
<p>it affects what things get definitions</p>

<a name="127313959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313959" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313959">Kevin Buzzard (May 30 2018 at 15:40)</a>:</h4>
<p>that ring I posted is a famous example of a perfectoid ring</p>

<a name="127313961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313961" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313961">Kevin Buzzard (May 30 2018 at 15:40)</a>:</h4>
<p>nowhere in the definition of perfectoid space does that definition show up</p>

<a name="127313962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313962" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313962">Mario Carneiro (May 30 2018 at 15:41)</a>:</h4>
<p>so for example since <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mrow><mi mathvariant="bold">Z</mi></mrow><mi>p</mi><mrow><mi>c</mi><mi>y</mi><mi>c</mi><mi>l</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">{\bf Z}^{cycl}_p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8491079999999999em;"></span><span class="strut bottom" style="height:1.2322159999999998em;vertical-align:-0.383108em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">Z</span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-2.4530000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">c</span><span class="mord mathit mtight" style="margin-right:0.03588em;">y</span><span class="mord mathit mtight">c</span><span class="mord mathit mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.383108em;"></span></span></span></span></span></span></span></span> is a notation you need a definition <code>Z_cycl p</code></p>

<a name="127313970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127313970" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127313970">Kevin Buzzard (May 30 2018 at 15:41)</a>:</h4>
<p>however proving that that ring is a perfectoid ring is a theorem</p>

<a name="127314046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314046" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314046">Mario Carneiro (May 30 2018 at 15:42)</a>:</h4>
<p>To answer your explicit question, yes you can (and probably should) defer all consideration of notation until late in the development</p>

<a name="127314058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314058" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314058">Mario Carneiro (May 30 2018 at 15:43)</a>:</h4>
<p>It's basically easy to retrofit</p>

<a name="127314138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314138" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314138">Mario Carneiro (May 30 2018 at 15:44)</a>:</h4>
<p>Probably in lean you wouldn't be able to have this X/T magic stuff, it would be just one fixed letter as part of the notation</p>

<a name="127314558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314558" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314558">Kevin Buzzard (May 30 2018 at 15:52)</a>:</h4>
<p>p151  : "choose a quasi-pro-etale surjection q from a strictly totally disconnected perfectoid space that can be written as an inverse limit of quasicompact separated etale maps q_i as in Proposition 11.24"</p>

<a name="127314560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314560" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314560">Kevin Buzzard (May 30 2018 at 15:52)</a>:</h4>
<p>This is going to be so much fun</p>

<a name="127314565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314565" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314565">Kevin Buzzard (May 30 2018 at 15:52)</a>:</h4>
<p>Lean is made for this sort of stuff</p>

<a name="127314572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314572">Kevin Buzzard (May 30 2018 at 15:52)</a>:</h4>
<p>Mario, this is what real maths looks like</p>

<a name="127314588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314588">Kevin Buzzard (May 30 2018 at 15:53)</a>:</h4>
<p>super-complex structures</p>

<a name="127314596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314596">Kevin Buzzard (May 30 2018 at 15:53)</a>:</h4>
<p>at least it's what some kinds of real maths looks like</p>

<a name="127314603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314603">Kevin Buzzard (May 30 2018 at 15:53)</a>:</h4>
<p>it is a million miles from anything that has ever been formalized</p>

<a name="127314607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314607" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314607">Kevin Buzzard (May 30 2018 at 15:53)</a>:</h4>
<p>and it will be easy to formalize</p>

<a name="127314615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314615" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314615">Kevin Buzzard (May 30 2018 at 15:53)</a>:</h4>
<p>that's why it's important</p>

<a name="127314657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314657">Kevin Buzzard (May 30 2018 at 15:54)</a>:</h4>
<p>and easy</p>

<a name="127314675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314675" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314675">Kevin Buzzard (May 30 2018 at 15:54)</a>:</h4>
<p>it's a huge gap in the market</p>

<a name="127314699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314699" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314699">Kevin Buzzard (May 30 2018 at 15:55)</a>:</h4>
<p>and I want to be part of a group which naturally fills this gap</p>

<a name="127314704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314704" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314704">Kevin Buzzard (May 30 2018 at 15:55)</a>:</h4>
<p>and has a great deal of fun and learns a bunch of stuff at the same time</p>

<a name="127314769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314769" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314769">Kevin Buzzard (May 30 2018 at 15:56)</a>:</h4>
<p>and there are huge gaps everywhere</p>

<a name="127314778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314778" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314778">Kevin Buzzard (May 30 2018 at 15:56)</a>:</h4>
<p>I'm sure Patrick can just reel off one in his area</p>

<a name="127314793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314793" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314793">Kevin Buzzard (May 30 2018 at 15:56)</a>:</h4>
<p>some complicated definition which turns out to be super-important in the kind of geometry he does</p>

<a name="127314812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314812" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314812">Kevin Buzzard (May 30 2018 at 15:57)</a>:</h4>
<p>Doing all this is <strong>one way</strong> of doing Tom Hales' fabstracts</p>

<a name="127314818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314818" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314818">Kevin Buzzard (May 30 2018 at 15:57)</a>:</h4>
<p>another way is: "scheme := sorry, now let's keep going"</p>

<a name="127314825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314825" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314825">Kevin Buzzard (May 30 2018 at 15:57)</a>:</h4>
<p>but this way is much more fun</p>

<a name="127314834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314834" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314834">Kevin Buzzard (May 30 2018 at 15:57)</a>:</h4>
<p>and you'll end up with types that typecheck</p>

<a name="127314882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314882" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314882">Kevin Buzzard (May 30 2018 at 15:58)</a>:</h4>
<p>Lean is a big puzzle game</p>

<a name="127314888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314888" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314888">Kevin Buzzard (May 30 2018 at 15:58)</a>:</h4>
<p>and we will be able to make some really cool levels for this game</p>

<a name="127314891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314891" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314891">Kevin Buzzard (May 30 2018 at 15:58)</a>:</h4>
<p>"construct a term of this type"</p>

<a name="127314897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314897" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314897">Kevin Buzzard (May 30 2018 at 15:58)</a>:</h4>
<p>that's the game</p>

<a name="127314901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314901" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314901">Kevin Buzzard (May 30 2018 at 15:58)</a>:</h4>
<p>the type is the level, the term is the solution</p>

<a name="127314915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314915" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314915">Kevin Buzzard (May 30 2018 at 15:59)</a>:</h4>
<p>All the old levels are boring</p>

<a name="127314924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314924" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314924">Kevin Buzzard (May 30 2018 at 15:59)</a>:</h4>
<p>"prove quadratic reciprocity"</p>

<a name="127314927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314927" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314927">Kevin Buzzard (May 30 2018 at 15:59)</a>:</h4>
<p>"prove the prime number theorem"</p>

<a name="127314928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314928" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314928">Kevin Buzzard (May 30 2018 at 15:59)</a>:</h4>
<p>kids want new levels</p>

<a name="127314931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314931" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314931">Kevin Buzzard (May 30 2018 at 15:59)</a>:</h4>
<p>they are bored with those old levels</p>

<a name="127314936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314936" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314936">Kevin Buzzard (May 30 2018 at 15:59)</a>:</h4>
<p>and the computer scientists keep solving them again and again</p>

<a name="127314998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127314998" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127314998">Kevin Buzzard (May 30 2018 at 16:00)</a>:</h4>
<p>all those websites</p>

<a name="127315009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127315009" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127315009">Kevin Buzzard (May 30 2018 at 16:00)</a>:</h4>
<p>"100 classic levels in the formal proof verification game"</p>

<a name="127315019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127315019" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127315019">Kevin Buzzard (May 30 2018 at 16:00)</a>:</h4>
<p>we want better levels with funkier graphics</p>

<a name="127315022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127315022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127315022">Kevin Buzzard (May 30 2018 at 16:00)</a>:</h4>
<p>I mean objects</p>

<a name="127315037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127315037" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127315037">Kevin Buzzard (May 30 2018 at 16:01)</a>:</h4>
<p>it's like when I show my kids the old text-based adventure games which I used to love at their age</p>

<a name="127315040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127315040" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127315040">Kevin Buzzard (May 30 2018 at 16:01)</a>:</h4>
<p>they are like "...dad, it's just a bunch of text"</p>

<a name="127315045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127315045" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127315045">Kevin Buzzard (May 30 2018 at 16:01)</a>:</h4>
<p>"where are the perfectoid spaces?"</p>

<a name="127315097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127315097" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127315097">Kevin Buzzard (May 30 2018 at 16:02)</a>:</h4>
<p>I mean graphics</p>

<a name="127315106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127315106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127315106">Kevin Buzzard (May 30 2018 at 16:02)</a>:</h4>
<p>the cool objects</p>

<a name="127315119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127315119" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127315119">Kevin Buzzard (May 30 2018 at 16:02)</a>:</h4>
<p>things have moved on in maths</p>

<a name="127315326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127315326" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127315326">Kevin Buzzard (May 30 2018 at 16:07)</a>:</h4>
<p>Should one put pdfs of papers in a github repo?</p>

<a name="127315366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127315366" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127315366">Kevin Buzzard (May 30 2018 at 16:08)</a>:</h4>
<p>"Here are some foundational papers containing important definitions"</p>

<a name="127315370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127315370" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127315370">Kevin Buzzard (May 30 2018 at 16:08)</a>:</h4>
<p>"which we are formalising"</p>

<a name="127315375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127315375" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127315375">Kevin Buzzard (May 30 2018 at 16:08)</a>:</h4>
<p>Choice 1: offer a link</p>

<a name="127315377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127315377" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127315377">Kevin Buzzard (May 30 2018 at 16:08)</a>:</h4>
<p>Choice 2: offer a pdf subdirectory</p>

<a name="127315385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127315385" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127315385">Kevin Buzzard (May 30 2018 at 16:08)</a>:</h4>
<p>[Choice 3: both]</p>

<a name="127315476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127315476" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127315476">Patrick Massot (May 30 2018 at 16:10)</a>:</h4>
<p>If arxiv version are up to date then a link is enough</p>

<a name="127315487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127315487" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127315487">Patrick Massot (May 30 2018 at 16:10)</a>:</h4>
<p>But it's much more important to write a roadmap</p>

<a name="127315496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127315496" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127315496">Patrick Massot (May 30 2018 at 16:10)</a>:</h4>
<p>unless you want to formalize everything in those papers...</p>

<a name="127317549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127317549" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127317549">Kevin Buzzard (May 30 2018 at 17:02)</a>:</h4>
<p>This is very helpful.</p>

<a name="127317553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127317553" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127317553">Kevin Buzzard (May 30 2018 at 17:02)</a>:</h4>
<p>It will take me some time to write a good roadmap</p>

<a name="127317562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127317562" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127317562">Kevin Buzzard (May 30 2018 at 17:02)</a>:</h4>
<p>by which I mean a couple of days</p>

<a name="127324192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127324192" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127324192">Johan Commelin (May 30 2018 at 19:14)</a>:</h4>
<blockquote>
<p>Probably in lean you wouldn't be able to have this X/T magic stuff, it would be just one fixed letter as part of the notation</p>
</blockquote>
<p>In Sage it is possible to choose your own symbol for the polynomial variable. I don't know what magic Python has to do this. But it is really nice!</p>

<a name="127349529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127349529" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127349529">Johan Commelin (May 31 2018 at 07:23)</a>:</h4>
<p>Hmm, we probably also need some "almost mathematics". Or is that not needed for the definition, but only for using these guys? I don't remember...</p>

<a name="127354214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127354214" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127354214">Kevin Buzzard (May 31 2018 at 09:49)</a>:</h4>
<p>That's only needed for the tilting correspondence I think</p>

<a name="127354219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127354219" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127354219">Kevin Buzzard (May 31 2018 at 09:49)</a>:</h4>
<p>although we will surely need some facts about perfectoid rings</p>

<a name="127446113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446113" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446113">Kevin Buzzard (Jun 02 2018 at 00:44)</a>:</h4>
<p>What are the arguments for and against making <code>Tate_ring</code> into a typeclass?</p>

<a name="127446114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446114" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446114">Kevin Buzzard (Jun 02 2018 at 00:44)</a>:</h4>
<p><a href="https://arxiv.org/pdf/1709.07343.pdf" target="_blank" title="https://arxiv.org/pdf/1709.07343.pdf">https://arxiv.org/pdf/1709.07343.pdf</a></p>

<a name="127446115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446115">Kevin Buzzard (Jun 02 2018 at 00:44)</a>:</h4>
<p>page 14 just before definition 3.1 for Tate ring. And then there is also the notion of <code>perfectoid_ring</code> in the definition itself.</p>

<a name="127446128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446128" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446128">Kevin Buzzard (Jun 02 2018 at 00:45)</a>:</h4>
<p>it's a condition on a pair consisting of a Tate ring and a prime number</p>

<a name="127446174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446174" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446174">Kevin Buzzard (Jun 02 2018 at 00:46)</a>:</h4>
<p>for example a certain subring of the ring (defined by the topology) has to be p-adically complete</p>

<a name="127446182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446182" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446182">Kevin Buzzard (Jun 02 2018 at 00:47)</a>:</h4>
<p>we will constantly be localizing Tate rings and getting other Tate rings</p>

<a name="127446190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446190" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446190">Kevin Buzzard (Jun 02 2018 at 00:47)</a>:</h4>
<p>it's some sort of p-adic version of usual ring localization</p>

<a name="127446306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446306" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446306">Kenny Lau (Jun 02 2018 at 00:50)</a>:</h4>
<p>against: the pseudo-uniformiser is not canonical</p>

<a name="127446310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446310" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446310">Kevin Buzzard (Jun 02 2018 at 00:50)</a>:</h4>
<p>Kenny it's just the assertion that there exists pi with pi^p divides p</p>

<a name="127446312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446312" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446312">Kevin Buzzard (Jun 02 2018 at 00:50)</a>:</h4>
<p>you don't have to give it</p>

<a name="127446313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446313" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446313">Kevin Buzzard (Jun 02 2018 at 00:50)</a>:</h4>
<p>pi pseudouniformiser</p>

<a name="127446319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446319" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446319">Kevin Buzzard (Jun 02 2018 at 00:51)</a>:</h4>
<p>See Remark 3.2</p>

<a name="127446320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446320" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446320">Kevin Buzzard (Jun 02 2018 at 00:51)</a>:</h4>
<p>all you need is that one exists</p>

<a name="127446324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446324" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446324">Kevin Buzzard (Jun 02 2018 at 00:51)</a>:</h4>
<p>any choices are equivalent in some strong way</p>

<a name="127446366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446366" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446366">Mario Carneiro (Jun 02 2018 at 00:52)</a>:</h4>
<p>I don't see why it wouldn't be a typeclass</p>

<a name="127446368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446368" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446368">Kevin Buzzard (Jun 02 2018 at 00:52)</a>:</h4>
<p>so no diamonds?</p>

<a name="127446372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446372" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446372">Mario Carneiro (Jun 02 2018 at 00:53)</a>:</h4>
<p>with what?</p>

<a name="127446380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446380" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446380">Kevin Buzzard (Jun 02 2018 at 00:53)</a>:</h4>
<p>I have no idea how these things work</p>

<a name="127446381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446381" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446381">Mario Carneiro (Jun 02 2018 at 00:53)</a>:</h4>
<p>where is <code>p</code> coming from though? Is it a component of any lower structures?</p>

<a name="127446383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446383" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446383">Kevin Buzzard (Jun 02 2018 at 00:53)</a>:</h4>
<p>it's a prime number</p>

<a name="127446384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446384" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446384">Kevin Buzzard (Jun 02 2018 at 00:53)</a>:</h4>
<p>best described as a parameter</p>

<a name="127446387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446387" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446387">Kevin Buzzard (Jun 02 2018 at 00:53)</a>:</h4>
<p>because you never change it</p>

<a name="127446427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446427" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446427">Mario Carneiro (Jun 02 2018 at 00:54)</a>:</h4>
<p>The problem with parameters is they don't last long</p>

<a name="127446432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446432" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446432">Kevin Buzzard (Jun 02 2018 at 00:54)</a>:</h4>
<p>then it's just an input which is a prime number</p>

<a name="127446434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446434">Kevin Buzzard (Jun 02 2018 at 00:54)</a>:</h4>
<p>and which goes everywhere</p>

<a name="127446436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446436" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446436">Mario Carneiro (Jun 02 2018 at 00:54)</a>:</h4>
<p>once you exit the section, the parameter becomes explicit and you can't make it a parameter again</p>

<a name="127446453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446453" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446453">Mario Carneiro (Jun 02 2018 at 00:55)</a>:</h4>
<p>The question is: if lean is inferring <code>Tate_ring ?p R</code>, how can it infer <code>p</code>?</p>

<a name="127446513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446513" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446513">Mario Carneiro (Jun 02 2018 at 00:56)</a>:</h4>
<p>I guess as long as all the theorems have <code>p</code> mentioned explicitly it may be solvable by unification, but I don't know how well this will work with notation and such that doesn't have a <code>p</code> explicitly in it</p>

<a name="127446518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446518" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446518">Kenny Lau (Jun 02 2018 at 00:57)</a>:</h4>
<p><code>Tate_ring.p</code>?</p>

<a name="127446521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446521" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446521">Mario Carneiro (Jun 02 2018 at 00:57)</a>:</h4>
<p>that's also a possibility</p>

<a name="127446586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446586" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446586">Mario Carneiro (Jun 02 2018 at 00:59)</a>:</h4>
<blockquote>
<p>Let p be a fixed prime throughout.  Recall that a topological ring R is Tate if it contains an open and bounded subring R0 ⊂ R and a topologically nilpotent unit omega∈R; such elements are called pseudo-uniformizers.</p>
</blockquote>
<p>Where is p mentioned in that definition? Looks like Tate doesn't depend on p</p>

<a name="127446653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446653" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446653">Kevin Buzzard (Jun 02 2018 at 01:00)</a>:</h4>
<p>Right, I was confused earlier. You don't need p for Tate</p>

<a name="127446656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446656" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446656">Kevin Buzzard (Jun 02 2018 at 01:01)</a>:</h4>
<p>but you do need it for perfectoid</p>

<a name="127446665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446665" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446665">Kevin Buzzard (Jun 02 2018 at 01:01)</a>:</h4>
<p>so Tate_ring is I think fine, it's just a top ring plus some axioms</p>

<a name="127446666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446666" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446666">Kevin Buzzard (Jun 02 2018 at 01:01)</a>:</h4>
<p>and perfectoid_ring needs a Tate ring and a prime</p>

<a name="127446713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446713">Mario Carneiro (Jun 02 2018 at 01:02)</a>:</h4>
<p>I suggest using a parameter (a two-argument typeclass) and see how it goes</p>

<a name="127446729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446729" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446729">Kevin Buzzard (Jun 02 2018 at 01:03)</a>:</h4>
<p>So my options are: (1) just make it a structure on a type alpha -- (a) it's a Tate ring (b) there's a prime (c) axioms</p>

<a name="127446772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446772">Kevin Buzzard (Jun 02 2018 at 01:04)</a>:</h4>
<p>or (2) demand both alpha and p as inputs and then it's a structure with (a) Tate ring and (b) axioms</p>

<a name="127446773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446773" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446773">Kevin Buzzard (Jun 02 2018 at 01:04)</a>:</h4>
<p>this is me building perfectoid ring</p>

<a name="127446774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446774" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446774">Kevin Buzzard (Jun 02 2018 at 01:04)</a>:</h4>
<p>I am building perfectoid space from the top down</p>

<a name="127446775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446775" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446775">Kevin Buzzard (Jun 02 2018 at 01:04)</a>:</h4>
<p>it's a long way up</p>

<a name="127446776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446776" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446776">Kevin Buzzard (Jun 02 2018 at 01:04)</a>:</h4>
<p>I'm taking tentative steps down</p>

<a name="127446787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127446787" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127446787">Kevin Buzzard (Jun 02 2018 at 01:05)</a>:</h4>
<p>and Mario is suggesting (2)</p>

<a name="127447844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127447844" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127447844">Kevin Buzzard (Jun 02 2018 at 01:37)</a>:</h4>
<p>Eew prime numbers</p>

<a name="127447847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127447847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127447847">Kevin Buzzard (Jun 02 2018 at 01:37)</a>:</h4>
<p>how am I supposed to input a prime number?</p>

<a name="127447848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127447848" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127447848">Kevin Buzzard (Jun 02 2018 at 01:37)</a>:</h4>
<p>there's a function</p>

<a name="127447849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127447849" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127447849">Kevin Buzzard (Jun 02 2018 at 01:37)</a>:</h4>
<p>prime : nat -&gt; Prop</p>

<a name="127447889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127447889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127447889">Kevin Buzzard (Jun 02 2018 at 01:38)</a>:</h4>
<p>so it could be carrying round <code>{p : nat} {p_prime : prime p}</code></p>

<a name="127447891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127447891" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127447891">Kenny Lau (Jun 02 2018 at 01:38)</a>:</h4>
<p>just make a subtype</p>

<a name="127447892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127447892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127447892">Kevin Buzzard (Jun 02 2018 at 01:38)</a>:</h4>
<p>I have an issue with the subtype solution</p>

<a name="127447900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127447900" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127447900">Kevin Buzzard (Jun 02 2018 at 01:39)</a>:</h4>
<p>then you have to spend your entire life writing p.1 instead of p</p>

<a name="127447901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127447901" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127447901">Kevin Buzzard (Jun 02 2018 at 01:39)</a>:</h4>
<p>and it is an absolutely fundamental part of the notation, it is on every line</p>

<a name="127447905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127447905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127447905">Kenny Lau (Jun 02 2018 at 01:39)</a>:</h4>
<blockquote>
<p>then you have to spend your entire life writing p.1 instead of p</p>
</blockquote>
<p>\u p</p>

<a name="127447963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127447963" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127447963">Kevin Buzzard (Jun 02 2018 at 01:40)</a>:</h4>
<p>and then you show it to people with the up-arrows off or something.</p>

<a name="127447973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127447973" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127447973">Kevin Buzzard (Jun 02 2018 at 01:41)</a>:</h4>
<p>like our dirty underwear</p>

<a name="127447987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127447987" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127447987">Kevin Buzzard (Jun 02 2018 at 01:42)</a>:</h4>
<p>Is the subtype already there?</p>

<a name="127448066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448066" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448066">Kevin Buzzard (Jun 02 2018 at 01:44)</a>:</h4>
<p>I can't see it explicitly defined. What is the subtype's name?</p>

<a name="127448069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448069" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448069">Kevin Buzzard (Jun 02 2018 at 01:44)</a>:</h4>
<p><code>prime</code> is taken by the predicate</p>

<a name="127448203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448203" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448203">Reid Barton (Jun 02 2018 at 01:50)</a>:</h4>
<p>I don't think there is one</p>

<a name="127448254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448254" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448254">Kevin Buzzard (Jun 02 2018 at 01:51)</a>:</h4>
<p>so I call it <code>prime'</code>?</p>

<a name="127448505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448505">Kevin Buzzard (Jun 02 2018 at 01:59)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">prime</span>
<span class="kn">open</span> <span class="n">nat</span>
<span class="kn">definition</span> <span class="n">prime&#39;</span> <span class="o">:=</span> <span class="n">subtype</span> <span class="n">prime</span>
<span class="c1">-- unit test</span>
<span class="kn">definition</span> <span class="n">two&#39;</span> <span class="o">:</span> <span class="n">prime&#39;</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="mi">2</span><span class="o">,</span><span class="n">prime_two</span><span class="bp">⟩</span>

<span class="kn">instance</span> <span class="n">prime&#39;_is_nat</span> <span class="o">:</span> <span class="n">has_coe</span> <span class="n">prime&#39;</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">subtype</span><span class="bp">.</span><span class="n">val</span><span class="bp">⟩</span>
</pre></div>

<a name="127448508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448508" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448508">Kevin Buzzard (Jun 02 2018 at 02:00)</a>:</h4>
<p>Anyone any comments on style or anything that's missing?</p>

<a name="127448555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448555" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448555">Kenny Lau (Jun 02 2018 at 02:00)</a>:</h4>
<p>make it an autoparam like pnat lol</p>

<a name="127448559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448559" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448559">Kevin Buzzard (Jun 02 2018 at 02:00)</a>:</h4>
<p>oh ha ha</p>

<a name="127448561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448561" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448561">Kevin Buzzard (Jun 02 2018 at 02:00)</a>:</h4>
<p>that is a really cool idea</p>

<a name="127448562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448562" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448562">Kevin Buzzard (Jun 02 2018 at 02:00)</a>:</h4>
<p>wait</p>

<a name="127448563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448563" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448563">Kevin Buzzard (Jun 02 2018 at 02:00)</a>:</h4>
<p>how does this work</p>

<a name="127448569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448569">Kevin Buzzard (Jun 02 2018 at 02:01)</a>:</h4>
<p>that open should be a namespace I think -- I'll edit</p>

<a name="127448612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448612" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448612">Kevin Buzzard (Jun 02 2018 at 02:02)</a>:</h4>
<p>I'll post a gist</p>

<a name="127448613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448613" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448613">Nicholas Scheel (Jun 02 2018 at 02:02)</a>:</h4>
<p>what about <code>a_prime</code>? as in, “I have a prime number <code>p : a_prime</code>” (just my own way of doing it, I don’t think it’s common)</p>

<a name="127448615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448615" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448615">Kevin Buzzard (Jun 02 2018 at 02:02)</a>:</h4>
<p><a href="https://gist.github.com/kbuzzard/327a9c466e3aaecf38fe93109ef8fde6" target="_blank" title="https://gist.github.com/kbuzzard/327a9c466e3aaecf38fe93109ef8fde6">https://gist.github.com/kbuzzard/327a9c466e3aaecf38fe93109ef8fde6</a></p>

<a name="127448620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448620" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448620">Kevin Buzzard (Jun 02 2018 at 02:03)</a>:</h4>
<p>I would like to maximise the chance that this stuff gets into mathlib</p>

<a name="127448621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448621" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448621">Nicholas Scheel (Jun 02 2018 at 02:03)</a>:</h4>
<p>or rename the predicate to <code>is_prime</code></p>

<a name="127448623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448623" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448623">Kevin Buzzard (Jun 02 2018 at 02:03)</a>:</h4>
<p>so I'd like to get it right as soon as possible</p>

<a name="127448626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448626" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448626">Kevin Buzzard (Jun 02 2018 at 02:03)</a>:</h4>
<p>It's very mathematical coding and the more I do it the better i'll get at it. I hope.</p>

<a name="127448667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448667" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448667">Kevin Buzzard (Jun 02 2018 at 02:04)</a>:</h4>
<p>for all I know there are standard rules of thumb concerning whether a name like <code>prime</code> should be used for the subtype or the predicate</p>

<a name="127448668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448668">Reid Barton (Jun 02 2018 at 02:05)</a>:</h4>
<p>this is probably a bad idea but</p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">predicate</span><span class="bp">.</span><span class="n">has_coe_to_sort</span> <span class="o">:</span> <span class="n">has_coe_to_sort</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="k">by</span> <span class="n">apply_instance</span> <span class="o">:</span> <span class="n">has_coe_to_sort</span> <span class="o">(</span><span class="n">set</span> <span class="bp">ℕ</span><span class="o">))</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">prime</span><span class="o">}</span>
</pre></div>

<a name="127448675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448675" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448675">Kenny Lau (Jun 02 2018 at 02:05)</a>:</h4>
<p>lmao</p>

<a name="127448676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448676" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448676">Kenny Lau (Jun 02 2018 at 02:05)</a>:</h4>
<p>folly</p>

<a name="127448678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448678" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448678">Kevin Buzzard (Jun 02 2018 at 02:05)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">constant</span> <span class="n">p</span>
</pre></div>

<a name="127448680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448680" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448680">Kenny Lau (Jun 02 2018 at 02:05)</a>:</h4>
<p>ensues</p>

<a name="127448682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448682" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448682">Kevin Buzzard (Jun 02 2018 at 02:05)</a>:</h4>
<p>I think that's the best place to start</p>

<a name="127448684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448684" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448684">Kevin Buzzard (Jun 02 2018 at 02:05)</a>:</h4>
<p><code>constant p : nat</code></p>

<a name="127448723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448723" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448723">Reid Barton (Jun 02 2018 at 02:06)</a>:</h4>
<p><code>axiom hp : prime p</code></p>

<a name="127448724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448724" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448724">Kevin Buzzard (Jun 02 2018 at 02:06)</a>:</h4>
<p>I think that's consistent</p>

<a name="127448726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448726" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448726">Kevin Buzzard (Jun 02 2018 at 02:07)</a>:</h4>
<p>the guys doing <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>L</mi><mi>p</mi></msup></mrow><annotation encoding="application/x-tex">L^p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span></span></span></span></span></span></span></span> spaces will hit the roof</p>

<a name="127448733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448733" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448733">Kenny Lau (Jun 02 2018 at 02:07)</a>:</h4>
<p>chaos</p>

<a name="127448828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448828" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448828">Kevin Buzzard (Jun 02 2018 at 02:10)</a>:</h4>
<p>Can I branch the mathlib in my perfectoid space repo</p>

<a name="127448829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448829" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448829">Kevin Buzzard (Jun 02 2018 at 02:10)</a>:</h4>
<p>and edit it</p>

<a name="127448830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448830" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448830">Kevin Buzzard (Jun 02 2018 at 02:10)</a>:</h4>
<p>and create a PR?</p>

<a name="127448840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448840" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448840">Kevin Buzzard (Jun 02 2018 at 02:11)</a>:</h4>
<p>and just make some note in a file: "this needs some stuff which isn't in mathlib yet -- when it's in mathlib then remove the <code>import mathlib-foo-branch</code> import"</p>

<a name="127448843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448843">Kevin Buzzard (Jun 02 2018 at 02:11)</a>:</h4>
<p>Is that a sane workflow or does it lead to madness?</p>

<a name="127448883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448883" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448883">Kevin Buzzard (Jun 02 2018 at 02:12)</a>:</h4>
<p>and get leanpkg to keep my branch up to date</p>

<a name="127448887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448887" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448887">Kenny Lau (Jun 02 2018 at 02:12)</a>:</h4>
<p>it is sane</p>

<a name="127448888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448888" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448888">Kevin Buzzard (Jun 02 2018 at 02:12)</a>:</h4>
<p>What I am not clear on</p>

<a name="127448892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448892">Kevin Buzzard (Jun 02 2018 at 02:13)</a>:</h4>
<p>is whether I am supposed to say that my project has Mario's mathlib as a dependency</p>

<a name="127448899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127448899" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127448899">Kevin Buzzard (Jun 02 2018 at 02:13)</a>:</h4>
<p>or whether I am supposed to say that my project has some fork of mathlib, perhaps on my github website, as a dependency</p>

<a name="127449063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449063" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449063">Andrew Ashworth (Jun 02 2018 at 02:19)</a>:</h4>
<p>If you have things you want to add to mathlib, I would have mathlib as its own project</p>

<a name="127449064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449064" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449064">Andrew Ashworth (Jun 02 2018 at 02:19)</a>:</h4>
<p>and you work on it in that folder</p>

<a name="127449066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449066" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449066">Andrew Ashworth (Jun 02 2018 at 02:19)</a>:</h4>
<p>editing <code>_target</code> is bad news</p>

<a name="127449170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449170" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449170">Kevin Buzzard (Jun 02 2018 at 02:22)</a>:</h4>
<p>I see. So you're saying that the perfectoid space repository could have as a dependency a perfectoid space mathlib</p>

<a name="127449171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449171" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449171">Andrew Ashworth (Jun 02 2018 at 02:22)</a>:</h4>
<p>yes</p>

<a name="127449172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449172" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449172">Kevin Buzzard (Jun 02 2018 at 02:22)</a>:</h4>
<p>which is some fork of mathlib</p>

<a name="127449178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449178" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449178">Kevin Buzzard (Jun 02 2018 at 02:23)</a>:</h4>
<p>and we maybe have some directory like <code>src/for_mathlib</code> subdirectory</p>

<a name="127449220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449220" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449220">Kevin Buzzard (Jun 02 2018 at 02:24)</a>:</h4>
<p>and then when things are looking tidy</p>

<a name="127449223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449223" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449223">Kevin Buzzard (Jun 02 2018 at 02:24)</a>:</h4>
<p>we can just edit our mathlib, submit a PR, and press on</p>

<a name="127449232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449232" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449232">Kevin Buzzard (Jun 02 2018 at 02:25)</a>:</h4>
<p>Have I got all this straight?</p>

<a name="127449276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449276" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449276">Andrew Ashworth (Jun 02 2018 at 02:26)</a>:</h4>
<p>yes</p>

<a name="127449280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449280" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449280">Andrew Ashworth (Jun 02 2018 at 02:26)</a>:</h4>
<p>_target is not for things you plan on editing or working on</p>

<a name="127449282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449282" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449282">Kevin Buzzard (Jun 02 2018 at 02:27)</a>:</h4>
<p>I see</p>

<a name="127449289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449289" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449289">Kevin Buzzard (Jun 02 2018 at 02:27)</a>:</h4>
<p>you know what I sometimes creep in there in the middle of the night and run <code>leanpkg build</code></p>

<a name="127449292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449292" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449292">Kevin Buzzard (Jun 02 2018 at 02:27)</a>:</h4>
<p>because I know my project won't</p>

<a name="127449333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449333" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449333">Kevin Buzzard (Jun 02 2018 at 02:28)</a>:</h4>
<p>Is <code>adic_space</code> a typeclass?</p>

<a name="127449335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449335" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449335">Kevin Buzzard (Jun 02 2018 at 02:28)</a>:</h4>
<p>Is <code>scheme</code> a typeclass?</p>

<a name="127449336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449336" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449336">Kevin Buzzard (Jun 02 2018 at 02:28)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> what are your thoughts?</p>

<a name="127449337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449337" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449337">Andrew Ashworth (Jun 02 2018 at 02:28)</a>:</h4>
<p>indeed package distribution in lean is a bit annoying right now since it's hard to distribute <code>.oleans</code></p>

<a name="127449340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449340" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449340">Kevin Buzzard (Jun 02 2018 at 02:28)</a>:</h4>
<p>I just rebuild whenever I upgrade</p>

<a name="127449345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449345" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449345">Kevin Buzzard (Jun 02 2018 at 02:29)</a>:</h4>
<p>worth the initial wait</p>

<a name="127449347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449347" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449347">Andrew Ashworth (Jun 02 2018 at 02:29)</a>:</h4>
<p>if mathlib really wants to contain all of mathematics, at some point people are not going to be able to run leanpkg build in a sane amount of time</p>

<a name="127449349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449349" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449349">Andrew Ashworth (Jun 02 2018 at 02:29)</a>:</h4>
<p>unfortunately we are not quite near that point though</p>

<a name="127449353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449353" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449353">Kevin Buzzard (Jun 02 2018 at 02:29)</a>:</h4>
<p><a href="https://github.com/kbuzzard/lean-stacks-project/blob/6617de7dd5f11af46f0c7e0d2223ee065d71b9f3/src/scheme.lean#L366" target="_blank" title="https://github.com/kbuzzard/lean-stacks-project/blob/6617de7dd5f11af46f0c7e0d2223ee065d71b9f3/src/scheme.lean#L366">https://github.com/kbuzzard/lean-stacks-project/blob/6617de7dd5f11af46f0c7e0d2223ee065d71b9f3/src/scheme.lean#L366</a></p>

<a name="127449399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449399">Kevin Buzzard (Jun 02 2018 at 02:30)</a>:</h4>
<p>if you have a sensible project that builds, then I think you can just build your project and it will only build the bits of mathlib that it needs</p>

<a name="127449401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449401" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449401">Kevin Buzzard (Jun 02 2018 at 02:30)</a>:</h4>
<p>this is one of my motivations for defining perfectoid spaces by the way -- to see performance.</p>

<a name="127449402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449402" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449402">Kevin Buzzard (Jun 02 2018 at 02:30)</a>:</h4>
<p>It's all very well proving things about finite groups</p>

<a name="127449410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449410" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449410">Kevin Buzzard (Jun 02 2018 at 02:31)</a>:</h4>
<p>the proof of the odd order theorem is just John Thompson and his friends writing down everything they know about finite groups and noticing that it happens to be enough</p>

<a name="127449412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449412" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449412">Kevin Buzzard (Jun 02 2018 at 02:31)</a>:</h4>
<p>but to write down even one thing about perfectoid spaces</p>

<a name="127449413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449413" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449413">Kevin Buzzard (Jun 02 2018 at 02:31)</a>:</h4>
<p>will force Lean to handle the notion of a perfectoid space</p>

<a name="127449414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449414" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449414">Andrew Ashworth (Jun 02 2018 at 02:31)</a>:</h4>
<p>we also want oleans so we can search everything though (although there are ways to handle this differently)</p>

<a name="127449466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449466" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449466">Kevin Buzzard (Jun 02 2018 at 02:33)</a>:</h4>
<p>Oh -- does e.g. hover or ctrl-space not work in VS Code without the olean files? What exactly do you need them for?</p>

<a name="127449469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449469" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449469">Kevin Buzzard (Jun 02 2018 at 02:33)</a>:</h4>
<p>I have no idea what they are</p>

<a name="127449470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449470" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449470">Kevin Buzzard (Jun 02 2018 at 02:33)</a>:</h4>
<p>all I know is that if you type leanpkg build in _target/deps/mathlib then afterwards it goes quicker</p>

<a name="127449563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449563" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449563">Mario Carneiro (Jun 02 2018 at 02:37)</a>:</h4>
<blockquote>
<p>unfortunately we are not quite near that point though</p>
</blockquote>
<p>Did you see <a href="#narrow/stream/113488-general/subject/travis.20caching/near/127367872" title="#narrow/stream/113488-general/subject/travis.20caching/near/127367872">https://leanprover.zulipchat.com/#narrow/stream/113488-general/subject/travis.20caching/near/127367872</a> ?</p>

<a name="127449603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449603">Kevin Buzzard (Jun 02 2018 at 02:38)</a>:</h4>
<p>dammit</p>

<a name="127449604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449604" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449604">Kevin Buzzard (Jun 02 2018 at 02:38)</a>:</h4>
<p>I want to get some headline definition of perfectoid space</p>

<a name="127449605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449605" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449605">Kevin Buzzard (Jun 02 2018 at 02:38)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">perfectoid_space</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">adic_space</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">perfectoid_cover</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">{</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span>  <span class="n">blah</span> <span class="n">blah</span> <span class="n">blah</span>
</pre></div>

<a name="127449610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449610" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449610">Kevin Buzzard (Jun 02 2018 at 02:39)</a>:</h4>
<p>so I need <code>adic_space</code></p>

<a name="127449611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449611" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449611">Kevin Buzzard (Jun 02 2018 at 02:39)</a>:</h4>
<p>but</p>

<a name="127449612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449612" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449612">Reid Barton (Jun 02 2018 at 02:39)</a>:</h4>
<p>Using <code>structure</code> for schemes and so on seems reasonable. I don't see any practical advantages to using a type class.</p>

<a name="127449613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449613" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449613">Kevin Buzzard (Jun 02 2018 at 02:39)</a>:</h4>
<p><code>structure adic_space (α : Type) : Type := sorry</code> doesn't work</p>

<a name="127449614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449614" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449614">Kevin Buzzard (Jun 02 2018 at 02:39)</a>:</h4>
<p>I mean the sorry doesn't work</p>

<a name="127449615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449615" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449615">Kevin Buzzard (Jun 02 2018 at 02:39)</a>:</h4>
<p>that's not an adequate structure</p>

<a name="127449616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449616" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449616">Mario Carneiro (Jun 02 2018 at 02:39)</a>:</h4>
<p>you can write <code>structure adic_space (α : Type) : Type.</code></p>

<a name="127449658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449658" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449658">Mario Carneiro (Jun 02 2018 at 02:40)</a>:</h4>
<p>or <code>def adic_space (α : Type) : Type := sorry</code></p>

<a name="127449663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449663" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449663">Kevin Buzzard (Jun 02 2018 at 02:41)</a>:</h4>
<p>the problem with the structure solution is that then it is far less obvious that something is missing</p>

<a name="127449664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449664" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449664">Kevin Buzzard (Jun 02 2018 at 02:41)</a>:</h4>
<p>the problem with the def solution is that I can't then extend the structure to a perfectoid space</p>

<a name="127449665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449665" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449665">Mario Carneiro (Jun 02 2018 at 02:41)</a>:</h4>
<p>If you want to make sure to get the sorry warning with a structure you can do <code>structure adic_space (α : Type) : Type := (unfinished : sorry)</code></p>

<a name="127449666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449666" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449666">Kevin Buzzard (Jun 02 2018 at 02:42)</a>:</h4>
<p>rofl</p>

<a name="127449710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449710" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449710">Kevin Buzzard (Jun 02 2018 at 02:43)</a>:</h4>
<p>Why are rings typeclasses? Why are they any different to schemes?</p>

<a name="127449712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449712" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449712">Kevin Buzzard (Jun 02 2018 at 02:43)</a>:</h4>
<p>Product of schemes is a scheme etc</p>

<a name="127449752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449752" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449752">Kevin Buzzard (Jun 02 2018 at 02:44)</a>:</h4>
<p>[wrong thread <span class="user-mention" data-user-id="110025">@Andrew Ashworth</span> ] -- you can edit the post and just change the thread by editing it</p>

<a name="127449857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449857" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449857">Reid Barton (Jun 02 2018 at 02:48)</a>:</h4>
<p>but the product of schemes isn't a "scheme structure" on the product of the underlying sets</p>

<a name="127449859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449859" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449859">Reid Barton (Jun 02 2018 at 02:48)</a>:</h4>
<p>because that is sort of a weird way of thinking about it, but more importantly because its set of points is different</p>

<a name="127449866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449866" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449866">Reid Barton (Jun 02 2018 at 02:49)</a>:</h4>
<p>Somehow the relationship between a ring and its underlying set is much more important than the relationship between a scheme and its underlying set</p>

<a name="127449911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449911" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449911">Kevin Buzzard (Jun 02 2018 at 02:50)</a>:</h4>
<p>o_O so it depends on the underlying type?</p>

<a name="127449914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449914" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449914">Kevin Buzzard (Jun 02 2018 at 02:50)</a>:</h4>
<p>I see</p>

<a name="127449915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449915" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449915">Reid Barton (Jun 02 2018 at 02:50)</a>:</h4>
<p>Well, if you were going to write</p>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">scheme</span> <span class="o">(</span><span class="err">\</span><span class="n">a</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">...</span>
</pre></div>

<a name="127449921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449921" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449921">Kevin Buzzard (Jun 02 2018 at 02:51)</a>:</h4>
<p>what about if I just wrote <code>class scheme := </code> and then asked the user to provide the type?</p>

<a name="127449924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449924" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449924">Kevin Buzzard (Jun 02 2018 at 02:51)</a>:</h4>
<p>oh is that somehow the canonically bad thing to do</p>

<a name="127449925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449925" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449925">Reid Barton (Jun 02 2018 at 02:51)</a>:</h4>
<p>then nobody would know which scheme you were talking about</p>

<a name="127449926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449926" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449926">Kevin Buzzard (Jun 02 2018 at 02:52)</a>:</h4>
<p>right</p>

<a name="127449969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449969" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449969">Reid Barton (Jun 02 2018 at 02:52)</a>:</h4>
<p>Somehow, I feel that <code>class group (\a : Type) := ...</code> is related to the abuse of notation where we identify a group with its underlying set</p>

<a name="127449970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449970" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449970">Reid Barton (Jun 02 2018 at 02:53)</a>:</h4>
<p>we feel that we can identify the group just by naming the set</p>

<a name="127449976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449976" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449976">Kevin Buzzard (Jun 02 2018 at 02:53)</a>:</h4>
<p>I do think it is rare that you find yourself putting two group structures on one set</p>

<a name="127449978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449978" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449978">Kevin Buzzard (Jun 02 2018 at 02:53)</a>:</h4>
<p>and even if it happened you could imagine that it was for some temporary calculation</p>

<a name="127449980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127449980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127449980">Kevin Buzzard (Jun 02 2018 at 02:53)</a>:</h4>
<p>possibly which ultimately even proved they were equal</p>

<a name="127450019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450019" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450019">Kevin Buzzard (Jun 02 2018 at 02:54)</a>:</h4>
<p>on the other hand I'd say just the same thing about schemes</p>

<a name="127450020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450020">Reid Barton (Jun 02 2018 at 02:54)</a>:</h4>
<p>but I guess, do you think of a scheme as a set equipped with "scheme structure"?</p>

<a name="127450023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450023" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450023">Kevin Buzzard (Jun 02 2018 at 02:54)</a>:</h4>
<p>Maybe it's a locally-ringed space with a scheme set-of-axioms</p>

<a name="127450032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450032" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450032">Reid Barton (Jun 02 2018 at 02:55)</a>:</h4>
<p>Yes, that seems much better</p>

<a name="127450033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450033" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450033">Kevin Buzzard (Jun 02 2018 at 02:55)</a>:</h4>
<p>oh god that would make it a dreaded subtype</p>

<a name="127450041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450041" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450041">Reid Barton (Jun 02 2018 at 02:55)</a>:</h4>
<p>Anyways, you wouldn't be able to write <code>instance (scheme α) (scheme β) : scheme (α × β)</code> to get <code>α × β</code> notation for product schemes because the underlying set is wrong</p>

<a name="127450081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450081" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450081">Kevin Buzzard (Jun 02 2018 at 02:56)</a>:</h4>
<p>As a mathematician I find it extremely hard to distinguish whether I "think about a scheme as a set equipped with the structures of a topological space, a sheaf of rings on the space and an axiom about the rings"</p>

<a name="127450082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450082" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450082">Kevin Buzzard (Jun 02 2018 at 02:56)</a>:</h4>
<p>or whether I "think about it as a locally ringed space equipped with an axiom"</p>

<a name="127450093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450093" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450093">Mario Carneiro (Jun 02 2018 at 02:57)</a>:</h4>
<p>By the way re: your prime question, there is the naming convention of capitalizing <code>p : Prime</code> for bundled structures</p>

<a name="127450095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450095" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450095">Kevin Buzzard (Jun 02 2018 at 02:57)</a>:</h4>
<p>oh great! Thanks!</p>

<a name="127450150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450150" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450150">Reid Barton (Jun 02 2018 at 02:59)</a>:</h4>
<p>Yeah, I think it's hard to pin anything down too precisely in this direction.<br>
That's why I wrote "practical advantages" above <span class="emoji emoji-1f642" title="simple smile">:simple_smile:</span></p>

<a name="127450200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450200" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450200">Kevin Buzzard (Jun 02 2018 at 03:00)</a>:</h4>
<p>current v</p>

<a name="127450201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450201" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450201">Kevin Buzzard (Jun 02 2018 at 03:00)</a>:</h4>
<p><a href="https://gist.github.com/kbuzzard/327a9c466e3aaecf38fe93109ef8fde6" target="_blank" title="https://gist.github.com/kbuzzard/327a9c466e3aaecf38fe93109ef8fde6">https://gist.github.com/kbuzzard/327a9c466e3aaecf38fe93109ef8fde6</a></p>

<a name="127450202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450202" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450202">Kevin Buzzard (Jun 02 2018 at 03:00)</a>:</h4>
<p>of Prime</p>

<a name="127450230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450230" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450230">Kevin Buzzard (Jun 02 2018 at 03:01)</a>:</h4>
<blockquote>
<p>Yes, that seems much better</p>
</blockquote>
<p>So a scheme should extend a locally ringed space by adding one axiom?</p>

<a name="127450234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450234" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450234">Kevin Buzzard (Jun 02 2018 at 03:01)</a>:</h4>
<p>Ha ha that would break my proof that affine schemes are schemes :-)</p>

<a name="127450235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450235" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450235">Kevin Buzzard (Jun 02 2018 at 03:01)</a>:</h4>
<p>the dirty truth coming out :-)</p>

<a name="127450279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450279" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450279">Kevin Buzzard (Jun 02 2018 at 03:02)</a>:</h4>
<p>I figured that I could define a scheme to be a topological space with a sheaf of rings which was locally an affine scheme</p>

<a name="127450281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450281" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450281">Kevin Buzzard (Jun 02 2018 at 03:02)</a>:</h4>
<p>because this would imply it was a locally ringed space</p>

<a name="127450282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450282" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450282">Kevin Buzzard (Jun 02 2018 at 03:02)</a>:</h4>
<p>I was cutting corners :-)</p>

<a name="127450288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450288" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450288">Mario Carneiro (Jun 02 2018 at 03:03)</a>:</h4>
<p>and you wonder why I think it isn't ready for mathlib...</p>

<a name="127450291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450291" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450291">Reid Barton (Jun 02 2018 at 03:03)</a>:</h4>
<p>Oh, I forgot "locally ringed" includes an extra condition</p>

<a name="127450748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450748" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450748">Johan Commelin (Jun 02 2018 at 03:21)</a>:</h4>
<blockquote>
<p>I do think it is rare that you find yourself putting two group structures on one set</p>
</blockquote>
<p>I think the most famous example is Eckman-Hilton for homotopy groups.</p>

<a name="127450791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450791" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450791">Johan Commelin (Jun 02 2018 at 03:22)</a>:</h4>
<p>And indeed, you prove that they are the same group structure.</p>

<a name="127450807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450807" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450807">Johan Commelin (Jun 02 2018 at 03:23)</a>:</h4>
<p>Personally I definitely would love to be able to write <code>X \times Y</code> for the product of schemes.</p>

<a name="127450851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450851">Johan Commelin (Jun 02 2018 at 03:24)</a>:</h4>
<p>The only way that I currently see to make this happen, is that we have some sort of <code>has_cat_prod</code> notation for categorical products. And then a proof that <code>Schemes</code> has products.</p>

<a name="127450863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450863" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450863">Johan Commelin (Jun 02 2018 at 03:25)</a>:</h4>
<p>Pullbacks become a problem (notationwise) because we cannot but a subscript scheme under the <code>\times</code>.</p>

<a name="127450968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450968" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450968">Kevin Buzzard (Jun 02 2018 at 03:28)</a>:</h4>
<p>I've got two elements of a ring.</p>

<a name="127450969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450969" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450969">Kevin Buzzard (Jun 02 2018 at 03:28)</a>:</h4>
<p>Oh I know the bloody answer to what I was going to ask</p>

<a name="127450970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450970" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450970">Kevin Buzzard (Jun 02 2018 at 03:28)</a>:</h4>
<p>Mathematicians are great</p>

<a name="127450971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450971" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450971">Kevin Buzzard (Jun 02 2018 at 03:28)</a>:</h4>
<p>"use a subtype"</p>

<a name="127450972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450972" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450972">Kevin Buzzard (Jun 02 2018 at 03:28)</a>:</h4>
<p>"elements a and b in R, with a dividing b in the subring S"</p>

<a name="127450974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450974" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450974">Kevin Buzzard (Jun 02 2018 at 03:28)</a>:</h4>
<p>Having p as a subtype is awful</p>

<a name="127450975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450975" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450975">Kevin Buzzard (Jun 02 2018 at 03:28)</a>:</h4>
<p><code>x ^ p</code></p>

<a name="127450978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450978" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450978">Kevin Buzzard (Jun 02 2018 at 03:28)</a>:</h4>
<p>Lean : ?!</p>

<a name="127450983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450983" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450983">Mario Carneiro (Jun 02 2018 at 03:29)</a>:</h4>
<p>yeah this is going to be difficult</p>

<a name="127450986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450986" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450986">Kevin Buzzard (Jun 02 2018 at 03:29)</a>:</h4>
<p>x is in a ring and p has a coercion to nat</p>

<a name="127450988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450988">Mario Carneiro (Jun 02 2018 at 03:29)</a>:</h4>
<p>you can either coerce, or have a <code>has_pow A Prime</code> instance</p>

<a name="127450991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127450991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127450991">Kevin Buzzard (Jun 02 2018 at 03:29)</a>:</h4>
<p>rofl</p>

<a name="127451034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127451034" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127451034">Kevin Buzzard (Jun 02 2018 at 03:30)</a>:</h4>
<p>I coerce with \u?</p>

<a name="127451036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127451036" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127451036">Mario Carneiro (Jun 02 2018 at 03:30)</a>:</h4>
<p>lean can't coerce and do typeclass inference at the same time</p>

<a name="127451038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127451038" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127451038">Mario Carneiro (Jun 02 2018 at 03:30)</a>:</h4>
<p>you would have to say it's a nat</p>

<a name="127451043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127451043" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127451043">Mario Carneiro (Jun 02 2018 at 03:30)</a>:</h4>
<p><code>x ^ (p:nat)</code></p>

<a name="127451055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127451055" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127451055">Johan Commelin (Jun 02 2018 at 03:31)</a>:</h4>
<blockquote>
<p>lean can't coerce and do typeclass inference at the same time</p>
</blockquote>
<p>Is this something that might change in Lean 4?</p>

<a name="127451056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127451056" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127451056">Mario Carneiro (Jun 02 2018 at 03:31)</a>:</h4>
<p>I think that a prime typeclass might work better for you</p>

<a name="127451058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127451058" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127451058">Mario Carneiro (Jun 02 2018 at 03:31)</a>:</h4>
<p>no, that's unlikely to change</p>

<a name="127451060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127451060" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127451060">Mario Carneiro (Jun 02 2018 at 03:31)</a>:</h4>
<p>if you think about it that's a really large search space</p>

<a name="127451099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127451099" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127451099">Mario Carneiro (Jun 02 2018 at 03:32)</a>:</h4>
<p>it's too underdetermined</p>

<a name="127451100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127451100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127451100">Johan Commelin (Jun 02 2018 at 03:32)</a>:</h4>
<p>Yes, I agree. Somehow humans are extremely good at navigating that search space.</p>

<a name="127451102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127451102" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127451102">Kevin Buzzard (Jun 02 2018 at 03:32)</a>:</h4>
<p>wait</p>

<a name="127451103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127451103" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127451103">Kevin Buzzard (Jun 02 2018 at 03:32)</a>:</h4>
<p><code>example (R : Type) [comm_ring R] : has_pow R ℕ := by apply_instance </code></p>

<a name="127451104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127451104" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127451104">Kevin Buzzard (Jun 02 2018 at 03:32)</a>:</h4>
<p>is that not a thing? Doesn't run for me</p>

<a name="127451109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127451109" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127451109">Mario Carneiro (Jun 02 2018 at 03:33)</a>:</h4>
<p>you have <code>algebra.group_power</code>?</p>

<a name="127451114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127451114" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127451114">Kevin Buzzard (Jun 02 2018 at 03:33)</a>:</h4>
<p>I have one lying around somewhere</p>

<a name="127451214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127451214" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127451214">Kevin Buzzard (Jun 02 2018 at 03:36)</a>:</h4>
<p>How about adding p as a constant and the fact that it's prime as an axiom?</p>

<a name="127451215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127451215" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127451215">Kevin Buzzard (Jun 02 2018 at 03:36)</a>:</h4>
<p>Is that just a bridge too far?</p>

<a name="127451223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127451223" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127451223">Kevin Buzzard (Jun 02 2018 at 03:37)</a>:</h4>
<p>so if the predicate is called <code>prime</code> and the subtype <code>Prime</code>, what is the typeclass called?</p>

<a name="127451224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127451224" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127451224">Kevin Buzzard (Jun 02 2018 at 03:37)</a>:</h4>
<p><code>is_prime</code> I guess?</p>

<a name="127453513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453513" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453513">Kevin Buzzard (Jun 02 2018 at 05:01)</a>:</h4>
<p>eew</p>

<a name="127453514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453514" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453514">Kevin Buzzard (Jun 02 2018 at 05:01)</a>:</h4>
<p><code>definition complete (R : Type) [topological_space R] [ring R] [topological_ring R] : Prop := sorry </code></p>

<a name="127453551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453551" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453551">Kevin Buzzard (Jun 02 2018 at 05:02)</a>:</h4>
<p>is that going away in Lean 4?</p>

<a name="127453554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453554" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453554">Mario Carneiro (Jun 02 2018 at 05:02)</a>:</h4>
<p>Yes, we've decided that no one needs topology anymore</p>

<a name="127453555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453555" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453555">Kevin Buzzard (Jun 02 2018 at 05:02)</a>:</h4>
<p>you're going to use sites?</p>

<a name="127453564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453564" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453564">Mario Carneiro (Jun 02 2018 at 05:03)</a>:</h4>
<p>nothing but pointless topology for us</p>

<a name="127453565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453565" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453565">Johan Commelin (Jun 02 2018 at 05:03)</a>:</h4>
<p>No, infty-topoi.</p>

<a name="127453569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453569">Johan Commelin (Jun 02 2018 at 05:03)</a>:</h4>
<blockquote>
<p>nothing but pointless topology for us</p>
</blockquote>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">complete</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">pointless_topological_space</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">pointless_topological_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="127453606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453606" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453606">Mario Carneiro (Jun 02 2018 at 05:04)</a>:</h4>
<p>much better</p>

<a name="127453618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453618" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453618">Johan Commelin (Jun 02 2018 at 05:06)</a>:</h4>
<p>Kevin, so the problem is that <code>topological_ring</code> should imply <code>ring</code> and <code>topological_space</code>, right?</p>

<a name="127453662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453662">Kevin Buzzard (Jun 02 2018 at 05:07)</a>:</h4>
<p>I don't know why I had to say all three</p>

<a name="127453664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453664" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453664">Mario Carneiro (Jun 02 2018 at 05:07)</a>:</h4>
<p>Maybe <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> should field this one, I'm not sure why it's not a class extending those others</p>

<a name="127453704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453704" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453704">Kevin Buzzard (Jun 02 2018 at 05:08)</a>:</h4>
<p>I tried using type class inference</p>

<a name="127453705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453705" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453705">Kevin Buzzard (Jun 02 2018 at 05:08)</a>:</h4>
<p><code>class perfectoid_ring (R : Type) [Tate_ring R] (p : ℕ) [is_prime p] :=</code></p>

<a name="127453710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453710" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453710">Kevin Buzzard (Jun 02 2018 at 05:09)</a>:</h4>
<p>and then when I ask type class inference to prove the hypothesis that R is a perfectoid ring</p>

<a name="127453711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453711" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453711">Mario Carneiro (Jun 02 2018 at 05:09)</a>:</h4>
<p>I mean I know why you had to write that, are you asking what is happening or why is it set up that way?</p>

<a name="127453755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453755" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453755">Kevin Buzzard (Jun 02 2018 at 05:10)</a>:</h4>
<p>I have typeclass woes</p>

<a name="127453757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453757" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453757">Kevin Buzzard (Jun 02 2018 at 05:10)</a>:</h4>
<p>I am writing my flagship definition</p>

<a name="127453759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453759" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453759">Kevin Buzzard (Jun 02 2018 at 05:10)</a>:</h4>
<p>so it has to look lovely</p>

<a name="127453760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453760" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453760">Kevin Buzzard (Jun 02 2018 at 05:10)</a>:</h4>
<p>and I write <code> [∀ i, perfectoid_ring (R i) p]</code></p>

<a name="127453761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453761" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453761">Kevin Buzzard (Jun 02 2018 at 05:10)</a>:</h4>
<p>and curse the <code>p</code></p>

<a name="127453763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453763" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453763">Kevin Buzzard (Jun 02 2018 at 05:11)</a>:</h4>
<p>and it complains that it can't see why <code>R i</code> is a Tate ring</p>

<a name="127453769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453769" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453769">Mario Carneiro (Jun 02 2018 at 05:11)</a>:</h4>
<p>because perfectoid ring depends on Tate ring</p>

<a name="127453813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453813">Mario Carneiro (Jun 02 2018 at 05:12)</a>:</h4>
<p>The way you declared it, you always have to write <code>[Tate_ring R] [is_prime p] [perfectoid_ring R p]</code></p>

<a name="127453821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453821" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453821">Mario Carneiro (Jun 02 2018 at 05:13)</a>:</h4>
<p>since <code>perfectoid_ring </code> takes the other two as parameters</p>

<a name="127453882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453882" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453882">Kevin Buzzard (Jun 02 2018 at 05:15)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">perfectoid_ring</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">Tate_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">is_prime</span> <span class="n">p</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">is_complete</span> <span class="o">:</span> <span class="n">complete</span> <span class="n">R</span><span class="o">)</span>
<span class="o">(</span><span class="n">is_uniform</span>  <span class="o">:</span> <span class="n">uniform</span> <span class="n">R</span><span class="o">)</span>
<span class="o">(</span><span class="n">ramified</span>    <span class="o">:</span> <span class="bp">∃</span> <span class="n">ω</span> <span class="o">:</span> <span class="n">R</span> <span class="err">ᵒ</span><span class="o">,</span>
                 <span class="o">(</span><span class="n">is_pseudo_uniformizer</span> <span class="n">ω</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">ω</span> <span class="err">^</span> <span class="n">p</span> <span class="err">∣</span> <span class="n">p</span><span class="o">))</span>
 <span class="o">(</span><span class="n">Frob</span>       <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">R</span> <span class="err">ᵒ</span><span class="o">,</span>
                 <span class="bp">∃</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span> <span class="err">ᵒ</span><span class="o">,</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="err">^</span> <span class="n">p</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span>

<span class="kn">structure</span> <span class="n">foo</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">is_prime</span> <span class="n">p</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">hello</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">perfectoid_ring</span> <span class="n">R</span> <span class="n">p</span><span class="o">],</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">2</span><span class="o">)</span> <span class="c1">-- failed to synthesize Tate_ring</span>
</pre></div>

<a name="127453922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453922" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453922">Kevin Buzzard (Jun 02 2018 at 05:16)</a>:</h4>
<p><code>(hello : ∃ (R : Type) [Tate_ring R] [perfectoid_ring R p], 1 + 1 = 2) </code></p>

<a name="127453923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453923" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453923">Kevin Buzzard (Jun 02 2018 at 05:16)</a>:</h4>
<p>works but looks silly</p>

<a name="127453924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453924" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453924">Kevin Buzzard (Jun 02 2018 at 05:16)</a>:</h4>
<p>of course it's a Tate ring -- it's a perfectoid ring!</p>

<a name="127453925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453925" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453925">Mario Carneiro (Jun 02 2018 at 05:17)</a>:</h4>
<p>It can't synthesize any of those classes</p>

<a name="127453931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453931" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453931">Mario Carneiro (Jun 02 2018 at 05:17)</a>:</h4>
<p>it's right of the colon, so no typeclass inference for you</p>

<a name="127453932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453932">Johan Commelin (Jun 02 2018 at 05:17)</a>:</h4>
<p>So, you should extend Tate_ring?</p>

<a name="127453935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453935" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453935">Mario Carneiro (Jun 02 2018 at 05:17)</a>:</h4>
<p>use <code>by exactI</code> to workaround</p>

<a name="127453936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453936" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453936">Kevin Buzzard (Jun 02 2018 at 05:17)</a>:</h4>
<p>but I don't want by exactI everywhere</p>

<a name="127453937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453937" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453937">Kevin Buzzard (Jun 02 2018 at 05:17)</a>:</h4>
<p>it's an ugly hack</p>

<a name="127453976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453976" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453976">Mario Carneiro (Jun 02 2018 at 05:18)</a>:</h4>
<p>Wait we're talking about different things again</p>

<a name="127453978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453978" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453978">Mario Carneiro (Jun 02 2018 at 05:18)</a>:</h4>
<p>to make Tate_ring inferrable from perfectoid_ring, just make it <code>extends</code> the other</p>

<a name="127453983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127453983" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127453983">Mario Carneiro (Jun 02 2018 at 05:19)</a>:</h4>
<p>instead of taking it as parameter</p>

<a name="127454080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454080" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454080">Kevin Buzzard (Jun 02 2018 at 05:23)</a>:</h4>
<p>I changed for a reason</p>

<a name="127454128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454128" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454128">Mario Carneiro (Jun 02 2018 at 05:25)</a>:</h4>
<p>Why did you write out the divisibility condition instead of using the existing definition?</p>

<a name="127454264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454264" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454264">Kevin Buzzard (Jun 02 2018 at 05:30)</a>:</h4>
<p>I didn't know how to reduce mod p offhand</p>

<a name="127454265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454265" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454265">Kevin Buzzard (Jun 02 2018 at 05:31)</a>:</h4>
<p>so just wrote something mathematically equivalent</p>

<a name="127454271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454271" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454271">Kevin Buzzard (Jun 02 2018 at 05:31)</a>:</h4>
<p>reducing mod p would be fine</p>

<a name="127454311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454311" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454311">Kevin Buzzard (Jun 02 2018 at 05:32)</a>:</h4>
<p>I'd just need to look up how to make a principal ideal and then quotient out by an ideal, and then I would have had to verify that the p'th power map was well-defined on the  quotient</p>

<a name="127454313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454313" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454313">Mario Carneiro (Jun 02 2018 at 05:32)</a>:</h4>
<p>or you could write <code>p | b ^ p - a</code></p>

<a name="127454314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454314">Kevin Buzzard (Jun 02 2018 at 05:32)</a>:</h4>
<p>try that with a subtype</p>

<a name="127454322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454322" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454322">Mario Carneiro (Jun 02 2018 at 05:33)</a>:</h4>
<p>?</p>

<a name="127454324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454324" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454324">Kevin Buzzard (Jun 02 2018 at 05:33)</a>:</h4>
<p>just noting that a lot of coercion would be happening if we used subtypes</p>

<a name="127454325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454325" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454325">Kevin Buzzard (Jun 02 2018 at 05:33)</a>:</h4>
<p>for p</p>

<a name="127454367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454367" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454367">Mario Carneiro (Jun 02 2018 at 05:34)</a>:</h4>
<p>I don't recommend it. You need it more often as a nat than a prime</p>

<a name="127454376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454376" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454376">Kevin Buzzard (Jun 02 2018 at 05:35)</a>:</h4>
<div class="codehilite"><pre><span></span>type mismatch at application
  pow b
term
  b
has type
  :Rᵒ
but is expected to have type
  ℕ
</pre></div>

<a name="127454415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454415" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454415">Kevin Buzzard (Jun 02 2018 at 05:36)</a>:</h4>
<p>b has type some strange smiley</p>

<a name="127454422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454422" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454422">Kevin Buzzard (Jun 02 2018 at 05:37)</a>:</h4>
<p><code>                 ∃ b : R ᵒ, (p : R ᵒ) ∣ (b ^ p - a))</code></p>

<a name="127454425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454425" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454425">Kevin Buzzard (Jun 02 2018 at 05:37)</a>:</h4>
<p>looks less cool</p>

<a name="127454720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454720" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454720">Johan Commelin (Jun 02 2018 at 05:48)</a>:</h4>
<p>Hmm, this doesn't score many readability points with me...</p>

<a name="127454727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454727" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454727">Mario Carneiro (Jun 02 2018 at 05:49)</a>:</h4>
<p>why? that seems plenty readable</p>

<a name="127454728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454728">Mario Carneiro (Jun 02 2018 at 05:49)</a>:</h4>
<p>you may also be able to get away with just <code>\u p</code></p>

<a name="127454771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454771" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454771">Johan Commelin (Jun 02 2018 at 05:50)</a>:</h4>
<p>Well, we are optimising this definition for maximal readability, because it will be the first Lean a lot of mathematicians will read this summer.</p>

<a name="127454772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454772">Johan Commelin (Jun 02 2018 at 05:50)</a>:</h4>
<p>And then <code>(p : R ᵒ)</code> will already scare them away.</p>

<a name="127454773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454773" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454773">Johan Commelin (Jun 02 2018 at 05:50)</a>:</h4>
<p>Why is it even there?</p>

<a name="127454779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454779" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454779">Mario Carneiro (Jun 02 2018 at 05:51)</a>:</h4>
<p>because <code>p</code> is a nat but it is being mapped into the ring so it can be a divisor</p>

<a name="127454781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454781" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454781">Johan Commelin (Jun 02 2018 at 05:51)</a>:</h4>
<p>Can't we tell somewhere else that this division happens in <code>R ᵒ</code> ?</p>

<a name="127454785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454785" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454785">Mario Carneiro (Jun 02 2018 at 05:51)</a>:</h4>
<p>yes, that's why I suggested <code>\u p</code></p>

<a name="127454833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454833">Johan Commelin (Jun 02 2018 at 05:53)</a>:</h4>
<p>I think in the end, I would rather prefer something close to <code>∃ b : R ᵒ, a = b ^ p mod p</code></p>

<a name="127454835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454835" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454835">Johan Commelin (Jun 02 2018 at 05:53)</a>:</h4>
<p>Even if it is just notation for what we had before.</p>

<a name="127454876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127454876" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127454876">Johan Commelin (Jun 02 2018 at 05:54)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> something like that should be possible. And then you don't need quotient rings.</p>

<a name="127458263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127458263" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127458263">Johannes Hölzl (Jun 02 2018 at 08:16)</a>:</h4>
<blockquote>
<p>Maybe <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> should field this one, I'm not sure why it's not a class extending those others</p>
</blockquote>
<p>If <code>topological_ring</code> would contain the topology or the ring itself, then we would need to duplicate the algebraic and topological type class hierarchy.  So we would need a <code>topological_domain</code>, a <code>uniform_space_ring</code>, a <code>uniform_domain</code> etc. by keeping it a relation this type class hierarchy duplication is avoided. Also <code>topological_ring</code> is a <code>Prop</code> now, so we can add arbitrary instances proving that something is a <code>topological_ring</code> without worrying that they are definitional equal.</p>

<a name="127515805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127515805" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127515805">Kevin Buzzard (Jun 03 2018 at 21:29)</a>:</h4>
<p>OK so a perfectoid space is an adic space with some properties, so we need to develop the theory of adic spaces</p>

<a name="127515855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127515855" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127515855">Kevin Buzzard (Jun 03 2018 at 21:31)</a>:</h4>
<p>and a basic constructor for adic spaces is the <code>Spa</code> function, which takes as input a so-called "Huber pair" and outputs an affinoid pre-adic space</p>

<a name="127515865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127515865" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127515865">Kevin Buzzard (Jun 03 2018 at 21:31)</a>:</h4>
<p>I am thinking about how to formalize that in Lean and I have a question regarding the input, that is, the Huber Pair.</p>

<a name="127515909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127515909" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127515909">Kevin Buzzard (Jun 03 2018 at 21:32)</a>:</h4>
<p>A Huber Pair is a topological ring <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> satisfying some axioms, and a subring <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">R^+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span> satisfying some more axioms related to both <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">R^+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span> and how it sits in <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span>.</p>

<a name="127515917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127515917" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127515917">Kevin Buzzard (Jun 03 2018 at 21:33)</a>:</h4>
<p>So I can envisage several ways of setting this up</p>

<a name="127515966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127515966" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127515966">Kevin Buzzard (Jun 03 2018 at 21:34)</a>:</h4>
<p>and what of course I would really like to know is which one is the "best" way, where by "best" I mean "one for which the interface will be easiest to write".</p>

<a name="127515968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127515968" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127515968">Kevin Buzzard (Jun 03 2018 at 21:34)</a>:</h4>
<p>so how do I analyse this further?</p>

<a name="127515970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127515970" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127515970">Kevin Buzzard (Jun 03 2018 at 21:34)</a>:</h4>
<p>I definitely want easy access to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span></p>

<a name="127516022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127516022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127516022">Kevin Buzzard (Jun 03 2018 at 21:36)</a>:</h4>
<p>and most of the time, when creating new pairs from old, you build the new <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> from the old <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> and then let the new <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">R^+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span> be "the same construction but with <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">R^+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span>"</p>

<a name="127516024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127516024" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127516024">Kevin Buzzard (Jun 03 2018 at 21:36)</a>:</h4>
<p>e.g. new <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">R^+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span> could be the image of the old <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">R^+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span> or whatever</p>

<a name="127516027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127516027" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127516027">Kevin Buzzard (Jun 03 2018 at 21:37)</a>:</h4>
<p>and occasionally <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> stays the same but <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">R^+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span> changes</p>

<a name="127516032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127516032" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127516032">Kevin Buzzard (Jun 03 2018 at 21:37)</a>:</h4>
<p>one could think of changing <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">R^+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span> as "changing <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> infinitesimally"</p>

<a name="127516034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127516034" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127516034">Kevin Buzzard (Jun 03 2018 at 21:37)</a>:</h4>
<p>"so mostly you don't notice"</p>

<a name="127516038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127516038" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127516038">Kevin Buzzard (Jun 03 2018 at 21:38)</a>:</h4>
<p>and everything will be a topological ring</p>

<a name="127516076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127516076" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127516076">Kevin Buzzard (Jun 03 2018 at 21:38)</a>:</h4>
<p>and every map will be continuous</p>

<a name="127516084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127516084" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127516084">Kevin Buzzard (Jun 03 2018 at 21:39)</a>:</h4>
<p>and we'll be building things like "polynomial ring over a Huber Pair", sending <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>R</mi><mo separator="true">,</mo><msup><mi>R</mi><mo>+</mo></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">(R,R^+)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:1.021331em;vertical-align:-0.25em;"></span><span class="base"><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>R</mi><mo>[</mo><mi>X</mi><mo>]</mo><mo separator="true">,</mo><msup><mi>R</mi><mo>+</mo></msup><mo>[</mo><mi>X</mi><mo>]</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">(R[X],R^+[X])</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:1.021331em;vertical-align:-0.25em;"></span><span class="base"><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">]</span><span class="mclose">)</span></span></span></span></p>

<a name="127516087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127516087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127516087">Kevin Buzzard (Jun 03 2018 at 21:39)</a>:</h4>
<p>or "completion of a Huber Pair", sending <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>R</mi><mo separator="true">,</mo><msup><mi>R</mi><mo>+</mo></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">(R,R^+)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:1.021331em;vertical-align:-0.25em;"></span><span class="base"><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mover accent="true"><mrow><mi>R</mi></mrow><mo>^</mo></mover><mo separator="true">,</mo><msup><mover accent="true"><mrow><mi>R</mi></mrow><mo>^</mo></mover><mo>+</mo></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">(\hat{R},\hat{R}^+)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.9467699999999999em;"></span><span class="strut bottom" style="height:1.19677em;vertical-align:-0.25em;"></span><span class="base"><span class="mopen">(</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9467699999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="margin-left:0.16668em;"><span>^</span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9467699999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="margin-left:0.16668em;"><span>^</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p>

<a name="127516134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127516134" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127516134">Kevin Buzzard (Jun 03 2018 at 21:40)</a>:</h4>
<p>where <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mrow><mi>R</mi></mrow><mo>^</mo></mover></mrow><annotation encoding="application/x-tex">\hat{R}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.9467699999999999em;"></span><span class="strut bottom" style="height:0.9467699999999999em;vertical-align:0em;"></span><span class="base"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9467699999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="margin-left:0.16668em;"><span>^</span></span></span></span></span></span></span></span></span></span> is a certain kind of completion of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> etc</p>

<a name="127516137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127516137" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127516137">Kevin Buzzard (Jun 03 2018 at 21:41)</a>:</h4>
<p>and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mover accent="true"><mrow><mi>R</mi></mrow><mo>^</mo></mover><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">\hat{R}^+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.9467699999999999em;"></span><span class="strut bottom" style="height:0.9467699999999999em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9467699999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span><span style="top:-3.25233em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="margin-left:0.16668em;"><span>^</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span> is the topological closure of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">R^+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span></p>

<a name="127517460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127517460" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127517460">Kevin Buzzard (Jun 03 2018 at 22:28)</a>:</h4>
<p>I'm going to make a structure containing <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">R^+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span>, and rely on <code>has_coe_to_sort</code> to enable me to treat it as <code>R</code>.</p>

<a name="127517466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127517466" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127517466">Kevin Buzzard (Jun 03 2018 at 22:29)</a>:</h4>
<p>Is there trouble ahead?</p>

<a name="127517537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127517537" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127517537">Kevin Buzzard (Jun 03 2018 at 22:31)</a>:</h4>
<p>There will be maps between different $$R$$s but in TPIL they sketch a method of how to use <code>has_coe_to_fun</code> which was designed for this purpose I guess.</p>

<a name="127518088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127518088" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127518088">Kevin Buzzard (Jun 03 2018 at 22:50)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> I am looking at the definition of f-adic ring in Wedhorn's notes (section 6.1) and he talks about a finitely-generated ideal of a ring. What's the best way of saying "there exists a finitely-generated ideal of R such that blah" in Lean, for a <code>comm_ring</code>?</p>

<a name="127518093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127518093" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127518093">Kenny Lau (Jun 03 2018 at 22:50)</a>:</h4>
<p>we have all about that in <code>linear_algebra/something</code> I think</p>

<a name="127518097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127518097" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127518097">Kenny Lau (Jun 03 2018 at 22:51)</a>:</h4>
<p>they proved that every vector space has a basis</p>

<a name="127518100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127518100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127518100">Kevin Buzzard (Jun 03 2018 at 22:51)</a>:</h4>
<p><a href="http://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf" target="_blank" title="http://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf">http://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf</a></p>

<a name="127518113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127518113" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127518113">Kevin Buzzard (Jun 03 2018 at 22:51)</a>:</h4>
<p>it's the finiteness I am interested in</p>

<a name="127518114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127518114" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127518114">Kevin Buzzard (Jun 03 2018 at 22:51)</a>:</h4>
<p>I just want a smooth way of formalizing that definition</p>

<a name="127518116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127518116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127518116">Kevin Buzzard (Jun 03 2018 at 22:51)</a>:</h4>
<p>p46 of the pdf</p>

<a name="127518117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127518117" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127518117">Kenny Lau (Jun 03 2018 at 22:51)</a>:</h4>
<p>finiteness is just either <code>fintype</code> or <code>set.finite</code></p>

<a name="127518159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127518159" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127518159">Kevin Buzzard (Jun 03 2018 at 22:52)</a>:</h4>
<p>OK I'll write something</p>

<a name="127518161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127518161" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127518161">Kevin Buzzard (Jun 03 2018 at 22:52)</a>:</h4>
<p>and then you can laugh at me :-)</p>

<a name="127518162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127518162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127518162">Kenny Lau (Jun 03 2018 at 22:52)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm">- Linear span of a set of vectors -/</span>
<span class="n">def</span> <span class="n">span</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">β</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">x</span> <span class="bp">|</span> <span class="bp">∃</span><span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">lc</span> <span class="n">α</span> <span class="n">β</span><span class="o">),</span> <span class="o">(</span><span class="bp">∀</span><span class="n">x</span><span class="err">∉</span><span class="n">s</span><span class="o">,</span> <span class="n">v</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">v</span><span class="bp">.</span><span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span><span class="n">b</span> <span class="n">a</span><span class="o">,</span> <span class="n">a</span> <span class="err">•</span> <span class="n">b</span><span class="o">)</span> <span class="o">}</span>
</pre></div>

<a name="127518164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127518164" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127518164">Kenny Lau (Jun 03 2018 at 22:52)</a>:</h4>
<p><a href="https://github.com/leanprover/mathlib/blob/master/linear_algebra/basic.lean#L122" target="_blank" title="https://github.com/leanprover/mathlib/blob/master/linear_algebra/basic.lean#L122">https://github.com/leanprover/mathlib/blob/master/linear_algebra/basic.lean#L122</a></p>

<a name="127518165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127518165" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127518165">Kevin Buzzard (Jun 03 2018 at 22:52)</a>:</h4>
<p>Oh!</p>

<a name="127518167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127518167" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127518167">Kevin Buzzard (Jun 03 2018 at 22:52)</a>:</h4>
<p>I forgot -- see you on the R thread</p>

<a name="127519719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127519719" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127519719">Kevin Buzzard (Jun 03 2018 at 23:45)</a>:</h4>
<p>Does this already have a name in mathlib:</p>

<a name="127519721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127519721" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127519721">Kevin Buzzard (Jun 03 2018 at 23:45)</a>:</h4>
<p><code>definition is_cover {X γ : Type} (U : γ → set X) := ∀ x, ∃ i, x ∈ U i</code></p>

<a name="127519834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127519834" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127519834">Kenny Lau (Jun 03 2018 at 23:49)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">compact_elim_finite_subcover</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">c</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)}</span>
  <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">compact</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">hc₁</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">t</span><span class="err">∈</span><span class="n">c</span><span class="o">,</span> <span class="n">is_open</span> <span class="n">t</span><span class="o">)</span> <span class="o">(</span><span class="n">hc₂</span> <span class="o">:</span> <span class="n">s</span> <span class="err">⊆</span> <span class="err">⋃₀</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span><span class="n">c&#39;</span><span class="err">⊆</span><span class="n">c</span><span class="o">,</span> <span class="n">finite</span> <span class="n">c&#39;</span> <span class="bp">∧</span> <span class="n">s</span> <span class="err">⊆</span> <span class="err">⋃₀</span> <span class="n">c&#39;</span> <span class="o">:=</span>
</pre></div>

<a name="127519835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127519835" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127519835">Kenny Lau (Jun 03 2018 at 23:49)</a>:</h4>
<p><a href="https://github.com/leanprover/mathlib/blob/master/analysis/topology/topological_space.lean#L475" target="_blank" title="https://github.com/leanprover/mathlib/blob/master/analysis/topology/topological_space.lean#L475">https://github.com/leanprover/mathlib/blob/master/analysis/topology/topological_space.lean#L475</a></p>

<a name="127519839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127519839" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127519839">Kevin Buzzard (Jun 03 2018 at 23:49)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">Huber_Pair</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">[</span><span class="n">is_Hring</span> <span class="o">:</span> <span class="n">Huber_ring</span> <span class="n">R</span><span class="o">]</span>
<span class="o">(</span><span class="n">Rp</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span>
<span class="o">[</span><span class="n">intel</span> <span class="o">:</span> <span class="n">is_ring_of_integral_elements</span> <span class="n">Rp</span><span class="o">]</span>

<span class="kn">structure</span> <span class="n">Huber_Pair&#39;</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">Huber_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">Rp</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span>
<span class="o">[</span><span class="n">intel</span> <span class="o">:</span> <span class="n">is_ring_of_integral_elements</span> <span class="n">Rp</span><span class="o">]</span>
</pre></div>

<a name="127519890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127519890" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127519890">Kevin Buzzard (Jun 03 2018 at 23:50)</a>:</h4>
<p>Is the first one just silly or does it ever have its uses?</p>

<a name="127519897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127519897" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127519897">Kevin Buzzard (Jun 03 2018 at 23:50)</a>:</h4>
<p>A Huber Pair is a Huber Ring plus a subring which is a ring of integral elements (i.e. satisfies a bunch of axioms)</p>

<a name="127519913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127519913" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127519913">Kevin Buzzard (Jun 03 2018 at 23:51)</a>:</h4>
<blockquote>
<p><a href="https://github.com/leanprover/mathlib/blob/master/analysis/topology/topological_space.lean#L475" target="_blank" title="https://github.com/leanprover/mathlib/blob/master/analysis/topology/topological_space.lean#L475">https://github.com/leanprover/mathlib/blob/master/analysis/topology/topological_space.lean#L475</a></p>
</blockquote>
<p><code>is_cover</code> is about as long as <code>s ⊆ ⋃₀ c</code></p>

<a name="127519915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127519915" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127519915">Kenny Lau (Jun 03 2018 at 23:52)</a>:</h4>
<p>lol</p>

<a name="127519954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127519954" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127519954">Kevin Buzzard (Jun 03 2018 at 23:52)</a>:</h4>
<p>it's all about the interface though</p>

<a name="127519974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127519974" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127519974">Kevin Buzzard (Jun 03 2018 at 23:53)</a>:</h4>
<p><code>(R⁺ : set R)</code></p>

<a name="127520012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520012" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520012">Kevin Buzzard (Jun 03 2018 at 23:54)</a>:</h4>
<p>what is this "unexpected token" error?</p>

<a name="127520018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520018" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520018">Kevin Buzzard (Jun 03 2018 at 23:54)</a>:</h4>
<p>can I PR it in somehow?</p>

<a name="127520022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520022">Kevin Buzzard (Jun 03 2018 at 23:54)</a>:</h4>
<p>hmm</p>

<a name="127520024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520024" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520024">Kevin Buzzard (Jun 03 2018 at 23:54)</a>:</h4>
<p>can I use it in notation?</p>

<a name="127520077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520077" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520077">Kevin Buzzard (Jun 03 2018 at 23:56)</a>:</h4>
<p>yes :-)</p>

<a name="127520414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520414" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520414">Kevin Buzzard (Jun 04 2018 at 00:07)</a>:</h4>
<blockquote>
<p>Is the first one just silly or does it ever have its uses?</p>
</blockquote>
<p>aargh the second one doesn't compile :-/</p>

<a name="127520418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520418" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520418">Kevin Buzzard (Jun 04 2018 at 00:07)</a>:</h4>
<p>because of type class inference woes</p>

<a name="127520461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520461" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520461">Kevin Buzzard (Jun 04 2018 at 00:08)</a>:</h4>
<p><code>definition is_ring_of_integral_elements {R : Type} [Huber_ring R] (Rplus : set R) : Prop := sorry</code></p>

<a name="127520464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520464" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520464">Kevin Buzzard (Jun 04 2018 at 00:08)</a>:</h4>
<p>needs huber ring</p>

<a name="127520514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520514" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520514">Kevin Buzzard (Jun 04 2018 at 00:10)</a>:</h4>
<p><em>boggle</em> &lt;goes back to type class woes thread&gt;</p>

<a name="127520522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520522" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520522">Reid Barton (Jun 04 2018 at 00:11)</a>:</h4>
<p>I don't understand why that would make the second one not compile</p>

<a name="127520617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520617" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520617">Kevin Buzzard (Jun 04 2018 at 00:15)</a>:</h4>
<p>no I am an idiot</p>

<a name="127520618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520618" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520618">Kevin Buzzard (Jun 04 2018 at 00:15)</a>:</h4>
<p>it works fine</p>

<a name="127520619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520619">Kevin Buzzard (Jun 04 2018 at 00:16)</a>:</h4>
<p>I am still very unsteady on my feet with typeclasses</p>

<a name="127520659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520659" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520659">Kevin Buzzard (Jun 04 2018 at 00:16)</a>:</h4>
<p>all I know is "it sometimes doesn't work" and it's something about where the colon is</p>

<a name="127520797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520797" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520797">Kevin Buzzard (Jun 04 2018 at 00:22)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">Huber_pair</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span>
<span class="o">[</span><span class="n">RHuber</span> <span class="o">:</span> <span class="n">Huber_ring</span> <span class="n">R</span><span class="o">]</span>
<span class="o">(</span><span class="n">Rplus</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span>
<span class="o">[</span><span class="n">intel</span> <span class="o">:</span> <span class="n">is_ring_of_integral_elements</span> <span class="n">Rplus</span><span class="o">]</span>
</pre></div>

<a name="127520800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520800">Kevin Buzzard (Jun 04 2018 at 00:22)</a>:</h4>
<p>This is annoying</p>

<a name="127520804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520804">Kevin Buzzard (Jun 04 2018 at 00:22)</a>:</h4>
<p>I don't think I can use type class inference to get a Huber pair structure on R, because I want the freedom to change <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">R^+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span></p>

<a name="127520809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520809" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520809">Kevin Buzzard (Jun 04 2018 at 00:23)</a>:</h4>
<p><code>postfix </code>⁺<code> : 66 := λ R : Huber_pair _, R.Rplus  </code></p>

<a name="127520813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520813">Kevin Buzzard (Jun 04 2018 at 00:23)</a>:</h4>
<p>and if I add it as a family of structures on R</p>

<a name="127520814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520814" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520814">Kevin Buzzard (Jun 04 2018 at 00:23)</a>:</h4>
<p>then I am forever having to make R and then the pair</p>

<a name="127520817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520817" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520817">Kevin Buzzard (Jun 04 2018 at 00:23)</a>:</h4>
<p>I can't just say "Let <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> be a Huber Pair" like we'd say in maths</p>

<a name="127520863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520863" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520863">Scott Morrison (Jun 04 2018 at 00:25)</a>:</h4>
<p>So, often a good solution when you want two different typeclasses on the same underlying type,</p>

<a name="127520868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520868" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520868">Scott Morrison (Jun 04 2018 at 00:25)</a>:</h4>
<p>is to use the trick that Mario showed me, of making a "wrapper".</p>

<a name="127520871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520871" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520871">Scott Morrison (Jun 04 2018 at 00:25)</a>:</h4>
<p>As an example, to define the opposite category, I use:</p>
<div class="codehilite"><pre><span></span>def op (C : Type u₁) : Type u₁ := C

notation C `ᵒᵖ` := op C

variable {C : Type u₁}
variable [𝒞 : category.{u₁ v₁} C]
include 𝒞

instance Opposite : category.{u₁ v₁} (Cᵒᵖ) := ...
</pre></div>

<a name="127520912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520912" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520912">Scott Morrison (Jun 04 2018 at 00:26)</a>:</h4>
<p>Here the idea is that <code>op C</code> is of course just <code>C</code>, "thought of" as objects of the opposite category.</p>

<a name="127520922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520922" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520922">Scott Morrison (Jun 04 2018 at 00:27)</a>:</h4>
<p>It's something mathematicians do all the time and are perfectly comfortable with, and maybe works for your Huber pairs setting, in particular when you want to change R+, but leave R alone.</p>

<a name="127520975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127520975" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127520975">Scott Morrison (Jun 04 2018 at 00:28)</a>:</h4>
<p>On the other hand, I suspect that you never ever actually want to look at an element of the <code>R</code> of a Huber pair, so making a typeclass on <code>R</code> maybe doesn't have that much value.</p>

<a name="127521056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127521056" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127521056">Kevin Buzzard (Jun 04 2018 at 00:30)</a>:</h4>
<p>I think I will forever be playing around with pi's and p's in R I think</p>

<a name="127521060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127521060" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127521060">Kevin Buzzard (Jun 04 2018 at 00:30)</a>:</h4>
<p>as I explicitly evaluate my completions etc</p>

<a name="127521063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127521063" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127521063">Scott Morrison (Jun 04 2018 at 00:31)</a>:</h4>
<p>Scratch that suggestion then!</p>

<a name="127540813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127540813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127540813">Johan Commelin (Jun 04 2018 at 11:39)</a>:</h4>
<blockquote>
<p>I can't just say "Let <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> be a Huber Pair" like we'd say in maths</p>
</blockquote>
<p>I think it is important that we try to keep this "feature". But I don't see how to implement it in Lean, and also give you the freedom to change <code>R⁺</code>.</p>

<a name="127540890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127540890" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127540890">Johan Commelin (Jun 04 2018 at 11:42)</a>:</h4>
<p>Unless we also have some postfix accessor notation for the ambient ring. So that a Huber pair <code>R</code> is <code>(R^?,R⁺)</code>. But I don't have any cute ideas for what <code>?</code> should actually be. And it is going to be annoying and offputing for mathematicians anyway.</p>

<a name="127541067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127541067" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127541067">Reid Barton (Jun 04 2018 at 11:48)</a>:</h4>
<p>Could that notation for the ambient ring just be a coercion?</p>

<a name="127541198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127541198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127541198">Reid Barton (Jun 04 2018 at 11:50)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">Huber_pair</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span>
<span class="o">[</span><span class="n">is_ring</span> <span class="o">:</span> <span class="n">ring</span> <span class="n">R</span><span class="o">]</span>
<span class="o">(</span><span class="n">Rp</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span>
<span class="o">(</span><span class="n">huber</span> <span class="o">:</span> <span class="n">true</span><span class="o">)</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_coe_to_sort</span> <span class="n">Huber_pair</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">S</span> <span class="o">:=</span> <span class="kt">Type</span><span class="o">,</span> <span class="n">coe</span> <span class="o">:=</span> <span class="n">Huber_pair</span><span class="bp">.</span><span class="n">R</span> <span class="o">}</span>

<span class="kn">instance</span> <span class="n">Huber_pair</span><span class="bp">.</span><span class="n">ring</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">:</span> <span class="n">ring</span> <span class="n">R</span> <span class="o">:=</span> <span class="n">R</span><span class="bp">.</span><span class="n">is_ring</span>
</pre></div>

<a name="127541212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127541212" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127541212">Johan Commelin (Jun 04 2018 at 11:51)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> is currently the only one who knows enough about Huber pairs to see if this will give trouble down the road.</p>

<a name="127541258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127541258" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127541258">Reid Barton (Jun 04 2018 at 11:52)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">notation</span> <span class="n">R</span> <span class="bp">`</span><span class="err">⁺</span><span class="bp">`</span><span class="o">:</span><span class="mi">99</span> <span class="o">:=</span> <span class="n">R</span><span class="bp">.</span><span class="n">Rp</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">{</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">R</span><span class="err">⁺</span><span class="o">}</span>
</pre></div>

<a name="127541260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127541260" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127541260">Reid Barton (Jun 04 2018 at 11:52)</a>:</h4>
<p>Yes, probably.</p>

<a name="127541391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127541391" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127541391">Johan Commelin (Jun 04 2018 at 11:56)</a>:</h4>
<p>So far that looks promising, I would say.</p>

<a name="127541994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127541994" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127541994">Assia Mahboubi (Jun 04 2018 at 12:14)</a>:</h4>
<p>I am trying to understand the maths a little bit more, to see if I can help. But I am a bit lost. In <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>'s  <a href="http://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf" target="_blank" title="http://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf">first ref</a>, p46 defines what an f-adic ring is, but there is no f right? Can I understand them as an I-adic ring? Then, for the question on Huber pairs. I do not understand this "pair" vocabulary yet. Can I think of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> as an ambiant (topological) ring, and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">R^+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span> as the actual interesting thing?</p>

<a name="127542016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127542016" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127542016">Johan Commelin (Jun 04 2018 at 12:15)</a>:</h4>
<p>I think both rings in a Huber pair are interesting...</p>

<a name="127542064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127542064" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127542064">Johan Commelin (Jun 04 2018 at 12:16)</a>:</h4>
<p>It is like <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi mathvariant="double-struck">Z</mi></mrow><mo>⊂</mo><mrow><mi mathvariant="double-struck">Q</mi></mrow></mrow><annotation encoding="application/x-tex">\mathbb{Z} \subset \mathbb{Q}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68889em;"></span><span class="strut bottom" style="height:0.85556em;vertical-align:-0.16667em;"></span><span class="base"><span class="mord"><span class="mord mathbb">Z</span></span><span class="mrel">⊂</span><span class="mord"><span class="mord mathbb">Q</span></span></span></span></span> on steroids.</p>

<a name="127542079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127542079" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127542079">Johan Commelin (Jun 04 2018 at 12:17)</a>:</h4>
<p>Also, I think the "f" in <em>f-adic</em> stands for finite: there is a finiteness condition in both items in the condition, first on the subset <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.13889em;">T</span></span></span></span>, and then on the ideal <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span> in the second condition of the definition.</p>

<a name="127542135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127542135" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127542135">Johan Commelin (Jun 04 2018 at 12:19)</a>:</h4>
<p>Disclaimer: I'm not an expert on this stuff. Only followed some seminars on this.</p>

<a name="127542992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127542992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127542992">Assia Mahboubi (Jun 04 2018 at 12:42)</a>:</h4>
<p>Sorry my sentence was misleading and in fact I think it was even nonsensical, as  <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>A</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">A^+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span> should be integrally closed in <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">A</span></span></span></span>.</p>

<a name="127543129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127543129" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127543129">Johan Commelin (Jun 04 2018 at 12:47)</a>:</h4>
<p><del>Don't you mean it the other way round?</del></p>

<a name="127543178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127543178" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127543178">Assia Mahboubi (Jun 04 2018 at 12:49)</a>:</h4>
<p>Thanks.</p>

<a name="127543965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127543965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127543965">Kevin Buzzard (Jun 04 2018 at 13:09)</a>:</h4>
<blockquote>
<p>I am trying to understand the maths a little bit more, to see if I can help. But I am a bit lost. In <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>'s  <a href="http://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf" target="_blank" title="http://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf">first ref</a>, p46 defines what an f-adic ring is, but there is no f right? Can I understand them as an I-adic ring? Then, for the question on Huber pairs. I do not understand this "pair" vocabulary yet. Can I think of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> as an ambiant (topological) ring, and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">R^+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span> as the actual interesting thing?</p>
</blockquote>
<p>Yes "f-adic ring" is a terrible name, there is no f, "f-adic ring" is just a ring with some structure and some axioms. In fact it's such a terrible name that Scholze proposed renaming it to "Huber ring" and that's what we're going to use in the project.</p>

<a name="127544039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127544039" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127544039">Kevin Buzzard (Jun 04 2018 at 13:10)</a>:</h4>
<p>The modern terminology is that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> is a Huber ring and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>R</mi><mo separator="true">,</mo><msup><mi>R</mi><mo>+</mo></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">(R,R^+)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:1.021331em;vertical-align:-0.25em;"></span><span class="base"><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> is a Huber pair. In the old terminology <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> is an f-adic ring and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">R^+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span> is a ring of integral elements (I guess this definition will stay)</p>

<a name="127544056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127544056" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127544056">Kevin Buzzard (Jun 04 2018 at 13:11)</a>:</h4>
<p>So many of the proofs do not care about <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">R^+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span>, but I am beginning to see more about how this is going to work. I suspect often we will not make the Huber pair -- we will just have a ring <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> and a subring <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo>+</mo></msup></mrow><annotation encoding="application/x-tex">R^+</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span></span></span></span> and do calculations with them</p>

<a name="127564051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564051">Kevin Buzzard (Jun 04 2018 at 20:19)</a>:</h4>
<p>Should I have <code>structure perfectoid_space := (X : Type) ...</code> or <code>structure perfectoid_space (X : Type) := ...</code>?</p>

<a name="127564056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564056" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564056">Kevin Buzzard (Jun 04 2018 at 20:19)</a>:</h4>
<p>I was using the latter</p>

<a name="127564063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564063" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564063">Kevin Buzzard (Jun 04 2018 at 20:19)</a>:</h4>
<p>but here's something I ran into.</p>

<a name="127564135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564135" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564135">Kevin Buzzard (Jun 04 2018 at 20:20)</a>:</h4>
<p>A perfectoid space is a topological space equipped with a presheaf of rings and satisfying a bunch of axioms.</p>

<a name="127564153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564153" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564153">Kevin Buzzard (Jun 04 2018 at 20:21)</a>:</h4>
<p>A presheaf of rings on a topological space is the assignment, for every open subset U of the topological space, of a ring <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo>(</mo><mi>U</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">F(U)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.10903em;">U</span><span class="mclose">)</span></span></span></span>, and a bit more data, and some axioms.</p>

<a name="127564242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564242" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564242">Kevin Buzzard (Jun 04 2018 at 20:23)</a>:</h4>
<p>Given a perfectoid space <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">X</span></span></span></span>, and an open subset <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10903em;">U</span></span></span></span> of the underlying topological space (which is also called <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">X</span></span></span></span>), I can pull back all the structure and get a perfectoid space structure on <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10903em;">U</span></span></span></span> (e.g. I need to associate a ring to an open subset of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10903em;">U</span></span></span></span>, but an open subset of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10903em;">U</span></span></span></span> is an open subset of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">X</span></span></span></span> so we use the presheaf of rings on <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">X</span></span></span></span> to do this).</p>

<a name="127564243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564243" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564243">Kevin Buzzard (Jun 04 2018 at 20:23)</a>:</h4>
<p>So far so good.</p>

<a name="127564264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564264" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564264">Kevin Buzzard (Jun 04 2018 at 20:23)</a>:</h4>
<p>But I was kind of expecting <code>perfectoid_space</code> to be a typeclass</p>

<a name="127564288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564288" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564288">Kevin Buzzard (Jun 04 2018 at 20:24)</a>:</h4>
<p>and (finally the question!) I don't know how to get type class inference to get us from X to U</p>

<a name="127564346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564346" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564346">Kevin Buzzard (Jun 04 2018 at 20:24)</a>:</h4>
<p>because U is an open set in X so it's not even a type</p>

<a name="127564366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564366" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564366">Kevin Buzzard (Jun 04 2018 at 20:25)</a>:</h4>
<p>and if we use the associated subtype <code>{x : X // x \in U}</code></p>

<a name="127564378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564378" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564378">Kevin Buzzard (Jun 04 2018 at 20:25)</a>:</h4>
<p>then I don't know how to say "...oh, and U needs to be open" to type class inference.</p>

<a name="127564399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564399">Kevin Buzzard (Jun 04 2018 at 20:25)</a>:</h4>
<p>In short -- if I have <code>(X : Type) [perfectoid_space X]</code></p>

<a name="127564446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564446" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564446">Kevin Buzzard (Jun 04 2018 at 20:26)</a>:</h4>
<p>(perfectoid space extends topological space)</p>

<a name="127564461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564461" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564461">Kevin Buzzard (Jun 04 2018 at 20:26)</a>:</h4>
<p>and if <code>(U : set X)</code> is open</p>

<a name="127564501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564501" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564501">Kevin Buzzard (Jun 04 2018 at 20:27)</a>:</h4>
<p>then my instance wants to look like <code>(X : Type) [perfectoid_space X] (U : set X) (HU : is_open U) : perfectoid_space {x : X // x \in U}</code></p>

<a name="127564555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564555" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564555">Kevin Buzzard (Jun 04 2018 at 20:28)</a>:</h4>
<p>"an open subset of a perfectoid space is a perfectoid space"</p>

<a name="127564574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564574">Kevin Buzzard (Jun 04 2018 at 20:28)</a>:</h4>
<p>but how is type class inference going to spot that U is open?</p>

<a name="127564631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564631" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564631">Kevin Buzzard (Jun 04 2018 at 20:29)</a>:</h4>
<p>I guess I could work with subtypes and make is_open a typeclass on them? Is this crazy? Would it even work?</p>

<a name="127564861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564861" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564861">Kevin Buzzard (Jun 04 2018 at 20:33)</a>:</h4>
<p>Or should I just give up on making perfectoid space a typeclass?</p>

<a name="127564911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127564911" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127564911">Kevin Buzzard (Jun 04 2018 at 20:34)</a>:</h4>
<p>Presumably typeclass inference only works on things which have been tagged as classes</p>

<a name="127565448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127565448" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127565448">Nicholas Scheel (Jun 04 2018 at 20:47)</a>:</h4>
<p>I would say it makes sense to make them either both typeclasses or plain structures (you can still write a function to do what you want to do with typeclass inference there, I think); perhaps it wouldn’t hurt to start with all the structure explicit, and then determine what could be converted to use typeclass machinery ...</p>

<a name="127565546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127565546" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127565546">Nicholas Scheel (Jun 04 2018 at 20:49)</a>:</h4>
<p><code>theorem perfectoid_space_on_open_set (X : Type) (U : set X) (HU : is_open U) : perfectoid_space X -&gt; perfectoid_space {x : X // x \in U}</code></p>

<a name="127565731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127565731" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127565731">Kevin Buzzard (Jun 04 2018 at 20:52)</a>:</h4>
<p>So I can prove that theorem</p>

<a name="127565739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127565739" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127565739">Kevin Buzzard (Jun 04 2018 at 20:52)</a>:</h4>
<p>my question is whether I can persuade the type class inference system to use it</p>

<a name="127565748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127565748" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127565748">Kevin Buzzard (Jun 04 2018 at 20:52)</a>:</h4>
<p>if <code>perfectoid_space</code> is a class</p>

<a name="127565756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127565756" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127565756">Kevin Buzzard (Jun 04 2018 at 20:52)</a>:</h4>
<p>and what I can't get my head around</p>

<a name="127565766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127565766" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127565766">Kevin Buzzard (Jun 04 2018 at 20:53)</a>:</h4>
<p>is how type class inference can possibly guess that a subset is open</p>

<a name="127565777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127565777" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127565777">Nicholas Scheel (Jun 04 2018 at 20:53)</a>:</h4>
<p>I agree, that’s why I think <code>is_open</code> would also have to be a typeclass</p>

<a name="127565788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127565788" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127565788">Kevin Buzzard (Jun 04 2018 at 20:53)</a>:</h4>
<p>but there is a technical problem there</p>

<a name="127565792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127565792" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127565792">Kevin Buzzard (Jun 04 2018 at 20:53)</a>:</h4>
<p>because U is not a type</p>

<a name="127565793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127565793" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127565793">Kevin Buzzard (Jun 04 2018 at 20:53)</a>:</h4>
<p>it's a term</p>

<a name="127565853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127565853" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127565853">Kevin Buzzard (Jun 04 2018 at 20:54)</a>:</h4>
<p>hmm</p>

<a name="127565857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127565857" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127565857">Kevin Buzzard (Jun 04 2018 at 20:54)</a>:</h4>
<p>I am just assuming that it's impossible to make this work</p>

<a name="127565861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127565861" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127565861">Kevin Buzzard (Jun 04 2018 at 20:54)</a>:</h4>
<p>Does it actually work?</p>

<a name="127565903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127565903" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127565903">Kevin Buzzard (Jun 04 2018 at 20:55)</a>:</h4>
<p>I somehow can't get it all to fit together but maybe it's possible</p>

<a name="127565961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127565961" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127565961">Nicholas Scheel (Jun 04 2018 at 20:56)</a>:</h4>
<p>aren’t the (ring, group) homomorphisms classes? I don’t see how a set would be much different</p>

<a name="127566151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127566151" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127566151">Nicholas Scheel (Jun 04 2018 at 21:00)</a>:</h4>
<p><code>class is_ring_hom</code></p>

<a name="127566567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127566567" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127566567">Kevin Buzzard (Jun 04 2018 at 21:11)</a>:</h4>
<p>That's true!</p>

<a name="127566572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127566572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127566572">Kevin Buzzard (Jun 04 2018 at 21:11)</a>:</h4>
<p>Maybe it all just works?</p>

<a name="127566720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127566720" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127566720">Kevin Buzzard (Jun 04 2018 at 21:14)</a>:</h4>
<p><code>variables {X : Type} [topological_space X]</code></p>

<a name="127566745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127566745" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127566745">Kevin Buzzard (Jun 04 2018 at 21:15)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">is_open</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">is_open</span> <span class="o">:</span> <span class="n">is_open</span> <span class="n">U</span><span class="o">)</span>
</pre></div>


<p>or some such thing</p>

<a name="127566800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127566800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127566800">Kevin Buzzard (Jun 04 2018 at 21:16)</a>:</h4>
<p>hmm maybe I need to think a bit about variable names...</p>

<a name="127567528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127567528" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127567528">Reid Barton (Jun 04 2018 at 21:31)</a>:</h4>
<p>You can potentially also just make <code>is_open</code> into a class, with <code>attribute [class] is_open</code> (or <code>local attribute</code>)</p>

<a name="127571664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127571664" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127571664">Kevin Buzzard (Jun 04 2018 at 23:14)</a>:</h4>
<p>I don't have time for this now but hopefully I'll be able to get to it tomorrow. Once I've resolved this I think I'm ready to go. I've been writing stuff from the top down, i.e. I have a definition of a perfectoid space but it depends on several other definitions, some of which I have and some of which I don't. Up here it feels very close to maths and looks very close to maths too.</p>

<a name="127586717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127586717" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127586717">Patrick Massot (Jun 05 2018 at 07:24)</a>:</h4>
<p>Are doing all this privately in the end?</p>

<a name="127588260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127588260" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127588260">Kevin Buzzard (Jun 05 2018 at 08:16)</a>:</h4>
<p>No not at all -- but I wanted to get the definition of perfectoid space written (modulo lots of other definitions which are not written)</p>

<a name="127588261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127588261" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127588261">Kevin Buzzard (Jun 05 2018 at 08:16)</a>:</h4>
<p>before I "went public" as it were</p>

<a name="127588263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127588263" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127588263">Kevin Buzzard (Jun 05 2018 at 08:16)</a>:</h4>
<p>I am currently struggling with type class inference issues but I think I had the same ones before</p>

<a name="127588266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127588266" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127588266">Kevin Buzzard (Jun 05 2018 at 08:16)</a>:</h4>
<p>so I will look in the old thread</p>

<a name="127589169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589169" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589169">Kevin Buzzard (Jun 05 2018 at 08:45)</a>:</h4>
<p>Patrick here's the state of things:</p>

<a name="127589172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589172" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589172">Kevin Buzzard (Jun 05 2018 at 08:45)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">adic_space</span>

<span class="c1">--notation</span>
<span class="kn">postfix</span> <span class="bp">`</span><span class="err">ᵒ</span><span class="bp">`</span> <span class="o">:</span> <span class="mi">66</span> <span class="o">:=</span> <span class="n">power_bounded_subring</span>

<span class="c">/-</span><span class="cm">- A perfectoid ring, following Fontaine Sem Bourb-/</span>
<span class="n">class</span> <span class="n">perfectoid_ring</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">is_prime</span> <span class="n">p</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">Tate_ring</span> <span class="n">R</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">is_complete</span> <span class="o">:</span> <span class="n">complete</span> <span class="n">R</span><span class="o">)</span>
<span class="o">(</span><span class="n">is_uniform</span>  <span class="o">:</span> <span class="n">uniform</span> <span class="n">R</span><span class="o">)</span>
<span class="o">(</span><span class="n">ramified</span>    <span class="o">:</span> <span class="bp">∃</span> <span class="n">ω</span> <span class="o">:</span> <span class="n">R</span> <span class="err">ᵒ</span><span class="o">,</span> <span class="o">(</span><span class="n">is_pseudo_uniformizer</span> <span class="n">ω</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">ω</span> <span class="err">^</span> <span class="n">p</span> <span class="err">∣</span> <span class="n">p</span><span class="o">))</span>
<span class="o">(</span><span class="n">Frob</span>        <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">R</span> <span class="err">ᵒ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span> <span class="err">ᵒ</span><span class="o">,</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">R</span> <span class="err">ᵒ</span><span class="o">)</span> <span class="err">∣</span> <span class="o">(</span><span class="n">b</span> <span class="err">^</span> <span class="n">p</span> <span class="bp">-</span> <span class="n">a</span><span class="o">))</span>

<span class="kn">structure</span> <span class="n">perfectoid_space</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">is_prime</span> <span class="n">p</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">adic_space</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">perfectoid_cover</span> <span class="o">:</span>
  <span class="c1">-- gamma is our indexing set, U_i are the open cover for i in gamma</span>
  <span class="bp">∃</span> <span class="o">{</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">[</span><span class="n">U_open</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">is_open</span> <span class="o">(</span><span class="n">U</span> <span class="n">i</span><span class="o">)]</span> <span class="o">(</span><span class="n">U_cover</span> <span class="o">:</span> <span class="n">is_cover</span> <span class="n">U</span><span class="o">)</span>
  <span class="c1">-- U i is isomorphic to Spa(A_i,A_i^+) with A_i a perfectoid ring</span>
  <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">(</span><span class="n">is_perfectoid</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">perfectoid_ring</span> <span class="o">(</span><span class="n">A</span> <span class="n">i</span><span class="o">)</span> <span class="n">p</span><span class="o">),</span>
  <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">is_preadic_space_equiv</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">//</span> <span class="n">x</span> <span class="err">∈</span> <span class="o">(</span><span class="n">U</span> <span class="n">i</span><span class="o">)}</span> <span class="o">(</span><span class="n">Spa</span> <span class="o">(</span><span class="n">A</span> <span class="n">i</span><span class="o">))</span>    <span class="o">)</span>
</pre></div>

<a name="127589173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589173" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589173">Kevin Buzzard (Jun 05 2018 at 08:45)</a>:</h4>
<p>doesn't quite typecheck</p>

<a name="127589195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589195" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589195">Kevin Buzzard (Jun 05 2018 at 08:46)</a>:</h4>
<p>but once it does it's very readable if you already know pretty much what a perfectoid space is</p>

<a name="127589225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589225" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589225">Kevin Buzzard (Jun 05 2018 at 08:46)</a>:</h4>
<p><code>adic_space</code> full of sorries</p>

<a name="127589233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589233" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589233">Kevin Buzzard (Jun 05 2018 at 08:46)</a>:</h4>
<p>I am in the middle of writing some long issues explaining exactly what needs to be done to finish the job, plus references</p>

<a name="127589248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589248" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589248">Kevin Buzzard (Jun 05 2018 at 08:47)</a>:</h4>
<p><code>is_preadic_space_equiv</code> extends <code>homeo</code> -- did you get that into mathlib?</p>

<a name="127589367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589367" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589367">Kevin Buzzard (Jun 05 2018 at 08:50)</a>:</h4>
<p>The problem, by the way, is <code>failed to synthesize ⊢ preadic_space {x // x ∈ U i}</code></p>

<a name="127589375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589375" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589375">Kevin Buzzard (Jun 05 2018 at 08:50)</a>:</h4>
<p><code>instance preadic_space_restriction {X : Type} [preadic_space X] {U : set X} [is_open U] :
  preadic_space {x : X // x ∈ U} := sorry</code></p>

<a name="127589393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589393">Kevin Buzzard (Jun 05 2018 at 08:52)</a>:</h4>
<p>so all the ingredients are there -- a proof that U i is open, an instance saying an open subspace of a preadic space is a preadic space, oh and adic_space extends preadic_space</p>

<a name="127589489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589489" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589489">Assia Mahboubi (Jun 05 2018 at 08:54)</a>:</h4>
<p>The  <code> ∃ {γ : Type}</code> looks very suspicious to me. Is it really what you want? And not a set of some type?</p>

<a name="127589621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589621" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589621">Scott Morrison (Jun 05 2018 at 08:58)</a>:</h4>
<p><span class="user-mention" data-user-id="110172">@Assia Mahboubi</span> , could you explain why it looks suspicious? I've seen the same sentiment expressed about similar things, but never really understood how you decide between indexing by a type, and having a set of things. The one time I tried both approaches (defining a Grothendieck topology), it eventually became clear that the set approach was smoother, but I didn't really grok why that was the case.</p>

<a name="127589634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589634" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589634">Kevin Buzzard (Jun 05 2018 at 08:58)</a>:</h4>
<p>This is supposed to say "my topological space has a cover by nice topological subspaces"</p>

<a name="127589636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589636" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589636">Kevin Buzzard (Jun 05 2018 at 08:58)</a>:</h4>
<p>but the actual cover is not part of the structure</p>

<a name="127589642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589642" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589642">Kevin Buzzard (Jun 05 2018 at 08:59)</a>:</h4>
<p>it's just the fact that such a cover exists</p>

<a name="127589657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589657">Kevin Buzzard (Jun 05 2018 at 08:59)</a>:</h4>
<p>for each <code>i : gamma</code> I need an open set U_i and a ring A_i and an isomorphism Spa(A_i) = U_i</p>

<a name="127589718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589718" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589718">Kevin Buzzard (Jun 05 2018 at 09:00)</a>:</h4>
<p>Here's a MWE of my final problem</p>

<a name="127589723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589723" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589723">Kevin Buzzard (Jun 05 2018 at 09:01)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">topology</span><span class="bp">.</span><span class="n">topological_space</span>

<span class="n">attribute</span> <span class="o">[</span><span class="n">class</span><span class="o">]</span> <span class="n">is_open</span>

<span class="n">class</span> <span class="n">preadic_space</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">topological_space</span> <span class="n">X</span>

<span class="n">class</span> <span class="n">adic_space</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">preadic_space</span> <span class="n">X</span>

<span class="kn">structure</span> <span class="n">Huber_pair</span> <span class="o">:</span> <span class="kt">Type</span>

<span class="kn">definition</span> <span class="n">Spa</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">instance</span> <span class="n">Spa_topology</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">structure</span> <span class="n">preadic_space_equiv</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">AX</span> <span class="o">:</span> <span class="n">preadic_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">AY</span> <span class="o">:</span> <span class="n">preadic_space</span> <span class="n">Y</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">equiv</span> <span class="n">X</span> <span class="n">Y</span>

<span class="kn">definition</span> <span class="n">is_preadic_space_equiv</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">AX</span> <span class="o">:</span> <span class="n">preadic_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">AY</span> <span class="o">:</span> <span class="n">preadic_space</span> <span class="n">Y</span><span class="o">]</span> <span class="o">:=</span>
  <span class="n">nonempty</span> <span class="o">(</span><span class="n">preadic_space_equiv</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span>

<span class="kn">structure</span> <span class="n">not_perfectoid_space</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">adic_space</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">perfectoid_cover</span> <span class="o">:</span>
  <span class="c1">-- gamma is our indexing set, U_i are the open cover for i in gamma</span>
  <span class="bp">∃</span> <span class="o">{</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">[</span><span class="n">U_open</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">is_open</span> <span class="o">(</span><span class="n">U</span> <span class="n">i</span><span class="o">)]</span>
  <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">Huber_pair</span><span class="o">),</span>
  <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">is_preadic_space_equiv</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">//</span> <span class="n">x</span> <span class="err">∈</span> <span class="o">(</span><span class="n">U</span> <span class="n">i</span><span class="o">)}</span> <span class="o">(</span><span class="n">Spa</span> <span class="o">(</span><span class="n">A</span> <span class="n">i</span><span class="o">)))</span>
</pre></div>

<a name="127589727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589727" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589727">Kevin Buzzard (Jun 05 2018 at 09:01)</a>:</h4>
<p>I might have just made a stupid mistake</p>

<a name="127589806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589806" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589806">Kevin Buzzard (Jun 05 2018 at 09:03)</a>:</h4>
<p>oh ignore all this I am sure I have made a stupid mistake -- my error is somewhere else now in the MWE. I just need to sort this out myself. I think I'm there but just being stupid</p>

<a name="127589859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589859" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589859">Kevin Buzzard (Jun 05 2018 at 09:04)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">topology</span><span class="bp">.</span><span class="n">topological_space</span>

<span class="n">attribute</span> <span class="o">[</span><span class="n">class</span><span class="o">]</span> <span class="n">is_open</span>

<span class="n">class</span> <span class="n">preadic_space</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">topological_space</span> <span class="n">X</span>

<span class="n">class</span> <span class="n">adic_space</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">preadic_space</span> <span class="n">X</span>

<span class="kn">structure</span> <span class="n">Huber_pair</span> <span class="o">:</span> <span class="kt">Type</span>

<span class="kn">definition</span> <span class="n">Spa</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">instance</span> <span class="n">Spa_topology</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">instance</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">:</span> <span class="n">preadic_space</span> <span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">structure</span> <span class="n">preadic_space_equiv</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">AX</span> <span class="o">:</span> <span class="n">preadic_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">AY</span> <span class="o">:</span> <span class="n">preadic_space</span> <span class="n">Y</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">equiv</span> <span class="n">X</span> <span class="n">Y</span>

<span class="kn">definition</span> <span class="n">is_preadic_space_equiv</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">AX</span> <span class="o">:</span> <span class="n">preadic_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">AY</span> <span class="o">:</span> <span class="n">preadic_space</span> <span class="n">Y</span><span class="o">]</span> <span class="o">:=</span>
  <span class="n">nonempty</span> <span class="o">(</span><span class="n">preadic_space_equiv</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span>

<span class="kn">structure</span> <span class="n">not_perfectoid_space</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">adic_space</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">perfectoid_cover</span> <span class="o">:</span>
  <span class="c1">-- gamma is our indexing set, U_i are the open cover for i in gamma</span>
  <span class="bp">∃</span> <span class="o">{</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">[</span><span class="n">U_open</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">is_open</span> <span class="o">(</span><span class="n">U</span> <span class="n">i</span><span class="o">)]</span>
  <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">Huber_pair</span><span class="o">),</span>
  <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">is_preadic_space_equiv</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">//</span> <span class="n">x</span> <span class="err">∈</span> <span class="o">(</span><span class="n">U</span> <span class="n">i</span><span class="o">)}</span> <span class="o">(</span><span class="n">Spa</span> <span class="o">(</span><span class="n">A</span> <span class="n">i</span><span class="o">)))</span>
</pre></div>

<a name="127589862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589862" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589862">Kevin Buzzard (Jun 05 2018 at 09:04)</a>:</h4>
<p><code>failed to synthesize type class instance for ⊢ preadic_space {x // x ∈ U i}</code></p>

<a name="127589865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589865" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589865">Kevin Buzzard (Jun 05 2018 at 09:04)</a>:</h4>
<p>That's my problem</p>

<a name="127589876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589876" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589876">Kevin Buzzard (Jun 05 2018 at 09:05)</a>:</h4>
<p>I think maybe type class inference doesn't know <code>U i</code> is open</p>

<a name="127589884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589884" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589884">Kevin Buzzard (Jun 05 2018 at 09:05)</a>:</h4>
<p>but I thought that <code>[U_open : ∀ i, is_open (U i)]</code> would tell it this</p>

<a name="127589885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589885" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589885">Kevin Buzzard (Jun 05 2018 at 09:06)</a>:</h4>
<p>but it might all be happening too quickly for type class inference</p>

<a name="127589932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127589932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127589932">Chris Hughes (Jun 05 2018 at 09:06)</a>:</h4>
<p>Is it because you should be using a coercion to subtype instead of this <code>{x // x ∈ U i}</code></p>

<a name="127590175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127590175" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127590175">Assia Mahboubi (Jun 05 2018 at 09:13)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> : disclaimer: I do not know what Groethendick topology is. But it is much more difficult to "combine" things which have different types. For instance, if two families are indexed using two a priori distinct types, then in order to speak about the family obtained as the union of these two, you always first have to craft a new type for the indices of this union, which will be something like the sum type of the two previous index types (phew). As opposed to offering the option, when possible, to use the union set of two sets (indexed with the same nature of datas, ie. with sets of a same type).</p>

<a name="127590308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127590308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127590308">Johan Commelin (Jun 05 2018 at 09:17)</a>:</h4>
<blockquote>
<p>This is supposed to say "my topological space has a cover by nice topological subspaces"</p>
</blockquote>
<p>You could consider <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi mathvariant="script">U</mi></mrow></mrow><annotation encoding="application/x-tex">\mathcal{U}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathcal" style="margin-right:0.09931em;">U</span></span></span></span></span> a subset of the powerset of <code>X</code>, and then demand for every <code>U : calU</code> that it is open, and that <code>calU</code> is a cover.</p>

<a name="127590358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127590358" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127590358">Johan Commelin (Jun 05 2018 at 09:18)</a>:</h4>
<p>I guess that <code>is_cover</code> is something you defined yourself. I didn't find it in mathlib.</p>

<a name="127590450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127590450" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127590450">Johan Commelin (Jun 05 2018 at 09:20)</a>:</h4>
<p><span class="user-mention" data-user-id="110172">@Assia Mahboubi</span> But with indexing sets you usually don't want to take the union (in some ambient set) right? You would want to take the disjoint union. And the mathematician in me doesn't really see why disjoint unions or sum types differ in complexity. Please enlighten this DTT newbie (-;</p>

<a name="127590761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127590761" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127590761">Kevin Buzzard (Jun 05 2018 at 09:28)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">preadic_space_restriction</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">preadic_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">}</span> <span class="o">[</span><span class="n">is_open</span> <span class="n">U</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">preadic_space</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">//</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">U</span><span class="o">}</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="127590858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127590858" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127590858">Kevin Buzzard (Jun 05 2018 at 09:31)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">topology</span><span class="bp">.</span><span class="n">topological_space</span>

<span class="n">attribute</span> <span class="o">[</span><span class="n">class</span><span class="o">]</span> <span class="n">is_open</span>

<span class="n">class</span> <span class="n">preadic_space</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">topological_space</span> <span class="n">X</span>

<span class="n">class</span> <span class="n">adic_space</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">preadic_space</span> <span class="n">X</span>

<span class="kn">structure</span> <span class="n">Huber_pair</span> <span class="o">:</span> <span class="kt">Type</span>

<span class="kn">definition</span> <span class="n">Spa</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">instance</span> <span class="n">Spa_topology</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">instance</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">:</span> <span class="n">preadic_space</span> <span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">structure</span> <span class="n">preadic_space_equiv</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">AX</span> <span class="o">:</span> <span class="n">preadic_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">AY</span> <span class="o">:</span> <span class="n">preadic_space</span> <span class="n">Y</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">equiv</span> <span class="n">X</span> <span class="n">Y</span>

<span class="kn">definition</span> <span class="n">is_preadic_space_equiv</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">AX</span> <span class="o">:</span> <span class="n">preadic_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">AY</span> <span class="o">:</span> <span class="n">preadic_space</span> <span class="n">Y</span><span class="o">]</span> <span class="o">:=</span>
  <span class="n">nonempty</span> <span class="o">(</span><span class="n">preadic_space_equiv</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span>

<span class="kn">instance</span> <span class="n">preadic_space_restriction</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">preadic_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">}</span> <span class="o">[</span><span class="n">is_open</span> <span class="n">U</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">preadic_space</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">//</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">U</span><span class="o">}</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">structure</span> <span class="n">test</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">adic_space</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">loc</span><span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">[</span><span class="n">U_open</span> <span class="o">:</span> <span class="n">is_open</span> <span class="n">U</span><span class="o">]</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">),</span>
  <span class="n">is_preadic_space_equiv</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">//</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">U</span><span class="o">}</span> <span class="o">(</span><span class="n">Spa</span> <span class="o">(</span><span class="n">A</span><span class="o">)))</span>  <span class="c1">-- fails ⊢ preadic_space {x // x ∈ U}</span>
</pre></div>

<a name="127590861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127590861" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127590861">Johan Commelin (Jun 05 2018 at 09:31)</a>:</h4>
<p>Kevin, isn't there some coercion that turns <code>U</code> into a (sub)type? Because <code>{x : X // x ∈ U}</code> is really weird to a mathematician. (I understand that you are having troubles here... but I think we should aim to get rid of that expression in the end.)</p>

<a name="127590922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127590922" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127590922">Kevin Buzzard (Jun 05 2018 at 09:33)</a>:</h4>
<p>We can't have everything</p>

<a name="127590977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127590977" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127590977">Kevin Buzzard (Jun 05 2018 at 09:34)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">topology</span><span class="bp">.</span><span class="n">topological_space</span>

<span class="n">attribute</span> <span class="o">[</span><span class="n">class</span><span class="o">]</span> <span class="n">is_open</span>

<span class="n">class</span> <span class="n">preadic_space</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">topological_space</span> <span class="n">X</span>

<span class="n">class</span> <span class="n">adic_space</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">preadic_space</span> <span class="n">X</span>

<span class="kn">structure</span> <span class="n">Huber_pair</span> <span class="o">:</span> <span class="kt">Type</span>

<span class="kn">definition</span> <span class="n">Spa</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">instance</span> <span class="n">Spa_topology</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">instance</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">:</span> <span class="n">preadic_space</span> <span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">structure</span> <span class="n">preadic_space_equiv</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">AX</span> <span class="o">:</span> <span class="n">preadic_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">AY</span> <span class="o">:</span> <span class="n">preadic_space</span> <span class="n">Y</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">equiv</span> <span class="n">X</span> <span class="n">Y</span>

<span class="kn">definition</span> <span class="n">is_preadic_space_equiv</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">AX</span> <span class="o">:</span> <span class="n">preadic_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">AY</span> <span class="o">:</span> <span class="n">preadic_space</span> <span class="n">Y</span><span class="o">]</span> <span class="o">:=</span>
  <span class="n">nonempty</span> <span class="o">(</span><span class="n">preadic_space_equiv</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span>

<span class="kn">instance</span> <span class="n">preadic_space_restriction</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">preadic_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">}</span> <span class="o">[</span><span class="n">is_open</span> <span class="n">U</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">preadic_space</span> <span class="n">U</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">structure</span> <span class="n">test</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">adic_space</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">loc</span><span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">[</span><span class="n">U_open</span> <span class="o">:</span> <span class="n">is_open</span> <span class="n">U</span><span class="o">]</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">),</span>
  <span class="n">is_preadic_space_equiv</span> <span class="n">U</span> <span class="o">(</span><span class="n">Spa</span> <span class="o">(</span><span class="n">A</span><span class="o">)))</span>  <span class="c1">-- fails ⊢ preadic_space ↥U</span>
</pre></div>

<a name="127590986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127590986" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127590986">Johan Commelin (Jun 05 2018 at 09:35)</a>:</h4>
<p>Right, so the issue remains...</p>

<a name="127590992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127590992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127590992">Johan Commelin (Jun 05 2018 at 09:35)</a>:</h4>
<p>Which is really annoying.</p>

<a name="127591056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127591056" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127591056">Kevin Buzzard (Jun 05 2018 at 09:37)</a>:</h4>
<p>Now we have weird arrows</p>

<a name="127591057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127591057" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127591057">Kevin Buzzard (Jun 05 2018 at 09:37)</a>:</h4>
<p>I'm sure it can be fixed. The only reason I'm chatting about this at all is that Patrick wanted to know what was going on</p>

<a name="127591062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127591062" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127591062">Kevin Buzzard (Jun 05 2018 at 09:37)</a>:</h4>
<p>It would be a shame to have to start going on about letI or whatever</p>

<a name="127591071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127591071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127591071">Kevin Buzzard (Jun 05 2018 at 09:37)</a>:</h4>
<p>My problem, i now realise, is that whilst Mario showed me how to overcome various typeclass inference issues in the schemes project</p>

<a name="127591111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127591111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127591111">Kevin Buzzard (Jun 05 2018 at 09:38)</a>:</h4>
<p>I don't actually understand what is going on</p>

<a name="127591120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127591120" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127591120">Kevin Buzzard (Jun 05 2018 at 09:38)</a>:</h4>
<p>I don't understand what the "type class inference machine" has access to at any time</p>

<a name="127591125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127591125" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127591125">Kevin Buzzard (Jun 05 2018 at 09:38)</a>:</h4>
<p>For example I am not even sure if it knows X is an adic space</p>

<a name="127591240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127591240" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127591240">Johan Commelin (Jun 05 2018 at 09:41)</a>:</h4>
<p>Kevin, the first lines of the error are:</p>
<div class="codehilite"><pre><span></span><span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="n">class</span> <span class="kn">instance</span> <span class="n">for</span>
<span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">,</span>
<span class="n">to_adic_space</span> <span class="o">:</span> <span class="n">adic_space</span> <span class="n">X</span><span class="o">,</span>
<span class="n">to_preadic_space</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">adic_space</span> <span class="n">X</span><span class="o">),</span> <span class="n">preadic_space</span> <span class="n">X</span><span class="o">)</span> <span class="n">to_adic_space</span> <span class="o">:=</span> <span class="n">adic_space</span><span class="bp">.</span><span class="n">to_preadic_space</span> <span class="n">X</span><span class="o">,</span>
</pre></div>


<p>That last line shows how to turn <code>X</code> into a <code>preadic_space</code>.</p>

<a name="127591242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127591242" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127591242">Johan Commelin (Jun 05 2018 at 09:41)</a>:</h4>
<p>But it hasn't actually done it!</p>

<a name="127591287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127591287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127591287">Johan Commelin (Jun 05 2018 at 09:42)</a>:</h4>
<p>Maybe if that term was actually an instance, then the machine would do the rest for you.</p>

<a name="127591424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127591424" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127591424">Johan Commelin (Jun 05 2018 at 09:46)</a>:</h4>
<p>Hmm, no. Because if I change the class of <code>X</code> to <code>adic_space</code> in <code>preadic_space_restriction</code>, then it still fails in <code>test</code>.</p>

<a name="127592068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127592068" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127592068">Kevin Buzzard (Jun 05 2018 at 10:07)</a>:</h4>
<p>It's very easy to get Lean to say things like "I know <code>X : Y</code> and type class inference is failing to find anything of type <code>Y</code>"</p>

<a name="127593408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127593408" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127593408">Johan Commelin (Jun 05 2018 at 10:49)</a>:</h4>
<p>Do we know of any strategy for attacking this issue? Or should we wait 3 weeks till Mario and Johannes are back?</p>

<a name="127594010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127594010" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127594010">Johan Commelin (Jun 05 2018 at 11:05)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">test</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">adic_space</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">loc</span><span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">[</span><span class="n">U_open</span> <span class="o">:</span> <span class="n">is_open</span> <span class="n">U</span><span class="o">]</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">),</span>
  <span class="bp">@</span><span class="n">is_preadic_space_equiv</span> <span class="n">U</span> <span class="o">(</span><span class="n">Spa</span> <span class="o">(</span><span class="n">A</span><span class="o">))</span> <span class="o">(</span><span class="bp">@</span><span class="n">preadic_space_restriction</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">U</span> <span class="n">U_open</span><span class="o">)</span> <span class="bp">_</span><span class="o">)</span>
</pre></div>


<p>The trouble is with <code>U_open</code>. If I replace that with an <code>_</code>, then typeclass inference can't figure it out itself...</p>

<a name="127594207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127594207" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127594207">Johan Commelin (Jun 05 2018 at 11:10)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="c1">--failed to synthesize type class instance for</span>
<span class="err">⊢</span> <span class="bp">_</span><span class="n">root_</span><span class="bp">.</span><span class="n">is_open</span> <span class="n">U</span>
</pre></div>


<p>Is <code>_root_</code> a pointer to the trouble?</p>

<a name="127594781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127594781" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127594781">Kevin Buzzard (Jun 05 2018 at 11:26)</a>:</h4>
<p>Maybe. Kenny pointed this out to me too. There's a long typeclass thread which might solve my problems.</p>

<a name="127594789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127594789" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127594789">Kevin Buzzard (Jun 05 2018 at 11:27)</a>:</h4>
<p>Kenny suggested making another typeclass for subtypes being open</p>

<a name="127594794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127594794" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127594794">Johan Commelin (Jun 05 2018 at 11:28)</a>:</h4>
<p>I don't see why that would fix things...</p>

<a name="127594838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127594838" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127594838">Johan Commelin (Jun 05 2018 at 11:28)</a>:</h4>
<p>The stupid system is looking in the root namespace for an instance of <code>is_open U</code>, but it should just look 2 lines up in the local context...</p>

<a name="127594847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127594847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127594847">Johan Commelin (Jun 05 2018 at 11:29)</a>:</h4>
<p>It feels very much like a bug to me. (Wait. I'll first run this with <code>pp.all</code> set to true.)</p>

<a name="127595002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595002" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595002">Johan Commelin (Jun 05 2018 at 11:33)</a>:</h4>
<p>Ok, so this is another (ugly) way to get it to work.</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">test</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">adic_space</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">loc</span><span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">[</span><span class="n">U_open</span> <span class="o">:</span> <span class="bp">@_</span><span class="n">root_</span><span class="bp">.</span><span class="n">is_open</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">X</span> <span class="bp">_</span> <span class="n">U</span><span class="o">]</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">),</span>
  <span class="n">is_preadic_space_equiv</span> <span class="n">U</span> <span class="o">(</span><span class="n">Spa</span> <span class="o">(</span><span class="n">A</span><span class="o">)))</span>
</pre></div>

<a name="127595071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595071">Kevin Buzzard (Jun 05 2018 at 11:34)</a>:</h4>
<p>I doubt it's a bug.</p>

<a name="127595074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595074" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595074">Kevin Buzzard (Jun 05 2018 at 11:34)</a>:</h4>
<p>It's probably just how typeclass inference works</p>

<a name="127595075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595075" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595075">Johan Commelin (Jun 05 2018 at 11:34)</a>:</h4>
<p>Yes, I also think that now.</p>

<a name="127595093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595093" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595093">Johan Commelin (Jun 05 2018 at 11:35)</a>:</h4>
<p>So, what the heck is the difference between <code>@_root_.is_open.{0} X _ U</code> and <code>is_open U</code>?</p>

<a name="127595234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595234" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595234">Johan Commelin (Jun 05 2018 at 11:39)</a>:</h4>
<p>One more golf (<span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>):</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">test</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">adic_space</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">loc</span><span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">[</span><span class="n">U_open</span> <span class="o">:</span> <span class="bp">_</span><span class="n">root_</span><span class="bp">.</span><span class="n">is_open</span> <span class="n">U</span><span class="o">]</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">),</span>
  <span class="n">is_preadic_space_equiv</span> <span class="n">U</span> <span class="o">(</span><span class="n">Spa</span> <span class="o">(</span><span class="n">A</span><span class="o">)))</span>
</pre></div>

<a name="127595282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595282" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595282">Johan Commelin (Jun 05 2018 at 11:40)</a>:</h4>
<p>So it really is about this <code>_root_</code> thingy. But at least now it looks somewhat readable again.</p>

<a name="127595308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595308">Johan Commelin (Jun 05 2018 at 11:41)</a>:</h4>
<p>Of course a mathematician (like me!) doesn't know at all what <code>_root_</code> means, or what it is doing there. But hey! Cargo cult proofs for the win (-;</p>

<a name="127595461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595461" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595461">Gabriel Ebner (Jun 05 2018 at 11:45)</a>:</h4>
<p>The problem is that <code>is_open</code> refers to two things here: the inherited field <code>topological_space.is_open</code> and the global definition <code>_root_.is_open</code>, which are different.</p>

<a name="127595510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595510" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595510">Johan Commelin (Jun 05 2018 at 11:46)</a>:</h4>
<p>Aah, because of a long chain of <code>extends</code>, right?</p>

<a name="127595521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595521" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595521">Johan Commelin (Jun 05 2018 at 11:47)</a>:</h4>
<p>Right, that makes a lot (<em>a whole lot</em>!) of sense</p>

<a name="127595527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595527" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595527">Johan Commelin (Jun 05 2018 at 11:47)</a>:</h4>
<p>It has been staring us right in the face, all the time.</p>

<a name="127595542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595542" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595542">Johan Commelin (Jun 05 2018 at 11:47)</a>:</h4>
<p>So it is just some stupid overloading, and preferably one of the two <code>is_open</code>s should have another name.</p>

<a name="127595874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595874" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595874">Johan Commelin (Jun 05 2018 at 11:56)</a>:</h4>
<p>Anyway, <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> thanks for enlightening me!</p>

<a name="127595894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595894" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595894">Johan Commelin (Jun 05 2018 at 11:57)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> 'nother problem solved. Next!</p>

<a name="127595943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595943" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595943">Kevin Buzzard (Jun 05 2018 at 11:58)</a>:</h4>
<p>Definition currently looks like this:</p>

<a name="127595944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595944" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595944">Kevin Buzzard (Jun 05 2018 at 11:58)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">perfectoid_space</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">is_prime</span> <span class="n">p</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">adic_space</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">perfectoid_cover</span> <span class="o">:</span>
  <span class="c1">-- gamma is our indexing set, U_i are the open cover for i in gamma</span>
  <span class="bp">∃</span> <span class="o">{</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">[</span><span class="n">Uopen</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="bp">@_</span><span class="n">root_</span><span class="bp">.</span><span class="n">is_open</span> <span class="n">X</span> <span class="bp">_</span> <span class="o">(</span><span class="n">U</span> <span class="n">i</span><span class="o">)]</span> <span class="o">(</span><span class="n">U_cover</span> <span class="o">:</span> <span class="n">is_cover</span> <span class="n">U</span><span class="o">)</span>
  <span class="c1">-- U i is isomorphic to Spa(A_i,A_i^+) with A_i a perfectoid ring</span>
  <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">(</span><span class="n">is_perfectoid</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">perfectoid_ring</span> <span class="o">(</span><span class="n">A</span> <span class="n">i</span><span class="o">)</span> <span class="n">p</span><span class="o">),</span>
  <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">is_preadic_space_equiv</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">//</span> <span class="n">x</span> <span class="err">∈</span> <span class="o">(</span><span class="n">U</span> <span class="n">i</span><span class="o">)}</span> <span class="o">(</span><span class="n">Spa</span> <span class="o">(</span><span class="n">A</span> <span class="n">i</span><span class="o">))</span>    <span class="o">)</span>
</pre></div>

<a name="127595948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595948" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595948">Kevin Buzzard (Jun 05 2018 at 11:59)</a>:</h4>
<p>Typechecks fine</p>

<a name="127595956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595956" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595956">Kevin Buzzard (Jun 05 2018 at 11:59)</a>:</h4>
<p>The <code>is_open</code> overloading is one thing</p>

<a name="127595957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595957" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595957">Johan Commelin (Jun 05 2018 at 11:59)</a>:</h4>
<p>I guess you can remove the <code>@</code> and the <code>X _ </code></p>

<a name="127595959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595959" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595959">Kevin Buzzard (Jun 05 2018 at 11:59)</a>:</h4>
<p>yes</p>

<a name="127595960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127595960" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127595960">Kevin Buzzard (Jun 05 2018 at 12:00)</a>:</h4>
<p>thanks</p>

<a name="127596017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127596017" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127596017">Johan Commelin (Jun 05 2018 at 12:00)</a>:</h4>
<p>And just a <code>(U i)</code> on the last line? Instead of all the <code>{x ... }</code></p>

<a name="127596119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127596119" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127596119">Kevin Buzzard (Jun 05 2018 at 12:03)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">perfectoid_space</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">is_prime</span> <span class="n">p</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">adic_space</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">perfectoid_cover</span> <span class="o">:</span>
  <span class="c1">-- gamma is our indexing set, U_i are the open cover for i in gamma</span>
  <span class="bp">∃</span> <span class="o">{</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">[</span><span class="n">Uopen</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="bp">_</span><span class="n">root_</span><span class="bp">.</span><span class="n">is_open</span> <span class="o">(</span><span class="n">U</span> <span class="n">i</span><span class="o">)]</span> <span class="o">(</span><span class="n">U_cover</span> <span class="o">:</span> <span class="n">is_cover</span> <span class="n">U</span><span class="o">)</span>
  <span class="c1">-- U i is isomorphic to Spa(A_i,A_i^+) with A_i a perfectoid ring</span>
  <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">(</span><span class="n">is_perfectoid</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">perfectoid_ring</span> <span class="o">(</span><span class="n">A</span> <span class="n">i</span><span class="o">)</span> <span class="n">p</span><span class="o">),</span>
  <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">is_preadic_space_equiv</span> <span class="o">(</span><span class="n">U</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">Spa</span> <span class="o">(</span><span class="n">A</span> <span class="n">i</span><span class="o">))</span>    <span class="o">)</span>
</pre></div>

<a name="127596120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127596120" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127596120">Kevin Buzzard (Jun 05 2018 at 12:03)</a>:</h4>
<p>I'm not happy with that <code>_root_</code> but everything else is great</p>

<a name="127596124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127596124" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127596124">Johan Commelin (Jun 05 2018 at 12:03)</a>:</h4>
<p>Yes, completely agree.</p>

<a name="127596126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127596126" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127596126">Johan Commelin (Jun 05 2018 at 12:03)</a>:</h4>
<p>We should just overhaul the definition in <code>topological_space.lean</code></p>

<a name="127596168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127596168" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127596168">Johan Commelin (Jun 05 2018 at 12:04)</a>:</h4>
<p>It's only a silly namespacing issue.</p>

<a name="127596174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127596174" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127596174">Johan Commelin (Jun 05 2018 at 12:04)</a>:</h4>
<p>I it has a field <code>open_subsets</code> instead of <code>is_open</code>, then we're fine.</p>

<a name="127596190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127596190" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127596190">Kevin Buzzard (Jun 05 2018 at 12:05)</a>:</h4>
<p>can I fix this by writing my own <code>open</code> or <code>is_open'</code> or whatever?</p>

<a name="127596248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127596248" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127596248">Reid Barton (Jun 05 2018 at 12:06)</a>:</h4>
<p>Probably even <code>notation `is_open` := _root_.is_open</code> would work</p>

<a name="127596251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127596251" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127596251">Kevin Buzzard (Jun 05 2018 at 12:06)</a>:</h4>
<p>Here's the full file</p>

<a name="127596253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127596253" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127596253">Kevin Buzzard (Jun 05 2018 at 12:06)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">adic_space</span>

<span class="c1">--notation</span>
<span class="kn">postfix</span> <span class="bp">`</span><span class="err">ᵒ</span><span class="bp">`</span> <span class="o">:</span> <span class="mi">66</span> <span class="o">:=</span> <span class="n">power_bounded_subring</span>

<span class="c">/-</span><span class="cm">- A perfectoid ring, following Fontaine Sem Bourb-/</span>
<span class="n">class</span> <span class="n">perfectoid_ring</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">is_prime</span> <span class="n">p</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">Tate_ring</span> <span class="n">R</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">is_complete</span> <span class="o">:</span> <span class="n">complete</span> <span class="n">R</span><span class="o">)</span>
<span class="o">(</span><span class="n">is_uniform</span>  <span class="o">:</span> <span class="n">uniform</span> <span class="n">R</span><span class="o">)</span>
<span class="o">(</span><span class="n">ramified</span>    <span class="o">:</span> <span class="bp">∃</span> <span class="n">ω</span> <span class="o">:</span> <span class="n">R</span> <span class="err">ᵒ</span><span class="o">,</span> <span class="o">(</span><span class="n">is_pseudo_uniformizer</span> <span class="n">ω</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">ω</span> <span class="err">^</span> <span class="n">p</span> <span class="err">∣</span> <span class="n">p</span><span class="o">))</span>
<span class="o">(</span><span class="n">Frob</span>        <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">R</span> <span class="err">ᵒ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span> <span class="err">ᵒ</span><span class="o">,</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">R</span> <span class="err">ᵒ</span><span class="o">)</span> <span class="err">∣</span> <span class="o">(</span><span class="n">b</span> <span class="err">^</span> <span class="n">p</span> <span class="bp">-</span> <span class="n">a</span><span class="o">))</span>

<span class="kn">structure</span> <span class="n">perfectoid_space</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">is_prime</span> <span class="n">p</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">adic_space</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">perfectoid_cover</span> <span class="o">:</span>
  <span class="c1">-- gamma is our indexing set, U_i are the open cover for i in gamma</span>
  <span class="bp">∃</span> <span class="o">{</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">[</span><span class="n">Uopen</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="bp">_</span><span class="n">root_</span><span class="bp">.</span><span class="n">is_open</span> <span class="o">(</span><span class="n">U</span> <span class="n">i</span><span class="o">)]</span> <span class="o">(</span><span class="n">U_cover</span> <span class="o">:</span> <span class="n">is_cover</span> <span class="n">U</span><span class="o">)</span>
  <span class="c1">-- U i is isomorphic to Spa(A_i,A_i^+) with A_i a perfectoid ring</span>
  <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">(</span><span class="n">is_perfectoid</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">perfectoid_ring</span> <span class="o">(</span><span class="n">A</span> <span class="n">i</span><span class="o">)</span> <span class="n">p</span><span class="o">),</span>
  <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">is_preadic_space_equiv</span> <span class="o">(</span><span class="n">U</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">Spa</span> <span class="o">(</span><span class="n">A</span> <span class="n">i</span><span class="o">))</span>    <span class="o">)</span>
</pre></div>

<a name="127596266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127596266" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127596266">Kevin Buzzard (Jun 05 2018 at 12:07)</a>:</h4>
<p>I am really happy with all of it apart from the <code>_root_</code></p>

<a name="127596272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127596272" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127596272">Reid Barton (Jun 05 2018 at 12:07)</a>:</h4>
<p>Some mathlib classes have the actual field name with a trailing <code>'</code> to avoid this kind of collision</p>

<a name="127596317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127596317" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127596317">Reid Barton (Jun 05 2018 at 12:08)</a>:</h4>
<p>except now I can't find any</p>

<a name="127599582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127599582" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127599582">Johan Commelin (Jun 05 2018 at 13:18)</a>:</h4>
<blockquote>
<p>can I fix this by writing my own <code>open</code> or <code>is_open'</code> or whatever?</p>
</blockquote>
<p>Sure, but you would also need all the simp-lemmas etc. That's why I suggested we might as well overhaul <code>topological_space.lean</code>.</p>

<a name="127599673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127599673" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127599673">Johan Commelin (Jun 05 2018 at 13:20)</a>:</h4>
<p>And we have 6 commits! The game is on!</p>

<a name="127600758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127600758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127600758">Johan Commelin (Jun 05 2018 at 13:41)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> What is your git workflow for this repo? fork -&gt; feature branch -&gt; push? Or just write access for everyone interested?</p>

<a name="127602811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127602811" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127602811">Kevin Buzzard (Jun 05 2018 at 14:19)</a>:</h4>
<p>Yeah, it should run. I have absolutely no idea about git workflows.</p>

<a name="127602911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127602911" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127602911">Kevin Buzzard (Jun 05 2018 at 14:21)</a>:</h4>
<p>I guess I do understand the question. For the stacks project I just let Kenny push anything -- I gave him write access. But for mathlib I have to do that fork feature push thing.</p>

<a name="127605457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127605457" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127605457">Johan Commelin (Jun 05 2018 at 15:11)</a>:</h4>
<p>Ok, so this is your chance to level-up in git!</p>

<a name="127607754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127607754" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127607754">Kevin Buzzard (Jun 05 2018 at 16:00)</a>:</h4>
<p>Next job is the roadmap. I'll hopefully do this this evening (some issues explaining what needs to be done). Basically it's "type in a bunch of stuff from Wedhorn's paper"</p>

<a name="127607824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127607824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127607824">Kevin Buzzard (Jun 05 2018 at 16:00)</a>:</h4>
<p>Kenny did chapter 1 but I'm sitting on it because it needs some non-mathlib imports</p>

<a name="127610418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127610418" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127610418">Johan Commelin (Jun 05 2018 at 16:56)</a>:</h4>
<p>I like it that you moved the <code>_root_</code> issue out of the perfectoid file</p>

<a name="127616339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127616339" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127616339">Patrick Massot (Jun 05 2018 at 19:00)</a>:</h4>
<p>I'm sorry I missed this early fight. I was busy with administration all day (including writing letter to Jean-Pierre Serre explaining how to come to our new math building next week).</p>

<a name="127616361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127616361" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127616361">Patrick Massot (Jun 05 2018 at 19:01)</a>:</h4>
<p>Is there a reason why <code>perfectoid_spaces.lean</code> is not inside the <code>src</code> directory?</p>

<a name="127616450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127616450" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127616450">Patrick Massot (Jun 05 2018 at 19:02)</a>:</h4>
<blockquote>
<p>Yeah, it should run. I have absolutely no idea about git workflows.</p>
</blockquote>
<p>Did you try using <a href="https://github.com/jlord/git-it-electron" target="_blank" title="https://github.com/jlord/git-it-electron">https://github.com/jlord/git-it-electron</a> to learn? I never tried but it seems to be popular</p>

<a name="127617146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617146" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617146">Patrick Massot (Jun 05 2018 at 19:16)</a>:</h4>
<p>Why not using ϖ (\varpi)?</p>

<a name="127617158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617158" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617158">Patrick Massot (Jun 05 2018 at 19:16)</a>:</h4>
<p>Here it looks ugly but in my VScode it looks ok</p>

<a name="127617235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617235" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617235">Patrick Massot (Jun 05 2018 at 19:18)</a>:</h4>
<p>Why the space in <code>R ᵒ</code>? It works fine and looks better as <code>Rᵒ</code></p>

<a name="127617242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617242" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617242">Patrick Massot (Jun 05 2018 at 19:18)</a>:</h4>
<p>I'm such an expert about perfectoid spaces now...</p>

<a name="127617264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617264" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617264">Patrick Massot (Jun 05 2018 at 19:19)</a>:</h4>
<p>Is <code>instance subring_to_ring (R : Type) : has_coe (power_bounded_subring R) R := ⟨subtype.val⟩</code> meant to be useful right now? Deleting it changes nothing</p>

<a name="127617602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617602" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617602">Patrick Massot (Jun 05 2018 at 19:27)</a>:</h4>
<p>Is there any reason to use gamma instead of iota for the indexing type?</p>

<a name="127617609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617609" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617609">Kevin Buzzard (Jun 05 2018 at 19:27)</a>:</h4>
<p>no</p>

<a name="127617613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617613" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617613">Patrick Massot (Jun 05 2018 at 19:27)</a>:</h4>
<p>iota is the mathlib tradition, and consistent with using <code>i</code> as a variable name</p>

<a name="127617619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617619">Kevin Buzzard (Jun 05 2018 at 19:27)</a>:</h4>
<p>OK</p>

<a name="127617622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617622" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617622">Patrick Massot (Jun 05 2018 at 19:27)</a>:</h4>
<p>I guess the thing is never named in math papers</p>

<a name="127617623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617623" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617623">Kevin Buzzard (Jun 05 2018 at 19:27)</a>:</h4>
<p>I can change all these things. Thanks for the review!</p>

<a name="127617632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617632" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617632">Patrick Massot (Jun 05 2018 at 19:28)</a>:</h4>
<p>Now, serious question:</p>

<a name="127617674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617674" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617674">Kevin Buzzard (Jun 05 2018 at 19:28)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>∐</mo><msub><mi>R</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\coprod R_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="base"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∐</span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span></p>

<a name="127617677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617677" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617677">Kevin Buzzard (Jun 05 2018 at 19:28)</a>:</h4>
<p>who needs a name for the index set</p>

<a name="127617679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617679" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617679">Kevin Buzzard (Jun 05 2018 at 19:28)</a>:</h4>
<p>maybe I'll call it <code>_</code></p>

<a name="127617683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617683" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617683">Mario Carneiro (Jun 05 2018 at 19:28)</a>:</h4>
<p>You should not use existential quantification over <code>Type</code> in your definition</p>

<a name="127617688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617688" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617688">Kevin Buzzard (Jun 05 2018 at 19:28)</a>:</h4>
<p>eew</p>

<a name="127617691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617691" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617691">Mario Carneiro (Jun 05 2018 at 19:28)</a>:</h4>
<p>for the index set</p>

<a name="127617695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617695" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617695">Kevin Buzzard (Jun 05 2018 at 19:28)</a>:</h4>
<p>Is this the thing Assia was also unhappy about?</p>

<a name="127617699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617699" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617699">Mario Carneiro (Jun 05 2018 at 19:28)</a>:</h4>
<p>Yes</p>

<a name="127617702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617702" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617702">Patrick Massot (Jun 05 2018 at 19:28)</a>:</h4>
<p>What about this strange way of putting things before and after the existential comma?</p>

<a name="127617707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617707" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617707">Mario Carneiro (Jun 05 2018 at 19:29)</a>:</h4>
<p>It will needlessly push up the universe level of the definition</p>

<a name="127617712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617712" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617712">Kevin Buzzard (Jun 05 2018 at 19:29)</a>:</h4>
<p>How do you do it then?</p>

<a name="127617715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617715" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617715">Patrick Massot (Jun 05 2018 at 19:29)</a>:</h4>
<p>And why naming instance implicit variables you don't use in the def?</p>

<a name="127617722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617722" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617722">Reid Barton (Jun 05 2018 at 19:29)</a>:</h4>
<p>Even though it's inside an <code>\ex</code>?</p>

<a name="127617723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617723" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617723">Mario Carneiro (Jun 05 2018 at 19:29)</a>:</h4>
<p>Instead you should quantify over all families that could possibly matter</p>

<a name="127617724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617724" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617724">Patrick Massot (Jun 05 2018 at 19:29)</a>:</h4>
<p>What about:</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">perfectoid_space</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">is_prime</span> <span class="n">p</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">adic_space</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">perfectoid_cover</span> <span class="o">:</span>
  <span class="c1">-- gamma is our indexing set, U_i are the open cover for i in gamma</span>
  <span class="bp">∃</span> <span class="o">(</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">[</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">is_open</span> <span class="o">(</span><span class="n">U</span> <span class="n">i</span><span class="o">)]</span>
  <span class="c1">-- U i is isomorphic to Spa(A_i,A_i^+) with A_i a perfectoid ring</span>
  <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">[</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">perfectoid_ring</span> <span class="o">(</span><span class="n">A</span> <span class="n">i</span><span class="o">)</span> <span class="n">p</span><span class="o">],</span>
  <span class="o">(</span><span class="n">is_cover</span> <span class="n">U</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">is_preadic_space_equiv</span> <span class="o">(</span><span class="n">U</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">Spa</span> <span class="o">(</span><span class="n">A</span> <span class="n">i</span><span class="o">)))</span>
</pre></div>

<a name="127617732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617732" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617732">Patrick Massot (Jun 05 2018 at 19:29)</a>:</h4>
<p>Does it make any difference (what I wrote vs Kevin's version)?</p>

<a name="127617793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617793" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617793">Mario Carneiro (Jun 05 2018 at 19:30)</a>:</h4>
<p>oh, actually reid you're right, impredicativity makes it okay</p>

<a name="127617805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617805" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617805">Patrick Massot (Jun 05 2018 at 19:30)</a>:</h4>
<p>Note that all data and instance implicit stuff is left of comma, and conditions are right of comma</p>

<a name="127617809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617809" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617809">Mario Carneiro (Jun 05 2018 at 19:30)</a>:</h4>
<p>Still, I would prefer to quantify over subsets of set X</p>

<a name="127617820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617820" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617820">Gabriel Ebner (Jun 05 2018 at 19:30)</a>:</h4>
<p>Maybe you should make <code>ι</code> a field of <code>perfectoid_space</code> (and the others as well).</p>

<a name="127617824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617824">Mario Carneiro (Jun 05 2018 at 19:31)</a>:</h4>
<p>unless there is a reason that having many duplicates adds power?</p>

<a name="127617850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617850">Patrick Massot (Jun 05 2018 at 19:31)</a>:</h4>
<p>What Gabriel says was my next question</p>

<a name="127617853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617853" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617853">Reid Barton (Jun 05 2018 at 19:31)</a>:</h4>
<p>There are a lot of equivalent ways one could write this definition, but this way matches the way we speak</p>

<a name="127617898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617898" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617898">Patrick Massot (Jun 05 2018 at 19:32)</a>:</h4>
<p>I agree it looks more mathematicial, I'm asking if this will bring pain</p>

<a name="127617906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617906">Mario Carneiro (Jun 05 2018 at 19:32)</a>:</h4>
<p>alternatively, name the thing "perfectoid cover" or something and existentially quantify in the structure</p>

<a name="127617927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617927" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617927">Patrick Massot (Jun 05 2018 at 19:32)</a>:</h4>
<p>^ also sounds nice</p>

<a name="127617928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617928" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617928">Mario Carneiro (Jun 05 2018 at 19:32)</a>:</h4>
<p>i.e. define what is a perfectoid cover and define a perfectoid space to be one which has a cover</p>

<a name="127617948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617948" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617948">Patrick Massot (Jun 05 2018 at 19:33)</a>:</h4>
<p>But again it would sound further away from math-speak</p>

<a name="127617952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617952" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617952">Johan Commelin (Jun 05 2018 at 19:33)</a>:</h4>
<p>It think having the cover be a term of type <code>set (set X)</code> is not "un-mathematical". Except for the fact that we would call <code>set X</code> something like <code>subset_of X</code>.</p>

<a name="127617967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127617967" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127617967">Mario Carneiro (Jun 05 2018 at 19:33)</a>:</h4>
<p>or "powerset"</p>

<a name="127618031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618031">Kevin Buzzard (Jun 05 2018 at 19:34)</a>:</h4>
<p>My definition is readable by mathematicians</p>

<a name="127618032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618032" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618032">Mario Carneiro (Jun 05 2018 at 19:34)</a>:</h4>
<p>In fact, in math usually open covers are defined to be subsets of the collection of open sets</p>

<a name="127618039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618039" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618039">Kevin Buzzard (Jun 05 2018 at 19:34)</a>:</h4>
<p>and I don't understand what the problem with it is yet</p>

<a name="127618049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618049" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618049">Patrick Massot (Jun 05 2018 at 19:34)</a>:</h4>
<p>This thing with the indexing set makes it look like some kind of étale covering but it's actually a honest covering, right?</p>

<a name="127618057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618057" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618057">Kevin Buzzard (Jun 05 2018 at 19:35)</a>:</h4>
<p>I have an exotic construction "Spa" which basically takes a ring and spits out a "special" topological space</p>

<a name="127618058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618058" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618058">Reid Barton (Jun 05 2018 at 19:35)</a>:</h4>
<p>The thing is that often one has some auxiliary data attached to each member of the cover, and then indexing the set with the set itself is awkward (what if the other data is not a function of the set)</p>

<a name="127618078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618078" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618078">Kevin Buzzard (Jun 05 2018 at 19:35)</a>:</h4>
<p>and the claim is that my perfectoid space has a covering by these "special" spaces</p>

<a name="127618081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618081" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618081">Mario Carneiro (Jun 05 2018 at 19:35)</a>:</h4>
<p>that's the theorem</p>

<a name="127618099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618099" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618099">Patrick Massot (Jun 05 2018 at 19:35)</a>:</h4>
<p>What Reid wrote seems important to me</p>

<a name="127618101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618101" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618101">Kevin Buzzard (Jun 05 2018 at 19:35)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> yes it's just an honest covering of a topological space by open subsets</p>

<a name="127618104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618104" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618104">Mario Carneiro (Jun 05 2018 at 19:35)</a>:</h4>
<p>It's good to know that you only "need" to talk about small things in the definition and prove that you can do it even for large families</p>

<a name="127618142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618142" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618142">Reid Barton (Jun 05 2018 at 19:36)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span>, did you ever write down a definition of manifold?<br>
Even if it is just parameterized on a variable (i.e., not yet defined) notion of "smooth" maps of R^n, it might be an interesting exercise.</p>

<a name="127618154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618154" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618154">Kevin Buzzard (Jun 05 2018 at 19:36)</a>:</h4>
<blockquote>
<p>Maybe you should make <code>ι</code> a field of <code>perfectoid_space</code> (and the others as well).</p>
</blockquote>
<p>The covering and the set indexing the covering are <em>not</em> part of the data of a perfectoid space.</p>

<a name="127618160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618160">Mario Carneiro (Jun 05 2018 at 19:36)</a>:</h4>
<p>Even if you quantify over type 0 in the definition, you might want a family in type 1 and then you have a theorem to prove anyway</p>

<a name="127618165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618165" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618165">Kevin Buzzard (Jun 05 2018 at 19:36)</a>:</h4>
<p>A perfectoid space is a space for which such a cover exists</p>

<a name="127618183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618183" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618183">Patrick Massot (Jun 05 2018 at 19:37)</a>:</h4>
<p>No I'm stuck in type class loops, <code>out_param</code> hell when I try to put a norm on R^n</p>

<a name="127618202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618202" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618202">Patrick Massot (Jun 05 2018 at 19:37)</a>:</h4>
<p>But indeed I could try to write the definition sorrying the definition of diffeomorphisms between open subsets of R^ n</p>

<a name="127618205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618205" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618205">Kevin Buzzard (Jun 05 2018 at 19:37)</a>:</h4>
<p>I understood everything Patrick said but I'm having trouble with these CS objections about iota. Can someone suggest something which you'd be happy with but which is the same idea and which is still readable by mathematicians?</p>

<a name="127618281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618281" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618281">Patrick Massot (Jun 05 2018 at 19:38)</a>:</h4>
<p>Note that my version of <code>perfectoid_space</code> quoted above is a variation in a direction orthogonal to this question of iota vs subsets</p>

<a name="127618291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618291" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618291">Mario Carneiro (Jun 05 2018 at 19:39)</a>:</h4>
<p>just use <code>U : set (opens X)</code></p>

<a name="127618295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618295" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618295">Kevin Buzzard (Jun 05 2018 at 19:39)</a>:</h4>
<blockquote>
<p>i.e. define what is a perfectoid cover and define a perfectoid space to be one which has a cover</p>
</blockquote>
<p>Aah I do understand this</p>

<a name="127618353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618353" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618353">Reid Barton (Jun 05 2018 at 19:40)</a>:</h4>
<p>for more readability, it should probably be more like <code>cover : set (opens X)</code></p>

<a name="127618388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618388" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618388">Reid Barton (Jun 05 2018 at 19:40)</a>:</h4>
<p>Oh wait, you already have an example of the issue I was bringing up earlier here.</p>

<a name="127618399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618399">Reid Barton (Jun 05 2018 at 19:41)</a>:</h4>
<p>We also have this <code>(A : ι → Huber_pair) [∀ i, perfectoid_ring (A i) p]</code> stuff</p>

<a name="127618415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618415" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618415">Mario Carneiro (Jun 05 2018 at 19:41)</a>:</h4>
<p>BTW I think the <code>p</code> should come first</p>

<a name="127618421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618421" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618421">Mario Carneiro (Jun 05 2018 at 19:41)</a>:</h4>
<p>because it's the parameter</p>

<a name="127618473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618473" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618473">Gabriel Ebner (Jun 05 2018 at 19:42)</a>:</h4>
<blockquote>
<p>The covering and the set indexing the covering are not part of the data of a perfectoid space.</p>
</blockquote>
<p>Existentials are problematic since you'll have to use choice to access them, and in general you won't get the data back that you used to construct the perfectoid space in the first place.  If you make them fields, then you can actually get back the Huber pair <code>A</code> that you used to construct the perfectoid space---just via definitional reduction.</p>

<a name="127618493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618493" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618493">Patrick Massot (Jun 05 2018 at 19:43)</a>:</h4>
<p>He doesn't want to get it back</p>

<a name="127618507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618507" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618507">Patrick Massot (Jun 05 2018 at 19:43)</a>:</h4>
<p>It's not part of the structure</p>

<a name="127618938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618938" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618938">Kevin Buzzard (Jun 05 2018 at 19:51)</a>:</h4>
<blockquote>
<p>for more readability, it should probably be more like <code>cover : set (opens X)</code></p>
</blockquote>
<p>and now I need a Huber Pair for each element of the cover</p>

<a name="127618944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618944" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618944">Johan Commelin (Jun 05 2018 at 19:52)</a>:</h4>
<p>What about Reid's concern? That we are not only indexing open subsets, but also other stuff with the same indexing set/type?</p>

<a name="127618989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127618989" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127618989">Reid Barton (Jun 05 2018 at 19:52)</a>:</h4>
<p>I think in this case, you could write something like "there exists a set of open subsets which cover X and for each of these subsets, a Huber pair" such that ...". But there is a small subtlety here, in that the original definition allows you to choose the same open subset repeatedly with different Huber pairs. Here, there's no reason why you would want to do that, so it ends up not mattering.</p>

<a name="127619007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619007">Reid Barton (Jun 05 2018 at 19:52)</a>:</h4>
<p>But if you try to define a smooth manifold, you cannot begin "there exists a set of open subsets which cover M and for each of these subsets, a continuous function to R^n such that ..."</p>

<a name="127619013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619013" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619013">Mario Carneiro (Jun 05 2018 at 19:52)</a>:</h4>
<p>that's what makes the theorem not completely trivial</p>

<a name="127619035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619035">Johan Commelin (Jun 05 2018 at 19:53)</a>:</h4>
<blockquote>
<p>But if you try to define a smooth manifold, you cannot begin "there exists a set of open subsets which cover M and for each of these subsets, a continuous function to R^n such that ..."</p>
</blockquote>
<p>Huh, why not?</p>

<a name="127619036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619036" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619036">Patrick Massot (Jun 05 2018 at 19:53)</a>:</h4>
<p>theorem claiming this doesn't matter?</p>

<a name="127619046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619046" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619046">Mario Carneiro (Jun 05 2018 at 19:53)</a>:</h4>
<p>right</p>

<a name="127619052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619052" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619052">Reid Barton (Jun 05 2018 at 19:53)</a>:</h4>
<p>Or, maybe you can?</p>

<a name="127619103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619103" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619103">Mario Carneiro (Jun 05 2018 at 19:54)</a>:</h4>
<p>that given the definition using sets of opens you can recover the version with families indexed in an arbitrary type</p>

<a name="127619104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619104" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619104">Patrick Massot (Jun 05 2018 at 19:54)</a>:</h4>
<blockquote>
<p>Huh, why not?</p>
</blockquote>
<p>Because it wouldn't be correct</p>

<a name="127619114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619114" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619114">Reid Barton (Jun 05 2018 at 19:54)</a>:</h4>
<p>but it's not the usual definition of an atlas, since there you can have multiple charts on the same open but with different coordinates</p>

<a name="127619120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619120" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619120">Mario Carneiro (Jun 05 2018 at 19:54)</a>:</h4>
<p>but in general you should try to minimize your domain of quantification to something which is somehow bounded by the original input data</p>

<a name="127619130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619130" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619130">Patrick Massot (Jun 05 2018 at 19:54)</a>:</h4>
<p>You can build exotic spheres by gluing two open balls</p>

<a name="127619150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619150" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619150">Mario Carneiro (Jun 05 2018 at 19:55)</a>:</h4>
<p>if you don't, this is when mathematicians have to write "chapter 4" or whatever on ZFC embedding subtleties</p>

<a name="127619161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619161" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619161">Patrick Massot (Jun 05 2018 at 19:55)</a>:</h4>
<p>All the exotictness is in the gluing map</p>

<a name="127619191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619191" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619191">Mario Carneiro (Jun 05 2018 at 19:55)</a>:</h4>
<p>in the manifold case, I'm sure you can bound it by all the ways that maps can possibly fit together</p>

<a name="127619246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619246" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619246">Reid Barton (Jun 05 2018 at 19:56)</a>:</h4>
<p>isn't it kind of a moot point anyways, since we are also asking for these Huber pairs, which also contain types?</p>

<a name="127619271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619271" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619271">Mario Carneiro (Jun 05 2018 at 19:57)</a>:</h4>
<p>maybe the Huber pairs can't get that large either</p>

<a name="127619279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619279" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619279">Patrick Massot (Jun 05 2018 at 19:57)</a>:</h4>
<p>in the manifold case the atlas is a set of pairs (U_i, f_i) where U_i is an open set and f_i is a homeomorphism from U_i to some open set in R^n.</p>

<a name="127619284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619284" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619284">Reid Barton (Jun 05 2018 at 19:57)</a>:</h4>
<p>I totally agree that if you find yourself with something that looks like a perfectoid space, but the indexing family is large, then it's a nontrivial theorem to show that you actually have a genuine perfectoid space</p>

<a name="127619340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619340" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619340">Patrick Massot (Jun 05 2018 at 19:58)</a>:</h4>
<p>anyway, let's focus on the perfectoid case</p>

<a name="127619374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619374" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619374">Mario Carneiro (Jun 05 2018 at 19:58)</a>:</h4>
<p>I'm sort of speculating here, but really if you need all that extra indexing power, then the definition is probably not correct anyway because then Type is probably not enough</p>

<a name="127619397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619397" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619397">Mario Carneiro (Jun 05 2018 at 19:59)</a>:</h4>
<p>it's an arbitrary stopping point in the ZFC world</p>

<a name="127619462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619462" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619462">Patrick Massot (Jun 05 2018 at 20:00)</a>:</h4>
<p>Kevin disappeared. Maybe he suddenly realized Scholze's perfectoid business makes no sense at all because of this issue</p>

<a name="127619586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619586" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619586">Johan Commelin (Jun 05 2018 at 20:02)</a>:</h4>
<p>Ok, I don't know enough about manifolds. (They are weird, because they aren't defined as locally ringed spaces with some property.) But in the scheme case (and I think also in the perfectoid case) it should be fine to just work with a set of opens. Every point has an affine neighbourhood. That is what you need/want. Or am I messing up?</p>

<a name="127619667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619667" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619667">Johan Commelin (Jun 05 2018 at 20:04)</a>:</h4>
<p>Nevertheless, if we use a set of opens, I don't know if that is a pretty thing to use as indexing set for the Huber pairs, and other data indexed on it. It might lead to ugly formalisation, it might lead to "un-mathematical" code. I really don't know.</p>

<a name="127619686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619686" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619686">Patrick Massot (Jun 05 2018 at 20:04)</a>:</h4>
<p>You can define smooth manifolds as ringed space, see <a href="https://bookstore.ams.org/gsm-65" target="_blank" title="https://bookstore.ams.org/gsm-65">https://bookstore.ams.org/gsm-65</a></p>

<a name="127619772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619772">Kevin Buzzard (Jun 05 2018 at 20:06)</a>:</h4>
<p>I'm trying to do 10 things at once. I was hoping to get some work done tonight but my partner just got back from Canada and her sleeping patterns are in chaos; it might be bedtime.</p>

<a name="127619781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619781" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619781">Kevin Buzzard (Jun 05 2018 at 20:07)</a>:</h4>
<p>I am not sure that anyone has ever used a perfectoid space for which the index set is any bigger than countably infinite</p>

<a name="127619783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619783" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619783">Kevin Buzzard (Jun 05 2018 at 20:07)</a>:</h4>
<p>hmm</p>

<a name="127619791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619791" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619791">Kevin Buzzard (Jun 05 2018 at 20:07)</a>:</h4>
<p>maybe the size of the real numbers</p>

<a name="127619861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619861" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619861">Kevin Buzzard (Jun 05 2018 at 20:08)</a>:</h4>
<p>I can't imagine anything bigger. Mario's "chapter 4" reference is pertinent -- this is the same paper as the one I've taken the definition of perfectoid space from.</p>

<a name="127619894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127619894" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127619894">Kevin Buzzard (Jun 05 2018 at 20:09)</a>:</h4>
<blockquote>
<p>maybe the Huber pairs can't get that large either</p>
</blockquote>
<p>I am not sure there is a single object in this story that has size &gt; 2^aleph_0</p>

<a name="127620277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127620277" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127620277">Johan Commelin (Jun 05 2018 at 20:16)</a>:</h4>
<p>Which "chapter 4" are we referring to?</p>

<a name="127620286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127620286" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127620286">Patrick Massot (Jun 05 2018 at 20:16)</a>:</h4>
<p><a href="https://arxiv.org/abs/1709.07343" target="_blank" title="https://arxiv.org/abs/1709.07343">https://arxiv.org/abs/1709.07343</a></p>

<a name="127620309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127620309" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127620309">Johan Commelin (Jun 05 2018 at 20:17)</a>:</h4>
<p>We should have a file/issue with references. Because now there is the diamonds paper, Fontaine's bourbaki notes, Wedhorn's notes...</p>

<a name="127620323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127620323" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127620323">Kevin Buzzard (Jun 05 2018 at 20:17)</a>:</h4>
<p>I have all these things as pdfs in my project directory but just didn't push them.</p>

<a name="127620370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127620370" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127620370">Kevin Buzzard (Jun 05 2018 at 20:18)</a>:</h4>
<p>Maybe some list of links on the README?</p>

<a name="127620423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127620423" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127620423">Johan Commelin (Jun 05 2018 at 20:19)</a>:</h4>
<p>Yes, that should be fine.</p>

<a name="127620435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127620435" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127620435">Johan Commelin (Jun 05 2018 at 20:19)</a>:</h4>
<p>I can PR the readme tomorrow</p>

<a name="127620917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127620917" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127620917">Reid Barton (Jun 05 2018 at 20:28)</a>:</h4>
<p>Maybe make a separate repository with the pdfs, if you want to commit them somewhere. Then people don't have to download them if they don't want to</p>

<a name="127621535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127621535" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127621535">Patrick Massot (Jun 05 2018 at 20:40)</a>:</h4>
<p>I don't see the point of hosting the pdf on github if they were taken from arXiv</p>

<a name="127622457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127622457" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127622457">Assia Mahboubi (Jun 05 2018 at 21:00)</a>:</h4>
<p>It would also be great to have a "Getting it working" section in your README.</p>

<a name="127622699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127622699" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127622699">Reid Barton (Jun 05 2018 at 21:05)</a>:</h4>
<blockquote>
<p>I don't see the point of hosting the pdf on github if they were taken from arXiv</p>
</blockquote>
<p>Agreed, I meant "better not to commit pdfs to the main repository, whether or not you host them elsewhere"</p>

<a name="127623463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127623463" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127623463">Kevin Buzzard (Jun 05 2018 at 21:22)</a>:</h4>
<blockquote>
<p>It would also be great to have a "Getting it working" section in your README.</p>
</blockquote>
<p>ha ha, I guess it currently doesn't work :-) (unless you allow sorrys). OK I'll write something about that in the README.</p>

<a name="127624740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127624740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127624740">Kevin Buzzard (Jun 05 2018 at 21:54)</a>:</h4>
<blockquote>
<p>It would also be great to have a "Getting it working" section in your README.</p>
</blockquote>
<p><a href="https://github.com/kbuzzard/lean-perfectoid-spaces/" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/">https://github.com/kbuzzard/lean-perfectoid-spaces/</a></p>

<a name="127624758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127624758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127624758">Kevin Buzzard (Jun 05 2018 at 21:55)</a>:</h4>
<p>On my TODO list: (1) refactor definition of perfectoid space according to comments above, and move it into <code>src</code> (2) write a couple of issues explaining the details of what needs to be done to finish formalising the definition.</p>

<a name="127624806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127624806" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127624806">Kevin Buzzard (Jun 05 2018 at 21:56)</a>:</h4>
<p>Any comments / criticism / suggestions / anything -- I'd be happy to hear it. Once I've written the issues I will perhaps begin to circulate a link to the project amongst my mathematician chums</p>

<a name="127624810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127624810" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127624810">Kevin Buzzard (Jun 05 2018 at 21:56)</a>:</h4>
<p>And of course, many thanks to those who have already commented!</p>

<a name="127626651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127626651" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127626651">Kevin Buzzard (Jun 05 2018 at 22:43)</a>:</h4>
<p><em>boggle</em> Every change I made bring new typeclass inference problems</p>

<a name="127626706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127626706" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127626706">Kevin Buzzard (Jun 05 2018 at 22:44)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">perfectoid_cover</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">is_prime</span> <span class="n">p</span><span class="o">]</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">adic_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="err">𝓤</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">X</span><span class="o">))</span>
<span class="o">[</span><span class="err">𝓤</span><span class="bp">_</span><span class="n">open</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">U</span> <span class="err">∈</span> <span class="err">𝓤</span><span class="o">,</span> <span class="n">is_open</span> <span class="n">U</span><span class="o">]</span>
<span class="o">(</span><span class="err">𝓤</span><span class="bp">_</span><span class="n">cover</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">U</span> <span class="err">∈</span> <span class="err">𝓤</span><span class="o">,</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">U</span><span class="o">)</span>
<span class="o">(</span><span class="err">𝓤</span><span class="bp">_</span><span class="n">affinoid_perfectoid</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">U</span> <span class="err">∈</span> <span class="err">𝓤</span><span class="o">,</span>
  <span class="bp">∃</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">(</span><span class="n">Aperf</span> <span class="o">:</span> <span class="n">perfectoid_ring</span> <span class="n">p</span> <span class="n">A</span><span class="o">),</span> <span class="n">is_preadic_space_equiv</span> <span class="n">U</span> <span class="o">(</span><span class="n">Spa</span> <span class="o">(</span><span class="n">A</span><span class="o">)))</span>   <span class="o">)</span>
</pre></div>

<a name="127626709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127626709" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127626709">Kenny Lau (Jun 05 2018 at 22:44)</a>:</h4>
<p>𝓤</p>

<a name="127626712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127626712" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127626712">Kevin Buzzard (Jun 05 2018 at 22:44)</a>:</h4>
<p>and now I'm back with failing to synthesize <code>⊢ preadic_space ↥U</code></p>

<a name="127626723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127626723" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127626723">Kevin Buzzard (Jun 05 2018 at 22:45)</a>:</h4>
<blockquote>
<p>𝓤</p>
</blockquote>
<p>Collection of open sets</p>

<a name="127626728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127626728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127626728">Kevin Buzzard (Jun 05 2018 at 22:45)</a>:</h4>
<p>except that Lean does not notice they're open</p>

<a name="127626740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127626740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127626740">Kevin Buzzard (Jun 05 2018 at 22:46)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">preadic_space_restriction</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">preadic_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">}</span> <span class="o">[</span><span class="bp">@_</span><span class="n">root_</span><span class="bp">.</span><span class="n">is_open</span> <span class="n">X</span> <span class="bp">_</span> <span class="n">U</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">preadic_space</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">//</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">U</span><span class="o">}</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="127627182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127627182" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127627182">Kevin Buzzard (Jun 05 2018 at 22:58)</a>:</h4>
<p>I guess I really liked the idea of typeclass inference showing automatically that if X is some kind of nice top space (an adic space or perfectoid space) and U is an open subset then U inherits the niceness. I might just give up and spell it out.</p>

<a name="127627396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127627396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127627396">Kevin Buzzard (Jun 05 2018 at 23:04)</a>:</h4>
<p>I've given up on typeclass inference because it's midnight.</p>

<a name="127627414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127627414" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127627414">Kevin Buzzard (Jun 05 2018 at 23:05)</a>:</h4>
<p>In the old version above, I had <code>is_preadic_space_equiv (U i) (Spa (A i))</code></p>

<a name="127627417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127627417" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127627417">Kevin Buzzard (Jun 05 2018 at 23:05)</a>:</h4>
<p>and the preadic space structure on <code>U i</code> came from typeclass inference.</p>

<a name="127627420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127627420" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127627420">Kevin Buzzard (Jun 05 2018 at 23:05)</a>:</h4>
<p>I can't get it to work for U in some covering set</p>

<a name="127627423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127627423" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127627423">Kevin Buzzard (Jun 05 2018 at 23:05)</a>:</h4>
<p>but this works:</p>

<a name="127627463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127627463" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127627463">Kevin Buzzard (Jun 05 2018 at 23:06)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="c1">-- definitions of adic_space, preadic_space, Huber_pair etc</span>
<span class="kn">import</span> <span class="n">adic_space</span>

<span class="c1">--notation</span>
<span class="kn">postfix</span> <span class="bp">`</span><span class="err">ᵒ</span><span class="bp">`</span> <span class="o">:</span> <span class="mi">66</span> <span class="o">:=</span> <span class="n">power_bounded_subring</span>

<span class="c">/-</span><span class="cm">- A perfectoid ring, following Fontaine Sem Bourb-/</span>
<span class="n">class</span> <span class="n">perfectoid_ring</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">is_prime</span> <span class="n">p</span><span class="o">]</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">Tate_ring</span> <span class="n">R</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">is_complete</span> <span class="o">:</span> <span class="n">complete</span> <span class="n">R</span><span class="o">)</span>
<span class="o">(</span><span class="n">is_uniform</span>  <span class="o">:</span> <span class="n">uniform</span> <span class="n">R</span><span class="o">)</span>
<span class="o">(</span><span class="n">ramified</span>    <span class="o">:</span> <span class="bp">∃</span> <span class="n">ϖ</span> <span class="o">:</span> <span class="n">R</span><span class="err">ᵒ</span><span class="o">,</span> <span class="o">(</span><span class="n">is_pseudo_uniformizer</span> <span class="n">ϖ</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">ϖ</span> <span class="err">^</span> <span class="n">p</span> <span class="err">∣</span> <span class="n">p</span><span class="o">))</span>
<span class="o">(</span><span class="n">Frob</span>        <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="err">ᵒ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span><span class="err">ᵒ</span><span class="o">,</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">R</span><span class="err">ᵒ</span><span class="o">)</span> <span class="err">∣</span> <span class="o">(</span><span class="n">b</span> <span class="err">^</span> <span class="n">p</span> <span class="bp">-</span> <span class="n">a</span><span class="o">))</span>

<span class="kn">structure</span> <span class="n">perfectoid_cover</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">is_prime</span> <span class="n">p</span><span class="o">]</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">adic_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="err">𝓤</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">X</span><span class="o">))</span>
<span class="o">[</span><span class="err">𝓤</span><span class="bp">_</span><span class="n">open</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">U</span> <span class="err">∈</span> <span class="err">𝓤</span><span class="o">,</span> <span class="n">is_open</span> <span class="n">U</span><span class="o">]</span>
<span class="o">(</span><span class="err">𝓤</span><span class="bp">_</span><span class="n">cover</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">U</span> <span class="err">∈</span> <span class="err">𝓤</span><span class="o">,</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">U</span><span class="o">)</span>
<span class="o">(</span><span class="err">𝓤</span><span class="bp">_</span><span class="n">affinoid_perfectoid</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">U</span> <span class="err">∈</span> <span class="err">𝓤</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">(</span><span class="n">Aperf</span> <span class="o">:</span> <span class="n">perfectoid_ring</span> <span class="n">p</span> <span class="n">A</span><span class="o">),</span>
  <span class="n">is_preadic_space_equiv</span> <span class="o">(</span><span class="n">preadic_space_pullback</span> <span class="n">U</span><span class="o">)</span> <span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">)</span>  <span class="o">)</span>

<span class="n">class</span> <span class="n">perfectoid_space</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">is_prime</span> <span class="n">p</span><span class="o">]</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">adic_space</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">exists_perfectoid_cover</span> <span class="o">:</span> <span class="n">perfectoid_cover</span> <span class="n">p</span> <span class="n">X</span><span class="o">)</span>
</pre></div>

<a name="127627484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127627484" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127627484">Kevin Buzzard (Jun 05 2018 at 23:06)</a>:</h4>
<p><code>preadic_space_pullback U</code> is just <code>U</code> again :-) (actually it's {x : X // x \in U})</p>

<a name="127627491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127627491" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127627491">Kevin Buzzard (Jun 05 2018 at 23:07)</a>:</h4>
<p>but the instance can key on it</p>

<a name="127627494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127627494" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127627494">Kevin Buzzard (Jun 05 2018 at 23:07)</a>:</h4>
<p>I only half-know what those words mean</p>

<a name="127627499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127627499" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127627499">Kevin Buzzard (Jun 05 2018 at 23:07)</a>:</h4>
<p>but type class inference works with this trick</p>

<a name="127632328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127632328" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127632328">Mario Carneiro (Jun 06 2018 at 01:25)</a>:</h4>
<p>I said <code>set (opens X)</code> for a reason</p>

<a name="127632374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127632374" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127632374">Mario Carneiro (Jun 06 2018 at 01:26)</a>:</h4>
<p>it's past time you had a <code>opens X</code> type of open subsets of X</p>

<a name="127635899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127635899" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127635899">Johan Commelin (Jun 06 2018 at 03:24)</a>:</h4>
<p>I don't have Lean here, so there might be stupid typos. But how about something like this?</p>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">perfectoid_space</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">is_prime</span> <span class="n">p</span><span class="o">]</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">adic_space</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">perfectoid_cover</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">(</span><span class="n">Aperf</span> <span class="o">:</span> <span class="n">perfectoid_ring</span> <span class="n">p</span> <span class="n">A</span><span class="o">),</span>
  <span class="o">(</span><span class="n">x</span> <span class="err">∈</span> <span class="n">U</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">is_preadic_space_equiv</span> <span class="n">U</span> <span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">))</span>
</pre></div>

<a name="127635907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127635907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127635907">Johan Commelin (Jun 06 2018 at 03:25)</a>:</h4>
<p>That seems very readable to me. And I basically just squashed some lines together.</p>

<a name="127641910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127641910" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127641910">Johan Commelin (Jun 06 2018 at 06:45)</a>:</h4>
<blockquote>
<p>it's past time you had a <code>opens X</code> type of open subsets of X</p>
</blockquote>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> do you imagine something like this?</p>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">opens</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">U_open</span> <span class="o">:</span> <span class="n">is_open</span> <span class="n">U</span><span class="o">)</span>

<span class="kn">instance</span> <span class="n">open_is_subset</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">:</span>
<span class="n">has_coe</span> <span class="o">(</span><span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">⟨λ</span><span class="n">U</span><span class="o">,</span> <span class="n">U</span><span class="bp">.</span><span class="n">U</span><span class="bp">⟩</span>
</pre></div>

<a name="127642757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127642757" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127642757">Mario Carneiro (Jun 06 2018 at 07:10)</a>:</h4>
<p>Yes. You will also want a <code>has_mem A (opens A)</code> instance</p>

<a name="127642759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127642759" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127642759">Mario Carneiro (Jun 06 2018 at 07:11)</a>:</h4>
<p>You could also use <code>subtype</code> for the definition</p>

<a name="127643208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127643208" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127643208">Johan Commelin (Jun 06 2018 at 07:25)</a>:</h4>
<p>Voila, another attempt.</p>
<div class="codehilite"><pre><span></span><span class="kn">section</span> <span class="n">opens</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">t</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span>
<span class="n">include</span> <span class="n">X</span> <span class="n">t</span>

<span class="bp">@</span><span class="o">[</span><span class="n">class</span><span class="o">]</span> <span class="n">def</span> <span class="n">opens</span> <span class="o">:=</span> <span class="n">subtype</span> <span class="o">(</span><span class="n">topological_space</span><span class="bp">.</span><span class="n">is_open</span> <span class="n">t</span><span class="o">)</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_coe</span> <span class="o">(</span><span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">subtype</span><span class="bp">.</span><span class="n">val</span><span class="bp">⟩</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_mem</span> <span class="n">X</span> <span class="o">(</span><span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">⟨λ</span><span class="n">x</span> <span class="n">U</span><span class="o">,</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">U</span><span class="bp">.</span><span class="n">val</span><span class="bp">⟩</span>

<span class="kn">end</span> <span class="n">opens</span>
</pre></div>

<a name="127643260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127643260" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127643260">Mario Carneiro (Jun 06 2018 at 07:27)</a>:</h4>
<p>It shouldn't make too much difference, but you should use <code>is_open</code> instead of <code>topological_space.is_open</code></p>

<a name="127643434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127643434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127643434">Johan Commelin (Jun 06 2018 at 07:32)</a>:</h4>
<p>Done.</p>

<a name="127643443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127643443" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127643443">Johan Commelin (Jun 06 2018 at 07:33)</a>:</h4>
<p>But I'm having type class inference issues with Kevin's latest code (that he posted above).</p>

<a name="127643446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127643446" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127643446">Johan Commelin (Jun 06 2018 at 07:33)</a>:</h4>
<p>And it doesn't help if I change <code>set (set X)</code> to <code>set (opens X)</code>.</p>

<a name="127643487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127643487" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127643487">Johan Commelin (Jun 06 2018 at 07:34)</a>:</h4>
<p>Somehow Lean starts looking for an instance of <code>has_coe_to_sort nat</code>, and I have no idea why Lean would do that.</p>

<a name="127643707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127643707" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127643707">Johan Commelin (Jun 06 2018 at 07:42)</a>:</h4>
<p>Never mind... error was between keyboard and chair.</p>

<a name="127643712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127643712" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127643712">Johan Commelin (Jun 06 2018 at 07:42)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="c1">-- definitions of adic_space, preadic_space, Huber_pair etc</span>
<span class="kn">import</span> <span class="n">adic_space</span>

<span class="c1">--notation</span>
<span class="kn">postfix</span> <span class="bp">`</span><span class="err">ᵒ</span><span class="bp">`</span> <span class="o">:</span> <span class="mi">66</span> <span class="o">:=</span> <span class="n">power_bounded_subring</span>

<span class="c">/-</span><span class="cm">- A perfectoid ring, following Fontaine Sem Bourb-/</span>
<span class="n">class</span> <span class="n">perfectoid_ring</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">is_prime</span> <span class="n">p</span><span class="o">]</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">Tate_ring</span> <span class="n">R</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">is_complete</span> <span class="o">:</span> <span class="n">complete</span> <span class="n">R</span><span class="o">)</span>
<span class="o">(</span><span class="n">is_uniform</span>  <span class="o">:</span> <span class="n">uniform</span> <span class="n">R</span><span class="o">)</span>
<span class="o">(</span><span class="n">ramified</span>    <span class="o">:</span> <span class="bp">∃</span> <span class="n">ϖ</span> <span class="o">:</span> <span class="n">R</span><span class="err">ᵒ</span><span class="o">,</span> <span class="o">(</span><span class="n">is_pseudo_uniformizer</span> <span class="n">ϖ</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">ϖ</span><span class="err">^</span><span class="n">p</span> <span class="err">∣</span> <span class="n">p</span><span class="o">))</span>
<span class="o">(</span><span class="n">Frob</span>        <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="err">ᵒ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span><span class="err">ᵒ</span><span class="o">,</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">R</span><span class="err">ᵒ</span><span class="o">)</span> <span class="err">∣</span> <span class="o">(</span><span class="n">b</span><span class="err">^</span><span class="n">p</span> <span class="bp">-</span> <span class="n">a</span><span class="o">))</span>

<span class="n">class</span> <span class="n">perfectoid_space</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">is_prime</span> <span class="n">p</span><span class="o">]</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">adic_space</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">perfectoid_cover</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">[</span><span class="n">perfectoid_ring</span> <span class="n">p</span> <span class="n">A</span><span class="o">],</span>
  <span class="o">(</span><span class="n">x</span> <span class="err">∈</span> <span class="n">U</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">is_preadic_space_equiv</span> <span class="n">U</span> <span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">))</span>
</pre></div>

<a name="127643724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127643724" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127643724">Johan Commelin (Jun 06 2018 at 07:43)</a>:</h4>
<p>I think it would be really nice if we also made the <code>[p : Prime]</code> stuff work. I'll try to look into it.</p>

<a name="127644045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127644045" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127644045">Johan Commelin (Jun 06 2018 at 07:54)</a>:</h4>
<p>Oh yes, I remember. That means that <code>ϖ^p</code> breaks. And we don't want up-arrows or <code>p.val</code> or the likes.</p>

<a name="127644065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127644065" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127644065">Mario Carneiro (Jun 06 2018 at 07:55)</a>:</h4>
<p>Well, you can use <code>[fixed_prime]</code> plus <code>fixed_prime.p</code> to avoid the coercion stuff</p>

<a name="127644117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127644117" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127644117">Johan Commelin (Jun 06 2018 at 07:57)</a>:</h4>
<p>Right, with your "hack" we get</p>
<div class="codehilite"><pre><span></span><span class="c1">-- definitions of adic_space, preadic_space, Huber_pair etc</span>
<span class="kn">import</span> <span class="n">adic_space</span>

<span class="c1">--notation</span>
<span class="kn">postfix</span> <span class="bp">`</span><span class="err">ᵒ</span><span class="bp">`</span> <span class="o">:</span> <span class="mi">66</span> <span class="o">:=</span> <span class="n">power_bounded_subring</span>

<span class="kn">open</span> <span class="n">nat</span><span class="bp">.</span><span class="n">Prime</span>
<span class="kn">variable</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">Prime</span><span class="o">]</span> <span class="c1">-- fix a prime p</span>

<span class="c">/-</span><span class="cm">- A perfectoid ring, following Fontaine Sem Bourb-/</span>
<span class="n">class</span> <span class="n">perfectoid_ring</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">Tate_ring</span> <span class="n">R</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">is_complete</span> <span class="o">:</span> <span class="n">complete</span> <span class="n">R</span><span class="o">)</span>
<span class="o">(</span><span class="n">is_uniform</span>  <span class="o">:</span> <span class="n">uniform</span> <span class="n">R</span><span class="o">)</span>
<span class="o">(</span><span class="n">ramified</span>    <span class="o">:</span> <span class="bp">∃</span> <span class="n">ϖ</span> <span class="o">:</span> <span class="n">R</span><span class="err">ᵒ</span><span class="o">,</span> <span class="o">(</span><span class="n">is_pseudo_uniformizer</span> <span class="n">ϖ</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">ϖ</span><span class="err">^</span><span class="n">p</span> <span class="err">∣</span> <span class="n">p</span><span class="o">))</span>
<span class="o">(</span><span class="n">Frob</span>        <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="err">ᵒ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span><span class="err">ᵒ</span><span class="o">,</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">R</span><span class="err">ᵒ</span><span class="o">)</span> <span class="err">∣</span> <span class="o">(</span><span class="n">b</span><span class="err">^</span><span class="n">p</span> <span class="bp">-</span> <span class="n">a</span><span class="o">))</span>

<span class="n">class</span> <span class="n">perfectoid_space</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">adic_space</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">perfectoid_cover</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">[</span><span class="n">perfectoid_ring</span> <span class="n">A</span><span class="o">],</span>
  <span class="o">(</span><span class="n">x</span> <span class="err">∈</span> <span class="n">U</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">is_preadic_space_equiv</span> <span class="n">U</span> <span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">))</span>
</pre></div>

<a name="127644121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127644121" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127644121">Johan Commelin (Jun 06 2018 at 07:57)</a>:</h4>
<p>Look ma! No primes in our type signatures!</p>

<a name="127644170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127644170" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127644170">Johan Commelin (Jun 06 2018 at 07:58)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">#</span><span class="kn">check</span> <span class="bp">@</span><span class="n">perfectoid_space</span> <span class="c1">-- perfectoid_space : Π [_inst_1 : nat.Prime], Type → Type</span>
</pre></div>

<a name="127644441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127644441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127644441">Johan Commelin (Jun 06 2018 at 08:07)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Is there a reason why <code>perfectoid_ring</code> has hypothesis <code>is_complete</code> and <code>is_uniform</code> and also <code>ramified</code>. Why not <code>is_ramified</code>?</p>

<a name="127644488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127644488" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127644488">Kevin Buzzard (Jun 06 2018 at 08:08)</a>:</h4>
<p>It's just random -- like in Lean. It's <code>group</code> but <code>is_group_hom</code> right?</p>

<a name="127644494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127644494" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127644494">Mario Carneiro (Jun 06 2018 at 08:08)</a>:</h4>
<p><code>is_group_hom</code> because that's a prop</p>

<a name="127644499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127644499" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127644499">Mario Carneiro (Jun 06 2018 at 08:09)</a>:</h4>
<p><code>group</code> is not</p>

<a name="127644506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127644506" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127644506">Kevin Buzzard (Jun 06 2018 at 08:09)</a>:</h4>
<p>Aah!</p>

<a name="127644513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127644513" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127644513">Kevin Buzzard (Jun 06 2018 at 08:09)</a>:</h4>
<p>So how about <code>is_perfectoid_space</code></p>

<a name="127644516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127644516" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127644516">Kevin Buzzard (Jun 06 2018 at 08:09)</a>:</h4>
<p>because it's an adic space plus some prop</p>

<a name="127644573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127644573" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127644573">Johan Commelin (Jun 06 2018 at 08:11)</a>:</h4>
<p>I guess that makes sense. And similarly <code>is_perfectoid_ring</code>, and I guess <code>is_ramified</code>.</p>

<a name="127644624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127644624" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127644624">Johan Commelin (Jun 06 2018 at 08:12)</a>:</h4>
<p>Hmmm, but <code>group</code> is also just a <code>monoid</code> with some props, right?</p>

<a name="127644717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127644717" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127644717">Kevin Buzzard (Jun 06 2018 at 08:15)</a>:</h4>
<p>But maybe its type is not Prop</p>

<a name="127644725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127644725" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127644725">Kevin Buzzard (Jun 06 2018 at 08:15)</a>:</h4>
<p>That's the distinction I think</p>

<a name="127644779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127644779" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127644779">Johan Commelin (Jun 06 2018 at 08:16)</a>:</h4>
<p>Right, that makes sense. So then it is <code>is_ramified</code>, and the rest stays as it is.</p>

<a name="127645043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127645043" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127645043">Johan Commelin (Jun 06 2018 at 08:24)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Does it also make sense to call the last condition <code>is_perfect</code> instead of <code>Frob</code>?</p>

<a name="127645837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127645837" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127645837">Kevin Buzzard (Jun 06 2018 at 08:49)</a>:</h4>
<p>If you search for "perfect ring" then you get ads for weddings</p>

<a name="127645886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127645886" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127645886">Kevin Buzzard (Jun 06 2018 at 08:50)</a>:</h4>
<p>I thought Frobenius was bijective for a perfect ring, not surjective. What do you think?</p>

<a name="127645889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127645889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127645889">Johan Commelin (Jun 06 2018 at 08:50)</a>:</h4>
<p>Hmm, you are probably right</p>

<a name="127645905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127645905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127645905">Johan Commelin (Jun 06 2018 at 08:51)</a>:</h4>
<p>Bam! <a href="https://github.com/kbuzzard/lean-perfectoid-spaces/pull/1" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/pull/1">https://github.com/kbuzzard/lean-perfectoid-spaces/pull/1</a></p>

<a name="127645945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127645945" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127645945">Johan Commelin (Jun 06 2018 at 08:52)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Your first PR (-;</p>

<a name="127645950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127645950" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127645950">Kevin Buzzard (Jun 06 2018 at 08:52)</a>:</h4>
<p>I've pushed Kenny's valuation stuff by the way (first chapter of Wedhorn)</p>

<a name="127645981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127645981" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127645981">Johan Commelin (Jun 06 2018 at 08:53)</a>:</h4>
<p>And there is also <a href="https://github.com/jcommelin/lean-perfectoid-spaces/tree/opens" target="_blank" title="https://github.com/jcommelin/lean-perfectoid-spaces/tree/opens">https://github.com/jcommelin/lean-perfectoid-spaces/tree/opens</a></p>

<a name="127645983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127645983" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127645983">Kevin Buzzard (Jun 06 2018 at 08:53)</a>:</h4>
<blockquote>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Your first PR (-;</p>
</blockquote>
<p>One day when we have a gigantic maths brain that's taking over the universe, you'll be able to tell your children that you made the first PR.</p>

<a name="127646027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127646027" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127646027">Kevin Buzzard (Jun 06 2018 at 08:54)</a>:</h4>
<p>if we decided to spare them</p>

<a name="127646031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127646031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127646031">Johan Commelin (Jun 06 2018 at 08:54)</a>:</h4>
<p>Which defines the <code>opens</code> class. And uses it in the <code>perfectoid_space</code> definition.</p>

<a name="127646089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127646089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127646089">Johan Commelin (Jun 06 2018 at 08:56)</a>:</h4>
<p>Kevin, should I also PR the <code>opens</code> stuff? Or do you not like that direction?</p>

<a name="127646096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127646096" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127646096">Kevin Buzzard (Jun 06 2018 at 08:56)</a>:</h4>
<blockquote>
<p>I said <code>set (opens X)</code> for a reason</p>
</blockquote>
<p>I couldn't find <code>opens</code> in the topological space stuff so I left it and decided I should ask where it was later</p>

<a name="127646099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127646099" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127646099">Kevin Buzzard (Jun 06 2018 at 08:56)</a>:</h4>
<blockquote>
<p>it's past time you had a <code>opens X</code> type of open subsets of X</p>
</blockquote>
<p>Ohh!</p>

<a name="127646265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127646265" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127646265">Johan Commelin (Jun 06 2018 at 09:01)</a>:</h4>
<p>I see that <span class="user-mention" data-user-id="110064">@Kenny Lau</span> made <code>ker f</code> a subset instead of a subtype. I really don't know when I should use which. Can someone clarify this for me?</p>

<a name="127646316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127646316" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127646316">Kenny Lau (Jun 06 2018 at 09:02)</a>:</h4>
<p>you can coerce a subset to a subtype anytime</p>

<a name="127646318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127646318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127646318">Kevin Buzzard (Jun 06 2018 at 09:02)</a>:</h4>
<p>I can't. I'm constantly switching between them. I guess subsets are easier to work with</p>

<a name="127646323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127646323" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127646323">Kevin Buzzard (Jun 06 2018 at 09:02)</a>:</h4>
<p>[I can't clarify, I can coerce]</p>

<a name="127646327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127646327" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127646327">Kevin Buzzard (Jun 06 2018 at 09:02)</a>:</h4>
<p>Random screed by Hazewinkel claims perfect is bijective \lam x, x^p</p>

<a name="127646342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127646342" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127646342">Johan Commelin (Jun 06 2018 at 09:03)</a>:</h4>
<p>Ok, so <code>Frob</code> it is. I already reverted it on my branch.</p>

<a name="127649540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127649540" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127649540">Patrick Massot (Jun 06 2018 at 10:39)</a>:</h4>
<p>I don't understand <a href="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/b1e6489145be504e64a009226c6811bfd84a5070/src/perfectoid_space.lean#L22" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/b1e6489145be504e64a009226c6811bfd84a5070/src/perfectoid_space.lean#L22">https://github.com/kbuzzard/lean-perfectoid-spaces/blob/b1e6489145be504e64a009226c6811bfd84a5070/src/perfectoid_space.lean#L22</a> Why isn't there a <code>∃</code> here?</p>

<a name="127649589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127649589" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127649589">Patrick Massot (Jun 06 2018 at 10:40)</a>:</h4>
<p>Do we have a roadmap saying which parts of Wedhorn are needed?</p>

<a name="127650170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127650170" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127650170">Johan Commelin (Jun 06 2018 at 10:58)</a>:</h4>
<p>It is equivalent up to a choice, right?</p>

<a name="127650175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127650175" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127650175">Johan Commelin (Jun 06 2018 at 10:58)</a>:</h4>
<p>And I think the roadmap is under construction.</p>

<a name="127651738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127651738" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127651738">Johan Commelin (Jun 06 2018 at 11:45)</a>:</h4>
<p>Ooh, there is a tiny typo in <code>subrel.lean</code>. We need <code>\alpha</code> to be of type <code>Type*</code>. Without the <code>*</code> Kenny's code gets an error.</p>

<a name="127652798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127652798" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127652798">Kevin Buzzard (Jun 06 2018 at 12:13)</a>:</h4>
<blockquote>
<p>Do we have a roadmap saying which parts of Wedhorn are needed?</p>
</blockquote>
<p>It's on the way</p>

<a name="127652800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127652800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127652800">Kevin Buzzard (Jun 06 2018 at 12:13)</a>:</h4>
<p>I keep trying to do everything</p>

<a name="127652804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127652804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127652804">Kevin Buzzard (Jun 06 2018 at 12:13)</a>:</h4>
<p>maybe I should post some basic info and then work on it more</p>

<a name="127666129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127666129" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127666129">Johan Commelin (Jun 06 2018 at 17:04)</a>:</h4>
<p>Yes, some issues with basics would be totally fine.</p>

<a name="127669147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127669147" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127669147">Patrick Massot (Jun 06 2018 at 18:05)</a>:</h4>
<p>I ran into <a href="https://en.wikipedia.org/wiki/Guy_Henniart" target="_blank" title="https://en.wikipedia.org/wiki/Guy_Henniart">Guy Henniart</a> on the train this morning. I told him about schemes and perfectoid spaces in Lean, he was very interested. He told me proof assistants will probably be part of the future of mathematics and we should try to use this opportunity to tighten our links with the CS department, maybe hiring someone working on this.</p>

<a name="127669203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127669203" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127669203">Kenny Lau (Jun 06 2018 at 18:06)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span></p>

<a name="127669223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127669223" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127669223">Kenny Lau (Jun 06 2018 at 18:06)</a>:</h4>
<p>he proved local langland for GL(n) :o</p>

<a name="127669251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127669251" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127669251">Patrick Massot (Jun 06 2018 at 18:07)</a>:</h4>
<p>Yes it's that level: stuff Scholze reproved when he was a 1st year undergrad</p>

<a name="127669259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127669259" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127669259">Patrick Massot (Jun 06 2018 at 18:07)</a>:</h4>
<p>very impressive from Guy</p>

<a name="127669267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127669267" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127669267">Kenny Lau (Jun 06 2018 at 18:07)</a>:</h4>
<blockquote>
<p>"Une preuve simple des conjectures de Langlands pour GL(n) sur un corps p-adique"</p>
</blockquote>

<a name="127669269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127669269" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127669269">Kenny Lau (Jun 06 2018 at 18:07)</a>:</h4>
<p>"une preuve simple"</p>

<a name="127669317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127669317" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127669317">Kenny Lau (Jun 06 2018 at 18:08)</a>:</h4>
<p>and one of my body parts is made of chicken</p>

<a name="127669338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127669338" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127669338">Reid Barton (Jun 06 2018 at 18:08)</a>:</h4>
<p>maybe the proof has no nontrivial subproofs</p>

<a name="127669449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127669449" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127669449">Johan Commelin (Jun 06 2018 at 18:10)</a>:</h4>
<p>Patrick, that's cool news! I really like it that people are enthusiastic about these formalisations. So far most people I encounter only shrug their shoulders...</p>

<a name="127669474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127669474" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127669474">Patrick Massot (Jun 06 2018 at 18:10)</a>:</h4>
<p>It was also funny seeing him reacting when I said there would be riots if Scholze doesn't get his medal in Rio. He completely failed to picture how this could happen (Scholze not getting the medal).</p>

<a name="127669505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127669505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127669505">Patrick Massot (Jun 06 2018 at 18:11)</a>:</h4>
<p>Johan: yes, this is why I tell this story here. It was a pretty unusual reaction</p>

<a name="127669560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127669560" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127669560">Patrick Massot (Jun 06 2018 at 18:12)</a>:</h4>
<p>Especially since Guy is from a generation that can barely use a computer to write an email</p>

<a name="127669574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127669574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127669574">Patrick Massot (Jun 06 2018 at 18:12)</a>:</h4>
<p>Next week I should try to ask Serre what he thinks about proof assistants</p>

<a name="127669580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127669580" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127669580">Johan Commelin (Jun 06 2018 at 18:12)</a>:</h4>
<p>Trollolol</p>

<a name="127669878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127669878" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127669878">Kevin Buzzard (Jun 06 2018 at 18:18)</a>:</h4>
<p>An algebraist in my department went to the Loeser conference last week and said that Hales had mentioned the schemes work in his talk. But I guess Hales is biased :-)</p>

<a name="127670020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127670020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127670020">Johan Commelin (Jun 06 2018 at 18:20)</a>:</h4>
<p>Ok, but this is only an encouragement that we really should get perfectoid spaces in Lean before Rio!</p>

<a name="127670044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127670044" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127670044">Patrick Massot (Jun 06 2018 at 18:21)</a>:</h4>
<p>It looks like it's almost done</p>

<a name="127670049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127670049" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127670049">Johan Commelin (Jun 06 2018 at 18:21)</a>:</h4>
<p>If Scholze showed some interest, and now Henniart...</p>

<a name="127670057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127670057" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127670057">Kenny Lau (Jun 06 2018 at 18:21)</a>:</h4>
<p>who is Rio?</p>

<a name="127670524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127670524" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127670524">Johan Commelin (Jun 06 2018 at 18:31)</a>:</h4>
<blockquote>
<p>It looks like it's almost done</p>
</blockquote>
<p>I guess you have to place quite a bit of emphasis on <em>looks</em></p>

<a name="127735398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735398">Kevin Buzzard (Jun 07 2018 at 19:41)</a>:</h4>
<p><a href="https://github.com/kbuzzard/lean-perfectoid-spaces/issues/3" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/issues/3">https://github.com/kbuzzard/lean-perfectoid-spaces/issues/3</a></p>

<a name="127735457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735457" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735457">Kevin Buzzard (Jun 07 2018 at 19:42)</a>:</h4>
<p>I had a good look through the maths last night and I don't see any major difficulties, but who knows.</p>

<a name="127735490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735490" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735490">Patrick Massot (Jun 07 2018 at 19:43)</a>:</h4>
<p>"Page numbers are all for Huber's notes." I guess you meant Wedhorn?</p>

<a name="127735493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735493" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735493">Kevin Buzzard (Jun 07 2018 at 19:43)</a>:</h4>
<p>ooh thanks</p>

<a name="127735498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735498" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735498">Kevin Buzzard (Jun 07 2018 at 19:43)</a>:</h4>
<p>I do that a lot!</p>

<a name="127735549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735549" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735549">Patrick Massot (Jun 07 2018 at 19:44)</a>:</h4>
<p>Lean 7 will tell you about such typos on Github</p>

<a name="127735742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735742" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735742">Patrick Massot (Jun 07 2018 at 19:48)</a>:</h4>
<p>I'm not sure I understand the dependency graph</p>

<a name="127735754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735754" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735754">Kevin Buzzard (Jun 07 2018 at 19:49)</a>:</h4>
<p>I'm not surprised</p>

<a name="127735755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735755" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735755">Kevin Buzzard (Jun 07 2018 at 19:49)</a>:</h4>
<p>Should I explain it?</p>

<a name="127735758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735758">Kevin Buzzard (Jun 07 2018 at 19:49)</a>:</h4>
<p>In the issue, I mean?</p>

<a name="127735763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735763" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735763">Patrick Massot (Jun 07 2018 at 19:49)</a>:</h4>
<p>It would help if you want help on this</p>

<a name="127735815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735815" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735815">Patrick Massot (Jun 07 2018 at 19:50)</a>:</h4>
<p>Because currently it's not clear how the work could be divided</p>

<a name="127735841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735841">Patrick Massot (Jun 07 2018 at 19:51)</a>:</h4>
<p>Is Spv(A) a typo or something different from Spa(A)?</p>

<a name="127735842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735842" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735842">Patrick Massot (Jun 07 2018 at 19:51)</a>:</h4>
<p>Maybe v is valuation?</p>

<a name="127735843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735843">Kevin Buzzard (Jun 07 2018 at 19:51)</a>:</h4>
<p>something different</p>

<a name="127735844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735844" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735844">Kevin Buzzard (Jun 07 2018 at 19:51)</a>:</h4>
<p>I didn't make the notation</p>

<a name="127735848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735848" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735848">Patrick Massot (Jun 07 2018 at 19:51)</a>:</h4>
<p>it appears only once in the issue</p>

<a name="127735889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735889">Kevin Buzzard (Jun 07 2018 at 19:52)</a>:</h4>
<p>It's an auxilary definition :-)</p>

<a name="127735896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735896" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735896">Kevin Buzzard (Jun 07 2018 at 19:52)</a>:</h4>
<p>I'll add some comments</p>

<a name="127735998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127735998" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127735998">Patrick Massot (Jun 07 2018 at 19:55)</a>:</h4>
<p>Roughly, how many pages of Wedhorn are actually required for this definition of adic spaces?</p>

<a name="127736514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736514" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736514">Kevin Buzzard (Jun 07 2018 at 20:05)</a>:</h4>
<p>In retrospect I don't think that many.</p>

<a name="127736560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736560" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736560">Kevin Buzzard (Jun 07 2018 at 20:06)</a>:</h4>
<p>The hard work might be proving that an affinoid adic space is an adic space</p>

<a name="127736562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736562" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736562">Kevin Buzzard (Jun 07 2018 at 20:06)</a>:</h4>
<p>however</p>

<a name="127736570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736570" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736570">Kevin Buzzard (Jun 07 2018 at 20:06)</a>:</h4>
<p>that might be easier than proving that an affine scheme is a scheme</p>

<a name="127736573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736573" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736573">Kevin Buzzard (Jun 07 2018 at 20:06)</a>:</h4>
<p>because O_X is a sheaf on Spec(R)</p>

<a name="127736577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736577" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736577">Kevin Buzzard (Jun 07 2018 at 20:06)</a>:</h4>
<p>and the analogous fact for Spa(R) is not true</p>

<a name="127736581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736581">Kevin Buzzard (Jun 07 2018 at 20:06)</a>:</h4>
<p>so an affinoid adic space is Spa(R) for an R for which it is true</p>

<a name="127736587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736587" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736587">Kevin Buzzard (Jun 07 2018 at 20:07)</a>:</h4>
<p>Aah, I've got it</p>

<a name="127736591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736591" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736591">Kevin Buzzard (Jun 07 2018 at 20:07)</a>:</h4>
<p>The hard thing will be proving that an affinoid perfectoid space is a perfectoid space</p>

<a name="127736594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736594" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736594">Kevin Buzzard (Jun 07 2018 at 20:07)</a>:</h4>
<p>That will need far more stuff</p>

<a name="127736737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736737" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736737">Kevin Buzzard (Jun 07 2018 at 20:10)</a>:</h4>
<p>but we don't need to advertise that, right? ;-)</p>

<a name="127736757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736757" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736757">Patrick Massot (Jun 07 2018 at 20:11)</a>:</h4>
<p>Is there any easier example of a perfectoid space?</p>

<a name="127736817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736817" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736817">Kevin Buzzard (Jun 07 2018 at 20:12)</a>:</h4>
<p>The empty space</p>

<a name="127736826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736826" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736826">Kevin Buzzard (Jun 07 2018 at 20:12)</a>:</h4>
<p>there is literally no simple example of a perfectoid space other than this</p>

<a name="127736835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736835" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736835">Patrick Massot (Jun 07 2018 at 20:12)</a>:</h4>
<p>That's what I feared</p>

<a name="127736836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736836" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736836">Kevin Buzzard (Jun 07 2018 at 20:12)</a>:</h4>
<p>because the second simplest example is Spa(K,K^o) with K a perfectoid field</p>

<a name="127736840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736840" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736840">Patrick Massot (Jun 07 2018 at 20:12)</a>:</h4>
<p>So we can't really escape that example</p>

<a name="127736847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736847">Kevin Buzzard (Jun 07 2018 at 20:12)</a>:</h4>
<p>well, at least it's a field</p>

<a name="127736863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736863" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736863">Kevin Buzzard (Jun 07 2018 at 20:13)</a>:</h4>
<p>Something like C_p, the completion of an algebraic closure of the p-adic numbers, is a relatively straightforward example of a perfectoid field</p>

<a name="127736872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736872" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736872">Kevin Buzzard (Jun 07 2018 at 20:13)</a>:</h4>
<p>don't worry, it's algebraically closed</p>

<a name="127736875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736875" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736875">Kevin Buzzard (Jun 07 2018 at 20:13)</a>:</h4>
<p>you don't have to go on forever</p>

<a name="127736878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736878" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736878">Patrick Massot (Jun 07 2018 at 20:13)</a>:</h4>
<p>And if we want to prove any result about this definition, beyond having an example, is it super hard to prove that tilting thing?</p>

<a name="127736879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736879" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736879">Kevin Buzzard (Jun 07 2018 at 20:13)</a>:</h4>
<p>We number theorists tell people that C_p is our version of the complex numbers</p>

<a name="127736921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736921" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736921">Patrick Massot (Jun 07 2018 at 20:14)</a>:</h4>
<p>Corollary 3.20 in the diamonds paper</p>

<a name="127736923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736923" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736923">Kevin Buzzard (Jun 07 2018 at 20:14)</a>:</h4>
<p>Oh yeah the tilting thing needs a whole bunch of commutative algebra</p>

<a name="127736931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736931" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736931">Kevin Buzzard (Jun 07 2018 at 20:14)</a>:</h4>
<p>almost etale extensions</p>

<a name="127736932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736932">Kevin Buzzard (Jun 07 2018 at 20:14)</a>:</h4>
<p>probably cotangent complex</p>

<a name="127736936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736936" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736936">Kevin Buzzard (Jun 07 2018 at 20:14)</a>:</h4>
<p>although actually maybe you could instead use my work with Verberkmoes</p>

<a name="127736947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736947">Kevin Buzzard (Jun 07 2018 at 20:15)</a>:</h4>
<p>a bunch of almost mathematics though</p>

<a name="127736956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736956" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736956">Kevin Buzzard (Jun 07 2018 at 20:15)</a>:</h4>
<p>derived categories</p>

<a name="127736962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736962" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736962">Kevin Buzzard (Jun 07 2018 at 20:15)</a>:</h4>
<p>yeah it would be a good challenge</p>

<a name="127736976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127736976" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127736976">Kevin Buzzard (Jun 07 2018 at 20:15)</a>:</h4>
<p>If you did that then serious people would get interested</p>

<a name="127737029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127737029" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127737029">Kevin Buzzard (Jun 07 2018 at 20:16)</a>:</h4>
<p>because that is like an odd order theorem but one that people are interested in</p>

<a name="127737067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127737067" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127737067">Patrick Massot (Jun 07 2018 at 20:17)</a>:</h4>
<p>The proof is only two lines long in that diamonds paper: "The tilting process glues to give a functor X \maptos X^b . Theorem 3.13 globalizes to the following result." and the proof of Theorem 3.13 is "In [Sch12], these are only proved over a perfectoid field, but the proof works in general."</p>

<a name="127737115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127737115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127737115">Patrick Massot (Jun 07 2018 at 20:18)</a>:</h4>
<p>doesn't looks too bad</p>

<a name="127737413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127737413" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127737413">Kevin Buzzard (Jun 07 2018 at 20:24)</a>:</h4>
<p>Yes the work is tilting an affinoid perfectoid and...I guess writing down the definition of the tilt might not be so hard, come to think of it. It's proving that the space and its tilt have the same geometry that's hard</p>

<a name="127737432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127737432" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127737432">Kevin Buzzard (Jun 07 2018 at 20:24)</a>:</h4>
<p>A huge generalisation of Fontaine-Wintenberger and Faltings</p>

<a name="127737728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127737728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127737728">Kevin Buzzard (Jun 07 2018 at 20:30)</a>:</h4>
<p>OK so I just looked at the paper (I'm travelling currently). The hard part is the equivalence, that is a lot of content. Maybe the definition of tilting might be possible.</p>

<a name="127737756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127737756" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127737756">Patrick Massot (Jun 07 2018 at 20:31)</a>:</h4>
<p>Is there  anything simpler but still significant that could be proved about those spaces?</p>

<a name="127741865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127741865" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127741865">Kevin Buzzard (Jun 07 2018 at 22:07)</a>:</h4>
<p>I guess one could prove that if A is perfectoid then Spa (A) is a perfectoid space. Scholze's original proof used tilting and a whole bunch of machinery. Verberkmoes and I found a much shorter direct proof. But doing basic stuff like defining perfectoids is the sort of thing we can do "in our spare time" -- formalising my paper would be a serious endeavour, although of course it's something I've considered. Most things in the area are impossibly hard or just very long. There are hundreds of pages by gabber and Romero that would be a joy to do but would take forever</p>

<a name="127751773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127751773" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127751773">Johan Commelin (Jun 08 2018 at 03:09)</a>:</h4>
<p>I do think that it would be dissapointing if we have no examples at all... Defining tilting will be very nice PR I think. But it would be more 'honest' to first prove that Spa(A) is perfectoid (given that you have a proof without tilting).</p>

<a name="127758361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127758361" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127758361">Kevin Buzzard (Jun 08 2018 at 06:47)</a>:</h4>
<p>I think that most mathematicians will not really understand what is going on, and wouldn't know the difference between defining a perfectoid space and defining tilting. But I'd happily be proved wrong. There are two independent questions. The one I was interested in (and still am) is: "given that most of the non-trivial work doing maths on computers is of a Kepler conjecture / odd order theorem nature, i.e. hundreds of lemmas about relative simply things, are these programs even _capable_ of doing mathematics with non-trivial objects?"</p>

<a name="127758370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127758370" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127758370">Kevin Buzzard (Jun 08 2018 at 06:47)</a>:</h4>
<p>I now think they are. But there's a different question, which is much more complicated:</p>

<a name="127758374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127758374" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127758374">Kevin Buzzard (Jun 08 2018 at 06:47)</a>:</h4>
<p>how to get one non-trivial theorem about one non-trivial object into these systems?</p>

<a name="127758376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127758376" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127758376">Kevin Buzzard (Jun 08 2018 at 06:47)</a>:</h4>
<p>And that will cost time and money</p>

<a name="127758416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127758416" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127758416">Kevin Buzzard (Jun 08 2018 at 06:48)</a>:</h4>
<p>it's not just a "hobby project" like defining a perfectoid space</p>

<a name="127758424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127758424" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127758424">Kevin Buzzard (Jun 08 2018 at 06:48)</a>:</h4>
<p>I have 4.5 hours of meetings with the UK science funding council EPSRC today (it's one big reason that I couldn't go to Hanoi)</p>

<a name="127758429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127758429" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127758429">Kevin Buzzard (Jun 08 2018 at 06:49)</a>:</h4>
<p>and this will come up</p>

<a name="127758430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127758430" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127758430">Johan Commelin (Jun 08 2018 at 06:49)</a>:</h4>
<p>Ok, good luck!</p>

<a name="127758432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127758432" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127758432">Johan Commelin (Jun 08 2018 at 06:49)</a>:</h4>
<p>Sounds like today is an important day</p>

<a name="127758433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127758433" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127758433">Kevin Buzzard (Jun 08 2018 at 06:49)</a>:</h4>
<p>but if they're not interested then I don't quite know what happens next</p>

<a name="127758435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127758435" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127758435">Kevin Buzzard (Jun 08 2018 at 06:49)</a>:</h4>
<p>I guess I am more interested in hearing their thoughts about setting up something big</p>

<a name="127758437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127758437" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127758437">Kevin Buzzard (Jun 08 2018 at 06:50)</a>:</h4>
<p>and whether they'd encourage me to apply for funding</p>

<a name="127758735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127758735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127758735">Johan Commelin (Jun 08 2018 at 06:58)</a>:</h4>
<p>So, when does the meeting start? (Or rather, when will you be back to tell us about the good news <span class="emoji emoji-1f609" title="wink">:wink:</span>?)</p>

<a name="127759770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127759770" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127759770">Kevin Buzzard (Jun 08 2018 at 07:34)</a>:</h4>
<p>I don't think any decisions will be made today!</p>

<a name="127759772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127759772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127759772">Kevin Buzzard (Jun 08 2018 at 07:34)</a>:</h4>
<p>But there will be a chance to test the water.</p>

<a name="127760289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127760289" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127760289">Kevin Buzzard (Jun 08 2018 at 07:52)</a>:</h4>
<p><a href="http://www.math.columbia.edu/~harris/otherarticles_files/perfectoid.pdf" target="_blank" title="http://www.math.columbia.edu/~harris/otherarticles_files/perfectoid.pdf">www.math.columbia.edu/~harris/otherarticles_files/perfectoid.pdf</a></p>

<a name="127760292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127760292" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127760292">Kevin Buzzard (Jun 08 2018 at 07:52)</a>:</h4>
<p>I hadn't been aware of this article until the other day</p>

<a name="127760379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127760379" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127760379">Johan Commelin (Jun 08 2018 at 07:55)</a>:</h4>
<p>The introduction is really nice.</p>

<a name="127761231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127761231" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127761231">Kevin Buzzard (Jun 08 2018 at 08:23)</a>:</h4>
<p>[sorry, double post fail]</p>

<a name="127765205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127765205" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127765205">Johan Commelin (Jun 08 2018 at 10:30)</a>:</h4>
<p>Kevin, do we even need the notion of Tate ring?</p>

<a name="127769845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127769845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127769845">Kevin Buzzard (Jun 08 2018 at 12:45)</a>:</h4>
<p>Maybe not but it's pretty easy to formalise if you have everything else. A perfectoid ring is a Tate ring plus ...</p>

<a name="127771741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127771741" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127771741">Johan Commelin (Jun 08 2018 at 13:24)</a>:</h4>
<p>If type class inference tries to turn an ideal into a module it starts looping to find a ring. Same issue that Patrick has I guess.</p>

<a name="127771945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127771945" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127771945">Patrick Massot (Jun 08 2018 at 13:28)</a>:</h4>
<p>modules are very dangerous for type class resolution. I'm still waiting for Mario, Johannes and Sebastian to really solve this issue</p>

<a name="127772171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127772171" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127772171">Johan Commelin (Jun 08 2018 at 13:32)</a>:</h4>
<p>Hmmz... we need finitely generated ideals. It would be very useful to have <code>span</code> from linear algebra. But then we need to treat an ideal as a module.</p>

<a name="127772199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127772199" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127772199">Kevin Buzzard (Jun 08 2018 at 13:33)</a>:</h4>
<p>If there are actual technical problem with modules being a typeclass then surely one solution is just to stop them being a typeclass?</p>

<a name="127772245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127772245" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127772245">Johan Commelin (Jun 08 2018 at 13:34)</a>:</h4>
<p>And have all the code be utterly unreadable to mathematicians...</p>

<a name="127772268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127772268" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127772268">Johan Commelin (Jun 08 2018 at 13:34)</a>:</h4>
<p>By the way, Kevin, are the meetings over yet? Were they receptive to your ideas/plans?</p>

<a name="127772447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127772447" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127772447">Johan Commelin (Jun 08 2018 at 13:38)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Is it ok to add <a href="https://github.com/johoelzl/mason-stother" target="_blank" title="https://github.com/johoelzl/mason-stother">https://github.com/johoelzl/mason-stother</a> as dependency. Then we have univariate polynomials. And this is scheduled to go into mathlib anyway, so the dependecy would be temporary.</p>

<a name="127774148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127774148" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127774148">Johan Commelin (Jun 08 2018 at 14:14)</a>:</h4>
<p><a href="https://github.com/jcommelin/lean-perfectoid-spaces/tree/Huber_pair" target="_blank" title="https://github.com/jcommelin/lean-perfectoid-spaces/tree/Huber_pair">https://github.com/jcommelin/lean-perfectoid-spaces/tree/Huber_pair</a> is a clumsy attempt to define Huber rings (up to the topological stuff).</p>

<a name="127774162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127774162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127774162">Johan Commelin (Jun 08 2018 at 14:14)</a>:</h4>
<p>But there is still a sorry to turn an ideal into a module.</p>

<a name="127788416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127788416" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127788416">Kevin Buzzard (Jun 08 2018 at 19:12)</a>:</h4>
<p>Money: I was encouraged to apply for it. Mason-Stothers -- is there a risk that we make this a dependency and then M-S gets PRed to mathlib and then stuff gets changed and then our code doesn't work? Or doesn't this matter?</p>

<a name="127788447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127788447" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127788447">Johan Commelin (Jun 08 2018 at 19:13)</a>:</h4>
<p>Not so much... we really use very little of it. That part of the interface shouldn't change.</p>

<a name="127788507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127788507" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127788507">Johan Commelin (Jun 08 2018 at 19:14)</a>:</h4>
<p>I can PR my subring branch into your repo if you want... it adds Mason-Stothers as dep.</p>

<a name="127788511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127788511" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127788511">Kevin Buzzard (Jun 08 2018 at 19:14)</a>:</h4>
<p>So then another question is: if we only use very little of it, is it best to just cut and paste a small part of it into our repo directly and then delete it later?</p>

<a name="127788514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127788514" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127788514">Kevin Buzzard (Jun 08 2018 at 19:14)</a>:</h4>
<p>I just have no idea how to run a project like this.</p>

<a name="127788527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127788527" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127788527">Johan Commelin (Jun 08 2018 at 19:15)</a>:</h4>
<p>No, I would just go with the dependency.</p>

<a name="127788536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127788536" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127788536">Johan Commelin (Jun 08 2018 at 19:15)</a>:</h4>
<p>And move on to interesting stuff (-;</p>

<a name="127788540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127788540" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127788540">Kevin Buzzard (Jun 08 2018 at 19:15)</a>:</h4>
<p>Ok then I'll add the dependency. Can it wait a day? Can you do it?</p>

<a name="127788542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127788542" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127788542">Johan Commelin (Jun 08 2018 at 19:15)</a>:</h4>
<p>I did it.</p>

<a name="127788545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127788545" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127788545">Kevin Buzzard (Jun 08 2018 at 19:15)</a>:</h4>
<p>I have relatives here so I should go</p>

<a name="127788546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127788546" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127788546">Johan Commelin (Jun 08 2018 at 19:15)</a>:</h4>
<p>Shall I PR?</p>

<a name="127788547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127788547" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127788547">Kevin Buzzard (Jun 08 2018 at 19:15)</a>:</h4>
<p>thanks</p>

<a name="127788550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127788550" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127788550">Kevin Buzzard (Jun 08 2018 at 19:15)</a>:</h4>
<p>yes please PR</p>

<a name="127788551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127788551" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127788551">Johan Commelin (Jun 08 2018 at 19:15)</a>:</h4>
<p>Aaah, ok, see you later.</p>

<a name="127788598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127788598" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127788598">Kevin Buzzard (Jun 08 2018 at 19:16)</a>:</h4>
<p>I will look over it later. Assia suggested that I understand all the code I accept so I'd like to read through it before I accept it but I'm sure I will</p>

<a name="127788625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127788625" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127788625">Johan Commelin (Jun 08 2018 at 19:17)</a>:</h4>
<p>Well, I'm a newbie... so maybe you want to improve little things...</p>

<a name="127788974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127788974" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127788974">Patrick Massot (Jun 08 2018 at 19:24)</a>:</h4>
<p>Don't you think we should write a LaTeX file describing what has been formalized so far, and update it each time something is added? If we do this in real time it shouldn't be too painful. And I think it would be really useful. It could even include some comments about the formalization choices.</p>

<a name="127789019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127789019" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127789019">Patrick Massot (Jun 08 2018 at 19:25)</a>:</h4>
<p><code>class normal_add_subgroup [add_group α] (s : set α) extends is_add_subgroup s : Prop := (normal : ∀ n ∈ s, ∀ g : α, g + n - g ∈ s)</code> WTF?!</p>

<a name="127789070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127789070" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127789070">Johan Commelin (Jun 08 2018 at 19:26)</a>:</h4>
<p>You can have tick boxes in Github issues, right?</p>

<a name="127789076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127789076" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127789076">Patrick Massot (Jun 08 2018 at 19:26)</a>:</h4>
<p>Do perfectoid spaces include non commutative groups with additive notations?</p>

<a name="127789077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127789077" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127789077">Johan Commelin (Jun 08 2018 at 19:26)</a>:</h4>
<p>That might be useful</p>

<a name="127789090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127789090" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127789090">Johan Commelin (Jun 08 2018 at 19:26)</a>:</h4>
<p>I didn't write that file. I just copy-pasted it, and then find-replaced stuff to get additive versions.</p>

<a name="127789104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127789104" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127789104">Patrick Massot (Jun 08 2018 at 19:27)</a>:</h4>
<p>But this bit is evil</p>

<a name="127789114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127789114" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127789114">Johan Commelin (Jun 08 2018 at 19:27)</a>:</h4>
<p>I agree. I am just saying that I didn't actually read that part of the file.</p>

<a name="127789123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127789123" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127789123">Johan Commelin (Jun 08 2018 at 19:27)</a>:</h4>
<p>I am still annoyed that I even had to do all that duplication.</p>

<a name="127789455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127789455" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127789455">Johan Commelin (Jun 08 2018 at 19:34)</a>:</h4>
<p>Patrick, I think it might also be a good idea to have accompanying comments (like Kevin did in parts of the files).</p>

<a name="127789470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127789470" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127789470">Johan Commelin (Jun 08 2018 at 19:35)</a>:</h4>
<p>That will help interested mathematicians to figure out what is going on.</p>

<a name="127789481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127789481" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127789481">Patrick Massot (Jun 08 2018 at 19:35)</a>:</h4>
<p>Sure. Every documentation is good</p>

<a name="127789546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127789546" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127789546">Johan Commelin (Jun 08 2018 at 19:37)</a>:</h4>
<p>Concerning the LaTeX-file, I think that's fine. But then maybe we shouldn't have issues as well. Otherwise we will have Zulip, issues, comments in the code, TeX-file,...</p>

<a name="127789552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127789552" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127789552">Johan Commelin (Jun 08 2018 at 19:37)</a>:</h4>
<p>And then we get lost.</p>

<a name="127789561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127789561" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127789561">Patrick Massot (Jun 08 2018 at 19:37)</a>:</h4>
<p>Issues are about things to do. LaTeX file would be about things that are done</p>

<a name="127789639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127789639" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127789639">Johan Commelin (Jun 08 2018 at 19:38)</a>:</h4>
<p>Yes, and PR's form the boundary, and Zulip is the glue that keeps everything together.</p>

<a name="127816932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127816932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127816932">Patrick Massot (Jun 09 2018 at 10:53)</a>:</h4>
<p>Family request me, but see <a href="https://github.com/PatrickMassot/lean-perfectoid-spaces/commit/334581954ca07e38d16526a264ac85807ee221df" target="_blank" title="https://github.com/PatrickMassot/lean-perfectoid-spaces/commit/334581954ca07e38d16526a264ac85807ee221df">https://github.com/PatrickMassot/lean-perfectoid-spaces/commit/334581954ca07e38d16526a264ac85807ee221df</a> to see what I'm working on (comments are already welcome)</p>

<a name="127816937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127816937" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127816937">Patrick Massot (Jun 09 2018 at 10:53)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span></p>

<a name="127816987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127816987" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127816987">Patrick Massot (Jun 09 2018 at 10:54)</a>:</h4>
<p>when I'll be done proving that uniform_space instance I will quickly be stuck waiting for Johan's PR merge</p>

<a name="127817563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127817563" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127817563">Johan Commelin (Jun 09 2018 at 11:16)</a>:</h4>
<p>Cool!</p>

<a name="127817564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127817564" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127817564">Johan Commelin (Jun 09 2018 at 11:16)</a>:</h4>
<p>In my <code>Huber_pair</code> branch I have a stupid definition of <code>I</code>-adic topology</p>

<a name="127817566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127817566" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127817566">Johan Commelin (Jun 09 2018 at 11:16)</a>:</h4>
<p>But it doesn't give a uniform_space. So it is pretty useless.</p>

<a name="127817720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127817720" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127817720">Johan Commelin (Jun 09 2018 at 11:23)</a>:</h4>
<p>This:</p>
<div class="codehilite"><pre><span></span><span class="bp">+</span><span class="c1">-- Somehow we need R° both as a subset of R and a subtype.</span>
<span class="bp">+</span><span class="c1">-- There is a coercion from the set to the subtype but relying naively on it seems to bring</span>
<span class="bp">+</span><span class="c1">-- type class resolution issues</span>
<span class="bp">+</span><span class="kn">definition</span> <span class="n">power_bounded_subring</span> <span class="o">:=</span> <span class="o">{</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">//</span> <span class="n">is_power_bounded</span> <span class="n">r</span><span class="o">}</span>
<span class="bp">+</span><span class="kn">definition</span> <span class="n">power_bounded_subring_set</span> <span class="o">:=</span> <span class="o">{</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">|</span> <span class="n">is_power_bounded</span> <span class="n">r</span><span class="o">}</span>
</pre></div>


<p>That is exactly the kind of trouble that I have also been having with subrings. I have them both as subset and subtype.</p>

<a name="127818859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127818859" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127818859">Chris Hughes (Jun 09 2018 at 12:09)</a>:</h4>
<p>Have you tried sticking rigidly to the set notation, and always using coercions and never the subtype. If there's an instance about <code>↥{r : R | is_power_bounded r}</code>, it won't apply it to <code>{r : R // is_power_bounded r}</code></p>

<a name="127819376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819376" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819376">Johan Commelin (Jun 09 2018 at 12:31)</a>:</h4>
<p>What is the advantage of working with subsets instead of subtypes?</p>

<a name="127819469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819469" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819469">Johan Commelin (Jun 09 2018 at 12:34)</a>:</h4>
<p>Aah, <span class="user-mention" data-user-id="110044">@Chris Hughes</span> , here's a problem: we have <code>topological_space.induced</code> which happily gives you a topology on a subtype. But not—I think—on a subset. So if you want a topological subring, you need the subring as a subtype.</p>

<a name="127819478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819478" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819478">Chris Hughes (Jun 09 2018 at 12:35)</a>:</h4>
<p>The point is don't mix <code>↥{r : R | is_power_bounded r}</code> and <code>{r : R // is_power_bounded r}</code> if you want type class inference to work.</p>

<a name="127819518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819518" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819518">Chris Hughes (Jun 09 2018 at 12:36)</a>:</h4>
<p>And if some of your code requires sets, you have to stick to the former.</p>

<a name="127819525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819525" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819525">Johan Commelin (Jun 09 2018 at 12:37)</a>:</h4>
<p>And if some of it requires subtypes? Then you stick with the latter...</p>

<a name="127819526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819526" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819526">Johan Commelin (Jun 09 2018 at 12:37)</a>:</h4>
<p>But what is an example of "code [that] requirese sets"?</p>

<a name="127819528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819528" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819528">Chris Hughes (Jun 09 2018 at 12:37)</a>:</h4>
<p>If it requires subtypes, then you use the coercion from a set and not <code>//</code></p>

<a name="127819568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819568" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819568">Johan Commelin (Jun 09 2018 at 12:38)</a>:</h4>
<p>I am new to all this type theory stuff, and so far I have been thinking of types as "sets for computer scientists", and I just treat them as sets. And then all of a sudden there are subsets and subtypes, and I don't see why we smuggle subsets in through the backdoor.</p>

<a name="127819569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819569">Chris Hughes (Jun 09 2018 at 12:38)</a>:</h4>
<p>Unless you only ever need subtypes. In which case don't use sets.</p>

<a name="127819574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819574">Johan Commelin (Jun 09 2018 at 12:39)</a>:</h4>
<blockquote>
<p>If it requires subtypes, then you use the coercion from a set and not <code>//</code></p>
</blockquote>
<p>seems to conflict with</p>
<blockquote>
<p>The point is don't mix ↥{r : R | is_power_bounded r} and {r : R // is_power_bounded r} if you want type class inference to work.</p>
</blockquote>

<a name="127819575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819575" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819575">Chris Hughes (Jun 09 2018 at 12:39)</a>:</h4>
<p>No it doesn't. Only use the first one.</p>

<a name="127819620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819620" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819620">Johan Commelin (Jun 09 2018 at 12:40)</a>:</h4>
<p>I tried, and then it couldn't infer a topological space on it.</p>

<a name="127819622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819622" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819622">Johan Commelin (Jun 09 2018 at 12:40)</a>:</h4>
<p>Because coercion and type inference don't work together.</p>

<a name="127819628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819628" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819628">Nicholas Scheel (Jun 09 2018 at 12:41)</a>:</h4>
<p>types are not sets; the difference is that values are assigned exactly one type (typing judgments are rigid; although, of course, you can prove that two types are equal and use <code>eq.mp(r)</code> ...), whereas set membership in set theory says nothing about the type of object in the set, which is totally ridiculous imho</p>

<a name="127819629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819629" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819629">Chris Hughes (Jun 09 2018 at 12:41)</a>:</h4>
<p>Use the coercion for your topological space instance as well?</p>

<a name="127819630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819630" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819630">Johan Commelin (Jun 09 2018 at 12:41)</a>:</h4>
<p>I still haven't seen (here or in other threads where the topic came up) any reason to use subsets. I am just confused, and I would like to know why they are cool.</p>

<a name="127819634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819634" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819634">Chris Hughes (Jun 09 2018 at 12:42)</a>:</h4>
<p>i.e. prove <code>↥{r : R | is_power_bounded r}</code> is a topological space not <code>{r : R // is_power_bounded r}</code></p>

<a name="127819673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819673" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819673">Johan Commelin (Jun 09 2018 at 12:42)</a>:</h4>
<blockquote>
<p>types are not sets; the difference is that values are assigned exactly one type (typing judgments are rigid; although, of course, you can prove that two types are equal and use <code>eq.mp(r)</code> ...), whereas set membership in set theory says nothing about the type of object in the set, which is totally ridiculous imho</p>
</blockquote>
<p><span class="user-mention" data-user-id="111651">@Nicholas Scheel</span> Ok, great, so why do we smuggle set membership back in, if it is so ridiculous?</p>

<a name="127819674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819674" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819674">Nicholas Scheel (Jun 09 2018 at 12:42)</a>:</h4>
<p>the model for a type-theoretic “set” is <code>set a := a -&gt; Prop</code> which is precisely a “set” of elements (of a particular type) satisfying that predicate (conceptually)</p>

<a name="127819676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819676" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819676">Chris Hughes (Jun 09 2018 at 12:42)</a>:</h4>
<p>Or always stick to subtypes. Subsets are good because they can intersect each other and be subsets of each other.</p>

<a name="127819677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819677" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819677">Johan Commelin (Jun 09 2018 at 12:43)</a>:</h4>
<p>Ok, and subtypes find that hard?</p>

<a name="127819684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819684" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819684">Johan Commelin (Jun 09 2018 at 12:43)</a>:</h4>
<p>We can define an intersection of subtypes right? Just take <code>\and</code> of their properties.</p>

<a name="127819685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819685" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819685">Nicholas Scheel (Jun 09 2018 at 12:43)</a>:</h4>
<p>but <code>set</code> just a predicate, it doesn’t contain any elements of the type ... which is what a subtype is for: it contains an element and the proof that it is in the corresponding set, essentially</p>

<a name="127819687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819687" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819687">Chris Hughes (Jun 09 2018 at 12:43)</a>:</h4>
<p>Because everything only has one type, there's no such thing really as the intersection of two subtypes.</p>

<a name="127819728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819728">Nicholas Scheel (Jun 09 2018 at 12:44)</a>:</h4>
<p>the subtypes would need to have the same supertype, otherwise it doesn’t make sense</p>

<a name="127819736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819736" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819736">Johan Commelin (Jun 09 2018 at 12:45)</a>:</h4>
<p>Right, I see.</p>

<a name="127819776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819776" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819776">Johan Commelin (Jun 09 2018 at 12:46)</a>:</h4>
<p>But if I have two subtypes of X, say <code>S</code> and <code>T</code>, then I can do <code>subtype (\lam x, S.property x \and T.property x)</code>.</p>

<a name="127819784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819784">Johan Commelin (Jun 09 2018 at 12:47)</a>:</h4>
<p>But I understand that this is a clumsy way of doing intersections, and for subsets it is just a lot easier.</p>

<a name="127819824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819824">Johan Commelin (Jun 09 2018 at 12:48)</a>:</h4>
<p>So we need subsets and subtypes.</p>

<a name="127819827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819827" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819827">Chris Hughes (Jun 09 2018 at 12:49)</a>:</h4>
<p>And that would be hard to use if you had a proof that <code>∀ x : s, p x</code> and you had <code>x : subtype (\lam x, S.property x \and T.property x)</code></p>

<a name="127819834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819834" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819834">Johan Commelin (Jun 09 2018 at 12:49)</a>:</h4>
<p>So, at some point in my code I prove that if the subset <code>S</code> is a subring, then we have an instance of <code>ring S</code>. And I think here <code>S</code> is silently coerced to a subtype, for otherwise <code>ring S</code> doesn't typecheck.</p>

<a name="127819836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819836" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819836">Chris Hughes (Jun 09 2018 at 12:49)</a>:</h4>
<p>yes.</p>

<a name="127819837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819837" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819837">Johan Commelin (Jun 09 2018 at 12:50)</a>:</h4>
<p>But then some other code couldn't infer an instance of <code>ring (subtype S)</code>, and I got confused.</p>

<a name="127819879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819879" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819879">Johan Commelin (Jun 09 2018 at 12:50)</a>:</h4>
<p>So I also proved explicitly that I had an instance of <code>ring (subtype S)</code> by copy-pasting the other proof verbatim.</p>

<a name="127819880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819880" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819880">Chris Hughes (Jun 09 2018 at 12:50)</a>:</h4>
<p>Because it has to be the same expression for type class inference to work. definitional equality isn't good enough I think</p>

<a name="127819881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819881" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819881">Johan Commelin (Jun 09 2018 at 12:50)</a>:</h4>
<p>And then it worked. But now I don't see the point of the silent coercion.</p>

<a name="127819889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819889">Chris Hughes (Jun 09 2018 at 12:51)</a>:</h4>
<p>Which is why it's best to stick to coercions the whole time.</p>

<a name="127819891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819891" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819891">Johan Commelin (Jun 09 2018 at 12:51)</a>:</h4>
<p>I tried, but it didn't work.</p>

<a name="127819893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819893" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819893">Johan Commelin (Jun 09 2018 at 12:51)</a>:</h4>
<p>Maybe I didn't try hard enough (-;</p>

<a name="127819894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819894" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819894">Chris Hughes (Jun 09 2018 at 12:51)</a>:</h4>
<p>What didn't work?</p>

<a name="127819935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819935" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819935">Johan Commelin (Jun 09 2018 at 12:52)</a>:</h4>
<p>Sticking to coercions. (Or do you mean explicit coercions, instead of silent ones?)</p>

<a name="127819941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819941" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819941">Chris Hughes (Jun 09 2018 at 12:53)</a>:</h4>
<p>There both the same. What in particular didn't work?</p>

<a name="127819982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819982" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819982">Johan Commelin (Jun 09 2018 at 12:54)</a>:</h4>
<p>Let me try to find it.</p>

<a name="127819991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819991">Johan Commelin (Jun 09 2018 at 12:55)</a>:</h4>
<p>I think it was these lines: <a href="https://github.com/jcommelin/lean-perfectoid-spaces/blob/Huber_pair/src/adic_space.lean#L36-L38" target="_blank" title="https://github.com/jcommelin/lean-perfectoid-spaces/blob/Huber_pair/src/adic_space.lean#L36-L38">https://github.com/jcommelin/lean-perfectoid-spaces/blob/Huber_pair/src/adic_space.lean#L36-L38</a></p>

<a name="127819992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127819992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127819992">Johan Commelin (Jun 09 2018 at 12:55)</a>:</h4>
<p>But I don't have Lean here, so I can't test it. Sorry.</p>

<a name="127820047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127820047" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127820047">Chris Hughes (Jun 09 2018 at 12:57)</a>:</h4>
<p>I couldn't find <code>for_mathlib.subring</code></p>

<a name="127820050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127820050" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127820050">Johan Commelin (Jun 09 2018 at 12:57)</a>:</h4>
<p>Aah, that is in the <code>subring</code> branch</p>

<a name="127820089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127820089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127820089">Chris Hughes (Jun 09 2018 at 12:58)</a>:</h4>
<p>Found it.</p>

<a name="127820090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127820090" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127820090">Johan Commelin (Jun 09 2018 at 12:58)</a>:</h4>
<p>I thought <code>Huber_pair</code> was a branch of <code>subring</code></p>

<a name="127820091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127820091" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127820091">Patrick Massot (Jun 09 2018 at 12:58)</a>:</h4>
<p>need to be in branch <code>subring</code></p>

<a name="127820144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127820144" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127820144">Chris Hughes (Jun 09 2018 at 13:00)</a>:</h4>
<p>Did the <code>is_ideal I</code> not work. Or something else?</p>

<a name="127820152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127820152" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127820152">Johan Commelin (Jun 09 2018 at 13:00)</a>:</h4>
<p>No, I think it was with subrings and topological spaces</p>

<a name="127820155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127820155" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127820155">Johan Commelin (Jun 09 2018 at 13:00)</a>:</h4>
<p>Ok, maybe it was both.</p>

<a name="127820164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127820164" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127820164">Johan Commelin (Jun 09 2018 at 13:01)</a>:</h4>
<p>Because the <code>is_ideal I</code> needed to infer a ring structure <code>ring (subtype S)</code>, and that <code>(subtype S)</code> was explicit because of the topological stuff in those lines.</p>

<a name="127820257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127820257" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127820257">Chris Hughes (Jun 09 2018 at 13:04)</a>:</h4>
<p>I think this might be the issue <code>instance subtype.comm_ring [comm_ring R] {S : set R} [is_subring S] : comm_ring (subtype S)</code><br>
should be <code>instance subtype.comm_ring [comm_ring R] {S : set R} [is_subring S] : comm_ring S</code></p>

<a name="127820314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127820314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127820314">Chris Hughes (Jun 09 2018 at 13:06)</a>:</h4>
<p>Worst case scenario if you can't get the coercion to work is to literally do <code>@has_coe_to_sort.coe whatever</code> instead of <code>subtype S</code></p>

<a name="127820321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127820321" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127820321">Johan Commelin (Jun 09 2018 at 13:07)</a>:</h4>
<p>Ok, thanks! I'll try it out when I get back to lean!</p>

<a name="127822057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127822057" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127822057">Patrick Massot (Jun 09 2018 at 14:16)</a>:</h4>
<p>I need help with the following annoying lemma:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">prod</span><span class="bp">.</span><span class="n">swap</span> <span class="err">&#39;&#39;</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">×</span> <span class="n">R</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">V</span> <span class="bp">∧</span> <span class="bp">-</span><span class="n">x</span> <span class="bp">=</span> <span class="n">p</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">+</span> <span class="bp">-</span><span class="n">p</span><span class="bp">.</span><span class="n">fst</span><span class="o">}</span> <span class="bp">=</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">×</span> <span class="n">R</span> <span class="bp">|</span> <span class="n">p</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">+</span> <span class="bp">-</span><span class="n">p</span><span class="bp">.</span><span class="n">fst</span> <span class="err">∈</span> <span class="n">V</span><span class="o">}</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>

<a name="127822064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127822064" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127822064">Patrick Massot (Jun 09 2018 at 14:17)</a>:</h4>
<p>part of the problem is I'm not able to use <code>neg_eq_iff_neg_eq</code>, even inside <code>conv</code></p>

<a name="127822155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127822155" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127822155">Patrick Massot (Jun 09 2018 at 14:20)</a>:</h4>
<p>I'm also stuck on</p>
<div class="codehilite"><pre><span></span><span class="kn">variables</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_ring</span> <span class="n">R</span><span class="o">]</span>
<span class="n">def</span> <span class="n">nhd_zero</span> <span class="o">:=</span> <span class="o">(</span><span class="n">nhds</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">R</span><span class="o">))</span><span class="bp">.</span><span class="n">sets</span>

<span class="kn">lemma</span> <span class="n">nhd_zero_symmetric</span> <span class="o">{</span><span class="n">V</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">}</span> <span class="o">:</span> <span class="n">V</span> <span class="err">∈</span> <span class="n">nhd_zero</span> <span class="n">R</span> <span class="bp">→</span>  <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="bp">-</span><span class="n">a</span><span class="o">)</span> <span class="err">&#39;&#39;</span> <span class="n">V</span> <span class="err">∈</span> <span class="n">nhd_zero</span> <span class="n">R</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">dsimp</span> <span class="o">[</span><span class="n">nhd_zero</span><span class="o">],</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="n">continuous</span><span class="bp">.</span><span class="n">tendsto</span> <span class="o">(</span><span class="n">topological_add_group</span><span class="bp">.</span><span class="n">continuous_neg</span> <span class="n">R</span><span class="o">)</span> <span class="mi">0</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">filter</span><span class="bp">.</span><span class="n">tendsto</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">almost</span><span class="o">:=</span> <span class="n">this</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>

<a name="127822157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127822157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127822157">Patrick Massot (Jun 09 2018 at 14:20)</a>:</h4>
<p>But this is one is nastier since it involves filters</p>

<a name="127822393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127822393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127822393">Reid Barton (Jun 09 2018 at 14:30)</a>:</h4>
<p>How about this</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">prod</span><span class="bp">.</span><span class="n">swap</span> <span class="err">&#39;&#39;</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">×</span> <span class="n">R</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">V</span> <span class="bp">∧</span> <span class="bp">-</span><span class="n">x</span> <span class="bp">=</span> <span class="n">p</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">+</span> <span class="bp">-</span><span class="n">p</span><span class="bp">.</span><span class="n">fst</span><span class="o">}</span> <span class="bp">=</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">×</span> <span class="n">R</span> <span class="bp">|</span> <span class="n">p</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">+</span> <span class="bp">-</span><span class="n">p</span><span class="bp">.</span><span class="n">fst</span> <span class="err">∈</span> <span class="n">V</span><span class="o">}</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="n">set</span><span class="bp">.</span><span class="n">image_swap_eq_preimage_swap</span><span class="o">,</span> <span class="n">ext</span> <span class="n">p</span><span class="o">,</span> <span class="n">cases</span> <span class="n">p</span> <span class="k">with</span> <span class="n">r1</span> <span class="n">r2</span><span class="o">,</span>
  <span class="n">change</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">V</span> <span class="bp">∧</span> <span class="bp">-</span><span class="n">x</span> <span class="bp">=</span> <span class="n">r1</span> <span class="bp">-</span> <span class="n">r2</span><span class="o">)</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">r2</span> <span class="bp">-</span> <span class="n">r1</span> <span class="err">∈</span> <span class="n">V</span><span class="o">),</span>
  <span class="k">have</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="bp">-</span><span class="n">x</span> <span class="bp">=</span> <span class="n">r1</span> <span class="bp">-</span> <span class="n">r2</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">r2</span> <span class="bp">-</span> <span class="n">r1</span><span class="o">,</span>
    <span class="k">by</span> <span class="n">intro</span> <span class="n">x</span><span class="bp">;</span> <span class="n">rw</span> <span class="o">[</span><span class="n">neg_eq_iff_neg_eq</span><span class="o">,</span> <span class="n">eq_comm</span><span class="o">]</span><span class="bp">;</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">this</span><span class="o">],</span> <span class="n">simp</span>
<span class="kn">end</span>
</pre></div>

<a name="127822493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127822493" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127822493">Reid Barton (Jun 09 2018 at 14:34)</a>:</h4>
<p>For the second one, what you proved is <code>(λ a, -a) ⁻¹' V ∈ nhd_zero R</code>, so then show that <code>(λ a, -a) ⁻¹' V = (λ a, -a) '' V</code> somehow.</p>

<a name="127824162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127824162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127824162">Patrick Massot (Jun 09 2018 at 15:37)</a>:</h4>
<p>Thank you very much <span class="user-mention" data-user-id="110032">@Reid Barton</span>. <code>change</code> was the key for the first one</p>

<a name="127824168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127824168" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127824168">Patrick Massot (Jun 09 2018 at 15:37)</a>:</h4>
<p>For the second one I guess I only needed some encouragement ;-)</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">nhd_zero_symmetric</span> <span class="o">{</span><span class="n">V</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">}</span> <span class="o">:</span> <span class="n">V</span> <span class="err">∈</span> <span class="n">nhd_zero</span> <span class="n">A</span> <span class="bp">→</span>  <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="bp">-</span><span class="n">a</span><span class="o">)</span> <span class="err">&#39;&#39;</span> <span class="n">V</span> <span class="err">∈</span> <span class="n">nhd_zero</span> <span class="n">A</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">H</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="n">continuous</span><span class="bp">.</span><span class="n">tendsto</span> <span class="o">(</span><span class="n">topological_add_group</span><span class="bp">.</span><span class="n">continuous_neg</span> <span class="n">A</span><span class="o">)</span> <span class="mi">0</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">A</span><span class="o">),</span> <span class="bp">-</span><span class="n">a</span><span class="o">)</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span><span class="o">)</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">almost</span><span class="o">:=</span> <span class="n">this</span> <span class="n">H</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">aux</span> <span class="o">:</span> <span class="o">{</span> <span class="n">r</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">|</span> <span class="bp">-</span><span class="n">r</span> <span class="err">∈</span> <span class="n">V</span> <span class="o">}</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="bp">-</span><span class="n">a</span><span class="o">)</span> <span class="err">&#39;&#39;</span> <span class="n">V</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span><span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">image</span><span class="o">,</span> <span class="n">neg_eq_iff_neg_eq</span><span class="o">],</span>
  <span class="n">simpa</span> <span class="o">[</span><span class="n">filter</span><span class="bp">.</span><span class="n">mem_map</span><span class="o">,</span> <span class="n">aux</span><span class="o">]</span> <span class="kn">using</span> <span class="n">almost</span>
<span class="kn">end</span>
</pre></div>

<a name="127825898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127825898" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127825898">Kevin Buzzard (Jun 09 2018 at 16:39)</a>:</h4>
<blockquote>
<p>But then some other code couldn't infer an instance of <code>ring (subtype S)</code>, and I got confused.</p>
</blockquote>
<p>Johan -- I think the point is that given a subset there are two ways to get a subtype, the explicit and the implicit way, because someone set up a coercion. Because the coercion is set up, you're never supposed to use the explicit constructor, you are completely handing the job over to the type class inference system. So when you use commands like <code>subtype S</code> explictly, instead of that funky up-arrow, this confuses the type class inference system.</p>

<a name="127825945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127825945" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127825945">Kevin Buzzard (Jun 09 2018 at 16:40)</a>:</h4>
<p>[nonsense deleted]</p>

<a name="127825961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127825961" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127825961">Kevin Buzzard (Jun 09 2018 at 16:41)</a>:</h4>
<p>A "subtype" really does not mean a subset of a type, a subtype is a completely new and different inductive type; if you want to get back to the original type you can use coercion but this is still applying a function, sending a term of the subtype to its value.</p>

<a name="127826005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127826005" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127826005">Kevin Buzzard (Jun 09 2018 at 16:42)</a>:</h4>
<p>subtypes are better than subsets because subtypes are types. It's easy to interact with them with the <code>.1</code> and <code>.2</code> notation and the <code>\&lt;_,_\&gt;</code> notation</p>

<a name="127826074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127826074" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127826074">Johan Commelin (Jun 09 2018 at 16:44)</a>:</h4>
<p>Right, but I can imagine that at some point people want to take the intersection of two subrings, are maybe generate a subring, etc... And it seems that sutsets are useful in those cases.</p>

<a name="127826907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127826907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127826907">Patrick Massot (Jun 09 2018 at 17:17)</a>:</h4>
<p>Sometimes things come as subsets, for instance power bounded elements</p>

<a name="127826908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127826908" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127826908">Chris Hughes (Jun 09 2018 at 17:17)</a>:</h4>
<p>I'm doing group_theory at the moment, and it is a little bit awkward proving things about a subgroup that's normal within another subgroup for example, or worse, quotienting by a subgroup within another subgroup. I've been copying the proofs os Sylow's theorem's over from coq, using this paper <a href="https://arxiv.org/pdf/cs/0611057.pdf" target="_blank" title="https://arxiv.org/pdf/cs/0611057.pdf">https://arxiv.org/pdf/cs/0611057.pdf</a>, and most of the group theory in coq seems to be proved on subgroups rather than groups, i.e. they often talk about a subgroup H of a group G, without mentioning anything in G which is not in H.</p>

<a name="127826950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127826950" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127826950">Patrick Massot (Jun 09 2018 at 17:18)</a>:</h4>
<p>This is the story Assia is always telling us</p>

<a name="127826960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127826960" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127826960">Johan Commelin (Jun 09 2018 at 17:19)</a>:</h4>
<p>/me feels his inner mathematician shudder and cringe.</p>

<a name="127827013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127827013" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127827013">Johan Commelin (Jun 09 2018 at 17:20)</a>:</h4>
<p>Somehow this <em>shouldn't</em> be necessary.</p>

<a name="127827144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127827144" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127827144">Patrick Massot (Jun 09 2018 at 17:25)</a>:</h4>
<p>I agree</p>

<a name="127827196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127827196" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127827196">Chris Hughes (Jun 09 2018 at 17:27)</a>:</h4>
<p>I'm not sure how much it would help, particularly with the quotienting issue. If you didn't quotient within the subtype, you wouldn't end up with a group, You'd have some type which had a subtype which is a group. It might help avoid notation like <code>subtype.val '' S</code>, which I seem to have to do rather a lot.</p>

<a name="127827625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127827625" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127827625">Kevin Buzzard (Jun 09 2018 at 17:42)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> Should <code>is_valuation</code> be a typeclass? It currently is</p>

<a name="127827630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127827630" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127827630">Kenny Lau (Jun 09 2018 at 17:43)</a>:</h4>
<p>I don't know</p>

<a name="127827728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127827728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127827728">Kevin Buzzard (Jun 09 2018 at 17:47)</a>:</h4>
<p>Me neither</p>

<a name="127827731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127827731" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127827731">Kevin Buzzard (Jun 09 2018 at 17:47)</a>:</h4>
<p>I'm writing brief LaTeX notes as Patrick suggested</p>

<a name="127828207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828207" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828207">Kevin Buzzard (Jun 09 2018 at 18:05)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> I don't understand github well enough to review your PR. I tried to add a comment and got the error <code>Start commit oid is not part of the pull request</code></p>

<a name="127828252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828252" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828252">Johan Commelin (Jun 09 2018 at 18:07)</a>:</h4>
<p>Hmm, I don't know how that happened...</p>

<a name="127828293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828293" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828293">Johan Commelin (Jun 09 2018 at 18:08)</a>:</h4>
<p>I can't make sense of it... all commits in its "local context" are either already in your master branch, or in my PR...</p>

<a name="127828295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828295" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828295">Kevin Buzzard (Jun 09 2018 at 18:08)</a>:</h4>
<p>I can't seem to make comments on your PR.</p>

<a name="127828296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828296" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828296">Kevin Buzzard (Jun 09 2018 at 18:08)</a>:</h4>
<p>Or at least I can't say the following:</p>

<a name="127828302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828302" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828302">Kevin Buzzard (Jun 09 2018 at 18:09)</a>:</h4>
<p>So I was envisaging that stuff in <code>for_mathlib</code> was stuff which it was our responsibility to try and get into mathlib. But this code looks like it was written by other people -- is it even Ok to put it in our project? And then is our job to try and PR this to mathlib or will the authors take care of that?</p>

<a name="127828307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828307" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828307">Kevin Buzzard (Jun 09 2018 at 18:09)</a>:</h4>
<p>It's attached to the line <code>Authors: Johannes Hölzl, Mitchell Rowett, Scott Morrison</code></p>

<a name="127828308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828308">Johan Commelin (Jun 09 2018 at 18:09)</a>:</h4>
<p>Right... that's a good point</p>

<a name="127828309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828309" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828309">Johan Commelin (Jun 09 2018 at 18:10)</a>:</h4>
<p>(I hate all those license things)</p>

<a name="127828356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828356" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828356">Johan Commelin (Jun 09 2018 at 18:10)</a>:</h4>
<p>Anyway, all I did was take their code and translate from multiplicative notation to additive...</p>

<a name="127828358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828358" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828358">Johan Commelin (Jun 09 2018 at 18:10)</a>:</h4>
<p>I don't know what is appropriate in this case</p>

<a name="127828453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828453" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828453">Kevin Buzzard (Jun 09 2018 at 18:14)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> What do you think of this subring code?</p>

<a name="127828455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828455" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828455">Kevin Buzzard (Jun 09 2018 at 18:14)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">+</span><span class="c">/-</span><span class="cm">- `S` is a subring: a set containing 1 and closed under multiplication, addition and and additive inverse. -/</span>
<span class="bp">+</span><span class="n">class</span> <span class="n">is_subring</span>  <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">is_add_subgroup</span> <span class="n">S</span><span class="o">,</span> <span class="n">is_submonoid</span> <span class="n">S</span> <span class="o">:</span> <span class="kt">Prop</span><span class="bp">.</span>
<span class="bp">+</span>
<span class="bp">+</span><span class="kn">instance</span> <span class="n">subset</span><span class="bp">.</span><span class="n">ring</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">}</span> <span class="o">[</span><span class="n">is_subring</span> <span class="n">S</span><span class="o">]</span> <span class="o">:</span> <span class="n">ring</span> <span class="n">S</span> <span class="o">:=</span>
<span class="bp">+</span><span class="o">{</span> <span class="n">add_comm</span>      <span class="o">:=</span> <span class="k">assume</span> <span class="bp">⟨</span><span class="n">a</span><span class="o">,</span><span class="bp">_⟩</span> <span class="bp">⟨</span><span class="n">b</span><span class="o">,</span><span class="bp">_⟩</span><span class="o">,</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">eq</span> <span class="err">$</span> <span class="n">add_comm</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span>
<span class="bp">+</span>  <span class="n">left_distrib</span>  <span class="o">:=</span> <span class="k">assume</span> <span class="bp">⟨</span><span class="n">a</span><span class="o">,</span><span class="bp">_⟩</span> <span class="bp">⟨</span><span class="n">b</span><span class="o">,</span><span class="bp">_⟩</span> <span class="bp">⟨</span><span class="n">c</span><span class="o">,</span><span class="bp">_⟩</span><span class="o">,</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">eq</span> <span class="err">$</span> <span class="n">left_distrib</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span>
<span class="bp">+</span>  <span class="n">right_distrib</span> <span class="o">:=</span> <span class="k">assume</span> <span class="bp">⟨</span><span class="n">a</span><span class="o">,</span><span class="bp">_⟩</span> <span class="bp">⟨</span><span class="n">b</span><span class="o">,</span><span class="bp">_⟩</span> <span class="bp">⟨</span><span class="n">c</span><span class="o">,</span><span class="bp">_⟩</span><span class="o">,</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">eq</span> <span class="err">$</span> <span class="n">right_distrib</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span>
<span class="bp">+</span>  <span class="bp">..</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">add_group</span><span class="o">,</span>
<span class="bp">+</span>  <span class="bp">..</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">monoid</span> <span class="o">}</span>
<span class="bp">+</span>
<span class="bp">+</span><span class="kn">instance</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">ring</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">}</span> <span class="o">[</span><span class="n">is_subring</span> <span class="n">S</span><span class="o">]</span> <span class="o">:</span> <span class="n">ring</span> <span class="o">(</span><span class="n">subtype</span> <span class="n">S</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">+</span><span class="o">{</span> <span class="n">add_comm</span>      <span class="o">:=</span> <span class="k">assume</span> <span class="bp">⟨</span><span class="n">a</span><span class="o">,</span><span class="bp">_⟩</span> <span class="bp">⟨</span><span class="n">b</span><span class="o">,</span><span class="bp">_⟩</span><span class="o">,</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">eq</span> <span class="err">$</span> <span class="n">add_comm</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span>
<span class="bp">+</span>  <span class="n">left_distrib</span>  <span class="o">:=</span> <span class="k">assume</span> <span class="bp">⟨</span><span class="n">a</span><span class="o">,</span><span class="bp">_⟩</span> <span class="bp">⟨</span><span class="n">b</span><span class="o">,</span><span class="bp">_⟩</span> <span class="bp">⟨</span><span class="n">c</span><span class="o">,</span><span class="bp">_⟩</span><span class="o">,</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">eq</span> <span class="err">$</span> <span class="n">left_distrib</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span>
<span class="bp">+</span>  <span class="n">right_distrib</span> <span class="o">:=</span> <span class="k">assume</span> <span class="bp">⟨</span><span class="n">a</span><span class="o">,</span><span class="bp">_⟩</span> <span class="bp">⟨</span><span class="n">b</span><span class="o">,</span><span class="bp">_⟩</span> <span class="bp">⟨</span><span class="n">c</span><span class="o">,</span><span class="bp">_⟩</span><span class="o">,</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">eq</span> <span class="err">$</span> <span class="n">right_distrib</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span>
<span class="bp">+</span>  <span class="bp">..</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">add_group</span><span class="o">,</span>
<span class="bp">+</span>  <span class="bp">..</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">monoid</span> <span class="o">}</span>
</pre></div>

<a name="127828466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828466" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828466">Kevin Buzzard (Jun 09 2018 at 18:15)</a>:</h4>
<p>We will be playing with several subrings of a given Huber ring so we will surely need some way to formalise the idea of <code>is_subring</code>.</p>

<a name="127828507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828507" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828507">Chris Hughes (Jun 09 2018 at 18:16)</a>:</h4>
<p>Why use both <code>ring S</code> and <code>ring (subtype S)</code> ?</p>

<a name="127828508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828508" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828508">Kevin Buzzard (Jun 09 2018 at 18:16)</a>:</h4>
<p>But should we just avoid subsets completely? Or is it hard to say without context?</p>

<a name="127828514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828514" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828514">Kevin Buzzard (Jun 09 2018 at 18:17)</a>:</h4>
<p>Chris I am just cutting and pasting what Johan wrote. I don't know what is best. My understanding is that you're saying <code>ring (subtype S)</code> is unnecessary</p>

<a name="127828515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828515" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828515">Chris Hughes (Jun 09 2018 at 18:17)</a>:</h4>
<p>I think so.</p>

<a name="127828516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828516" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828516">Kevin Buzzard (Jun 09 2018 at 18:17)</a>:</h4>
<p>and we should use typeclass inference at all times</p>

<a name="127828519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828519" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828519">Kevin Buzzard (Jun 09 2018 at 18:17)</a>:</h4>
<p>but what I am unclear about is if we should be using sets at all</p>

<a name="127828565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828565" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828565">Chris Hughes (Jun 09 2018 at 18:18)</a>:</h4>
<p>Whenever possible it's better to. I think you have to use sets. <code>is_subring</code> has to be defined on a predicate anyway. How would you define it on a subtype?</p>

<a name="127828570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828570" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828570">Kevin Buzzard (Jun 09 2018 at 18:19)</a>:</h4>
<p>I see your point!</p>

<a name="127828624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828624" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828624">Johan Commelin (Jun 09 2018 at 18:21)</a>:</h4>
<p>The reason that both versions are there is simply that stuff doesn't typecheck without the <code>(subtype S)</code> version. Which is probably due to "mistakes" I made in other parts of the code.</p>

<a name="127828629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828629" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828629">Johan Commelin (Jun 09 2018 at 18:21)</a>:</h4>
<p>I would love to get rid of it, because it looks "unmathematical"</p>

<a name="127828630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828630" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828630">Chris Hughes (Jun 09 2018 at 18:22)</a>:</h4>
<p>and <code>x \in S</code> is more natural than <code>S x</code> so it may as well be a set. Going between sets and subtypes isn't the hard part, it's when you have to deal with subtypes of subtypes, and then the same set but as a subtype.</p>

<a name="127828726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828726" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828726">Kevin Buzzard (Jun 09 2018 at 18:25)</a>:</h4>
<p>So what exactly breaks when you remove the subtype version?</p>

<a name="127828772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828772">Johan Commelin (Jun 09 2018 at 18:27)</a>:</h4>
<p>I think some code in my <code>Huber_pair</code> branch. The topology on <code>S</code> is the induced topology, via <code>subtype.val</code>. And this turns <code>S</code> into <code>subtype S</code>. But then you also want a ring structure on it...</p>

<a name="127828974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828974" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828974">Johan Commelin (Jun 09 2018 at 18:34)</a>:</h4>
<p>Kevin, I will get back to the PR on monday morning I guess...</p>

<a name="127828975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828975" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828975">Kevin Buzzard (Jun 09 2018 at 18:34)</a>:</h4>
<p>Yeah, let's figure out how it all works</p>

<a name="127828977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828977" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828977">Kevin Buzzard (Jun 09 2018 at 18:34)</a>:</h4>
<p>this PR business</p>

<a name="127828978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127828978" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127828978">Kevin Buzzard (Jun 09 2018 at 18:34)</a>:</h4>
<p>there's no hurry</p>

<a name="127829131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127829131" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127829131">Johan Commelin (Jun 09 2018 at 18:41)</a>:</h4>
<p>Ok, let's do that.</p>

<a name="127829173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127829173" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127829173">Johan Commelin (Jun 09 2018 at 18:42)</a>:</h4>
<p>(Oh and by the way, you can <code>git rm *.aux</code> etc in the LaTeX folder, to get rid of those files that you don't actually want to track.)</p>

<a name="127831710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127831710" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127831710">Patrick Massot (Jun 09 2018 at 20:13)</a>:</h4>
<p>And put them in <code>.gitignore</code> file: at root of project, a file containing lines like <code>*.aux</code>, <code>*.dvi</code> (dvi?!)</p>

<a name="127834784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127834784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127834784">Patrick Massot (Jun 09 2018 at 22:11)</a>:</h4>
<p>I'm the king of filters! <a href="https://github.com/kbuzzard/lean-perfectoid-spaces/pull/5" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/pull/5">https://github.com/kbuzzard/lean-perfectoid-spaces/pull/5</a></p>

<a name="127850654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127850654" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127850654">Mario Carneiro (Jun 10 2018 at 08:54)</a>:</h4>
<blockquote>
<p>What do you think of this subring code?</p>
</blockquote>
<p>It's fine, except that the two instances are defeq so you need not prove it twice</p>

<a name="127852926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127852926" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127852926">Kevin Buzzard (Jun 10 2018 at 10:28)</a>:</h4>
<blockquote>
<p>(Oh and by the way, you can <code>git rm *.aux</code> etc in the LaTeX folder, to get rid of those files that you don't actually want to track.)</p>
</blockquote>
<p>Sure, but every time the file is updated they come back, right?</p>

<a name="127853064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127853064" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127853064">Kevin Buzzard (Jun 10 2018 at 10:32)</a>:</h4>
<blockquote>
<blockquote>
<p>What do you think of this subring code?</p>
</blockquote>
<p>It's fine, except that the two instances are defeq so you need not prove it twice</p>
</blockquote>
<p>Johan -- defeq is not the same as equal (for example rw won't make some random change from a thing to a defeq thing before rewriting), so Mario is not saying "your code is bound to still work if you remove the second instance", but my impression is that we should kill that last instance and then try and understand how to correctly work around the problems that this causes. The type class inference system is not something you can just add to -- my understanding is that careful thought needs to go into it. The moment there is more than one route from A to B, or a non-trivial way of getting from A to A, there's a risk that there will be problems down the line (time-outs, obscure errors).</p>

<a name="127853257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127853257" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127853257">Mario Carneiro (Jun 10 2018 at 10:41)</a>:</h4>
<p>That's not quite what I'm saying. You should have both instances, but you can prove one by just referencing the other</p>

<a name="127853394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127853394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127853394">Kevin Buzzard (Jun 10 2018 at 10:47)</a>:</h4>
<p>This whole type class inference thing is still a mystery to me in places.</p>

<a name="127855360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127855360" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127855360">Patrick Massot (Jun 10 2018 at 12:01)</a>:</h4>
<blockquote>
<blockquote>
<p>(Oh and by the way, you can <code>git rm *.aux</code> etc in the LaTeX folder, to get rid of those files that you don't actually want to track.)</p>
</blockquote>
<p>Sure, but every time the file is updated they come back, right?</p>
</blockquote>
<p><code>git</code> will never track a file without being explicitly instructed to do so. You could issue this instruction by mistake, using a careless <code>git add *</code>. This is where <code>.gitignore</code> comes in. In a file matches a pattern listed in <code>.gitignore</code> you need a <code>git add -f file_name</code> to add it. This way you can safely add <code>*.pdf</code> in <code>.gitignore</code> but still put, say Wedhorn's lecture notes, in the repository if you want to. Adding compiled versions of the TeX files present in the repository is pointless.</p>

<a name="127886064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127886064" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127886064">Johan Commelin (Jun 11 2018 at 06:57)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> Does</p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">toplogical_ring</span><span class="bp">.</span><span class="n">to_uniform_space</span> <span class="o">:</span> <span class="n">uniform_space</span> <span class="n">R</span>
</pre></div>


<p>use the ring structure?</p>

<a name="127886304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127886304" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127886304">Johan Commelin (Jun 11 2018 at 07:04)</a>:</h4>
<p>Cool PR by the way! I added some comments.</p>

<a name="127886319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127886319" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127886319">Patrick Massot (Jun 11 2018 at 07:05)</a>:</h4>
<p>No, it should be about topological groups. I PR'ed this quickly to make sure no work is duplicated (we should maybe declare somewhere on what part we intend to work), but really it should go to the <code>for_mathlib</code> directory, and be stated for topological groups (maybe even non abelian). <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> did you intend to build this instance (canonical uniform structure on commutative topological groups) at some point?</p>

<a name="127886536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127886536" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127886536">Johan Commelin (Jun 11 2018 at 07:13)</a>:</h4>
<p>Yes, it would be nice to know who is working on what.</p>

<a name="127886537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127886537" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127886537">Johan Commelin (Jun 11 2018 at 07:13)</a>:</h4>
<p>But I think we have done most low-hanging fruit</p>

<a name="127886651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127886651" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127886651">Patrick Massot (Jun 11 2018 at 07:17)</a>:</h4>
<p>Sure</p>

<a name="127904303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127904303" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127904303">Kevin Buzzard (Jun 11 2018 at 15:18)</a>:</h4>
<p>Isn't it all low-hanging fruit? ;-)</p>

<a name="127904307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127904307" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127904307">Kevin Buzzard (Jun 11 2018 at 15:18)</a>:</h4>
<p>I guess someone needs to think about completions at some point. Perhaps we need some more issues, perhaps of a smaller nature.</p>

<a name="127908740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127908740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127908740">Johan Commelin (Jun 11 2018 at 17:02)</a>:</h4>
<blockquote>
<p>Isn't it all low-hanging fruit? ;-)</p>
</blockquote>
<p>Well, I think that <code>Spa</code> will be non-trivial (Leanwise).</p>

<a name="127909048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127909048" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127909048">Johan Commelin (Jun 11 2018 at 17:10)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Will stuff like the following line mess up the type class system?</p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">toplogical_ring</span><span class="bp">.</span><span class="n">to_uniform_space</span> <span class="o">:</span> <span class="n">uniform_space</span> <span class="n">R</span> <span class="o">:=</span> <span class="n">stuff_goes_here</span>
</pre></div>

<a name="127909061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127909061" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127909061">Mario Carneiro (Jun 11 2018 at 17:10)</a>:</h4>
<p>I don't see any obvious reason for this to cause a problem</p>

<a name="127909091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127909091" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127909091">Johan Commelin (Jun 11 2018 at 17:11)</a>:</h4>
<p>Ok, I thought you would get a non-trivial route <code>topological_ring → uniform_space → topological_space</code>.</p>

<a name="127909150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127909150" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127909150">Mario Carneiro (Jun 11 2018 at 17:12)</a>:</h4>
<p>oh, well that's true, I suppose you need to make sure that this is defeq to the other path to topological space</p>

<a name="127909168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127909168" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127909168">Mario Carneiro (Jun 11 2018 at 17:13)</a>:</h4>
<p>A uniform space extends a topological space, so you just need to let the topological component be the one inherited from <code>topological_ring</code></p>

<a name="127909171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127909171" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127909171">Mario Carneiro (Jun 11 2018 at 17:13)</a>:</h4>
<p>that means that you can't use the default proof of <code>is_open_uniformity</code></p>

<a name="127909634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127909634" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127909634">Johan Commelin (Jun 11 2018 at 17:23)</a>:</h4>
<p>This might create some trouble...</p>

<a name="127909696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127909696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127909696">Johan Commelin (Jun 11 2018 at 17:24)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Does this suggest that in fact <code>topological_ring</code> should extend <code>ring</code> and <code>uniform_space</code>. And have constructor from ring + top_space ?</p>

<a name="127909701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127909701" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127909701">Johan Commelin (Jun 11 2018 at 17:25)</a>:</h4>
<p>(In fact, this is more about topological groups... the ring structure is not relevant.)</p>

<a name="127914420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127914420" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127914420">Patrick Massot (Jun 11 2018 at 19:01)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> we are talking about <a href="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/top_rings/src/adic_space.lean#L60" target="_blank" title="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/top_rings/src/adic_space.lean#L60">https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/top_rings/src/adic_space.lean#L60</a> It uses <a href="https://github.com/leanprover/mathlib/blob/master/analysis/topology/uniform_space.lean#L117" target="_blank" title="https://github.com/leanprover/mathlib/blob/master/analysis/topology/uniform_space.lean#L117">uniform_space.of_core</a> I'm not sure about things that should be defeq are defeq</p>

<a name="127914468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127914468" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127914468">Patrick Massot (Jun 11 2018 at 19:02)</a>:</h4>
<p>I'll try to ask Lean</p>

<a name="127915787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127915787" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127915787">Patrick Massot (Jun 11 2018 at 19:28)</a>:</h4>
<p>It doesn't want to answer, which is probably not good. I tries</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">@</span><span class="n">toplogical_ring</span><span class="bp">.</span><span class="n">to_uniform_space</span> <span class="n">R</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">to_topological_space</span>  <span class="bp">=</span> <span class="o">(</span><span class="k">by</span> <span class="n">apply_instance</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span>
</pre></div>


<p>but Lean says <code>tactic failed, type mismatch</code> on the opening parenthesis on RHS. Checking the type of LHS and RHS looks good, even with pp.all</p>

<a name="127930196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127930196" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127930196">Mario Carneiro (Jun 12 2018 at 01:52)</a>:</h4>
<p>Ah yes, you shouldn't use <code>uniform_space.of_core</code>, that generates the uniformity topology but you want to pick up the default topology on a topological ring</p>

<a name="127931824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127931824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127931824">Johannes Hölzl (Jun 12 2018 at 02:51)</a>:</h4>
<blockquote>
<p>No, it should be about topological groups. I PR'ed this quickly to make sure no work is duplicated (we should maybe declare somewhere on what part we intend to work), but really it should go to the <code>for_mathlib</code> directory, and be stated for topological groups (maybe even non abelian). <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> did you intend to build this instance (canonical uniform structure on commutative topological groups) at some point?</p>
</blockquote>
<p>Yes, I would like to see uniform spaces derived from topological groups.</p>

<a name="127939941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127939941" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127939941">Johan Commelin (Jun 12 2018 at 07:10)</a>:</h4>
<p>Right, but picking up the existing topology is going to be pretty hard, I guess.</p>

<a name="127940012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940012" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940012">Johan Commelin (Jun 12 2018 at 07:13)</a>:</h4>
<p>Noob question: if we have a situation like this in the type class system, or more generally... to paths $$f$ and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>g</mi></mrow><annotation encoding="application/x-tex">g</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.03588em;">g</span></span></span></span> to go from <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">A</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.05017em;">B</span></span></span></span>, and they are not defeq, but there is a proof that they are equal. Would parametricity help out? Or is it an idle hope to envision some synergy between this lambda-Prolog unification and parametricity?</p>

<a name="127940054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940054" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940054">Johan Commelin (Jun 12 2018 at 07:14)</a>:</h4>
<p>(I still don't know if parametricity is the promising silver bullet that I want it to be. If it is, then I think I ought to spend most of my time in bringing it to Lean... but I fear that it doesn't actually help that much in doing maths.)</p>

<a name="127940207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940207" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940207">Andrew Ashworth (Jun 12 2018 at 07:19)</a>:</h4>
<p>well, that would require a lot more brains on the part of the type class inference system</p>

<a name="127940273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940273" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940273">Johan Commelin (Jun 12 2018 at 07:20)</a>:</h4>
<p>/me loves type class inference systems with brains <span class="emoji emoji-1f393" title="graduation cap">:graduation_cap:</span></p>

<a name="127940278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940278" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940278">Andrew Ashworth (Jun 12 2018 at 07:20)</a>:</h4>
<p>while I personally haven't encountered it, Leo is already worried about the performance of the type class inference system</p>

<a name="127940284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940284" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940284">Andrew Ashworth (Jun 12 2018 at 07:21)</a>:</h4>
<p>so I don't think it's a practical thing to hope for in the future</p>

<a name="127940288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940288" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940288">Andrew Ashworth (Jun 12 2018 at 07:21)</a>:</h4>
<p>the more you ask a tactic to do, the slower it runs...</p>

<a name="127940345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940345" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940345">Andrew Ashworth (Jun 12 2018 at 07:22)</a>:</h4>
<p>i wonder if anyone here is interested in old-style chess engines</p>

<a name="127940353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940353" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940353">Johan Commelin (Jun 12 2018 at 07:23)</a>:</h4>
<p>Hmmm too bad. And Kudos to human brains...</p>

<a name="127940354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940354" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940354">Andrew Ashworth (Jun 12 2018 at 07:23)</a>:</h4>
<p>type class inference works like that, it searches all the possible ways to get from A to B</p>

<a name="127940355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940355" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940355">Andrew Ashworth (Jun 12 2018 at 07:23)</a>:</h4>
<p>the number of possible paths grows exponentially</p>

<a name="127940356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940356" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940356">Andrew Ashworth (Jun 12 2018 at 07:23)</a>:</h4>
<p>with each step</p>

<a name="127940357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940357" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940357">Johan Commelin (Jun 12 2018 at 07:23)</a>:</h4>
<p>Yes, how would the old-style Chess engines help? (I never studied them.)</p>

<a name="127940399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940399">Andrew Ashworth (Jun 12 2018 at 07:24)</a>:</h4>
<p>they don't help, it's a comment on how hard the problem is</p>

<a name="127940420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940420" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940420">Andrew Ashworth (Jun 12 2018 at 07:25)</a>:</h4>
<p>type class inference is something that must be done in a sane amount of time, or users of Lean will get really frustrated when their proof takes ages to type-check</p>

<a name="127940462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940462" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940462">Johan Commelin (Jun 12 2018 at 07:26)</a>:</h4>
<p>Would new-style chess engines help? I wonder if we are willing to give up "determinism" to win a lot of speed.</p>

<a name="127940472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940472" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940472">Andrew Ashworth (Jun 12 2018 at 07:27)</a>:</h4>
<p>no, because if lean manages to synthesize a proof at 2 pm and then doesn't at 4pm, you've got a problem</p>

<a name="127940522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940522" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940522">Andrew Ashworth (Jun 12 2018 at 07:28)</a>:</h4>
<p>I mean, maybe you can find some way to cache the proof, but.... this is very out there</p>

<a name="127940530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940530" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940530">Johan Commelin (Jun 12 2018 at 07:28)</a>:</h4>
<p>Right. I would think that maybe Lean could output some hints that will help it to verify the proof deterministically and fast the next time round.</p>

<a name="127940543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940543" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940543">Scott Morrison (Jun 12 2018 at 07:29)</a>:</h4>
<p>There's also no need to give up determinism merely because you have good heuristics for searching the "interesting" parts of the tree first.</p>

<a name="127940546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940546" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940546">Johan Commelin (Jun 12 2018 at 07:29)</a>:</h4>
<p>Hmm, true</p>

<a name="127940554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940554" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940554">Johan Commelin (Jun 12 2018 at 07:29)</a>:</h4>
<p>But, do you know of good heuristics?</p>

<a name="127940618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940618" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940618">Scott Morrison (Jun 12 2018 at 07:30)</a>:</h4>
<p>I really need to explore uses of my <code>rewrite_search</code> tactic outside of category theory. It attempts to prove <code>A = B</code> by exploring the graph of all possible rewrites by a given set of lemmas, but targets the search by exploring the parts of the graph with least "edit distance" between the LHS and the RHS, for various interpretations of "edit distance".</p>

<a name="127940678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940678" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940678">Johan Commelin (Jun 12 2018 at 07:32)</a>:</h4>
<p>Sounds promising.</p>

<a name="127940687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940687" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940687">Johan Commelin (Jun 12 2018 at 07:33)</a>:</h4>
<p>Can't wait to have such stuff available at my fingertips (-;</p>

<a name="127940850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940850">Kevin Buzzard (Jun 12 2018 at 07:39)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> Do you understand the consequences of all this for the perfectoid project?</p>

<a name="127940967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127940967" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127940967">Johan Commelin (Jun 12 2018 at 07:43)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> What do you mean? The consequences of Scott's tactics, or the consequences of this topological diamond?</p>

<a name="127941012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127941012" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127941012">Johan Commelin (Jun 12 2018 at 07:44)</a>:</h4>
<p>Now that I think of it, we can probably remove the diamond by just not making it an instance. That means we can write nice stuff like <code>is_complete R</code> but we can still write <code>is_complete (to_uniform R)</code>.</p>

<a name="127941017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127941017" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127941017">Kevin Buzzard (Jun 12 2018 at 07:44)</a>:</h4>
<p>I just mean whether you now know the answer to the question "will stuff like [instance top_ring_to_uniform_space] mess up the type class system?"</p>

<a name="127941020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127941020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127941020">Johan Commelin (Jun 12 2018 at 07:44)</a>:</h4>
<p>And then, when those with more Lean-fu then the mortal mathematicians have some time,  they can fix the diamond issue, and we can write nice code again.</p>

<a name="127941026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127941026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127941026">Kevin Buzzard (Jun 12 2018 at 07:45)</a>:</h4>
<p>I mean that I have not really been following the details of this typeclass discussion and am wondering if you now know enough to tell me how to set up the perfectoid project.</p>

<a name="127941071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127941071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127941071">Johan Commelin (Jun 12 2018 at 07:46)</a>:</h4>
<p>Maybe <span class="user-mention" data-user-id="110031">@Patrick Massot</span> can join in. But my suggestion would be to have an explicit map from top_rings to uniform_spaces, and just use it explicitly when needed. (Because I think we don't need it that often.)</p>

<a name="127941129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127941129" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127941129">Kevin Buzzard (Jun 12 2018 at 07:48)</a>:</h4>
<p>I should note that when I started writing schemes I didn't use type class inference for anything (I had lots of rings and didn't use it for them). You don't have to use it. It's just supposed to make things easier. If it doesn't make them easier then we can probably avoid it. If we convince ourselves that it's not robust enough then we can avoid it. Is there some sort of underlying unfixable problem with modules?</p>

<a name="127941192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127941192" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127941192">Johan Commelin (Jun 12 2018 at 07:50)</a>:</h4>
<p>We don't need modules for this project, right?</p>

<a name="127941201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127941201" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127941201">Johan Commelin (Jun 12 2018 at 07:51)</a>:</h4>
<p>Modules seem to be rather easy to agitate in Lean. I think we could write <code>module'</code> that avoids the type class system, but it would duplicate a lot of effort; and ultimately it is not the path we want to take.</p>

<a name="127941240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127941240" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127941240">Johan Commelin (Jun 12 2018 at 07:52)</a>:</h4>
<p>But in the current situation it seems to me that modules are almost unusable.</p>

<a name="127941312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127941312" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127941312">Johan Commelin (Jun 12 2018 at 07:55)</a>:</h4>
<p>In that Gitter link, Mario said that the ring shouldn't be a field in the <code>module</code> structure. But I don't really understand why not. I think it would solve a lot of problems, and I don't really see what kind of problems it creates.</p>

<a name="127941414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127941414" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127941414">Johan Commelin (Jun 12 2018 at 07:58)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> If you have time, could you say a few words about why the ring shouldn't be a field of the <code>module</code> structure?</p>

<a name="127941683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127941683" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127941683">Kevin Buzzard (Jun 12 2018 at 08:07)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">noncomputable</span> <span class="n">def</span> <span class="n">poly</span><span class="bp">.</span><span class="n">map</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">ring</span> <span class="n">S</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">S</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">[</span><span class="n">is_ring_hom</span> <span class="n">f</span><span class="o">]</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">S</span> <span class="bp">→</span> <span class="n">polynomial</span> <span class="n">R</span> <span class="o">:=</span>
<span class="n">finsupp</span><span class="bp">.</span><span class="n">map_range</span> <span class="n">f</span> <span class="o">(</span><span class="n">is_ring_hom</span><span class="bp">.</span><span class="n">map_zero</span> <span class="n">f</span><span class="o">)</span>
</pre></div>

<a name="127941723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127941723" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127941723">Kevin Buzzard (Jun 12 2018 at 08:08)</a>:</h4>
<p><span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> Should this map be noncomputable, or should we try to make it computable by making extra assumptions on <code>R</code> and/or <code>S</code> and then over-riding them later?</p>

<a name="127941728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127941728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127941728">Johan Commelin (Jun 12 2018 at 08:08)</a>:</h4>
<p>I think it is fine to have this in <code>for_mathlib</code>, but it should go into the mason_stothers lib at some point.</p>

<a name="127941732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127941732" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127941732">Scott Morrison (Jun 12 2018 at 08:09)</a>:</h4>
<p>err... it should go in mathlib!</p>

<a name="127941737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127941737" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127941737">Johan Commelin (Jun 12 2018 at 08:09)</a>:</h4>
<p>Yes, by transitivity</p>

<a name="127941775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127941775" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127941775">Johan Commelin (Jun 12 2018 at 08:10)</a>:</h4>
<p>And then in mason_stothers they can make it as computable as they want <span class="emoji emoji-1f609" title="wink">:wink:</span></p>

<a name="127944104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127944104" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127944104">Mario Carneiro (Jun 12 2018 at 09:20)</a>:</h4>
<blockquote>
<p>Right, but picking up the existing topology is going to be pretty hard, I guess.</p>
</blockquote>
<p>It is not difficult to set this up with the current setup. You should just not use <code>uniform_space.to_core</code>, just construct the uniform space using the constructor</p>

<a name="127944105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127944105" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127944105">Johannes Hölzl (Jun 12 2018 at 09:20)</a>:</h4>
<blockquote>
<p><span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> Should this map be noncomputable, or should we try to make it computable by making extra assumptions on <code>R</code> and/or <code>S</code> and then over-riding them later?</p>
</blockquote>
<p>this should be computable now, in the recent mathlib versions, <code>finsupp.map_range</code> is computable</p>

<a name="127944182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127944182" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127944182">Mario Carneiro (Jun 12 2018 at 09:23)</a>:</h4>
<blockquote>
<p>If you have time, could you say a few words about why the ring shouldn't be a field of the module structure?</p>
</blockquote>
<p>At least with the current setup, it is generally not a good idea to have types as fields in the structure. If you did this with the scalar ring of module, you wouldn't be able to talk about ℝ-modules without imposing an equality condition, which would cause cast headaches</p>

<a name="127944318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127944318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127944318">Johan Commelin (Jun 12 2018 at 09:27)</a>:</h4>
<p>Hmm, do you mean that all of a sudden you have 1 type for <em>all</em> modules? So, if you would have fields <code>(R : Type) (hR : ring R)</code> in the structure, then you want to define <code>is_linear_map [module M] [module N] (M -&gt; N) : Prop</code>, but now they might be modules over different rings!</p>

<a name="127944319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127944319" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127944319">Johan Commelin (Jun 12 2018 at 09:27)</a>:</h4>
<p>Or do you mean something more subtle?</p>

<a name="127945989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127945989" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127945989">Kevin Buzzard (Jun 12 2018 at 09:59)</a>:</h4>
<p>If you have rings <code>A</code> and <code>B</code> and a ring map <code>A -&gt; B</code>, and an <code>A</code>-module <code>M</code> and a <code>B</code>-module <code>N</code> then mathematicians would quite happily talk about <code>A</code>-module homomorphisms <code>M -&gt; N</code></p>

<a name="127945991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127945991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127945991">Kevin Buzzard (Jun 12 2018 at 09:59)</a>:</h4>
<p>because <code>N</code> inherits an <code>A</code>-module structure from the map <code>A-&gt;B</code></p>

<a name="127946051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127946051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127946051">Kevin Buzzard (Jun 12 2018 at 10:00)</a>:</h4>
<p>but as Johan points out, this discussion is, at least at this point, in the wrong thread, this is Patrick's type class woes</p>

<a name="127946876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127946876" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127946876">Johan Commelin (Jun 12 2018 at 10:26)</a>:</h4>
<p>Right, so returning to perfectoid spaces... what is the next step?</p>

<a name="127946880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127946880" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127946880">Johan Commelin (Jun 12 2018 at 10:26)</a>:</h4>
<p>Should we pull stuff on presheaves in from your schemes-repo?</p>

<a name="127951650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127951650" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127951650">Kevin Buzzard (Jun 12 2018 at 12:45)</a>:</h4>
<p>The next step is for me to accept these PRs and then have a look at what is left.</p>

<a name="127951658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127951658" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127951658">Kevin Buzzard (Jun 12 2018 at 12:45)</a>:</h4>
<p>I think I want to do presheaves because I did them before</p>

<a name="127951663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127951663" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127951663">Kevin Buzzard (Jun 12 2018 at 12:45)</a>:</h4>
<p>I think the next step is the topological space Spa(A)</p>

<a name="127951665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127951665" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127951665">Kevin Buzzard (Jun 12 2018 at 12:45)</a>:</h4>
<p>for A a Huber pair</p>

<a name="127951668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/127951668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#127951668">Kevin Buzzard (Jun 12 2018 at 12:45)</a>:</h4>
<p>and that goes via Spv(R)</p>

<a name="128030961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128030961" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128030961">Patrick Massot (Jun 13 2018 at 21:26)</a>:</h4>
<blockquote>
<p>It is not difficult to set this up with the current setup. You should just not use <code>uniform_space.to_core</code>, just construct the uniform space using the constructor</p>
</blockquote>
<p>What do you call "the constructor"? I'm not worried at all, I'm pretty sure I have the mathematical content right, and I used the filter library so we will have all lemmas we need. But I'm not quite sure what I should do (And I had no time at all since Saturday, because of a conference and invited people).</p>

<a name="128034520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128034520" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128034520">Mario Carneiro (Jun 13 2018 at 22:58)</a>:</h4>
<p>I mean the default, built in constructor for a structure, the thing that you get with <code>{ x := ... }</code> notation</p>

<a name="128034532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128034532" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128034532">Mario Carneiro (Jun 13 2018 at 22:59)</a>:</h4>
<p>I guess the constant is called <code>uniform_space.mk</code></p>

<a name="128034688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128034688" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128034688">Mario Carneiro (Jun 13 2018 at 23:03)</a>:</h4>
<p>If you just delete the <code>of_core</code> function application in the instance, and just use that structure directly as the instance, it will more or less work, except there will be a new proof obligation for the part of the proof that <code>of_core</code> was doing</p>

<a name="128382738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128382738" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128382738">Kevin Buzzard (Jun 20 2018 at 20:50)</a>:</h4>
<p>I've spent the last few days doing non-Lean stuff but I would like to accept these PRs soon; I read through them all properly today. One thing that occurred to me about this uniform space business is that Patrick's construction of a uniform space on a topological ring should (a) probably work for a topological group and (b) might already be in mathlib (if the docstring for <code>uniform_space</code> is anything to go by). <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> you wrote "A topological group also has a natural uniformity, even when it is not metrizable" in the docstring for uniform space -- is this theorem somewhere in mathlib?</p>

<a name="128382990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128382990" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128382990">Mario Carneiro (Jun 20 2018 at 20:55)</a>:</h4>
<p>This is in the pipeline last I checked. it should appear soonish</p>

<a name="128383004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128383004" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128383004">Mario Carneiro (Jun 20 2018 at 20:55)</a>:</h4>
<p>I think Johannes is working on merging Patrick's normed space stuff</p>

<a name="128383352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128383352" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128383352">Kevin Buzzard (Jun 20 2018 at 21:02)</a>:</h4>
<p>Thanks. I've not been at all Lean-active for the last week or so, and today I tried to catch up with perfectoid spaces but there's a whole bunch of stuff which should be in mathlib but isn't; I could open about 8 small PRs but I didn't want to add to the pile because I can happily store them in my project. However stuff like polynomials in 1 variable, which is lengthy, presents more of a problem because mason-stother doesn't compile at the minute. Patrick has explicitly proved that a topological ring has a uniform space structure and it wouldn't surprise me if his proof worked for topological groups. So we have something if you or Johannes want it. For the schemes project I just kept bundling everything in my repo but this time I'd rather do it more sensibly.</p>

<a name="128383430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128383430" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128383430">Mario Carneiro (Jun 20 2018 at 21:04)</a>:</h4>
<p>I'm not sure how useful this will be given that Johannes is working on this stuff at the moment - it may just be additional merging overhead. You should coordinate with him</p>

<a name="128383472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128383472" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128383472">Kevin Buzzard (Jun 20 2018 at 21:05)</a>:</h4>
<p>OK thanks for the tips.</p>

<a name="128385520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128385520" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128385520">Patrick Massot (Jun 20 2018 at 21:44)</a>:</h4>
<p>I'm sorry I haven't talk at all since last saturday. I'm attending a conference and have extremely bad internet access in my hotel (only my phone is able to use the wifi, at very slow speed). I have completely rewritten my uniform structure stuff, and I hope to PR it tomorrow from the lecture hall. It now provides a uniform structure on commutative topological groups which gives back a topology defeq to the original one. I'm very grateful for Johannes work but it seems both over-engineered and nit enough. I have no idea what kind of generalization he has in mind.</p>

<a name="128385715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128385715" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128385715">Scott Morrison (Jun 20 2018 at 21:48)</a>:</h4>
<p>Polynomials in 1 variable I'd really like to see in mathlib; so even if Kevin can "happily store them in my project", let's try to accumulate as little as possible in the perfectoid repository.</p>

<a name="128387586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128387586" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128387586">Kevin Buzzard (Jun 20 2018 at 22:36)</a>:</h4>
<blockquote>
<p>Polynomials in 1 variable I'd really like to see in mathlib; so even if Kevin can "happily store them in my project", let's try to accumulate as little as possible in the perfectoid repository.</p>
</blockquote>
<p>Currently we're unhappy when it comes to polynomials. We tried using Johannes' mason-stother but not all of it compiles. Currently we're sorrying stuff.</p>

<a name="128387592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128387592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128387592">Kenny Lau (Jun 20 2018 at 22:36)</a>:</h4>
<p>I proved its UMP :P although Chris did much more than me</p>

<a name="128387602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128387602" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128387602">Kenny Lau (Jun 20 2018 at 22:37)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">UMP</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">A</span> <span class="err">≃</span> <span class="n">alg_hom</span> <span class="o">(</span><span class="n">polynomial</span> <span class="n">R</span><span class="o">)</span> <span class="n">A</span> <span class="o">:=</span>
<span class="o">(</span><span class="bp">ℕ.</span><span class="n">UMP</span> <span class="n">A</span><span class="o">)</span><span class="bp">.</span><span class="n">trans</span> <span class="o">(</span><span class="n">monoid_ring</span><span class="bp">.</span><span class="n">UMP</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span>
</pre></div>

<a name="128387603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128387603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128387603">Kenny Lau (Jun 20 2018 at 22:37)</a>:</h4>
<p><a href="https://github.com/kckennylau/local-langlands-abelian/blob/master/src/polynomial.lean#L37" target="_blank" title="https://github.com/kckennylau/local-langlands-abelian/blob/master/src/polynomial.lean#L37">https://github.com/kckennylau/local-langlands-abelian/blob/master/src/polynomial.lean#L37</a></p>

<a name="128387688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128387688" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128387688">Kevin Buzzard (Jun 20 2018 at 22:39)</a>:</h4>
<p>o_O there is group cohomology, Galois theory, and local class field theory in that repo too!</p>

<a name="128387692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128387692" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128387692">Kevin Buzzard (Jun 20 2018 at 22:39)</a>:</h4>
<p>You have been busy.</p>

<a name="128387745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128387745" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128387745">Kenny Lau (Jun 20 2018 at 22:40)</a>:</h4>
<p>well I can’t talk too much ‘bout it now :p</p>

<a name="128387750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128387750" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128387750">Kenny Lau (Jun 20 2018 at 22:41)</a>:</h4>
<p>we both know the reason</p>

<a name="128387762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128387762" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128387762">Kevin Buzzard (Jun 20 2018 at 22:41)</a>:</h4>
<p>I shall be grilling you on it in about 36 hours.</p>

<a name="128411780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128411780" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128411780">Patrick Massot (Jun 21 2018 at 10:51)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  the situation with uniform structures is now as follows. Contrary to what the docstrings you mentioned suggests, mathlib currently doesn't know that a commutative topological group has a canonical uniform structure. What <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> did recently was to write <a href="https://gist.github.com/johoelzl/ca90562c46b49a1bbb1be36272ec3b1a" target="_blank" title="https://gist.github.com/johoelzl/ca90562c46b49a1bbb1be36272ec3b1a">https://gist.github.com/johoelzl/ca90562c46b49a1bbb1be36272ec3b1a</a> At the same time I decided to use my flight to learn a bit about filters instead of complaining I'm not used to them. Then I wrote <a href="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/top_rings/src/for_mathlib/topological_structures.lean" target="_blank" title="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/top_rings/src/for_mathlib/topological_structures.lean">https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/top_rings/src/for_mathlib/topological_structures.lean</a>. What are the differences then? The obvious one is that Johannes' code is shorter and most probably cleaner. But it also doesn't address the main question. He defines a class <code>group_with_nhds_zero</code> which seems to be a generalization of topological groups, remembering just enough about properties of neighborhoods of zero in a topological group to define the uniform structure. He doesn't prove topological groups give instances of this new class but this should be easy (one would need to be careful with the topology induced by the uniform structure to be defeq to the original one, which is what I messed up in my first attempt). My concern is over-engineering: I see no use of this new class beyond topological group. AFAIK this only adds a layer of complexity. Actually I was already completely puzzled by <a href="https://github.com/leanprover/mathlib/blob/905345a2ceaa5d0c7bc2f6310026961416b2cae4/analysis/topology/topological_structures.lean#L198" target="_blank" title="https://github.com/leanprover/mathlib/blob/905345a2ceaa5d0c7bc2f6310026961416b2cae4/analysis/topology/topological_structures.lean#L198">this section</a>. I have no idea how this could be useful beyond the obvious case where the uniform structure is the canonical one.</p>

<a name="128431953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128431953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128431953">Kevin Buzzard (Jun 21 2018 at 18:26)</a>:</h4>
<p>I don't think these CS people worry about over-engineering. I guess as we just saw from the filter stuff, it's actually sometimes convenient to have these things around. I've written a paper about adic spaces and I don't understand filters, but that's only because for actual adic spaces you only basically deal with rings whose topology is generated by a finitely-generated ideal, when sanity is restored. [by "generated by" I mean that powers of the ideal form a basis of neighbourhoods of zero]</p>

<a name="128437221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128437221" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128437221">Kevin Buzzard (Jun 21 2018 at 20:13)</a>:</h4>
<p>Oh wow I have universe issues! </p>
<p>A valuation on a ring <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> is a map from <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> to a totally ordered commutative monoid satisfying some axioms. Two valuations <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.03588em;">v</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.02691em;">w</span></span></span></span> are <em>equivalent</em> if <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi><mo>(</mo><mi>r</mi><mo>)</mo><mo>≤</mo><mi>v</mi><mo>(</mo><mi>s</mi><mo>)</mo><mspace width="0.277778em"></mspace><mo>⟺</mo><mspace width="0.277778em"></mspace><mi>w</mi><mo>(</mo><mi>r</mi><mo>)</mo><mo>≤</mo><mi>w</mi><mo>(</mo><mi>s</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">v(r)\leq v(s) \iff w(r)\leq w(s)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mclose">)</span><span class="mrel">≤</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mrel"><span class="mspace thickspace"></span><span class="mrel">⟺</span></span><span class="mord mathit"><span class="mspace thickspace"></span><span class="mord mathit" style="margin-right:0.02691em;">w</span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mclose">)</span><span class="mrel">≤</span><span class="mord mathit" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span>. The <em>valuation spectrum</em> <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>p</mi><mi>v</mi><mo>(</mo><mi>R</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">Spv(R)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">p</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mclose">)</span></span></span></span> of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> is the set of equivalence classes of valuations.   As a ZFC-ist I did a little calculation here -- I checked that every valuation (which could take values in a monoid which gigantic cardinality, far far bigger than that of R) was equivalent to a valuation taking values in basically the monoid generated by the image of R (I'm being a bit sloppy -- one has to check that there is no issue here with the axioms for a valuation). But at the end of the day I have a set.</p>
<p>In Lean I have</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">valuations</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span>
<span class="o">[</span><span class="n">Hα</span> <span class="o">:</span> <span class="n">linear_ordered_comm_group</span> <span class="n">α</span><span class="o">]</span>
<span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">option</span> <span class="n">α</span><span class="o">)</span>
<span class="o">(</span><span class="n">Hf</span> <span class="o">:</span> <span class="n">is_valuation</span> <span class="n">f</span><span class="o">)</span>
</pre></div>


<p>and I can define two valuations to be equivalent </p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">valuations</span><span class="bp">.</span><span class="n">setoid</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">setoid</span> <span class="o">(</span><span class="n">valuations</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">r</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">f</span> <span class="n">g</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">f</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">s</span> <span class="bp">↔</span> <span class="n">g</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">g</span> <span class="n">s</span><span class="o">,</span>
  <span class="n">iseqv</span> <span class="o">:=</span> <span class="bp">...</span>
</pre></div>


<p>but the associated quotient has type <code>Type 1</code>, so in theory I have left the world of ZFC. As I just outlined above, in ZFC I know how to claw my way back [I can put an upper bound on the cardinality of alpha and hence build a <em>set</em> containing at least one instance of every equivalence class]. Can I do this in Lean somehow?</p>
<div class="codehilite"><pre><span></span>
</pre></div>

<a name="128438592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128438592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128438592">Mario Carneiro (Jun 21 2018 at 20:41)</a>:</h4>
<p>If you don't care about computational content (I hear you Kenny, keep it down), you can notice that a valuation equivalence class is determined by the relation <code>S : R -&gt;  R -&gt; Prop</code> defined by <code>S r s &lt;-&gt; v r &lt;= v s</code>. That is, two valuations are equivalent if and only if they have equal induced relations on R. Thus you can define the spectrum to be the collection of all relations that arise from some valuation (from a commutative monoid in the same universe as R).</p>

<a name="128440055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128440055" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128440055">Reid Barton (Jun 21 2018 at 21:10)</a>:</h4>
<p>This is a good example of the kind of situation I was asking about here -- <a href="#narrow/stream/113488-general/subject/type.20resizing/near/127424550" title="#narrow/stream/113488-general/subject/type.20resizing/near/127424550">https://leanprover.zulipchat.com/#narrow/stream/113488-general/subject/type.20resizing/near/127424550</a></p>

<a name="128441152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128441152" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128441152">Mario Carneiro (Jun 21 2018 at 21:33)</a>:</h4>
<p>The answer is ad hoc. Essentially you figure out the "reason" why your set is small, which will take the form of some small set that enumerates your large objects, and use that as the index instead</p>

<a name="128445451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128445451" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128445451">Kevin Buzzard (Jun 21 2018 at 23:21)</a>:</h4>
<p>The "reason" for me was a standard ZFC-ish one: one can "shrink" the target until it's generated by the image of R, and hence has the same cardinality of R (or aleph_null if R is finite). So we get a bound on the cardinality of the target and this suffices because the set of isomorphism classes is now a set. The relation argument is alien to me, although obviously I believe it. I am torn about whether I should care about this -- should I write my own "section 4" or just forget it? Interestingly, I notice that the foundational paper <a href="https://arxiv.org/abs/math/0409584" target="_blank" title="https://arxiv.org/abs/math/0409584">https://arxiv.org/abs/math/0409584</a> (section 1 page 7) which is strongly related to the foundations of what Scholze is doing, assumes that every set is contained in a universe. This paper would be really nice to formalise! Although those that look at it will quickly see what the issue is...</p>

<a name="128448999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128448999" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128448999">Mario Carneiro (Jun 22 2018 at 01:13)</a>:</h4>
<p>There is nothing wrong with your argument, and indeed you can also use it to get a bound as well. The relation argument just seemed easier since it literally defines the equivalence relation, making the quotient trivial. Actually you would probably want to run that argument anyway to prove that given a valuation in any universe you get a relation, since this amounts to constructing an equivalent valuation in the same universe as the ring.</p>

<a name="128551939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128551939" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128551939">Kevin Buzzard (Jun 24 2018 at 09:54)</a>:</h4>
<p>So I finally followed up on this. Here's what the code looks like (I removed the actual definition of valuation to simplify things):</p>

<a name="128551947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128551947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128551947">Kevin Buzzard (Jun 24 2018 at 09:55)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">equiv</span>

<span class="n">def</span> <span class="n">is_valuation</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">structure</span> <span class="n">valuations</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">Hα</span> <span class="o">:</span> <span class="n">linear_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">Hf</span> <span class="o">:</span> <span class="n">is_valuation</span> <span class="n">f</span><span class="o">)</span>

<span class="kn">instance</span> <span class="n">to_make_next_line_work</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">valuations</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">linear_order</span> <span class="n">v</span><span class="bp">.</span><span class="n">α</span> <span class="o">:=</span> <span class="n">v</span><span class="bp">.</span><span class="n">Hα</span>

<span class="kn">instance</span> <span class="n">valuations</span><span class="bp">.</span><span class="n">setoid</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">setoid</span> <span class="o">(</span><span class="n">valuations</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span>
  <span class="n">r</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">v</span> <span class="n">w</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">valuations</span><span class="bp">.</span><span class="n">f</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v</span><span class="bp">.</span><span class="n">f</span> <span class="n">s</span> <span class="bp">↔</span> <span class="n">w</span><span class="bp">.</span><span class="n">f</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">w</span><span class="bp">.</span><span class="n">f</span> <span class="n">s</span><span class="o">,</span>
  <span class="n">iseqv</span> <span class="o">:=</span> <span class="bp">⟨λ</span> <span class="n">v</span> <span class="n">r</span> <span class="n">s</span><span class="o">,</span><span class="n">iff</span><span class="bp">.</span><span class="n">rfl</span><span class="o">,</span><span class="bp">λ</span> <span class="n">v</span> <span class="n">w</span> <span class="n">H</span> <span class="n">r</span> <span class="n">s</span><span class="o">,(</span><span class="n">H</span> <span class="n">r</span> <span class="n">s</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span><span class="bp">λ</span> <span class="n">v</span> <span class="n">w</span> <span class="n">x</span> <span class="n">H1</span> <span class="n">H2</span> <span class="n">r</span> <span class="n">s</span><span class="o">,</span><span class="n">iff</span><span class="bp">.</span><span class="n">trans</span> <span class="o">(</span><span class="n">H1</span> <span class="n">r</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">H2</span> <span class="n">r</span> <span class="n">s</span><span class="o">)</span><span class="bp">⟩</span>
<span class="o">}</span>

<span class="n">def</span> <span class="n">Spv1</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:=</span> <span class="n">quotient</span> <span class="o">(</span><span class="n">valuations</span><span class="bp">.</span><span class="n">setoid</span> <span class="n">R</span><span class="o">)</span>

<span class="n">def</span> <span class="n">Spv2</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">ineq</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="bp">//</span> <span class="bp">∃</span> <span class="n">v</span> <span class="o">:</span> <span class="n">valuations</span> <span class="n">R</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">ineq</span> <span class="n">r</span> <span class="n">s</span> <span class="bp">↔</span> <span class="n">v</span><span class="bp">.</span><span class="n">f</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v</span><span class="bp">.</span><span class="n">f</span> <span class="n">s</span><span class="o">}</span>

<span class="bp">#</span><span class="kn">check</span> <span class="n">Spv1</span> <span class="bp">_</span> <span class="c1">-- Type 1</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">Spv2</span> <span class="bp">_</span> <span class="c1">-- Type</span>
</pre></div>

<a name="128552037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128552037" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128552037">Kevin Buzzard (Jun 24 2018 at 09:58)</a>:</h4>
<p><code>Spv1</code> is the equivalance classes of valuations, and <code>Spv2</code> is the associated vague notions of order (it's not antisymmetric because <code>f</code> might not be injective -- maybe it's a preorder?) on <code>R</code>. The constructions live in different type universes. But are they equiv?</p>

<a name="128552038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128552038" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128552038">Kenny Lau (Jun 24 2018 at 09:58)</a>:</h4>
<p>equiv can take different universes</p>

<a name="128552039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128552039" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128552039">Kevin Buzzard (Jun 24 2018 at 09:58)</a>:</h4>
<p>In other words, should I expect to be able to prove <code>noncomputable definition they_are_the_same (R : Type) [comm_ring R] : equiv (Spv1 R) (Spv2 R) := sorry</code>?</p>

<a name="128552040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128552040" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128552040">Kevin Buzzard (Jun 24 2018 at 09:58)</a>:</h4>
<p>Yes Kenny, I noticed this -- so at least my question typechecks.</p>

<a name="128552048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128552048" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128552048">Kevin Buzzard (Jun 24 2018 at 09:59)</a>:</h4>
<p>Here are perhaps the functions:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">to_fun</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">Spv1</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">Spv2</span> <span class="n">R</span> <span class="o">:=</span>
<span class="n">quotient</span><span class="bp">.</span><span class="n">lift</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">v</span><span class="o">,(</span><span class="bp">⟨λ</span> <span class="n">r</span> <span class="n">s</span><span class="o">,</span> <span class="n">valuations</span><span class="bp">.</span><span class="n">f</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v</span><span class="bp">.</span><span class="n">f</span> <span class="n">s</span><span class="o">,</span><span class="bp">⟨</span><span class="n">v</span><span class="o">,</span><span class="bp">λ</span> <span class="n">r</span> <span class="n">s</span><span class="o">,</span><span class="n">iff</span><span class="bp">.</span><span class="n">rfl</span><span class="bp">⟩⟩</span> <span class="o">:</span> <span class="n">Spv2</span> <span class="n">R</span><span class="o">))</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="n">v</span> <span class="n">w</span> <span class="n">H</span><span class="o">,</span><span class="k">begin</span> <span class="n">dsimp</span><span class="o">,</span><span class="n">congr</span><span class="o">,</span><span class="n">funext</span><span class="o">,</span><span class="n">exact</span> <span class="n">propext</span> <span class="o">(</span><span class="n">H</span> <span class="n">r</span> <span class="n">s</span><span class="o">)</span> <span class="kn">end</span><span class="o">)</span>

<span class="n">noncomputable</span> <span class="n">def</span> <span class="n">inv_fun</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">Spv2</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">Spv1</span> <span class="n">R</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="bp">⟨</span><span class="n">ineq</span><span class="o">,</span><span class="n">H</span><span class="bp">⟩</span><span class="o">,</span><span class="err">⟦</span><span class="n">classical</span><span class="bp">.</span><span class="n">some</span> <span class="n">H</span><span class="err">⟧</span>
</pre></div>

<a name="128552092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128552092" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128552092">Kevin Buzzard (Jun 24 2018 at 10:00)</a>:</h4>
<p>I don't know if that's going to give me trouble because I used tactics in a definition -- but it was for a proof.</p>

<a name="128552471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128552471" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128552471">Kevin Buzzard (Jun 24 2018 at 10:16)</a>:</h4>
<p>To prove either direction I need to show something about a map constructed using quotient.lift (assuming this is the way to define <code>to_fun</code>). For example <code>right_inv</code> boils down to</p>
<div class="codehilite"><pre><span></span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">comm_ring</span> <span class="n">R</span><span class="o">,</span>
<span class="n">rel</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">,</span>
<span class="n">Hrel</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">valuations</span> <span class="n">R</span><span class="o">),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span> <span class="n">rel</span> <span class="n">r</span> <span class="n">s</span> <span class="bp">↔</span> <span class="n">v</span><span class="bp">.</span><span class="n">f</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v</span><span class="bp">.</span><span class="n">f</span> <span class="n">s</span><span class="o">,</span>
<span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">to_fun</span> <span class="n">R</span> <span class="err">⟦</span><span class="n">classical</span><span class="bp">.</span><span class="n">some</span> <span class="n">Hrel</span><span class="err">⟧</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="n">r</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">rel</span> <span class="n">r</span> <span class="n">s</span>
</pre></div>

<a name="128552571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128552571" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128552571">Kevin Buzzard (Jun 24 2018 at 10:21)</a>:</h4>
<p>Is this quotient.something?</p>

<a name="128552610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128552610" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128552610">Kevin Buzzard (Jun 24 2018 at 10:22)</a>:</h4>
<p>and <code>left_inv</code> looks like</p>
<div class="codehilite"><pre><span></span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">comm_ring</span> <span class="n">R</span><span class="o">,</span>
<span class="n">vs</span> <span class="o">:</span> <span class="n">Spv1</span> <span class="n">R</span>
<span class="err">⊢</span> <span class="n">inv_fun</span> <span class="n">R</span> <span class="o">(</span><span class="n">to_fun</span> <span class="n">R</span> <span class="n">vs</span><span class="o">)</span> <span class="bp">=</span> <span class="n">vs</span>
</pre></div>

<a name="128552613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128552613" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128552613">Kenny Lau (Jun 24 2018 at 10:22)</a>:</h4>
<p>just <code>unfold</code> everything</p>

<a name="128552614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128552614" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128552614">Kevin Buzzard (Jun 24 2018 at 10:22)</a>:</h4>
<p>I don't need this equiv, but I'm trying to get a feeling for the relative merits of either definition</p>

<a name="128552619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128552619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128552619">Kevin Buzzard (Jun 24 2018 at 10:23)</a>:</h4>
<p>If you unfold everything you end up with classical.somes which don't behave</p>

<a name="128552620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128552620" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128552620">Kevin Buzzard (Jun 24 2018 at 10:23)</a>:</h4>
<p>or at least I did</p>

<a name="128552657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128552657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128552657">Kevin Buzzard (Jun 24 2018 at 10:24)</a>:</h4>
<p>you end up with a goal of the form <code>classical.some _ a &lt;= classical.some _ b iff classical.some _ a &lt;= classical.some _ b</code> or something, and iff.refl doesn't work because the <code>_</code>s are slightly different -- or at least they were for me (with the definition of valuation filled in)</p>

<a name="128552662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128552662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128552662">Kenny Lau (Jun 24 2018 at 10:24)</a>:</h4>
<p>what is the property of each some</p>

<a name="128552663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128552663" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128552663">Kevin Buzzard (Jun 24 2018 at 10:24)</a>:</h4>
<p>Kenny it must be more than an unfold -- the <code>left_inv</code> goal has <code>vs</code> in it and we know nothing about <code>vs</code> other than its type --</p>

<a name="128552672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128552672" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128552672">Kevin Buzzard (Jun 24 2018 at 10:25)</a>:</h4>
<p>I don't know if I'm making a wrong turn, but I tried <code>quotient.exists_rep</code></p>

<a name="128552813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128552813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128552813">Kevin Buzzard (Jun 24 2018 at 10:30)</a>:</h4>
<p>Here's an example of the sort of mess I get into:</p>
<div class="codehilite"><pre><span></span>  <span class="n">left_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">vs</span><span class="o">,</span><span class="k">begin</span>
    <span class="n">cases</span> <span class="o">(</span><span class="n">quotient</span><span class="bp">.</span><span class="n">exists_rep</span> <span class="n">vs</span><span class="o">)</span> <span class="k">with</span> <span class="n">v</span> <span class="n">Hv</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span><span class="n">Hv</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">sound</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">r</span> <span class="n">s</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">H</span> <span class="o">:=</span> <span class="n">classical</span><span class="bp">.</span><span class="n">some_spec</span> <span class="o">(</span><span class="n">to_fun</span> <span class="n">R</span> <span class="n">vs</span><span class="o">)</span><span class="bp">.</span><span class="n">property</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">(</span><span class="n">H</span> <span class="n">r</span> <span class="n">s</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span> <span class="c1">-- fails</span>
    <span class="c">/-</span><span class="cm"></span>
<span class="cm">    rewrite tactic failed, did not find instance of the pattern in the target expression</span>
<span class="cm">  (classical.some _).f r ≤ (classical.some _).f s</span>
<span class="cm">state:</span>
<span class="cm">R : Type,</span>
<span class="cm">_inst_1 : comm_ring R,</span>
<span class="cm">vs : Spv1 R,</span>
<span class="cm">v : valuations R,</span>
<span class="cm">Hv : ⟦v⟧ = vs,</span>
<span class="cm">r s : R,</span>
<span class="cm">H : ∀ (r s : R), (to_fun R vs).val r s ↔ (classical.some _).f r ≤ (classical.some _).f s</span>
<span class="cm">⊢ (classical.some _).f r ≤ (classical.some _).f s ↔ v.f r ≤ v.f s</span>
<span class="cm">    -/</span>
</pre></div>

<a name="128552819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128552819" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128552819">Kevin Buzzard (Jun 24 2018 at 10:31)</a>:</h4>
<p>I wondered if I'd made a wrong turn</p>

<a name="128553388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128553388" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128553388">Kevin Buzzard (Jun 24 2018 at 10:54)</a>:</h4>
<p><a href="https://gist.github.com/kbuzzard/e0b36acade48f955212e8ea5142cb7b1" target="_blank" title="https://gist.github.com/kbuzzard/e0b36acade48f955212e8ea5142cb7b1">https://gist.github.com/kbuzzard/e0b36acade48f955212e8ea5142cb7b1</a> is where I'm at. Somehow I was expecting this to be easier. Various failures deleted.</p>

<a name="128553587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128553587" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128553587">Kevin Buzzard (Jun 24 2018 at 11:02)</a>:</h4>
<p>Perhaps I should outline the reason I'm even thinking about this. Part of me still wants to work in ZFC so everything should live in <code>Type</code>. But the natural definition of <code>Spv R</code> lives in <code>Type 1</code>. I just wanted to weigh up the pros and cons of the two approaches. If I can prove they're equiv then many of the assertions I'll be making about one type will be true for the other one by some general "canonical isomorphism" principle. I figured that if I kept track of both then I could see to what extent my code was affected by the choice I'll ultimately make. But if I can't prove the equiv then I am less sure that the two approaches are "the same". Probably the equiv is fine and it's just my general incompetence with quotient types. Maybe I should instead be proving that <code>to_fun</code> is a bijection?</p>

<a name="128553768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128553768" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128553768">Chris Hughes (Jun 24 2018 at 11:10)</a>:</h4>
<p>I wish there was an option to display the type of proofs in the pp.</p>

<a name="128553915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128553915" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128553915">Chris Hughes (Jun 24 2018 at 11:16)</a>:</h4>
<p>Proved<code> left_inv</code></p>
<div class="codehilite"><pre><span></span><span class="n">noncomputable</span> <span class="kn">definition</span> <span class="n">they_are_the_same</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">equiv</span> <span class="o">(</span><span class="n">Spv1</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">Spv2</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="n">to_fun</span> <span class="n">R</span><span class="o">,</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="n">inv_fun</span> <span class="n">R</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">vs</span><span class="o">,</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">induction_on</span> <span class="n">vs</span> <span class="k">begin</span>
    <span class="k">assume</span> <span class="n">vs</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">sound</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">r</span> <span class="n">s</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:=</span> <span class="o">(</span><span class="n">to_fun</span> <span class="n">R</span> <span class="err">⟦</span><span class="n">vs</span><span class="err">⟧</span><span class="o">)</span><span class="bp">.</span><span class="n">property</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">H</span> <span class="o">:=</span> <span class="n">classical</span><span class="bp">.</span><span class="n">some_spec</span> <span class="o">(</span><span class="n">to_fun</span> <span class="n">R</span> <span class="err">⟦</span><span class="n">vs</span><span class="err">⟧</span><span class="o">)</span><span class="bp">.</span><span class="n">property</span> <span class="n">r</span> <span class="n">s</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">H</span><span class="bp">.</span><span class="n">symm</span><span class="bp">.</span><span class="n">trans</span> <span class="bp">_</span><span class="o">,</span>
    <span class="n">refl</span><span class="o">,</span>
  <span class="kn">end</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">s2</span><span class="o">,</span><span class="k">begin</span>
    <span class="n">cases</span> <span class="n">s2</span> <span class="k">with</span> <span class="n">rel</span> <span class="n">Hrel</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">eq</span><span class="o">,</span>
    <span class="n">dsimp</span><span class="o">,</span>
    <span class="n">unfold</span> <span class="n">inv_fun</span><span class="o">,</span>
    <span class="n">funext</span> <span class="n">r</span> <span class="n">s</span><span class="o">,</span>
    <span class="n">sorry</span>
  <span class="kn">end</span>
<span class="o">}</span>
</pre></div>

<a name="128553921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128553921" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128553921">Chris Hughes (Jun 24 2018 at 11:17)</a>:</h4>
<p>Often when the inverse function is <code>classical.some</code>, it's much easier to use <code>equiv.of_bijective</code></p>

<a name="128554214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128554214" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128554214">Chris Hughes (Jun 24 2018 at 11:29)</a>:</h4>
<p>Done</p>
<div class="codehilite"><pre><span></span><span class="kn">open</span> <span class="n">function</span>
<span class="n">noncomputable</span> <span class="kn">definition</span> <span class="n">they_are_the_same</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">equiv</span> <span class="o">(</span><span class="n">Spv1</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">Spv2</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">equiv</span><span class="bp">.</span><span class="n">of_bijective</span> <span class="o">(</span><span class="k">show</span> <span class="n">bijective</span> <span class="o">(</span><span class="n">to_fun</span> <span class="n">R</span><span class="o">),</span>
<span class="k">from</span> <span class="bp">⟨λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">induction_on₂</span> <span class="n">x</span> <span class="n">y</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">quotient</span><span class="bp">.</span><span class="n">sound</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">r</span> <span class="n">s</span><span class="o">,</span> <span class="n">iff_of_eq</span> <span class="o">(</span><span class="n">congr_fun</span> <span class="o">(</span><span class="n">congr_fun</span> <span class="o">(</span><span class="n">subtype</span><span class="bp">.</span><span class="n">mk</span><span class="bp">.</span><span class="n">inj</span> <span class="n">h</span><span class="o">)</span> <span class="n">r</span><span class="o">)</span> <span class="n">s</span><span class="o">))),</span>
  <span class="bp">λ</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">v</span><span class="o">,</span> <span class="n">hv</span><span class="bp">⟩⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="err">⟦</span><span class="n">v</span><span class="err">⟧</span><span class="o">,</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">eq</span> <span class="err">$</span> <span class="n">funext</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">r</span><span class="o">,</span> <span class="n">funext</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">s</span><span class="o">,</span> <span class="n">propext</span> <span class="o">(</span><span class="n">hv</span> <span class="n">r</span> <span class="n">s</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">))</span><span class="bp">⟩⟩</span><span class="o">)</span>
</pre></div>

<a name="128555828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128555828" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128555828">Kevin Buzzard (Jun 24 2018 at 12:33)</a>:</h4>
<p>Thanks!</p>

<a name="128556386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128556386" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128556386">Mario Carneiro (Jun 24 2018 at 12:56)</a>:</h4>
<blockquote>
<p>I wish there was an option to display the type of proofs in the pp.</p>
</blockquote>
<p><code>set_option pp.proofs true</code></p>

<a name="128558361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128558361" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128558361">Chris Hughes (Jun 24 2018 at 14:14)</a>:</h4>
<p>That displays the proofs, not their type.</p>

<a name="128567000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128567000" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128567000">Patrick Massot (Jun 24 2018 at 19:44)</a>:</h4>
<blockquote>
<p>I think Johannes is working on merging Patrick's normed space stuff</p>
</blockquote>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span>  What do you mean? Is he extracting stuff from <a href="https://github.com/PatrickMassot/lean-differential-topology/blob/master/src/norms.lean" target="_blank" title="https://github.com/PatrickMassot/lean-differential-topology/blob/master/src/norms.lean">https://github.com/PatrickMassot/lean-differential-topology/blob/master/src/norms.lean</a>? This effort is completely stopped because of type class resolution issues in the very last declaration of that file that seems to be related again to the modules and rings issue.  I would really love to be able to move forward. Especially since I should have quite a lot of time for Lean in the coming weeks.</p>

<a name="128583585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128583585" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128583585">Johannes Hölzl (Jun 25 2018 at 05:19)</a>:</h4>
<p>Yes, I want to work on normed spaces. I won't have time this week (we have two workshops in Amsterdam) but the following week.</p>

<a name="128583975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128583975" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128583975">Patrick Massot (Jun 25 2018 at 05:33)</a>:</h4>
<p>Do you intend to fix my stuff or restart from scratch?</p>

<a name="128584020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128584020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128584020">Patrick Massot (Jun 25 2018 at 05:34)</a>:</h4>
<p>Also, did you see my new version of uniform structures on topological groups (that I discussed  in this thread four days ago)?</p>

<a name="128602123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128602123" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128602123">Patrick Massot (Jun 25 2018 at 14:17)</a>:</h4>
<p>I wanted to start working on completions of abelian topological groups and noticed I forgot to prove the uniform group instance. This is now done in <a href="https://github.com/PatrickMassot/lean-perfectoid-spaces/commit/adb5140ecc46a577325cda46dcf6626424f5ef02" target="_blank" title="https://github.com/PatrickMassot/lean-perfectoid-spaces/commit/adb5140ecc46a577325cda46dcf6626424f5ef02">https://github.com/PatrickMassot/lean-perfectoid-spaces/commit/adb5140ecc46a577325cda46dcf6626424f5ef02</a></p>

<a name="128602198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128602198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128602198">Patrick Massot (Jun 25 2018 at 14:18)</a>:</h4>
<p><code>sub_eq_add_neg</code> being a simp rule is really a nuisance. I can't imagine any situation where I would want to replace <code>a - b</code> with <code>a + -b</code></p>

<a name="128609748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128609748" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128609748">Kevin Buzzard (Jun 25 2018 at 16:41)</a>:</h4>
<p>The idea that neg is a "simpler" function than sub I guess. Computer scientists seem to have some crazy ordering of things which is very counterintuitive to mathematicians. Concepts which we regard as having equal weight often don't have equal weight in Lean. I guess Lean is trying to put something into some kind of canonical form with simp, and clearly this canonical form isn't supposed to have any subs in.</p>

<a name="128610190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128610190" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128610190">Chris Hughes (Jun 25 2018 at 16:50)</a>:</h4>
<p>I guess some <code>simp</code> lemmas deal with add and neg, but not sub. It's not that weird, everyone writes <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><msup><mi>b</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">a b^{-1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">a</span><span class="mord"><span class="mord mathit">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathrm mtight">1</span></span></span></span></span></span></span></span></span></span></span></span> in a group, but never <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mi mathvariant="normal">/</mi><mi>b</mi></mrow><annotation encoding="application/x-tex">a / b</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">a</span><span class="mord mathrm">/</span><span class="mord mathit">b</span></span></span></span></p>

<a name="128610297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128610297" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128610297">Kevin Buzzard (Jun 25 2018 at 16:53)</a>:</h4>
<p>Conversely no schoolkid writes 5 + (-3), they all write 5 - 3</p>

<a name="128634201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128634201" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128634201">Mario Carneiro (Jun 26 2018 at 02:04)</a>:</h4>
<p>I just discovered the <code>[norm]</code> simp set thanks to Simon:</p>
<blockquote>
<p>Add [norm] simp set. It contains all lemmas tagged with [simp] plus any lemma tagged with [norm]. These rules are used to produce normal forms and/or reduce the number of constants used in a goal. For example, we plan to add the lemma f &lt;$&gt; x = x &gt;&gt;= pure ∘ f to [norm].</p>
</blockquote>
<p>I agree that the sub elimination theorem is a horrible simp lemma, and it's a candidate for <code>[norm]</code> if anything is.</p>

<a name="128703012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128703012" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128703012">Johan Commelin (Jun 27 2018 at 07:48)</a>:</h4>
<p>I think we can improve readability of the code that uses valuations by using slightly longer names in <a href="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/cc415fe8834b4886a5305feb89ac566d7b04ba94/src/valuations.lean#L338" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/cc415fe8834b4886a5305feb89ac566d7b04ba94/src/valuations.lean#L338">https://github.com/kbuzzard/lean-perfectoid-spaces/blob/cc415fe8834b4886a5305feb89ac566d7b04ba94/src/valuations.lean#L338</a><br>
I suggest that the field <code>f</code> be called <code>fun</code> and <code>Hf</code> be called <code>is_val</code>.</p>

<a name="128759497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128759497" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128759497">Johan Commelin (Jun 28 2018 at 07:38)</a>:</h4>
<p>Hmm, I see that there was a coercion that would coerce <code>v</code> to <code>v.f</code>. <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Why was that removed? I think it greatly improves readability...</p>

<a name="128759506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128759506" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128759506">Johan Commelin (Jun 28 2018 at 07:39)</a>:</h4>
<p>And it hides the <code>.f</code> so then I don't care so much how that field is called (-;</p>

<a name="128759708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128759708" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128759708">Kevin Buzzard (Jun 28 2018 at 07:46)</a>:</h4>
<p>It didn't work sometimes</p>

<a name="128759763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128759763" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128759763">Kevin Buzzard (Jun 28 2018 at 07:48)</a>:</h4>
<p>But I was too lazy to debug. I was sitting next to Chris when I wrote it and he said "oh yeah, has coe to fun is a bit rubbish and doesn't always work" and although I interpreted this as "we need to ask Mario why it is failing" I just wanted the code to work so I removed it. Put it back, see what breaks, and ask for help!</p>

<a name="128759780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128759780" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128759780">Scott Morrison (Jun 28 2018 at 07:49)</a>:</h4>
<p>Yeah, my experience of coercions is that the pain of them mysteriously not working (usually it's not so mysterious, just Lean isn't quite as clever as you are guessing what you really meant to say) far outweighs the smoothness when they do work. But I like writing verbose code, anyway. :-)</p>

<a name="128759886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128759886" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128759886">Johan Commelin (Jun 28 2018 at 07:52)</a>:</h4>
<p>Ok, will do (-; So far nothing is breaking...</p>

<a name="128759965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128759965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128759965">Johan Commelin (Jun 28 2018 at 07:54)</a>:</h4>
<p>Scott, yes I understand that. But in this case I think there are some crucial parts of the code that should be as readible as possible.</p>

<a name="128768192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128768192" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128768192">Kevin Buzzard (Jun 28 2018 at 11:58)</a>:</h4>
<p>I removed the coercion for all the wrong reasons. It was Thursday night at Xena, I was low on battery, I had nearly finished a file, it was time to go home, I asked Chris why my code didn't work and he said he'd had trouble with <code>has_coe_to_fun</code> and I thought "sod it I'll just remove it". I commented it out specifically to remind future me to come back to it.</p>

<a name="128768441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128768441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128768441">Kevin Buzzard (Jun 28 2018 at 12:04)</a>:</h4>
<p>In other news, I discovered a subtlety in the definition of continuous. Two valuations <code>v : R -&gt; option alpha</code> and <code>v' : R -&gt; option beta</code> are equivalent if <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi><mo>(</mo><mi>r</mi><mo>)</mo><mo>≤</mo><mi>v</mi><mo>(</mo><mi>s</mi><mo>)</mo><mspace width="0.277778em"></mspace><mo>⟺</mo><mspace width="0.277778em"></mspace><msup><mi>v</mi><mo mathvariant="normal">′</mo></msup><mo>(</mo><mi>r</mi><mo>)</mo><mo>≤</mo><msup><mi>v</mi><mo mathvariant="normal">′</mo></msup><mo>(</mo><mi>s</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">v(r)\leq v(s)\iff v'(r)\leq v'(s)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.751892em;"></span><span class="strut bottom" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mclose">)</span><span class="mrel">≤</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mrel"><span class="mspace thickspace"></span><span class="mrel">⟺</span></span><span class="mord"><span class="mspace thickspace"></span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mclose">)</span><span class="mrel">≤</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span> for all <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mo separator="true">,</mo><mi>s</mi></mrow><annotation encoding="application/x-tex">r,s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mpunct">,</span><span class="mord mathit">s</span></span></span></span>. There are other equivalent ways of writing the equivalence, and it's a lemma that they all coincide. Unsurprisingly, at some point I found I needed the lemma, but surprisingly it was in the definition of continuous. My slightly superficial (as it turns out) understanding of the definition of a continuous valuation was that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.03588em;">v</span></span></span></span> was continuous iff the pre-image of <code>a : option alpha // a &lt; b</code> was open for all b in alpha -- but this is not always constant on an equivalence class! The problem is that alpha might be embedded as some infinitesimally small subgroup of beta, and then beta contains elements smaller than everything in the image other than 0 (the <code>none</code> option) which have no analogue in alpha. One has to restrict to b's which are in the group generated by the image of v. I'd never noticed this before. </p>
<p>So we need to prove 1.25 and 1.27 in Wedhorn -- but then it turns out that we don't even have quotient rings and the fact that the quotient of a comm ring by a prime ideal is an integral domain. These are not hard -- but it's funny to see how holey everything still is. I am about to ask Kenny to fill in my sorries :-) [I just committed some stuff]</p>

<a name="128955982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128955982" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128955982">Johan Commelin (Jul 02 2018 at 10:13)</a>:</h4>
<p>That actually sounds pretty technical! I would have glossed over this for sure...</p>

<a name="128956469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/128956469" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#128956469">Patrick Massot (Jul 02 2018 at 10:28)</a>:</h4>
<p>Working on the definition of manifolds in Lean also taught me that the well known fact that the relation of equivalence of atlases is an equivalence relation has slightly more content that I was aware of. I don't think there is any book proving this fact. Most of them simply use the word "equivalence class" without writing "equivalence relation" anywhere (this includes my own lecture notes on differential topology). Some write "is easily seen to be an equivalence relation". I haven't seen any proof anywhere except on my scratchpad.</p>

<a name="129008758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129008758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129008758">Johan Commelin (Jul 03 2018 at 07:50)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I'm confused: why are you changing <code>is_valuation</code> to <code>valuation</code>? I thought that it should be <code>is_*</code> because the type is <code>Prop</code>.</p>

<a name="129008765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129008765" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129008765">Johan Commelin (Jul 03 2018 at 07:50)</a>:</h4>
<p>Is there a good explanation of these naming conventions somewhere?</p>

<a name="129008771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129008771" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129008771">Kevin Buzzard (Jul 03 2018 at 07:50)</a>:</h4>
<p>We can have <code>is_</code> if you like.</p>

<a name="129008781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129008781" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129008781">Johan Commelin (Jul 03 2018 at 07:51)</a>:</h4>
<p>Well... you're the boss <span class="emoji emoji-1f923" title="rolling on the floor laughing">:rolling_on_the_floor_laughing:</span></p>

<a name="129008784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129008784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129008784">Johan Commelin (Jul 03 2018 at 07:51)</a>:</h4>
<p>It is just that I got a bit confused... but I'm not sure if there even is a solid convention.</p>

<a name="129008794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129008794" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129008794">Kevin Buzzard (Jul 03 2018 at 07:52)</a>:</h4>
<p>Boss -- not really. And I don't understand the rules properly. I think Kenny had a namespace <code>is_valuation</code> which I thought was going a bit far.</p>

<a name="129008844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129008844" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129008844">Mario Carneiro (Jul 03 2018 at 07:52)</a>:</h4>
<p>What is the convention in question? (I think I am the MC - Master of Conventions)</p>

<a name="129008854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129008854" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129008854">Kevin Buzzard (Jul 03 2018 at 07:53)</a>:</h4>
<p>So a function f from a ring R to some totally ordered monoid M is a _valuation_ if it satisfies some axioms.</p>

<a name="129008884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129008884" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129008884">Mario Carneiro (Jul 03 2018 at 07:53)</a>:</h4>
<p>Is it a property of the function, or an augmented function?</p>

<a name="129008899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129008899" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129008899">Kevin Buzzard (Jul 03 2018 at 07:53)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">valuation</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_ordered_comm_group</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">option</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">map_zero</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
<span class="o">(</span><span class="n">map_one</span>  <span class="o">:</span> <span class="n">f</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span>
<span class="o">(</span><span class="n">map_mul</span>  <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span>
<span class="o">(</span><span class="n">map_add</span>  <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span>
</pre></div>

<a name="129008901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129008901" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129008901">Kevin Buzzard (Jul 03 2018 at 07:53)</a>:</h4>
<p>That used to say <code>class is_valuation</code></p>

<a name="129008949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129008949" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129008949">Mario Carneiro (Jul 03 2018 at 07:54)</a>:</h4>
<p>I think it should be <code>is_valuation</code> then</p>

<a name="129008954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129008954" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129008954">Kevin Buzzard (Jul 03 2018 at 07:54)</a>:</h4>
<p>The next line in the code is <code>namespace valuation</code></p>

<a name="129008957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129008957" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129008957">Johan Commelin (Jul 03 2018 at 07:54)</a>:</h4>
<p>Kevin, you see <code>Prop</code> stands for <em>property</em> <span class="emoji emoji-1f609" title="wink">:wink:</span></p>

<a name="129008961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129008961" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129008961">Kevin Buzzard (Jul 03 2018 at 07:54)</a>:</h4>
<p>and did it used to say <code>namespace is_valuation</code>?</p>

<a name="129008974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129008974" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129008974">Mario Carneiro (Jul 03 2018 at 07:55)</a>:</h4>
<p><code>namespace valuation</code> will be annoying since it's not accessed by projection</p>

<a name="129008976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129008976" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129008976">Mario Carneiro (Jul 03 2018 at 07:55)</a>:</h4>
<p>since it's a typeclass</p>

<a name="129008981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129008981" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129008981">Kevin Buzzard (Jul 03 2018 at 07:55)</a>:</h4>
<p>I don't understand that. I've never understood projection properly.</p>

<a name="129008999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129008999" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129008999">Kevin Buzzard (Jul 03 2018 at 07:56)</a>:</h4>
<p>I just muddle through with projections. I write <code>G.mul_assoc</code> and if it doesn't work I write <code>group.mul_assoc G</code></p>

<a name="129009031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009031">Mario Carneiro (Jul 03 2018 at 07:56)</a>:</h4>
<p>To use projection you have to be projecting on an expression whose type has the same name as the namespace</p>

<a name="129009033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009033" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009033">Kevin Buzzard (Jul 03 2018 at 07:56)</a>:</h4>
<p>and I never have a clue which one I'm supposed to use or which one will work</p>

<a name="129009044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009044" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009044">Mario Carneiro (Jul 03 2018 at 07:56)</a>:</h4>
<p>If you use typeclass inference, then the operative name is in a hidden parameter, so it doesn't work</p>

<a name="129009049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009049" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009049">Kevin Buzzard (Jul 03 2018 at 07:56)</a>:</h4>
<p>These words are too hard for me</p>

<a name="129009064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009064" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009064">Mario Carneiro (Jul 03 2018 at 07:57)</a>:</h4>
<p>i.e. you can't write <code>f.map_zero</code> when you know <code>is_valuation f</code> because lean looks at the type of <code>f</code>, which is <code>pi</code>, and then checks the <code>pi</code> namespace only</p>

<a name="129009071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009071">Mario Carneiro (Jul 03 2018 at 07:57)</a>:</h4>
<p>(actually that doesn't really work, <code>pi</code> isn't a namespace)</p>

<a name="129009118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009118" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009118">Mario Carneiro (Jul 03 2018 at 07:58)</a>:</h4>
<p>but for inductive types like <code>nat</code> which are also namespaces, it works well</p>

<a name="129009119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009119" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009119">Johan Commelin (Jul 03 2018 at 07:58)</a>:</h4>
<p>Kevin, you can write <code>H.bla</code> for <code>[H: is_valuation f]</code>, but not <code>f.bla</code>. But then, we want <code>H</code> to be implicit (type class inference, etc...) so in practice you won't be able to type <code>H.bla</code> because there is no explicit <code>H</code>.</p>

<a name="129009130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009130" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009130">Kevin Buzzard (Jul 03 2018 at 07:58)</a>:</h4>
<p>What I do not understand (at all) is whether I should have _something_ called <code>valuation</code>. We have <code>group G</code>, right? Why can't I have <code>valuation f</code>?</p>

<a name="129009133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009133" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009133">Kevin Buzzard (Jul 03 2018 at 07:58)</a>:</h4>
<p>I don't see the difference</p>

<a name="129009135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009135" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009135">Mario Carneiro (Jul 03 2018 at 07:58)</a>:</h4>
<p>I think lean might complain if <code>H</code> turns out to be implicit in <code>is_valuation.bla</code> though</p>

<a name="129009136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009136" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009136">Johan Commelin (Jul 03 2018 at 07:58)</a>:</h4>
<p>Because <code>group</code> has extra structure.</p>

<a name="129009156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009156">Kevin Buzzard (Jul 03 2018 at 07:59)</a>:</h4>
<p>Why do I want to use type class inference for valuations?</p>

<a name="129009160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009160">Kevin Buzzard (Jul 03 2018 at 07:59)</a>:</h4>
<p>I do not understand what we want here</p>

<a name="129009162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009162">Kevin Buzzard (Jul 03 2018 at 07:59)</a>:</h4>
<p>I was just sick of writing is_</p>

<a name="129009166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009166" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009166">Mario Carneiro (Jul 03 2018 at 07:59)</a>:</h4>
<p>If you use the augmented function approach you can use the name <code>valuation</code> and call functions by projection</p>

<a name="129009169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009169" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009169">Johan Commelin (Jul 03 2018 at 07:59)</a>:</h4>
<p>So, if you have a <code>monoid</code> or something like that, you could have a <code>is_group G : Prop</code>, but <code>group G</code> is not a <code>Prop</code>.</p>

<a name="129009214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009214" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009214">Mario Carneiro (Jul 03 2018 at 08:00)</a>:</h4>
<p>You can also just ignore conventions if you think <code>valuation</code> will never be defined</p>

<a name="129009220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009220" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009220">Kevin Buzzard (Jul 03 2018 at 08:00)</a>:</h4>
<p>What's worse is that "valuation" in the literature actually means "equivalence class of valuations"</p>

<a name="129009224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009224" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009224">Mario Carneiro (Jul 03 2018 at 08:00)</a>:</h4>
<p>You didn't like my valuation = relation suggestion?</p>

<a name="129009235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009235" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009235">Kevin Buzzard (Jul 03 2018 at 08:00)</a>:</h4>
<p>I don't know about that either. I implemented both</p>

<a name="129009240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009240" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009240">Kevin Buzzard (Jul 03 2018 at 08:00)</a>:</h4>
<p>I have <code>zfc.valuation</code> too</p>

<a name="129009244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009244" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009244">Mario Carneiro (Jul 03 2018 at 08:00)</a>:</h4>
<p>ooh, mysterious</p>

<a name="129009254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009254" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009254">Kevin Buzzard (Jul 03 2018 at 08:01)</a>:</h4>
<p>just means "I only use Type"</p>

<a name="129009263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009263" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009263">Mario Carneiro (Jul 03 2018 at 08:01)</a>:</h4>
<p>why would you do that? You can just restrict the universe variables of polymorphic functions</p>

<a name="129009310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009310" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009310">Kevin Buzzard (Jul 03 2018 at 08:02)</a>:</h4>
<p>I've just realised I don't even know what is being suggested. (1) I change <code>class valuation ... : Prop</code> back to <code>class is_valuation</code>. Then what? Is <code>namespace valuation</code> changing back to <code>namespace is_valuation</code>?</p>

<a name="129009315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009315" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009315">Kevin Buzzard (Jul 03 2018 at 08:02)</a>:</h4>
<p>"I only use Type" is just a maths thing</p>

<a name="129009329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009329" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009329">Mario Carneiro (Jul 03 2018 at 08:03)</a>:</h4>
<p>You can put it in a namespace if you want, or use <code>valuation_*</code> pseudo-namespacing, or put the theorems in the parent namespace</p>

<a name="129009332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009332" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009332">Johan Commelin (Jul 03 2018 at 08:03)</a>:</h4>
<p>Kevin, I think Mario would want</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">valuations</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span>
<span class="o">[</span><span class="n">Hα</span> <span class="o">:</span> <span class="n">linear_ordered_comm_group</span> <span class="n">α</span><span class="o">]</span>
<span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">option</span> <span class="n">α</span><span class="o">)</span>
<span class="o">(</span><span class="n">Hf</span> <span class="o">:</span> <span class="n">is_valuation</span> <span class="n">f</span><span class="o">)</span>
</pre></div>


<p>to be called <code>valuation</code></p>

<a name="129009341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009341" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009341">Johan Commelin (Jul 03 2018 at 08:03)</a>:</h4>
<p>But I am not sure about that...</p>

<a name="129009343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009343" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009343">Mario Carneiro (Jul 03 2018 at 08:03)</a>:</h4>
<p>Only the <code>f</code> and <code>hf</code> should be in the structure</p>

<a name="129009345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009345" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009345">Johan Commelin (Jul 03 2018 at 08:03)</a>:</h4>
<p>No...</p>

<a name="129009385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009385" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009385">Kevin Buzzard (Jul 03 2018 at 08:04)</a>:</h4>
<p>Two valuations are equivalent if they "only differ by the alpha"</p>

<a name="129009388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009388" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009388">Mario Carneiro (Jul 03 2018 at 08:04)</a>:</h4>
<p>you can still state that with the alpha as parameter</p>

<a name="129009398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009398">Johan Commelin (Jul 03 2018 at 08:04)</a>:</h4>
<p>But then <code>valuations</code> depends on <code>alpha</code>, that becomes horrible right?</p>

<a name="129009399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009399">Kevin Buzzard (Jul 03 2018 at 08:04)</a>:</h4>
<p>I have valuations defined to be something else</p>

<a name="129009402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009402" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009402">Mario Carneiro (Jul 03 2018 at 08:04)</a>:</h4>
<p>no, that becomes tractable</p>

<a name="129009414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009414" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009414">Mario Carneiro (Jul 03 2018 at 08:05)</a>:</h4>
<p>(I would drop the <code>s</code> though)</p>

<a name="129009419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009419" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009419">Kevin Buzzard (Jul 03 2018 at 08:05)</a>:</h4>
<p>no I don't, I have valuations to be defined exactly like that</p>

<a name="129009441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009441">Kevin Buzzard (Jul 03 2018 at 08:05)</a>:</h4>
<p>then</p>
<div class="codehilite"><pre><span></span>instance valuations.setoid (R : Type) [comm_ring R] : setoid (valuations R) :=
{ r := λ v w, ∀ r s : R, v.f r ≤ v.f s ↔ w.f r ≤ w.f s,...
</pre></div>

<a name="129009442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009442" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009442">Johan Commelin (Jul 03 2018 at 08:05)</a>:</h4>
<p>Mario, then you have defined "valuation on R with value group alpha" (why not <code>Gamma</code>?)</p>

<a name="129009486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009486" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009486">Kevin Buzzard (Jul 03 2018 at 08:06)</a>:</h4>
<p>alpha not Gamma because Kenny wrote it</p>

<a name="129009488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009488" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009488">Mario Carneiro (Jul 03 2018 at 08:06)</a>:</h4>
<p>Note that <code>valuations</code> as Johan quotes lives in <code>Type 1</code>, so if it's aiming for zfc land it's not doing so great</p>

<a name="129009494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009494" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009494">Kevin Buzzard (Jul 03 2018 at 08:06)</a>:</h4>
<p>I don't know whether I should be worrying about ZFC or not. It seems futile really because I use so much other stuff with universes in</p>

<a name="129009498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009498" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009498">Johan Commelin (Jul 03 2018 at 08:06)</a>:</h4>
<p>Yes, and <em>I</em> am completely fine with that (-;</p>

<a name="129009512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009512" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009512">Kevin Buzzard (Jul 03 2018 at 08:07)</a>:</h4>
<p>Maybe I'm just making sure that one day I can write my own section 4</p>

<a name="129009521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009521" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009521">Mario Carneiro (Jul 03 2018 at 08:07)</a>:</h4>
<blockquote>
<p>Mario, then you have defined "valuation on R with value group alpha" (why not Gamma?)</p>
</blockquote>
<p>Yes, that's the point. The equivalence relation can span two value groups</p>

<a name="129009581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009581">Kevin Buzzard (Jul 03 2018 at 08:08)</a>:</h4>
<blockquote>
<p>Only the <code>f</code> and <code>hf</code> should be in the structure</p>
</blockquote>
<p>I don't understand how to make the setoid if alpha is not where Johan put it</p>

<a name="129009608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009608" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009608">Mario Carneiro (Jul 03 2018 at 08:09)</a>:</h4>
<p>Kevin, someday I will write a treatise on lean in ZFC and there will be an automated analysis to find out if your theorem uses universes in an essential way. Until then, just write things that are intuitively not using universes essentially and don't otherwise worry about it</p>

<a name="129009616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009616" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009616">Kevin Buzzard (Jul 03 2018 at 08:09)</a>:</h4>
<p>There is a "minimal" alpha associated with every valuation, which is unique up to unique isomorphism -- it's just the group generated by the image of teh valuation</p>

<a name="129009623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009623" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009623">Kevin Buzzard (Jul 03 2018 at 08:09)</a>:</h4>
<p>Mario -- that's great news about ZFC. I'm sure there will be mathematicians out there who genuinely care (those who read the section 4's in this world)</p>

<a name="129009665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009665" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009665">Mario Carneiro (Jul 03 2018 at 08:10)</a>:</h4>
<p><em>I</em> care</p>

<a name="129009680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009680" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009680">Kevin Buzzard (Jul 03 2018 at 08:10)</a>:</h4>
<p>There was a lot of fuss after FLT was proved, on the foundations of maths mailing list, because Wiles had used categories</p>

<a name="129009685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009685" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009685">Kevin Buzzard (Jul 03 2018 at 08:10)</a>:</h4>
<p>so a rumour started that the proof didn't fit into ZFC</p>

<a name="129009688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009688" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009688">Mario Carneiro (Jul 03 2018 at 08:10)</a>:</h4>
<p>but the analysis is not quite as easy as "just stick to Type", even if it is morally just that</p>

<a name="129009696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009696">Kevin Buzzard (Jul 03 2018 at 08:11)</a>:</h4>
<p>Isn't the analysis just "just stick to Type, and demand that all your libraries do the same"?</p>

<a name="129009699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009699" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009699">Kevin Buzzard (Jul 03 2018 at 08:11)</a>:</h4>
<p>Or is even that not enough?</p>

<a name="129009704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009704" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009704">Mario Carneiro (Jul 03 2018 at 08:11)</a>:</h4>
<p>The problem is that almost everything you write is trivially not just in Type</p>

<a name="129009709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009709" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009709">Kevin Buzzard (Jul 03 2018 at 08:11)</a>:</h4>
<p>?!</p>

<a name="129009710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009710" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009710">Mario Carneiro (Jul 03 2018 at 08:11)</a>:</h4>
<p>for example, any function Type -&gt; Type is not in Type</p>

<a name="129009754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009754" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009754">Mario Carneiro (Jul 03 2018 at 08:12)</a>:</h4>
<p>i.e. <code>huber_ring</code> or whatever</p>

<a name="129009765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009765" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009765">Mario Carneiro (Jul 03 2018 at 08:12)</a>:</h4>
<p>these are justifiable in ZFC as class functions</p>

<a name="129009772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009772">Kevin Buzzard (Jul 03 2018 at 08:12)</a>:</h4>
<p>Ok I give in</p>

<a name="129009796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009796" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009796">Johan Commelin (Jul 03 2018 at 08:13)</a>:</h4>
<p>As far as I am concerned, universes are just the axiom of infinity on steroids. Which means I am not concerned...</p>

<a name="129009801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009801" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009801">Mario Carneiro (Jul 03 2018 at 08:13)</a>:</h4>
<p>But my point is that this analysis, when it eventually arrives, will handle universe polymorphic functions, so you shouldn't avoid polymorphism for the sake of "chapter 4"</p>

<a name="129009850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009850">Johan Commelin (Jul 03 2018 at 08:14)</a>:</h4>
<p>Mario, so how do we write an alpha-agnostic setoid with your version of <code>valuation</code>?</p>

<a name="129009861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009861" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009861">Mario Carneiro (Jul 03 2018 at 08:14)</a>:</h4>
<p>You shouldn't literally write a setoid</p>

<a name="129009862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009862" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009862">Mario Carneiro (Jul 03 2018 at 08:14)</a>:</h4>
<p>it's too big</p>

<a name="129009872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009872" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009872">Mario Carneiro (Jul 03 2018 at 08:15)</a>:</h4>
<p>instead you just use the equivalence relation</p>

<a name="129009877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009877" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009877">Mario Carneiro (Jul 03 2018 at 08:15)</a>:</h4>
<p>and use the relation as a small representative when you need one</p>

<a name="129009879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009879" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009879">Kevin Buzzard (Jul 03 2018 at 08:15)</a>:</h4>
<p>But we need the actual valuation functions all the time</p>

<a name="129009928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009928" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009928">Johan Commelin (Jul 03 2018 at 08:16)</a>:</h4>
<p>Mario, so what is morally wrong with the current version that I quoted?</p>

<a name="129009929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009929" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009929">Kevin Buzzard (Jul 03 2018 at 08:16)</a>:</h4>
<p>Line 1 of <code>valuation_spectrum.lean</code> is</p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">Spv</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">A</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Type</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">quotient</span> <span class="o">(</span><span class="n">valuation</span><span class="bp">.</span><span class="n">valuations</span><span class="bp">.</span><span class="n">setoid</span> <span class="n">A</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">Spv</span>
</pre></div>

<a name="129009935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009935" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009935">Kevin Buzzard (Jul 03 2018 at 08:16)</a>:</h4>
<p>and this is a fundamental object</p>

<a name="129009940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009940" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009940">Kevin Buzzard (Jul 03 2018 at 08:16)</a>:</h4>
<p>Spv is almost an adic space</p>

<a name="129009941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009941" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009941">Johan Commelin (Jul 03 2018 at 08:16)</a>:</h4>
<p>Right, and <code>Spv</code> is the basic building block of all this theory. It is all over the place.</p>

<a name="129009943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009943" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009943">Mario Carneiro (Jul 03 2018 at 08:16)</a>:</h4>
<p>You can define the setoid, but it is one of the things that "essentially uses universes"</p>

<a name="129009945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009945" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009945">Kevin Buzzard (Jul 03 2018 at 08:16)</a>:</h4>
<p>and we're constantly choosing points</p>

<a name="129009954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009954" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009954">Kevin Buzzard (Jul 03 2018 at 08:17)</a>:</h4>
<p>The fundamental topological space which we use all the time is the space of equivalence classes of valuations</p>

<a name="129009956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009956" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009956">Kevin Buzzard (Jul 03 2018 at 08:17)</a>:</h4>
<p>so we have to get this right</p>

<a name="129009960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009960" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009960">Johan Commelin (Jul 03 2018 at 08:17)</a>:</h4>
<blockquote>
<p>You can define the setoid, but it is one of the things that "essentially uses universes"</p>
</blockquote>
<p>Is that its only moral failure?</p>

<a name="129009961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009961" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009961">Mario Carneiro (Jul 03 2018 at 08:17)</a>:</h4>
<p>What's wrong, again, with defining <code>Spv</code> as the collection of all valuation relations?</p>

<a name="129009967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129009967" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129009967">Kevin Buzzard (Jul 03 2018 at 08:17)</a>:</h4>
<p>All proofs need an actual valuation</p>

<a name="129010011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010011" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010011">Mario Carneiro (Jul 03 2018 at 08:18)</a>:</h4>
<p>You can define your own version of <code>quot.lift</code> and <code>quot.mk</code> that take valuations</p>

<a name="129010013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010013" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010013">Mario Carneiro (Jul 03 2018 at 08:18)</a>:</h4>
<p>valuation functions that is</p>

<a name="129010014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010014" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010014">Kevin Buzzard (Jul 03 2018 at 08:18)</a>:</h4>
<p>Aah</p>

<a name="129010026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010026">Mario Carneiro (Jul 03 2018 at 08:19)</a>:</h4>
<p>You only use the relations as inhabitants of the type so that the universe isn't pushed up, but all the work uses functions</p>

<a name="129010027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010027" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010027">Kevin Buzzard (Jul 03 2018 at 08:19)</a>:</h4>
<p>So we hide all the noncomputable stuff in some functions like this, and prove everything we need about them. Is this going to cause problems later?</p>

<a name="129010086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010086" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010086">Kevin Buzzard (Jul 03 2018 at 08:20)</a>:</h4>
<p>We define Spv as the preorders on R (or whatever the word is) for which there exists a valuation inducing it, and then write some horrible-looking functions which actually produce a valuation...wait. The valuation is only defined up to equivalence. How does this work?</p>

<a name="129010087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010087">Mario Carneiro (Jul 03 2018 at 08:20)</a>:</h4>
<p>You will need to prove the computation rule, so it won't be definitional, but otherwise it should work smoothly if your API is solid</p>

<a name="129010096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010096" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010096">Kevin Buzzard (Jul 03 2018 at 08:21)</a>:</h4>
<p>Is my API the thing I sometimes call my interface?</p>

<a name="129010101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010101" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010101">Mario Carneiro (Jul 03 2018 at 08:21)</a>:</h4>
<p>No function to produce a valuation</p>

<a name="129010105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010105" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010105">Mario Carneiro (Jul 03 2018 at 08:21)</a>:</h4>
<p>that's not how <code>quot</code> works either</p>

<a name="129010114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010114" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010114">Kevin Buzzard (Jul 03 2018 at 08:21)</a>:</h4>
<p>The function produces an equivalence class? Do we make the setoid anyway?</p>

<a name="129010115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010115">Mario Carneiro (Jul 03 2018 at 08:21)</a>:</h4>
<p>The "I" in API is "interface"</p>

<a name="129010162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010162">Mario Carneiro (Jul 03 2018 at 08:22)</a>:</h4>
<p>No equivalence class needed either</p>

<a name="129010164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010164" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010164">Mario Carneiro (Jul 03 2018 at 08:22)</a>:</h4>
<p>Like I said, <code>quot.mk</code> and <code>quot.lift</code></p>

<a name="129010169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010169" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010169">Mario Carneiro (Jul 03 2018 at 08:22)</a>:</h4>
<p><code>quot.mk</code> takes a valuation function and produces an element of <code>Spv</code></p>

<a name="129010174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010174" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010174">Mario Carneiro (Jul 03 2018 at 08:22)</a>:</h4>
<p><code>quot.lift</code> takes a function defined on valuation functions and produces a function defined on <code>Spv</code></p>

<a name="129010188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010188" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010188">Kevin Buzzard (Jul 03 2018 at 08:23)</a>:</h4>
<p>So what about proofs which go "Spv(R) is compact. Proof: take an element of Spv(R), call it v or f or whatever, and now manipulate f in the following way..."</p>

<a name="129010195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010195" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010195">Mario Carneiro (Jul 03 2018 at 08:23)</a>:</h4>
<p>That's <code>quot.lift</code></p>

<a name="129010200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010200" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010200">Mario Carneiro (Jul 03 2018 at 08:23)</a>:</h4>
<p>Actually you will want <code>quot.ind</code> as well</p>

<a name="129010210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010210" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010210">Mario Carneiro (Jul 03 2018 at 08:23)</a>:</h4>
<p>or equivalently <code>quot.exists_rep</code></p>

<a name="129010262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010262" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010262">Mario Carneiro (Jul 03 2018 at 08:24)</a>:</h4>
<p>that is, for every element of <code>Spv</code> there is a valuation function that <code>quot.mk</code>'s to it</p>

<a name="129010274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010274" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010274">Mario Carneiro (Jul 03 2018 at 08:24)</a>:</h4>
<p>Note it's not actually a function producing valuation functions, it's an exists</p>

<a name="129010284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010284" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010284">Kevin Buzzard (Jul 03 2018 at 08:25)</a>:</h4>
<p>So if I step back here, you're saying "Experts wrote an API for <code>quot</code>. Because of some design decisions I'm suggesting about alphas, you can't use this, but write your own, everything will be fine"?</p>

<a name="129010289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010289" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010289">Kevin Buzzard (Jul 03 2018 at 08:25)</a>:</h4>
<p>Just because you don't want an alpha inside a structure?</p>

<a name="129010291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010291" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010291">Mario Carneiro (Jul 03 2018 at 08:25)</a>:</h4>
<p>The definitions on <code>quot</code> are all very canonical</p>

<a name="129010296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010296" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010296">Mario Carneiro (Jul 03 2018 at 08:25)</a>:</h4>
<p>they are essentially the universal property of quotients</p>

<a name="129010297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010297" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010297">Kevin Buzzard (Jul 03 2018 at 08:25)</a>:</h4>
<p>Can you define "very canonical" in Lean?</p>

<a name="129010299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010299" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010299">Kevin Buzzard (Jul 03 2018 at 08:25)</a>:</h4>
<p>That sounds even harder than defining canonical</p>

<a name="129010343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010343" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010343">Mario Carneiro (Jul 03 2018 at 08:26)</a>:</h4>
<p>if you prove analogues of those theorems for your type, then you have constructed the quotient up to isomorphism</p>

<a name="129010345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010345" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010345">Kevin Buzzard (Jul 03 2018 at 08:26)</a>:</h4>
<p>up to canonical isomorphism maybe</p>

<a name="129010348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010348" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010348">Mario Carneiro (Jul 03 2018 at 08:26)</a>:</h4>
<p>indeed</p>

<a name="129010350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010350" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010350">Kevin Buzzard (Jul 03 2018 at 08:26)</a>:</h4>
<p>It had better be canonical, because if R -&gt; S then I need Spv(S) -&gt; Spv(R)</p>

<a name="129010368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010368" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010368">Kevin Buzzard (Jul 03 2018 at 08:27)</a>:</h4>
<p>Not that I can define canonical in Lean...</p>

<a name="129010409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010409" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010409">Mario Carneiro (Jul 03 2018 at 08:28)</a>:</h4>
<p>This all has a category theoretic interpretation as a coequalizer, and all constructions are natural in that category</p>

<a name="129010411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010411" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010411">Mario Carneiro (Jul 03 2018 at 08:28)</a>:</h4>
<p>As opposed to, say, <code>quot.out</code>, which picks an element from an equivalence class</p>

<a name="129010428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010428" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010428">Mario Carneiro (Jul 03 2018 at 08:30)</a>:</h4>
<p>Although in your case if I understand correctly you also have a canonical way to define <code>quot.out</code> satisfying some other universal property to do with the ordered group</p>

<a name="129010534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010534" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010534">Kevin Buzzard (Jul 03 2018 at 08:32)</a>:</h4>
<p>So in summary, we should have</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">valuation</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span>
<span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">Hα</span> <span class="o">:</span> <span class="n">linear_ordered_comm_group</span> <span class="n">α</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">option</span> <span class="n">α</span><span class="o">)</span>
<span class="o">(</span><span class="n">Hf</span> <span class="o">:</span> <span class="n">is_valuation</span> <span class="n">f</span><span class="o">)</span>
</pre></div>


<p>and then maybe <code>namespace valuation</code> except I still don't properly understand what the word projection means and what it has to do with namespaces, and then we define <code>Spv</code> to be </p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">zfc</span><span class="bp">.</span><span class="n">Spv</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">A</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">ineq</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">A</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="bp">//</span> <span class="bp">∃</span> <span class="n">v</span> <span class="o">:</span> <span class="n">valuations</span> <span class="n">A</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="n">ineq</span> <span class="n">r</span> <span class="n">s</span> <span class="bp">↔</span> <span class="n">v</span><span class="bp">.</span><span class="n">f</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v</span><span class="bp">.</span><span class="n">f</span> <span class="n">s</span><span class="o">}</span>
</pre></div>


<p>except "valuations" there isn't quite right yet</p>

<a name="129010537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010537" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010537">Kevin Buzzard (Jul 03 2018 at 08:32)</a>:</h4>
<p>and then we need to write <a href="http://quot.mk" target="_blank" title="http://quot.mk">quot.mk</a>, quot.lift, quot.ind and quot.ind</p>

<a name="129010539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010539" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010539">Kevin Buzzard (Jul 03 2018 at 08:32)</a>:</h4>
<p>I see <a href="http://www.quot.mk" target="_blank" title="http://www.quot.mk">www.quot.mk</a> is available</p>

<a name="129010547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010547" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010547">Mario Carneiro (Jul 03 2018 at 08:33)</a>:</h4>
<p>For augmented functions, I recommend a <code>has_coe_to_fun</code> instance so you can write <code>v r &lt;= v s</code> at the end there</p>

<a name="129010596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010596">Kevin Buzzard (Jul 03 2018 at 08:34)</a>:</h4>
<p>Yeah I want to move back to the coe_to_fun approach. I dumped it too early when Chris told me he'd had trouble with it.</p>

<a name="129010605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010605" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010605">Mario Carneiro (Jul 03 2018 at 08:35)</a>:</h4>
<div class="codehilite"><pre><span></span>definition zfc.Spv (A : Type) [comm_ring A] : Type :=
{ineq : A → A → Prop // ∃ (A : Type) [linear_ordered_comm_group A]
  (v : valuation R A), ∀ r s : A, ineq r s ↔ v r ≤ v s}
</pre></div>

<a name="129010667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010667" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010667">Mario Carneiro (Jul 03 2018 at 08:36)</a>:</h4>
<p>If you want to be polymorphic, I suggest writing</p>
<div class="codehilite"><pre><span></span> def zfc.Spv (A : Type u) [comm_ring A] : Type :=
{ineq : A → A → Prop // ∃ (A : Type u) [linear_ordered_comm_group A]
  (v : valuation R A), ∀ r s : A, ineq r s ↔ v r ≤ v s}
</pre></div>


<p>where the valuation and ring have to share the same universe</p>

<a name="129010679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010679" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010679">Mario Carneiro (Jul 03 2018 at 08:37)</a>:</h4>
<p>You can prove that the universe need not be the same as part of the universal properties</p>

<a name="129010727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010727" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010727">Mario Carneiro (Jul 03 2018 at 08:38)</a>:</h4>
<p>i.e. <code>Spv.mk</code> takes as input a valuation function <code> (v : valuation R A)</code> where <code>{R : Type u}</code> and <code>{A : Type v}</code> (so it isn't just instantiating the exists)</p>

<a name="129010827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010827" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010827">Kevin Buzzard (Jul 03 2018 at 08:41)</a>:</h4>
<p>"If you want to be polymorphic" -- I just want to do maths. I have no idea if I want to be polymorphic. If I just want to define a perfectoid space, do I want to be polymorphic?</p>

<a name="129010994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129010994" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129010994">Mario Carneiro (Jul 03 2018 at 08:46)</a>:</h4>
<p>In lean, you should usually be polymorphic</p>

<a name="129011010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129011010" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129011010">Mario Carneiro (Jul 03 2018 at 08:47)</a>:</h4>
<p>at least in contravariant positions (i.e. the inputs should be maximally polymorphic, the output should be minimally polymorphic)</p>

<a name="129011016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129011016" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129011016">Mario Carneiro (Jul 03 2018 at 08:47)</a>:</h4>
<p>This is why we don't have <code>nat : Type u</code></p>

<a name="129012912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129012912" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129012912">Sebastien Gouezel (Jul 03 2018 at 09:41)</a>:</h4>
<p>If I read correctly, you want to have a class <code>is_valuation</code>, and then a structure type <code>valuation</code> made of all functions <code>f</code> satisfying the valuation axioms, i.e., with <code>is_valuation f</code>. What is the advantage of this approach (with typeclass inference) over the more direct approach with a structure type <code>valuation</code> in which you put directly the axioms, and then when you want to work with a valuation you just use <code>(v : valuation R A)</code> (so, getting rid completely of the typeclass <code>is_valuation</code>)?</p>

<a name="129013477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129013477" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129013477">Kevin Buzzard (Jul 03 2018 at 09:58)</a>:</h4>
<p>The problem is that a valuation is a function from a ring to some totally ordered monoid, and there's an equivalence relation which needs to be taken into account, of the form "these monoids might not be the same, but there's a map from the image of one function to the image of the other which makes lots of things commute". <code>Spv R</code> is the equivalence classes of valuations.</p>

<a name="129014391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129014391" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129014391">Sebastien Gouezel (Jul 03 2018 at 10:22)</a>:</h4>
<p>I understand this. My question is about the beginning of the discussion, with this <code>is_valuation</code> class at the start of your formalization.</p>

<a name="129015550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129015550" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129015550">Kevin Buzzard (Jul 03 2018 at 10:51)</a>:</h4>
<p>I am not the person to ask, I don't think. I have no understanding of how best to do these things in Lean, that's why I'm floundering around here. I understand the maths perfectly. Let me try and read your messages. Yes we have an inductive prop <code>is_valuation f</code>which is a class although I don't know if that's sensible (I think Kenny made it a class so it probably is). We then apparently are supposed to have  a type <code>valuation R alpha</code> which is all valuations taking values in alpha; I have no real understanding of why this is needed because I definitely don't care about all valuations taking values in alpha. You mention typeclass inference but I have no idea what should be a class because whilst I now understand what typeclass inference is and how to use it when other people have made the typeclasses, I am still extremely unclear myself about which of my own objects should be typeclasses. You now suggest I could be making a structure type <code>valuation</code> -- would this take alpha as part of the structure? I think we used to have that; Johan maybe mentioned it, and Mario said that alpha should not be part of the structure. Is A the totally ordered monoid? The only reason we have is_valuation is that someone else wrote it. I say again -- I completely understand the mathematics I want to do; I am extremely foggy about how to do it in Lean in the sense that I can see several ways and simply do not possess the toolkit necessary to work out the best way. There's my attempt to answer your question in full. At the end of the day I want <code>Spv R</code> to be the equivalence classes of valuations on R, and I have no idea whether <code>valuation</code> or <code>valuations</code> or <code>is_valuation</code> or structure or class or what is the best approach. I would happily be told explicitly what to do.</p>

<a name="129015600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129015600" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129015600">Kevin Buzzard (Jul 03 2018 at 10:52)</a>:</h4>
<p>Am I right in thinking that Mario basically told me a way of doing it above, and you are suggesting another way?</p>

<a name="129015763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129015763" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129015763">Mario Carneiro (Jul 03 2018 at 10:57)</a>:</h4>
<p>I don't think Sebastien is suggesting anything different from what I recommended (using augmented functions)</p>

<a name="129015837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129015837" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129015837">Mario Carneiro (Jul 03 2018 at 10:59)</a>:</h4>
<blockquote>
<p>I have no real understanding of why this is needed because I definitely don't care about all valuations taking values in alpha. </p>
</blockquote>
<p>The general rule is to keep types out of classes if at all possible. Lean behaves better when the types are given as "alpha" rather than "the type inside v", particularly if you start manipulating the functions (adding them, say)</p>

<a name="129015903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129015903" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129015903">Mario Carneiro (Jul 03 2018 at 11:00)</a>:</h4>
<p>Although you want to deal with "the collection of all valuations" (which is what <code>Spv</code> is for), when doing a concrete calculation you will have a <em>fixed</em> alpha with respect to which to do your monoid algebra stuff</p>

<a name="129019297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129019297" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129019297">Johan Commelin (Jul 03 2018 at 12:25)</a>:</h4>
<blockquote>
<blockquote>
<p>I have no real understanding of why this is needed because I definitely don't care about all valuations taking values in alpha. </p>
</blockquote>
<p>The general rule is to keep types out of classes if at all possible. Lean behaves better when the types are given as "alpha" rather than "the type inside v", particularly if you start manipulating the functions (adding them, say)</p>
</blockquote>
<p>Hmmm, can you be more precise about how Lean would misbehave? Because it seems "mathematically natural/convenient" to make <code>alpha</code> part of the structure, instead of a parameter.</p>

<a name="129019647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129019647" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129019647">Mario Carneiro (Jul 03 2018 at 12:33)</a>:</h4>
<p>it is the same things that make the difference between bundled vs unbundled groups. When working "internally", i.e. calculations using the monoid structure, it is better for the type to be exposed as a variable</p>

<a name="129019693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129019693" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129019693">Mario Carneiro (Jul 03 2018 at 12:34)</a>:</h4>
<p>When working externally, there is already the type <code>Spv</code> to do this</p>

<a name="129019728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129019728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129019728">Mario Carneiro (Jul 03 2018 at 12:35)</a>:</h4>
<p>Also, there is a universe issue for the ZFC diehards</p>

<a name="129020385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129020385" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129020385">Johan Commelin (Jul 03 2018 at 12:49)</a>:</h4>
<p>If I understand Sebastien correctly, then he suggesting to just merge <code>is_valuation f</code>and <code>valuation R Gamma</code> into one class. In other words, substitute the fields of <code>is_valuation</code> for the <code>Hf</code> field in <code>valuation</code>.</p>

<a name="129025279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129025279" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129025279">Kevin Buzzard (Jul 03 2018 at 14:15)</a>:</h4>
<blockquote>
<p>it is the same things that make the difference between bundled vs unbundled groups. When working "internally", i.e. calculations using the monoid structure, it is better for the type to be exposed as a variable</p>
</blockquote>
<p>I am still not up to speed with notation. "bundled" means alpha is part of the structure? exposed type means it's not?</p>

<a name="129044880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129044880" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129044880">Sebastien Gouezel (Jul 03 2018 at 20:05)</a>:</h4>
<blockquote>
<p>If I understand Sebastien correctly, then he suggesting to just merge <code>is_valuation f</code>and <code>valuation R Gamma</code> into one class. In other words, substitute the fields of <code>is_valuation</code> for the <code>Hf</code> field in <code>valuation</code>.</p>
</blockquote>
<p>Exactly (except that I don't think it should be a class, only a structure, as typeclass inference will not help you there and you want to put several valuations on the same object).</p>

<a name="129734678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129734678" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129734678">Kevin Buzzard (Jul 16 2018 at 06:58)</a>:</h4>
<p>So I didn't think about perfectoid spaces for two weeks because I've been running my summer project, doing a bunch of Lean but not this sort of thing.</p>

<a name="129734680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129734680" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129734680">Kevin Buzzard (Jul 16 2018 at 06:58)</a>:</h4>
<p>I just pushed everything I had which wasn't pushed.</p>

<a name="129734940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129734940" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129734940">Kevin Buzzard (Jul 16 2018 at 07:07)</a>:</h4>
<p>But I remember exactly where I was when things got crazy -- I had defined <code>Spv</code> to be the equivalence class of valuations, and then I wanted to define <code>Cont</code> to be the subset of continuous valuations. However the naive definition of continuous is not constant on equivalence classes! Every equivalence class of valuations contains some sort of canonical subset, consisting of the valuations v taking values in Gamma union 0, where the image of v in Gamma generates Gamma, and it's these valuations that have to be continuous. To isolate this canonical subclass I had to prove Wedhorn 1.27, giving various equivalent criteria for what it meant for two valuations to be equivalent. I began to formalise this but quickly realised that I needed to extend a valuation on A to A/P (P the prime ideal corresponding to the support of v) and then to Frac(A/P) (the field of fractions) and nothing was there. I began to formalise this and then never finished, and then my summer project started. I believe Chris Hughes pushed a PR over the weekend which did this ring theory stuff though, so perhaps we can get going again. Independent of all this was the naming changes, where <code>blah</code> was changed to <code>is_blah</code> and I think I managed to half-change everything and break most of the code.</p>

<a name="129735065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129735065" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129735065">Kevin Buzzard (Jul 16 2018 at 07:11)</a>:</h4>
<p>Perhaps I should have the decency to actually try and make it all compile (various names are changed in some files but noe others -- I was persuaded to go for the <code>is_blah</code> notation for Props...)</p>

<a name="129735159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129735159" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129735159">Kevin Buzzard (Jul 16 2018 at 07:14)</a>:</h4>
<p>I have a class <code>is_valuation</code> now, and then a namespace <code>valuation</code> which needs to be changed to <code>is_valuation</code>. Hopefully that's an acceptable name for a namespace...</p>

<a name="129735173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129735173" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129735173">Johan Commelin (Jul 16 2018 at 07:14)</a>:</h4>
<blockquote>
<p>Hopefully that's an acceptable name for a namespace...</p>
</blockquote>
<p>Why not? Is you want to prove lemma's about <code>is_valuation</code>, then it would make a lot of sense to do that in the <code>is_valuation</code> namespace.</p>

<a name="129735251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129735251" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129735251">Kevin Buzzard (Jul 16 2018 at 07:17)</a>:</h4>
<p>Oh -- I remember the other thing which happened -- Mario suggested that the target group alpha for a valuation be moved from the structure into the input.</p>

<a name="129735255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129735255" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129735255">Kevin Buzzard (Jul 16 2018 at 07:17)</a>:</h4>
<p>I didn't do any of this.</p>

<a name="129735457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129735457" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129735457">Kevin Buzzard (Jul 16 2018 at 07:23)</a>:</h4>
<p>OK it should mostly compile</p>

<a name="129735877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129735877" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129735877">Johan Commelin (Jul 16 2018 at 07:36)</a>:</h4>
<p>(Zulip ought to have a :compiling: emoji...)</p>

<a name="129735947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129735947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129735947">Johan Commelin (Jul 16 2018 at 07:39)</a>:</h4>
<p>Kevin, I think the last few lines in valuations.lean should not be in the <code>is_valuation</code> namespace. Because that is actually about <code>valuations</code>.</p>

<a name="129736294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129736294" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129736294">Kevin Buzzard (Jul 16 2018 at 07:50)</a>:</h4>
<p>Johan feel free to fix up everything. I had <code>valuation</code> and <code>valuations</code>, and then <code>valuation</code> changed to <code>is_valuation</code>, and then random <code>valuations</code> turned into <code>is_valuations</code> etc etc. I can quite believe some namespaces are wrong / don't exist etc</p>

<a name="129736306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129736306" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129736306">Johan Commelin (Jul 16 2018 at 07:51)</a>:</h4>
<p>Ok, I'll see what I can do (-;</p>

<a name="129736611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129736611" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129736611">Kevin Buzzard (Jul 16 2018 at 08:01)</a>:</h4>
<p>I may as well explain the subtlety more carefully. If Gamma is some totally ordered abelian group with group law <code>*</code> then we can consider the totally ordered monoid Gamma union {0}, with {0} less than everything in Gamma (think Gamma = positive reals and the extension is the non-negative reals). A valuation on R is a map R -&gt; Gamma union {0} plus some axioms. But in general Gamma is too big -- one only needs the subgroup of Gamma generated by v(a) for a in R and v(a) non-zero, so there's some notion of equivalent valuations. </p>
<p>If the ring R has a topology then we say that v is continuous if for all g in Gamma, the pre-image of {x in Gamma union 0 | x &lt; g} is open (definition 7.7, page 58 of Wedhorn). But this definition is not constant on equivalence classes! If v is a sensible valuation (e.g. the usual valuation on the p-adic numbers) and then we enlarge Gamma by throwing in a new variable G which is bigger than 0 but less than every element of Gamma (i.e. replace Gamma with Z x Gamma, Z the integers, with lexicographic ordering) then now all of a sudden there are lots of new elements of our value group so we can consider sets such as {x in Z x Gamma | x &lt; G} whose pre-image is now just the support of v, which is not in general open even if v is continuous (e.g. {0} is not an open subset of the p-adics). Hence one has to stick to Gamma generated by v. That's the subtlety which stopped me working.</p>

<a name="129736720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129736720" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129736720">Johan Commelin (Jul 16 2018 at 08:05)</a>:</h4>
<p>Do we still want to move <code>alpha</code> out of the structure <code>valuations</code> into a parameter? I thought this was mostly to keep universes at bay...</p>

<a name="129737343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129737343" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129737343">Mario Carneiro (Jul 16 2018 at 08:26)</a>:</h4>
<p>Isn't the easy fix to just say that we only consider preimages of {x in Gamma union 0 | x &lt; v(a)} for some a?</p>

<a name="129737360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129737360" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129737360">Mario Carneiro (Jul 16 2018 at 08:27)</a>:</h4>
<p>or perhaps g in the subgroup of Gamma generated by the range of v</p>

<a name="129737414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129737414" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129737414">Johan Commelin (Jul 16 2018 at 08:28)</a>:</h4>
<p>That would work, but I guess we will still want to know that in fact you just replaced the valuation with something equivalent.</p>

<a name="129737432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129737432" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129737432">Mario Carneiro (Jul 16 2018 at 08:28)</a>:</h4>
<p>I didn't change the valuation there</p>

<a name="129737440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129737440" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129737440">Mario Carneiro (Jul 16 2018 at 08:29)</a>:</h4>
<p>I thought that the valuation equivalence relation was already defined; I mean that's what <code>Spv</code> was all about</p>

<a name="129737514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129737514" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129737514">Mario Carneiro (Jul 16 2018 at 08:31)</a>:</h4>
<p>I mentioned that one of the axioms you want for <code>Spv</code> is an equivalent to either <code>quot.ind</code> or <code>quot.exists_rep</code>; you can strengthen this theorem to say that every equivalence relation has a representative valuation on some Gamma union 0 such that the valuation is surjective (or essentially surjective? The range generates the group)</p>

<a name="129737556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129737556" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129737556">Mario Carneiro (Jul 16 2018 at 08:32)</a>:</h4>
<p>Hopefully such a Gamma is unique up to isomorphism on the equivalence class</p>

<a name="129737571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129737571" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129737571">Mario Carneiro (Jul 16 2018 at 08:33)</a>:</h4>
<p>(Note that it would be very hard to state this theorem if <code>alpha</code> in the structure <code>valuations</code> was a field)</p>

<a name="129737617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129737617" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129737617">Mario Carneiro (Jul 16 2018 at 08:34)</a>:</h4>
<p>because here we need to say that <code>alpha</code> is <code>with_zero Gamma</code> for some <code>Gamma</code>, but we don't want to impose an equality to cast over</p>

<a name="129737769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129737769" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129737769">Johan Commelin (Jul 16 2018 at 08:39)</a>:</h4>
<p>Ok, I see</p>

<a name="129737772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129737772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129737772">Johan Commelin (Jul 16 2018 at 08:39)</a>:</h4>
<p>This might be a good way to go forward with</p>

<a name="129738129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129738129" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129738129">Johan Commelin (Jul 16 2018 at 08:51)</a>:</h4>
<p>What is the best way to prove that the intersection of two neighbourhoods is a neighbourhood?</p>
<div class="codehilite"><pre><span></span><span class="n">Va</span> <span class="err">∩</span> <span class="n">Vb</span> <span class="err">∈</span> <span class="o">(</span><span class="n">nhds</span> <span class="mi">0</span><span class="o">)</span><span class="bp">.</span><span class="n">sets</span>
</pre></div>

<a name="129738131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129738131" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129738131">Johan Commelin (Jul 16 2018 at 08:51)</a>:</h4>
<p>I guess this is already in mathlib somewhere, but I can't find it...</p>

<a name="129738181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129738181" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129738181">Mario Carneiro (Jul 16 2018 at 08:52)</a>:</h4>
<p>It's a filter</p>

<a name="129738191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129738191" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129738191">Mario Carneiro (Jul 16 2018 at 08:53)</a>:</h4>
<p>use <code>inter_mem_sets</code></p>

<a name="129738246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129738246" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129738246">Patrick Massot (Jul 16 2018 at 08:55)</a>:</h4>
<p>Johan, what are you working on? I'd like to be sure we don't duplicate efforts.</p>

<a name="129738353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129738353" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129738353">Johan Commelin (Jul 16 2018 at 08:59)</a>:</h4>
<p>Trying to prove that power_bounded_subring is in fact a subring.</p>

<a name="129738441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129738441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129738441">Johan Commelin (Jul 16 2018 at 09:01)</a>:</h4>
<p>You weren't doing something similar, were you?</p>

<a name="129740202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129740202" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129740202">Patrick Massot (Jul 16 2018 at 09:51)</a>:</h4>
<p>No, I'm working on completions of topological rings</p>

<a name="129750955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129750955" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129750955">Johan Commelin (Jul 16 2018 at 13:55)</a>:</h4>
<p>I have a continuous map <code>f</code>, a point <code>x</code> and a nhd <code>U</code> of <code>f x</code>. How do I prove that the inverse image of <code>U</code> under <code>f</code> is a nhd of <code>x</code>? That should be in mathlib already, I guess... but I can't find it.</p>

<a name="129750979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129750979" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129750979">Johan Commelin (Jul 16 2018 at 13:55)</a>:</h4>
<p>Concretely, I have a top ring <code>R</code>, and a nhd <code>U</code> of <code>0 : R</code>. And I want to prove that <code>{u | -u \in U}</code> is also a nhd of <code>0</code>.</p>

<a name="129751036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129751036" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129751036">Patrick Massot (Jul 16 2018 at 13:56)</a>:</h4>
<p><a href="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/for_mathlib/topological_structures.lean#L52" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/for_mathlib/topological_structures.lean#L52">https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/for_mathlib/topological_structures.lean#L52</a></p>

<a name="129751041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129751041" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129751041">Patrick Massot (Jul 16 2018 at 13:56)</a>:</h4>
<p>This is exactly this lemma</p>

<a name="129751043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129751043" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129751043">Kenny Lau (Jul 16 2018 at 13:57)</a>:</h4>
<p>also why are we using <code>nhds</code> instead of <code>nbhd</code></p>

<a name="129751062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129751062" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129751062">Patrick Massot (Jul 16 2018 at 13:57)</a>:</h4>
<p>the filter <code>nhds x</code> is the filter of all neighborhoods of <code>x</code></p>

<a name="129751066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129751066" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129751066">Mario Carneiro (Jul 16 2018 at 13:57)</a>:</h4>
<p>The plural is because it is a filter</p>

<a name="129751071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129751071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129751071">Kenny Lau (Jul 16 2018 at 13:57)</a>:</h4>
<p><code>nbhds</code>?</p>

<a name="129751116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129751116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129751116">Mario Carneiro (Jul 16 2018 at 13:58)</a>:</h4>
<p>I like four letters</p>

<a name="129751147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129751147" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129751147">Patrick Massot (Jul 16 2018 at 13:59)</a>:</h4>
<p>it took me a while to get to the point where I could type <code>nhds</code> on the first try</p>

<a name="129751363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129751363" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129751363">Johan Commelin (Jul 16 2018 at 14:02)</a>:</h4>
<p>Patrick, thanks. I somehow didn't see how to apply that lemma. I'll try again.</p>

<a name="129751576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129751576" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129751576">Johan Commelin (Jul 16 2018 at 14:06)</a>:</h4>
<p>Done! And thanks again.</p>

<a name="129751740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129751740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129751740">Patrick Massot (Jul 16 2018 at 14:09)</a>:</h4>
<p>After that lemma, you can get to your statement with:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">U</span> <span class="err">∈</span> <span class="o">(</span><span class="n">nhds</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">G</span><span class="o">))</span><span class="bp">.</span><span class="n">sets</span><span class="o">,</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="bp">-</span><span class="n">x</span> <span class="err">∈</span> <span class="n">U</span><span class="o">}</span> <span class="err">∈</span> <span class="o">(</span><span class="n">nhds</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">G</span><span class="o">))</span><span class="bp">.</span><span class="n">sets</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">U</span> <span class="n">U_in</span><span class="o">,</span>
  <span class="n">rw</span> <span class="err">←</span><span class="n">nhds_zero_symm</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">mem_vmap_sets</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="o">[</span><span class="n">U</span><span class="o">,</span> <span class="n">U_in</span><span class="o">],</span>
  <span class="n">intro</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">simp</span>
<span class="kn">end</span>
</pre></div>


<p>but maybe there is a shorter way</p>

<a name="129751916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129751916" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129751916">Johan Commelin (Jul 16 2018 at 14:12)</a>:</h4>
<p>I just copied part of the proof: <code>apply continuous.tendsto (topological_add_group.continuous_neg R) 0, simpa</code>.</p>

<a name="129754628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129754628" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129754628">Johan Commelin (Jul 16 2018 at 14:55)</a>:</h4>
<p>Just posting this here to report on what I've tried so far: <a href="https://github.com/jcommelin/lean-perfectoid-spaces/blob/power_bounded/src/power_bounded.lean" target="_blank" title="https://github.com/jcommelin/lean-perfectoid-spaces/blob/power_bounded/src/power_bounded.lean">https://github.com/jcommelin/lean-perfectoid-spaces/blob/power_bounded/src/power_bounded.lean</a></p>

<a name="129754641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129754641" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129754641">Johan Commelin (Jul 16 2018 at 14:55)</a>:</h4>
<p>Nothing serious done yet...</p>

<a name="129754690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129754690" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129754690">Johan Commelin (Jul 16 2018 at 14:56)</a>:</h4>
<p>And off to catch a train <span class="emoji emoji-1f68b" title="train">:train:</span></p>

<a name="129806596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129806596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129806596">Johan Commelin (Jul 17 2018 at 10:59)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I proved that power bounded elements form a submonoid, containing 0 and closed under negation.</p>

<a name="129806652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129806652" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129806652">Johan Commelin (Jul 17 2018 at 11:00)</a>:</h4>
<p>To prove that it is a ring we need extra conditions on the topology. (Powers of 2 are not bounded in <code>\R</code>.)</p>

<a name="129806657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129806657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129806657">Johan Commelin (Jul 17 2018 at 11:00)</a>:</h4>
<p>Do we need the fact that the power bounded elements form a subring? If so, in which generality?</p>

<a name="129819314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129819314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129819314">Kevin Buzzard (Jul 17 2018 at 15:38)</a>:</h4>
<p>I am not 100% convinced that we need that they form a subring (but we definitely need the notion of the set of power-bounded elements). This [power bounded elements are a subring] might be one of those things which is natural to define but which it turns out that we don't logically need. I _do_ know for sure that the only topological rings we care about are Huber rings a.k.a. f-adic rings; these are topological rings <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">A</span></span></span></span> which have an open subring <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>A</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">A_0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span> and a finitely-generated ideal <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span> of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>A</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">A_0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span> such that the induced topology on <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>A</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">A_0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span> is the <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span>-adic one (see Def 6.1 Wedhorn, p46). In particular <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">A</span></span></span></span> is non-archimedean (definition 5.23 of Huber) and and Wedhorn 5.30(3) is the result in this case. However for perfectoid spaces we only care about Tate rings (def 6.10 p48) and these rings have the property that there's some unit <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.03588em;">π</span></span></span></span> of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">A</span></span></span></span> such that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>π</mi><msub><mi>A</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">\pi A_0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.03588em;">π</span><span class="mord"><span class="mord mathit">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span> is an ideal of definition, i.e. you can assume <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span> is principal. In that case <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>=</mo><msub><mi>A</mi><mn>0</mn></msub><mo>[</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi>π</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">A=A_0[1/\pi]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">A</span><span class="mrel">=</span><span class="mord"><span class="mord mathit">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mopen">[</span><span class="mord mathrm">1</span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.03588em;">π</span><span class="mclose">]</span></span></span></span> and boundedness just says "I'm contained in <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>π</mi><mrow><mo>−</mo><mi>n</mi></mrow></msup><msub><mi>A</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">\pi^{-n}A_0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.921331em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathit mtight">n</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathit">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span> for some $n$". Proofs are probably easier in this case.</p>

<a name="129824275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129824275" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129824275">Johan Commelin (Jul 17 2018 at 17:30)</a>:</h4>
<p>Ok, then I'll stop working on the power_bounded branch for a while.</p>

<a name="129824315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129824315" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129824315">Johan Commelin (Jul 17 2018 at 17:30)</a>:</h4>
<p>I had a couple of silly definitions (like ideal_of_definition, etc...) in a Huber_pair branch. I will take a look at those tomorrow, maybe I can turn that into something useful.</p>

<a name="129856374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129856374" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129856374">Johan Commelin (Jul 18 2018 at 07:27)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  <a href="https://github.com/jcommelin/lean-perfectoid-spaces/blob/Huber_pair/src/adic_space.lean" target="_blank" title="https://github.com/jcommelin/lean-perfectoid-spaces/blob/Huber_pair/src/adic_space.lean">https://github.com/jcommelin/lean-perfectoid-spaces/blob/Huber_pair/src/adic_space.lean</a> contains some definitions for Huber pairs. Do you think this is useful?</p>

<a name="129856377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129856377" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129856377">Johan Commelin (Jul 18 2018 at 07:27)</a>:</h4>
<p>I admit that it could use some tidying.</p>

<a name="129860713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129860713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129860713">Kevin Buzzard (Jul 18 2018 at 09:17)</a>:</h4>
<p>So both Patrick and Johan have made me aware of files in their own forks of the perfectoid repo which they've asked for comments on. But I am miles away from this. I (or someone) really needs to understand all these comments made on 3rd July just before the big pause in this thread (which was to a large extent caused by the fact that I knew I'd need to find some time to understand them, and am only just finding this time). </p>
<p>I now have</p>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">is_valuation</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_ordered_comm_group</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">option</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">map_zero</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
<span class="o">(</span><span class="n">map_one</span>  <span class="o">:</span> <span class="n">f</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span>
<span class="o">(</span><span class="n">map_mul</span>  <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span>
<span class="o">(</span><span class="n">map_add</span>  <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span>
</pre></div>


<p>in the root namespace -- is that even right? Is that ever right for a niche notion like this? </p>
<p>I have</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">valuation</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="err">Γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">linear_ordered_comm_group</span> <span class="err">Γ</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">option</span> <span class="err">Γ</span><span class="o">)</span>
<span class="o">[</span><span class="n">Hf</span> <span class="o">:</span> <span class="n">is_valuation</span> <span class="n">f</span><span class="o">]</span>
</pre></div>


<p>-- is this supposed to go in the same namespace as <code>is_valuation</code> or it is supposed to be <code>is_valuation.valuation</code>? And am I right in thinking that there's no point putting the square brackets there? I have re-instated the coe to fun:</p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="err">Γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">H</span><span class="err">Γ</span> <span class="o">:</span> <span class="n">linear_ordered_comm_group</span> <span class="err">Γ</span><span class="o">]</span> <span class="o">:</span>
<span class="n">has_coe_to_fun</span> <span class="o">(</span><span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">F</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">_</span><span class="o">,</span><span class="n">R</span> <span class="bp">→</span> <span class="n">option</span> <span class="err">Γ</span><span class="o">,</span> <span class="n">coe</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">v</span><span class="o">,</span><span class="n">v</span><span class="bp">.</span><span class="n">f</span><span class="o">}</span>
</pre></div>


<p>and in an attempt to use type class inference (which I have no idea whether I should be using or not) I have</p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">{</span><span class="err">Γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_ordered_comm_group</span> <span class="err">Γ</span><span class="o">]</span>
<span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_valuation</span> <span class="o">(</span><span class="n">v</span><span class="o">)</span> <span class="o">:=</span> <span class="n">v</span><span class="bp">.</span><span class="n">Hf</span>

<span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="n">valuation</span><span class="bp">.</span><span class="n">Hf</span>
</pre></div>


<p>I am unclear about which one is right or whether I'm supposed to have both. </p>
<p>I am now attempting to define the "equivalence classes" for an equivalence relation that I will never define even though mathematicians talk about it:</p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">Spv</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">A</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">ineq</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">A</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="bp">//</span> <span class="bp">∃</span> <span class="o">(</span><span class="err">Γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">linear_ordered_comm_group</span> <span class="err">Γ</span><span class="o">]</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">A</span> <span class="err">Γ</span><span class="o">),</span> <span class="bp">∀</span> <span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="n">ineq</span> <span class="n">r</span> <span class="n">s</span> <span class="bp">↔</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v</span> <span class="n">s</span><span class="o">}</span>
</pre></div>


<p>and I discover that type class inference won't let me do this:</p>
<div class="codehilite"><pre><span></span><span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="n">class</span> <span class="kn">instance</span> <span class="n">for</span>
<span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">comm_ring</span> <span class="n">A</span><span class="o">,</span>
<span class="n">ineq</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">A</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">,</span>
<span class="err">Γ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="err">?</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_2</span> <span class="o">:</span> <span class="n">linear_ordered_comm_group</span> <span class="err">Γ</span>
<span class="err">⊢</span> <span class="n">linear_ordered_comm_group</span> <span class="err">Γ</span>
</pre></div>


<p>The mathematical hold-up with the project is that I need to define what it means for an equivalence class to be a continuous (equivalence class of) valuation(s) so I can work on this, but the above is where I am with the infrastructure issue and as you can see I'm not there yet, and not 100% clear that what I've already done is OK.</p>
<div class="codehilite"><pre><span></span>
</pre></div>

<a name="129860942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129860942" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129860942">Johan Commelin (Jul 18 2018 at 09:21)</a>:</h4>
<blockquote>
<p>in the root namespace -- is that even right? Is that ever right for a niche notion like this? </p>
</blockquote>
<p>Well, Wiki knows about 3 mathematical uses for <code>valuation</code>, so I don't think it is very niche. At some point we might need to move it into a namespace, but I don't think we need to worry about that now.</p>

<a name="129861074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861074" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861074">Johan Commelin (Jul 18 2018 at 09:24)</a>:</h4>
<p>And I keep getting confused why type class inference doesn't grab the instance from the local context. I really don't understand that behaviour. Because sometimes it does... and sometimes it doesn't (from my layman's POV).</p>

<a name="129861179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861179" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861179">Johan Commelin (Jul 18 2018 at 09:26)</a>:</h4>
<p>Kevin, of course you can fix it by giving the instance a name, and then writing <code>@valuation _ _ _ foo _ _ A \Gamma</code> or something like that (didn't check the number of <code>_</code> that you need).</p>

<a name="129861356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861356" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861356">Mario Carneiro (Jul 18 2018 at 09:30)</a>:</h4>
<p>I'm not sure this is the universally agreed notion of "valuation" though. What's up with that last axiom?</p>

<a name="129861376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861376" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861376">Mario Carneiro (Jul 18 2018 at 09:31)</a>:</h4>
<p>Oh, wikipedia says you have the inequality backwards</p>

<a name="129861427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861427" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861427">Johan Commelin (Jul 18 2018 at 09:32)</a>:</h4>
<p>No?</p>

<a name="129861447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861447" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861447">Mario Carneiro (Jul 18 2018 at 09:32)</a>:</h4>
<blockquote>
<p>v(a + b) ≥ min(v(a), v(b))</p>
</blockquote>

<a name="129861454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861454" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861454">Johan Commelin (Jul 18 2018 at 09:33)</a>:</h4>
<p>That is the additive version</p>

<a name="129861463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861463" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861463">Mario Carneiro (Jul 18 2018 at 09:33)</a>:</h4>
<blockquote>
<p><code>∀ x y, f (x + y) ≤ f x ∨ f (x + y) ≤ f y</code></p>
</blockquote>

<a name="129861464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861464" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861464">Mario Carneiro (Jul 18 2018 at 09:33)</a>:</h4>
<p>not the same</p>

<a name="129861475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861475" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861475">Johan Commelin (Jul 18 2018 at 09:33)</a>:</h4>
<p>They add infinity to an additive group. If you scroll down, you get the multiplicative version, with 0 added.</p>

<a name="129861526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861526" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861526">Johan Commelin (Jul 18 2018 at 09:34)</a>:</h4>
<p>I guess at some point we will also have <code>is_add_valuation</code>...</p>

<a name="129861550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861550" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861550">Mario Carneiro (Jul 18 2018 at 09:35)</a>:</h4>
<p>Oh, so <code>(f : R → option α)</code> should be <code>(f : R → with_zero α)</code></p>

<a name="129861553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861553" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861553">Kevin Buzzard (Jul 18 2018 at 09:35)</a>:</h4>
<p>Yes the notation is a nightmare. Our valuations should be called seminorms.</p>

<a name="129861557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861557" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861557">Kevin Buzzard (Jul 18 2018 at 09:35)</a>:</h4>
<p>and yes, option alpha is alpha plus a bottom. option (positive reals) = non-negative reals in this context.</p>

<a name="129861601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861601" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861601">Johan Commelin (Jul 18 2018 at 09:36)</a>:</h4>
<p>If you call it a seminorm, then I think you don't have to worry about naming conflicts at all (-;</p>

<a name="129861619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861619">Kevin Buzzard (Jul 18 2018 at 09:36)</a>:</h4>
<p>Huber's decision to call it a valuation is very unfortunate.</p>

<a name="129861620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861620" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861620">Mario Carneiro (Jul 18 2018 at 09:36)</a>:</h4>
<p>I mention this because mathlib defines like 6 meanings for the none element of option depending on the name</p>

<a name="129861632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861632" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861632">Mario Carneiro (Jul 18 2018 at 09:37)</a>:</h4>
<p><code>with_zero</code>, <code>with_bot</code>, <code>with_top</code>, <code>with_one</code>,...</p>

<a name="129861648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861648" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861648">Kevin Buzzard (Jul 18 2018 at 09:37)</a>:</h4>
<p>Kenny wrote the code extending &lt;= etc to option alpha before these things existed, I believe</p>

<a name="129861660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861660" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861660">Kevin Buzzard (Jul 18 2018 at 09:37)</a>:</h4>
<p>and I had trouble using <code>with_top</code> recently; I posted a question about it but I don't think I got any responses.</p>

<a name="129861719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861719" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861719">Kevin Buzzard (Jul 18 2018 at 09:38)</a>:</h4>
<p><a href="#narrow/stream/113488-general/topic/multiset.20min.20on.20with_top" title="#narrow/stream/113488-general/topic/multiset.20min.20on.20with_top">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/multiset.20min.20on.20with_top</a></p>

<a name="129861722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129861722" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129861722">Kevin Buzzard (Jul 18 2018 at 09:38)</a>:</h4>
<p>so I'm slightly scared of these things now</p>

<a name="129862031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129862031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129862031">Kevin Buzzard (Jul 18 2018 at 09:46)</a>:</h4>
<blockquote>
<p>Kevin, of course you can fix it by giving the instance a name, and then writing <code>@valuation _ _ _ foo _ _ A \Gamma</code> or something like that (didn't check the number of <code>_</code> that you need).</p>
</blockquote>
<p>Now the problem moves to</p>
<div class="codehilite"><pre><span></span>failed to synthesize type class instance for
⊢ has_le (option Γ)
</pre></div>


<p>because if Gamma is known by type class inference to be a linear_ordered_comm_group then type class inference knows what the le is on option Gamma, but it doesn't.</p>

<a name="129862044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129862044" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129862044">Kevin Buzzard (Jul 18 2018 at 09:46)</a>:</h4>
<p>There's some weird way of making all this work with haveI or exactI or something</p>

<a name="129862111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129862111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129862111">Mario Carneiro (Jul 18 2018 at 09:48)</a>:</h4>
<p>put a <code>by exactI</code> in the middle</p>

<a name="129862118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129862118" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129862118">Mario Carneiro (Jul 18 2018 at 09:49)</a>:</h4>
<p>between the instance binder and the definition that uses it</p>

<a name="129862135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129862135" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129862135">Kevin Buzzard (Jul 18 2018 at 09:50)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">Spv</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">A</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">ineq</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">A</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="bp">//</span> <span class="bp">∃</span> <span class="o">(</span><span class="err">Γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">H</span><span class="err">Γ</span> <span class="o">:</span> <span class="n">linear_ordered_comm_group</span> <span class="err">Γ</span><span class="o">]</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="bp">@</span><span class="n">valuation</span> <span class="n">A</span> <span class="bp">_</span> <span class="err">Γ</span> <span class="n">H</span><span class="err">Γ</span><span class="o">),</span>
  <span class="k">by</span> <span class="n">exactI</span> <span class="bp">∀</span> <span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="n">ineq</span> <span class="n">r</span> <span class="n">s</span> <span class="bp">↔</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v</span> <span class="n">s</span><span class="o">}</span>
</pre></div>


<p>Black magic!</p>

<a name="129862214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129862214" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129862214">Kevin Buzzard (Jul 18 2018 at 09:51)</a>:</h4>
<p>I keep meaning to write some docs on this -- I asked about 5 questions of this nature on the typeclass woes thread but then I didn't write up a coherent summary (I just starred a bunch of messages from Mario) and it still comes back to burn me because I can no longer remember anything which I don't use regularly so I need notes.</p>

<a name="129862222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129862222" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129862222">Kevin Buzzard (Jul 18 2018 at 09:51)</a>:</h4>
<p>Thanks Mario.</p>

<a name="129862312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129862312" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129862312">Johan Commelin (Jul 18 2018 at 09:53)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Would it be possible to use <code>exactI</code> and avoid the explicit mention of <code>H\Gamma</code>?</p>

<a name="129862360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129862360" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129862360">Mario Carneiro (Jul 18 2018 at 09:54)</a>:</h4>
<p>yes, just move it earlier</p>

<a name="129862363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129862363" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129862363">Johan Commelin (Jul 18 2018 at 09:54)</a>:</h4>
<p>Also, is this something that Lean 4 will fix? So that Kevin's first attempt will just work?</p>

<a name="129862366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129862366" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129862366">Mario Carneiro (Jul 18 2018 at 09:54)</a>:</h4>
<div class="codehilite"><pre><span></span>definition Spv (A : Type*) [comm_ring A] :=
{ineq : A → A → Prop // ∃ (Γ : Type*) [HΓ : linear_ordered_comm_group Γ],
  by exactI ∃ (v : valuation A Γ) ∀ r s : A, ineq r s ↔ v r ≤ v s}
</pre></div>

<a name="129862378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129862378" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129862378">Johan Commelin (Jul 18 2018 at 09:55)</a>:</h4>
<p><del>No, you still have <code>H\Gamma</code>.</del> <span class="emoji emoji-1f44d" title="thumbs up">:thumbs_up:</span></p>

<a name="129862438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129862438" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129862438">Mario Carneiro (Jul 18 2018 at 09:56)</a>:</h4>
<p>I have no idea if lean 4 will fix this. It was "broken on purpose" by leo</p>

<a name="129867159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129867159" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129867159">Johan Commelin (Jul 18 2018 at 11:50)</a>:</h4>
<p>Does it make sense to add <code>def is_unit (r : R) : Prop := ∃ r' : units R, r = r'.val</code>?</p>

<a name="129867166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129867166" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129867166">Johan Commelin (Jul 18 2018 at 11:51)</a>:</h4>
<p>Or am I thinking to classical?</p>

<a name="129867232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129867232" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129867232">Johan Commelin (Jul 18 2018 at 11:52)</a>:</h4>
<p>For reference:</p>
<div class="codehilite"><pre><span></span><span class="c1">-- Scholze : &quot;Recall that a topological ring R is Tate if it contains an</span>
<span class="c1">-- open and bounded subring R0 ⊂ R and a topologically nilpotent unit pi ∈ R; such elements are</span>
<span class="c1">-- called pseudo-uniformizers.</span>

<span class="n">def</span> <span class="n">topologically_nilpotent</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">∀</span> <span class="n">U</span> <span class="err">∈</span> <span class="o">(</span><span class="n">nhds</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span><span class="n">R</span><span class="o">))</span><span class="bp">.</span><span class="n">sets</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">N</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="n">N</span> <span class="bp">→</span> <span class="n">r</span><span class="err">^</span><span class="n">n</span> <span class="err">∈</span> <span class="n">U</span>

<span class="n">def</span> <span class="n">is_unit</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">∃</span> <span class="n">r&#39;</span> <span class="o">:</span> <span class="n">units</span> <span class="n">R</span><span class="o">,</span> <span class="n">r</span> <span class="bp">=</span> <span class="n">r&#39;</span><span class="bp">.</span><span class="n">val</span>

<span class="kn">definition</span> <span class="n">is_pseudo_uniformizer</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="n">topologically_nilpotent</span> <span class="n">r</span> <span class="bp">∧</span> <span class="n">is_unit</span> <span class="n">r</span>
</pre></div>

<a name="129867238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129867238" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129867238">Mario Carneiro (Jul 18 2018 at 11:52)</a>:</h4>
<p>I think there is a set for this</p>

<a name="129867257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129867257" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129867257">Mario Carneiro (Jul 18 2018 at 11:53)</a>:</h4>
<p>oh, no, there is a set for <code>nonunits</code> though</p>

<a name="129867304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129867304" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129867304">Johan Commelin (Jul 18 2018 at 11:54)</a>:</h4>
<p>Ok, so should I make <code>units_set : set R</code>?</p>

<a name="129867323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129867323" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129867323">Mario Carneiro (Jul 18 2018 at 11:55)</a>:</h4>
<p>You could have <code>pseudo_uniformizer</code> be a property of <code>units R</code></p>

<a name="129867377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129867377" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129867377">Johan Commelin (Jul 18 2018 at 11:56)</a>:</h4>
<p>Ok, that make sense</p>

<a name="129874533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129874533" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129874533">Johan Commelin (Jul 18 2018 at 14:24)</a>:</h4>
<p>Ok, I finished the definition of pseudo-uniformisers and Tate rings. Nothing deep happening: <a href="https://github.com/jcommelin/lean-perfectoid-spaces/blob/Huber_pair/src/adic_space.lean" target="_blank" title="https://github.com/jcommelin/lean-perfectoid-spaces/blob/Huber_pair/src/adic_space.lean">https://github.com/jcommelin/lean-perfectoid-spaces/blob/Huber_pair/src/adic_space.lean</a></p>

<a name="129887843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129887843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129887843">Kevin Buzzard (Jul 18 2018 at 18:18)</a>:</h4>
<p>I have not looked at either Johan's or Patrick's commits. I've been concerned today with trying to get valuations right, following the discussion on July 3rd. <span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> I now understand what you are saying. I now have</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">valuation</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="err">Γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">linear_ordered_comm_group</span> <span class="err">Γ</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">option</span> <span class="err">Γ</span><span class="o">)</span>
<span class="o">(</span><span class="n">map_zero</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
<span class="o">(</span><span class="n">map_one</span>  <span class="o">:</span> <span class="n">f</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span>
<span class="o">(</span><span class="n">map_mul</span>  <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span>
<span class="o">(</span><span class="n">map_add</span>  <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">∨</span> <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span>
</pre></div>


<p>and a coercion to fun. I refactored a bunch of Kenny's code today. We now finally have a <code>valuation</code> namespace instead of an <code>is_valuation</code> one. </p>
<p>One technical question I now have <span class="user-mention" data-user-id="110049">@Mario Carneiro</span>  : I have now decided to give up on making everything in <code>Type</code>, so I have to choose whether to make <code>R</code> and <code>Gamma</code> live in the same universe <code>u</code> or let one be in <code>u</code> and the other be in <code>v</code>. There was a subtlety in the Jul 3 comments I didn't understand with <code>Spv</code> : my definition of <code>Spv</code> is now</p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">Spv</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">ineq</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="bp">//</span> <span class="bp">∃</span> <span class="o">(</span><span class="err">Γ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">linear_ordered_comm_group</span> <span class="err">Γ</span><span class="o">],</span>
  <span class="k">by</span> <span class="n">exactI</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span><span class="o">),</span> <span class="bp">∀</span> <span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">ineq</span> <span class="n">r</span> <span class="n">s</span> <span class="bp">↔</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v</span> <span class="n">s</span><span class="o">}</span>
</pre></div>


<p>with my two types in the same universe. Do the same ideas (which I don't understand) apply to <code>valuation</code>?</p>

<a name="129924606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129924606" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129924606">Kevin Buzzard (Jul 19 2018 at 10:24)</a>:</h4>
<p>OK so I have refactored valuations. The valuation spectrum now uses the "ZFC" approach -- instead of it being "equivalence classes" on an "equivalence relation" defined on a class, it's a concrete thing (preorders with some property). I have the correct definition of continuous, the main fundamental theorem about them is sorried (being continuous is constant on equivalence classes), I have a topology on the type of all valuations, and we can put the subspace topology on the continuous valuations. Although I haven't looked at Johan's work yet I am hoping that it will let us easily define Spa(R) for R a Huber pair (it's just continuous valuations which are bounded by 1 on R^+). Although I haven't looked at Patrick's work yet I am hoping that it will easily let us put a presheaf on some "basic" open sets in Spa(R) [we need to localise and then complete; Kenny has localised and Patrick is completing]. Then we extend from a basis to the whole space using some limit procedure. That's it. This sorried theorem about continuous valuations is what I will work on next. I can see my way to the end of this now, but my experience with schemes was that there were some things which were far harder to formalise in practice than I had imagined.</p>

<a name="129926038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129926038" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129926038">Patrick Massot (Jul 19 2018 at 10:58)</a>:</h4>
<p>I had no time for Lean yesterday and this morning, but I hope to move on during this afternoon</p>

<a name="129934215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129934215" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129934215">Kevin Buzzard (Jul 19 2018 at 14:13)</a>:</h4>
<p>On 3rd July Mario said</p>
<blockquote>
<p>If you want to be polymorphic, I suggest writing</p>
<div class="codehilite"><pre><span></span> <span class="n">def</span> <span class="n">zfc</span><span class="bp">.</span><span class="n">Spv</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">ineq</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="bp">//</span> <span class="bp">∃</span> <span class="o">(</span><span class="err">Γ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">linear_ordered_comm_group</span> <span class="err">Γ</span><span class="o">]</span>
  <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span><span class="o">),</span> <span class="bp">∀</span> <span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">ineq</span> <span class="n">r</span> <span class="n">s</span> <span class="bp">↔</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v</span> <span class="n">s</span><span class="o">}</span>
</pre></div>


<p>where the valuation and ring have to share the same universe</p>
</blockquote>
<p>I don't understand why these two universes need to be the same. It seems to directly contradict the advice to be as polymorphic as possible. It's a <em>theorem</em> (I think!) that if there exists Gamma of type v such that blah, then there exists Gamma of type u such that blah. The proof (in maths) is "I only care about the subgroup of Gamma generated by the image of v, which is a function from R to Gamma". So why don't we do it this way -- with a definition which allows two universes and then a theorem remarking that we could get away with one.</p>

<a name="129934289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129934289" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129934289">Mario Carneiro (Jul 19 2018 at 14:14)</a>:</h4>
<p>because then the definition will have an "internal universe variable", and these are always unpleasant to work with</p>

<a name="129934310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129934310" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129934310">Mario Carneiro (Jul 19 2018 at 14:15)</a>:</h4>
<p>you will have to write stuff like <code>zfc.Spv.{u v}</code> all the time</p>

<a name="129934363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129934363" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129934363">Mario Carneiro (Jul 19 2018 at 14:16)</a>:</h4>
<p>the advice is to be polymorphic in your inputs, and monomorphic in your outputs</p>

<a name="129934395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/129934395" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#129934395">Mario Carneiro (Jul 19 2018 at 14:17)</a>:</h4>
<p>since the valuation or commutative group are not inputs (arguments to the function), they should not involve additional universe variables</p>

<a name="130068343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130068343" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130068343">Kevin Buzzard (Jul 21 2018 at 20:19)</a>:</h4>
<p>Over 200 lines of code later...</p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">Spv</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">ineq</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="bp">//</span> <span class="bp">∃</span> <span class="o">(</span><span class="err">Γ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">linear_ordered_comm_group</span> <span class="err">Γ</span><span class="o">],</span>
  <span class="k">by</span> <span class="n">exactI</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span><span class="o">),</span> <span class="bp">∀</span> <span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">ineq</span> <span class="n">r</span> <span class="n">s</span> <span class="bp">↔</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v</span> <span class="n">s</span><span class="o">}</span>
</pre></div>


<p>[note both in universe u]</p>
<p>and its universe-polymorphic constructor</p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">Spv</span><span class="bp">.</span><span class="n">mk</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u1</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">R</span><span class="o">]</span> <span class="o">{</span><span class="err">Γ</span><span class="mi">2</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u2</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_ordered_comm_group</span> <span class="err">Γ</span><span class="mi">2</span><span class="o">]</span>
<span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span><span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="n">Spv</span> <span class="n">R</span> <span class="o">:=</span> <span class="n">quot</span><span class="bp">.</span><span class="n">mk</span> <span class="n">v</span><span class="bp">.</span><span class="n">f</span>
</pre></div>


<p>[note <code>R</code> and <code>Γ2</code> in different universes]. I hope I understood correctly what you said I should do <span class="user-mention" data-user-id="110049">@Mario Carneiro</span>  because it's taken hours! I had to prove the universal property for quotient groups! And define quotient abelian groups! I'm trying to be a good student (and avoid Patrick's universe hell). </p>
<p>I needed decidable equality for <code>R</code> (which ironically will never be true, <code>R</code> is always something like a power series ring over the p-adic numbers) for some intermediate <code>finsupp</code> calculation involving the free abelian group on <code>R</code> (Thanks <span class="user-mention" data-user-id="110032">@Reid Barton</span> ).</p>

<a name="130068396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130068396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130068396">Kevin Buzzard (Jul 21 2018 at 20:21)</a>:</h4>
<p>Now to finally get onto what I was supposed to be doing yesterday, which was defining continuous valuations...</p>

<a name="130068405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130068405" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130068405">Mario Carneiro (Jul 21 2018 at 20:21)</a>:</h4>
<p>Hopefully you now also have that "canonical valuation" you mentioned</p>

<a name="130068434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130068434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130068434">Kevin Buzzard (Jul 21 2018 at 20:22)</a>:</h4>
<p>Yes I guess I do.</p>

<a name="130068461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130068461" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130068461">Kevin Buzzard (Jul 21 2018 at 20:22)</a>:</h4>
<p>Actually, that's a very pertinent comment because it was the fact that I'd not constructed the canonical valuation which was stopping me from defining continuity -- the equiv class is continuous iff the canonical valuation is continuous.</p>

<a name="130068472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130068472" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130068472">Kevin Buzzard (Jul 21 2018 at 20:23)</a>:</h4>
<p>I was initially going to do it another way but perhaps I can dodge that now (and run into trouble later on ;-) )</p>

<a name="130068531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130068531" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130068531">Kevin Buzzard (Jul 21 2018 at 20:25)</a>:</h4>
<p>I had to use the first isomorphism theorem to move my universe. Kind of funny. Basically an elaborate version of the following observation: if <code>G</code> and <code>H</code> are groups in different universes with a map <code>f </code>between them, then <code>G/ker(f)</code> and <code>im(f)</code> are isomorphic, but the latter is in <code>G</code>'s universe and the former in <code>H</code>'s.</p>

<a name="130068571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130068571" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130068571">Mario Carneiro (Jul 21 2018 at 20:26)</a>:</h4>
<p>yep, that's the idea</p>

<a name="130068577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130068577" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130068577">Kevin Buzzard (Jul 21 2018 at 20:26)</a>:</h4>
<p>except I had to do it with totally ordered commutative monoids</p>

<a name="130075632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130075632" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130075632">Kevin Buzzard (Jul 22 2018 at 00:32)</a>:</h4>
<p>Oh dear there is so much basic stuff about group closures which is not there. Or is it there? Here's what I think I need:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">group_theory</span><span class="bp">.</span><span class="n">coset</span>
<span class="c1">-- and hence group_theory.subgroup -- note this only arrived in mathlib a few weeks ago</span>

<span class="c1">-- for images</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">basic</span>

<span class="c1">-- finsupp for free abelian groups</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">finsupp</span>

<span class="n">universes</span> <span class="n">u</span> <span class="n">v</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">H</span><span class="o">]</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">G</span><span class="o">)</span>

<span class="c1">-- maybe use group.in_closure?</span>
<span class="kn">theorem</span> <span class="n">closure_image</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">H</span><span class="o">)</span> <span class="o">[</span><span class="n">is_group_hom</span> <span class="n">f</span><span class="o">]</span> <span class="o">:</span>
<span class="n">f</span> <span class="err">&#39;&#39;</span> <span class="o">(</span><span class="n">group</span><span class="bp">.</span><span class="n">closure</span> <span class="o">(</span><span class="n">is_group_hom</span><span class="bp">.</span><span class="n">ker</span> <span class="n">f</span><span class="o">)</span> <span class="err">∪</span> <span class="n">S</span><span class="o">)</span> <span class="bp">=</span> <span class="n">group</span><span class="bp">.</span><span class="n">closure</span> <span class="o">(</span><span class="n">f</span> <span class="err">&#39;&#39;</span> <span class="n">S</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="c1">-- don&#39;t know why we need decidable equality -- maybe some finsupp reason</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">X</span><span class="o">]</span> <span class="o">:</span> <span class="n">add_comm_group</span> <span class="o">(</span><span class="n">X</span> <span class="bp">→</span><span class="err">₀</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">apply_instance</span>

<span class="kn">definition</span> <span class="n">group</span><span class="bp">.</span><span class="n">free_ab_gens</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">X</span><span class="o">]</span> <span class="o">:</span>
<span class="n">X</span> <span class="bp">→</span> <span class="o">(</span><span class="n">X</span> <span class="bp">→</span><span class="err">₀</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">finsupp</span><span class="bp">.</span><span class="n">single</span> <span class="n">x</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span>

<span class="c1">-- do we have to copy out all of the definitions here?</span>
<span class="kn">definition</span> <span class="n">group</span><span class="bp">.</span><span class="n">add_closure</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">add_group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">G</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="c1">-- maybe use finsupp.induction?</span>
<span class="kn">theorem</span> <span class="n">closure_free_gens</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">X</span><span class="o">]</span> <span class="o">:</span>
<span class="n">group</span><span class="bp">.</span><span class="n">add_closure</span> <span class="o">((</span><span class="n">group</span><span class="bp">.</span><span class="n">free_ab_gens</span> <span class="n">X</span><span class="o">)</span> <span class="err">&#39;&#39;</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>


<p>I have to go to bed now and I'm not sure I have time for Lean tomorrow. This is the current hold-up for defining continuous valuations and hence the topological space <code>Spa R</code> associated to a Huber pair.</p>

<a name="130075906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130075906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130075906">Kevin Buzzard (Jul 22 2018 at 00:44)</a>:</h4>
<p>I did quotient groups: <a href="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/for_mathlib/quotient_group.lean" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/for_mathlib/quotient_group.lean">https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/for_mathlib/quotient_group.lean</a></p>

<a name="130075911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130075911" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130075911">Kevin Buzzard (Jul 22 2018 at 00:44)</a>:</h4>
<p>or at least the stuff I needed</p>

<a name="130090336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130090336" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130090336">Patrick Massot (Jul 22 2018 at 09:31)</a>:</h4>
<p>Did you use <code>elan toolchain link</code> to create that <code>master</code> version you indicated in the <code>leanpkg.toml</code>? Is it a link to <code>nightly-2018-06-21</code>?</p>

<a name="130091434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130091434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130091434">Kevin Buzzard (Jul 22 2018 at 10:10)</a>:</h4>
<p>I didn't really know what I was doing. I had <code>lean_version = "3.4.1"</code> there before, I just changed it manually because I updated my Lean ( knew that <code>group_theory/coset.lean</code> had changed relatively recently and I wanted to be 100% sure I had the correct version because I was thinking of PR-ing my write-up of basic properties of quotient groups). If <code>lean_version</code> is set to <code>3.4.1</code> then I think <code>leanpkg upgrade</code> upgrades to a now-fixed version of mathlib, which is <em>perfect</em> for me and my students, but might not be so ideal for a project which is nearer to the boundaries of mathlib.</p>

<a name="130091435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130091435" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130091435">Kevin Buzzard (Jul 22 2018 at 10:10)</a>:</h4>
<p>Feel free to change it back</p>

<a name="130092071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130092071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130092071">Patrick Massot (Jul 22 2018 at 10:34)</a>:</h4>
<p>I created the <code>master</code> link at home and was able to proceed. See also <a href="https://github.com/kbuzzard/lean-perfectoid-spaces/pull/6" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/pull/6">https://github.com/kbuzzard/lean-perfectoid-spaces/pull/6</a></p>

<a name="130246268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130246268" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130246268">Kevin Buzzard (Jul 25 2018 at 00:15)</a>:</h4>
<p>OK so I have a topological space <code>Cont R</code>. I am not sure how usable it will be because some key lemmas about valuations remain unproved.</p>

<a name="130246618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130246618" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130246618">Kevin Buzzard (Jul 25 2018 at 00:26)</a>:</h4>
<p>Next step is Spa(R) for R a Huber pair. This is easy, except for all the missing things which I've lost track of. <code>is_integral</code> is not defined in <code>for_mathlib/subring.lean</code> -- <span class="user-mention" data-user-id="112680">@Johan Commelin</span> is this now easy now we have polynomials?</p>

<a name="130257814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130257814" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130257814">Johan Commelin (Jul 25 2018 at 06:26)</a>:</h4>
<blockquote>
<p>Next step is Spa(R) for R a Huber pair. This is easy, except for all the missing things which I've lost track of. <code>is_integral</code> is not defined in <code>for_mathlib/subring.lean</code> -- <span class="user-mention" data-user-id="112680">@Johan Commelin</span> is this now easy now we have polynomials?</p>
</blockquote>
<p>Right. This shouldn't be hard to do now.</p>

<a name="130258076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130258076" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130258076">Johan Commelin (Jul 25 2018 at 06:35)</a>:</h4>
<p>I haven't updated my local copy of the perfectoid project yet (and rebuilds are slow....). But I guess you can just uncomment those lines in <code>subring.lean</code>. Everything looks fine to my eyeball-parse.</p>

<a name="130258256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130258256" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130258256">Patrick Massot (Jul 25 2018 at 06:40)</a>:</h4>
<p>Yesterday Kevin complained we don't have fraction fields. Johan, isn't it something you could rather easily do?</p>

<a name="130258285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130258285" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130258285">Johan Commelin (Jul 25 2018 at 06:41)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Fraction fields are already in mathlib, in the localization file. (<code>kenny</code> is a wonderful tactic!)</p>

<a name="130258345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130258345" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130258345">Johan Commelin (Jul 25 2018 at 06:42)</a>:</h4>
<p>I quote from the bottom of that file:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">quotient_ring</span><span class="bp">.</span><span class="n">field</span><span class="bp">.</span><span class="n">of_integral_domain</span> <span class="o">:</span> <span class="n">field</span> <span class="o">(</span><span class="n">quotient_ring</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span> <span class="n">implementation_follows</span><span class="bp">...</span>
</pre></div>

<a name="130258367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130258367" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130258367">Patrick Massot (Jul 25 2018 at 06:43)</a>:</h4>
<p>Well done Johan! That's efficient.</p>

<a name="130258416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130258416" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130258416">Patrick Massot (Jul 25 2018 at 06:44)</a>:</h4>
<p>I'm a bit confused by terminology. Is <code>quotient_ring</code> the localization with respect to non-zero elements?</p>

<a name="130258421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130258421" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130258421">Patrick Massot (Jul 25 2018 at 06:44)</a>:</h4>
<p>The name seems a bit too general.</p>

<a name="130258567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130258567" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130258567">Johan Commelin (Jul 25 2018 at 06:48)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">quotient_ring</span> <span class="o">:=</span> <span class="n">loc</span> <span class="n">α</span> <span class="o">(</span><span class="n">non_zero_divisors</span> <span class="n">α</span><span class="o">)</span>
</pre></div>

<a name="130262120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130262120" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130262120">Kevin Buzzard (Jul 25 2018 at 08:27)</a>:</h4>
<p>Yes there are definitions but it's the API that's always missing.</p>

<a name="130262638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130262638" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130262638">Patrick Massot (Jul 25 2018 at 08:39)</a>:</h4>
<p>That's how Kevin speaks nowadays <span class="emoji emoji-1f609" title="wink">:wink:</span></p>

<a name="130262856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130262856" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130262856">Sean Leather (Jul 25 2018 at 08:44)</a>:</h4>
<blockquote>
<p>Yes there are definitions but it's the API that's always missing.</p>
</blockquote>
<p>Is Kevin turning into a CS person? It wasn't too long ago he was asking what an “interface” was, and now he's throwing around terms like “API” as if they were second nature.</p>

<a name="130263113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130263113" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130263113">Kevin Buzzard (Jul 25 2018 at 08:50)</a>:</h4>
<p>For example there was a definition of quotient group -- but nothing else; I needed that if f:G-&gt;H and g:G-&gt;K and ker(f) was a subset of ker(g) then there was some induced map etc etc, I needed facts about kernels for additive groups and everything was set up for multiplicative groups etc. I've now managed to understand this whole API business. I want my maths students to be able to write maths! In some sense I want their Lean code to look the same as the maths they write on paper, so when I start on formalizing example sheet questions I will take all the "obvious" things like 2x=x+x and prove them myself and tell the students what these functions are called (I'll put them all in a xena library and tell them to import it) so they can have the feeling of formalization without having to get bogged down in all the details like I got bogged down when I was solving my own problem sheets last Oct.</p>

<a name="130263141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130263141" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130263141">Kenny Lau (Jul 25 2018 at 08:51)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> the quotient group lemmas are in <a href="https://github.com/kckennylau/local-langlands-abelian/blob/master/src/quotient_group.lean" target="_blank" title="https://github.com/kckennylau/local-langlands-abelian/blob/master/src/quotient_group.lean">my local langlands project</a></p>

<a name="130263150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130263150" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130263150">Patrick Massot (Jul 25 2018 at 08:51)</a>:</h4>
<p>This is also something I will have to do for my classes next spring. I plan to prepare specialized files to import for each session.</p>

<a name="130263164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130263164" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130263164">Patrick Massot (Jul 25 2018 at 08:51)</a>:</h4>
<blockquote>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> the quotient group lemmas are in <a href="https://github.com/kckennylau/local-langlands-abelian/blob/master/src/quotient_group.lean" target="_blank" title="https://github.com/kckennylau/local-langlands-abelian/blob/master/src/quotient_group.lean">my local langlands project</a></p>
</blockquote>
<p>We really really need more mathlib PR</p>

<a name="130303814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130303814" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130303814">Kevin Buzzard (Jul 25 2018 at 21:37)</a>:</h4>
<blockquote>
<p>Next step is Spa(R) for R a Huber pair. This is easy, except for all the missing things which I've lost track of. <code>is_integral</code> is not defined in <code>for_mathlib/subring.lean</code> -- <span class="user-mention" data-user-id="112680">@Johan Commelin</span> is this now easy now we have polynomials?</p>
</blockquote>
<p>OK I've got a definition of <code>is_integrally_closed</code>. Just pushing now.</p>

<a name="130303911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130303911" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130303911">Kevin Buzzard (Jul 25 2018 at 21:39)</a>:</h4>
<p>PS <span class="user-mention" data-user-id="110031">@Patrick Massot</span> we really do need Lean "master" now, or at least mathlib beyond 3.4.1, because I'm using Chris' recent monster polynomial PR (which has been accepted).</p>

<a name="130303980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130303980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130303980">Patrick Massot (Jul 25 2018 at 21:40)</a>:</h4>
<p>I don't see the link between Lean master and "mathlib beyond 3.4.1"</p>

<a name="130304598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130304598" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130304598">Kevin Buzzard (Jul 25 2018 at 21:53)</a>:</h4>
<p>I think that before it said <code>lean_version = "3.4.1"</code> and Mario, either intentionally or by accident, has created a branch of mathlib called 3.4.1 and has stopped updating it, which is great for my students because we can all stay on the same version and code that one of them works for another one (they are all running the same version of Lean and mathlib), but is not so great if we want bleeding edge stuff, which we do want here.</p>

<a name="130304668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130304668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130304668">Kevin Buzzard (Jul 25 2018 at 21:54)</a>:</h4>
<p>Oh -- perhaps you're saying that the reason the behaviour has changed for me is not because I've changed <code>lean_version</code> but because I've changed which version of lean i'm actually running?</p>

<a name="130304676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130304676" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130304676">Patrick Massot (Jul 25 2018 at 21:54)</a>:</h4>
<p>mathlib version has nothing to do with Lean version, right?</p>

<a name="130304698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130304698" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130304698">Kevin Buzzard (Jul 25 2018 at 21:55)</a>:</h4>
<p>All I know is that when my students type <code>leanpkg upgrade</code> they all upgrade to the same version regardless of when they type it.</p>

<a name="130304706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130304706" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130304706">Kevin Buzzard (Jul 25 2018 at 21:55)</a>:</h4>
<p>which is good because new ones arrive (e.g. we've got two new students this week)</p>

<a name="130304781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130304781" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130304781">Patrick Massot (Jul 25 2018 at 21:56)</a>:</h4>
<p>Anyway, how did you get that <code>master</code> toolchain for <code>elan</code>?</p>

<a name="130305339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130305339" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130305339">Kevin Buzzard (Jul 25 2018 at 22:09)</a>:</h4>
<p>I just edited the .toml file. I've never used elan. I think I should start -- I now have a situation where I genuinely want to use different versions of Lean for different projects.</p>

<a name="130305402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130305402" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130305402">Patrick Massot (Jul 25 2018 at 22:10)</a>:</h4>
<p>Oh, so maybe that's why it doesn't work the same here.</p>

<a name="130306015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130306015" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130306015">Patrick Massot (Jul 25 2018 at 22:25)</a>:</h4>
<p>Why don't you merge <a href="https://github.com/kbuzzard/lean-perfectoid-spaces/pull/7" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/pull/7">https://github.com/kbuzzard/lean-perfectoid-spaces/pull/7</a>?</p>

<a name="130375846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130375846" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130375846">Patrick Massot (Jul 26 2018 at 22:49)</a>:</h4>
<p>Thanks to crucial help from Johannes, I was able to unlock <a href="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/completion.lean#L226" target="_blank" title="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/completion.lean#L226">"completions of products are products of completions" </a>. With some more effort and much help from the <code>change</code> tactic I also proved the <a href="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/completion.lean#L238" target="_blank" title="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/completion.lean#L238">lifting property</a> of this isomorphism (basically it does what it should to elements present before completion). Then I made a huge push and unsorried <a href="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/topological_structures.lean#L261" target="_blank" title="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/topological_structures.lean#L261">https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/topological_structures.lean#L261</a>. It means that every topological abelian group G now has a Hausdorff completion which is an abelian group, and the map from G to its completion is a group morphism. Next step is to prove some more properties and push to rings.</p>

<a name="130391508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130391508" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130391508">Kevin Buzzard (Jul 27 2018 at 06:17)</a>:</h4>
<p>So I have a topological space Spa(R,R+) [in the sense that I have an unsorried definition in Lean, where (R,R+) is a Huber pair), and I want to put a sheaf on it. Its global sections are the completion of R; R is a commutative topological ring and, thought of as an abelian group, a basis of neighbourhoods of zero for the topology is induced by a (countable, if this matters) decreasing family of subgroups. More generally its sections on some appropriate opens are completions of other such rings. If I have the sections on the appropriate opens I can get the sheaf on all opens by some direct limit procedure, and then we have affinoid pre-adic spaces. The hard work in schemes was then to prove that this presheaf was a sheaf -- but this is not true in this generality, because completeness is quite a poorly-behaved functor when it comes to algebraic properties (unlike localisation it doesn't preserve exactness), so an affinoid adic space is simply <em>defined</em> to be a preadic space for which the presheaf is a sheaf. An adic space is something glued from affinoid adic spaces, and a perfectoid space is an adic space glued from affinoids built from (R,R+) which are perfectoid rings. The end is in sight!</p>
<p>So given a topological ring with the topology defined by a collection of additive subgroups, how do I complete it? Will you push to my repo?</p>

<a name="130395480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130395480" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130395480">Patrick Massot (Jul 27 2018 at 08:09)</a>:</h4>
<p>Of course I will PR to your repo. I can do it now if you want but, as explained yesterday, there is still work to be done</p>

<a name="130402876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130402876" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130402876">Patrick Massot (Jul 27 2018 at 11:00)</a>:</h4>
<p>I worked a bit this morning, but I'm stuck in type class inference hell, and it's lunch time. See <a href="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/topological_structures.lean#L366" target="_blank" title="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/topological_structures.lean#L366">https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/topological_structures.lean#L366</a></p>

<a name="130402893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130402893" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130402893">Patrick Massot (Jul 27 2018 at 11:01)</a>:</h4>
<p>This instance should be a trvial consequence of the previous one, but suddenly Lean doesn't find the relevant intermediate type classes instances.</p>

<a name="130402954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130402954" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130402954">Patrick Massot (Jul 27 2018 at 11:03)</a>:</h4>
<p>But I do have the universal mapping property of completions of abelian topological groups modulo <a href="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/topological_structures.lean#L200" target="_blank" title="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/topological_structures.lean#L200">https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/topological_structures.lean#L200</a> claiming that continuity of group morphisms implies uniform continuity (there I'm not stuck, I haven't found time to try yet)</p>

<a name="130408236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130408236" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130408236">Patrick Massot (Jul 27 2018 at 12:51)</a>:</h4>
<p>I'm done with uniform continuity to continuous (abelian) group morphisms. But I'd be really grateful if someone can sort out the type class inference hell at the end of <a href="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/topological_structures.lean" target="_blank" title="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/topological_structures.lean">https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/topological_structures.lean</a></p>

<a name="130408302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130408302" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130408302">Patrick Massot (Jul 27 2018 at 12:52)</a>:</h4>
<p>I'm afraid I can't minimize this, it's precisely the complexity of type classes that triggers the issue. But feel free to clone and fix, I need to go back to real world for a while.</p>

<a name="130417136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130417136" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130417136">Patrick Massot (Jul 27 2018 at 15:25)</a>:</h4>
<p>Johannes explained the source of my trouble. I have an interesting diamond here. I have an instance saying that every abelian topological group is a uniform space. Another one says every completion of a uniform space is a uniform space. And the last one says the completion of an abelian topological group is an abelian topological group. Question: what is the uniform space structure on the completion of an abelian topological group? The completion one or the group one?</p>

<a name="130419183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130419183" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130419183">Kevin Buzzard (Jul 27 2018 at 15:55)</a>:</h4>
<p>Are they (non-definitionally) equal? Presumably! Maybe use some cool priority trick ;-)</p>

<a name="130426702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130426702" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130426702">Patrick Massot (Jul 27 2018 at 18:08)</a>:</h4>
<p>Of course there are equal, <code>by otherwise_we_would_know_it</code>. But there certainly not definitionally equal. I'll see if I can get around that. But my family will return from vacation in a couple of minutes, so I may slow down a bit on the Lean side (I was alone at home for the past two weeks).</p>

<a name="130438821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130438821" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130438821">Kevin Buzzard (Jul 27 2018 at 22:12)</a>:</h4>
<p>You should prove a theorem that the two instances are equal and add it to the type class inference system in some way that's presumably impossible. You should decide which instance you prefer and give it a higher priority. Let the system carry around both proofs and if your favourite one doesn't pan out then we can try the other one</p>

<a name="130465792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130465792" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130465792">Kevin Buzzard (Jul 28 2018 at 12:38)</a>:</h4>
<p>OK so the perfectoid library currently compiles, with some sorries, and I want to spend some time today trying to figure out what we need to do next. I'd be happy to accept WIP PR's as long as they compile (sorrys are fine). Johan did PR something but I screwed up the merge and just rewrote history so it never happened.</p>

<a name="130466055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130466055" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130466055">Kevin Buzzard (Jul 28 2018 at 12:48)</a>:</h4>
<p>I feel like a bunch of things need refactoring but I'm worried I'll screw up everyone's forks if I start moving stuff around.</p>

<a name="130466968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130466968" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130466968">Kevin Buzzard (Jul 28 2018 at 13:12)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> <span class="user-mention" data-user-id="112680">@Johan Commelin</span> Currently <code>adic_space.lean</code> is just a dumping ground for everything which hasn't got a proper file to live in. We need a file <code>Spa.lean</code> containing the definition of Spa of a Huber pair, and perhaps a file <code>Huber_pair.lean</code> containing basic definitions of Huber rings, Huber pairs and things like bounded subsets and power-bounded elements. If I make all this refactoring before I accept your PRs then you will both have messes to tidy up, right? Currently all these definitions are in <code>adic_space.lean</code>.</p>

<a name="130484907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130484907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130484907">Patrick Massot (Jul 28 2018 at 19:40)</a>:</h4>
<p>No problem with me. All my work is in files independant from <code>adic_space.lean</code></p>

<a name="130484954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130484954" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130484954">Johan Commelin (Jul 28 2018 at 19:42)</a>:</h4>
<p>I'm also fine with this. If I have any mess to tidy up, it won't be too huge.</p>

<a name="130607206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130607206" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130607206">Patrick Massot (Jul 30 2018 at 22:02)</a>:</h4>
<p><a href="https://github.com/kbuzzard/lean-perfectoid-spaces/pull/10" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/pull/10">https://github.com/kbuzzard/lean-perfectoid-spaces/pull/10</a></p>

<a name="130638624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130638624" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130638624">Kevin Buzzard (Jul 31 2018 at 11:53)</a>:</h4>
<p><a href="https://mathoverflow.net/questions/65729/what-are-perfectoid-spaces#307239" target="_blank" title="https://mathoverflow.net/questions/65729/what-are-perfectoid-spaces#307239">https://mathoverflow.net/questions/65729/what-are-perfectoid-spaces#307239</a></p>

<a name="130936504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130936504" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130936504">Kevin Buzzard (Aug 05 2018 at 16:20)</a>:</h4>
<p>Patrick -- somewhere you asked how close we were to actually finishing this project. I'm on holiday at the minute so I have time for this sort of thing (I implored my xena students to bother me with questions but of course inevitably things are less busy than when I'm spending about 20 hours a week in the same room as them). I tried to just finish the job, as it were, and the main thing that is left now is the definition of the presheaf on Spa(A). This is a multi-stage process. The first stage is to locate some "nice" open sets (analogous to the basic open sets D(f) in Spec(A)) and to define the presheaf on these. To do that we need to show that the completion of a topological commutative ring is a topological commutative ring. To define the restriction maps we'll need some commutative algebra, which I had a superficial look at and decided it shouldn't be too bad, plus the universal property of completions (we will have a ring map B -&gt; C and we'll want to extend it to B-hat -&gt; C-hat). This gives the presheaf defined on these nice open sets. We then want to extend to all open sets via some limit procedure and this should hopefully be easy. Then that's pretty much it, as far as the definition goes. Thanks a lot for your work on completions. I now feel like I know enough about uniform spaces to understand what is going on in these files -- I spent the last 24 hours or so trying to understand all this basic maths that's in Lean which I was never taught and of course now I've done it I just realise that I should have done it much earlier instead of whingeing about how I didn't understand all this uniform stuff.</p>

<a name="130942351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130942351" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130942351">Patrick Massot (Aug 05 2018 at 20:04)</a>:</h4>
<p>Thanks Kevin. I'm still slowly working on completions when  I'm not at the beach. There are a couple of things I need to figure out, on the mathematical side, and then explain to Lean. But you can easily sorry the desired properties and keep going.</p>

<a name="130942514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130942514" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130942514">Patrick Massot (Aug 05 2018 at 20:11)</a>:</h4>
<p>Of course I agree we should have learned about filters and uniform spaces earlier this year. Now I'm getting used to them. Of course knowing how to translate everything back to sets and topology is only the beginning. Unwrapping all definitions before doing anything else only brings chaos. You really need to use all those lemmas about direct and inverse image of filters. For instance, the proof I'm trying to wrap up right now begins with </p>
<div class="codehilite"><pre><span></span> <span class="n">rw</span> <span class="n">uniformity_eq_vmap_nhds_zero</span><span class="o">,</span>
 <span class="n">rw</span> <span class="n">prod_map_map_eq</span><span class="o">,</span>
 <span class="n">rw</span> <span class="err">←</span><span class="n">map_le_iff_le_vmap</span><span class="o">,</span>
 <span class="n">rw</span> <span class="n">filter</span><span class="bp">.</span><span class="n">map_map</span><span class="o">,</span>
 <span class="n">rw</span> <span class="n">prod_vmap_vmap_eq</span><span class="o">,</span><span class="bp">```</span>
</pre></div>

<a name="130942560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130942560" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130942560">Patrick Massot (Aug 05 2018 at 20:13)</a>:</h4>
<p>I keep it that way instead of one <code>rw</code> because I still want to be able to see what each of them does</p>

<a name="130942652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130942652" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130942652">Reid Barton (Aug 05 2018 at 20:16)</a>:</h4>
<p>You can still see what each one does if you put them in a <code>[ , , ]</code> list</p>

<a name="130942656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130942656" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130942656">Patrick Massot (Aug 05 2018 at 20:16)</a>:</h4>
<p>Really?</p>

<a name="130942666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130942666" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130942666">Reid Barton (Aug 05 2018 at 20:17)</a>:</h4>
<p>In emacs at least</p>

<a name="130942716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130942716" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130942716">Patrick Massot (Aug 05 2018 at 20:18)</a>:</h4>
<p>Indeed!</p>

<a name="130942717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130942717" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130942717">Patrick Massot (Aug 05 2018 at 20:18)</a>:</h4>
<p>Thanks for the tip!</p>

<a name="130945352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130945352" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130945352">Kevin Buzzard (Aug 05 2018 at 21:56)</a>:</h4>
<p>It's just more of a pain because you have to do more precise clicking rather than just moving the cursor up and down :-)</p>

<a name="130945458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130945458" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130945458">Kevin Buzzard (Aug 05 2018 at 22:00)</a>:</h4>
<p>regarding multiple rewrites and unfolding -- yes, I learnt from working with multisets that random unfolding is often not the right thing to do :-) But Johannes [and sometimes Mario] wrote all this stuff and I am now beginning to appreciate the art of it all; it would not surprise me if everything were there, once you have got the hang of how to think about these things...</p>

<a name="130945670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130945670" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130945670">Patrick Massot (Aug 05 2018 at 22:09)</a>:</h4>
<p>I don't know what you mean by "it would not surprise me if everything were there" but I can tell you that there were nothing about  uniform structures on  topological groups, and that's quite a bit of maths</p>

<a name="130945713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/130945713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#130945713">Kevin Buzzard (Aug 05 2018 at 22:10)</a>:</h4>
<p>Oh!</p>

<a name="131134402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131134402" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131134402">Patrick Massot (Aug 08 2018 at 21:45)</a>:</h4>
<p>Uniform continuity is overrated. Remember you can build the completion of a commutative topological group by extending the addition by continuity. The result is continuous because addition is uniformly continuous. When going for rings, things are more complicated because multiplication is not uniformly continuous (even on real numbers). But uniform continuity is an overly expensive way to assume that Cauchy filters go to Cauchy filters. And bilinearity is enough to ensure this, as explained in <a href="https://github.com/kbuzzard/lean-perfectoid-spaces/pull/11/files#diff-83f5ebe2bcf6329ac3366ea2deb7848dR70" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/pull/11/files#diff-83f5ebe2bcf6329ac3366ea2deb7848dR70">https://github.com/kbuzzard/lean-perfectoid-spaces/pull/11/files#diff-83f5ebe2bcf6329ac3366ea2deb7848dR70</a></p>

<a name="131134458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131134458" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131134458">Patrick Massot (Aug 08 2018 at 21:47)</a>:</h4>
<p>This is by far the most subtle theorem I ever explained to Lean, and the proof is about 170 lines long. Actually this is typically the kind of subtle proof where I love that Lean can tell me I didn't miss anything, although I would prefer if formalizing this proof were easier.</p>

<a name="131134525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131134525" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131134525">Patrick Massot (Aug 08 2018 at 21:48)</a>:</h4>
<p>I haven't yet applied this theorem to the case of multiplication, but it should immediately imply extension to the Cauchy filter space. Then I'll need to see what happens to the separation relation (Bourbaki first gets rid of the separation issue and then completes, so things are a bit different).</p>

<a name="131134640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131134640" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131134640">Patrick Massot (Aug 08 2018 at 21:51)</a>:</h4>
<p>I did prove that, before Cauchyfication, the separation relation is <code>x - y ∈ closure ({0} : set G)</code></p>

<a name="131134696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131134696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131134696">Patrick Massot (Aug 08 2018 at 21:52)</a>:</h4>
<p>Kevin, I'd be very interested to know if you can read this big proof of extension of bilinear stuff. It's clearly not in the category "this is trivial hence the proof must be obfuscated".</p>

<a name="131134769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131134769" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131134769">Kevin Buzzard (Aug 08 2018 at 21:54)</a>:</h4>
<p>I think <code>neg_left</code> follows from <code>add_left</code>, right? A Z-linear map between abelian groups just satisfies f(x+y)=f(x)+f(y) and you can deduce everything else from that.</p>

<a name="131134791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131134791" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131134791">Patrick Massot (Aug 08 2018 at 21:55)</a>:</h4>
<p>I wrote that part <em>very</em> quickly</p>

<a name="131135055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131135055" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131135055">Kevin Buzzard (Aug 08 2018 at 22:01)</a>:</h4>
<p>You proved Z-bilinear maps on dense subgroups extend uniquely. Presumably also Z-linear maps on dense subgroups extend uniquely. Can you deduce the bilinear case from the linear case? If not, then will we need some trilinear version some day?</p>

<a name="131135125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131135125" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131135125">Patrick Massot (Aug 08 2018 at 22:02)</a>:</h4>
<p>Bourbaki states it that way, presumably this generality is good enough for a number of things</p>

<a name="131135326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131135326" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131135326">Kevin Buzzard (Aug 08 2018 at 22:07)</a>:</h4>
<p>It's hard to read. I mean, it's not impossible, because I can see what every line does, but I look at it and I think "I'd rather be reading GT for sure". I certainly didn't get to the end of it.</p>

<a name="131135371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131135371" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131135371">Kevin Buzzard (Aug 08 2018 at 22:08)</a>:</h4>
<p>Too many filters :-)</p>

<a name="131135395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131135395" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131135395">Patrick Massot (Aug 08 2018 at 22:09)</a>:</h4>
<p>Don't forget that most filter-fu is hidden in the lemma I posted here yesterday <a href="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/for_mathlib/continuity.lean#L82" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/for_mathlib/continuity.lean#L82">https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/for_mathlib/continuity.lean#L82</a></p>

<a name="131135405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131135405" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131135405">Patrick Massot (Aug 08 2018 at 22:09)</a>:</h4>
<p>which has been taken out of the main proof</p>

<a name="131135410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131135410" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131135410">Kevin Buzzard (Aug 08 2018 at 22:09)</a>:</h4>
<p>And I see what you mean about all those instances! What can you do about that? </p>
<div class="codehilite"><pre><span></span>_inst_12 : topological_space A,
_inst_13 : add_comm_group A,
_inst_14 : topological_add_group A,
</pre></div>


<p>because of the way the typeclasses work, and you have five of these, so you've already just lost 15 lines the output window.</p>

<a name="131135476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131135476" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131135476">Patrick Massot (Aug 08 2018 at 22:10)</a>:</h4>
<p>and I was even worse in the beginning, because I followed Bourbaki and assumed E and F were complete Hausdorff</p>

<a name="131135504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131135504" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131135504">Patrick Massot (Aug 08 2018 at 22:11)</a>:</h4>
<p>Btw this is a great use of Lean: I proved the theorem but thought those hypotheses were useless. Then I removed the hypotheses and Lean was still happy.</p>

<a name="131135519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131135519" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131135519">Patrick Massot (Aug 08 2018 at 22:11)</a>:</h4>
<p>No need to go through the proof to triple check I wasn't implicitly using them</p>

<a name="131135586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131135586" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131135586">Patrick Massot (Aug 08 2018 at 22:12)</a>:</h4>
<p>Now I try to apply this lemma to <code>A</code> inside <code>Cauchy A</code> and get into class resolution hell. It's time to go to bed.</p>

<a name="131135596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131135596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131135596">Kevin Buzzard (Aug 08 2018 at 22:12)</a>:</h4>
<p>I know exactly what you mean about the satisfaction of going through this sort of a proof and at the end knowing <em>for sure</em> that you've dotted all the i's and crossed all the t's -- I mean, maybe not 100% sure, but I'm not even sure I operate at 99% accuracy with pencil and paper whereas I feel like I'm operating at 99.999% accuracy here.</p>

<a name="131135615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131135615" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131135615">Patrick Massot (Aug 08 2018 at 22:13)</a>:</h4>
<blockquote>
<p>It's hard to read. I mean, it's not impossible, because I can see what every line does, but I look at it and I think "I'd rather be reading GT for sure". I certainly didn't get to the end of it.</p>
</blockquote>
<p>You should read GT, but really it took me Lean to understand it's much more subtle that I originally thought.</p>

<a name="131135781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131135781" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131135781">Kevin Buzzard (Aug 08 2018 at 22:17)</a>:</h4>
<div class="codehilite"><pre><span></span>    <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="n">δ</span> <span class="err">∘</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="o">(</span><span class="n">A</span> <span class="bp">×</span> <span class="n">B</span><span class="o">)</span> <span class="bp">×</span> <span class="n">A</span> <span class="bp">×</span> <span class="n">B</span><span class="o">),</span> <span class="o">(</span><span class="n">φ</span> <span class="n">p</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">φ</span> <span class="n">p</span><span class="bp">.</span><span class="mi">2</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="o">(</span><span class="n">A</span> <span class="bp">×</span> <span class="n">B</span><span class="o">)</span> <span class="bp">×</span> <span class="o">(</span><span class="n">A</span> <span class="bp">×</span> <span class="n">B</span><span class="o">)),</span> <span class="n">φ</span> <span class="n">p</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">-</span> <span class="n">φ</span> <span class="n">p</span><span class="bp">.</span><span class="mi">1</span><span class="o">)</span>
      <span class="o">:=</span> <span class="n">rfl</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">this</span><span class="o">,</span> <span class="n">clear</span> <span class="n">this</span><span class="o">,</span>
</pre></div>


<p>You know you can do stuff like <code>rw (show blah, from refl)</code>?</p>

<a name="131135859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131135859" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131135859">Kevin Buzzard (Aug 08 2018 at 22:19)</a>:</h4>
<p>You seem to be saying that the proof is <em>not</em> "just follow your nose". Even that I find interesting -- if you'd asked me to guess beforehand, I would have suggested that it's just one of those proofs where anyone could work it out given enough paper and time by just heading slowly and surely towards the goal.</p>

<a name="131135992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131135992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131135992">Kevin Buzzard (Aug 08 2018 at 22:22)</a>:</h4>
<p>There are epsilon/4's :-)</p>

<a name="131136011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131136011" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131136011">Patrick Massot (Aug 08 2018 at 22:23)</a>:</h4>
<p>Would have you guessed the role of <a href="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/for_mathlib/complete_groups.lean#L206" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/for_mathlib/complete_groups.lean#L206">https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/for_mathlib/complete_groups.lean#L206</a>?</p>

<a name="131136023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131136023" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131136023">Patrick Massot (Aug 08 2018 at 22:23)</a>:</h4>
<p>I'm not saying this is super difficult or deep. But this is far beyond anything I wrote in Lean.</p>

<a name="131136094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131136094" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131136094">Patrick Massot (Aug 08 2018 at 22:25)</a>:</h4>
<p>This epsilon/4 is exactly the key formula trick</p>

<a name="131136104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131136104" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131136104">Patrick Massot (Aug 08 2018 at 22:26)</a>:</h4>
<p>But all the subtlety comes from constantly going back and forth between the dense subgroups and the ambient groups</p>

<a name="131136155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131136155" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131136155">Patrick Massot (Aug 08 2018 at 22:26)</a>:</h4>
<p>using limits in the subgroup for the filter induced from the neighborhood filter of a point <em>not</em> in the subgroup</p>

<a name="131136174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131136174" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131136174">Patrick Massot (Aug 08 2018 at 22:27)</a>:</h4>
<p>Now I'll sleep.</p>

<a name="131220048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/131220048" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#131220048">Johan Commelin (Aug 10 2018 at 06:47)</a>:</h4>
<p>By the way, <a href="https://mathoverflow.net/questions/65729/what-are-perfectoid-spaces#307239" target="_blank" title="https://mathoverflow.net/questions/65729/what-are-perfectoid-spaces#307239">https://mathoverflow.net/questions/65729/what-are-perfectoid-spaces#307239</a> is now  the second answer, with 27 upvotes!</p>

<a name="133069116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133069116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133069116">Patrick Massot (Aug 30 2018 at 16:02)</a>:</h4>
<p><a href="https://github.com/kbuzzard/lean-perfectoid-spaces/pull/15" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/pull/15">https://github.com/kbuzzard/lean-perfectoid-spaces/pull/15</a></p>

<a name="133069232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133069232" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133069232">Kevin Buzzard (Aug 30 2018 at 16:04)</a>:</h4>
<p>Posting on Zulip is a much better strategy for letting me know about PR's :-)</p>

<a name="133069237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133069237" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133069237">Kevin Buzzard (Aug 30 2018 at 16:04)</a>:</h4>
<p>Oh, maybe I know how to fix this -- I have to follow my own repo or something.</p>

<a name="133210528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133210528" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133210528">Kevin Buzzard (Sep 02 2018 at 10:16)</a>:</h4>
<p>Thanks for the PR's Johan and Patrick. I'm going to spend some time today seeing what compiles and what doesn't. After our conversation last Tues I'm tempted to start sorrying theorems we need if they properly belong in "standard Masters level commutative algebra" (whatever that means) and see what actually needs doing. I had planned on doing this sort of thing in Paris but in practice I spent Monday and Tuesday evening doing admin :-(</p>

<a name="133212852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133212852" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133212852">Kevin Buzzard (Sep 02 2018 at 11:51)</a>:</h4>
<p>The units of a ring <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> are traditionally denoted <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo>×</mo></msup></mrow><annotation encoding="application/x-tex">R^\times</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">×</span></span></span></span></span></span></span></span></span></span></span> or <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">R^*</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.688696em;"></span><span class="strut bottom" style="height:0.688696em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span> (I prefer the former). Is there a unicode "small cross" character which we can use as postfix notation, like the power-bounded subring notation <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>R</mi><mo>∘</mo></msup></mrow><annotation encoding="application/x-tex">R^\circ</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.674115em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∘</span></span></span></span></span></span></span></span></span></span></span> which we already are using?</p>

<a name="133213085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133213085" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133213085">Kevin Buzzard (Sep 02 2018 at 12:01)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> In <code>for_mathlib/quotient_group.lean</code> there is <code>local attribute [instance] left_rel normal_subgroup.to_is_subgroup</code> and I have <code>unknown declaration 'left_rel'</code>. Do you know what this is?</p>

<a name="133213087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133213087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133213087">Kevin Buzzard (Sep 02 2018 at 12:01)</a>:</h4>
<p>On the next line I have <code>unknown identifier 'left_cosets'</code> -- <span class="user-mention" data-user-id="110044">@Chris Hughes</span> is this called something else now? I have the current mathlib.</p>

<a name="133213743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133213743" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133213743">Patrick Massot (Sep 02 2018 at 12:26)</a>:</h4>
<p><code>left_rel</code> seems to be still here: <a href="https://github.com/leanprover/mathlib/blob/master/group_theory/coset.lean" target="_blank" title="https://github.com/leanprover/mathlib/blob/master/group_theory/coset.lean">https://github.com/leanprover/mathlib/blob/master/group_theory/coset.lean</a></p>

<a name="133213795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133213795" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133213795">Kenny Lau (Sep 02 2018 at 12:28)</a>:</h4>
<p>it's <code>quotient_group.left_rel</code> now</p>

<a name="133214046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133214046" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133214046">Patrick Massot (Sep 02 2018 at 12:38)</a>:</h4>
<p>about units, at worse we could use <a href="https://github.com/leanprover/vscode-lean/blob/master/translations.json#L1698" target="_blank" title="https://github.com/leanprover/vscode-lean/blob/master/translations.json#L1698">https://github.com/leanprover/vscode-lean/blob/master/translations.json#L1698</a></p>

<a name="133214243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133214243" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133214243">Mario Carneiro (Sep 02 2018 at 12:45)</a>:</h4>
<p>kenny is that a no?</p>

<a name="133214343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133214343" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133214343">Kenny Lau (Sep 02 2018 at 12:49)</a>:</h4>
<p>no, that's the unit symbol that he proposed</p>

<a name="133224672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133224672" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133224672">Kevin Buzzard (Sep 02 2018 at 18:48)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> am I doing something wrong? Many files in <code>for_mathlib</code> in the perfectoid repo now clash with files in mathlib. This is presumably because things got merged. But because I don't know exactly what is merged and what isn't, I am not entirely sure what I am doing. For example there is a file <code>for_mathlib/quotient_group.lean</code> which is apparently copyright you and me, and then there is also a file in mathlib called <code>group_theory/quotient_group.lean</code> which is also apparently copyright you and me, looks quite different (they seem to share a function <code>lift_mk</code> but  not too much else...). Am I now supposed to delete <code>for_mathlib/quotient_group.lean</code> and change all the imports in all the other files? I am fine doing this, I just wanted to check I'm not doing something stupid. I know there are plenty of sorrys in the project it but when I try to build it I currently get plenty of errors too.</p>

<a name="133224733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133224733" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133224733">Mario Carneiro (Sep 02 2018 at 18:50)</a>:</h4>
<blockquote>
<p>looks quite different</p>
</blockquote>
<p>This is usually the way these things go. It's been rewritten two or three times by now</p>

<a name="133224745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133224745" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133224745">Mario Carneiro (Sep 02 2018 at 18:51)</a>:</h4>
<p>Now that it is merged, your job is to adjust your repo to the changes. If there are any difficulties that arise, ask, since there may be a trick, or the mathlib version may need more adjustment given your needs</p>

<a name="133224844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133224844" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133224844">Mario Carneiro (Sep 02 2018 at 18:54)</a>:</h4>
<p>One of the invariants I try to maintain in mathlib changes is that anything you can do in a previous version of mathlib or using a PR that was merged but modified to unrecognizability, should still be possible and at most epsilon harder (ideally it should be either much easier or about the same)</p>

<a name="133224974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133224974" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133224974">Kevin Buzzard (Sep 02 2018 at 18:59)</a>:</h4>
<p>Thanks for the explanations. This didn't happen so much with the schemes project because we just filled up <code>for_mathlib</code> on the whole. Anything that got PR'ed was done by Kenny and Kenny dealt with these issues when they arose.</p>

<a name="133226760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133226760" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133226760">Patrick Massot (Sep 02 2018 at 20:02)</a>:</h4>
<p>I'm sorry, I did some cleanup related to mathlib update, but I didn't finish the job. I got distracted by the issue is the ramified condition, hence couldn't go all the way to make it compile again. Is it ok now?</p>

<a name="133228903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133228903" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133228903">Kevin Buzzard (Sep 02 2018 at 21:20)</a>:</h4>
<p>It's better than it was. I see what needs to be done but have not had the time to do it yet. I feel like there's such momentum with the Noetherian stuff that I want to do some more of that. Kenny pointed out a proof of integral closure being a subring which didn't need Noetherian hypotheses and went via some lemma in Atiyah--Macdonald, but this one needs Cayley-Hamilton which we don't have either. I'm sure I saw a write-up by someone (Gonthier?) explaining how this was done in Coq -- or am I confusing this with det(AB)=det(A)det(B)? Is it in the big operators paper?</p>

<a name="133228954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133228954" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133228954">Bryan Gin-ge Chen (Sep 02 2018 at 21:22)</a>:</h4>
<blockquote>
<p>Is it in the big operators paper?</p>
</blockquote>
<p>Yes, looks like it's in <a href="https://hal.inria.fr/inria-00331193/document" target="_blank" title="https://hal.inria.fr/inria-00331193/document">section 6.2</a>.</p>

<a name="133229011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133229011" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133229011">Kevin Buzzard (Sep 02 2018 at 21:25)</a>:</h4>
<p>Thanks. <span class="user-mention" data-user-id="110044">@Chris Hughes</span> how far are we from this? <span class="user-mention" data-user-id="110064">@Kenny Lau</span> are you interested in doing it? I am going to push on with the Noetherian proof even though it needs Hilbert basis, because Noetherian stuff is so important in general that it should be in mathlib. </p>
<p>It's worth remarking that algebra is coming on in leaps and bounds (encroaching on Masters level stuff, and there's all this Zariski topology stuff in the schemes repo too), and we still don't have the definition of exp(x) or the derivative of a differentiable function.</p>

<a name="133229054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133229054" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133229054">Chris Hughes (Sep 02 2018 at 21:27)</a>:</h4>
<p>Keji proved it. I might sort it out, but there's a lot of lean things I have going on to finish off.</p>

<a name="133229106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133229106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133229106">Kevin Buzzard (Sep 02 2018 at 21:28)</a>:</h4>
<p>I know Keji did det(AB)=det(A)det(B) -- he did C-H too?</p>

<a name="133229107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133229107" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133229107">Kevin Buzzard (Sep 02 2018 at 21:28)</a>:</h4>
<p>Kenny might do a really good job of making it all mathlib-ready -- he likes to have other people planning the code out first :-)</p>

<a name="133229116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133229116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133229116">Chris Hughes (Sep 02 2018 at 21:29)</a>:</h4>
<p>He didn't do Cayley Hamilton</p>

<a name="133229160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133229160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133229160">Kevin Buzzard (Sep 02 2018 at 21:30)</a>:</h4>
<p>It's pretty much the next thing in the paper after det(AB)=det(A)det(B) :-)</p>

<a name="133230907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133230907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133230907">Scott Morrison (Sep 02 2018 at 22:41)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>, perhaps "read-the-effing-repository" is the answer, but in your schemes project did you construct any examples? e.g. just a topological space as Spec C(X)? I'm trying to set up filtered colimits in such a way that it's actually possible to describe the stalk of a sheaf in practice, and not enjoying it. :-)</p>

<a name="133231085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133231085" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133231085">Kevin Buzzard (Sep 02 2018 at 22:48)</a>:</h4>
<p>No, we are proud to be example free. But if you give me a commutative ring then I can give you an affine scheme plus proof it's a scheme so in some sense we have examples</p>

<a name="133231523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133231523" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133231523">Bryan Gin-ge Chen (Sep 02 2018 at 23:05)</a>:</h4>
<p>Out of curiosity, what would e.g. Spec <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi mathvariant="bold">C</mi></mrow><mo>[</mo><mi>x</mi><mo>]</mo><mi mathvariant="normal">/</mi><mo>(</mo><msup><mi>x</mi><mn>2</mn></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">\mathbf{C}[x]/(x^2)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base"><span class="mord"><span class="mord mathbf">C</span></span><span class="mopen">[</span><span class="mord mathit">x</span><span class="mclose">]</span><span class="mord mathrm">/</span><span class="mopen">(</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> look like in lean?</p>

<a name="133248288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133248288" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133248288">Kevin Buzzard (Sep 03 2018 at 08:42)</a>:</h4>
<p>It looks like a topological space with a sheaf of rings, like every other scheme. I'm not sure I understand the question :-)</p>

<a name="133248503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133248503" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133248503">Kenny Lau (Sep 03 2018 at 08:47)</a>:</h4>
<p>it looks like a point</p>

<a name="133248552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133248552" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133248552">Johan Commelin (Sep 03 2018 at 08:48)</a>:</h4>
<p>Also in Lean? <span class="emoji emoji-1f61c" title="stuck out tongue wink">:stuck_out_tongue_wink:</span></p>

<a name="133248558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133248558" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133248558">Kenny Lau (Sep 03 2018 at 08:48)</a>:</h4>
<p>it looks like a bunch of code in Lean</p>

<a name="133248562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133248562" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133248562">Johan Commelin (Sep 03 2018 at 08:48)</a>:</h4>
<p>Is there a <code>looks_like</code> predicate?</p>

<a name="133248643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133248643" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133248643">Johan Commelin (Sep 03 2018 at 08:50)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">k_epsilon</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span><span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">k</span><span class="o">]</span> <span class="o">:=</span> <span class="n">Spec</span> <span class="o">(</span><span class="n">ring</span><span class="bp">.</span><span class="n">quotient</span> <span class="o">(</span><span class="n">span</span> <span class="o">(</span><span class="n">X</span><span class="bp">*</span><span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span><span class="o">(</span><span class="n">polynomial</span> <span class="n">k</span><span class="o">)</span> <span class="o">))</span>
</pre></div>

<a name="133248645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133248645" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133248645">Johan Commelin (Sep 03 2018 at 08:50)</a>:</h4>
<p>Something like that?</p>

<a name="133255737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133255737" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133255737">Bryan Gin-ge Chen (Sep 03 2018 at 11:51)</a>:</h4>
<p>Sorry for the vague question, I was curious what the code defining it would look like.</p>

<a name="133255800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133255800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133255800">Kevin Buzzard (Sep 03 2018 at 11:52)</a>:</h4>
<p>I have a function <code>Spec</code> from commutative rings to schemes which works for any commutative ring</p>

<a name="133255851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133255851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133255851">Kevin Buzzard (Sep 03 2018 at 11:53)</a>:</h4>
<p>I guess that's not entirely true. Spec goes from commutative rings to types</p>

<a name="133268730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133268730" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133268730">Patrick Massot (Sep 03 2018 at 16:19)</a>:</h4>
<p>Huge cleanup in <a href="https://github.com/kbuzzard/lean-perfectoid-spaces/pull/16" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/pull/16">https://github.com/kbuzzard/lean-perfectoid-spaces/pull/16</a></p>

<a name="133268738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133268738" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133268738">Patrick Massot (Sep 03 2018 at 16:19)</a>:</h4>
<p>We are compiling against current mathlib</p>

<a name="133268801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133268801" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133268801">Patrick Massot (Sep 03 2018 at 16:20)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> I had to sorry away your <code>is_integral</code> definition which needs fixing</p>

<a name="133268808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133268808" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133268808">Johan Commelin (Sep 03 2018 at 16:20)</a>:</h4>
<p>Ok, but that shouldn't be hard.</p>

<a name="133268827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133268827" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133268827">Patrick Massot (Sep 03 2018 at 16:21)</a>:</h4>
<p>it's currently in Huber_pair since for_mathlib/subring was blasted</p>

<a name="133268884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133268884" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133268884">Patrick Massot (Sep 03 2018 at 16:22)</a>:</h4>
<p><code>valuation_spectrum.lean</code> length was almost divided by two</p>

<a name="133268889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133268889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133268889">Johan Commelin (Sep 03 2018 at 16:22)</a>:</h4>
<p>In a couple of days it can move to <code>integral_closure.lean</code> in mathlib... if the noetherian momentum keeps going.</p>

<a name="133268898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133268898" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133268898">Patrick Massot (Sep 03 2018 at 16:22)</a>:</h4>
<p>that's partly why I didn't care too much</p>

<a name="133269462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133269462" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133269462">Kevin Buzzard (Sep 03 2018 at 16:37)</a>:</h4>
<p>For integral closure the main thing we need now is Hilbert basis, which should be really nice to prove. Then the quotient thing should give that rings finitely-generated over a Noetherian ring are finitely-generated, and then we have one of the two proper maths proof of integral closure done. I might just try Hilbert basis now; I haven't written any Lean code for ages, it's really nice to be able to get back to it.</p>

<a name="133269465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133269465" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133269465">Kevin Buzzard (Sep 03 2018 at 16:37)</a>:</h4>
<p>Patrick -- many thanks for fixing up the repo.</p>

<a name="133270365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133270365" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133270365">Johan Commelin (Sep 03 2018 at 17:01)</a>:</h4>
<p>So, to get the <code>is_integral</code> stuff working we will need some form of <code>polynomial.map</code> or <code>eval\2</code>.</p>

<a name="133270403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133270403" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133270403">Johan Commelin (Sep 03 2018 at 17:02)</a>:</h4>
<p>I currently don't have much time for Lean, alas...</p>

<a name="133270410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133270410" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133270410">Johan Commelin (Sep 03 2018 at 17:02)</a>:</h4>
<p>But I think it is best if the <code>eval\2</code> from <code>mv_polynomial</code> gets a little brother for univariate polynomials.</p>

<a name="133270411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133270411" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133270411">Johan Commelin (Sep 03 2018 at 17:02)</a>:</h4>
<p>This might be a nice project to experiment with transfer rules.</p>

<a name="133270418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133270418" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133270418">Johan Commelin (Sep 03 2018 at 17:03)</a>:</h4>
<p>(Unless this has malign computational ramifications; about which I know no-thing.)</p>

<a name="133275596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133275596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133275596">Patrick Massot (Sep 03 2018 at 19:31)</a>:</h4>
<p>Kevin, you should carefully review the new <a href="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/702f50b9bb1951626a10cb5098415c002f719c35/src/valuation_spectrum.lean" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/702f50b9bb1951626a10cb5098415c002f719c35/src/valuation_spectrum.lean">valuation_spectrum.lean</a>. I tried to write something equivalent to what was there, but I didn't try to make sure I understood the math</p>

<a name="133287065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133287065" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133287065">Scott Morrison (Sep 04 2018 at 02:11)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>, <span class="user-mention" data-user-id="110031">@Patrick Massot</span>, <span class="user-mention" data-user-id="112680">@Johan Commelin</span>, <span class="user-mention" data-user-id="110032">@Reid Barton</span>, I wrote a draft of a roadmap for getting a simple example of an affine scheme into <code>mathlib</code>.</p>
<p>It's at <a href="https://github.com/semorrison/lean-category-theory/blob/master/schemes_roadmap.md" target="_blank" title="https://github.com/semorrison/lean-category-theory/blob/master/schemes_roadmap.md">https://github.com/semorrison/lean-category-theory/blob/master/schemes_roadmap.md</a></p>

<a name="133287069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133287069" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133287069">Scott Morrison (Sep 04 2018 at 02:11)</a>:</h4>
<p>I suspect some things on the list already exist, and I would love to have pointers to these.</p>

<a name="133287115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133287115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133287115">Scott Morrison (Sep 04 2018 at 02:12)</a>:</h4>
<p>Perhaps <span class="user-mention" data-user-id="110064">@Kenny Lau</span> can PR (co)products of (commutative) (topological) rings into mathlib?</p>

<a name="133287116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133287116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133287116">Scott Morrison (Sep 04 2018 at 02:13)</a>:</h4>
<p>and/or filtered (or just direct) colimits of (commutative) (topological) rings?</p>

<a name="133287172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133287172" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133287172">Scott Morrison (Sep 04 2018 at 02:15)</a>:</h4>
<p>A while ago I tried proving that the forgetful functor <code>CommRing ⥤ Type u</code> is represented by <code>ℤ[x]</code> (i.e. this just says that ring homomorphisms <code>ℤ[x] ⟶ R</code> are the same as elements of <code>R</code>), but got frustrated dealing with polynomials. I think we now have much better polynomials, and perhaps I can tempt someone who has worked with them into showing this fact. (<span class="user-mention" data-user-id="110044">@Chris Hughes</span>?).</p>

<a name="133287174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133287174" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133287174">Scott Morrison (Sep 04 2018 at 02:15)</a>:</h4>
<p>It's not strictly necessary for the shortest path on the roadmap, however.</p>

<a name="133291784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133291784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133291784">Kenny Lau (Sep 04 2018 at 05:03)</a>:</h4>
<blockquote>
<p>A while ago I tried proving that the forgetful functor <code>CommRing ⥤ Type u</code> is represented by <code>ℤ[x]</code> (i.e. this just says that ring homomorphisms <code>ℤ[x] ⟶ R</code> are the same as elements of <code>R</code>), but got frustrated dealing with polynomials. I think we now have much better polynomials, and perhaps I can tempt someone who has worked with them into showing this fact. (<span class="user-mention" data-user-id="110044">@Chris Hughes</span>?).</p>
</blockquote>
<p>I actually proved that A[X] is the universal A-algebra... in my langlands repo</p>

<a name="133291789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133291789" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133291789">Kenny Lau (Sep 04 2018 at 05:03)</a>:</h4>
<p>but it's actually easy to prove</p>

<a name="133294149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133294149" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133294149">Scott Morrison (Sep 04 2018 at 06:24)</a>:</h4>
<p>Could you PR it in usable form?</p>

<a name="133294245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133294245" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133294245">Kenny Lau (Sep 04 2018 at 06:28)</a>:</h4>
<p>maybe ignore my comment about langlands repo</p>

<a name="133295147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133295147" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133295147">Kevin Buzzard (Sep 04 2018 at 06:54)</a>:</h4>
<p>I was lazy with locally ringed spaces. I knew that it was a theorem (in real life, not in mathlib) that Spec(R) was a locally ringed space, so any ringed space which was covered by affine schemes had to be locally ringed, it seemed to me. So I skipped the definition.</p>

<a name="133295150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133295150" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133295150">Patrick Massot (Sep 04 2018 at 06:54)</a>:</h4>
<p><a href="https://github.com/leanprover/mathlib/blob/master/analysis/topology/topological_space.lean#L944" target="_blank" title="https://github.com/leanprover/mathlib/blob/master/analysis/topology/topological_space.lean#L944">https://github.com/leanprover/mathlib/blob/master/analysis/topology/topological_space.lean#L944</a></p>

<a name="133295166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133295166" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133295166">Patrick Massot (Sep 04 2018 at 06:55)</a>:</h4>
<p>this is on the list</p>

<a name="133295172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133295172" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133295172">Patrick Massot (Sep 04 2018 at 06:55)</a>:</h4>
<p>We should probably start a new thread if you want to discuss this list, this is not directly about the perfectoid project</p>

<a name="133297866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133297866" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133297866">Johan Commelin (Sep 04 2018 at 08:14)</a>:</h4>
<p><span class="user-mention" data-user-id="110524">@Scott Morrison</span> That's a really nice list! But I agree it might be better to discuss this in a new thread.</p>

<a name="133299021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133299021" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133299021">Kenny Lau (Sep 04 2018 at 08:44)</a>:</h4>
<p>I think we should build monoid rings</p>

<a name="133299022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133299022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133299022">Kenny Lau (Sep 04 2018 at 08:44)</a>:</h4>
<p>and then make mv_polynomial a special case</p>

<a name="133299199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133299199" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133299199">Kevin Buzzard (Sep 04 2018 at 08:48)</a>:</h4>
<p>I think monoid rings are a great idea. I have group cohomology on my todo list -- I think it would be really nice to do in Lean, even though I don't have the time to take it on right now. Monoid and group rings are the start of this. Then some nonsense commutative algebra about ext and tor which would be probably quite fun to do in Lean, and if it turns out not to be fun then this is Lean's fault and might give us more of a concrete goal for <code>transportable</code> -- my impression of this is that something non-trivial got written by <span class="user-mention" data-user-id="110026">@Simon Hudon</span> and homological algebra would be a nice testing ground for getting a baby strategy working. Then things like group cohomology would be a really nice application.</p>

<a name="133299417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133299417" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133299417">Simon Hudon (Sep 04 2018 at 08:53)</a>:</h4>
<p>I did write something non-trivial, you're right. Then <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> cast doubt to its usefulness because he already implemented <code>transfer</code> which I still have to look into.</p>

<a name="133299675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133299675" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133299675">Kevin Buzzard (Sep 04 2018 at 08:59)</a>:</h4>
<p>Simon this is a few months away at least. The only reason I mentioned it was that when trying to apply a general result about some abelian groups in a situation where I had isomorphic groups, it was tough (hence my moaning last time round which started it all off). Doing a big homological algebra project will give rise to a slightly simpler use case which will be showing up in every second line of the argument.</p>

<a name="133299726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133299726" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133299726">Kevin Buzzard (Sep 04 2018 at 09:00)</a>:</h4>
<p>It might be a better test case for what we want and how far we can get it to go, because I'm asking for less but conversely the thought of doing it "by hand" would be a nightmare.</p>

<a name="133300209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133300209" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133300209">Simon Hudon (Sep 04 2018 at 09:13)</a>:</h4>
<p>That sounds like an interesting example. And maybe a good motivation to look more closely at Johannes' work. I'm certainly willing to pick up the project again but maybe we don't have start from scratch (or my scraps, anyway)</p>

<a name="133304087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133304087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133304087">Kenny Lau (Sep 04 2018 at 10:55)</a>:</h4>
<p><a href="#narrow/stream/116395-maths/subject/Perfectoid.20spaces/near/133287172" title="#narrow/stream/116395-maths/subject/Perfectoid.20spaces/near/133287172">@**Scott Morrison** 04/09/2018 02:15:15 (UTC):</a></p>
<blockquote>
<p>A while ago I tried proving that the forgetful functor <code>CommRing ⥤ Type u</code> is represented by <code>ℤ[x]</code> (i.e. this just says that ring homomorphisms <code>ℤ[x] ⟶ R</code> are the same as elements of <code>R</code>), but got frustrated dealing with polynomials. I think we now have much better polynomials, and perhaps I can tempt someone who has worked with them into showing this fact. (<span class="user-mention" data-user-id="110044">@Chris Hughes</span>?).</p>
</blockquote>
<p>done:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="n">R</span> <span class="bp">//</span> <span class="n">is_ring_hom</span> <span class="n">f</span><span class="o">}</span> <span class="err">≃</span> <span class="n">R</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="n">f</span><span class="bp">.</span><span class="mi">1</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">X</span><span class="o">,</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">r</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span><span class="err">&#39;</span> <span class="bp">ℤ</span> <span class="n">R</span> <span class="n">r</span><span class="o">,</span>
    <span class="bp">@</span><span class="n">is_alg_hom</span><span class="bp">.</span><span class="n">to_is_ring_hom</span> <span class="bp">ℤ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">algebra</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span>
      <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">is_alg_hom</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">r</span><span class="o">)</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">⟨</span><span class="n">f</span><span class="o">,</span> <span class="n">hf</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">eq</span> <span class="err">$</span> <span class="n">funext</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">p</span><span class="o">,</span>
    <span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="err">$</span> <span class="bp">@</span><span class="n">polynomial</span><span class="bp">.</span><span class="kn">eval</span><span class="err">&#39;</span><span class="bp">_</span><span class="n">unique</span> <span class="bp">ℤ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">f</span>
      <span class="o">(</span><span class="bp">@</span><span class="n">is_ring_hom</span><span class="bp">.</span><span class="n">to_is_ℤ_alg_hom</span> <span class="bp">_</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">algebra</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">f</span> <span class="n">hf</span><span class="o">)</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">r</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">}</span>
</pre></div>


<p><a href="https://github.com/kckennylau/Lean/blob/master/polynomial.lean" target="_blank" title="https://github.com/kckennylau/Lean/blob/master/polynomial.lean">https://github.com/kckennylau/Lean/blob/master/polynomial.lean</a></p>

<a name="133304101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133304101" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133304101">Kenny Lau (Sep 04 2018 at 10:55)</a>:</h4>
<p>I won't PR this until the typeclass issues with algebra can be resolved</p>

<a name="133304295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133304295" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133304295">Scott Morrison (Sep 04 2018 at 11:01)</a>:</h4>
<p>Cool! Thanks.</p>

<a name="133304350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133304350" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133304350">Kenny Lau (Sep 04 2018 at 11:03)</a>:</h4>
<p>I can't believe I spent 6 hours to write 210 lines of code</p>

<a name="133304590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133304590" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133304590">Scott Morrison (Sep 04 2018 at 11:09)</a>:</h4>
<p>Is that a lot or not many? :-)</p>

<a name="133304735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133304735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133304735">Kenny Lau (Sep 04 2018 at 11:12)</a>:</h4>
<p>a lot of time and not many lines of code</p>

<a name="133306823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133306823" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133306823">Kevin Buzzard (Sep 04 2018 at 12:03)</a>:</h4>
<p>Lean code has a lot more content than, say, python code. If you spent 6 hours writing 210 lines of python code you were either doing something super-hard, or being lazy. But 6 hours for 210 lines of Lean code looks fine to me. I saw Mario spending 3 hours writing about 100 lines of code last week.</p>

<a name="133317508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133317508" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133317508">Chris Hughes (Sep 04 2018 at 15:31)</a>:</h4>
<p>6 hours for 210 lines sounds quite fast to me.</p>

<a name="133682677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133682677" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133682677">Johan Commelin (Sep 10 2018 at 19:11)</a>:</h4>
<p>So, what is the status here. We now have basic stuff on Noetherian modules.</p>

<a name="133682693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133682693" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133682693">Johan Commelin (Sep 10 2018 at 19:11)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Hilbert basis isn't there yet, right?</p>

<a name="133682704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133682704" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133682704">Johan Commelin (Sep 10 2018 at 19:11)</a>:</h4>
<p>And I remember something about <code>V_pre</code>. Can we now define that, using all Scott's stuff?</p>

<a name="133682707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133682707" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133682707">Patrick Massot (Sep 10 2018 at 19:12)</a>:</h4>
<p>Yeah, who cares about matrices when we still don't have perfectoid spaces?</p>

<a name="133682786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133682786" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133682786">Johan Commelin (Sep 10 2018 at 19:13)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="110524">@Scott Morrison</span> was working on sheaves with values in another category.</p>

<a name="133682912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133682912" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133682912">Johan Commelin (Sep 10 2018 at 19:15)</a>:</h4>
<p>Hmmm, this only seems to be about sheaves of types: <a href="https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/sheaves/of_types.lean" target="_blank" title="https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/sheaves/of_types.lean">https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/sheaves/of_types.lean</a></p>

<a name="133683704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133683704" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133683704">Kevin Buzzard (Sep 10 2018 at 19:30)</a>:</h4>
<p>I did matrices because I was spending the day with undergraduates. Hilbert Basis I'm working on. Polynomials are subtle beasts.</p>

<a name="133683813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133683813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133683813">Johan Commelin (Sep 10 2018 at 19:33)</a>:</h4>
<p>Ok cool. I really love how fast things are moving.</p>

<a name="133683867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133683867" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133683867">Patrick Massot (Sep 10 2018 at 19:34)</a>:</h4>
<p>Completions are not moving fast <span class="emoji emoji-2639" title="sad">:sad:</span></p>

<a name="133683876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133683876" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133683876">Patrick Massot (Sep 10 2018 at 19:34)</a>:</h4>
<p>It's partly because real life caught me, partly because I really need help</p>

<a name="133683994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133683994" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133683994">Johan Commelin (Sep 10 2018 at 19:37)</a>:</h4>
<p>Hmmm... I've looked a bit a filters recently. But I'm really a novice. Can you indicate in one or two lines what the problem is?</p>

<a name="133683996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133683996" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133683996">Kevin Buzzard (Sep 10 2018 at 19:37)</a>:</h4>
<p>I have fewer Lean students now, many of them stopped at the end of August; two MSc student went back to France and next week my UK MSc students will hand in their projects. I need to think hard about UG teaching but I think Patrick is right, we've said we'll do perfectoids, there's nothing in theory that prevents us from doing it, it looks good, it's a good ad for Lean, we should do it.</p>

<a name="133713456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133713456" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133713456">Scott Morrison (Sep 11 2018 at 06:56)</a>:</h4>
<p>The better file to look at for sheaves is &lt;<a href="https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/sheaves.lean" target="_blank" title="https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/sheaves.lean">https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/sheaves.lean</a>&gt;. The one Johan linked above is actually a convenience: if you have the right sort of concrete category (the forgetful functor is <code>faithful</code>, <code>continuous</code>, and <code>reflects_isos</code>) then to check the sheaf condition it's enough to check the sheaf condition on the underlying presheaf of types.</p>

<a name="133713463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133713463" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133713463">Scott Morrison (Sep 11 2018 at 06:56)</a>:</h4>
<p>(Not that I actually prove that there: it's just the statement for now!)</p>

<a name="133713467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133713467" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133713467">Scott Morrison (Sep 11 2018 at 06:57)</a>:</h4>
<p>I should look at this V_pre thing.</p>

<a name="133713545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133713545" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133713545">Scott Morrison (Sep 11 2018 at 06:59)</a>:</h4>
<p><a href="/user_uploads/3121/iSqAQpjcqT1pLw65lBtIkCbo/Screenshot-2018-09-11-16.58.27.png" target="_blank" title="Screenshot-2018-09-11-16.58.27.png">Screenshot-2018-09-11-16.58.27.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/iSqAQpjcqT1pLw65lBtIkCbo/Screenshot-2018-09-11-16.58.27.png" target="_blank" title="Screenshot-2018-09-11-16.58.27.png"><img src="/user_uploads/3121/iSqAQpjcqT1pLw65lBtIkCbo/Screenshot-2018-09-11-16.58.27.png"></a></div>

<a name="133713604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133713604" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133713604">Johan Commelin (Sep 11 2018 at 07:01)</a>:</h4>
<p>Right... as far as I can see almost all ingredients for this definition exist.</p>

<a name="133714540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133714540" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133714540">Kevin Buzzard (Sep 11 2018 at 07:27)</a>:</h4>
<p>Just some comments on the definition. (1) we will be interested in sheaves of course; the presheaf category is just a bigger category where some auxiliary constructions take place. (2) Line 4 of the screenshot means "compute the stalk in the category of presheaves of rings not topological rings" (i.e. forget the topology) rather than "these stalks form a presheaf in some way". (3) An equivalence class of valuations on a commutative ring <code>R</code> is simply a term of type <code>Spv R</code>, with <code>Spv</code> (the "valuation spectrum") defined in <code>valuation_spectrum.lean</code> in the perfectoid project, and the condition about the support being the maximal ideal is just a predicate (which only makes sense if <code>R</code> is local and hence is not yet there). I'm hoping that this is all the information Scott needs.</p>

<a name="133714676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133714676" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133714676">Scott Morrison (Sep 11 2018 at 07:30)</a>:</h4>
<p>I made a start of <code>prev_V</code>: <a href="https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/V_pre.lean" target="_blank" title="https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/V_pre.lean">https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/V_pre.lean</a>. So far no hurdles, it's just like building Lego.</p>

<a name="133714681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133714681" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133714681">Scott Morrison (Sep 11 2018 at 07:30)</a>:</h4>
<p>I'm not sure whether I really want to add <code>perfectoid</code> as a dependency.</p>

<a name="133714700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133714700" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133714700">Scott Morrison (Sep 11 2018 at 07:31)</a>:</h4>
<p>I guess I should move across to the perfectoid project to do that bit.</p>

<a name="133714701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133714701" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133714701">Patrick Massot (Sep 11 2018 at 07:31)</a>:</h4>
<p>Why don't you do the opposite? PR to perfectoid-spaces?</p>

<a name="133714710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133714710" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133714710">Scott Morrison (Sep 11 2018 at 07:31)</a>:</h4>
<p>Is it okay having perfectoid depend on lean-category-theory?</p>

<a name="133714715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133714715" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133714715">Kevin Buzzard (Sep 11 2018 at 07:31)</a>:</h4>
<p>you might be surprised to hear that defining an equivalence class of valuations was extremely painful. There were universe issues.</p>

<a name="133714716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133714716" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133714716">Scott Morrison (Sep 11 2018 at 07:31)</a>:</h4>
<p>:-)</p>

<a name="133714771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133714771" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133714771">Kevin Buzzard (Sep 11 2018 at 07:32)</a>:</h4>
<p>Dependencies -- my only worry is that when I did that in the past (with the schemes project I think) what happened was that my code never seemed to compile, because category theory was very much a WIP at that time</p>

<a name="133714774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133714774" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133714774">Kevin Buzzard (Sep 11 2018 at 07:33)</a>:</h4>
<p>(this was months ago, when the category theory library was undergoing major refactoring)</p>

<a name="133714776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133714776" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133714776">Patrick Massot (Sep 11 2018 at 07:33)</a>:</h4>
<p>I think perfectoid depending on category theory is fine, especially since merges come in at a steady pace</p>

<a name="133714783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133714783" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133714783">Patrick Massot (Sep 11 2018 at 07:33)</a>:</h4>
<p>so it will soon be depending on mathlib only</p>

<a name="133714787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133714787" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133714787">Kevin Buzzard (Sep 11 2018 at 07:33)</a>:</h4>
<p>My instinct is not to push for perfectoids to go into mathlib until after Lean 4. Is that crazy?</p>

<a name="133714789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133714789" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133714789">Kevin Buzzard (Sep 11 2018 at 07:33)</a>:</h4>
<p>[if indeed they go in at all]</p>

<a name="133714826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133714826" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133714826">Patrick Massot (Sep 11 2018 at 07:34)</a>:</h4>
<p>I meant: category-theory will be in mathlib</p>

<a name="133714833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133714833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133714833">Kevin Buzzard (Sep 11 2018 at 07:34)</a>:</h4>
<p>right</p>

<a name="133714837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133714837" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133714837">Kevin Buzzard (Sep 11 2018 at 07:34)</a>:</h4>
<p>I was just thinking aloud</p>

<a name="133714856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133714856" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133714856">Patrick Massot (Sep 11 2018 at 07:35)</a>:</h4>
<p>If we manage to define perfectoid spaces then many things will go into mathlib without hesitation. And then you'l be left with a couple of files that could go as well, in a somewhat lonely directory</p>

<a name="133734386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133734386" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133734386">Scott Morrison (Sep 11 2018 at 14:02)</a>:</h4>
<p>Ugh. I just finished a construction of the category of presheaves (that is, the objects are pairs (X, O), for X a topological space and O a presheaf of somethings on it, and the morphisms are pairs (f, f'), f a continuous map X \to Y, and f' a natural transformation from O_Y to the pushforward of O_X).</p>

<a name="133734418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133734418" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133734418">Scott Morrison (Sep 11 2018 at 14:03)</a>:</h4>
<p>Hopefully after this, <code>V_pre</code> is just picking out an appropriate subcategory.</p>

<a name="133734442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133734442" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133734442">Scott Morrison (Sep 11 2018 at 14:03)</a>:</h4>
<p>Unfortunately, at some point it stopped being easy --- the proofs I've written that morphisms of presheaves compose, and compose correctly, are really really deeply horrible.</p>

<a name="133734495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/133734495" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#133734495">Scott Morrison (Sep 11 2018 at 14:04)</a>:</h4>
<p><a href="https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/V_pre.lean" target="_blank" title="https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/V_pre.lean">https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/V_pre.lean</a></p>

<a name="134008420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134008420" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134008420">Kevin Buzzard (Sep 15 2018 at 11:20)</a>:</h4>
<p>Here's a perfectoid update. </p>
<p>We need integral closures and for this we need either Cayley-Hamilton or Hilbert Basis. Somebody will do Cayley-Hamilton some day (we do have matrices after all ;-) ) so I'm doing Hilbert basis. It's taking a long time because whilst I now know a beautiful way to do it thanks to <span class="user-mention" data-user-id="110032">@Reid Barton</span> , working with the theory of polynomial rings and modules over multiple rings has given me a clear picture about exactly what needs doing, and I still have problems with the underlying set-up, basically because a type M might be a module for more than one ring. I am not even sure if typeclass inference is appropriate for the kind of calculations I am doing, and it's not something strange -- the ideas I'm formalising show up everywhere in commutative algebra. So that's the situation regarding integral closure. <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> did you say you were going to refactor...something to do with modules? Should I wait until you finish this? The Hilbert basis code relies on the <code>poly_coeffs</code> branch of community mathlib, which has been PR'ed. Let me know if any work needs doing on this PR. Here is an explicit question. In maths, if <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>J</mi></mrow><annotation encoding="application/x-tex">J</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.09618em;">J</span></span></span></span> is an <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>[</mo><mi>X</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">R[X]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">]</span></span></span></span>-submodule of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>[</mo><mi>X</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">R[X]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">]</span></span></span></span> then it is naturally an <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span>-submodule of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>[</mo><mi>X</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">R[X]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">]</span></span></span></span>. How to say this in Lean? That is the goal I am looking at now and I think I might take a break until it's clearer to me what mathlib's general approach to this sort of question is.</p>
<p>Completion of a ring -- <span class="user-mention" data-user-id="110031">@Patrick Massot</span>  has done a <em>lot</em> of stuff about completions, but I think he said the other day that something was blocking him from proceeding. Maybe we have completions of topological abelian additive groups, but not yet of commutative rings?</p>
<p>And finally this category. Thanks <span class="user-mention" data-user-id="110524">@Scott Morrison</span>  for the valiant V_pre effort! I stopped "racing to the goal" a while ago because I didn't know whether we could make V_pre easily or not and I thought I'd defer to you. I think that what I need to do now is to actually think about how much of this category we actually need. Ultimately one should prove that there's a morphism from the category of Huber pairs to V_pre, however whether we need something so strong depends on exactly how far we want to go. Merely writing down the definition of a perfectoid space might not need it, but saying anything at all about them will surely need something like this.</p>
<p>Maybe it is time to think about things in a "top-down" way a bit more, and in particular it might be worth formalising the <em>statements</em> of integral closure and completion of a ring, leaving them as "TODO" (Scott -- these are exactly the things which are stopping me from constructing objects of V_pre -- to make an object corresponding to a Huber Pair A I need to build a presheaf on Spa(A) and the above constructions are part of the infrastructure I need for building this presheaf).</p>

<a name="134008922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134008922" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134008922">Kevin Buzzard (Sep 15 2018 at 11:39)</a>:</h4>
<p>I pushed (non-working) branch <code>kmb_hilbert2</code> to community mathlib in case anyone wants to see the status of Hilbert basis. The proof I'm aiming for goes like this: if <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span> is an ideal in <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>[</mo><mi>X</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">R[X]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose">]</span></span></span></span> and if <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>[</mo><mi>X</mi><msub><mo>]</mo><mrow><mo>≤</mo><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">R[X]_{\le n}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.295179em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">≤</span><span class="mord mathit mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24517899999999998em;"></span></span></span></span></span></span></span></span> is the sub-<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span>-module of polys of degree at most <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">n</span></span></span></span> (<code>deg_le R n</code> in Lean) then <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>J</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">J_n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.09618em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span>, the ideal of terms of the form <code>coeff f n</code> as <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10764em;">f</span></span></span></span> runs through the elements of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span> with degree at most <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">n</span></span></span></span>, is an increasing sequence of ideals. There are several ways to define <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>J</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">J_n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.09618em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span> but this one does not need the gazillion edge cases which I had before. Then it's just the standard proof -- the union of the <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>J</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">J_n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.09618em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span> is finitely-generated so is <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>J</mi><mi>N</mi></msub></mrow><annotation encoding="application/x-tex">J_N</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.09618em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span> for some <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span> and choosing generators of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>J</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">J_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.09618em;">J</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.09618em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span></span></span></span> for <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>≤</mo><mi>N</mi></mrow><annotation encoding="application/x-tex">i\leq N</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="base"><span class="mord mathit">i</span><span class="mrel">≤</span><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span> and looking at corresponding polynomials finishes the job easily.</p>

<a name="134008983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134008983" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134008983">Kevin Buzzard (Sep 15 2018 at 11:40)</a>:</h4>
<p>But I propose not working on it any more for a while until I understand what Mario is doing with modules and the poly_coeffs PR; I'll instead concentrate on the top down questions (i.e. how far are we from a definition modulo a few concrete sorries which are basically independent simpler questions)</p>

<a name="134009618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134009618" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134009618">Patrick Massot (Sep 15 2018 at 12:01)</a>:</h4>
<p>Again, the status for completion is I'm stuck at three points: </p>
<ul>
<li><a href="https://github.com/leanprover-community/mathlib/blob/completions/analysis/topology/group_completion.lean#L124" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/completions/analysis/topology/group_completion.lean#L124">https://github.com/leanprover-community/mathlib/blob/completions/analysis/topology/group_completion.lean#L124</a> where I'm also not clear on the math proof (and Bourbaki doesn't really help because Johannes didn't follow Bourbaki when defining completions of uniform spaces) but I should be able to understand this.</li>
<li>I don't know how to use the previous point (even sorried) in order to unlock <a href="https://github.com/leanprover-community/mathlib/blob/completions/analysis/topology/group_completion.lean#L132" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/completions/analysis/topology/group_completion.lean#L132">https://github.com/leanprover-community/mathlib/blob/completions/analysis/topology/group_completion.lean#L132</a> Because it seems hard to opt out of the automatic instance resolution to manually insert a propositional equality of two uniform structure on the same type. I think this is the crucial point where I really need help</li>
<li>when I try to use <a href="https://github.com/leanprover-community/mathlib/blob/completions/analysis/topology/group_completion.lean#L132" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/completions/analysis/topology/group_completion.lean#L132">https://github.com/leanprover-community/mathlib/blob/completions/analysis/topology/group_completion.lean#L132</a> with multiplication on topological rings I have instance loops (I could push my failed attempt if needed)</li>
</ul>

<a name="134017508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134017508" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134017508">Kevin Buzzard (Sep 15 2018 at 16:01)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">noncomputable</span> <span class="n">def</span> <span class="n">completion</span><span class="bp">.</span><span class="n">map₂</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">γ</span><span class="o">)</span> <span class="o">:</span> <span class="n">completion</span> <span class="n">α</span> <span class="bp">×</span> <span class="n">completion</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">completion</span> <span class="n">γ</span> <span class="o">:=</span>
  <span class="n">completion</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="n">uncurry</span> <span class="n">f</span><span class="o">)</span> <span class="err">∘</span> <span class="n">completion</span><span class="bp">.</span><span class="n">prod</span>
</pre></div>


<p>Why do you uncurry in <code>completion.lean</code>?</p>

<a name="134019674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134019674" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134019674">Patrick Massot (Sep 15 2018 at 17:10)</a>:</h4>
<p>Here <code>α</code>, <code>β</code> and <code> γ</code> are uniform spaces.  <code>α × β</code> is also a uniform space, but <code>β → γ</code> isn't</p>

<a name="134088693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134088693" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134088693">Patrick Massot (Sep 17 2018 at 08:54)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> while you wait for Mario's module refactor, why don't try to LaTeX a precise roadmap? As I said in the very beginning of the project (we even have a LaTeX_docs folder) it would be much easier to have a full LaTeX writeup of the definition of a perfectoid space, assuming only knowledge of basic theory of topological rings and sheaves</p>

<a name="134089151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134089151" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134089151">Kevin Buzzard (Sep 17 2018 at 09:05)</a>:</h4>
<p>You mean of what still needs to be done, or everything?</p>

<a name="134089166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134089166" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134089166">Kevin Buzzard (Sep 17 2018 at 09:05)</a>:</h4>
<p>Wedhorns paper defines an adic space and it's 100 pages</p>

<a name="134089206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134089206" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134089206">Patrick Massot (Sep 17 2018 at 09:06)</a>:</h4>
<p>Of course everything would be better, but what still needs to be done would be enough for now</p>

<a name="134089214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134089214" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134089214">Patrick Massot (Sep 17 2018 at 09:06)</a>:</h4>
<p>You claimed earlier that those 100 pages are not all necessary for the definition</p>

<a name="134089236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134089236" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134089236">Patrick Massot (Sep 17 2018 at 09:07)</a>:</h4>
<p>I'm not suggesting to rewrite that paper, which obviously contains preparation for things coming after the definition, as well as motivation</p>

<a name="134089245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134089245" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134089245">Patrick Massot (Sep 17 2018 at 09:07)</a>:</h4>
<p>We don't need any of this to define perfectoid spaces</p>

<a name="134089548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134089548" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134089548">Kevin Buzzard (Sep 17 2018 at 09:14)</a>:</h4>
<p>Patrick I'm going to do this right now. What exactly do you want me to cover?</p>

<a name="134089575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134089575" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134089575">Kevin Buzzard (Sep 17 2018 at 09:15)</a>:</h4>
<p>Just statements such as "if R is a topological ring then there's a completion R-hat which satisfies a universal property -- for the property see section blah of Wedhorn and for the construction see section blah"?</p>

<a name="134089621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134089621" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134089621">Kevin Buzzard (Sep 17 2018 at 09:16)</a>:</h4>
<p>Have I now completely covered completions of topological rings, once I fill in the references, as far as this document is concerned?</p>

<a name="134089624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134089624" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134089624">Kevin Buzzard (Sep 17 2018 at 09:16)</a>:</h4>
<p>The reason I want to do it now is that I was thinking about exactly this sort of thing when you suggested it.</p>

<a name="134089627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134089627" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134089627">Patrick Massot (Sep 17 2018 at 09:16)</a>:</h4>
<p>Yes, at least until you reach the end goal (definition of perfectoid space). Then we may or may not want to add details</p>

<a name="134089628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134089628" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134089628">Kevin Buzzard (Sep 17 2018 at 09:16)</a>:</h4>
<p>and I have an hour before my first meeting this morning. But I don't want to write something and then you say something else was better.</p>

<a name="134091570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134091570" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134091570">Kevin Buzzard (Sep 17 2018 at 10:05)</a>:</h4>
<p>OK I pushed a first draft. Patrick -- let me know what else you want from this doc. All refs are to Wedhorn, I didn't put the citation in explicitly because I'm in a rush</p>

<a name="134094182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134094182" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134094182">Patrick Massot (Sep 17 2018 at 11:13)</a>:</h4>
<p>It's looks like a good start, but obviously more details are needed in Section 3</p>

<a name="134125363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134125363" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134125363">Patrick Massot (Sep 17 2018 at 20:41)</a>:</h4>
<p>Today I spent some time working out the maths part of why the two natural uniformities on the completion of a commutative topological group coincide. It won't be easy to Lean, but it should work. Then I would really need to think about how to get Lean to use this fact...</p>

<a name="134125768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134125768" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134125768">Patrick Massot (Sep 17 2018 at 20:50)</a>:</h4>
<p>Returning to the LaTeX documentation, I guess the real test would be: Kevin, could you finish the definition by sorrying only lemmas and no definition?</p>

<a name="134126506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134126506" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134126506">Kevin Buzzard (Sep 17 2018 at 21:06)</a>:</h4>
<p>We need to define the presheaf on <code>Spa A</code>. The reason I stopped is because for a rational open subset <code>U</code>, the value of the presheaf is a completion, and we don't have ring completions yet. Nice work on the group completion, by the way. After that we need to define the presheaf on all open sets, and that's via a projective limit construction; we need a statement that this limit is unique up to unique isomorphism. Then we need to define the valuations on the stalks etc etc. Are you saying I should write more Lean code or more LaTeX?</p>

<a name="134129017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134129017" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134129017">Patrick Massot (Sep 17 2018 at 21:54)</a>:</h4>
<p>You could write both more Lean and LaTeX. You can sorry the ring completion thing.  State the existence of the completion and its universal property and move on.</p>

<a name="134129693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134129693" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134129693">Kevin Buzzard (Sep 17 2018 at 22:05)</a>:</h4>
<p>I'm watching these Zurich videos though :-)</p>

<a name="134146650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134146650" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134146650">Kevin Buzzard (Sep 18 2018 at 05:37)</a>:</h4>
<blockquote>
<p>It's looks like a good start, but obviously more details are needed in Section 3</p>
</blockquote>
<p>I am unclear about what you want to know (in particular you are saying things are obvious but they're not obvious to me yet). Sorry to go on about this. I'm happy to write stuff, I'm just not sure what I am supposed to be writing. </p>
<p>Let me pick out a few examples from section 3 to make my question more explicit. </p>
<p>I say that Spa(A) is an equivalence class of valuations. I imply that these are "done". In fact the maths definition of valuation is in Wedhorn chapter 1 and the Lean definition is in <code>valuation.lean</code>, which has no sorrys.  Do you also want me to write out the definition in LaTeX or just make the references more precise or what?</p>
<p>Next I say Spa(A) is a topological space. Here I am lazier -- the maths in in Wedhorn and the formalisation is in <code>Spa.lean</code> but I just say it can be done. Do you want more precise references, or an explicit definition of the topology in the document?</p>
<p>Finally for this message, the presheaf. Here I just say it can be defined on the rational subsets and then it can be extended. This is not in Lean for the simple reason that here we are part of the "bottom up" way of thinking, and the definition of the global sections of the presheaf on Spa(A) is equal to the completion of A. Here I say nothing, and there is no Lean file, but I give a precise citation to Wedhorn. Is there a problem with the LaTeX file here or is the only problem that we need more Lean code?</p>

<a name="134156459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134156459" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134156459">Kevin Buzzard (Sep 18 2018 at 10:01)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> I updated the file a bit. Let me know what you want from this file -- I will have some time on the tube home this evening to work on it.</p>

<a name="134159914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134159914" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134159914">Patrick Massot (Sep 18 2018 at 11:29)</a>:</h4>
<p>I tried to clarify my question by opening an empty PR. It adds sorried statements in <code>ring_completions.lean</code>. Question is: would proving this be enough for you to finish everything?</p>

<a name="134160873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134160873" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134160873">Kevin Buzzard (Sep 18 2018 at 11:48)</a>:</h4>
<p>It would take me some time, I guess, and time is something I don't have much of at the minute. We need to take an integral closure, for sure. I don't see any obstruction to finishing everything apart from the fact that someone actually has to do it. But I have 250 students arriving here in 13 days' time and I need to be ready for them.</p>

<a name="134160890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134160890" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134160890">Kevin Buzzard (Sep 18 2018 at 11:49)</a>:</h4>
<p>PS to take integral closure we either need Cayley-Hamilton or working modules, and currently we have neither, but both are possible.</p>

<a name="134162113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134162113" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134162113">Patrick Massot (Sep 18 2018 at 12:15)</a>:</h4>
<p><span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> do you know if <code>separated α</code>implies  <code>separated (Cauchy α)</code>? I'm still struggling a bit with with uniform spaces</p>

<a name="134162185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134162185" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134162185">Johannes Hölzl (Sep 18 2018 at 12:16)</a>:</h4>
<p>No, for example the rationals are separated, but <code>Cauchy</code> over the rationals isn't</p>

<a name="134162197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134162197" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134162197">Patrick Massot (Sep 18 2018 at 12:16)</a>:</h4>
<p>Kevin, if you don't have time for this and don't have time for a detailed LaTeX file then I guess we are stuck. Otherwise people (Johan or me say) could try to do the Lean job from the LaTeX file (although I have a lot to do with completions)</p>

<a name="134162214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134162214" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134162214">Patrick Massot (Sep 18 2018 at 12:17)</a>:</h4>
<p>Johannes, this is what I suspected. But somehow it should be true that if α is separated then it should inject into its separated completion</p>

<a name="134162267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134162267" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134162267">Patrick Massot (Sep 18 2018 at 12:18)</a>:</h4>
<p>I'm struggling because you set up everything to avoid minimal Cauchy filters that Bourbaki uses everywhere</p>

<a name="134162286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134162286" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134162286">Patrick Massot (Sep 18 2018 at 12:19)</a>:</h4>
<p>Bourbaki first makes things separated and then takes the space of minimal Cauchy filters</p>

<a name="134162295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134162295" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134162295">Patrick Massot (Sep 18 2018 at 12:19)</a>:</h4>
<p>And the second operation is always injective</p>

<a name="134162340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134162340" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134162340">Patrick Massot (Sep 18 2018 at 12:20)</a>:</h4>
<p>So we get injection of separated stuff into their separated completion for free</p>

<a name="134162369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134162369" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134162369">Patrick Massot (Sep 18 2018 at 12:21)</a>:</h4>
<p>But it should still work with your way of doing things, since I proved the separated complete space obtained and the separation space of Cauchy α satisfies the obvious universal property</p>

<a name="134162375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134162375" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134162375">Johannes Hölzl (Sep 18 2018 at 12:21)</a>:</h4>
<p>I had a proof for the reals that the usual embedding <code>α -&gt; quotient (Cauchy α)</code> was injective if <code>separated α</code></p>

<a name="134162378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134162378" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134162378">Johannes Hölzl (Sep 18 2018 at 12:21)</a>:</h4>
<p>I thought also you had this already</p>

<a name="134162390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134162390" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134162390">Patrick Massot (Sep 18 2018 at 12:21)</a>:</h4>
<p>No I don't have it</p>

<a name="134162555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134162555" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134162555">Johannes Hölzl (Sep 18 2018 at 12:24)</a>:</h4>
<p>Ah, I had it directly on <code>rat</code>: <a href="https://github.com/leanprover/mathlib/blob/7fd7ea8c323c5f622bda6bc8de6dd352cc2732a8/analysis/real.lean#L401" target="_blank" title="https://github.com/leanprover/mathlib/blob/7fd7ea8c323c5f622bda6bc8de6dd352cc2732a8/analysis/real.lean#L401">https://github.com/leanprover/mathlib/blob/7fd7ea8c323c5f622bda6bc8de6dd352cc2732a8/analysis/real.lean#L401</a></p>

<a name="134162622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134162622" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134162622">Patrick Massot (Sep 18 2018 at 12:26)</a>:</h4>
<p>It looks like a specific proof</p>

<a name="134162635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134162635" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134162635">Johannes Hölzl (Sep 18 2018 at 12:26)</a>:</h4>
<p>yes :(</p>

<a name="134162759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134162759" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134162759">Patrick Massot (Sep 18 2018 at 12:29)</a>:</h4>
<p>Do you remember where you saw this story of the space <code>Cauchy α</code> (as opposed to the space of minimal Cauchy filters)?</p>

<a name="134163062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134163062" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134163062">Johannes Hölzl (Sep 18 2018 at 12:34)</a>:</h4>
<p>Hm no</p>

<a name="134163074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134163074" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134163074">Johannes Hölzl (Sep 18 2018 at 12:35)</a>:</h4>
<p>But I will try to proof this injectivity now</p>

<a name="134163694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134163694" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134163694">Johannes Hölzl (Sep 18 2018 at 12:45)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span>  it was surprisingly straight-forward:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="n">function</span><span class="bp">.</span><span class="n">injective</span> <span class="o">(</span><span class="bp">λ</span><span class="n">a</span><span class="o">:</span><span class="n">α</span><span class="o">,</span> <span class="err">⟦</span><span class="n">pure_cauchy</span> <span class="n">a</span><span class="err">⟧</span><span class="o">)</span> <span class="bp">|</span> <span class="n">a</span> <span class="n">b</span> <span class="n">h</span> <span class="o">:=</span>
<span class="k">have</span> <span class="n">a_rel_b</span> <span class="o">:</span> <span class="o">(</span><span class="n">pure_cauchy</span> <span class="n">a</span><span class="o">,</span> <span class="n">pure_cauchy</span> <span class="n">b</span><span class="o">)</span> <span class="err">∈</span> <span class="err">⋂₀</span> <span class="o">(</span><span class="bp">@</span><span class="n">uniformity</span> <span class="o">(</span><span class="n">Cauchy</span> <span class="n">α</span><span class="o">)</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">sets</span><span class="o">,</span> <span class="k">from</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">exact</span> <span class="n">h</span><span class="o">,</span>
<span class="n">classical</span><span class="bp">.</span><span class="n">by_contradiction</span> <span class="err">$</span> <span class="k">assume</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="n">b</span><span class="o">,</span>
<span class="k">let</span> <span class="bp">⟨</span><span class="n">s</span><span class="o">,</span> <span class="n">hs</span><span class="o">,</span> <span class="n">ne</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">separated_def&#39;</span><span class="bp">.</span><span class="mi">1</span> <span class="n">s</span> <span class="n">a</span> <span class="n">b</span> <span class="n">this</span> <span class="k">in</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="o">(</span><span class="bp">@</span><span class="n">uniform_embedding_pure_cauchy</span> <span class="n">α</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">right</span><span class="o">,</span> <span class="n">filter</span><span class="bp">.</span><span class="n">mem_comap_sets</span><span class="o">]</span> <span class="n">at</span> <span class="n">hs</span><span class="o">,</span>
  <span class="n">rcases</span> <span class="n">hs</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">t</span><span class="o">,</span> <span class="n">ht</span><span class="o">,</span> <span class="n">hts</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="n">pure_cauchy</span> <span class="n">a</span><span class="o">,</span> <span class="n">pure_cauchy</span> <span class="n">b</span><span class="o">)</span> <span class="err">∈</span> <span class="n">t</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="n">at</span> <span class="n">a_rel_b</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">a_rel_b</span> <span class="n">t</span> <span class="n">ht</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">ne</span> <span class="o">(</span><span class="bp">@</span><span class="n">hts</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="n">this</span><span class="o">)</span>
<span class="kn">end</span>
</pre></div>

<a name="134163821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134163821" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134163821">Patrick Massot (Sep 18 2018 at 12:47)</a>:</h4>
<p>Thanks!</p>

<a name="134163878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134163878" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134163878">Patrick Massot (Sep 18 2018 at 12:48)</a>:</h4>
<p>I'll need to decipher this now</p>

<a name="134165812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134165812" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134165812">Johannes Hölzl (Sep 18 2018 at 13:23)</a>:</h4>
<p>actually the contradiction is not necessary: <a href="https://github.com/leanprover/mathlib/commit/7dedf3ca65f4a183909f51879cffddd6edc6e20a" target="_blank" title="https://github.com/leanprover/mathlib/commit/7dedf3ca65f4a183909f51879cffddd6edc6e20a">https://github.com/leanprover/mathlib/commit/7dedf3ca65f4a183909f51879cffddd6edc6e20a</a></p>

<a name="134167252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134167252" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134167252">Patrick Massot (Sep 18 2018 at 13:49)</a>:</h4>
<p>Thanks! Too bad this proof is locked into term mode. I'd love to know the maths there</p>

<a name="134172968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134172968" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134172968">Kevin Buzzard (Sep 18 2018 at 15:24)</a>:</h4>
<p>I need to make sure that I'm ready for the students so I should concentrate on that for the next 13 days, but hopefully then the modules are refactored, I'll know what I'm doing with CoCalc, and I can come back to this.</p>

<a name="134172988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134172988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134172988">Patrick Massot (Sep 18 2018 at 15:24)</a>:</h4>
<p>Could you still review my PR?</p>

<a name="134174890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134174890" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134174890">Patrick Massot (Sep 18 2018 at 15:55)</a>:</h4>
<blockquote>
<p>I'll need to decipher this now</p>
</blockquote>
<p>Ok, I managed to read it. It contained enough tactic mode. I also deduced from it that the map to the Hausdorff completion is a uniform embedding when the original space is Hausdorff.</p>

<a name="134183580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134183580" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134183580">Kevin Buzzard (Sep 18 2018 at 18:27)</a>:</h4>
<p>Patrick I don't review your PR's, I just accept them :-) I will "review" this one later on today hopefully. Does <code>for_mathlib/topological_structures.lean</code> work for you? It has an import <code>for_mathlib.function</code> which isn't there for me...</p>

<a name="134184098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134184098" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134184098">Patrick Massot (Sep 18 2018 at 18:37)</a>:</h4>
<p>Oh crap, it works here because <code>for_mathlib/function.olean</code> is still there</p>

<a name="134184166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134184166" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134184166">Patrick Massot (Sep 18 2018 at 18:38)</a>:</h4>
<p>This is so annoying. Is there any drawback to making sure <code>leanpkg build</code> deletes <code>olean</code> files that don't have <code>lean</code> file?</p>

<a name="134184170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134184170" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134184170">Patrick Massot (Sep 18 2018 at 18:38)</a>:</h4>
<p>I guess this question was already asked many times</p>

<a name="134184302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134184302" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134184302">Patrick Massot (Sep 18 2018 at 18:41)</a>:</h4>
<p>I just manually removed 9 dangling olean files</p>

<a name="134184305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134184305" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134184305">Patrick Massot (Sep 18 2018 at 18:41)</a>:</h4>
<p>Let's see where we are</p>

<a name="134184321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134184321" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134184321">Patrick Massot (Sep 18 2018 at 18:41)</a>:</h4>
<p>Maybe that also explains why I needed to "fix" stuff and Johan complained about the fixes</p>

<a name="134184558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134184558" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134184558">Patrick Massot (Sep 18 2018 at 18:45)</a>:</h4>
<p>No, the fixes are still needed</p>

<a name="134184569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134184569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134184569">Patrick Massot (Sep 18 2018 at 18:45)</a>:</h4>
<p>Kevin: it should compile on your end now</p>

<a name="134184686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134184686" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134184686">Patrick Massot (Sep 18 2018 at 18:47)</a>:</h4>
<p>You should still make sure my fixes didn't change the intended semantic</p>

<a name="134222042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222042" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222042">Kevin Buzzard (Sep 19 2018 at 09:45)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> <span class="user-mention" data-user-id="112680">@Johan Commelin</span> I reviewed Patrick's changes. If neither of you have any more to say then I am happy to merge.</p>

<a name="134222118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222118" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222118">Johan Commelin (Sep 19 2018 at 09:47)</a>:</h4>
<p>I just explained how to ignore whitespace <span class="emoji emoji-1f606" title="lol">:lol:</span>  Other than that... <code>-- no comments</code></p>

<a name="134222156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222156">Kevin Buzzard (Sep 19 2018 at 09:48)</a>:</h4>
<p>I really need to take two weeks off from the perfectoid repo at this point. It looks to me that it's in good shape. Other than ring completions and integral closures (which are disjoint independent problems) the main thing that is needed is the definition of the presheaf on Spa(A) and the valuation on the stalks -- i.e. constructing an object of the category V^pre from a Huber pair. Assuming a sorried (ring completion + universal property) and a sorried (integral closure of a ring is a ring) this seems to be the key remaining construction.</p>

<a name="134222181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222181" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222181">Johan Commelin (Sep 19 2018 at 09:49)</a>:</h4>
<p>I will see if I can do some work on this. But I'm currently in a train to Ben's birthday party, and beginning of next week I'm also busy in NL. So I won't be back at Lean until Thursday next week.</p>

<a name="134222242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222242" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222242">Johan Commelin (Sep 19 2018 at 09:50)</a>:</h4>
<p>I would like to try some stuff with the presheaves. As soon as <span class="user-mention" data-user-id="110524">@Scott Morrison</span> is back at Lean, I hope he will also get some sheafy PR ready. Or do you think this is something that I could get PR ready myself, Scott?</p>

<a name="134222265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222265" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222265">Johan Commelin (Sep 19 2018 at 09:51)</a>:</h4>
<p>The integral closure project is currently blocked by the module refactorisation, I guess.</p>

<a name="134222314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222314">Johan Commelin (Sep 19 2018 at 09:52)</a>:</h4>
<p>With completions I don't think I can be of much help, because my filter-fu is nilpotent</p>

<a name="134222322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222322" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222322">Scott Morrison (Sep 19 2018 at 09:52)</a>:</h4>
<p>Regarding sheafy stuff... That stuff can't actually make it into mathlib before all the work on limits gets to mathlib.</p>

<a name="134222325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222325" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222325">Scott Morrison (Sep 19 2018 at 09:52)</a>:</h4>
<p>That is pretty close, mostly filling in gaps.</p>

<a name="134222335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222335" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222335">Scott Morrison (Sep 19 2018 at 09:53)</a>:</h4>
<p>I got distracted last time I was working on it by the prospect of writing tactics to work with diagrams.</p>

<a name="134222339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222339" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222339">Johan Commelin (Sep 19 2018 at 09:53)</a>:</h4>
<p>Aaah, I see. Is it best if we just sit back and wait? Or can we contribute in a constructive way?</p>

<a name="134222352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222352" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222352">Scott Morrison (Sep 19 2018 at 09:53)</a>:</h4>
<p>The diagram stuff could be pretty cool, but maybe more on that later. :-)</p>

<a name="134222405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222405" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222405">Scott Morrison (Sep 19 2018 at 09:54)</a>:</h4>
<p>I had wanted to prove some basic facts like "has_limits implies has_equalizers", etc. etc., but as none of that is necessary for basic sheafy stuff, I should just leave that for a later PR.</p>

<a name="134222544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222544" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222544">Johan Commelin (Sep 19 2018 at 09:58)</a>:</h4>
<p>We probably also want all sort of lemmas about defining a sheaf on a basis of a topology and extending it to a sheaf by blah, etc...</p>

<a name="134222546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222546" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222546">Johan Commelin (Sep 19 2018 at 09:58)</a>:</h4>
<p>But that is something <em>we</em> could do, once the definition of a sheaf is in mathlib.</p>

<a name="134222557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222557" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222557">Patrick Massot (Sep 19 2018 at 09:59)</a>:</h4>
<p>Can't we add Scott's lib to the perfectoid project dependencies ?</p>

<a name="134222564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222564" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222564">Johan Commelin (Sep 19 2018 at 09:59)</a>:</h4>
<p>Hmmm, that has been discussed before. I think it is a good idea.</p>

<a name="134222622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222622" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222622">Johan Commelin (Sep 19 2018 at 10:00)</a>:</h4>
<p>Patrick, did you recently look through <code>for_mathlib</code> to see if we could PR stuff from there?</p>

<a name="134222634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222634" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222634">Johan Commelin (Sep 19 2018 at 10:00)</a>:</h4>
<p>Otherwise that might be something I could do somewhere on this trip</p>

<a name="134222868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134222868" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134222868">Johan Commelin (Sep 19 2018 at 10:06)</a>:</h4>
<p>I guess <code>add_subgroup.lean</code> is already in mathlib... <code>ideals.lean</code> should probably wait till the module-refactorisation is done. Afterwards we can see how much survives. <code>option_inj</code> and <code>quotient</code> and <code>topology</code>could at least partly be PR'd I think</p>

<a name="134223515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134223515" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134223515">Patrick Massot (Sep 19 2018 at 10:22)</a>:</h4>
<p><a href="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/for_mathlib/uniform_space.lean" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/for_mathlib/uniform_space.lean">https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/for_mathlib/uniform_space.lean</a> could go in, those bits were forgotten in a previous PR</p>

<a name="134223533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134223533" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134223533">Patrick Massot (Sep 19 2018 at 10:23)</a>:</h4>
<p>Are you sure add_subgroup.lean is in mathlib?</p>

<a name="134223534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134223534" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134223534">Johan Commelin (Sep 19 2018 at 10:23)</a>:</h4>
<p>No</p>

<a name="134223543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134223543" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134223543">Johan Commelin (Sep 19 2018 at 10:23)</a>:</h4>
<p>I just couldn't imagine it wasn't</p>

<a name="134223619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134223619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134223619">Johan Commelin (Sep 19 2018 at 10:25)</a>:</h4>
<p>I think Mario at some point merged it into mathlib using <code>to_additive</code> magic that I still don't understand. But maybe my memory is bad.</p>

<a name="134225024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134225024" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134225024">Patrick Massot (Sep 19 2018 at 11:04)</a>:</h4>
<p>I think this was is_add_group_hom</p>

<a name="134225054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134225054" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134225054">Patrick Massot (Sep 19 2018 at 11:05)</a>:</h4>
<p>No, you're right, <a href="https://github.com/leanprover/mathlib/blob/master/group_theory/subgroup.lean" target="_blank" title="https://github.com/leanprover/mathlib/blob/master/group_theory/subgroup.lean">https://github.com/leanprover/mathlib/blob/master/group_theory/subgroup.lean</a> is also there</p>

<a name="134225201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134225201" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134225201">Patrick Massot (Sep 19 2018 at 11:08)</a>:</h4>
<p>I removed it (including the olean...) and I confirm it doesn't change anything</p>

<a name="134228990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134228990" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134228990">Kevin Buzzard (Sep 19 2018 at 12:31)</a>:</h4>
<p>I have to make a confession about this <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi mathvariant="script">V</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi></mrow></msup></mrow><annotation encoding="application/x-tex">{\mathcal V}^{pre}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mord mathcal" style="margin-right:0.08222em;">V</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">p</span><span class="mord mathit mtight" style="margin-right:0.02778em;">r</span><span class="mord mathit mtight">e</span></span></span></span></span></span></span></span></span></span></span></span> stuff: a natural question when you read Wedhorn is "can Lean do stuff like <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi mathvariant="script">V</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi></mrow></msup></mrow><annotation encoding="application/x-tex">{\mathcal V}^{pre}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mord mathcal" style="margin-right:0.08222em;">V</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">p</span><span class="mord mathit mtight" style="margin-right:0.02778em;">r</span><span class="mord mathit mtight">e</span></span></span></span></span></span></span></span></span></span></span></span> nowadays?", and can we prove that <code>Spa</code> is a functor from Huber pairs to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi mathvariant="script">V</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi></mrow></msup></mrow><annotation encoding="application/x-tex">{\mathcal V}^{pre}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mord mathcal" style="margin-right:0.08222em;">V</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">p</span><span class="mord mathit mtight" style="margin-right:0.02778em;">r</span><span class="mord mathit mtight">e</span></span></span></span></span></span></span></span></span></span></span></span>? But actually the category theory language is just a convenient language for mathematicians to use here, because it's a way of saying "5 lemmas about <code>Spa</code> are true" all in one go. I am not so sure that we need to make a structure called "the category <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi mathvariant="script">V</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi></mrow></msup></mrow><annotation encoding="application/x-tex">{\mathcal V}^{pre}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mord mathcal" style="margin-right:0.08222em;">V</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">p</span><span class="mord mathit mtight" style="margin-right:0.02778em;">r</span><span class="mord mathit mtight">e</span></span></span></span></span></span></span></span></span></span></span></span> in order to achieve our primary objective.</p>

<a name="134229055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134229055" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134229055">Kevin Buzzard (Sep 19 2018 at 12:32)</a>:</h4>
<p>Whether or not the category <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi mathvariant="script">V</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi></mrow></msup></mrow><annotation encoding="application/x-tex">{\mathcal V}^{pre}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mord mathcal" style="margin-right:0.08222em;">V</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">p</span><span class="mord mathit mtight" style="margin-right:0.02778em;">r</span><span class="mord mathit mtight">e</span></span></span></span></span></span></span></span></span></span></span></span> goes into the repo, this does not change the fact that someone, probably me, needs to actually construct the map on objects.</p>

<a name="134229142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134229142" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134229142">Kevin Buzzard (Sep 19 2018 at 12:34)</a>:</h4>
<p>So if it helps to have the category theory repo as a dependency then that's fine, and of course ultimately if one is going to actually define the category of perfectoid spaces then one will need to be able to talk about categories -- but if one is just going to define the structure and then say "we did it" then we might not need <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi mathvariant="script">V</mi><mrow><mi>p</mi><mi>r</mi><mi>e</mi></mrow></msup></mrow><annotation encoding="application/x-tex">{\mathcal V}^{pre}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mord mathcal" style="margin-right:0.08222em;">V</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight">p</span><span class="mord mathit mtight" style="margin-right:0.02778em;">r</span><span class="mord mathit mtight">e</span></span></span></span></span></span></span></span></span></span></span></span>. It depends on what the ultimate goal is. It should be there but we can work around it is I guess what I'm saying. I never defined a morphism of schemes in the schemes project.</p>

<a name="134229450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134229450" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134229450">Patrick Massot (Sep 19 2018 at 12:40)</a>:</h4>
<p>As you wrote elsewhere, we want mathematicians to recognize the theory when browsing the perfectoid repository. So it would probably be better to have the category where it belongs</p>

<a name="134260907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134260907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134260907">Johan Commelin (Sep 19 2018 at 18:43)</a>:</h4>
<p>I think we should go the way of the category (-;<br>
If this means that we have to pay for it because there is too much bundled stuff or so... then we have identified a pain point that has to be fixed. Like you say the categories will be inevitable anyway.</p>

<a name="134261243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134261243" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134261243">Kevin Buzzard (Sep 19 2018 at 18:49)</a>:</h4>
<p>I am happy if both of you want to do this. But I don't quite see the logic -- it's like saying we need Scott's repo as a dependency if we're working with groups, because we can't say that groups form a category otherwise. What I'm trying to say is that just need to construct a <em>function</em>, not a <em>functor</em>, which eats <code>A</code> and spits out a structure which happens to be an object in a category which we don't strictly speaking need (we don't need to take limits, or products, or even compose morphisms -- or even use morphisms -- indeed it will be hard work to define the morphisms and we won't need them).</p>

<a name="134262632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134262632" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134262632">Johan Commelin (Sep 19 2018 at 19:10)</a>:</h4>
<p>Ok, so maybe we don't need <code>V^pre</code> as a category. But if we add Scott's lib as a dependency we do get immediate access to sheaves. That seems enough reason for me to add the dependency.</p>

<a name="134263777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134263777" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134263777">Patrick Massot (Sep 19 2018 at 19:32)</a>:</h4>
<p>I didn't understand that getting V^pre a category would mean useless work</p>

<a name="134263799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134263799" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134263799">Patrick Massot (Sep 19 2018 at 19:33)</a>:</h4>
<p>But it's a virtual discussion anyway if nobody can work on this. I have a <em>lot</em> of work to do on the topological group front</p>

<a name="134323352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134323352" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134323352">Kevin Buzzard (Sep 20 2018 at 17:23)</a>:</h4>
<p><code>definition power_bounded_subring := {r : R | is_power_bounded r}</code></p>

<a name="134323354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134323354" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134323354">Kevin Buzzard (Sep 20 2018 at 17:23)</a>:</h4>
<p>Should this be a set or a subtype?</p>

<a name="134323397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134323397" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134323397">Kevin Buzzard (Sep 20 2018 at 17:24)</a>:</h4>
<p>Someone will have to prove it's a subring at some point</p>

<a name="134323631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134323631" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134323631">Mario Carneiro (Sep 20 2018 at 17:28)</a>:</h4>
<p>It should be a subring</p>

<a name="134531313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134531313" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134531313">Johan Commelin (Sep 24 2018 at 14:56)</a>:</h4>
<p>I think I want to focus on the perfectoid project for the next few days.</p>

<a name="134531324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134531324" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134531324">Johan Commelin (Sep 24 2018 at 14:56)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> You had some discussion with Kevin on where the gaps are.</p>

<a name="134531331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134531331" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134531331">Johan Commelin (Sep 24 2018 at 14:57)</a>:</h4>
<p>Do you see a gap that isn't "completions" on which I could work?</p>

<a name="134531347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134531347" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134531347">Johan Commelin (Sep 24 2018 at 14:57)</a>:</h4>
<p>(I finished several maths projects, so I will treat myself on some Lean time.)</p>

<a name="134531357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134531357" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134531357">Johan Commelin (Sep 24 2018 at 14:57)</a>:</h4>
<p>Should I try to define V_pre?</p>

<a name="134533591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134533591" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134533591">Reid Barton (Sep 24 2018 at 15:33)</a>:</h4>
<p>Have you checked the outline tex file which Kevin added somewhat recently?</p>

<a name="134533826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134533826" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134533826">Reid Barton (Sep 24 2018 at 15:36)</a>:</h4>
<p>Scott has been trying to define V_pre over in the category theory repo, I think</p>

<a name="134533855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134533855" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134533855">Reid Barton (Sep 24 2018 at 15:36)</a>:</h4>
<p>But maybe it's not quite the same thing.</p>

<a name="134533912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134533912" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134533912">Johan Commelin (Sep 24 2018 at 15:37)</a>:</h4>
<p>Ok, I'll try to dig those up.</p>

<a name="134534018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134534018" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134534018">Reid Barton (Sep 24 2018 at 15:39)</a>:</h4>
<p>It looks like what Scott is doing specifically is the category where an object is a topological space X plus a C-valued presheaf on X, for some arbitrary category C.</p>

<a name="134534031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134534031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134534031">Reid Barton (Sep 24 2018 at 15:39)</a>:</h4>
<p>Is V_pre a specialization of that for C = something?</p>

<a name="134534157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134534157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134534157">Reid Barton (Sep 24 2018 at 15:41)</a>:</h4>
<p>I looked it up--not exactly</p>

<a name="134534216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134534216" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134534216">Reid Barton (Sep 24 2018 at 15:42)</a>:</h4>
<p>but I guess a good start would be to define a category of complete topological rings?</p>

<a name="134534434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134534434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134534434">Johan Commelin (Sep 24 2018 at 15:46)</a>:</h4>
<p>Yes, I agree.</p>

<a name="134534462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134534462" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134534462">Johan Commelin (Sep 24 2018 at 15:46)</a>:</h4>
<p>I was doing that, and then I got distracted. I'm doing a small cleanup of Huber pair atm.</p>

<a name="134534474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134534474" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134534474">Johan Commelin (Sep 24 2018 at 15:46)</a>:</h4>
<p>But let's return to complete topological rings.</p>

<a name="134534672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134534672" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134534672">Reid Barton (Sep 24 2018 at 15:49)</a>:</h4>
<p>This might be too nitpicky, but possibly it would be better to have the subcategory of all topological rings.<br>
Because on p. 80, V is defined to be the full subcategory of V^pre on the objects for which O_X is a sheaf of topological rings, and a priori the definition of "sheaf of topological rings" is not the same as "sheaf of complete topological rings".</p>

<a name="134534694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134534694" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134534694">Johan Commelin (Sep 24 2018 at 15:50)</a>:</h4>
<p>Agreed</p>

<a name="134534766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134534766" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134534766">Johan Commelin (Sep 24 2018 at 15:50)</a>:</h4>
<p>Do we have subcategories yet?</p>

<a name="134534767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134534767" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134534767">Reid Barton (Sep 24 2018 at 15:50)</a>:</h4>
<p>(I am happy to see Remark 8.19--I wondered if they would notice that a sheaf of topological rings is genuinely not the same thing as a sheaf of rings)</p>

<a name="134534769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134534769" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134534769">Reid Barton (Sep 24 2018 at 15:50)</a>:</h4>
<p>I think so, category_theory/embedding.lean</p>

<a name="134534904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134534904" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134534904">Reid Barton (Sep 24 2018 at 15:52)</a>:</h4>
<p>You have to attach this extra valuation data anyways, so I think the definition of V^pre is going to be rather custom</p>

<a name="134534907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134534907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134534907">Johan Commelin (Sep 24 2018 at 15:52)</a>:</h4>
<p>Ok, good.</p>

<a name="134534932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134534932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134534932">Reid Barton (Sep 24 2018 at 15:53)</a>:</h4>
<p>It's not a subcategory of a presheaf category in an obvious way</p>

<a name="134534941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134534941" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134534941">Johan Commelin (Sep 24 2018 at 15:53)</a>:</h4>
<p>No, I agree...</p>

<a name="134534971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134534971" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134534971">Johan Commelin (Sep 24 2018 at 15:54)</a>:</h4>
<p>So, what do you suggest. (1) topological rings. (2) subcategory of complete topological rings. (3) presheaf with values in (2).</p>

<a name="134535014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134535014" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134535014">Johan Commelin (Sep 24 2018 at 15:54)</a>:</h4>
<p>And then just going on with the custom stuff?</p>

<a name="134535179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134535179" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134535179">Reid Barton (Sep 24 2018 at 15:56)</a>:</h4>
<p>I think it might be simpler to skip 2 and put the completeness condition in the custom stuff, since later you're going to want to assert that the presheaf of topological rings is a sheaf, but it probably doesn't matter much</p>

<a name="134535259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134535259" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134535259">Johan Commelin (Sep 24 2018 at 15:57)</a>:</h4>
<p>Ok, I'll try to define a category of topological rings.</p>

<a name="134535264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134535264" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134535264">Reid Barton (Sep 24 2018 at 15:57)</a>:</h4>
<p>I don't understand where all these conditions come from, so my opinion might be ill-informed.</p>

<a name="134535310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134535310" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134535310">Johan Commelin (Sep 24 2018 at 15:58)</a>:</h4>
<p>Well, I'm not an expert either (-;</p>

<a name="134536345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134536345" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134536345">Reid Barton (Sep 24 2018 at 16:13)</a>:</h4>
<p>It appears to me that</p>
<ul>
<li>a limit of complete topological rings is complete,</li>
<li>consequently, the sheaf on any pre-adic space takes values in complete topological rings automatically, even if we did not require it in the definition,</li>
</ul>
<p>and so it shouldn't matter where you insert "complete", if anywhere. But I'm not 100% sure.</p>

<a name="134536785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134536785" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134536785">Johan Commelin (Sep 24 2018 at 16:19)</a>:</h4>
<p>So, how would you define the category of topological rings? Start from scratch? Or build on top of <code>Ring</code>?</p>

<a name="134536983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134536983" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134536983">Johan Commelin (Sep 24 2018 at 16:22)</a>:</h4>
<p>We can't do <code>bundled topological_ring</code> because that requires <code>ring</code> and <code>topological_space</code> to be present.</p>

<a name="134536999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134536999" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134536999">Reid Barton (Sep 24 2018 at 16:23)</a>:</h4>
<p>What goes wrong with that exactly?</p>

<a name="134537005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537005" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537005">Johan Commelin (Sep 24 2018 at 16:23)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
  <span class="n">bundled</span> <span class="n">topological_ring</span>
<span class="n">term</span>
  <span class="n">topological_ring</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="bp">Π</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="err">?</span><span class="o">)</span> <span class="o">[</span><span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="bp">_</span><span class="n">inst_2</span> <span class="o">:</span> <span class="n">ring</span> <span class="n">α</span><span class="o">],</span> <span class="kt">Prop</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="err">?</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="kt">Type</span> <span class="err">?</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="err">?</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="n">max</span> <span class="o">(</span><span class="err">?</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="err">?</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span>
</pre></div>

<a name="134537009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537009" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537009">Reid Barton (Sep 24 2018 at 16:23)</a>:</h4>
<p>Oh I see</p>

<a name="134537064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537064" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537064">Reid Barton (Sep 24 2018 at 16:24)</a>:</h4>
<p>I guess we could bundle up <code>[topological_space a] [ring a] [topological_ring a]</code> into one class for use when defining the category</p>

<a name="134537077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537077" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537077">Johan Commelin (Sep 24 2018 at 16:24)</a>:</h4>
<p>So start from scratch</p>

<a name="134537100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537100">Reid Barton (Sep 24 2018 at 16:25)</a>:</h4>
<p>Well, using <code>bundled</code> with a custom class which can just be <code>extends ...</code>, I think, with an empty body</p>

<a name="134537174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537174" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537174">Johan Commelin (Sep 24 2018 at 16:26)</a>:</h4>
<p>Aaah, I can try that</p>

<a name="134537185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537185" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537185">Reid Barton (Sep 24 2018 at 16:27)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">actual_topological_ring</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span>
  <span class="kn">extends</span> <span class="n">ring</span> <span class="n">α</span><span class="o">,</span> <span class="n">topological_space</span> <span class="n">α</span><span class="o">,</span> <span class="n">topological_ring</span> <span class="n">α</span>
</pre></div>

<a name="134537203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537203" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537203">Johan Commelin (Sep 24 2018 at 16:27)</a>:</h4>
<p>Right.</p>

<a name="134537253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537253" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537253">Johan Commelin (Sep 24 2018 at 16:28)</a>:</h4>
<p>I was going for a <code>'</code> at the end, but <code>actual</code> is also a good idea.</p>

<a name="134537259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537259" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537259">Johan Commelin (Sep 24 2018 at 16:28)</a>:</h4>
<p>Should we do <code>ring</code> or <code>comm_ring</code>?</p>

<a name="134537268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537268" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537268">Johan Commelin (Sep 24 2018 at 16:28)</a>:</h4>
<p>Or just do both, and make the <code>comm_</code> explicit: <code>actual_topological_comm_ring</code></p>

<a name="134537383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537383" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537383">Reid Barton (Sep 24 2018 at 16:30)</a>:</h4>
<p>Oops, <code>comm_ring</code> of course. Oh wait, there is no <code>topological_comm_ring</code>. So you could just use that name...</p>

<a name="134537385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537385" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537385">Reid Barton (Sep 24 2018 at 16:30)</a>:</h4>
<p>Probably too confusing...</p>

<a name="134537400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537400" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537400">Reid Barton (Sep 24 2018 at 16:31)</a>:</h4>
<p>I thought my <code>actual_</code> sounded a bit irritated <span class="emoji emoji-263a" title="smile">:smile:</span></p>

<a name="134537409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537409" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537409">Reid Barton (Sep 24 2018 at 16:31)</a>:</h4>
<p>Hales topological commutative ring</p>

<a name="134537473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537473" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537473">Reid Barton (Sep 24 2018 at 16:32)</a>:</h4>
<p>I think then you should get all three of those classes on the underlying type of an object for free</p>

<a name="134537587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537587" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537587">Johan Commelin (Sep 24 2018 at 16:34)</a>:</h4>
<p>Haha</p>

<a name="134537588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537588">Johan Commelin (Sep 24 2018 at 16:34)</a>:</h4>
<p><code>class is_topological_ring_hom</code> or <code>class is_continuous_ring_hom</code>. What do we choose?</p>

<a name="134537920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537920" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537920">Reid Barton (Sep 24 2018 at 16:40)</a>:</h4>
<p>Wedhorn says "continuous ring homomorphism"</p>

<a name="134537924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537924" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537924">Reid Barton (Sep 24 2018 at 16:40)</a>:</h4>
<p>I guess go with that one</p>

<a name="134537943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134537943" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134537943">Kenny Lau (Sep 24 2018 at 16:41)</a>:</h4>
<p>I bet Wedhorn doesn't say <code>add_comm_group</code></p>

<a name="134538394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134538394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134538394">Reid Barton (Sep 24 2018 at 16:51)</a>:</h4>
<p>Nope.<br>
"Let <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">G</span></span></span></span> be a filtered abelian group (written additively), ..."</p>

<a name="134540645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134540645" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134540645">Patrick Massot (Sep 24 2018 at 17:36)</a>:</h4>
<blockquote>
<p>Do you see a gap that isn't "completions" on which I could work?</p>
</blockquote>
<p>Unfortunately I don't have anything better than <a href="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/LaTeX_docs/overview.tex" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/LaTeX_docs/overview.tex">https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/LaTeX_docs/overview.tex</a> and Wedhorn. I think it's pretty hard to work on this without a clear view of the maths. However it should be rather easy for you to work on extracting from Wedhorn and Kevin's overview a detailed LaTeX file containing the full definition we are trying to formalize. Then everything would be easier</p>

<a name="134540769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134540769" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134540769">Patrick Massot (Sep 24 2018 at 17:38)</a>:</h4>
<p>I really think that it would be super useful for everybody to have a complete LaTeX'ed version of the perfectoid project, including everything from the beginning (of course LaTeXing the definition of a group would be really low priority). It would be useful before finishing the Lean project but also after finishing, since people could then go back and forth between LaTeX and Lean, trying to match things.</p>

<a name="134558347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134558347" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134558347">Scott Morrison (Sep 24 2018 at 21:35)</a>:</h4>
<p>Sorry, late to the party.</p>

<a name="134558396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134558396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134558396">Scott Morrison (Sep 24 2018 at 21:36)</a>:</h4>
<p>On the <code>working</code> branch of <code>lean-category-theory</code> there is a file defining the category of topological rings.</p>

<a name="134558412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134558412" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134558412">Reid Barton (Sep 24 2018 at 21:36)</a>:</h4>
<p>Does it work? <span class="emoji emoji-263a" title="smile">:smile:</span></p>

<a name="134558417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134558417" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134558417">Scott Morrison (Sep 24 2018 at 21:36)</a>:</h4>
<p>Sorry this wasn't on <code>master</code> -- I've been trying to keep that compiling, and not depending on PRs to mathlib, but I have a stack of open PRs waiting on mathlib so it's been hard to reunite my <code>working</code> branch with <code>master</code>.</p>

<a name="134558435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134558435" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134558435">Reid Barton (Sep 24 2018 at 21:37)</a>:</h4>
<p>So <code>working</code> is the non-working branch</p>

<a name="134558522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134558522" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134558522">Scott Morrison (Sep 24 2018 at 21:38)</a>:</h4>
<p>It may actually work :-)</p>

<a name="134558526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134558526" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134558526">Scott Morrison (Sep 24 2018 at 21:38)</a>:</h4>
<p>Haven't actually looked at it in a few days.</p>

<a name="134558539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134558539" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134558539">Scott Morrison (Sep 24 2018 at 21:38)</a>:</h4>
<p>It depends on commits to <code>leanprover-community/mathlib</code>.</p>

<a name="134558629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134558629" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134558629">Reid Barton (Sep 24 2018 at 21:40)</a>:</h4>
<p>which branch?</p>

<a name="134558630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134558630" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134558630">Scott Morrison (Sep 24 2018 at 21:40)</a>:</h4>
<p>It looks like <code>TopRing.lean</code> itself compiles fine :-)</p>

<a name="134558643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134558643" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134558643">Scott Morrison (Sep 24 2018 at 21:40)</a>:</h4>
<p>It depends on a branch called <code>scott/supremum</code> which is the supremum of my PRs. :-)</p>

<a name="134558657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134558657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134558657">Scott Morrison (Sep 24 2018 at 21:41)</a>:</h4>
<p>I should enquire sometime if there is an obstacle for those PRs. I think they're ready to go.</p>

<a name="134558664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134558664" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134558664">Reid Barton (Sep 24 2018 at 21:41)</a>:</h4>
<p>I see</p>

<a name="134558680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134558680" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134558680">Reid Barton (Sep 24 2018 at 21:41)</a>:</h4>
<p>You don't happen to have a branch with limits do you? I was thinking of making one</p>

<a name="134558746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134558746" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134558746">Reid Barton (Sep 24 2018 at 21:42)</a>:</h4>
<p>because most of the things I want to do are dependent on limits, and it's somewhat less convenient to use lean-category-theory as a dependency (for example I might want to modify the files related to limits)</p>

<a name="134558771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134558771" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134558771">Reid Barton (Sep 24 2018 at 21:43)</a>:</h4>
<p>I started on making one, but then it seemed like it might involve pulling in nontrivial amounts of lean-tidy</p>

<a name="134558850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134558850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134558850">Scott Morrison (Sep 24 2018 at 21:44)</a>:</h4>
<p>No, there's not yet. I did start porting, but realised I really wanted <code>backwards_reasoning</code> available in <code>mathlib</code> first, and then hit pause because I already have too many open PRs, and needed to do other work too. :-)</p>

<a name="134558892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134558892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134558892">Scott Morrison (Sep 24 2018 at 21:45)</a>:</h4>
<p>If you happen to want to push that to happen, you could either PR <code>backwards_reasoning</code> yourself, or review some of my open PRs so I either retract them or they get merged. :-)</p>

<a name="134558990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134558990" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134558990">Reid Barton (Sep 24 2018 at 21:47)</a>:</h4>
<p>Yes, I might take a stab at backwards_reasoning, since I also want it for other things (continuity).</p>

<a name="134580882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134580882" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134580882">Kevin Buzzard (Sep 25 2018 at 07:55)</a>:</h4>
<p>Sorry I'm even later -- after quite a hectic weekend I'm spending Mon and Tue focussed on real life issues. <span class="user-mention" data-user-id="112680">@Johan Commelin</span> I had a lot of energy for doing the Hilbert Basis Theorem last week, but when I realised that I had to fight with the old module system and then Mario kindly decided to refactor everything I decided I would use this as an excuse for focussing on my upcoming teaching (my class starts in 9 days' time and I'm still not ready). I did find the time to look at the repo from the top down. Johan if you're looking for some easy pickings then here are a couple of things which need doing. </p>
<p>1) in valuations.lean I skipped a proof and this will surely bite us later. A valuation is continuous if (blah -- see Wedhorn). Note that in this definition you replace the target group Gamma with the subgroup generated by the image of the valuation -- this is important. With this definition, if two valuations are equivalent then one is continuous iff the other is. I did not prove this because at the time it involved extending a valuation on <code>R</code> to a valuation on <code>Frac(R/P)</code> with P the kernel (the "support") of the valuation and we didn't have field of fraction of an integral domain or proof that R/P is an integral domain for P prime -- I believe these are now there.</p>
<p>2) in Spa.lean we need to prove completely trivial stuff about the topology, I'm in a rush now but basically the we have something like basic opens and rational opens, and for one of these things (maybe rational opens) the definition of the presheaf is "the set is defined by |t1|&lt;=1,|t2|&lt;=1,... and |s|&gt;0, so localise R at s and then look at the ideal of R0 generated by the t_i and complete". If we have a sorried ring completion we can make this definition and then ones attention turns to extending this definition across all of Spa(R) via a limit construction (if U is a union of rational opens Ui then define O_X(U) = proj lim of O_X(U_i)). You'll then run into the problem of having defined O_X(U) twice for U a rational open, so the first definition might be O_X^aux or something. But all this stuff is very do-able right now</p>

<a name="134581284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134581284" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134581284">Johan Commelin (Sep 25 2018 at 08:04)</a>:</h4>
<p>Thanks Kevin! I'll see if I can make progress on those while I'm on the train back to Freiburg tomorrow. Today is the PhD defense of my PhD brother. So I won't have much time for Lean today.</p>

<a name="134591981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134591981" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134591981">Patrick Massot (Sep 25 2018 at 12:12)</a>:</h4>
<p>Do we really need Wedhorn's "Remark and definition 8.5" in order to define adic spaces? To me it looks like we could use the same kind of loophole as in the early scheme formalization, at a time when affine schemes were not yet schemes.</p>

<a name="134592095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134592095" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134592095">Patrick Massot (Sep 25 2018 at 12:14)</a>:</h4>
<p>Maybe I should write 8.6 instead of 8.5. I meant: do we need to prove that, in the model case of Spa(A), stalks of the structure sheaf are local, with maximal ideal the support of the associated valuation</p>

<a name="134593124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134593124" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134593124">Kevin Buzzard (Sep 25 2018 at 12:33)</a>:</h4>
<p>I think we do. The problem is that whilst the stalks and support are defined by the sheaf, the valuation is not. An adic space has a cover by affinoid adic spaces. If we only demand that the identification of an element of this cover with Spa(A) is an isomorphism of top spaces + presheaf of rings then we risk there potentially being the issue that two different rings corresponding to two open sets which have non-trivial intersection give rise to two different valuations on the local ring with the same support, so this would not be an adic space. I have absolutely no idea whether this can happen.</p>

<a name="134661684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134661684" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134661684">Johan Commelin (Sep 26 2018 at 10:07)</a>:</h4>
<p>So there is a <code>quot.lift_beta</code> which I think is called <code>lift_mk</code> for other quotient types. But for <code>quotient</code> itself I didn't find anything like <code>lift_mk</code>... did I miss something?</p>

<a name="134812584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134812584" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134812584">Johan Commelin (Sep 28 2018 at 09:37)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Is there a reason why <code>valuation.map_add</code> uses <code>.. ≤ .. ∨ .. ≤ ..</code> instead of <code>.. ≤ max .. ..</code>?</p>

<a name="134812601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134812601" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134812601">Kevin Buzzard (Sep 28 2018 at 09:37)</a>:</h4>
<p>Did <span class="user-mention" data-user-id="110064">@Kenny Lau</span> write this?</p>

<a name="134812607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134812607" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134812607">Johan Commelin (Sep 28 2018 at 09:37)</a>:</h4>
<p>If you didn't: yes</p>

<a name="134812648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134812648" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134812648">Kevin Buzzard (Sep 28 2018 at 09:38)</a>:</h4>
<p>I am 50 now, I can't remember what I wrote :-(</p>

<a name="134812661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134812661" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134812661">Johan Commelin (Sep 28 2018 at 09:38)</a>:</h4>
<p>Wait, you're 50? When did that happen? <span class="emoji emoji-1f606" title="lol">:lol:</span></p>

<a name="134825074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134825074" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134825074">Johan Commelin (Sep 28 2018 at 13:44)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I've unlocked <code>rational_open_is_open</code>. So I think we can now define the sheaf on the rational open sets (up to ring completions).</p>

<a name="134825112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134825112" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134825112">Johan Commelin (Sep 28 2018 at 13:45)</a>:</h4>
<p>After that we want to extend it to all opens, but this seems like a very generic procedure. So maybe we should prove some categorical lemmas about sheaves on basic opens</p>

<a name="134825830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134825830" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134825830">Johan Commelin (Sep 28 2018 at 13:56)</a>:</h4>
<p>Kevin, I created a PR for this. It also fixes some notations and coercions. Please only merge the PR from my <code>Spa</code> branch.</p>

<a name="134825847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134825847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134825847">Johan Commelin (Sep 28 2018 at 13:56)</a>:</h4>
<p>After that, I guess there will be merge conflicts for my other two PR's. I will fix those later.</p>

<a name="134831626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134831626" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134831626">Kevin Buzzard (Sep 28 2018 at 15:16)</a>:</h4>
<p>I have PR's??</p>

<a name="134831634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134831634" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134831634">Kevin Buzzard (Sep 28 2018 at 15:16)</a>:</h4>
<p>I do not get notified about these in any way.</p>

<a name="134831653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134831653" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134831653">Kevin Buzzard (Sep 28 2018 at 15:16)</a>:</h4>
<p>Johan -- can you follow Patrick's lead and just bluntly tell me about them? ;-)</p>

<a name="134831666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134831666" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134831666">Kevin Buzzard (Sep 28 2018 at 15:16)</a>:</h4>
<p>I am even watching the repo</p>

<a name="134832218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134832218" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134832218">Johan Commelin (Sep 28 2018 at 15:24)</a>:</h4>
<p>Weird... I expected you to get notified.</p>

<a name="134832220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134832220" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134832220">Johan Commelin (Sep 28 2018 at 15:24)</a>:</h4>
<p>Anyway, you've got 3 PR's <span class="emoji emoji-1f606" title="lol">:lol:</span></p>

<a name="134834619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134834619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134834619">Johan Commelin (Sep 28 2018 at 16:03)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> In the upper right hand corner of the Github screen there is a bell icon <span class="emoji emoji-1f514" title="bell">:bell:</span>. If there is a blue dot <span class="emoji emoji-1f535" title="blue circle">:blue_circle:</span> on it, then it means you have notifications.</p>

<a name="134834682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134834682" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134834682">Johan Commelin (Sep 28 2018 at 16:04)</a>:</h4>
<p>In that notification area I see all the activity on PR's to mathlib etc... I hope you would also see PR's to your repos there.</p>

<a name="134835382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134835382" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134835382">Kevin Buzzard (Sep 28 2018 at 16:16)</a>:</h4>
<p>Not for me.</p>

<a name="134836268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134836268" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134836268">Kevin Buzzard (Sep 28 2018 at 16:30)</a>:</h4>
<p>Oh thanks, I have some notification thing switched off.</p>

<a name="134838777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134838777" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134838777">Johan Commelin (Sep 28 2018 at 17:19)</a>:</h4>
<blockquote>
<p>So I think we can now define the sheaf on the rational open sets (up to ring completions). After that we want to extend it to all opens, but this seems like a very generic procedure. So maybe we should prove some categorical lemmas about sheaves on basic opens</p>
</blockquote>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> Can you give an idea of how far we are from being able to do these things with our library? I guess the important thing we need is to be able to write down a (directed?) limit of complete topological rings (and prove that it exists...)</p>

<a name="134844825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134844825" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134844825">Kevin Buzzard (Sep 28 2018 at 19:03)</a>:</h4>
<p>wait wait. We need a projective limit of topological rings with its topology, and we need a direct limit of topological rings but taken in the category of rings.</p>

<a name="134858374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134858374" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134858374">Scott Morrison (Sep 28 2018 at 23:35)</a>:</h4>
<p>My PR of limits into mathlib is held up at the moment because I want to PR <code>backwards_reasoning</code> first, and that is held up because I can significantly improve <code>backwards_reasoning</code>, essentially making it a generalisation of <code>solve_by_elim</code>, but I have a PR extending the behaviour of <code>solve_by_elim</code> already waiting for merge/review.</p>

<a name="134858416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134858416" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134858416">Scott Morrison (Sep 28 2018 at 23:36)</a>:</h4>
<p><a href="https://github.com/leanprover/mathlib/pull/324" target="_blank" title="https://github.com/leanprover/mathlib/pull/324">https://github.com/leanprover/mathlib/pull/324</a></p>

<a name="134860508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134860508" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134860508">Reid Barton (Sep 29 2018 at 00:42)</a>:</h4>
<p>Oh, I hadn't realized you were working on <code>backwards_reasoning</code>. I took a look at it today, but all I really did was clean up the code some--no functional changes (hopefully!)</p>

<a name="134860515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134860515" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134860515">Reid Barton (Sep 29 2018 at 00:43)</a>:</h4>
<p>I could PR my changes (to lean-tidy?) if that would still be useful</p>

<a name="134861412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134861412" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134861412">Scott Morrison (Sep 29 2018 at 01:09)</a>:</h4>
<p>Absolutely! Maybe my comment above overstated what work I'd actually done. I've been _thinking_ about how to unify backwards_reasoning and solve_by_elim, but no code got written yet. :-)</p>

<a name="134867397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134867397" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134867397">Johan Commelin (Sep 29 2018 at 04:20)</a>:</h4>
<p>I'm really looking forward to all this new stuff. <span class="user-mention" data-user-id="110087">@Scott Morrison</span> what is the status of colimits? In Orsay we discussed several strategies. Is there still something that needs to be resolved, or is it mostly a matter of time and administration?</p>

<a name="134888527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134888527" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134888527">Johan Commelin (Sep 29 2018 at 16:45)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Github says that there are no merge conflicts for the other 2 PR's. So I think they are good to go.</p>

<a name="134900439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134900439" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134900439">Kevin Buzzard (Sep 29 2018 at 23:47)</a>:</h4>
<p>OK, as good things go, they went.</p>

<a name="134901337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134901337" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134901337">Kevin Buzzard (Sep 30 2018 at 00:23)</a>:</h4>
<p>So it seems that we're getting nearer. I added some comments in spa.lean briefly outlining the way. Proving things are presheafs -- we'll need some maps. We might need Wedhorn 8.2(2), not sure.</p>

<a name="134910845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134910845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134910845">Scott Morrison (Sep 30 2018 at 06:08)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span>, my plan for <code>backwards_reasoning</code> was to build on the new functionality for <code>solve_by_elim</code>, which lets you specify lemmas (or attributes to gather collections of lemmas) to also apply. </p>
<p>Step 1 is probably to add <code>solve_by_elim!</code> which will succeed even if it doesn't finish the goal, as long as it can apply something (this one won't do any backtracking -- once some applies, it's applied). </p>
<p>Step 2 is then just to define</p>
<div class="codehilite"><pre><span></span>meta  def backwards_reasoning = solve_by_elim [back]
</pre></div>


<p>(i.e. use solve_by_elim, but also use any lemma with attribute `back), and</p>
<div class="codehilite"><pre><span></span>meta def backwards_reasoning! = solve_by_elim! only [back!]
</pre></div>


<p>which will apply any lemmas tagged with <code>back!</code> (but won't use apply local hypotheses), even it it can't finish the goal.</p>
<p>Step 3 is possibly to realise that there's almost no space between <code>solve_by_elim</code> and <code>backwards_reasoning</code>, decide which name should survive, and merge them.</p>

<a name="134910850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134910850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134910850">Scott Morrison (Sep 30 2018 at 06:09)</a>:</h4>
<p>Step 1b is to add an output mode which actually reports the successful <code>apply</code> steps, for creating tactic scripts.</p>

<a name="134910892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134910892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134910892">Scott Morrison (Sep 30 2018 at 06:10)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> the status of colimits is exactly the same as the status of limits: both are waiting on me finding time to either remove the use of <code>backwards_reasoning</code> from their proofs, or PR <code>backwards_reasoning</code> as outlined to Reid just above.</p>

<a name="134939944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134939944" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134939944">Johan Commelin (Sep 30 2018 at 23:22)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Thanks for merging those PR's.</p>

<a name="134940002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134940002" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134940002">Johan Commelin (Sep 30 2018 at 23:24)</a>:</h4>
<p>Pretty soon there should be a more general cleanup of the valuation files. All the <code>option</code> stuff can be replaced by <code>with_zero</code> for great good. Also, some of the files can probably be merged.</p>

<a name="134952532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134952532" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134952532">Kevin Buzzard (Oct 01 2018 at 06:12)</a>:</h4>
<p>I think Kenny might have written those things just before those with bot etc types appeared</p>

<a name="134953041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134953041" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134953041">Johan Commelin (Oct 01 2018 at 06:28)</a>:</h4>
<p>I agree. But now that they are there, it is nice to use them.</p>

<a name="134955166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134955166" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134955166">Johan Commelin (Oct 01 2018 at 07:33)</a>:</h4>
<p>Kevin, I have defined a <code>Spv.lift</code> which should allow for "nicer" definitions, where we can treat valuations as actual valuation functions instead of inequality relations on the ring.</p>

<a name="134956471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134956471" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134956471">Kevin Buzzard (Oct 01 2018 at 08:09)</a>:</h4>
<p>Oh that would be great! I was looking at the code the other day thinking how unreadable it was because of that inequality notation . It's done this way (inequalities) for universe reasons.</p>

<a name="134956696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134956696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134956696">Johan Commelin (Oct 01 2018 at 08:15)</a>:</h4>
<p>Yes... I did have to impose <code>decidable_eq R</code> everywhere. I guess you don't care.</p>

<a name="134956705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134956705" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134956705">Kevin Buzzard (Oct 01 2018 at 08:15)</a>:</h4>
<p>Not at all</p>

<a name="134956911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134956911" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134956911">Johan Commelin (Oct 01 2018 at 08:21)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Is this ok (see the other thread):</p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">Spa</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">:=</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">mk</span> <span class="err">&#39;&#39;</span> <span class="o">{</span><span class="n">v</span> <span class="o">:</span> <span class="n">Valuation</span> <span class="n">A</span> <span class="bp">|</span> <span class="n">v</span><span class="bp">.</span><span class="n">is_continuous</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">r</span><span class="o">,</span> <span class="n">r</span> <span class="err">∈</span> <span class="n">A</span><span class="err">⁺</span> <span class="bp">→</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="mi">1</span><span class="o">}</span>
</pre></div>

<a name="134956956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134956956" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134956956">Johan Commelin (Oct 01 2018 at 08:22)</a>:</h4>
<p>I'm changing it to something that isn't defeq, but provably the same as you had. And I think this is pretty readable.</p>

<a name="134957178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134957178" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134957178">Patrick Massot (Oct 01 2018 at 08:29)</a>:</h4>
<p>it would be even more readable with <code>∀ r ∈ A⁺</code> if the elaborator can do it</p>

<a name="134957458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134957458" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134957458">Johan Commelin (Oct 01 2018 at 08:36)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> Agreed, but alas. It doesn't like that <span class="emoji emoji-2639" title="sad">:sad:</span></p>

<a name="134957513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134957513" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134957513">Patrick Massot (Oct 01 2018 at 08:36)</a>:</h4>
<p>I already had this issue, sometimes it needs a tiny bit of extra characters to put things in order</p>

<a name="134957526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134957526" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134957526">Patrick Massot (Oct 01 2018 at 08:37)</a>:</h4>
<p>This is frustrating because it doesn't need <code>∀ r : A, r ∈ A⁺</code> so it looks like it could figure it out</p>

<a name="134957643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134957643" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134957643">Johan Commelin (Oct 01 2018 at 08:40)</a>:</h4>
<p>Yes, but compared to what we had before this is a really minor inconvenience.</p>

<a name="134959313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134959313" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134959313">Kevin Buzzard (Oct 01 2018 at 09:24)</a>:</h4>
<p>Mario told me to use the inequality definition</p>

<a name="134959358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134959358" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134959358">Kevin Buzzard (Oct 01 2018 at 09:25)</a>:</h4>
<p>I don't have access to lean right now but there are universe issues if you're not careful. I will have to collect my thoughts and try and remember what they were. Didn't I leave a bunch of Mario comments in the source code?</p>

<a name="134959401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134959401" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134959401">Johan Commelin (Oct 01 2018 at 09:26)</a>:</h4>
<p>You did</p>

<a name="134959410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134959410" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134959410">Johan Commelin (Oct 01 2018 at 09:26)</a>:</h4>
<p>But your <code>minimal_valuation</code> stuff fixes those issues.</p>

<a name="134959423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134959423" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134959423">Johan Commelin (Oct 01 2018 at 09:26)</a>:</h4>
<p>So you define <code>Valuation R</code> to be all the valuations that live in the same universe as <code>R</code>. And then you quotient by equivalence.</p>

<a name="134959435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134959435" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134959435">Johan Commelin (Oct 01 2018 at 09:27)</a>:</h4>
<p>Given any valuation, you can always take the associated minimal one to lower your universe.</p>

<a name="134959446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134959446" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134959446">Johan Commelin (Oct 01 2018 at 09:27)</a>:</h4>
<p>So <code>Spv.mk</code> takes any valuation, and gives an element of <code>Spv R</code>.</p>

<a name="134970436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134970436" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134970436">Johan Commelin (Oct 01 2018 at 13:36)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Voila</p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">Spa</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">Spv</span><span class="bp">.</span><span class="n">lift</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">v</span> <span class="o">:</span> <span class="n">Valuation</span> <span class="n">A</span><span class="o">,</span> <span class="n">v</span><span class="bp">.</span><span class="n">is_continuous</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">r</span><span class="o">,</span> <span class="n">r</span> <span class="err">∈</span> <span class="n">A</span><span class="err">⁺</span> <span class="bp">→</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="mi">1</span><span class="o">)</span>
<span class="o">(</span><span class="bp">λ</span> <span class="n">v₁</span> <span class="n">v₂</span> <span class="n">heq</span><span class="o">,</span>
<span class="k">begin</span>
  <span class="n">ext</span><span class="o">,</span> <span class="n">split</span><span class="bp">;</span> <span class="n">intro</span><span class="bp">;</span> <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">Valuation</span><span class="bp">.</span><span class="n">is_continuous_of_equiv_is_continuous</span> <span class="n">heq</span> <span class="n">a</span><span class="bp">.</span><span class="n">left</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="err">←</span> <span class="n">v₁</span><span class="bp">.</span><span class="n">val</span><span class="bp">.</span><span class="n">map_one</span> <span class="n">at</span> <span class="n">a</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="n">v₂</span><span class="bp">.</span><span class="n">val</span><span class="bp">.</span><span class="n">map_one</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">r</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">exact</span> <span class="o">(</span><span class="n">heq</span> <span class="n">r</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">mp</span> <span class="o">(</span><span class="n">a</span><span class="bp">.</span><span class="n">right</span> <span class="n">r</span> <span class="n">h</span><span class="o">)</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">Valuation</span><span class="bp">.</span><span class="n">is_continuous_of_equiv_is_continuous</span> <span class="o">(</span><span class="n">setoid</span><span class="bp">.</span><span class="n">symm</span> <span class="n">heq</span><span class="o">)</span> <span class="n">a</span><span class="bp">.</span><span class="n">left</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="err">←</span> <span class="n">v₁</span><span class="bp">.</span><span class="n">val</span><span class="bp">.</span><span class="n">map_one</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="n">v₂</span><span class="bp">.</span><span class="n">val</span><span class="bp">.</span><span class="n">map_one</span> <span class="n">at</span> <span class="n">a</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">r</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">exact</span> <span class="o">(</span><span class="n">heq</span> <span class="n">r</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">mpr</span> <span class="o">(</span><span class="n">a</span><span class="bp">.</span><span class="n">right</span> <span class="n">r</span> <span class="n">h</span><span class="o">)</span> <span class="o">},</span>
<span class="kn">end</span><span class="o">)</span>
</pre></div>


<p>Of course there is still a <code>sorry</code> hidden behind <code>Valuation.is_continuous_of_equiv_is_continuous</code>. But otherwise this stuff seems to be working.</p>

<a name="134970607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134970607" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134970607">Patrick Massot (Oct 01 2018 at 13:38)</a>:</h4>
<p>Is it sufficiently universe polymorphic?</p>

<a name="134970636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134970636" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134970636">Patrick Massot (Oct 01 2018 at 13:39)</a>:</h4>
<p>I have no idea what this question means, but it sounds cool when Mario write it</p>

<a name="134970737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134970737" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134970737">Johan Commelin (Oct 01 2018 at 13:41)</a>:</h4>
<p>Well, <code>Spv R</code> should live in the same universe as <code>R</code>:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Spv</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₁</span><span class="o">)</span> <span class="o">[</span><span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="bp">_</span><span class="n">inst_2</span> <span class="o">:</span> <span class="n">decidable_eq</span> <span class="n">R</span><span class="o">],</span> <span class="kt">Type</span> <span class="n">u₁</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₁</span><span class="o">)</span> <span class="o">[</span><span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="bp">_</span><span class="n">inst_2</span> <span class="o">:</span> <span class="n">decidable_eq</span> <span class="n">R</span><span class="o">],</span>
  <span class="o">{</span><span class="n">ineq</span> <span class="bp">//</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">Valuation</span> <span class="n">R</span><span class="o">),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span> <span class="err">⇑</span><span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="err">⇑</span><span class="n">v</span> <span class="n">s</span> <span class="bp">↔</span> <span class="n">ineq</span> <span class="n">r</span> <span class="n">s</span><span class="o">}</span>
</pre></div>

<a name="134970741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134970741" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134970741">Johan Commelin (Oct 01 2018 at 13:41)</a>:</h4>
<p>And <code>Spa</code> is just a subset</p>

<a name="134974057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134974057" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134974057">Johan Commelin (Oct 01 2018 at 14:31)</a>:</h4>
<p>The question is whether we think this is more readable then the inequalities.</p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">basic_open</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">}</span> <span class="o">(</span><span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">Spv</span><span class="bp">.</span><span class="n">lift</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">v</span> <span class="o">:</span> <span class="n">Valuation</span> <span class="n">A</span><span class="o">,</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v</span> <span class="n">s</span> <span class="bp">∧</span> <span class="n">v</span> <span class="n">s</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span>
<span class="o">(</span><span class="bp">λ</span> <span class="n">v₁</span> <span class="n">v₂</span> <span class="n">heq</span><span class="o">,</span>
<span class="k">begin</span>
  <span class="n">ext</span><span class="o">,</span> <span class="n">split</span><span class="bp">;</span> <span class="n">intro</span><span class="bp">;</span> <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="o">(</span><span class="n">heq</span> <span class="n">r</span> <span class="n">s</span><span class="o">)</span><span class="bp">.</span><span class="n">mp</span> <span class="n">a</span><span class="bp">.</span><span class="n">left</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">Valuation</span><span class="bp">.</span><span class="n">ne_zero_of_equiv_ne_zero</span> <span class="n">heq</span> <span class="n">a</span><span class="bp">.</span><span class="n">right</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="o">(</span><span class="n">heq</span> <span class="n">r</span> <span class="n">s</span><span class="o">)</span><span class="bp">.</span><span class="n">mpr</span> <span class="n">a</span><span class="bp">.</span><span class="n">left</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">Valuation</span><span class="bp">.</span><span class="n">ne_zero_of_equiv_ne_zero</span> <span class="o">(</span><span class="n">setoid</span><span class="bp">.</span><span class="n">symm</span> <span class="n">heq</span><span class="o">)</span> <span class="n">a</span><span class="bp">.</span><span class="n">right</span> <span class="o">}</span>
<span class="kn">end</span><span class="o">)</span>
<span class="err">∘</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">val</span>
</pre></div>


<p>Note the last line. Isn't it ugly <span class="emoji emoji-1f61c" title="stuck out tongue wink">:stuck_out_tongue_wink:</span> ?</p>

<a name="134974090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134974090" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134974090">Johan Commelin (Oct 01 2018 at 14:32)</a>:</h4>
<p>With the inequalities, all these definitions are one-liners. But there is a mathematical disconnect with the code.</p>

<a name="134974162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134974162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134974162">Johan Commelin (Oct 01 2018 at 14:32)</a>:</h4>
<p>With all this <code>Spv.lift</code>, we are actually formalising the maths. But I'm not sure if readability increases...</p>

<a name="134974758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134974758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134974758">Johan Commelin (Oct 01 2018 at 14:40)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I think that all the rewriting I've done so far is probably useful. Now I feel I'm at a fork: either we decide to use the ugly inequalities, or we decide to use the ugly lift. I'dd like to get feedback (from Kevin, but also from others) what the best path is.</p>

<a name="134974817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134974817" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134974817">Johan Commelin (Oct 01 2018 at 14:41)</a>:</h4>
<p>For comparison, this is what we used to have: <a href="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/Spa.lean#L8-L12" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/Spa.lean#L8-L12">https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/Spa.lean#L8-L12</a></p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">Spa</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span><span class="n">vs</span> <span class="o">:</span> <span class="n">Spv</span> <span class="n">A</span> <span class="bp">|</span> <span class="n">Spv</span><span class="bp">.</span><span class="n">is_continuous</span> <span class="n">vs</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">r</span><span class="o">,</span> <span class="n">r</span> <span class="err">∈</span> <span class="n">A</span><span class="err">⁺</span> <span class="bp">→</span> <span class="n">vs</span><span class="bp">.</span><span class="n">val</span> <span class="n">r</span> <span class="mi">1</span><span class="o">}</span>

<span class="c">/-</span><span class="cm">- basic open corresponding to r, s is v : v(r) &lt;= v(s) and v(s) isn&#39;t 0 ( = v(0) ) -/</span>
<span class="kn">definition</span> <span class="n">basic_open</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">}</span> <span class="o">(</span><span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">vs</span> <span class="bp">|</span> <span class="n">vs</span><span class="bp">.</span><span class="n">val</span><span class="bp">.</span><span class="n">val</span> <span class="n">r</span> <span class="n">s</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">vs</span><span class="bp">.</span><span class="n">val</span><span class="bp">.</span><span class="n">val</span> <span class="n">s</span> <span class="mi">0</span><span class="o">}</span>
</pre></div>

<a name="134975154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134975154" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134975154">Johan Commelin (Oct 01 2018 at 14:46)</a>:</h4>
<p>And <a href="https://github.com/jcommelin/lean-perfectoid-spaces/blob/valuations/src/Spa.lean#L11-L43" target="_blank" title="https://github.com/jcommelin/lean-perfectoid-spaces/blob/valuations/src/Spa.lean#L11-L43">https://github.com/jcommelin/lean-perfectoid-spaces/blob/valuations/src/Spa.lean#L11-L43</a> is my branch</p>

<a name="134975244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134975244" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134975244">Kevin Buzzard (Oct 01 2018 at 14:48)</a>:</h4>
<p>One thing I do know is that by the time I wrote <code>basic_open</code> I realised I was very unhappy with the definition, which is simple and readable in Wedhorn and looks awful the way I wrote it. It says <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi><mo>(</mo><mi>r</mi><mo>)</mo><mo>≤</mo><mi>v</mi><mo>(</mo><mi>s</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">v(r)\leq v(s)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mclose">)</span><span class="mrel">≤</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi><mo>(</mo><mi>s</mi><mo>)</mo><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">v(s)&gt;0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathit">s</span><span class="mclose">)</span><span class="mrel">&gt;</span><span class="mord mathrm">0</span></span></span></span>, but what I wrote looks nothing like this.</p>

<a name="134975272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134975272" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134975272">Johan Commelin (Oct 01 2018 at 14:48)</a>:</h4>
<p>But what is your first impression when you see my version?</p>

<a name="134975295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134975295" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134975295">Kevin Buzzard (Oct 01 2018 at 14:49)</a>:</h4>
<p>Regarding lifts -- why not just prove that continuity is constant across equivalence classes first, and then make a beautiful definition?</p>

<a name="134975308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134975308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134975308">Johan Commelin (Oct 01 2018 at 14:49)</a>:</h4>
<p>What would that sorried definition look like?</p>

<a name="134975312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134975312" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134975312">Johan Commelin (Oct 01 2018 at 14:49)</a>:</h4>
<p>I don't think that continuity is the problem</p>

<a name="134975497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134975497" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134975497">Johan Commelin (Oct 01 2018 at 14:53)</a>:</h4>
<p>I have sorried the proof that continuity is constant on equivalence classes. But you still get something ugly. You could factor out the <code>Cont</code>, but then the second condition would remain, and it would require a <code>Spv.lift</code> that is about as long and nasty as what I have now.</p>

<a name="134975510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134975510" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134975510">Johan Commelin (Oct 01 2018 at 14:53)</a>:</h4>
<p>I hope a CS wizard sees some pattern in what we are doing, and knows how to improve it.</p>

<a name="134975588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134975588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134975588">Kevin Buzzard (Oct 01 2018 at 14:54)</a>:</h4>
<p>I think the CS people will never read this stuff until we produce a MWE which is comprehensible</p>

<a name="134975598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134975598" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134975598">Kevin Buzzard (Oct 01 2018 at 14:54)</a>:</h4>
<p>One can abstract away all the maths and get straight to the point</p>

<a name="134975604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134975604" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134975604">Johan Commelin (Oct 01 2018 at 14:55)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> understands what we are up to.</p>

<a name="134975612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134975612" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134975612">Kevin Buzzard (Oct 01 2018 at 14:55)</a>:</h4>
<p>Oh OK. I thought he said he still couldn't run the code.</p>

<a name="134975624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134975624" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134975624">Kevin Buzzard (Oct 01 2018 at 14:55)</a>:</h4>
<p>I am only half paying attention today, I'm busy in Cambridge</p>

<a name="134975692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134975692" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134975692">Kevin Buzzard (Oct 01 2018 at 14:56)</a>:</h4>
<p>I haven't even understood what this <code>Valuation</code> is. Did the v change to a capital for a reason? What I'm saying is that I'm not at all on top of the point of this thread yet.</p>

<a name="134975710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134975710" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134975710">Johan Commelin (Oct 01 2018 at 14:56)</a>:</h4>
<p><code>Valuation</code> bundles <code>valuation</code> with groups in the same universe as <code>R</code>.</p>

<a name="134975726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134975726" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134975726">Johan Commelin (Oct 01 2018 at 14:57)</a>:</h4>
<p>In my experience it makes <code>mk</code> and <code>lift</code> etc easier to work with.</p>

<a name="134975745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134975745" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134975745">Johan Commelin (Oct 01 2018 at 14:57)</a>:</h4>
<p>Even though <code>Spv</code> is still defined via inequalities, instead of using <code>quot</code></p>

<a name="134975828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134975828" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134975828">Johan Commelin (Oct 01 2018 at 14:58)</a>:</h4>
<p>Anyway, I need to be caught by a train. See you later.</p>

<a name="134976338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134976338" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134976338">Mario Carneiro (Oct 01 2018 at 15:06)</a>:</h4>
<p>Those statements aren't in contradiction. I know what you guys are doing, but I still can't run the code</p>

<a name="134976400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134976400" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134976400">Mario Carneiro (Oct 01 2018 at 15:07)</a>:</h4>
<p>As for "sufficiently universe polymorphic", now the goal is to prove the defining equation of <code>basic_open</code>, which BTW will be much easier to read since it won't have that well definedness part in the statement</p>

<a name="134976484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134976484" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134976484">Mario Carneiro (Oct 01 2018 at 15:08)</a>:</h4>
<p>The reason for fussing about minimal valuations is so that you can prove it even when the valuation lives in a universe other than the one over which the quotient is defined</p>

<a name="134976845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134976845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134976845">Kevin Buzzard (Oct 01 2018 at 15:14)</a>:</h4>
<p>I am just going to try and write some minimal working code right now because I have half-forgotten the definitions.</p>

<a name="134979116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134979116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134979116">Kevin Buzzard (Oct 01 2018 at 15:54)</a>:</h4>
<p>Here's what I remember. <span class="user-mention" data-user-id="112680">@Johan Commelin</span> I have written two definitions of <code>Spa</code> corresponding to the way I did it at</p>
<p><a href="https://gist.github.com/kbuzzard/a3ef594410cd184c992e73d06cbad229" target="_blank" title="https://gist.github.com/kbuzzard/a3ef594410cd184c992e73d06cbad229">https://gist.github.com/kbuzzard/a3ef594410cd184c992e73d06cbad229</a></p>
<p>Can you summarise what you're saying?</p>
<p>I am wondering whether Spv is just a waste of time by the way. I'm not sure we ever use it. See my Spa2 which avoids it completely.</p>

<a name="134982114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134982114" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134982114">Johan Commelin (Oct 01 2018 at 16:49)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> We had a working <code>Spa</code> including topology. When you say</p>
<blockquote>
<p>now the goal is to prove the defining equation of basic_open, which BTW will be much easier to read since it won't have that well definedness part in the statement</p>
</blockquote>
<p>Do you mean to prove it in terms of the inequalities?<br>
My objection to that is that it looks very unfamiliar to a mathematician. Let me put it like this: the definition in terms of inequalities is provably equal to the one mathematicians use, but it is not <em>defeq</em>.<br>
Hence I started working on <code>lift</code>, and now we can define these things in the way a mathematician does. But it comes with more proof obligations, and it seems that readability decreases.</p>

<a name="134982465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134982465" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134982465">Mario Carneiro (Oct 01 2018 at 16:56)</a>:</h4>
<p>defeq is impossible here, because the "definition" would have to quantify over all universes</p>

<a name="134982885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134982885" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134982885">Mario Carneiro (Oct 01 2018 at 17:05)</a>:</h4>
<p>In terms of kevin's MWE:</p>
<div class="codehilite"><pre><span></span>def Spa2.mk {R : Type u} {Γ : Type v} [preorder Γ] (v : valuation R Γ) : Spa2 R := sorry

theorem mem_basic_open2 {R : Type u} [has_zero R] (r s : R) {Γ : Type v} [preorder Γ] (v : valuation R Γ) :
  Spa2.mk v ∈ basic_open2 r s ↔ v r ≤ v s ∧ v 0 &lt; v s := sorry
</pre></div>

<a name="134982951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134982951" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134982951">Mario Carneiro (Oct 01 2018 at 17:06)</a>:</h4>
<p>Re: Spv is a waste of time, how much do discontinuous valuations matter for your work? You could just bundle continuity into the properties of a valuation otherwise</p>

<a name="134983081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134983081" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134983081">Johan Commelin (Oct 01 2018 at 17:09)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Of course it is impossible to make those definitions defeq. But we have to choose a definition in the end. So my question to Zulip is: is there a clear preference for one or the other?</p>

<a name="134983089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134983089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134983089">Johan Commelin (Oct 01 2018 at 17:09)</a>:</h4>
<p>Concerning <code>Spv</code>, I think it would also be useful for Zariski-Riemann spaces. But I'm not planning to work on those in the near future.</p>

<a name="134983189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134983189" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134983189">Mario Carneiro (Oct 01 2018 at 17:11)</a>:</h4>
<p>I would have a preference either for the relational version (because it's short and correct), which you could also clean up with some notations probably, or using the <code>quotient.mk ''</code> approach, written out as <code>\ex {Γ : Type v} [preorder Γ] (v : valuation R Γ), Spa.mk v = q /\ facts about v</code></p>

<a name="134983270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134983270" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134983270">Mario Carneiro (Oct 01 2018 at 17:13)</a>:</h4>
<p>Bundling valuations is also an option, but I think that since you don't get to pick the valuation group with this approach, it has little to recommend it over plain relations</p>

<a name="134983390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134983390" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134983390">Mario Carneiro (Oct 01 2018 at 17:15)</a>:</h4>
<p>If I recall correctly the content of <code>minimal_valuation</code> is that for any <code>Spa</code> there is a canonical valuation that represents it</p>

<a name="134983407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134983407" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134983407">Johan Commelin (Oct 01 2018 at 17:15)</a>:</h4>
<p>I think we can even construct a valuation given an <code>ineq</code>.</p>

<a name="134983411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134983411" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134983411">Mario Carneiro (Oct 01 2018 at 17:15)</a>:</h4>
<p>that's what I mean</p>

<a name="134983625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134983625" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134983625">Mario Carneiro (Oct 01 2018 at 17:19)</a>:</h4>
<p>interface is something like this</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Spa2</span><span class="bp">.</span><span class="err">Γ</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">Spa2</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kn">instance</span> <span class="n">Spa2</span><span class="bp">.</span><span class="n">preorder</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">Spa2</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">preorder</span> <span class="n">v</span><span class="bp">.</span><span class="err">Γ</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="n">def</span> <span class="n">Spa2</span><span class="bp">.</span><span class="n">minimal_valuation</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">Spa2</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="n">v</span><span class="bp">.</span><span class="err">Γ</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kn">instance</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">:</span> <span class="n">has_coe_to_fun</span> <span class="o">(</span><span class="n">Spa2</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">⟨_</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">v</span><span class="o">,</span> <span class="n">v</span><span class="bp">.</span><span class="n">minimal_valuation</span><span class="bp">.</span><span class="n">f</span><span class="bp">⟩</span>
</pre></div>

<a name="134983730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134983730" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134983730">Mario Carneiro (Oct 01 2018 at 17:21)</a>:</h4>
<p>then you can just write</p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">basic_open3</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">Spa2</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">vs</span> <span class="bp">|</span> <span class="n">vs</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">vs</span> <span class="n">s</span> <span class="bp">∧</span> <span class="n">vs</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">vs</span> <span class="n">s</span><span class="o">}</span>
</pre></div>

<a name="134984137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984137" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984137">Johan Commelin (Oct 01 2018 at 17:28)</a>:</h4>
<p>What I meant is that I think you can pick everything. The value group would be a subgroup of <code>units (Frac (R/P))</code> where <code>P</code> is the prime ideal <code>{ x | ineq x 0 }</code>. But I should add that I haven't worked out the math details... so maybe I'm wrong.</p>

<a name="134984156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984156">Mario Carneiro (Oct 01 2018 at 17:28)</a>:</h4>
<p>right, kevin did this already</p>

<a name="134984182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984182" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984182">Johan Commelin (Oct 01 2018 at 17:28)</a>:</h4>
<p>So there should be a (computable?) map from <code>Spv</code> to <code>quot Valuation.setoid</code>. And <code>mk</code> goes the other way. This pair is then an equiv.</p>

<a name="134984184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984184" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984184">Mario Carneiro (Oct 01 2018 at 17:28)</a>:</h4>
<p>and that's what would go in for the <code>sorry</code>s above</p>

<a name="134984189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984189" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984189">Johan Commelin (Oct 01 2018 at 17:29)</a>:</h4>
<p>No, Kevin, didn't do that.</p>

<a name="134984207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984207" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984207">Mario Carneiro (Oct 01 2018 at 17:29)</a>:</h4>
<p>(the map is not computable but w/e)</p>

<a name="134984209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984209" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984209">Johan Commelin (Oct 01 2018 at 17:29)</a>:</h4>
<p>Kevin constructed a minimal candidate given a <code>v : valuation</code>, but not starting from <code>ineq</code>.</p>

<a name="134984229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984229" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984229">Mario Carneiro (Oct 01 2018 at 17:30)</a>:</h4>
<p>By definition, that candidate is equivalent to the original valuation</p>

<a name="134984290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984290" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984290">Mario Carneiro (Oct 01 2018 at 17:30)</a>:</h4>
<p>and it only uses facts about the relation</p>

<a name="134984308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984308">Mario Carneiro (Oct 01 2018 at 17:30)</a>:</h4>
<p>Could you link to it?</p>

<a name="134984312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984312" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984312">Johan Commelin (Oct 01 2018 at 17:30)</a>:</h4>
<p>To what?</p>

<a name="134984396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984396">Mario Carneiro (Oct 01 2018 at 17:32)</a>:</h4>
<p><code>minimal_valuation</code></p>

<a name="134984405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984405" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984405">Johan Commelin (Oct 01 2018 at 17:32)</a>:</h4>
<p>What I am saying is that currently <code>lift</code> is <code>noncomputable</code>, but I think we can remove the <code>noncomputable</code>.</p>

<a name="134984407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984407" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984407">Johan Commelin (Oct 01 2018 at 17:32)</a>:</h4>
<p>Ok, I'll look it up.</p>

<a name="134984417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984417" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984417">Johan Commelin (Oct 01 2018 at 17:33)</a>:</h4>
<p><a href="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/valuation_spectrum.lean#L99" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/valuation_spectrum.lean#L99">https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/valuation_spectrum.lean#L99</a></p>

<a name="134984419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984419" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984419">Johan Commelin (Oct 01 2018 at 17:33)</a>:</h4>
<p>That's Kevin's version.</p>

<a name="134984434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984434">Johan Commelin (Oct 01 2018 at 17:33)</a>:</h4>
<p>My current version is the same up to moving stuff around and bundling.</p>

<a name="134984478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984478" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984478">Johan Commelin (Oct 01 2018 at 17:34)</a>:</h4>
<p>What we currently do not have is anything about <code>Frac (R / P)</code></p>

<a name="134984492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984492" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984492">Johan Commelin (Oct 01 2018 at 17:34)</a>:</h4>
<p>But that stuff should certainly be doable. I tried it and ran into trouble with <code>ideal</code> instances, and decided to wait for you module refactor.</p>

<a name="134984694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984694" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984694">Mario Carneiro (Oct 01 2018 at 17:39)</a>:</h4>
<p>In Kevin's definition, the Gamma is <code>quotient (is_group_hom.ker φ)</code> where <code>φ : FG → Γ2 := λ f, finsupp.prod f (λ r n,(φ₀ r) ^ n)</code></p>

<a name="134984706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984706" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984706">Mario Carneiro (Oct 01 2018 at 17:39)</a>:</h4>
<p>is there a way to write that in terms of the <code>ineq</code> generated by the valuation?</p>

<a name="134984791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984791" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984791">Johan Commelin (Oct 01 2018 at 17:40)</a>:</h4>
<p>There is a map from <code>R</code> to <code>with_zero (units (Frac (R/P)))</code>, right?</p>

<a name="134984813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984813">Johan Commelin (Oct 01 2018 at 17:40)</a>:</h4>
<p>You take the subgroup generated by the non-zero elements in the image</p>

<a name="134984830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984830" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984830">Johan Commelin (Oct 01 2018 at 17:41)</a>:</h4>
<p>No universe issues, if I'm not silly again.</p>

<a name="134984834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984834" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984834">Mario Carneiro (Oct 01 2018 at 17:41)</a>:</h4>
<p>Is that what's happening here? It's hard to tell</p>

<a name="134984847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984847">Mario Carneiro (Oct 01 2018 at 17:41)</a>:</h4>
<p>Kevin has the free Z module and an extension to option</p>

<a name="134984893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984893" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984893">Johan Commelin (Oct 01 2018 at 17:42)</a>:</h4>
<p>Right, but the <code>option</code> is just <code>with_zero</code></p>

<a name="134984904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984904" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984904">Johan Commelin (Oct 01 2018 at 17:42)</a>:</h4>
<p>and the free <code>Z</code>-module is for universe lowering.</p>

<a name="134984905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984905">Patrick Massot (Oct 01 2018 at 17:42)</a>:</h4>
<p>yes, this used to be the only option <span class="emoji emoji-1f609" title="wink">:wink:</span></p>

<a name="134984929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984929" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984929">Mario Carneiro (Oct 01 2018 at 17:43)</a>:</h4>
<p>There is no universe lowering needed if you start from the <code>ineq</code></p>

<a name="134984939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984939" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984939">Johan Commelin (Oct 01 2018 at 17:43)</a>:</h4>
<p>Right, that's exactly what I'm saying.</p>

<a name="134984951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134984951" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134984951">Johan Commelin (Oct 01 2018 at 17:43)</a>:</h4>
<p>You do need an API to fraction fields etc</p>

<a name="134985007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985007">Mario Carneiro (Oct 01 2018 at 17:44)</a>:</h4>
<p>What is needed in mathlib's fraction fields?</p>

<a name="134985016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985016" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985016">Mario Carneiro (Oct 01 2018 at 17:44)</a>:</h4>
<p>I think Kenny wrote localizations a while back</p>

<a name="134985022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985022">Johan Commelin (Oct 01 2018 at 17:44)</a>:</h4>
<p>I think most of it is there. I'm just hoping that it works more smoothly after your refactoring</p>

<a name="134985032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985032" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985032">Johan Commelin (Oct 01 2018 at 17:44)</a>:</h4>
<p>Currently all my code gravitates to a lot of <code>@</code>s</p>

<a name="134985034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985034" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985034">Johan Commelin (Oct 01 2018 at 17:44)</a>:</h4>
<p>I don't like that</p>

<a name="134985060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985060" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985060">Patrick Massot (Oct 01 2018 at 17:45)</a>:</h4>
<p>Then stop preventing Mario from working on his module refactoring!</p>

<a name="134985087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985087">Mario Carneiro (Oct 01 2018 at 17:45)</a>:</h4>
<p>it occurs to me that perhaps I should try to avoid letting expectations rise too much on this refactoring</p>

<a name="134985089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985089">Johan Commelin (Oct 01 2018 at 17:45)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> So you are saying we should just go for the <code>ineq</code> statements everywhere, even though that is <em>non-trivially</em> equal to what mathematicians write. Is that correct?</p>

<a name="134985118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985118" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985118">Mario Carneiro (Oct 01 2018 at 17:46)</a>:</h4>
<p>yes</p>

<a name="134985150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985150" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985150">Johan Commelin (Oct 01 2018 at 17:46)</a>:</h4>
<p>Hmmm, I don't like that... but you are probably right.</p>

<a name="134985152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985152" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985152">Mario Carneiro (Oct 01 2018 at 17:46)</a>:</h4>
<p>This is the replacement for using <code>quot.lift</code></p>

<a name="134985167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985167" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985167">Johan Commelin (Oct 01 2018 at 17:46)</a>:</h4>
<p>It also means that we don't need any form of <code>lift</code> anymore</p>

<a name="134985170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985170" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985170">Mario Carneiro (Oct 01 2018 at 17:46)</a>:</h4>
<p>you have to use operations that are manifestly invariant of the choice</p>

<a name="134985302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985302" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985302">Johan Commelin (Oct 01 2018 at 17:48)</a>:</h4>
<p>For example <code>v s \ne 0</code> becomes <code>\not ineq s 0</code>. That the two are equal requires thought. Not much, but it means that every time we have to triple check if we are actually still doing the same as in the "maths world".</p>

<a name="134985499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985499" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985499">Patrick Massot (Oct 01 2018 at 17:51)</a>:</h4>
<p>This sounds bad</p>

<a name="134985610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985610" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985610">Mario Carneiro (Oct 01 2018 at 17:53)</a>:</h4>
<p>You can write the statement as <code>v' s \ne 0</code> where <code>v' : Spa R</code> has a coercion to the minimal valuation</p>

<a name="134985618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985618" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985618">Mario Carneiro (Oct 01 2018 at 17:53)</a>:</h4>
<p>that's what I did above</p>

<a name="134985628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985628" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985628">Johan Commelin (Oct 01 2018 at 17:53)</a>:</h4>
<p>Aah, that's smart! I like that.</p>

<a name="134985630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985630" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985630">Johan Commelin (Oct 01 2018 at 17:53)</a>:</h4>
<p>Where did you do that?</p>

<a name="134985637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985637" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985637">Johan Commelin (Oct 01 2018 at 17:53)</a>:</h4>
<p>I didn't register a <code>coe</code> anywhere</p>

<a name="134985641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985641" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985641">Mario Carneiro (Oct 01 2018 at 17:53)</a>:</h4>
<p><a href="#narrow/stream/116395-maths/subject/Perfectoid.20spaces/near/134983625" title="#narrow/stream/116395-maths/subject/Perfectoid.20spaces/near/134983625">https://leanprover.zulipchat.com/#narrow/stream/116395-maths/subject/Perfectoid.20spaces/near/134983625</a></p>

<a name="134985721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985721" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985721">Johan Commelin (Oct 01 2018 at 17:54)</a>:</h4>
<p>Nice. That is good!</p>

<a name="134985724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985724" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985724">Mario Carneiro (Oct 01 2018 at 17:54)</a>:</h4>
<p>Then you can write theorems (simp lemmas) saying <code>Spa.mk v s = 0 &lt;-&gt;  v s = 0</code> and so on</p>

<a name="134985763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985763" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985763">Mario Carneiro (Oct 01 2018 at 17:55)</a>:</h4>
<p>and these are using the fact that the minimal valuation is equivalent to the generator</p>

<a name="134985783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985783" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985783">Johan Commelin (Oct 01 2018 at 17:55)</a>:</h4>
<p>Right. And that is a non-trivial theorem.</p>

<a name="134985853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985853" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985853">Johan Commelin (Oct 01 2018 at 17:56)</a>:</h4>
<p>So we could already do this now. Even though the <code>minimal_valuation</code> is currently not computable from <code>ineq</code>, right?</p>

<a name="134985928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985928" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985928">Johan Commelin (Oct 01 2018 at 17:57)</a>:</h4>
<p>Also, does the inverse of <code>mk</code> have a canonical name?</p>

<a name="134985988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134985988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134985988">Mario Carneiro (Oct 01 2018 at 17:58)</a>:</h4>
<p>it doesn't usually have an inverse</p>

<a name="134986012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134986012" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134986012">Mario Carneiro (Oct 01 2018 at 17:58)</a>:</h4>
<p>mathlib uses <code>quot.out</code> for a noncomputable inverse</p>

<a name="134986232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134986232" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134986232">Patrick Massot (Oct 01 2018 at 18:01)</a>:</h4>
<p><code>section</code>?</p>

<a name="134986451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134986451" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134986451">Johan Commelin (Oct 01 2018 at 18:04)</a>:</h4>
<p>Ok, and I guess no one will be angry if <code>out</code> turns out to be computable in the end, right?</p>

<a name="134986487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134986487" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134986487">Patrick Massot (Oct 01 2018 at 18:05)</a>:</h4>
<p>If there is no choice...</p>

<a name="134986497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134986497" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134986497">Johan Commelin (Oct 01 2018 at 18:05)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> The computer scientists keep stealing all our favourite keywords and letters....</p>

<a name="134986504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/134986504" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#134986504">Johan Commelin (Oct 01 2018 at 18:05)</a>:</h4>
<p>lambda, section, etc...</p>

<a name="135000526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135000526" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135000526">Kevin Buzzard (Oct 01 2018 at 22:29)</a>:</h4>
<blockquote>
<p>What I meant is that I think you can pick everything. The value group would be a subgroup of <code>units (Frac (R/P))</code> where <code>P</code> is the prime ideal <code>{ x | ineq x 0 }</code>. But I should add that I haven't worked out the math details... so maybe I'm wrong.</p>
</blockquote>
<p>I made the value group a quotient group of the free abelian group on <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> if I remember correctly, and this was because at the time I believe that neither "<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mi mathvariant="normal">/</mi><mi>P</mi></mrow><annotation encoding="application/x-tex">R/P</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.13889em;">P</span></span></span></span> is an ID" nor construction of field of fractions of an ID were in mathlib. I asked Chris explicitly if he'd do them and I believe he did (they might be next to each other somewhere in an algebra file?)</p>

<a name="135000686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135000686" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135000686">Kevin Buzzard (Oct 01 2018 at 22:32)</a>:</h4>
<p>I like the look of this <code>coe</code> trick. Sorry, I've been away all day marketing (telling Coates and Wiles about Lean).</p>

<a name="135000963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135000963" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135000963">Kevin Buzzard (Oct 01 2018 at 22:40)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> and <span class="user-mention" data-user-id="112680">@Johan Commelin</span> thanks a lot both of you for your work on the perfectoid project during this very busy time for me.</p>

<a name="135018113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135018113" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135018113">Patrick Massot (Oct 02 2018 at 07:06)</a>:</h4>
<blockquote>
<p>Sorry, I've been away all day marketing (telling Coates and Wiles about Lean).</p>
</blockquote>
<p>Did you get any interesting reactions?</p>

<a name="135018609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135018609" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135018609">Johan Commelin (Oct 02 2018 at 07:21)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Voila</p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">Spa</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">Spv</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">v</span> <span class="bp">|</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">Valuation</span> <span class="n">A</span><span class="o">)</span><span class="bp">.</span><span class="n">is_continuous</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">r</span><span class="o">,</span> <span class="n">r</span> <span class="err">∈</span> <span class="n">A</span><span class="err">⁺</span> <span class="bp">→</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="mi">1</span><span class="o">}</span>
</pre></div>

<a name="135018652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135018652" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135018652">Johan Commelin (Oct 02 2018 at 07:22)</a>:</h4>
<p>I think that is looking really nice! Kudos to Mario!</p>

<a name="135018667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135018667" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135018667">Johan Commelin (Oct 02 2018 at 07:22)</a>:</h4>
<p>The <code>coe</code> isn't transparent, but maybe that's not a problem.</p>

<a name="135018671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135018671" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135018671">Kevin Buzzard (Oct 02 2018 at 07:22)</a>:</h4>
<p>Coates said I'd be putting everyone out of a job (and whenever anyone makes that comment I tell them that this is exactly my plan). With Wiles I had a technical discussion involving papers we both knew and which had technical flaws in, and how formal proof verification methods were nowhere near being able to help with these issues. But then I argued that it was not impossible that computers would be able to help in the future, perhaps with basic sanity checks or edge cases, and to make this a reality we needed to engage. My case was helped a great deal by Jack Thorne, a young guy who is Cambridge math's newest full professor, being present too, and Thorne randomly announced very early on in the discussion that he followed my blog and found it very interesting. That was basically when I decided I'd go for it.</p>

<a name="135018679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135018679" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135018679">Johan Commelin (Oct 02 2018 at 07:23)</a>:</h4>
<p>Of course this means that we aren't checking independence of <code>v</code>. We are just imposing conditions on a "canonical" representative.</p>

<a name="135018728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135018728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135018728">Johan Commelin (Oct 02 2018 at 07:24)</a>:</h4>
<p>Aah, that's cool!</p>

<a name="135018735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135018735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135018735">Johan Commelin (Oct 02 2018 at 07:24)</a>:</h4>
<p>Did you invite Jack to this Zulip?</p>

<a name="135018740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135018740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135018740">Kevin Buzzard (Oct 02 2018 at 07:24)</a>:</h4>
<blockquote>
<p>I think that is looking really nice! Kudos to Mario!</p>
</blockquote>
<p>And to you sir. That is looking much better. Thanks for thinking about this! I really have my hands full until Thursday. I am hoping to get some Lean done over the weekend.</p>

<a name="135018741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135018741" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135018741">Johan Commelin (Oct 02 2018 at 07:24)</a>:</h4>
<p>No problem.</p>

<a name="135018758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135018758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135018758">Kevin Buzzard (Oct 02 2018 at 07:25)</a>:</h4>
<p>We need that if <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi><mo>⊆</mo><mi>V</mi></mrow><annotation encoding="application/x-tex">U\subseteq V</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10903em;">U</span><span class="mrel">⊆</span><span class="mord mathit" style="margin-right:0.22222em;">V</span></span></span></span> are rational opens then there's a continuous restriction map.</p>

<a name="135018759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135018759" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135018759">Johan Commelin (Oct 02 2018 at 07:25)</a>:</h4>
<p>I am still on the fence about the "well-definedness" thing. Mathematicians almost never mention it. They just keep track when they think it is necessary to mention it.</p>

<a name="135018804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135018804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135018804">Johan Commelin (Oct 02 2018 at 07:26)</a>:</h4>
<p>Somehow checking on a canonical representative comes close enough. And I really don't like interspersing everything with long proofs.</p>

<a name="135018813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135018813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135018813">Johan Commelin (Oct 02 2018 at 07:26)</a>:</h4>
<p>Maybe an <code>auto_param</code> could make <code>obviously</code> take care of those things in the near future. That would be really nice.</p>

<a name="135018824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135018824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135018824">Johan Commelin (Oct 02 2018 at 07:27)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I am going to rewrite the rest of the Spa file with this new setup, and then you can expect another PR.</p>

<a name="135019272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019272" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019272">Mario Carneiro (Oct 02 2018 at 07:38)</a>:</h4>
<p>You should define <code>Spa.is_continuous</code>, as both a way to eliminate the coercion in the middle and also to indicate that this is an invariant property</p>

<a name="135019393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019393">Johan Commelin (Oct 02 2018 at 07:41)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  <a href="https://github.com/kbuzzard/lean-perfectoid-spaces/pull/21" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/pull/21">https://github.com/kbuzzard/lean-perfectoid-spaces/pull/21</a></p>

<a name="135019437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019437" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019437">Johan Commelin (Oct 02 2018 at 07:42)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Yes, we could do that. But then you prove that continuity is an invariant property, but you don't prove this for the other conditions.</p>

<a name="135019444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019444" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019444">Johan Commelin (Oct 02 2018 at 07:42)</a>:</h4>
<p>I think we could indeed rewrite it into <code>v \in (Cont A)</code></p>

<a name="135019519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019519" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019519">Mario Carneiro (Oct 02 2018 at 07:45)</a>:</h4>
<p>I think that all the definitions on Spa should be invariant, since it is morally a quotient, even though your canonical representative means you don't strictly speaking need to be invariant when you don't want to</p>

<a name="135019603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019603">Johan Commelin (Oct 02 2018 at 07:47)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Sure, but should they be invariant because <em>we</em> know they are (a proof exists), or because <em>Lean</em> knows they are?</p>

<a name="135019668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019668">Johan Commelin (Oct 02 2018 at 07:49)</a>:</h4>
<p><a href="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/ba77b91b6108cfa3f6327fb49cd9dbe903452201/src/Spa.lean#L11-L12" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/ba77b91b6108cfa3f6327fb49cd9dbe903452201/src/Spa.lean#L11-L12">https://github.com/kbuzzard/lean-perfectoid-spaces/blob/ba77b91b6108cfa3f6327fb49cd9dbe903452201/src/Spa.lean#L11-L12</a> now says</p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">Spa</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">Spv</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">v</span> <span class="bp">|</span> <span class="o">(</span><span class="n">v</span> <span class="err">∈</span> <span class="n">Cont</span> <span class="n">A</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">r</span><span class="o">,</span> <span class="n">r</span> <span class="err">∈</span> <span class="n">A</span><span class="err">⁺</span> <span class="bp">→</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="mi">1</span><span class="o">}</span>
</pre></div>


<p>That's almost literally what Wedhorn writes! (I'm so happy <span class="emoji emoji-1f606" title="lol">:lol:</span>)</p>

<a name="135019670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019670" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019670">Mario Carneiro (Oct 02 2018 at 07:49)</a>:</h4>
<p>we know they are, and we tell lean</p>

<a name="135019677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019677" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019677">Johan Commelin (Oct 02 2018 at 07:49)</a>:</h4>
<p>Cool</p>

<a name="135019688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019688" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019688">Johan Commelin (Oct 02 2018 at 07:50)</a>:</h4>
<p>Do you have a good suggestion on how to do that, without ruining all our nice readable formulas?</p>

<a name="135019731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019731" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019731">Johan Commelin (Oct 02 2018 at 07:50)</a>:</h4>
<p>I don't really see how.</p>

<a name="135019740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019740">Mario Carneiro (Oct 02 2018 at 07:50)</a>:</h4>
<p>the theorems will look reasonably nice</p>

<a name="135019753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019753" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019753">Mario Carneiro (Oct 02 2018 at 07:51)</a>:</h4>
<p><code>P (Spa.mk v) &lt;-&gt; P' v</code> where <code>P</code> and <code>P'</code> are properties on <code>Spa</code> and <code>valuation</code> respectively</p>

<a name="135019812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019812" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019812">Mario Carneiro (Oct 02 2018 at 07:52)</a>:</h4>
<p>i.e. <code>Spa.mk v ∈ Cont A &lt;-&gt; v.is_continuous</code></p>

<a name="135019850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019850">Johan Commelin (Oct 02 2018 at 07:54)</a>:</h4>
<p>I see. And you just state those theorems. But they don't appear in the definitions of <code>Spa</code> and <code>basic_open</code> etc...</p>

<a name="135019898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019898" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019898">Mario Carneiro (Oct 02 2018 at 07:54)</a>:</h4>
<p>right</p>

<a name="135019904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019904" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019904">Mario Carneiro (Oct 02 2018 at 07:54)</a>:</h4>
<p>you might want to set them up as simp lemmas</p>

<a name="135019907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019907">Johan Commelin (Oct 02 2018 at 07:54)</a>:</h4>
<p>How would you name these?</p>

<a name="135019910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019910" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019910">Johan Commelin (Oct 02 2018 at 07:54)</a>:</h4>
<p><code>Spa.sound</code> and <code>basic_open.sound</code> etc?</p>

<a name="135019916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019916" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019916">Mario Carneiro (Oct 02 2018 at 07:55)</a>:</h4>
<p><code>Spa.mk_mem_Cont</code></p>

<a name="135019928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019928" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019928">Mario Carneiro (Oct 02 2018 at 07:55)</a>:</h4>
<p><code>sound</code> is a specific property of quotients that I don't think has come up yet</p>

<a name="135019934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019934" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019934">Mario Carneiro (Oct 02 2018 at 07:55)</a>:</h4>
<p><code>v \equiv v' -&gt; Spa.mk v = Spa.mk v'</code></p>

<a name="135019976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019976" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019976">Johan Commelin (Oct 02 2018 at 07:56)</a>:</h4>
<p>I see. Should I prove that one?</p>

<a name="135019977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019977" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019977">Johan Commelin (Oct 02 2018 at 07:56)</a>:</h4>
<p>I guess so</p>

<a name="135019980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019980">Mario Carneiro (Oct 02 2018 at 07:56)</a>:</h4>
<p>yes, I don't think it follows from the other stuff</p>

<a name="135019986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019986" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019986">Johan Commelin (Oct 02 2018 at 07:56)</a>:</h4>
<p>How about <code>basic_open.well_defined</code>?</p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">basic_open</span> <span class="o">(</span><span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">v</span> <span class="bp">|</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v</span> <span class="n">s</span> <span class="bp">∧</span> <span class="n">v</span> <span class="n">s</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">}</span>
</pre></div>

<a name="135019988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135019988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135019988">Mario Carneiro (Oct 02 2018 at 07:56)</a>:</h4>
<p>but it's pretty trivial given what you know about the minimal valuation</p>

<a name="135020001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135020001" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135020001">Mario Carneiro (Oct 02 2018 at 07:57)</a>:</h4>
<p><code>Spa.mk v \in basic_open r s &lt;-&gt; v r ≤ v s ∧ v s ≠ 0</code></p>

<a name="135020011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135020011" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135020011">Mario Carneiro (Oct 02 2018 at 07:57)</a>:</h4>
<p>note that the stuff on the right is not the same as what was in the set builder</p>

<a name="135020058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135020058" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135020058">Mario Carneiro (Oct 02 2018 at 07:58)</a>:</h4>
<p>I'd call it <code>mk_mem_basic_open</code></p>

<a name="135020223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135020223" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135020223">Johan Commelin (Oct 02 2018 at 08:02)</a>:</h4>
<p>Ok, I see.</p>

<a name="135022593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135022593" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135022593">Johan Commelin (Oct 02 2018 at 09:01)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Next problem <span class="emoji emoji-1f606" title="lol">:lol:</span> :</p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">basic_open</span> <span class="o">(</span><span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">v</span> <span class="bp">|</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v</span> <span class="n">s</span> <span class="bp">∧</span> <span class="n">v</span> <span class="n">s</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">}</span>

<span class="kn">lemma</span> <span class="n">mk_mem_basic_open</span> <span class="o">{</span><span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">A</span><span class="o">}</span> <span class="o">{</span><span class="n">v</span> <span class="o">:</span> <span class="n">Valuation</span> <span class="n">A</span><span class="o">}</span> <span class="o">:</span> <span class="n">mk</span> <span class="n">v</span> <span class="err">∈</span> <span class="n">basic_open</span> <span class="n">r</span> <span class="n">s</span> <span class="bp">↔</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v</span> <span class="n">s</span> <span class="bp">∧</span> <span class="n">v</span> <span class="n">s</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="135022595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135022595" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135022595">Johan Commelin (Oct 02 2018 at 09:01)</a>:</h4>
<p>It is unhappy about the <code>\in</code>.</p>

<a name="135022643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135022643" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135022643">Johan Commelin (Oct 02 2018 at 09:02)</a>:</h4>
<p>Because <code>mk v</code> lives in <code>Spv A</code> and now <code>Spa A</code> is a subtype of <code>Spv A</code>.</p>

<a name="135022651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135022651" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135022651">Johan Commelin (Oct 02 2018 at 09:02)</a>:</h4>
<p>Should I just create a <code>has_mem (Spv A) (Spa A)</code>?</p>

<a name="135022652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135022652" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135022652">Kenny Lau (Oct 02 2018 at 09:02)</a>:</h4>
<p>you mathematicians always making identifications</p>

<a name="135022668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135022668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135022668">Johan Commelin (Oct 02 2018 at 09:03)</a>:</h4>
<p>Well, it brought us quite far. We're still ahead of the formalisation community...</p>

<a name="135022673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135022673" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135022673">Johan Commelin (Oct 02 2018 at 09:03)</a>:</h4>
<p>I agree we had a couple thousand years head start</p>

<a name="135023984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135023984" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135023984">Johan Commelin (Oct 02 2018 at 09:31)</a>:</h4>
<p>Does this make sense. Or is it evil?</p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">set_Spa_has_mem_Spv</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">}</span> <span class="o">:</span> <span class="n">has_mem</span> <span class="o">(</span><span class="n">Spv</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">set</span> <span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">))</span> <span class="o">:=</span>
<span class="bp">⟨λ</span> <span class="n">v</span> <span class="n">S</span><span class="o">,</span> <span class="n">dite</span> <span class="o">(</span><span class="n">v</span> <span class="err">∈</span> <span class="n">Spa</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="o">(</span><span class="bp">⟨</span><span class="n">v</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span> <span class="o">:</span> <span class="n">Spa</span> <span class="n">A</span><span class="o">)</span> <span class="err">∈</span> <span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="bp">_</span><span class="o">,</span> <span class="n">false</span><span class="o">)</span><span class="bp">⟩</span>
</pre></div>

<a name="135024077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135024077" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135024077">Patrick Massot (Oct 02 2018 at 09:33)</a>:</h4>
<p>why not using the <code>if h : v ∈ Spa A then (⟨v, h⟩ : Spa A) ∈ S else false</code> syntax?</p>

<a name="135024083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135024083" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135024083">Patrick Massot (Oct 02 2018 at 09:33)</a>:</h4>
<p>This is so much easier to read</p>

<a name="135024789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135024789" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135024789">Johan Commelin (Oct 02 2018 at 09:45)</a>:</h4>
<p>You are right. But in the end I think we shouldn't do this anyway. It might be better to just carry the <code>h : v ∈ Spa A</code> around.</p>

<a name="135025390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135025390" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135025390">Johan Commelin (Oct 02 2018 at 09:55)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Ok, I pushed one more commit. I'm really happy about this now.</p>

<a name="135025395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135025395" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135025395">Kevin Buzzard (Oct 02 2018 at 09:55)</a>:</h4>
<p>Thanks for letting me know Johan.</p>

<a name="135025396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135025396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135025396">Kevin Buzzard (Oct 02 2018 at 09:55)</a>:</h4>
<p>And thanks a lot for your work on this.</p>

<a name="135038909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135038909" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135038909">Johan Commelin (Oct 02 2018 at 14:19)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Oops. There was a silly tiny bug left. I opened a new PR. It also deletes the file <code>valuation_universes</code> because that is now merged into the other files.</p>

<a name="135155301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135155301" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135155301">Kevin Buzzard (Oct 04 2018 at 06:45)</a>:</h4>
<blockquote>
<p>Now stop kidding: where is our sheaf theory?</p>
</blockquote>
<p>If module refactoring and completion of rings and integral closure were all done, and I had the time to write some more code myself, my <em>first question</em> would be: "Am I supposed to prove that a projective limit of complete topological rings is a complete topological ring? If so, should I just prove it from first principles? Or am I supposed to be waiting for some sort of category-theoretic knight in shining armour to come and whisk me away, and he'll tell me it's OK because the category of complete topological rings is known to have all limits by some sort of magic?" This is the first question I do not know the answer to.</p>

<a name="135155572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135155572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135155572">Johan Commelin (Oct 04 2018 at 06:53)</a>:</h4>
<p>If the knight in shining armour exists I would definitely suggest waiting for him.</p>

<a name="135155574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135155574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135155574">Patrick Massot (Oct 04 2018 at 06:53)</a>:</h4>
<p>Let's ping him then</p>

<a name="135155575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135155575" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135155575">Patrick Massot (Oct 04 2018 at 06:53)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> ?</p>

<a name="135155578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135155578" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135155578">Johan Commelin (Oct 04 2018 at 06:53)</a>:</h4>
<p>And <span class="user-mention" data-user-id="110032">@Reid Barton</span></p>

<a name="135155580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135155580" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135155580">Patrick Massot (Oct 04 2018 at 06:53)</a>:</h4>
<p>sure</p>

<a name="135155635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135155635" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135155635">Patrick Massot (Oct 04 2018 at 06:54)</a>:</h4>
<p>but that knight might be sleeping</p>

<a name="135155817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135155817" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135155817">Patrick Massot (Oct 04 2018 at 07:00)</a>:</h4>
<p>In the mean, let me say that I wrote <a href="https://gist.github.com/PatrickMassot/7b2576129e7f7b61d328f7fb10d5214d" target="_blank" title="https://gist.github.com/PatrickMassot/7b2576129e7f7b61d328f7fb10d5214d">https://gist.github.com/PatrickMassot/7b2576129e7f7b61d328f7fb10d5214d</a> yesterday night. I still need some cleanup in the general stuff, but mostly it needs to be rewritten multiplicatively put through the <code>to_additive</code> machine, and then see how much this can be reused for rings</p>

<a name="135155875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135155875" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135155875">Patrick Massot (Oct 04 2018 at 07:00)</a>:</h4>
<p>But today I have six math talks to attend</p>

<a name="135155905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135155905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135155905">Johan Commelin (Oct 04 2018 at 07:01)</a>:</h4>
<p>Ouch. Good luck!</p>

<a name="135155953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135155953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135155953">Johan Commelin (Oct 04 2018 at 07:02)</a>:</h4>
<p>And thanks for that gist! Sweet progress</p>

<a name="135155971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135155971" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135155971">Patrick Massot (Oct 04 2018 at 07:03)</a>:</h4>
<p>It's our research group official academic year kick off. All those talks are given by new members (one permanent and many post-docs). It's hard to skip since I'm the new head of the group</p>

<a name="135156017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135156017" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135156017">Johan Commelin (Oct 04 2018 at 07:04)</a>:</h4>
<p>Well, in that case: enjoy!</p>

<a name="135156049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135156049" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135156049">Patrick Massot (Oct 04 2018 at 07:05)</a>:</h4>
<p>Maybe I should ping <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> about that gist: it's not yet push-ready but you can already have a look. My plan is to put everything before groups into <code>continuity.lean</code>, and the end into <code>topological_structure.lean</code></p>

<a name="135156111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135156111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135156111">Patrick Massot (Oct 04 2018 at 07:06)</a>:</h4>
<p>I should also point out something weird: I cannot <code>open quotient_add_group</code> at the beginning of the file, or even one declaration earlier, Lean complains that's an invalid name</p>

<a name="135156126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135156126" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135156126">Patrick Massot (Oct 04 2018 at 07:07)</a>:</h4>
<p><code>lemma quotient_group_saturate</code> would go in <code>quotient_group.lean</code></p>

<a name="135156581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135156581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135156581">Johannes Hölzl (Oct 04 2018 at 07:19)</a>:</h4>
<p>The gist looks good to me. I guess for the <code>is_open_map.prod</code> it would help to express <code>is_open_map</code> in terms of neighborhoods:<br>
<code>∀(a:α) (U ∈(nhd a).sets), f '' U ∈(nhd (f a)).sets</code>.</p>

<a name="135159185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135159185" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135159185">Johan Commelin (Oct 04 2018 at 08:26)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> When Wedhorn says that a ring is <em>adic</em>, this just means that there exists an ideal <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi><mo>⊂</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">I \subset A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mrel">⊂</span><span class="mord mathit">A</span></span></span></span> such that the topology on <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">A</span></span></span></span> is the <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span>-adic topology. Is that right? Maybe it includes the condition that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span> is finitely generated?</p>

<a name="135159205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135159205" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135159205">Johan Commelin (Oct 04 2018 at 08:27)</a>:</h4>
<p>I am looking at Wedhorn's lemma 6.2, and wondering if (i) =&gt; (ii) is <code>rfl</code>.</p>

<a name="135159250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135159250" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135159250">Johan Commelin (Oct 04 2018 at 08:28)</a>:</h4>
<p>In the proof he says that implication is trivial. But you never know if that actually means <code>rfl</code> (-;</p>

<a name="135160986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135160986" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135160986">Kevin Buzzard (Oct 04 2018 at 09:09)</a>:</h4>
<blockquote>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> When Wedhorn says that a ring is <em>adic</em>, this just means that there exists an ideal <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi><mo>⊂</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">I \subset A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mrel">⊂</span><span class="mord mathit">A</span></span></span></span> such that the topology on <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">A</span></span></span></span> is the <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span>-adic topology. Is that right? Maybe it includes the condition that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span> is finitely generated?</p>
</blockquote>
<p>It's definition 5.18 and yes, there appears to be no finitely-generated condition here. But for Huber rings (a.k.a. f-adic rings) there is a finite generation condition.</p>

<a name="135161884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135161884" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135161884">Kevin Buzzard (Oct 04 2018 at 09:28)</a>:</h4>
<blockquote>
<p>If the knight in shining armour exists I would definitely suggest waiting for him.</p>
</blockquote>
<p>I am still unclear about how this is working. Module refactoring, completion of rings, integral closure, I understand exactly what needs to be done and who is doing it. I am in no hurry (although I know Patrick is; I am using module refactoring as an excuse to concentrate on other projects at the minute, e.g. informal documentation for mathematicians which I am actually now writing and which needs to be done because my course started today). But projective limit of complete rings is a complete ring has some content, there is as far as I know not some magic category theory button which proves this. If Scott is intending to actually do this work then great -- but I had not picked up on this as one of his plans. <span class="user-mention" data-user-id="110031">@Patrick Massot</span> is an arbitrary product of complete topological rings complete, and is a closed subring of a complete topological ring complete? That's what we need. This whole completion thread terrifies me. I had no idea it was going to be so subtle. Unlike Patrick I have not engaged with the mathematics involved here at all. My huge summer project is over and I am not yet clear on how much time I will have for Lean this term, but I am hoping that I can contribute more in the near future.</p>

<a name="135165309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135165309" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135165309">Scott Morrison (Oct 04 2018 at 10:43)</a>:</h4>
<p>I have no plan to magically produce projective limits of complete rings for you. :-)</p>

<a name="135165405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135165405" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135165405">Scott Morrison (Oct 04 2018 at 10:45)</a>:</h4>
<p>Hopefully in a PR or two mathlib will have the language to _say_ in a uniform way that something is a limit of some other thing.</p>

<a name="135165458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135165458" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135165458">Scott Morrison (Oct 04 2018 at 10:46)</a>:</h4>
<p>But as far as I'm aware there's no magic to produce that limit in this case. (The limit of rings is trivial, and will be an example, but I'll leave to someone else the case of complete rings.)</p>

<a name="135192953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135192953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135192953">Reid Barton (Oct 04 2018 at 14:36)</a>:</h4>
<p>I think you should prove first that complete topological rings form a reflective subcategory of topological rings. You already need the reflector--this is the completion of a topological ring. Then you also need its universal property: a continuous ring homomorphism from a topological ring A to a complete topological ring B factors uniquely through the completion of A (you might need this anyways as well).</p>

<a name="135192970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135192970" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135192970">Reid Barton (Oct 04 2018 at 14:36)</a>:</h4>
<p>Then, it follows by general nonsense that complete topological rings have the same limits as topological rings, and that case I think is best to just do by hand.</p>

<a name="135199578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135199578" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135199578">Kevin Buzzard (Oct 04 2018 at 16:15)</a>:</h4>
<p>Reid I always enjoy your comments -- they are often very insightful. Yes I'm sure we need universal property of completions. What's happening here is that it's a bit like defining the structure sheaf on an affine scheme. If R is a ring and f in R then we want the structure sheaf on the D(f) of Spec(R) (the points where f doesn't vanish) to be R[1/f], and then we extend to all opens using that D(f) form a basis and we constantly need universal property of localisation. Here it's a very similar story, we're defining a presheaf on Spa(A) which is some modification of Spec(A) for A a topological ring, there are "special" open sets for which the structure presheaf is "localise and then complete", and then for general open sets it's "take limits", but to define all the morphisms you constantly have to use universal property of localisation and then universal property of completion. I didn't know enough of this abstract nonsense to know that the notion of a reflective subcategory could help.</p>

<a name="135201442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135201442" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135201442">Patrick Massot (Oct 04 2018 at 16:49)</a>:</h4>
<p>I'm back. Of course we (almost) have that "reflector". I didn't know the terminology, but this is what we have been very slowly building since July, and indeed this is not formal. The question is: can we plug this into the category theory repository stuff to get the formal consequences for free</p>

<a name="135201580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135201580" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135201580">Patrick Massot (Oct 04 2018 at 16:51)</a>:</h4>
<blockquote>
<p>Hopefully in a PR or two mathlib will have the language to _say_ in a uniform way that something is a limit of some other thing.</p>
</blockquote>
<p>Can we already have your repo as a dependency and use that?</p>

<a name="135203616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135203616" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135203616">Patrick Massot (Oct 04 2018 at 17:24)</a>:</h4>
<blockquote>
<p>The gist looks good to me. I guess for the <code>is_open_map.prod</code> it would help to express <code>is_open_map</code> in terms of neighborhoods:<br>
<code>∀(a:α) (U ∈(nhd a).sets), f '' U ∈(nhd (f a)).sets</code>.</p>
</blockquote>
<p>Using that reformulation leads to the proof:</p>
<div class="codehilite"><pre><span></span>  <span class="n">rw</span> <span class="n">is_open_map_iff_nhds</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
  <span class="n">rintro</span> <span class="bp">⟨</span><span class="n">a</span><span class="o">,</span> <span class="n">c</span><span class="bp">⟩</span> <span class="n">U</span> <span class="n">U_nhd</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">nhds_prod_eq</span><span class="o">,</span> <span class="n">filter</span><span class="bp">.</span><span class="n">mem_prod_iff</span><span class="o">]</span> <span class="n">at</span> <span class="n">U_nhd</span><span class="o">,</span>
  <span class="n">rcases</span> <span class="n">U_nhd</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">s</span><span class="o">,</span> <span class="n">s_in</span><span class="o">,</span> <span class="n">t</span><span class="o">,</span> <span class="n">t_in</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">filter</span><span class="bp">.</span><span class="n">sets_of_superset</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">image_subset</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">×</span> <span class="n">γ</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">p</span><span class="bp">.</span><span class="n">fst</span><span class="o">),</span> <span class="n">g</span> <span class="o">(</span><span class="n">p</span><span class="bp">.</span><span class="n">snd</span><span class="o">)))</span> <span class="n">h</span><span class="o">),</span>
  <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">prod_image_image_eq</span><span class="o">,</span> <span class="n">nhds_prod_eq</span><span class="o">],</span>
  <span class="n">exact</span> <span class="n">filter</span><span class="bp">.</span><span class="n">prod_mem_prod</span> <span class="o">(</span><span class="n">hf</span> <span class="n">a</span> <span class="n">s</span> <span class="n">s_in</span><span class="o">)</span> <span class="o">(</span><span class="n">hg</span> <span class="n">c</span> <span class="n">t</span> <span class="n">t_in</span><span class="o">)</span>
</pre></div>


<p>I'm not sure if it's really an improvement</p>

<a name="135203631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135203631" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135203631">Patrick Massot (Oct 04 2018 at 17:25)</a>:</h4>
<p>It's shorter but less natural for the average mathematician</p>

<a name="135204356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135204356" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135204356">Patrick Massot (Oct 04 2018 at 17:37)</a>:</h4>
<p>And I proved your lemma:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">is_open_map_iff_nhds</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_open_map</span> <span class="n">f</span> <span class="bp">↔</span> <span class="bp">∀</span><span class="o">(</span><span class="n">a</span><span class="o">:</span><span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">U</span> <span class="err">∈</span><span class="o">(</span><span class="n">nhds</span> <span class="n">a</span><span class="o">)</span><span class="bp">.</span><span class="n">sets</span><span class="o">),</span> <span class="n">f</span> <span class="err">&#39;&#39;</span> <span class="n">U</span> <span class="err">∈</span><span class="o">(</span><span class="n">nhds</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">))</span><span class="bp">.</span><span class="n">sets</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">H</span> <span class="n">a</span> <span class="n">U</span> <span class="n">U_nhd</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">mem_nhds_sets_iff</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">U_nhd</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">s</span><span class="o">,</span> <span class="n">s_sub</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">s_op</span><span class="o">,</span> <span class="n">a_in_s</span><span class="bp">⟩⟩</span><span class="o">,</span>
    <span class="n">existsi</span> <span class="o">[</span><span class="n">f</span> <span class="err">&#39;&#39;</span> <span class="n">s</span><span class="o">,</span> <span class="n">image_subset</span> <span class="bp">_</span> <span class="n">s_sub</span><span class="o">],</span>
    <span class="n">exact</span> <span class="bp">⟨</span><span class="n">H</span> <span class="n">s</span> <span class="n">s_op</span><span class="o">,</span> <span class="n">mem_image_of_mem</span> <span class="bp">_</span> <span class="n">a_in_s</span><span class="bp">⟩</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">H</span> <span class="n">U</span> <span class="n">U_op</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">is_open_iff_mem_nhds</span><span class="o">,</span>
    <span class="n">rintros</span> <span class="n">b</span> <span class="bp">⟨</span><span class="n">a</span><span class="o">,</span> <span class="n">a_in</span><span class="o">,</span> <span class="n">fa</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span><span class="n">fa</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">H</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">mem_nhds_sets</span> <span class="n">U_op</span> <span class="n">a_in</span><span class="o">)</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>

<a name="135204389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135204389" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135204389">Patrick Massot (Oct 04 2018 at 17:37)</a>:</h4>
<p>Ten minutes to Lean this, without writing a proof on paper first. I may end up comfortable with this filter non-sense!</p>

<a name="135206249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135206249" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135206249">Johannes Hölzl (Oct 04 2018 at 18:04)</a>:</h4>
<p>Hm, I was a little bit off with my nhds version of <code>is_open_map</code>. It can expressed directly using <code>filter.map</code>:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">is_open_map_iff_nhds_le</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_open_map</span> <span class="n">f</span> <span class="bp">↔</span> <span class="bp">∀</span><span class="o">(</span><span class="n">a</span><span class="o">:</span><span class="n">α</span><span class="o">),</span> <span class="n">nhds</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">nhds</span> <span class="n">a</span><span class="o">)</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">is_open_map_iff_nhds</span><span class="o">],</span>
  <span class="n">refine</span> <span class="n">forall_congr</span> <span class="o">(</span><span class="k">assume</span> <span class="n">a</span><span class="o">,</span> <span class="bp">_</span><span class="o">),</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="n">exact</span> <span class="k">assume</span> <span class="n">h</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span> <span class="k">let</span> <span class="bp">⟨</span><span class="n">t</span><span class="o">,</span> <span class="n">ht</span><span class="o">,</span> <span class="n">hts</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">filter</span><span class="bp">.</span><span class="n">mem_map_sets_iff</span><span class="bp">.</span><span class="mi">1</span> <span class="n">hs</span> <span class="k">in</span>
    <span class="n">filter</span><span class="bp">.</span><span class="n">mem_sets_of_superset</span> <span class="o">(</span><span class="n">h</span> <span class="n">t</span> <span class="n">ht</span><span class="o">)</span> <span class="n">hts</span><span class="o">,</span>
  <span class="n">exact</span> <span class="k">assume</span> <span class="n">h</span> <span class="n">u</span> <span class="n">hu</span><span class="o">,</span> <span class="n">h</span> <span class="o">(</span><span class="n">filter</span><span class="bp">.</span><span class="n">image_mem_map</span> <span class="n">hu</span><span class="o">)</span>
<span class="kn">end</span>

<span class="kn">protected</span> <span class="kn">lemma</span> <span class="n">prod</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">δ</span><span class="o">}</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">is_open_map</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">hg</span> <span class="o">:</span> <span class="n">is_open_map</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">is_open_map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">p</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">×</span> <span class="n">γ</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="n">p</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">g</span> <span class="n">p</span><span class="bp">.</span><span class="mi">2</span><span class="o">))</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">is_open_map_iff_nhds_le</span><span class="o">],</span>
  <span class="n">rintros</span> <span class="bp">⟨</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">nhds_prod_eq</span><span class="o">,</span> <span class="n">nhds_prod_eq</span><span class="o">,</span> <span class="err">←</span> <span class="n">filter</span><span class="bp">.</span><span class="n">prod_map_map_eq</span><span class="o">],</span>
  <span class="n">exact</span> <span class="n">filter</span><span class="bp">.</span><span class="n">prod_mono</span> <span class="o">((</span><span class="n">is_open_map_iff_nhds_le</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="n">hf</span> <span class="n">a</span><span class="o">)</span> <span class="o">((</span><span class="n">is_open_map_iff_nhds_le</span> <span class="n">g</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="n">hg</span> <span class="n">b</span><span class="o">)</span>
<span class="kn">end</span>
</pre></div>

<a name="135206477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135206477" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135206477">Johannes Hölzl (Oct 04 2018 at 18:07)</a>:</h4>
<p>I think this is similar to you wanting to write <code>is_ideal</code> using sets and functions, instead of points. Its the same with filters!<br>
Many things can be nicely expressed using <code>map</code> or <code>comap</code> and <code>&lt;=</code>. Using this operators we don't need to handle points (i.e. sets)</p>

<a name="135211096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135211096" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135211096">Patrick Massot (Oct 04 2018 at 19:34)</a>:</h4>
<p>I've been betrayed! I copied you statement without thinking. But of course this is consistent with how the open set definition relates to the continuity definition</p>

<a name="135211104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135211104" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135211104">Patrick Massot (Oct 04 2018 at 19:34)</a>:</h4>
<p>Of course I also prefer set-free filter reasoning</p>

<a name="135211133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135211133" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135211133">Patrick Massot (Oct 04 2018 at 19:35)</a>:</h4>
<p>Oh, I could tfae it!</p>

<a name="135213439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135213439" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135213439">Johan Commelin (Oct 04 2018 at 20:12)</a>:</h4>
<blockquote>
<blockquote>
<p>Hopefully in a PR or two mathlib will have the language to _say_ in a uniform way that something is a limit of some other thing.</p>
</blockquote>
<p>Can we already have your repo as a dependency and use that?</p>
</blockquote>
<p>It is already a dependency since a week or so.</p>

<a name="135213464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135213464" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135213464">Patrick Massot (Oct 04 2018 at 20:13)</a>:</h4>
<p>I understand, but is it actually usable for us, or half incompatible with what is in mathlib?</p>

<a name="135213590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135213590" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135213590">Johan Commelin (Oct 04 2018 at 20:14)</a>:</h4>
<p>I think the stuff on limits should be mostly compatible with what is in mathlib. But I don't know for sure.</p>

<a name="135213619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135213619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135213619">Patrick Massot (Oct 04 2018 at 20:14)</a>:</h4>
<p>Do you know how to state that the category of topological rings has projective limits?</p>

<a name="135213662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135213662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135213662">Johan Commelin (Oct 04 2018 at 20:15)</a>:</h4>
<p>Well, we would first need a category of topological rings.</p>

<a name="135213751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135213751" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135213751">Johan Commelin (Oct 04 2018 at 20:16)</a>:</h4>
<blockquote>
<p>It looks like <code>TopRing.lean</code> itself compiles fine :-)</p>
</blockquote>
<p>Aah, Scott already wrote that.</p>

<a name="135213793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135213793" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135213793">Patrick Massot (Oct 04 2018 at 20:18)</a>:</h4>
<p>I'm always confused about Scott's repositories because I was never able to find the pieces of sheaf theory that he showed us in Orsay</p>

<a name="135213850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135213850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135213850">Johan Commelin (Oct 04 2018 at 20:18)</a>:</h4>
<p>And then we would need to use: <a href="https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/limits/limits.lean#L82" target="_blank" title="https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/limits/limits.lean#L82">https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/limits/limits.lean#L82</a></p>

<a name="135213945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135213945" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135213945">Johan Commelin (Oct 04 2018 at 20:20)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> Do you mean things like this: <a href="https://github.com/semorrison/lean-category-theory/blob/6c2a7b340f19bf0da3f1904204791c343d5c3213/src/category_theory/sheaves.lean#L32" target="_blank" title="https://github.com/semorrison/lean-category-theory/blob/6c2a7b340f19bf0da3f1904204791c343d5c3213/src/category_theory/sheaves.lean#L32">https://github.com/semorrison/lean-category-theory/blob/6c2a7b340f19bf0da3f1904204791c343d5c3213/src/category_theory/sheaves.lean#L32</a></p>

<a name="135213983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135213983" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135213983">Patrick Massot (Oct 04 2018 at 20:20)</a>:</h4>
<p>Oh I was looking in the presheaf file!</p>

<a name="135214001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135214001" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135214001">Patrick Massot (Oct 04 2018 at 20:21)</a>:</h4>
<p>while are stalks in sheaves and not presheaves?</p>

<a name="135214015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135214015" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135214015">Patrick Massot (Oct 04 2018 at 20:21)</a>:</h4>
<p><a href="https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/examples/rings/universal.lean#L43" target="_blank" title="https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/examples/rings/universal.lean#L43">https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/examples/rings/universal.lean#L43</a> is sorried <span class="emoji emoji-2639" title="sad">:sad:</span></p>

<a name="135214106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135214106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135214106">Johan Commelin (Oct 04 2018 at 20:23)</a>:</h4>
<p>Right. But colimits are quite a bit harder... you need tensor products.</p>

<a name="135214116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135214116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135214116">Johan Commelin (Oct 04 2018 at 20:23)</a>:</h4>
<p>I know we have those. But you still need to use them</p>

<a name="135214118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135214118" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135214118">Johan Commelin (Oct 04 2018 at 20:23)</a>:</h4>
<p>It's not as formal as limits.</p>

<a name="135214134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135214134" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135214134">Patrick Massot (Oct 04 2018 at 20:23)</a>:</h4>
<p>but stalk is a colimit, right?</p>

<a name="135214139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135214139" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135214139">Johan Commelin (Oct 04 2018 at 20:23)</a>:</h4>
<p>Aaah, sure, it is</p>

<a name="135214184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135214184" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135214184">Johan Commelin (Oct 04 2018 at 20:24)</a>:</h4>
<p>So you mean we don't have stalks</p>

<a name="135214198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135214198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135214198">Johan Commelin (Oct 04 2018 at 20:24)</a>:</h4>
<p>Hmm... work to do (-;</p>

<a name="135215398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135215398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135215398">Patrick Massot (Oct 04 2018 at 20:47)</a>:</h4>
<blockquote>
<p>Oh, I could tfae it!</p>
</blockquote>
<p>Doesn't work:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">is_open_map_iff</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">tfae</span> <span class="o">[</span><span class="n">is_open_map</span> <span class="n">f</span><span class="o">,</span>
  <span class="bp">∀</span><span class="o">(</span><span class="n">a</span><span class="o">:</span><span class="n">α</span><span class="o">),</span> <span class="n">nhds</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">nhds</span> <span class="n">a</span><span class="o">)</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span><span class="o">,</span> <span class="bp">∀</span><span class="o">(</span><span class="n">a</span><span class="o">:</span><span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">U</span> <span class="err">∈</span><span class="o">(</span><span class="n">nhds</span> <span class="n">a</span><span class="o">)</span><span class="bp">.</span><span class="n">sets</span><span class="o">),</span> <span class="n">f</span> <span class="err">&#39;&#39;</span> <span class="n">U</span> <span class="err">∈</span><span class="o">(</span><span class="n">nhds</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">))</span><span class="bp">.</span><span class="n">sets</span><span class="o">]</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">tfae_have</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">→</span> <span class="mi">3</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">H</span> <span class="n">a</span> <span class="n">U</span> <span class="n">U_nhd</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">mem_nhds_sets_iff</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">U_nhd</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">s</span><span class="o">,</span> <span class="n">s_sub</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">s_op</span><span class="o">,</span> <span class="n">a_in_s</span><span class="bp">⟩⟩</span><span class="o">,</span>
    <span class="n">existsi</span> <span class="o">[</span><span class="n">f</span> <span class="err">&#39;&#39;</span> <span class="n">s</span><span class="o">,</span> <span class="n">image_subset</span> <span class="bp">_</span> <span class="n">s_sub</span><span class="o">],</span>
    <span class="n">exact</span> <span class="bp">⟨</span><span class="n">H</span> <span class="n">s</span> <span class="n">s_op</span><span class="o">,</span> <span class="n">mem_image_of_mem</span> <span class="bp">_</span> <span class="n">a_in_s</span><span class="bp">⟩</span> <span class="o">},</span>
  <span class="n">tfae_have</span> <span class="o">:</span> <span class="mi">3</span> <span class="bp">→</span> <span class="mi">1</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">H</span> <span class="n">U</span> <span class="n">U_op</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">is_open_iff_mem_nhds</span><span class="o">,</span>
    <span class="n">rintros</span> <span class="n">b</span> <span class="bp">⟨</span><span class="n">a</span><span class="o">,</span> <span class="n">a_in</span><span class="o">,</span> <span class="n">fa</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span><span class="n">fa</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">H</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">mem_nhds_sets</span> <span class="n">U_op</span> <span class="n">a_in</span><span class="o">)</span> <span class="o">},</span>
   <span class="n">tfae_have</span> <span class="o">:</span> <span class="mi">3</span> <span class="bp">↔</span> <span class="mi">2</span><span class="o">,</span>
   <span class="o">{</span> <span class="n">refine</span> <span class="n">forall_congr</span> <span class="o">(</span><span class="k">assume</span> <span class="n">a</span><span class="o">,</span> <span class="bp">_</span><span class="o">),</span>
     <span class="n">split</span><span class="o">,</span>
     <span class="n">exact</span> <span class="k">assume</span> <span class="n">h</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span> <span class="k">let</span> <span class="bp">⟨</span><span class="n">t</span><span class="o">,</span> <span class="n">ht</span><span class="o">,</span> <span class="n">hts</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">filter</span><span class="bp">.</span><span class="n">mem_map_sets_iff</span><span class="bp">.</span><span class="mi">1</span> <span class="n">hs</span> <span class="k">in</span>
       <span class="n">filter</span><span class="bp">.</span><span class="n">mem_sets_of_superset</span> <span class="o">(</span><span class="n">h</span> <span class="n">t</span> <span class="n">ht</span><span class="o">)</span> <span class="n">hts</span><span class="o">,</span>
     <span class="n">exact</span> <span class="k">assume</span> <span class="n">h</span> <span class="n">u</span> <span class="n">hu</span><span class="o">,</span> <span class="n">h</span> <span class="o">(</span><span class="n">filter</span><span class="bp">.</span><span class="n">image_mem_map</span> <span class="n">hu</span><span class="o">)</span> <span class="o">},</span>
   <span class="n">tfae_finish</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>The <code>tfae_finish</code> errors like:</p>
<div class="codehilite"><pre><span></span>α : Type u_1,
_inst_1 : topological_space α,
β : Type u_2,
_inst_2 : topological_space β,
f : α → β,
tfae_1_to_3 : is_open_map f → ∀ (a : α) (U : set α), U ∈ (nhds a).sets → f &#39;&#39; U ∈ (nhds (f a)).sets,
tfae_3_to_1 : (∀ (a : α) (U : set α), U ∈ (nhds a).sets → f &#39;&#39; U ∈ (nhds (f a)).sets) → is_open_map f,
tfae_3_iff_2 :
  (∀ (a : α) (U : set α), U ∈ (nhds a).sets → f &#39;&#39; U ∈ (nhds (f a)).sets) ↔
    ∀ (a : α), nhds (f a) ≤ filter.map f (nhds a)
⊢ tfae  [is_open_map f, ∀ (a : α), nhds (f a) ≤ filter.map f (nhds a), ∀ (a : α) (U : set α), U ∈ (nhds a).sets → f &#39;&#39; U ∈ (nhds (f a)).sets]

exact tactic failed, type mismatch, given expression has type
  (∀ (a : α), nhds (f a) ≤ filter.map f (nhds a)) ↔ ∀ (a : α), nhds (f a) ≤ filter.map f (nhds a)
but is expected to have type
  (∀ (a : α), nhds (f a) ≤ filter.map f (nhds a)) ↔ is_open_map f
</pre></div>

<a name="135215405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135215405" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135215405">Patrick Massot (Oct 04 2018 at 20:47)</a>:</h4>
<p>time to sleep</p>

<a name="135229951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135229951" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135229951">Johan Commelin (Oct 05 2018 at 02:35)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span>  <span class="emoji emoji-2b06" title="up">:up:</span> Do you know what we did wrong? I succesfully used <code>tfae</code> in another example today.</p>

<a name="135235526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135235526" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135235526">Simon Hudon (Oct 05 2018 at 05:37)</a>:</h4>
<p>What do I need to import for that example?</p>

<a name="135235777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135235777" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135235777">Johan Commelin (Oct 05 2018 at 05:44)</a>:</h4>
<p>4 entire projects? <span class="emoji emoji-1f606" title="lol">:lol:</span></p>

<a name="135235788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135235788" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135235788">Johan Commelin (Oct 05 2018 at 05:45)</a>:</h4>
<p>Lol, just kidding.</p>

<a name="135235789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135235789" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135235789">Johan Commelin (Oct 05 2018 at 05:45)</a>:</h4>
<p>This doesn't depend on the perfectoid project in any way.</p>

<a name="135235843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135235843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135235843">Johan Commelin (Oct 05 2018 at 05:46)</a>:</h4>
<p>I guess <code>analysis/topology/embedding.lean</code> or something. I don't really know. You need to get <code>is_open</code>.</p>

<a name="135235845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135235845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135235845">Johan Commelin (Oct 05 2018 at 05:46)</a>:</h4>
<p>So you will need some topological files.</p>

<a name="135237511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135237511" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135237511">Johan Commelin (Oct 05 2018 at 06:41)</a>:</h4>
<p>The proof of 6.1 and 6.2 in Wedhorn is one big mess.</p>

<a name="135237798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135237798" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135237798">Patrick Massot (Oct 05 2018 at 06:50)</a>:</h4>
<p>Do we need those?</p>

<a name="135237824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135237824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135237824">Patrick Massot (Oct 05 2018 at 06:51)</a>:</h4>
<p>If the proof is really messy, you will probably be faster if you fist LaTeX a precise organized proof, and then Lean it</p>

<a name="135237871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135237871" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135237871">Johan Commelin (Oct 05 2018 at 06:52)</a>:</h4>
<p>Right. I don't know exactly if we need them.</p>

<a name="135237873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135237873" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135237873">Johan Commelin (Oct 05 2018 at 06:52)</a>:</h4>
<p>I thought they belonged to the api of Huber and Tate rings</p>

<a name="135237884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135237884" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135237884">Johan Commelin (Oct 05 2018 at 06:53)</a>:</h4>
<p>I'll dig in a bit deeper.</p>

<a name="135237935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135237935" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135237935">Patrick Massot (Oct 05 2018 at 06:54)</a>:</h4>
<p>What is this Remark 6.3? Does it mean all top rings we actually care about are metrizable?</p>

<a name="135238026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135238026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135238026">Johan Commelin (Oct 05 2018 at 06:57)</a>:</h4>
<p>Yes, I think so</p>

<a name="135238030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135238030" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135238030">Johan Commelin (Oct 05 2018 at 06:57)</a>:</h4>
<p>Is that good or bad news?</p>

<a name="135238239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135238239" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135238239">Johan Commelin (Oct 05 2018 at 07:02)</a>:</h4>
<p>Is this actually ok?</p>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">perfectoid_space</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">adic_space</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">perfectoid_cover</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">)</span> <span class="o">[</span><span class="n">perfectoid_ring</span> <span class="n">A</span><span class="o">],</span>
  <span class="o">(</span><span class="n">x</span> <span class="err">∈</span> <span class="n">U</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">is_preadic_space_equiv</span> <span class="n">U</span> <span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">))</span>
</pre></div>


<p>We ask for a <code>A : Huber_pair</code> to exist, and then also for the structure <code>perfectoid_ring A</code>. But we don't ask for any sort of compatibility between those...</p>

<a name="135238703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135238703" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135238703">Patrick Massot (Oct 05 2018 at 07:14)</a>:</h4>
<p>sounds very fishy. It looks like the issue discussed about Hilbert spaces last summer</p>

<a name="135238893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135238893" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135238893">Johan Commelin (Oct 05 2018 at 07:19)</a>:</h4>
<p>Also, in</p>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm">- A perfectoid ring, following Fontaine Sem Bourb-/</span>
<span class="n">class</span> <span class="n">perfectoid_ring</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">Tate_ring</span> <span class="n">R</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">complete</span> <span class="o">:</span> <span class="n">is_complete</span> <span class="n">R</span><span class="o">)</span>
<span class="o">(</span><span class="n">uniform</span>  <span class="o">:</span> <span class="n">is_uniform</span> <span class="n">R</span><span class="o">)</span>
<span class="o">(</span><span class="n">ramified</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">ϖ</span> <span class="o">:</span> <span class="n">units</span> <span class="n">R</span><span class="o">,</span> <span class="o">(</span><span class="n">is_pseudo_uniformizer</span> <span class="n">ϖ</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">((</span><span class="n">ϖ</span><span class="err">^</span><span class="n">p</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="err">∣</span> <span class="n">p</span><span class="o">))</span>
<span class="o">(</span><span class="n">Frob</span>     <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="err">ᵒ</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span><span class="err">ᵒ</span><span class="o">,</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="err">∣</span> <span class="o">(</span><span class="n">b</span><span class="err">^</span><span class="n">p</span> <span class="bp">-</span> <span class="n">a</span><span class="o">))</span>
</pre></div>


<p>I think we want the <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ϖ</mi></mrow><annotation encoding="application/x-tex">\varpi</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.02778em;">ϖ</span></span></span></span> not to just exist, but to actually be the one that comes with the <code>Tate_ring</code> structure.</p>

<a name="135239028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135239028" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135239028">Patrick Massot (Oct 05 2018 at 07:22)</a>:</h4>
<p>I can hear Assia laughting...</p>

<a name="135239040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135239040" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135239040">Johan Commelin (Oct 05 2018 at 07:23)</a>:</h4>
<p>Hmmm... I'm not sure if top-down vs bottom-up is at issue here. Although it is certainly related.</p>

<a name="135239044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135239044" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135239044">Johan Commelin (Oct 05 2018 at 07:23)</a>:</h4>
<p>The issue seems to be that we don't have examples.</p>

<a name="135239049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135239049" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135239049">Johan Commelin (Oct 05 2018 at 07:23)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> Where are our algebraic closures?!!!</p>

<a name="135239050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135239050" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135239050">Patrick Massot (Oct 05 2018 at 07:23)</a>:</h4>
<p>Yes, that's what she predicted</p>

<a name="135239051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135239051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135239051">Johan Commelin (Oct 05 2018 at 07:24)</a>:</h4>
<p>(Kidding)</p>

<a name="135239093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135239093" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135239093">Kenny Lau (Oct 05 2018 at 07:24)</a>:</h4>
<p>somewhere... over the rainbow</p>

<a name="135239164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135239164" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135239164">Patrick Massot (Oct 05 2018 at 07:26)</a>:</h4>
<p><a href="#narrow/stream/113488-general/subject/stacks.20project.20.2F.20schemes/near/123090992" title="#narrow/stream/113488-general/subject/stacks.20project.20.2F.20schemes/near/123090992">https://leanprover.zulipchat.com/#narrow/stream/113488-general/subject/stacks.20project.20.2F.20schemes/near/123090992</a></p>

<a name="135239378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135239378" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135239378">Johan Commelin (Oct 05 2018 at 07:32)</a>:</h4>
<p>Thanks for that link <span class="user-mention" data-user-id="110031">@Patrick Massot</span>. It was from the time where I hadn't really started using Lean yet. I think Assia's comment is extremely valuable.</p>

<a name="135243624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135243624" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135243624">Kevin Buzzard (Oct 05 2018 at 09:13)</a>:</h4>
<p>I am writing a blog post with an update on the perfectoid project and related things. I was not going to mention modules at all, I was going to focus on the issues which the "completion of a topological ring" API has run into. I don't think that mathematicians even understand that these issues are there. This whole thing has been very eye-opening.</p>

<a name="135243700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135243700" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135243700">Kevin Buzzard (Oct 05 2018 at 09:15)</a>:</h4>
<p>On writing it I realise that I am interested in the question of whether we have the predicate <code>is_complete R</code> for <code>R</code> a commutative topological ring.</p>

<a name="135243818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135243818" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135243818">Kevin Buzzard (Oct 05 2018 at 09:18)</a>:</h4>
<p>I have been reluctant to embark upon definition of the presheaf on Spa(A) because (a) I was super-busy, as yesterday was lecture 1 of my course and meeting 1 of Xena and (b) I knew that after this unexpected (to me -- probably not to Johannes!) hold-up regarding completions of top rings it would mean that I would have to sorry stuff when doing the last part, and I have this vague idea that sorrying stuff is bad.</p>

<a name="135244014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135244014" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135244014">Kevin Buzzard (Oct 05 2018 at 09:23)</a>:</h4>
<p>I have this vague idea that to prove the thing I need (the universal property for projective limits in the category of complete topological rings) I would probably need what Patrick is doing. But now I am realising that if you think about the notion of being complete (for a topological ring) as just being some typeclass <code>is_complete</code> then I think the third thing can be thought of as an <code>instance</code>, and now I realise that I am a little unclear about whether I could just attempt to write this instance in a completely sorry-free way if I just had the definition of the predicate <code>is_complete R</code> for <code>R</code> a topological ring.</p>

<a name="135244065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135244065" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135244065">Kevin Buzzard (Oct 05 2018 at 09:24)</a>:</h4>
<p>Should predicates like <code>is_complete</code> be typeclasses? <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> you always seem to have clear ideas on things like this.</p>

<a name="135244071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135244071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135244071">Kevin Buzzard (Oct 05 2018 at 09:25)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span>  points out that they form a reflective subcategory.</p>

<a name="135245115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135245115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135245115">Kevin Buzzard (Oct 05 2018 at 09:49)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> Is there a full proof of the universal property of the completion of a topological ring in the mathematical literature?</p>

<a name="135245284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135245284" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135245284">Kenny Lau (Oct 05 2018 at 09:53)</a>:</h4>
<p>i.e. if C is a complete topological ring then Hom(M, C) = Hom(completion(M), C)?</p>

<a name="135245818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135245818" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135245818">Kevin Buzzard (Oct 05 2018 at 10:05)</a>:</h4>
<p>Right.</p>

<a name="135245830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135245830" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135245830">Kevin Buzzard (Oct 05 2018 at 10:05)</a>:</h4>
<p>Of course you have to define the completion first</p>

<a name="135245873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135245873" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135245873">Kevin Buzzard (Oct 05 2018 at 10:06)</a>:</h4>
<p>but my understanding now is that defining the completion and proving the universal property is in some sense one problem</p>

<a name="135245905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135245905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135245905">Kevin Buzzard (Oct 05 2018 at 10:07)</a>:</h4>
<p>and then the trick of deducing that projective limits in the category of complete topological rings exist by showing that projective limits exist in the category of topological rings is a totally different problem</p>

<a name="135245967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135245967" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135245967">Kevin Buzzard (Oct 05 2018 at 10:08)</a>:</h4>
<p>and might be approachable using some category-theory magic</p>

<a name="135248850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135248850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135248850">Johannes Hölzl (Oct 05 2018 at 11:26)</a>:</h4>
<p>we have already <code>complete_space</code> which is a type class, a predicate on uniform spaces</p>

<a name="135494373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135494373" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135494373">Johan Commelin (Oct 09 2018 at 19:59)</a>:</h4>
<p>I'm almost done with <a href="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/huber_tate/src/Spa.lean#L193" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/huber_tate/src/Spa.lean#L193">https://github.com/kbuzzard/lean-perfectoid-spaces/blob/huber_tate/src/Spa.lean#L193</a><br>
It proves that rational opens form a basis.</p>

<a name="135494387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135494387" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135494387">Johan Commelin (Oct 09 2018 at 19:59)</a>:</h4>
<p>But first I will sleep a bit.</p>

<a name="135494390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135494390" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135494390">Kevin Buzzard (Oct 09 2018 at 19:59)</a>:</h4>
<p>Nice Johan!</p>

<a name="135495188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135495188" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135495188">Patrick Massot (Oct 09 2018 at 20:11)</a>:</h4>
<p>Good job!</p>

<a name="135495258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135495258" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135495258">Kenny Lau (Oct 09 2018 at 20:12)</a>:</h4>
<p>what is rational?</p>

<a name="135495325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135495325" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135495325">Kevin Buzzard (Oct 09 2018 at 20:13)</a>:</h4>
<p>It's some version of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>D</mi><mo>(</mo><mi>f</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">D(f)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mclose">)</span></span></span></span> for adic spaces.</p>

<a name="135495429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135495429" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135495429">Kevin Buzzard (Oct 09 2018 at 20:14)</a>:</h4>
<p>Definition 7.29 p62 of <a href="https://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf" target="_blank" title="https://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf">https://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf</a></p>

<a name="135512569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135512569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135512569">Johan Commelin (Oct 10 2018 at 01:50)</a>:</h4>
<p>There is one annoying subgoal left:</p>
<div class="codehilite"><pre><span></span><span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">,</span>
<span class="n">U₁</span> <span class="n">U₂</span> <span class="o">:</span> <span class="n">set</span> <span class="err">↥</span><span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">),</span>
<span class="n">v</span> <span class="o">:</span> <span class="err">↥</span><span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">),</span>
<span class="n">hv</span> <span class="o">:</span> <span class="n">v</span> <span class="err">∈</span> <span class="n">U₁</span> <span class="err">∩</span> <span class="n">U₂</span><span class="o">,</span>
<span class="n">s₁</span> <span class="o">:</span> <span class="err">↥</span><span class="n">A</span><span class="o">,</span>
<span class="n">T₁</span> <span class="o">:</span> <span class="n">set</span> <span class="err">↥</span><span class="n">A</span><span class="o">,</span>
<span class="n">hfin₁</span> <span class="o">:</span> <span class="n">fintype</span> <span class="err">↥</span><span class="n">T₁</span><span class="o">,</span>
<span class="n">s₂</span> <span class="o">:</span> <span class="err">↥</span><span class="n">A</span><span class="o">,</span>
<span class="n">T₂</span> <span class="o">:</span> <span class="n">set</span> <span class="err">↥</span><span class="n">A</span><span class="o">,</span>
<span class="n">hfin₂</span> <span class="o">:</span> <span class="n">fintype</span> <span class="err">↥</span><span class="n">T₂</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst</span> <span class="o">:</span> <span class="n">fintype</span> <span class="err">↥</span><span class="n">T₁</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">fintype</span> <span class="err">↥</span><span class="n">T₂</span><span class="o">,</span>
<span class="n">H₂</span> <span class="o">:</span> <span class="n">U₂</span> <span class="bp">=</span> <span class="n">rational_open</span> <span class="n">s₂</span> <span class="o">(</span><span class="n">insert</span> <span class="n">s₂</span> <span class="n">T₂</span><span class="o">),</span>
<span class="n">H₁</span> <span class="o">:</span> <span class="n">U₁</span> <span class="bp">=</span> <span class="n">rational_open</span> <span class="n">s₁</span> <span class="o">(</span><span class="n">insert</span> <span class="n">s₁</span> <span class="n">T₁</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">fintype</span>
    <span class="err">↥</span><span class="o">{</span><span class="n">t</span> <span class="o">:</span>
         <span class="err">↥</span><span class="n">A</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">{</span><span class="n">t₁</span> <span class="o">:</span> <span class="err">↥</span><span class="n">A</span><span class="o">}</span> <span class="o">{</span><span class="n">H</span> <span class="o">:</span> <span class="n">t₁</span> <span class="err">∈</span> <span class="n">insert</span> <span class="n">s₁</span> <span class="n">T₁</span><span class="o">}</span> <span class="o">{</span><span class="n">t₂</span> <span class="o">:</span> <span class="err">↥</span><span class="n">A</span><span class="o">}</span> <span class="o">{</span><span class="n">H</span> <span class="o">:</span> <span class="n">t₂</span> <span class="err">∈</span> <span class="n">insert</span> <span class="n">s₂</span> <span class="n">T₂</span><span class="o">},</span>
         <span class="n">t</span> <span class="bp">=</span> <span class="n">t₁</span> <span class="bp">*</span> <span class="n">t₂</span><span class="o">}</span>
</pre></div>

<a name="135512572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135512572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135512572">Johan Commelin (Oct 10 2018 at 01:51)</a>:</h4>
<p>Does anyone have some hints on how to tackle that?</p>

<a name="135512741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135512741" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135512741">Johan Commelin (Oct 10 2018 at 01:56)</a>:</h4>
<p>I want to use <code>set.fintype_image</code> but it doesn't apply directly.</p>

<a name="135512946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135512946" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135512946">Mario Carneiro (Oct 10 2018 at 02:02)</a>:</h4>
<p>Use choice to turn the goal back into <code>finite ...</code>, and then use <code>finite_subset</code> and <code>finite_image</code></p>

<a name="135512960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135512960" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135512960">Mario Carneiro (Oct 10 2018 at 02:03)</a>:</h4>
<p>actually you can use <code>fintype_subset</code> instead</p>

<a name="135513096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135513096" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135513096">Mario Carneiro (Oct 10 2018 at 02:06)</a>:</h4>
<p>You should be able to prove <code>fintype (uncurry (*) '' set.prod (insert s₁ T₁) (insert s₂ T₂))</code></p>

<a name="135513106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135513106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135513106">Johan Commelin (Oct 10 2018 at 02:06)</a>:</h4>
<p>Ok, I can try that one.</p>

<a name="135513196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135513196" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135513196">Mario Carneiro (Oct 10 2018 at 02:08)</a>:</h4>
<p>actually I don't even think you have to prove that, typeclass inference will solve it... you just have to prove your set is a subset of it</p>

<a name="135513204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135513204" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135513204">Mario Carneiro (Oct 10 2018 at 02:08)</a>:</h4>
<p>(in fact it's equal but who cares)</p>

<a name="135513493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135513493" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135513493">Johan Commelin (Oct 10 2018 at 02:17)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I'm now stuck with this kludge:</p>
<div class="codehilite"><pre><span></span>    <span class="o">{</span> <span class="n">haveI</span> <span class="o">:</span> <span class="n">fintype</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">×</span> <span class="n">A</span> <span class="bp">|</span> <span class="n">p</span><span class="bp">.</span><span class="mi">1</span> <span class="err">∈</span> <span class="o">(</span><span class="n">insert</span> <span class="n">s₁</span> <span class="n">T₁</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">p</span><span class="bp">.</span><span class="mi">2</span> <span class="err">∈</span> <span class="o">(</span><span class="n">insert</span> <span class="n">s₂</span> <span class="n">T₂</span><span class="o">)}</span> <span class="o">:=</span>
      <span class="k">begin</span>
        <span class="n">sorry</span>
      <span class="kn">end</span><span class="o">,</span>
      <span class="n">convert</span> <span class="n">set</span><span class="bp">.</span><span class="n">fintype_image</span>
        <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">×</span> <span class="n">A</span> <span class="bp">|</span> <span class="n">p</span><span class="bp">.</span><span class="mi">1</span> <span class="err">∈</span> <span class="o">(</span><span class="n">insert</span> <span class="n">s₁</span> <span class="n">T₁</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">p</span><span class="bp">.</span><span class="mi">2</span> <span class="err">∈</span> <span class="o">(</span><span class="n">insert</span> <span class="n">s₂</span> <span class="n">T₂</span><span class="o">)}</span>
        <span class="o">(</span><span class="bp">λ</span> <span class="n">p</span><span class="o">,</span> <span class="n">p</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">*</span> <span class="n">p</span><span class="bp">.</span><span class="mi">2</span><span class="o">),</span>
      <span class="n">funext</span> <span class="n">t</span><span class="o">,</span>
      <span class="n">ext</span><span class="o">,</span> <span class="n">split</span><span class="o">,</span>
      <span class="o">{</span> <span class="n">rintros</span> <span class="bp">⟨</span><span class="n">t₁</span><span class="o">,</span> <span class="n">ht₁</span><span class="o">,</span> <span class="n">t₂</span><span class="o">,</span> <span class="n">ht₂</span><span class="o">,</span> <span class="n">H</span><span class="bp">⟩</span><span class="o">,</span>
        <span class="n">existsi</span> <span class="o">(</span><span class="bp">⟨</span><span class="n">t₁</span><span class="o">,</span><span class="n">t₂</span><span class="bp">⟩</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">×</span> <span class="n">A</span><span class="o">),</span>
        <span class="n">split</span><span class="o">,</span> <span class="n">exact</span> <span class="bp">⟨</span><span class="n">ht₁</span><span class="o">,</span> <span class="n">ht₂</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">exact</span> <span class="n">H</span><span class="bp">.</span><span class="n">symm</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">rintros</span> <span class="bp">⟨</span><span class="n">p</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">h₁</span><span class="o">,</span> <span class="n">h₂</span><span class="bp">⟩⟩</span><span class="o">,</span> <span class="n">dsimp</span> <span class="n">at</span> <span class="n">h₂</span><span class="o">,</span>
        <span class="n">exact</span> <span class="bp">⟨</span><span class="o">(</span><span class="n">p</span><span class="bp">.</span><span class="mi">1</span> <span class="o">:</span> <span class="n">A</span><span class="o">),</span><span class="n">h₁</span><span class="bp">.</span><span class="n">left</span><span class="o">,(</span><span class="n">p</span><span class="bp">.</span><span class="mi">2</span> <span class="o">:</span> <span class="n">A</span><span class="o">),</span><span class="n">h₁</span><span class="bp">.</span><span class="n">right</span><span class="o">,</span> <span class="n">h₂</span><span class="bp">.</span><span class="n">symm</span><span class="bp">⟩</span> <span class="o">}</span> <span class="o">},</span>
</pre></div>

<a name="135513497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135513497" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135513497">Johan Commelin (Oct 10 2018 at 02:17)</a>:</h4>
<p>I don't feel like I'm doing this the right way...</p>

<a name="135513498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135513498" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135513498">Mario Carneiro (Oct 10 2018 at 02:17)</a>:</h4>
<p>you should use <code>set.prod</code> for that set abstraction</p>

<a name="135513500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135513500" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135513500">Johan Commelin (Oct 10 2018 at 02:17)</a>:</h4>
<p>The <code>uncurry</code> didn't work, because Lean could figure out <code>has_insert</code> classes...</p>

<a name="135513505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135513505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135513505">Mario Carneiro (Oct 10 2018 at 02:17)</a>:</h4>
<p>then lean will be able to fill in the sorry</p>

<a name="135513547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135513547" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135513547">Mario Carneiro (Oct 10 2018 at 02:18)</a>:</h4>
<p>if lean has trouble with the has_insert class, put a type ascription on it</p>

<a name="135513549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135513549" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135513549">Mario Carneiro (Oct 10 2018 at 02:18)</a>:</h4>
<p><code>uncurry (*) '' set.prod (insert s₁ T₁ : set A) (insert s₂ T₂ : set A)</code></p>

<a name="135513572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135513572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135513572">Johan Commelin (Oct 10 2018 at 02:19)</a>:</h4>
<p>Hurray:</p>
<div class="codehilite"><pre><span></span>    <span class="o">{</span> <span class="n">convert</span> <span class="n">set</span><span class="bp">.</span><span class="n">fintype_image</span>
        <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">prod</span> <span class="o">(</span><span class="n">insert</span> <span class="n">s₁</span> <span class="n">T₁</span><span class="o">)</span> <span class="o">(</span><span class="n">insert</span> <span class="n">s₂</span> <span class="n">T₂</span><span class="o">))</span>
        <span class="o">(</span><span class="bp">λ</span> <span class="n">p</span><span class="o">,</span> <span class="n">p</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">*</span> <span class="n">p</span><span class="bp">.</span><span class="mi">2</span><span class="o">),</span>
      <span class="n">funext</span> <span class="n">t</span><span class="o">,</span>
      <span class="n">ext</span><span class="o">,</span> <span class="n">split</span><span class="o">,</span>
      <span class="o">{</span> <span class="n">rintros</span> <span class="bp">⟨</span><span class="n">t₁</span><span class="o">,</span> <span class="n">ht₁</span><span class="o">,</span> <span class="n">t₂</span><span class="o">,</span> <span class="n">ht₂</span><span class="o">,</span> <span class="n">H</span><span class="bp">⟩</span><span class="o">,</span>
        <span class="n">existsi</span> <span class="o">(</span><span class="bp">⟨</span><span class="n">t₁</span><span class="o">,</span><span class="n">t₂</span><span class="bp">⟩</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">×</span> <span class="n">A</span><span class="o">),</span>
        <span class="n">split</span><span class="o">,</span> <span class="n">exact</span> <span class="bp">⟨</span><span class="n">ht₁</span><span class="o">,</span> <span class="n">ht₂</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">exact</span> <span class="n">H</span><span class="bp">.</span><span class="n">symm</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">rintros</span> <span class="bp">⟨</span><span class="n">p</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">h₁</span><span class="o">,</span> <span class="n">h₂</span><span class="bp">⟩⟩</span><span class="o">,</span> <span class="n">dsimp</span> <span class="n">at</span> <span class="n">h₂</span><span class="o">,</span>
        <span class="n">exact</span> <span class="bp">⟨</span><span class="o">(</span><span class="n">p</span><span class="bp">.</span><span class="mi">1</span> <span class="o">:</span> <span class="n">A</span><span class="o">),</span><span class="n">h₁</span><span class="bp">.</span><span class="n">left</span><span class="o">,(</span><span class="n">p</span><span class="bp">.</span><span class="mi">2</span> <span class="o">:</span> <span class="n">A</span><span class="o">),</span><span class="n">h₁</span><span class="bp">.</span><span class="n">right</span><span class="o">,</span> <span class="n">h₂</span><span class="bp">.</span><span class="n">symm</span><span class="bp">⟩</span> <span class="o">}</span> <span class="o">},</span>
    <span class="n">apply</span> <span class="n">rational_open_inter</span><span class="bp">;</span> <span class="n">simp</span> <span class="o">},</span>
</pre></div>

<a name="135513614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135513614" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135513614">Johan Commelin (Oct 10 2018 at 02:20)</a>:</h4>
<p>Still silly that I need 10 lines for this. But at least it is <code>sorry</code>-free now.</p>

<a name="135513618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135513618" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135513618">Mario Carneiro (Oct 10 2018 at 02:20)</a>:</h4>
<p>Like I said, use <code>fintype_subset</code> instead of <code>convert</code> and one of your proof obligations goes away</p>

<a name="135513636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135513636" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135513636">Johan Commelin (Oct 10 2018 at 02:21)</a>:</h4>
<p>I'll look into that after I catchup some sleep. Thanks again!</p>

<a name="135513688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135513688" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135513688">Mario Carneiro (Oct 10 2018 at 02:23)</a>:</h4>
<p>Also the reason this is work is because you "rolled your own" set abstraction rather than composing existing constructions so that you get something "manifestly finite". I would question why you had that goal to prove in the first place</p>

<a name="135515107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135515107" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135515107">Mario Carneiro (Oct 10 2018 at 03:00)</a>:</h4>
<p>I pushed some more finiteness theorems to allow you to write <code>(*) &lt;$&gt; insert s₁ T₁ &lt;*&gt; insert s₂ T₂</code> and have lean automatically figure out this is finite</p>

<a name="135520406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135520406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135520406">Johan Commelin (Oct 10 2018 at 05:41)</a>:</h4>
<blockquote>
<p>I pushed some more finiteness theorems to allow you to write <code>(*) &lt;$&gt; insert s₁ T₁ &lt;*&gt; insert s₂ T₂</code> and have lean automatically figure out this is finite</p>
</blockquote>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <span class="user-mention" data-user-id="110031">@Patrick Massot</span> <span class="user-mention" data-user-id="110087">@Scott Morrison</span> What do you think of such notation? Is this something we should just get used to, or are we deviating too much from the maths we are formalising if we do that?</p>

<a name="135520525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135520525" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135520525">Scott Morrison (Oct 10 2018 at 05:44)</a>:</h4>
<p>What are the alternatives on offer?</p>

<a name="135521990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135521990" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135521990">Johan Commelin (Oct 10 2018 at 06:28)</a>:</h4>
<p>I am using <code>{t : A | ∃ {t₁ ∈ insert s₁ T₁} {t₂ ∈ insert s₂ T₂}, t = t₁ * t₂}</code> at the moment.</p>

<a name="135522001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522001" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522001">Johan Commelin (Oct 10 2018 at 06:29)</a>:</h4>
<p>The problem with what I am currently using is that it is readable, and therefore unstructured.</p>

<a name="135522007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522007">Mario Carneiro (Oct 10 2018 at 06:29)</a>:</h4>
<p>You wouldn't even use this in regular maths</p>

<a name="135522010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522010" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522010">Mario Carneiro (Oct 10 2018 at 06:29)</a>:</h4>
<p>you would give that thing a name/notation</p>

<a name="135522060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522060" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522060">Mario Carneiro (Oct 10 2018 at 06:30)</a>:</h4>
<p>The advantage of the monad notation is that it is ridiculously general</p>

<a name="135522061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522061" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522061">Johan Commelin (Oct 10 2018 at 06:30)</a>:</h4>
<p>Nope, we definitely write <code>{t_1 * t_2 | t_1 \in T_1, t_2 \in T_2}</code></p>

<a name="135522068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522068" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522068">Mario Carneiro (Oct 10 2018 at 06:30)</a>:</h4>
<p>Not A * B?</p>

<a name="135522077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522077" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522077">Kevin Buzzard (Oct 10 2018 at 06:31)</a>:</h4>
<p>I would write something like <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><mi>t</mi><mo>∈</mo><mi>A</mi><mo>∣</mo><mi mathvariant="normal">∃</mi><msub><mi>t</mi><mn>1</mn></msub><mo>∈</mo><mo>{</mo><msub><mi>s</mi><mn>1</mn></msub><mo>}</mo><mo>∪</mo><msub><mi>T</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>t</mi><mn>2</mn></msub><mo>∈</mo><mo>{</mo><msub><mi>s</mi><mn>2</mn></msub><mo>}</mo><mo>∪</mo><msub><mi>T</mi><mn>2</mn></msub><mrow><mtext> </mtext><mi mathvariant="normal">s</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">h</mi><mtext> </mtext><mi mathvariant="normal">t</mi><mi mathvariant="normal">h</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">t</mi><mtext> </mtext></mrow><mi>t</mi><mo>=</mo><msub><mi>t</mi><mn>1</mn></msub><msub><mi>t</mi><mn>2</mn></msub><mo>}</mo></mrow><annotation encoding="application/x-tex">\{t\in A\mid \exists t_1\in \{s_1\}\cup T_1, t_2\in \{s_2\}\cup T_2 \mathrm{\ such\ that\ }t=t_1t_2\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mopen">{</span><span class="mord mathit">t</span><span class="mrel">∈</span><span class="mord mathit">A</span><span class="mrel">∣</span><span class="mord mathrm">∃</span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mrel">∈</span><span class="mopen">{</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">}</span><span class="mbin">∪</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mpunct">,</span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mrel">∈</span><span class="mopen">{</span><span class="mord"><span class="mord mathit">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">}</span><span class="mbin">∪</span><span class="mord"><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mord"><span class="mord mathrm"><span class="mspace"> </span><span class="mord mathrm">s</span></span><span class="mord mathrm">u</span><span class="mord mathrm">c</span><span class="mord mathrm">h</span><span class="mord mathrm"><span class="mspace"> </span><span class="mord mathrm">t</span></span><span class="mord mathrm">h</span><span class="mord mathrm">a</span><span class="mord mathrm">t</span><span class="mspace"> </span></span><span class="mord mathit">t</span><span class="mrel">=</span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mord"><span class="mord mathit">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">}</span></span></span></span></p>

<a name="135522083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522083" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522083">Mario Carneiro (Oct 10 2018 at 06:31)</a>:</h4>
<p>I still don't believe you. You might write that on line 1 but you would never write it twice</p>

<a name="135522131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522131" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522131">Kevin Buzzard (Oct 10 2018 at 06:32)</a>:</h4>
<p>Fair point.</p>

<a name="135522140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522140" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522140">Kevin Buzzard (Oct 10 2018 at 06:32)</a>:</h4>
<p>My brain can't cope with two conventions for typing maths notation into a computer :-)</p>

<a name="135522208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522208" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522208">Mario Carneiro (Oct 10 2018 at 06:34)</a>:</h4>
<p>I write <code>\cup</code> in lean too</p>

<a name="135522209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522209" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522209">Johan Commelin (Oct 10 2018 at 06:34)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span>, right. So we use <code>let T := blah</code></p>

<a name="135522211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522211" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522211">Mario Carneiro (Oct 10 2018 at 06:34)</a>:</h4>
<p>And if you did write it that way, you would also have to explain (briefly) why it is finite</p>

<a name="135522213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522213" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522213">Johan Commelin (Oct 10 2018 at 06:34)</a>:</h4>
<p>But in this <code>let</code>, we definitely use the unstructured set builder notation.</p>

<a name="135522214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522214" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522214">Mario Carneiro (Oct 10 2018 at 06:34)</a>:</h4>
<p>and in doing so you would identify it as an image</p>

<a name="135522233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522233" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522233">Johan Commelin (Oct 10 2018 at 06:35)</a>:</h4>
<blockquote>
<p>And if you did write it that way, you would also have to explain (briefly) why it is finite</p>
</blockquote>
<p>No we don't. It's done by an auto_param that calls <code>this_is_easy</code>.</p>

<a name="135522234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522234" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522234">Mario Carneiro (Oct 10 2018 at 06:35)</a>:</h4>
<p>I'm thinking math textbook level here</p>

<a name="135522236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522236" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522236">Mario Carneiro (Oct 10 2018 at 06:35)</a>:</h4>
<p>I'm not sure what level you are talking</p>

<a name="135522295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522295" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522295">Johan Commelin (Oct 10 2018 at 06:37)</a>:</h4>
<p>Same level</p>

<a name="135522298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522298" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522298">Mario Carneiro (Oct 10 2018 at 06:37)</a>:</h4>
<p>I can believe that a mathematician proof would skip this step, maybe using "by clearly", but I think they would also recognize it as skipping a step and would use images when asked</p>

<a name="135522347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522347" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522347">Mario Carneiro (Oct 10 2018 at 06:38)</a>:</h4>
<p>(as opposed to some step skippage which are not even recognized as such when considered explicitly)</p>

<a name="135522349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522349" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522349">Johan Commelin (Oct 10 2018 at 06:38)</a>:</h4>
<p>Sure. So can I just tell Lean <code>work_harder [use := it_is_an_image]</code> ?</p>

<a name="135522350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522350" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522350">Johan Commelin (Oct 10 2018 at 06:38)</a>:</h4>
<p>Instead of a 10-line proof.</p>

<a name="135522357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522357" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522357">Mario Carneiro (Oct 10 2018 at 06:39)</a>:</h4>
<p>Sure, I mean at this point we are talking about machine learning or other ATP to prove this theorem</p>

<a name="135522366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522366" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522366">Mario Carneiro (Oct 10 2018 at 06:39)</a>:</h4>
<p>All the pieces are there, go find it computer minion</p>

<a name="135522367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522367" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522367">Johan Commelin (Oct 10 2018 at 06:39)</a>:</h4>
<p>I want an ATP inside my ITP.</p>

<a name="135522415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522415" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522415">Mario Carneiro (Oct 10 2018 at 06:40)</a>:</h4>
<p>but my point is there is also a notation for this, and I want to maximize use of "constructions" for building sets because this provides a focus for theorems</p>

<a name="135522431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522431" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522431">Johan Commelin (Oct 10 2018 at 06:41)</a>:</h4>
<p>Ok, I'll just use it and see what happens. I prefer the version with <code>uncurry</code>. Is that structured enough? Or do I need the crazy monadic combinators?</p>

<a name="135522437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522437" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522437">Mario Carneiro (Oct 10 2018 at 06:42)</a>:</h4>
<p>the advantage of the funny monadic version is you don't have to fuss with products</p>

<a name="135522479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522479" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522479">Mario Carneiro (Oct 10 2018 at 06:42)</a>:</h4>
<p>which is a side effect of the fact that (*) is a curried function</p>

<a name="135522496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522496" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522496">Johan Commelin (Oct 10 2018 at 06:43)</a>:</h4>
<p>Ok, I'll bite the bullet.</p>

<a name="135522498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522498" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522498">Mario Carneiro (Oct 10 2018 at 06:43)</a>:</h4>
<p>Unfortunately, even the funny monad version isn't exactly the same as your set notation up to defeq</p>

<a name="135522543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522543" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522543">Mario Carneiro (Oct 10 2018 at 06:44)</a>:</h4>
<p>because it uses <code>⋃ x ∈ s</code> instead of <code>{y | ∃ x ∈ s, ...</code></p>

<a name="135522548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522548" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522548">Mario Carneiro (Oct 10 2018 at 06:44)</a>:</h4>
<p>which is not defeq because of reasons</p>

<a name="135522555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522555" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522555">Mario Carneiro (Oct 10 2018 at 06:45)</a>:</h4>
<p>still, you should be able to prove it by simp</p>

<a name="135522625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522625" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522625">Johan Commelin (Oct 10 2018 at 06:46)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I don't like the look of this</p>
<div class="codehilite"><pre><span></span><span class="err">⇑</span><span class="n">v</span> <span class="o">(</span><span class="n">t₁</span> <span class="n">t₂</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">⇑</span><span class="n">v</span> <span class="o">(</span><span class="n">s₁</span> <span class="bp">*</span> <span class="n">s₂</span><span class="o">)</span>
</pre></div>

<a name="135522635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522635" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522635">Johan Commelin (Oct 10 2018 at 06:47)</a>:</h4>
<p>All of a sudden <code>t₁</code> is a function <code>A → A</code>...</p>

<a name="135522637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522637" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522637">Mario Carneiro (Oct 10 2018 at 06:47)</a>:</h4>
<p>what am I looking at?</p>

<a name="135522655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522655" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522655">Johan Commelin (Oct 10 2018 at 06:47)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">rational_open_inter</span><span class="bp">.</span><span class="n">aux1</span> <span class="o">{</span><span class="n">s₁</span> <span class="n">s₂</span> <span class="o">:</span> <span class="n">A</span><span class="o">}</span> <span class="o">{</span><span class="n">T₁</span> <span class="n">T₂</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">T₁</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">T₂</span><span class="o">]</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">s₁</span> <span class="err">∈</span> <span class="n">T₁</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">s₂</span> <span class="err">∈</span> <span class="n">T₂</span><span class="o">)</span> <span class="o">:</span>
<span class="k">let</span> <span class="n">T</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">*</span><span class="o">)</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="n">T₁</span> <span class="bp">&lt;*&gt;</span> <span class="n">T₂</span> <span class="k">in</span>
<span class="n">rational_open</span> <span class="n">s₁</span> <span class="n">T₁</span> <span class="err">∩</span> <span class="n">rational_open</span> <span class="n">s₂</span> <span class="n">T₂</span> <span class="err">⊆</span> <span class="n">rational_open</span> <span class="o">(</span><span class="n">s₁</span> <span class="bp">*</span> <span class="n">s₂</span><span class="o">)</span> <span class="n">T</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">T</span> <span class="n">v</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">vmuls</span> <span class="o">:</span> <span class="n">v</span> <span class="o">(</span><span class="n">s₁</span> <span class="bp">*</span> <span class="n">s₂</span><span class="o">)</span> <span class="bp">=</span> <span class="n">v</span> <span class="n">s₁</span> <span class="bp">*</span> <span class="n">v</span> <span class="n">s₂</span> <span class="o">:=</span> <span class="n">valuation</span><span class="bp">.</span><span class="n">map_mul</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">t</span> <span class="n">ht</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">ht</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">t₁</span><span class="o">,</span> <span class="n">ht₁</span><span class="o">,</span> <span class="n">t₂</span><span class="o">,</span> <span class="n">ht₂</span><span class="o">,</span> <span class="n">ht</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">h</span> <span class="k">with</span> <span class="bp">⟨⟨</span><span class="n">hv₁</span><span class="o">,</span> <span class="n">hs₁</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">hv₂</span><span class="o">,</span> <span class="n">hs₂</span><span class="bp">⟩⟩</span><span class="o">,</span>
    <span class="n">subst</span> <span class="n">ht</span><span class="o">,</span>
<span class="c1">--- snip, the goal is now</span>
<span class="n">A</span> <span class="o">:</span> <span class="n">Huber_pair</span><span class="o">,</span>
<span class="n">s₁</span> <span class="n">s₂</span> <span class="o">:</span> <span class="err">↥</span><span class="n">A</span><span class="o">,</span>
<span class="n">T₁</span> <span class="n">T₂</span> <span class="o">:</span> <span class="n">set</span> <span class="err">↥</span><span class="n">A</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">fintype</span> <span class="err">↥</span><span class="n">T₁</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_2</span> <span class="o">:</span> <span class="n">fintype</span> <span class="err">↥</span><span class="n">T₂</span><span class="o">,</span>
<span class="n">h₁</span> <span class="o">:</span> <span class="n">s₁</span> <span class="err">∈</span> <span class="n">T₁</span><span class="o">,</span>
<span class="n">h₂</span> <span class="o">:</span> <span class="n">s₂</span> <span class="err">∈</span> <span class="n">T₂</span><span class="o">,</span>
<span class="n">T</span> <span class="o">:</span> <span class="n">set</span> <span class="err">↥</span><span class="n">A</span> <span class="o">:=</span> <span class="n">has_mul</span><span class="bp">.</span><span class="n">mul</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="n">T₁</span> <span class="bp">&lt;*&gt;</span> <span class="n">T₂</span><span class="o">,</span>
<span class="n">v</span> <span class="o">:</span> <span class="err">↥</span><span class="o">(</span><span class="n">Spa</span> <span class="n">A</span><span class="o">),</span>
<span class="n">vmuls</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">v</span> <span class="o">(</span><span class="n">s₁</span> <span class="bp">*</span> <span class="n">s₂</span><span class="o">)</span> <span class="bp">=</span> <span class="err">⇑</span><span class="n">v</span> <span class="n">s₁</span> <span class="bp">*</span> <span class="err">⇑</span><span class="n">v</span> <span class="n">s₂</span><span class="o">,</span>
<span class="n">t₁</span> <span class="o">:</span> <span class="err">↥</span><span class="n">A</span> <span class="bp">→</span> <span class="err">↥</span><span class="n">A</span><span class="o">,</span>
<span class="n">ht₁</span> <span class="o">:</span> <span class="n">t₁</span> <span class="err">∈</span> <span class="n">has_mul</span><span class="bp">.</span><span class="n">mul</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="n">T₁</span><span class="o">,</span>
<span class="n">t₂</span> <span class="o">:</span> <span class="err">↥</span><span class="n">A</span><span class="o">,</span>
<span class="n">ht₂</span> <span class="o">:</span> <span class="n">t₂</span> <span class="err">∈</span> <span class="n">T₂</span><span class="o">,</span>
<span class="n">hv₁</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="err">↥</span><span class="n">A</span><span class="o">),</span> <span class="n">t</span> <span class="err">∈</span> <span class="n">T₁</span> <span class="bp">→</span> <span class="err">⇑</span><span class="n">v</span> <span class="n">t</span> <span class="bp">≤</span> <span class="err">⇑</span><span class="n">v</span> <span class="n">s₁</span><span class="o">,</span>
<span class="n">hs₁</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">v</span> <span class="n">s₁</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">hv₂</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="err">↥</span><span class="n">A</span><span class="o">),</span> <span class="n">t</span> <span class="err">∈</span> <span class="n">T₂</span> <span class="bp">→</span> <span class="err">⇑</span><span class="n">v</span> <span class="n">t</span> <span class="bp">≤</span> <span class="err">⇑</span><span class="n">v</span> <span class="n">s₂</span><span class="o">,</span>
<span class="n">hs₂</span> <span class="o">:</span> <span class="err">⇑</span><span class="n">v</span> <span class="n">s₂</span> <span class="bp">≠</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="err">⇑</span><span class="n">v</span> <span class="o">(</span><span class="n">t₁</span> <span class="n">t₂</span><span class="o">)</span> <span class="bp">≤</span> <span class="err">⇑</span><span class="n">v</span> <span class="o">(</span><span class="n">s₁</span> <span class="bp">*</span> <span class="n">s₂</span><span class="o">)</span>
</pre></div>

<a name="135522702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522702" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522702">Johan Commelin (Oct 10 2018 at 06:48)</a>:</h4>
<p>I want it to be <code>v (t₁ * t₂) ≤ v (s₁ * s₂)</code>.</p>

<a name="135522874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522874" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522874">Johan Commelin (Oct 10 2018 at 06:54)</a>:</h4>
<p>I would like to understand how to use this goofy monad stuff. But currently I'm mystified. I think it is turning <code>t₁</code> into the function that multiplies on the left with the "old" <code>t₁ : A</code>. But now I can't use the multiplicative property of valuations on this expression...</p>

<a name="135522987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522987" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522987">Mario Carneiro (Oct 10 2018 at 06:56)</a>:</h4>
<p>Sorry, I was distracted by some poor simp lemmas that fail to simplify that expression the way you would want</p>

<a name="135522989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522989" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522989">Mario Carneiro (Oct 10 2018 at 06:56)</a>:</h4>
<p>you can fix the <code>t1</code> is a function thing by <code>rcases ht1 with &lt;t1, ht1, rfl&gt;</code></p>

<a name="135522995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135522995" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135522995">Johan Commelin (Oct 10 2018 at 06:57)</a>:</h4>
<p>Ok, let me try.</p>

<a name="135523336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135523336" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135523336">Johan Commelin (Oct 10 2018 at 07:05)</a>:</h4>
<p>It seems to work. Thanks</p>

<a name="135523396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135523396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135523396">Mario Carneiro (Oct 10 2018 at 07:06)</a>:</h4>
<div class="codehilite"><pre><span></span>example {A : Type u} [has_mul A] (T₁ T₂ : set A) :
  {t : A | ∃ (t₁ ∈ T₁) (t₂ ∈ T₂), t = t₁ * t₂} = (*) &lt;$&gt; T₁ &lt;*&gt; T₂ :=
begin
  ext t, split,
  { rintro ⟨t₁, ht₁, t₂, ht₂, rfl⟩, exact ⟨_, ⟨_, ht₁, rfl⟩, _, ht₂, rfl⟩ },
  { rintro ⟨_, ⟨t₁, ht₁, rfl⟩, t₂, ht₂, rfl⟩, exact ⟨_, ht₁, _, ht₂, rfl⟩ }
end
</pre></div>


<p>We need a tactic for these kinds of "bracket reassociation" equivalences</p>

<a name="135524227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135524227" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135524227">Johan Commelin (Oct 10 2018 at 07:26)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> O.ooo....</p>
<div class="codehilite"><pre><span></span><span class="err">⊢</span> <span class="n">fintype</span> <span class="err">↥</span><span class="o">(</span><span class="n">has_mul</span><span class="bp">.</span><span class="n">mul</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="n">insert</span> <span class="n">s₁</span> <span class="n">T₁</span> <span class="bp">&lt;*&gt;</span> <span class="n">insert</span> <span class="n">s₂</span> <span class="n">T₂</span><span class="o">)</span>
</pre></div>


<p>This isn't solved by <code>apply_instance</code>... Or do I need to pull latest mathlib for that?</p>

<a name="135524239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135524239" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135524239">Mario Carneiro (Oct 10 2018 at 07:27)</a>:</h4>
<p>latest mathlib</p>

<a name="135524303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135524303" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135524303">Sean Leather (Oct 10 2018 at 07:28)</a>:</h4>
<blockquote>
<p>We need a tactic for these kinds of "bracket reassociation" equivalences</p>
</blockquote>
<p>Yes, we do!</p>

<a name="135526582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135526582" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135526582">Johan Commelin (Oct 10 2018 at 08:22)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Am I supposed to use</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">fintype_seq</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">))</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">f</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">s</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">fintype</span> <span class="o">(</span><span class="n">f</span> <span class="bp">&lt;*&gt;</span> <span class="n">s</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rw</span> <span class="n">seq_eq_bind_map</span><span class="bp">;</span> <span class="n">apply</span> <span class="n">set</span><span class="bp">.</span><span class="n">fintype_bind&#39;</span>

<span class="kn">theorem</span> <span class="n">finite_seq</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)}</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">finite</span> <span class="n">f</span> <span class="bp">→</span> <span class="n">finite</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">finite</span> <span class="o">(</span><span class="n">f</span> <span class="bp">&lt;*&gt;</span> <span class="n">s</span><span class="o">)</span>
<span class="bp">|</span> <span class="bp">⟨</span><span class="n">hf</span><span class="bp">⟩</span> <span class="bp">⟨</span><span class="n">hs</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">haveI</span> <span class="o">:=</span> <span class="n">classical</span><span class="bp">.</span><span class="n">dec_eq</span> <span class="n">β</span><span class="bp">;</span> <span class="n">exactI</span> <span class="bp">⟨</span><span class="n">fintype_seq</span> <span class="bp">_</span> <span class="bp">_⟩</span>
</pre></div>

<a name="135526587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135526587" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135526587">Johan Commelin (Oct 10 2018 at 08:22)</a>:</h4>
<p>type class search isn't proving the finiteness for me by itself...</p>

<a name="135526589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135526589" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135526589">Mario Carneiro (Oct 10 2018 at 08:23)</a>:</h4>
<p>oh dear, that first <code>def</code> should be an <code>instance</code></p>

<a name="135526658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135526658" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135526658">Mario Carneiro (Oct 10 2018 at 08:24)</a>:</h4>
<p>eh, just put <code>attribute [instance] set.fintype_seq</code> in your file, I'll deal with it later</p>

<a name="135527597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135527597" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135527597">Johan Commelin (Oct 10 2018 at 08:45)</a>:</h4>
<p>Is this a simp-lemma?</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">rational_open_inter</span> <span class="o">{</span><span class="n">s₁</span> <span class="n">s₂</span> <span class="o">:</span> <span class="n">A</span><span class="o">}</span> <span class="o">{</span><span class="n">T₁</span> <span class="n">T₂</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">T₁</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">T₂</span><span class="o">]</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">s₁</span> <span class="err">∈</span> <span class="n">T₁</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">s₂</span> <span class="err">∈</span> <span class="n">T₂</span><span class="o">)</span> <span class="o">:</span>
<span class="k">let</span> <span class="n">T</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">*</span><span class="o">)</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="n">T₁</span> <span class="bp">&lt;*&gt;</span> <span class="n">T₂</span> <span class="k">in</span>
<span class="n">rational_open</span> <span class="n">s₁</span> <span class="n">T₁</span> <span class="err">∩</span> <span class="n">rational_open</span> <span class="n">s₂</span> <span class="n">T₂</span> <span class="bp">=</span> <span class="n">rational_open</span> <span class="o">(</span><span class="n">s₁</span> <span class="bp">*</span> <span class="n">s₂</span><span class="o">)</span> <span class="n">T</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="135527663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135527663" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135527663">Mario Carneiro (Oct 10 2018 at 08:47)</a>:</h4>
<p>I don't think so</p>

<a name="135527671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135527671" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135527671">Mario Carneiro (Oct 10 2018 at 08:47)</a>:</h4>
<p>I guess it depends on how you interpret <code>rational_open</code></p>

<a name="135527727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135527727" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135527727">Mario Carneiro (Oct 10 2018 at 08:48)</a>:</h4>
<p>but it isn't a simp lemma in the other direction, and unless you want intersections of rational opens to "compute" to another rational open this is a bit of a strange simp lemma</p>

<a name="135527862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135527862" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135527862">Johan Commelin (Oct 10 2018 at 08:51)</a>:</h4>
<p>Ok, I'll give it as data to <code>simp</code> when I need it.</p>

<a name="135527912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135527912" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135527912">Mario Carneiro (Oct 10 2018 at 08:52)</a>:</h4>
<p>also I'm not positive but the <code>let</code> might get in the way in rewrites</p>

<a name="135528071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135528071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135528071">Johan Commelin (Oct 10 2018 at 08:57)</a>:</h4>
<p>Yes, I removed the <code>let</code></p>

<a name="135528592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135528592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135528592">Scott Morrison (Oct 10 2018 at 09:09)</a>:</h4>
<p>Regarding "bracket reassociation": if the types actually uniquely constrain the answer, then telling <code>tidy</code> it's allowed to use either <code>assumption</code> or <code>solve_by_elim</code> will usually do it.</p>

<a name="135528646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135528646" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135528646">Scott Morrison (Oct 10 2018 at 09:10)</a>:</h4>
<p>I guess you may also need to tell it it's allowed to case bash a bit too, to break apart the hypotheses. For hypotheses covered by <code>auto_cases</code> it should just work.</p>

<a name="135528670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135528670" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135528670">Mario Carneiro (Oct 10 2018 at 09:11)</a>:</h4>
<p>here the cases are all pairs and rfls</p>

<a name="135528716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135528716" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135528716">Scott Morrison (Oct 10 2018 at 09:12)</a>:</h4>
<p>If you're talking about</p>
<div class="codehilite"><pre><span></span>example {A : Type u} [has_mul A] (T₁ T₂ : set A) :
  {t : A | ∃ (t₁ ∈ T₁) (t₂ ∈ T₂), t = t₁ * t₂} = (*) &lt;$&gt; T₁ &lt;*&gt; T₂ :=
begin
  ext t, split,
  { rintro ⟨t₁, ht₁, t₂, ht₂, rfl⟩, exact ⟨_, ⟨_, ht₁, rfl⟩, _, ht₂, rfl⟩ },
  { rintro ⟨_, ⟨t₁, ht₁, rfl⟩, t₂, ht₂, rfl⟩, exact ⟨_, ht₁, _, ht₂, rfl⟩ }
end
</pre></div>


<p>then <code>tidy</code> actually does it out of the box.</p>

<a name="135528741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135528741" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135528741">Scott Morrison (Oct 10 2018 at 09:13)</a>:</h4>
<p>producing the somewhat unhelpful proof:</p>
<div class="codehilite"><pre><span></span>ext1, dsimp at *, simp at *, fsplit, work_on_goal 0 { intros a, cases a, cases a_h, cases a_h_right, cases a_h_right_h, fsplit, work_on_goal 0 { intros a }, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { fsplit, work_on_goal 0 { assumption }, refl } }, fsplit, work_on_goal 1 { fsplit, work_on_goal 0 { assumption }, simp at *, solve_by_elim } } }, intros a, cases a, cases a_h, cases a_h_h, cases a_h_w, cases a_h_w_h, cases a_h_h_h, induction a_h_h_h_h, induction a_h_w_h_right, fsplit, work_on_goal 1 { fsplit, work_on_goal 0 { assumption }, simp at *, fsplit, work_on_goal 1 { fsplit, work_on_goal 0 { assumption }, refl } }
</pre></div>

<a name="135528958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135528958" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135528958">Sebastien Gouezel (Oct 10 2018 at 09:19)</a>:</h4>
<p>If tidy is slow, and its output is ugly but much faster to compile, would it make sense to expand the tidy proofs but put some markings around them and tell vscode to fold them by default?</p>

<a name="135529641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135529641" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135529641">Patrick Massot (Oct 10 2018 at 09:33)</a>:</h4>
<blockquote>
<blockquote>
<p>I pushed some more finiteness theorems to allow you to write <code>(*) &lt;$&gt; insert s₁ T₁ &lt;*&gt; insert s₂ T₂</code> and have lean automatically figure out this is finite</p>
</blockquote>
<p>What do you think of such notation? Is this something we should just get used to, or are we deviating too much from the maths we are formalising if we do that?</p>
</blockquote>
<p>I think we need to learn how to use the power of this arcane thing. But of course I would prefer to hide this into obscure proofs of obvious facts rather than having it user-facing. But that opinion could change if suddenly some mathematician-oriented explanation appear.</p>

<a name="135529842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135529842" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135529842">Kevin Buzzard (Oct 10 2018 at 09:37)</a>:</h4>
<p>I must confess that I am absolutely with Patrick here. I've been using Lean for a year and I look at that line and I don't know what <code>&lt;$&gt;</code> or <code>&lt;*&gt;</code> mean. This is some cool monad trick? Don't have time to chase this up right now.</p>

<a name="135553331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135553331" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135553331">Mario Carneiro (Oct 10 2018 at 16:46)</a>:</h4>
<p>It is indeed some cool monad trick. As you know, <code>$</code> means application in lean, and <code>&lt;$&gt;</code> is a "lifting" operation on a function, that is, <code>(&lt;$&gt;) : (A -&gt; B) -&gt; F A -&gt; F B</code>, so <code>&lt;$&gt;</code> turns a plain function into a function on the mapped objects. (This is just a functor operation on a morphism, so I doubt it requires much more explanation for a mathematician.)</p>
<p><code>&lt;*&gt;</code> is similar, but in this case the function itself is wrapped in the functor. That is, <code>(&lt;*&gt;) : F (A -&gt; B) -&gt; F A -&gt; F B</code>. This gives it a sort of behavior like binary product on the objects <code>F(-)</code>, except it deals with functions directly. Functors that have an operation like this are, reasonably enough, called applicative functors. (You can also axiomatize applicative functors using a pairing function <code>F A -&gt; F B -&gt; F (A x B)</code> plus the functor operation on objects and morphisms.)</p>
<p>Now the cool thing you can do by combining these two is lifting n-ary functions. If <code>f : A -&gt; B -&gt; C -&gt; D</code> and <code>a : A</code>, <code>b : B</code> and <code>c:C</code> then of course <code>f a b c : D</code>, and you should parallel this with <code>f &lt;$&gt; a &lt;*&gt; b &lt;*&gt; c : F D</code> when <code>a : F A</code>, <code>b : F B</code>, <code>c : F C</code>. If you ignore the funny infix monad parts, it's just like <code>f a b c</code> except everything has been lifted across <code>F</code> (except the original function <code>f</code>, which is why the first symbol is <code>&lt;$&gt;</code> instead of <code>&lt;*&gt;</code>).</p>
<p>What does this have to do with sets? There is a natural functor instance on <code>set</code>, where the map function, of type <code>(A -&gt; B) -&gt; set A -&gt; set B</code>, is the forward image of a set by a function. This has an applicative structure: recalling that we want a type <code>set (A -&gt; B) -&gt; set A -&gt; set B</code>, the action of this operator is to apply all the functions to all the inputs and collect all the resulting outputs. That is, <code>fs &lt;*&gt; s = {y | ∃ f ∈ fs, ∃ x ∈ s, y = f x}</code>. When you apply this specifically to the case of lifting an n-ary function as above, you get <code>f &lt;$&gt; A &lt;*&gt; B &lt;*&gt; C = {y | ∃ (a ∈ A) (b ∈ B) (c ∈ C), y = f a b c}</code>, which is exactly what you would want by the mathematician's notation <code>f(A,B,C)</code> where <code>f</code> has been implicitly lifted to a set function. Here <code>&lt;$&gt;</code> and <code>&lt;*&gt;</code> are explicitly notating this lifting process.</p>

<a name="135553602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135553602" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135553602">Mario Carneiro (Oct 10 2018 at 16:50)</a>:</h4>
<p>The downside of using this notation with <code>(*)</code> is that now it is no longer in infix position, which makes it a bit stranger to read and bunches up the symbols. It would have been nicer to have some kind of notation like <code>A &lt;(*)&gt; B</code> where the <code>*</code> stays in the middle but this is more ad hoc and also a bit notationally crazy still.</p>

<a name="135554392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135554392" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135554392">Kevin Buzzard (Oct 10 2018 at 17:04)</a>:</h4>
<p>Thank you Mario for the explanation! I was talking to an undergraduate over lunch today and I mentioned that I was surprised to find that I was needing to have to learn more and more category theory to do number theory properly in Lean, and a logician overheard me and she asked me if I was bad-mouthing category theory, and when I said I wasn't she said not to worry because at the end of the day it was all trivial anyway :-) I still somehow believe this -- it's just that I don't quite know enough of the language (e.g. applicative functor) to talk the talk yet.</p>

<a name="135847266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135847266" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135847266">Johan Commelin (Oct 15 2018 at 17:55)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Would you mind taking a look at the Huber and Tate rings files? I think there is a definition of Huber ring that extends Tate ring. But it is not the one we currently use. Is this for a good reason, or should we change the definition of Huber ring?</p>

<a name="135849476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135849476" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135849476">Kevin Buzzard (Oct 15 2018 at 18:35)</a>:</h4>
<p>A Tate ring is a Huber ring plus an axiom (there exists a topologically nilpotent unit) [this is the definition in <a href="https://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf" target="_blank" title="https://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf">Wedhorn</a> ]</p>

<a name="135849657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135849657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135849657">Kevin Buzzard (Oct 15 2018 at 18:39)</a>:</h4>
<p>In <code>Huber_ring.lean</code> the subring and ideal are not part of the data of a Huber ring. The current definition of <code>Huber_ring</code> in the repo is a "Huber ring plus extra piece of data" and a Huber ring is a topological ring for which there exists S and J such that the axioms are true.</p>

<a name="135849684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135849684" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135849684">Kevin Buzzard (Oct 15 2018 at 18:39)</a>:</h4>
<p>The definition of <code>Tate_ring</code> which we have in <code>Tate_ring.lean</code> is from Scholze's <a href="https://arxiv.org/abs/1709.07343" target="_blank" title="https://arxiv.org/abs/1709.07343">etale cohomology of diamonds</a> (beginning of section 3).</p>

<a name="135849758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135849758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135849758">Kevin Buzzard (Oct 15 2018 at 18:40)</a>:</h4>
<p>The proof that it's a Huber ring in the sense we have defined it is that S is R_0 and J is (pi).</p>

<a name="135849874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135849874" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135849874">Kevin Buzzard (Oct 15 2018 at 18:42)</a>:</h4>
<p>actually that's not quite true -- pi might not be in R_0.  Maybe the easiest thing to say is S = R^o and J is (pi)</p>

<a name="135850501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135850501" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135850501">Johan Commelin (Oct 15 2018 at 18:53)</a>:</h4>
<p>Right, I was confused. So my question is: should <code>Tate_ring</code> extend <code>Huber_ring</code> and just only require the extra condition about the topologically nilpotent unit. Or do you want to leave the definitions as is? (Which means that the instance from <code>Tate_ring</code> to <code>Huber_ring</code> is non-trivial.)</p>

<a name="135850638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135850638" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135850638">Kevin Buzzard (Oct 15 2018 at 18:55)</a>:</h4>
<p>How am I supposed to know? They're all the same mathematically. This is an implementation issue and I have no idea :-( Does it even matter?</p>

<a name="135850701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135850701" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135850701">Johan Commelin (Oct 15 2018 at 18:56)</a>:</h4>
<p>I get the impression that it is nice to have the <code>extend</code> keyword there (-; <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> Is there a general guideline for this?</p>

<a name="135850746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135850746" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135850746">Johan Commelin (Oct 15 2018 at 18:57)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Do we need both equivalent definitions of <code>Huber_ring</code>, or is 1 of them sufficient? I confess that I haven't looked deep enough into the theory to know the answer...</p>

<a name="135850762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135850762" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135850762">Kevin Buzzard (Oct 15 2018 at 18:57)</a>:</h4>
<p>So I spent the last couple of hours trying to figure out how close we are. There is still a way to go. Module refactoring is holding some stuff up but there is actually some other stuff we can do now -- to define the restriction maps on the presheaf is longer than I expected. See <a href="https://github.com/kbuzzard/lean-perfectoid-spaces/issues/25" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/issues/25">https://github.com/kbuzzard/lean-perfectoid-spaces/issues/25</a> . We need a random bunch of lemmas from section 7 (nothing looks hard but it might be a bit long :-( ) and also a lemma from an old paper of Huber.</p>

<a name="135850808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135850808" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135850808">Kevin Buzzard (Oct 15 2018 at 18:58)</a>:</h4>
<p>So where are these two definitions of Huber ring? I don't understand the question.</p>

<a name="135850890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135850890" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135850890">Johan Commelin (Oct 15 2018 at 18:59)</a>:</h4>
<p>Currently <code>Huber_ring</code> is defined in terms of rings of definitions. But it can also be defined as a bounded, complete ring with an adic topology. Is that right?</p>

<a name="135850949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135850949" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135850949">Kevin Buzzard (Oct 15 2018 at 19:00)</a>:</h4>
<p>a Huber ring is not what it says in <code>Huber_ring.lean</code></p>

<a name="135850971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135850971" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135850971">Kevin Buzzard (Oct 15 2018 at 19:00)</a>:</h4>
<p>A Huber ring is a topological ring for which there exists S and J such that the axioms mentioned in the incorrect structure hold</p>

<a name="135851006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135851006" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135851006">Johan Commelin (Oct 15 2018 at 19:01)</a>:</h4>
<p>Ok, I see. So what I mean is that there is Lemma 6.2 in Wedhorn.</p>

<a name="135851014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135851014" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135851014">Johan Commelin (Oct 15 2018 at 19:01)</a>:</h4>
<p>So we can choose one of those three equivalent properties as a definition.</p>

<a name="135851018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135851018" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135851018">Johan Commelin (Oct 15 2018 at 19:02)</a>:</h4>
<p>One of them closely matches what is in <code>Tate_ring</code>.</p>

<a name="135851064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135851064" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135851064">Johan Commelin (Oct 15 2018 at 19:02)</a>:</h4>
<p>And my question is: do we need all three. Or is 1 of them sufficient.</p>

<a name="135851075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135851075" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135851075">Johan Commelin (Oct 15 2018 at 19:02)</a>:</h4>
<p>I.e., do we need Lemma 6.2 or can we cut a corner there.</p>

<a name="135851126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135851126" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135851126">Kevin Buzzard (Oct 15 2018 at 19:03)</a>:</h4>
<p>It would not surprise me if we need 6.2 at some point but we don't need it for the definition of a Huber ring.</p>

<a name="135851230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135851230" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135851230">Johan Commelin (Oct 15 2018 at 19:05)</a>:</h4>
<p>Ok. That answers my question. On my <code>huber_tate</code> branch I have proved some implications of 6.2. But the hard one (iii) -&gt; (i) is not yet done.</p>

<a name="135851292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135851292" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135851292">Kevin Buzzard (Oct 15 2018 at 19:06)</a>:</h4>
<p>Are all proofs involving ideals going to break when module refactoring hits?</p>

<a name="135851628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135851628" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135851628">Johan Commelin (Oct 15 2018 at 19:11)</a>:</h4>
<p>You should ask the only one that knows <span class="emoji emoji-1f606" title="lol">:lol:</span> <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> <span class="emoji emoji-2b06" title="up">:up:</span></p>

<a name="135851816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135851816" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135851816">Kevin Buzzard (Oct 15 2018 at 19:14)</a>:</h4>
<p>Johan I know you were thinking about the sheaf on Spa(A). It's like schemes. For an affine scheme first you define the presheaf on a basis and then extend. When I was writing that stuff I would imagine that the extension really was some gadget which extended the earlier object. Now I would regard it as a completely different object.</p>

<a name="135851840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135851840" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135851840">Kevin Buzzard (Oct 15 2018 at 19:15)</a>:</h4>
<p>Hmm. Is there some fancy name for the relationship between the the category of presheaves on a basis and the category of presheaves on the whole space?</p>

<a name="135852129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135852129" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135852129">Johan Commelin (Oct 15 2018 at 19:20)</a>:</h4>
<p>You get a fully faithful functor from presheaves on a basis to presheaves on the whole space. And if you restrict this functor to sheaves on a basis, you get an equivalence to sheaves on the whole space.</p>

<a name="135852201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135852201" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135852201">Johan Commelin (Oct 15 2018 at 19:21)</a>:</h4>
<p>I tried to figure out if this was some sort of example of a morphism of sites. But that doesn't work out. I don't know if other abstract nonsense applies. I guess in the end some maintainer of mathlib might show up and suggest we formalise "pre-sites" and invent some new mathematics along the way <span class="emoji emoji-1f601" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span> <span class="emoji emoji-1f643" title="upside down">:upside_down:</span></p>

<a name="135852310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135852310" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135852310">Mario Carneiro (Oct 15 2018 at 19:23)</a>:</h4>
<p>Yes, anything that makes any reference to modules or ideals will break, although the breakage is probably minor</p>

<a name="135957292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135957292" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135957292">David Michael Roberts (Oct 17 2018 at 08:22)</a>:</h4>
<blockquote>
<p>I tried to figure out if this was some sort of example of a morphism of sites. But that doesn't work out. I don't know if other abstract nonsense applies. I guess in the end some maintainer of mathlib might show up and suggest we formalise "pre-sites" and invent some new mathematics along the way <span class="emoji emoji-1f601" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span> <span class="emoji emoji-1f643" title="upside down">:upside_down:</span></p>
</blockquote>
<p>What is usually called a 'morphism of sites' is to me far stronger than is necessary. The best definition I know is in MacLane and Moerdijk's book (<a href="https://ncatlab.org/nlab/show/Sheaves+in+Geometry+and+Logic" target="_blank" title="https://ncatlab.org/nlab/show/Sheaves+in+Geometry+and+Logic">https://ncatlab.org/nlab/show/Sheaves+in+Geometry+and+Logic</a>) I'd have to look up the result, though.</p>
<p>Also note that sheaves on a site can be defined relative to a "coverage" (<a href="https://ncatlab.org/nlab/show/coverage" target="_blank" title="https://ncatlab.org/nlab/show/coverage">https://ncatlab.org/nlab/show/coverage</a>) rather than a Grothendieck (pre)topology, and the underlying category of a basis of a topology on a space has a coverage (see <a href="https://ncatlab.org/nlab/show/coverage#Examples" target="_blank" title="https://ncatlab.org/nlab/show/coverage#Examples">https://ncatlab.org/nlab/show/coverage#Examples</a>), such that the comparison functor to the category of open sets with the usual topology induces an equivalence on categories of sheaves.</p>

<a name="135957332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135957332" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135957332">David Michael Roberts (Oct 17 2018 at 08:23)</a>:</h4>
<p>So don't say "pre-sites", but "categories equipped with a coverage" and you will be alright wrt the category theory literature</p>

<a name="135958401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135958401" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135958401">David Michael Roberts (Oct 17 2018 at 08:46)</a>:</h4>
<p>Actually, the best notion of a map between sites (or 'categories with coverage') inducing a map between sheaf categories would be in the Elephant (<a href="https://ncatlab.org/nlab/show/Elephant" target="_blank" title="https://ncatlab.org/nlab/show/Elephant">https://ncatlab.org/nlab/show/Elephant</a>), I can track it down tomorrow at work</p>

<a name="135959843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135959843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135959843">David Michael Roberts (Oct 17 2018 at 09:17)</a>:</h4>
<p>An important example in circles I move in is the category Cart whose objects are {R^n| n ≥0} and Cart(R^n,R^m) = C^\infty(R^n,R^m). This has a coverage whereby a family of maps u_i: R^n --&gt; R^n is covering precisely when they all open embeddings and the image is all of the codomain. It's certainly <em>not</em> a Grothendieck (pre) topology!</p>

<a name="135963362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135963362" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135963362">Johan Commelin (Oct 17 2018 at 10:37)</a>:</h4>
<p><span class="user-mention" data-user-id="130272">@David Michael Roberts</span> Cool. That helps. We certainly need to define what a coverage is! I don't have a copy of the Elephant. But a reference would still be helpful.</p>

<a name="135964391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135964391" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135964391">David Michael Roberts (Oct 17 2018 at 11:02)</a>:</h4>
<p><a href="https://ncatlab.org/nlab/show/coverage" target="_blank" title="https://ncatlab.org/nlab/show/coverage">https://ncatlab.org/nlab/show/coverage</a></p>

<a name="135964399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135964399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135964399">David Michael Roberts (Oct 17 2018 at 11:02)</a>:</h4>
<p>Ah, sorry, you meant define as in formally, and a reference for the map of sites result.</p>

<a name="135964410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135964410" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135964410">Johan Commelin (Oct 17 2018 at 11:03)</a>:</h4>
<p>Right. That page is also going to help me a lot! But I meant the other result.</p>

<a name="135964478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135964478" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135964478">David Michael Roberts (Oct 17 2018 at 11:05)</a>:</h4>
<p>For reference, Elephant C.2.1 is "Sites and coverages"</p>

<a name="135964529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135964529" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135964529">Johan Commelin (Oct 17 2018 at 11:06)</a>:</h4>
<p>Thanks.</p>

<a name="135964645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135964645" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135964645">David Michael Roberts (Oct 17 2018 at 11:09)</a>:</h4>
<p>Remark 2.3.7 in Part C gives a definition of morphism of sites where the underlying categories may fail to have finite limits (so, for example, the poset of opens in a basis for a topology), dependent on Definition 2.3.1.</p>

<a name="135964708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135964708" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135964708">David Michael Roberts (Oct 17 2018 at 11:10)</a>:</h4>
<p><a href="/user_uploads/3121/rH_WHewJbvPBi9OomOBJOY0x/Screen-Shot-2018-10-17-at-9.39.13-pm.png" target="_blank" title="Screen-Shot-2018-10-17-at-9.39.13-pm.png">Screen-Shot-2018-10-17-at-9.39.13-pm.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/rH_WHewJbvPBi9OomOBJOY0x/Screen-Shot-2018-10-17-at-9.39.13-pm.png" target="_blank" title="Screen-Shot-2018-10-17-at-9.39.13-pm.png"><img src="/user_uploads/3121/rH_WHewJbvPBi9OomOBJOY0x/Screen-Shot-2018-10-17-at-9.39.13-pm.png"></a></div>

<a name="135964712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135964712" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135964712">David Michael Roberts (Oct 17 2018 at 11:10)</a>:</h4>
<p><a href="/user_uploads/3121/8MhB3RPWKTZ-m-uxF57hfAle/Screen-Shot-2018-10-17-at-9.40.02-pm.png" target="_blank" title="Screen-Shot-2018-10-17-at-9.40.02-pm.png">Screen-Shot-2018-10-17-at-9.40.02-pm.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/8MhB3RPWKTZ-m-uxF57hfAle/Screen-Shot-2018-10-17-at-9.40.02-pm.png" target="_blank" title="Screen-Shot-2018-10-17-at-9.40.02-pm.png"><img src="/user_uploads/3121/8MhB3RPWKTZ-m-uxF57hfAle/Screen-Shot-2018-10-17-at-9.40.02-pm.png"></a></div>

<a name="135964797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135964797" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135964797">Johan Commelin (Oct 17 2018 at 11:12)</a>:</h4>
<p>I had never realised that nLab had a different definition of <em>site</em> than I'm used to. TIL! <span class="emoji emoji-1f4a1" title="bulb">:bulb:</span></p>

<a name="135964804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135964804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135964804">David Michael Roberts (Oct 17 2018 at 11:12)</a>:</h4>
<p><a href="/user_uploads/3121/egI1m7Y5fw34odhWBTFVUBIT/Screen-Shot-2018-10-17-at-9.42.16-pm.png" target="_blank" title="Screen-Shot-2018-10-17-at-9.42.16-pm.png">Screen-Shot-2018-10-17-at-9.42.16-pm.png</a> <br>
<a href="/user_uploads/3121/OiIH5Dic9MPk7EzR3aignuXl/Screen-Shot-2018-10-17-at-9.42.35-pm.png" target="_blank" title="Screen-Shot-2018-10-17-at-9.42.35-pm.png">Screen-Shot-2018-10-17-at-9.42.35-pm.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/egI1m7Y5fw34odhWBTFVUBIT/Screen-Shot-2018-10-17-at-9.42.16-pm.png" target="_blank" title="Screen-Shot-2018-10-17-at-9.42.16-pm.png"><img src="/user_uploads/3121/egI1m7Y5fw34odhWBTFVUBIT/Screen-Shot-2018-10-17-at-9.42.16-pm.png"></a></div><div class="message_inline_image"><a href="/user_uploads/3121/OiIH5Dic9MPk7EzR3aignuXl/Screen-Shot-2018-10-17-at-9.42.35-pm.png" target="_blank" title="Screen-Shot-2018-10-17-at-9.42.35-pm.png"><img src="/user_uploads/3121/OiIH5Dic9MPk7EzR3aignuXl/Screen-Shot-2018-10-17-at-9.42.35-pm.png"></a></div>

<a name="135964818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135964818" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135964818">David Michael Roberts (Oct 17 2018 at 11:13)</a>:</h4>
<p>And that last stuff is from Mac Lane–Moerdijk VII.10</p>

<a name="135964866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135964866" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135964866">David Michael Roberts (Oct 17 2018 at 11:14)</a>:</h4>
<p>Sorry, that's not what I meant to give you! Didn't read it properly</p>

<a name="135964969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/135964969" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#135964969">David Michael Roberts (Oct 17 2018 at 11:16)</a>:</h4>
<p>Here's the real bit you need<br>
<a href="/user_uploads/3121/0ZJwc7aM2yIyLFMLKEa4XxpB/Screen-Shot-2018-10-17-at-9.45.38-pm.png" target="_blank" title="Screen-Shot-2018-10-17-at-9.45.38-pm.png">Screen-Shot-2018-10-17-at-9.45.38-pm.png</a> <br>
<a href="/user_uploads/3121/5O0FDJQTKBKFj-QwJrxOSceA/Screen-Shot-2018-10-17-at-9.46.08-pm.png" target="_blank" title="Screen-Shot-2018-10-17-at-9.46.08-pm.png">Screen-Shot-2018-10-17-at-9.46.08-pm.png</a> <br>
(Handy having format-shifted backups of books that are on my shelf at work ;-)</p>
<div class="message_inline_image"><a href="/user_uploads/3121/0ZJwc7aM2yIyLFMLKEa4XxpB/Screen-Shot-2018-10-17-at-9.45.38-pm.png" target="_blank" title="Screen-Shot-2018-10-17-at-9.45.38-pm.png"><img src="/user_uploads/3121/0ZJwc7aM2yIyLFMLKEa4XxpB/Screen-Shot-2018-10-17-at-9.45.38-pm.png"></a></div><div class="message_inline_image"><a href="/user_uploads/3121/5O0FDJQTKBKFj-QwJrxOSceA/Screen-Shot-2018-10-17-at-9.46.08-pm.png" target="_blank" title="Screen-Shot-2018-10-17-at-9.46.08-pm.png"><img src="/user_uploads/3121/5O0FDJQTKBKFj-QwJrxOSceA/Screen-Shot-2018-10-17-at-9.46.08-pm.png"></a></div>

<a name="136658083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/136658083" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#136658083">Kenny Lau (Oct 28 2018 at 15:56)</a>:</h4>
<p>Should we delete <a href="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/for_mathlib/data/set/basic.lean" target="_blank" title="https://github.com/kbuzzard/lean-perfectoid-spaces/blob/master/src/for_mathlib/data/set/basic.lean"><code>for_mathlib/data/set/basic.lean</code></a>?</p>

<a name="136658156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/136658156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#136658156">Kenny Lau (Oct 28 2018 at 15:58)</a>:</h4>
<p>and just how outdated is the rest of the <code>for_mathlib</code>?</p>

<a name="136661108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/136661108" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#136661108">Kevin Buzzard (Oct 28 2018 at 17:06)</a>:</h4>
<p>I don't have time to think about perfectoid stuff right now, but Kenny if you want to do some tidying then feel free -- I'd appreciate it</p>

<a name="136670419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/136670419" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#136670419">Patrick Massot (Oct 28 2018 at 21:27)</a>:</h4>
<p>Kenny, do you mean the current content of that file has been merged in mathlib?</p>

<a name="136670430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/136670430" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#136670430">Patrick Massot (Oct 28 2018 at 21:27)</a>:</h4>
<p>yes: <a href="https://github.com/leanprover/mathlib/blob/a33ab1294b386f5fc6465b7221d48a052412bcd8/data/set/basic.lean#L953" target="_blank" title="https://github.com/leanprover/mathlib/blob/a33ab1294b386f5fc6465b7221d48a052412bcd8/data/set/basic.lean#L953">https://github.com/leanprover/mathlib/blob/a33ab1294b386f5fc6465b7221d48a052412bcd8/data/set/basic.lean#L953</a></p>

<a name="136670470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/136670470" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#136670470">Patrick Massot (Oct 28 2018 at 21:28)</a>:</h4>
<p>indeed it was part of the completion merge of course</p>

<a name="136670472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/136670472" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#136670472">Patrick Massot (Oct 28 2018 at 21:28)</a>:</h4>
<p>so yes we can delete that one</p>

<a name="136670479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/136670479" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#136670479">Patrick Massot (Oct 28 2018 at 21:29)</a>:</h4>
<p>and everything about completions</p>

<a name="136670483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/136670483" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#136670483">Patrick Massot (Oct 28 2018 at 21:29)</a>:</h4>
<p>it's all merged upstream</p>

<a name="136670556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/136670556" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#136670556">Patrick Massot (Oct 28 2018 at 21:31)</a>:</h4>
<p>This has always been the plan. We could indeed have a big cleanup, but this is a bit pointless if nobody is working on the project. On the Lean front we are waiting for module and category theory refactor everywhere. And on the math side we are waiting for Kevin to have time, which won't happen soon.</p>

<a name="146942589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/146942589" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#146942589">Patrick Massot (Nov 07 2018 at 14:22)</a>:</h4>
<p>Kenny, why don't you PR your cleanup to the perfectoid project?</p>

<a name="147288728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/147288728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#147288728">Patrick Massot (Nov 08 2018 at 09:51)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> <span class="emoji emoji-2b06" title="up">:up:</span></p>

<a name="147288779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/147288779" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#147288779">Kenny Lau (Nov 08 2018 at 09:52)</a>:</h4>
<p>I don't think I have cleaned up</p>

<a name="147288782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/147288782" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#147288782">Patrick Massot (Nov 08 2018 at 09:52)</a>:</h4>
<p>Weren't removing lots of stuff that is now in mathlib?</p>

<a name="154271724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/154271724" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#154271724">Patrick Massot (Jan 03 2019 at 22:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  <span class="user-mention" data-user-id="112680">@Johan Commelin</span>  Some news about perfectoid spaces: I-adic topology at <a href="https://gist.github.com/PatrickMassot/59c63e7d005350120d6a81f3a0276c87" target="_blank" title="https://gist.github.com/PatrickMassot/59c63e7d005350120d6a81f3a0276c87">https://gist.github.com/PatrickMassot/59c63e7d005350120d6a81f3a0276c87</a></p>

<a name="154271853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/154271853" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#154271853">Patrick Massot (Jan 03 2019 at 22:41)</a>:</h4>
<p>It's a bit rough, some lemmas should be easier, I probably have a suboptimal setup. I builds on <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> efforts starting at <a href="https://github.com/leanprover/mathlib/blob/master/analysis/topology/topological_groups.lean#L108" target="_blank" title="https://github.com/leanprover/mathlib/blob/master/analysis/topology/topological_groups.lean#L108">https://github.com/leanprover/mathlib/blob/master/analysis/topology/topological_groups.lean#L108</a></p>

<a name="154273293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/154273293" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#154273293">Kevin Buzzard (Jan 03 2019 at 23:10)</a>:</h4>
<p>It's a nice idea to make <code>adic_ring I</code> definitionally equal to <code>R</code>. I am slowly but surely beginning to understand the ideas behind this trick. I knew that Lean could unify stuff well, and was under the impression for a while that definitionally equal types were "just equal", but it's more subtle than that.</p>

<a name="154417384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/154417384" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#154417384">Johan Commelin (Jan 04 2019 at 15:56)</a>:</h4>
<p>I like how people are immediately making good use of <code>use</code> <span class="emoji emoji-1f600" title="grinning">:grinning:</span></p>

<a name="154417394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/154417394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#154417394">Johan Commelin (Jan 04 2019 at 15:56)</a>:</h4>
<p>It reads so much better than <code>existsi</code></p>

<a name="154421371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/154421371" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#154421371">Mario Carneiro (Jan 04 2019 at 17:00)</a>:</h4>
<p>four fewer characters, what's not to love</p>

<a name="155317920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/155317920" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#155317920">Johan Commelin (Jan 17 2019 at 08:03)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <span class="user-mention" data-user-id="110031">@Patrick Massot</span>  I'm not so happy with the <code>decidable_eq</code> instances throughout <code>Huber_pair</code>. What do you think of adding a</p>
<div class="codehilite"><pre><span></span><span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">,</span> <span class="n">priority</span> <span class="mi">0</span><span class="o">]</span> <span class="n">classical</span><span class="bp">.</span><span class="n">prop_decidable</span>
</pre></div>


<p>to the top of the file, so that the rest of the file can focus on actual mathematics?</p>

<a name="155317992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/155317992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#155317992">Kevin Buzzard (Jan 17 2019 at 08:04)</a>:</h4>
<p>What's the difference?</p>

<a name="155318005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/155318005" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#155318005">Kevin Buzzard (Jan 17 2019 at 08:04)</a>:</h4>
<p>Actually I realise I don't even understand what's going on here</p>

<a name="155318024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/155318024" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#155318024">Kevin Buzzard (Jan 17 2019 at 08:05)</a>:</h4>
<p>Does lean make different terms depending on whether you say h is decidable or everything is decidable including h?</p>

<a name="155318025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/155318025" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#155318025">Johan Commelin (Jan 17 2019 at 08:05)</a>:</h4>
<p>Readability. Mathematicians will gloss over that incantation in the header. But if they look at the definition of <code>Huber_pair</code>, and all of a sudden they see a condition <code>[decidable_eq R]</code>, they will think "What the hack is that doing there? That isn't in Wedhorn's text!".</p>

<a name="155318101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/155318101" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#155318101">Kevin Buzzard (Jan 17 2019 at 08:06)</a>:</h4>
<p>I think I'm firmly in the "I don't care" camp</p>

<a name="155318124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/155318124" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#155318124">Kevin Buzzard (Jan 17 2019 at 08:07)</a>:</h4>
<p>I imagine it would be easy to change things later if the constructivists take over</p>

<a name="155320282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/155320282" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#155320282">Patrick Massot (Jan 17 2019 at 08:59)</a>:</h4>
<p>I think we should hide this, as Johan suggests</p>

<a name="155329632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/155329632" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#155329632">Neil Strickland (Jan 17 2019 at 12:05)</a>:</h4>
<p>I have only glanced at the definitions, but it looks like no interesting example of a Huber ring will have constructive decidable equality.  If that's right, it seems more natural to have a global blanket assumption that you are going to use <code>classical.prop_decidable</code>.</p>

<a name="155341505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/155341505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#155341505">Kevin Buzzard (Jan 17 2019 at 15:03)</a>:</h4>
<p>Whilst in theory one could consider non-complete Huber rings like <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi mathvariant="double-struck">Z</mi></mrow><mo>[</mo><mi>T</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">\mathbb{Z}[T]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord"><span class="mord mathbb">Z</span></span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mclose">]</span></span></span></span> with the $p$-adic topology, the moment one does anything with Huber rings one assumes they're complete. I guess <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="double-struck">Z</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">\mathbb{Z}_p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68889em;"></span><span class="strut bottom" style="height:0.974998em;vertical-align:-0.286108em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mord mathbb">Z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span></span></span></span> does not have decidable equality, and more generally I would imagine that only the most trivial of complete rings (like some finite rings) have decidable equality.</p>

<a name="155345541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/155345541" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#155345541">Mario Carneiro (Jan 17 2019 at 15:48)</a>:</h4>
<p>what do you need decidability for?</p>

<a name="155345704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/155345704" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#155345704">Johan Commelin (Jan 17 2019 at 15:50)</a>:</h4>
<p>Polynomials</p>

<a name="155345714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/155345714" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#155345714">Johan Commelin (Jan 17 2019 at 15:50)</a>:</h4>
<p>Because we need integral closures</p>

<a name="155346071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/155346071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#155346071">Mario Carneiro (Jan 17 2019 at 15:55)</a>:</h4>
<p>yeah, that sounds pretty hopeless</p>

<a name="155346150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/155346150" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#155346150">Mario Carneiro (Jan 17 2019 at 15:56)</a>:</h4>
<p>you can define polynomials in a way that doesn't need decidable eq, but you don't get algebraic closure or integral closure as such in constructive analysis</p>

<a name="158027558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158027558" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158027558">Johan Commelin (Feb 11 2019 at 12:48)</a>:</h4>
<p>Aaahrg, my computer is completely frozen... (typing this on my laptop)</p>

<a name="158027574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158027574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158027574">Johan Commelin (Feb 11 2019 at 12:49)</a>:</h4>
<p>I just wanted to invoke <code>quotient_group.map</code>... and boom "deterministic timeout" etc.</p>

<a name="158027583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158027583" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158027583">Johan Commelin (Feb 11 2019 at 12:49)</a>:</h4>
<p>When I ask Lean for more info, my entire box freezes.</p>

<a name="158027909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158027909" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158027909">Kevin Buzzard (Feb 11 2019 at 12:55)</a>:</h4>
<p>Is this the computer that's almost as old as one of my teenage kids?</p>

<a name="158028473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158028473" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158028473">Johan Commelin (Feb 11 2019 at 13:04)</a>:</h4>
<p>No, that's the one I'm typing on right now. My desktop (which is still frozen...) is a pretty modern beast.</p>

<a name="158028482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158028482" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158028482">Johan Commelin (Feb 11 2019 at 13:04)</a>:</h4>
<p>I think I'll have to kill it the hard way</p>

<a name="158028664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158028664" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158028664">Kevin Buzzard (Feb 11 2019 at 13:08)</a>:</h4>
<p>ssh in from the laptop and killall lean</p>

<a name="158028754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158028754" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158028754">Johan Commelin (Feb 11 2019 at 13:08)</a>:</h4>
<p>Nah, it was completely frozen</p>

<a name="158099293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158099293" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158099293">Johan Commelin (Feb 12 2019 at 07:59)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> If you are interested, would you mind looking into why we can not use <code>quotient_group.map _ _ id _</code> in the following definition: <a href="https://github.com/leanprover-community/lean-perfectoid-spaces/blob/master/src/valuations.lean#L583" target="_blank" title="https://github.com/leanprover-community/lean-perfectoid-spaces/blob/master/src/valuations.lean#L583">https://github.com/leanprover-community/lean-perfectoid-spaces/blob/master/src/valuations.lean#L583</a><br>
Currently we are using <code>quotient_group.lift</code> but this is a bit more roundabout then necessary I would say. Any attempt to use <code>quotient_group.map</code> results in deterministic timeouts or even frozen operating systems...</p>

<a name="158099355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158099355" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158099355">Mario Carneiro (Feb 12 2019 at 08:00)</a>:</h4>
<p>how much of that file do I need?</p>

<a name="158099483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158099483" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158099483">Mario Carneiro (Feb 12 2019 at 08:02)</a>:</h4>
<p>which <code>quotient</code> is here: <a href="https://github.com/leanprover-community/lean-perfectoid-spaces/blob/master/src/valuations.lean#L427" target="_blank" title="https://github.com/leanprover-community/lean-perfectoid-spaces/blob/master/src/valuations.lean#L427">https://github.com/leanprover-community/lean-perfectoid-spaces/blob/master/src/valuations.lean#L427</a></p>

<a name="158099603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158099603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158099603">Johan Commelin (Feb 12 2019 at 08:04)</a>:</h4>
<p>That's <code>quotient_group.quotient</code></p>

<a name="158099672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158099672" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158099672">Mario Carneiro (Feb 12 2019 at 08:06)</a>:</h4>
<p>the first thing I would try is <code>change quotient _ -&gt; quotient _</code> before the refine</p>

<a name="158099686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158099686" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158099686">Johan Commelin (Feb 12 2019 at 08:06)</a>:</h4>
<p>I think I already tried that at some point...</p>

<a name="158100717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158100717" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158100717">Mario Carneiro (Feb 12 2019 at 08:29)</a>:</h4>
<p>minimized:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">group_theory</span><span class="bp">.</span><span class="n">quotient_group</span> <span class="n">data</span><span class="bp">.</span><span class="n">finsupp</span>

<span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">,</span> <span class="n">priority</span> <span class="mi">0</span><span class="o">]</span> <span class="n">classical</span><span class="bp">.</span><span class="n">prop_decidable</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span>
<span class="bp">#</span><span class="kn">check</span> <span class="o">(</span><span class="k">by</span> <span class="n">apply_instance</span> <span class="o">:</span> <span class="n">is_group_hom</span> <span class="o">(</span><span class="bp">@</span><span class="n">id</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="o">(</span><span class="n">R</span> <span class="bp">→</span><span class="err">₀</span> <span class="bp">ℤ</span><span class="o">))))</span>
</pre></div>

<a name="158100736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158100736" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158100736">Mario Carneiro (Feb 12 2019 at 08:29)</a>:</h4>
<p>short term, you can replace the proof with <code>is_group_hom.id</code></p>

<a name="158100799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158100799" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158100799">Mario Carneiro (Feb 12 2019 at 08:30)</a>:</h4>
<p>i.e. <code>refine @quotient_group.map _ _ _ _ _ _ _ _ id is_group_hom.id _,</code></p>

<a name="158100905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158100905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158100905">Johan Commelin (Feb 12 2019 at 08:32)</a>:</h4>
<p>Ouch... thanks for minimizing it! I tried but got stuck (both my hardware and my brainware)...</p>

<a name="158100908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158100908" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158100908">Mario Carneiro (Feb 12 2019 at 08:32)</a>:</h4>
<p>oh shit, <code>discrete_field.has_decidable_eq</code> is an instance in core</p>

<a name="158100914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158100914" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158100914">Mario Carneiro (Feb 12 2019 at 08:33)</a>:</h4>
<p>that's not good at all</p>

<a name="158100919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158100919" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158100919">Johan Commelin (Feb 12 2019 at 08:33)</a>:</h4>
<p>Fork! Fork! Fork!</p>

<a name="158100929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158100929" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158100929">Johan Commelin (Feb 12 2019 at 08:33)</a>:</h4>
<p>But is that the reason for your MWE failing?</p>

<a name="158100933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158100933" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158100933">Mario Carneiro (Feb 12 2019 at 08:33)</a>:</h4>
<p>it's probably not the culprit, but it's responsible for a lot of wheel-spinning</p>

<a name="158100977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158100977" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158100977">Johan Commelin (Feb 12 2019 at 08:34)</a>:</h4>
<p>Because that MWE looks very innocent. It's bit of a bad omen that Lean can't find that instance.</p>

<a name="158100979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158100979" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158100979">Kevin Buzzard (Feb 12 2019 at 08:34)</a>:</h4>
<p>Just make an instance of <code>has_undecidable_eq</code> with higher priority</p>

<a name="158100991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158100991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158100991">Mario Carneiro (Feb 12 2019 at 08:34)</a>:</h4>
<p>especially since the instance for <code>prop_decidable</code> is at the end of the list and you use it all the time</p>

<a name="158100993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158100993" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158100993">Mario Carneiro (Feb 12 2019 at 08:34)</a>:</h4>
<p>you might want to consider dropping the <code>priority 0</code></p>

<a name="158101012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101012" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101012">Johan Commelin (Feb 12 2019 at 08:35)</a>:</h4>
<p>I wouldn't mind a Lean feature</p>
<div class="codehilite"><pre><span></span><span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="bp">-</span><span class="kn">instance</span><span class="o">]</span> <span class="n">foobar</span> <span class="c1">-- removes an instance locally</span>
</pre></div>

<a name="158101025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101025" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101025">Johan Commelin (Feb 12 2019 at 08:35)</a>:</h4>
<blockquote>
<p>you might want to consider dropping the <code>priority 0</code></p>
</blockquote>
<p>That usually causes other breakage, doesn't it? I can try though.</p>

<a name="158101031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101031">Kevin Buzzard (Feb 12 2019 at 08:35)</a>:</h4>
<p>Can one edit the database of instances somehow?</p>

<a name="158101076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101076" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101076">Kevin Buzzard (Feb 12 2019 at 08:36)</a>:</h4>
<p>I mean, other than by adding to it?</p>

<a name="158101087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101087">Mario Carneiro (Feb 12 2019 at 08:36)</a>:</h4>
<p>nope, at least not global instances</p>

<a name="158101095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101095" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101095">Mario Carneiro (Feb 12 2019 at 08:36)</a>:</h4>
<p>the worry is that it makes import order matter</p>

<a name="158101101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101101" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101101">Johan Commelin (Feb 12 2019 at 08:36)</a>:</h4>
<p>So far, no breakage in this file, if I drop the <code>prio</code></p>

<a name="158101131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101131" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101131">Mario Carneiro (Feb 12 2019 at 08:37)</a>:</h4>
<p>it does seem to improve the search, but it's still overflowing</p>

<a name="158101180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101180" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101180">Johan Commelin (Feb 12 2019 at 08:38)</a>:</h4>
<p>Yeah, it doesn't solve the MWE</p>

<a name="158101338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101338" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101338">Mario Carneiro (Feb 12 2019 at 08:41)</a>:</h4>
<p>oh, this is interesting:</p>
<div class="codehilite"><pre><span></span>[class_instances] (1) ?x_60 : @is_group_hom (multiplicative (R →₀ ℤ)) (multiplicative (R →₀ ℤ))
  (@multiplicative.group (R →₀ ℤ)
     (@finsupp.add_group R ℤ (λ (a b : R), classical.prop_decidable (a = b))
        (λ (a b : ℤ), classical.prop_decidable (a = b))
        (@add_comm_group.to_add_group ℤ
           (@ring.to_add_comm_group ℤ
              (@domain.to_ring ℤ
                 (@to_domain ℤ
                    (@linear_ordered_comm_ring.to_linear_ordered_ring ℤ
                       (@decidable_linear_ordered_comm_ring.to_linear_ordered_comm_ring ℤ
                          int.decidable_linear_ordered_comm_ring))))))))
  (@multiplicative.group (R →₀ ℤ)
     (@finsupp.add_group R ℤ (λ (a b : R), classical.prop_decidable (a = b))
        (λ (a b : ℤ), classical.prop_decidable (a = b))
        (@add_comm_group.to_add_group ℤ
           (@ring.to_add_comm_group ℤ
              (@domain.to_ring ℤ
                 (@to_domain ℤ
                    (@linear_ordered_comm_ring.to_linear_ordered_ring ℤ
                       (@decidable_linear_ordered_comm_ring.to_linear_ordered_comm_ring ℤ
                          int.decidable_linear_ordered_comm_ring))))))))
  (λ (x : multiplicative (R →₀ ℤ)), x) := @is_group_hom.id ?x_283 ?x_284
failed is_def_eq
</pre></div>

<a name="158101386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101386" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101386">Mario Carneiro (Feb 12 2019 at 08:42)</a>:</h4>
<p>it found the right answer and passed it over</p>

<a name="158101438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101438" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101438">Mario Carneiro (Feb 12 2019 at 08:43)</a>:</h4>
<p>I think it's because <code>id</code> has been unfolded at this point, but it's not reducible</p>

<a name="158101439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101439" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101439">Johan Commelin (Feb 12 2019 at 08:43)</a>:</h4>
<p>Your use of "interesting" is… interesting…</p>

<a name="158101517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101517" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101517">Mario Carneiro (Feb 12 2019 at 08:45)</a>:</h4>
<p>looks like <code>is_group_hom.comp</code> is the culprit</p>

<a name="158101543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101543" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101543">Mario Carneiro (Feb 12 2019 at 08:45)</a>:</h4>
<p>this should not be an instance, it is applied in stupid ways</p>

<a name="158101599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101599" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101599">Johan Commelin (Feb 12 2019 at 08:46)</a>:</h4>
<p>But if it is not an instance then it causes breakage... in stupid ways</p>

<a name="158101613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101613" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101613">Mario Carneiro (Feb 12 2019 at 08:46)</a>:</h4>
<p>I think <code>group_hom</code> should be a thing sooner rather than later</p>

<a name="158101618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101618" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101618">Johan Commelin (Feb 12 2019 at 08:46)</a>:</h4>
<p>I'll be slamming my keyboard 10 times a day: "Come on Lean, you're composing two group homs... of course that's a group hom"</p>

<a name="158101623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101623" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101623">Mario Carneiro (Feb 12 2019 at 08:46)</a>:</h4>
<p>the evidence continues to mount in favor of bundled functions</p>

<a name="158101624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101624" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101624">Johan Commelin (Feb 12 2019 at 08:46)</a>:</h4>
<p>I think bundling is cool<br>
(And I don't know what I'm talking about <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span>)</p>

<a name="158101641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101641" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101641">Kenny Lau (Feb 12 2019 at 08:47)</a>:</h4>
<p>nonononono it has nothing to do with <code>is_group_hom.comp</code></p>

<a name="158101655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101655" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101655">Kenny Lau (Feb 12 2019 at 08:47)</a>:</h4>
<div class="codehilite"><pre><span></span>[class_instances] (0) ?x_0 : @is_group_hom (multiplicative (ℤ →₀ ℤ)) (multiplicative (ℤ →₀ ℤ))
  (@multiplicative.group (ℤ →₀ ℤ)
     (@finsupp.add_group ℤ ℤ (λ (a b : ℤ), int.decidable_eq a b) (λ (a b : ℤ), int.decidable_eq a b)
        (@add_comm_group.to_add_group ℤ
           (@ring.to_add_comm_group ℤ
              (@domain.to_ring ℤ
                 (@to_domain ℤ
                    (@linear_ordered_comm_ring.to_linear_ordered_ring ℤ
                       (@decidable_linear_ordered_comm_ring.to_linear_ordered_comm_ring ℤ
                          int.decidable_linear_ordered_comm_ring))))))))
  (@multiplicative.group (ℤ →₀ ℤ)
     (@finsupp.add_group ℤ ℤ (λ (a b : ℤ), int.decidable_eq a b) (λ (a b : ℤ), int.decidable_eq a b)
        (@add_comm_group.to_add_group ℤ
           (@ring.to_add_comm_group ℤ
              (@domain.to_ring ℤ
                 (@to_domain ℤ
                    (@linear_ordered_comm_ring.to_linear_ordered_ring ℤ
                       (@decidable_linear_ordered_comm_ring.to_linear_ordered_comm_ring ℤ
                          int.decidable_linear_ordered_comm_ring))))))))
  (λ (x : multiplicative (ℤ →₀ ℤ)), x) := @is_group_hom.id ?x_44 ?x_45
failed is_def_eq
</pre></div>

<a name="158101699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101699" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101699">Kenny Lau (Feb 12 2019 at 08:48)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">finsupp</span>

<span class="kn">set_option</span> <span class="n">trace</span><span class="bp">.</span><span class="n">class_instances</span> <span class="n">true</span>
<span class="kn">example</span> <span class="o">:</span> <span class="n">is_group_hom</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">multiplicative</span> <span class="o">(</span><span class="bp">ℤ</span> <span class="bp">→</span><span class="err">₀</span> <span class="bp">ℤ</span><span class="o">),</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">apply_instance</span>
</pre></div>

<a name="158101701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101701" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101701">Mario Carneiro (Feb 12 2019 at 08:48)</a>:</h4>
<p><code>comp</code> is reducible, if you try to unify <code>id</code> with <code>f o g</code> you get <code>f = \lam x, x</code> and <code>g = id</code></p>

<a name="158101702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101702" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101702">Kenny Lau (Feb 12 2019 at 08:48)</a>:</h4>
<p>but still yes for bundling</p>

<a name="158101715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101715" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101715">Mario Carneiro (Feb 12 2019 at 08:48)</a>:</h4>
<p>it turned a perfectly normal first order problem into a higher order problem</p>

<a name="158101738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101738" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101738">Mario Carneiro (Feb 12 2019 at 08:49)</a>:</h4>
<p>we could have an instance for <code>is_group_hom (\lam x, x)</code> which would also solve this problem but that's not the point</p>

<a name="158101746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101746" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101746">Mario Carneiro (Feb 12 2019 at 08:49)</a>:</h4>
<p>type class searches with explicit lambdas is never a good idea</p>

<a name="158101800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101800">Kenny Lau (Feb 12 2019 at 08:50)</a>:</h4>
<p>so do we support bundling?</p>

<a name="158101816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101816" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101816">Mario Carneiro (Feb 12 2019 at 08:50)</a>:</h4>
<p>it worked for linear maps, I think it will work just as well if not better for group theory</p>

<a name="158101818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101818" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101818">Johan Commelin (Feb 12 2019 at 08:50)</a>:</h4>
<p>That's going to be a major refactor...</p>

<a name="158101820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101820" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101820">Mario Carneiro (Feb 12 2019 at 08:50)</a>:</h4>
<p>yep</p>

<a name="158101830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101830" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101830">Johan Commelin (Feb 12 2019 at 08:51)</a>:</h4>
<p>And let's do <code>ring_hom</code> at the same time</p>

<a name="158101846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101846" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101846">Johan Commelin (Feb 12 2019 at 08:51)</a>:</h4>
<p>This is also moving "hands-on" mathlib closer to "categorical" mathlib</p>

<a name="158101850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101850">Johan Commelin (Feb 12 2019 at 08:51)</a>:</h4>
<p>I think that's a good thing.</p>

<a name="158101860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101860" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101860">Mario Carneiro (Feb 12 2019 at 08:51)</a>:</h4>
<p>the solution to higher order problems is to make them first order problems</p>

<a name="158101862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101862" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101862">Johan Commelin (Feb 12 2019 at 08:51)</a>:</h4>
<p>Aah, and <code>continuous</code> can finally be <code>continuous</code>, instead of secretly meaning <code>is_continous</code>...</p>

<a name="158101916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101916" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101916">Johan Commelin (Feb 12 2019 at 08:52)</a>:</h4>
<p>But previously we could mix <code>[is_group_hom f]</code> with <code>injective f</code>... will that kind of things become nastier after this refactor?</p>

<a name="158101924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101924" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101924">Mario Carneiro (Feb 12 2019 at 08:52)</a>:</h4>
<p>that becomes <code>injective f</code></p>

<a name="158101926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101926" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101926">Patrick Massot (Feb 12 2019 at 08:52)</a>:</h4>
<p>Does it mean we'll have unification hints all over the place?</p>

<a name="158101930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101930" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101930">Mario Carneiro (Feb 12 2019 at 08:52)</a>:</h4>
<p>no</p>

<a name="158101947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101947">Patrick Massot (Feb 12 2019 at 08:53)</a>:</h4>
<p>This would be for bundled structures but not bundled maps?</p>

<a name="158101949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101949" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101949">Mario Carneiro (Feb 12 2019 at 08:53)</a>:</h4>
<p>A lot of type class searches will go away though</p>

<a name="158101955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101955" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101955">Mario Carneiro (Feb 12 2019 at 08:53)</a>:</h4>
<p>no, the other way around</p>

<a name="158101961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158101961" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158101961">Mario Carneiro (Feb 12 2019 at 08:53)</a>:</h4>
<p>maps bundled, structures unbundled</p>

<a name="158102008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158102008" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158102008">Patrick Massot (Feb 12 2019 at 08:54)</a>:</h4>
<p>I meant unification hints would be for bundled structures</p>

<a name="158102025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158102025" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158102025">Mario Carneiro (Feb 12 2019 at 08:54)</a>:</h4>
<p>right... it's a good question if there are any applications for unification hints as a consequence of bundling structures</p>

<a name="158102033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158102033" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158102033">Mario Carneiro (Feb 12 2019 at 08:55)</a>:</h4>
<p>I guess the analogue is "guess the linear map whose function part is <code>id</code>"</p>

<a name="158102050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158102050" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158102050">Patrick Massot (Feb 12 2019 at 08:55)</a>:</h4>
<p>exactly</p>

<a name="158102053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158102053" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158102053">Patrick Massot (Feb 12 2019 at 08:55)</a>:</h4>
<p>this is what I understood in Amsterdam anyway</p>

<a name="158102057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158102057" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158102057">Patrick Massot (Feb 12 2019 at 08:55)</a>:</h4>
<p>and we can still ask Assia or Cyril, they would be delighted to help</p>

<a name="158102060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158102060" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158102060">Mario Carneiro (Feb 12 2019 at 08:55)</a>:</h4>
<p>but that's not nearly as common a problem as "guess the group whose type is <code>int</code>"</p>

<a name="158102114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158102114" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158102114">Mario Carneiro (Feb 12 2019 at 08:56)</a>:</h4>
<p>because here we will usually be specifying the linear maps directly rather than talking about lambdas</p>

<a name="158102153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158102153" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158102153">Johan Commelin (Feb 12 2019 at 08:57)</a>:</h4>
<p>I guess it would mean that we can still write <code>id</code>, instead of writing <code>group_hom.id</code></p>

<a name="158102220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158102220" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158102220">Mario Carneiro (Feb 12 2019 at 08:58)</a>:</h4>
<p>you may be able to, depends on how well the disambiguation goes</p>

<a name="158102235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158102235" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158102235">Mario Carneiro (Feb 12 2019 at 08:58)</a>:</h4>
<p>I would be inclined to protect <code>group_hom.id</code> and just say that</p>

<a name="158102240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158102240" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158102240">Mario Carneiro (Feb 12 2019 at 08:58)</a>:</h4>
<p>or maybe use a local notation for it</p>

<a name="158102251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158102251" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158102251">Johan Commelin (Feb 12 2019 at 08:59)</a>:</h4>
<p>Meh, ain't that ugly?</p>

<a name="158102266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158102266" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158102266">Johan Commelin (Feb 12 2019 at 08:59)</a>:</h4>
<p>Well... we'll see.</p>

<a name="158102270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158102270" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158102270">Johan Commelin (Feb 12 2019 at 08:59)</a>:</h4>
<p>I wouldn't mind trying uni-hints</p>

<a name="158102273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158102273" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158102273">Mario Carneiro (Feb 12 2019 at 08:59)</a>:</h4>
<p>it is, but having <code>id</code> overloaded usually just means you can't use either one</p>

<a name="158102355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158102355" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158102355">Mario Carneiro (Feb 12 2019 at 09:00)</a>:</h4>
<p>like when I typed <code>quotient</code> in your proof it complained about the overload, I had to write <code>quotient_group.quotient</code> (or <code>_root_.quotient</code> if I wanted the other one)</p>

<a name="158102394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158102394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158102394">Mario Carneiro (Feb 12 2019 at 09:01)</a>:</h4>
<p>In a lot of cases you can circumvent this with projection notation</p>

<a name="158102409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158102409" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158102409">Mario Carneiro (Feb 12 2019 at 09:01)</a>:</h4>
<p>like <code>ideal.quotient</code> means you can write <code>I.quotient</code> where <code>I : ideal A</code></p>

<a name="158117674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158117674" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158117674">Kenny Lau (Feb 12 2019 at 13:38)</a>:</h4>
<p>ok so what do we want to bundle?</p>

<a name="158117707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158117707" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158117707">Kenny Lau (Feb 12 2019 at 13:38)</a>:</h4>
<p>can we come up with an explicit list?</p>

<a name="158117727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158117727" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158117727">Johan Commelin (Feb 12 2019 at 13:38)</a>:</h4>
<p>all morphisms between algebraic structures</p>

<a name="158117746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158117746" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158117746">Kenny Lau (Feb 12 2019 at 13:39)</a>:</h4>
<p>that's not an explicit list</p>

<a name="158117750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158117750" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158117750">Johan Commelin (Feb 12 2019 at 13:39)</a>:</h4>
<p>whether we also want to touch topology, I don't know. Let's wait to hear the opinion of <span class="user-mention" data-user-id="110032">@Reid Barton</span></p>

<a name="158117758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158117758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158117758">Kenny Lau (Feb 12 2019 at 13:39)</a>:</h4>
<p>should I test it on <code>is_field_hom</code>?</p>

<a name="158117769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158117769" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158117769">Johan Commelin (Feb 12 2019 at 13:39)</a>:</h4>
<p><code>is_{,add_}group_hom</code>, <code>is_ring_hom</code></p>

<a name="158117833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158117833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158117833">Johan Commelin (Feb 12 2019 at 13:40)</a>:</h4>
<p><code>is_{,add_}monoid_hom</code>, similar for <code>semigroup</code>s</p>

<a name="158514768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158514768" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158514768">Johan Commelin (Feb 14 2019 at 09:21)</a>:</h4>
<p>This is failing</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">of_inj_value_group</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">v₁</span><span class="bp">.</span><span class="n">minimal_value_group</span><span class="bp">.</span><span class="err">Γ</span> <span class="bp">→</span> <span class="n">v₂</span><span class="bp">.</span><span class="n">minimal_value_group</span><span class="bp">.</span><span class="err">Γ</span><span class="o">)</span>
<span class="o">[</span><span class="n">is_group_hom</span> <span class="n">f</span><span class="o">]</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">monotone</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">v₂</span><span class="bp">.</span><span class="n">minimal_valuation</span> <span class="bp">=</span> <span class="n">v₁</span><span class="bp">.</span><span class="n">minimal_valuation</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="n">hf</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">v₁</span><span class="bp">.</span><span class="n">is_equiv</span> <span class="n">v₂</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">transitivity</span><span class="o">,</span> <span class="c1">-- invalid apply tactic, failed to synthesize type class instance</span>
<span class="kn">end</span>
</pre></div>


<p>but I proved</p>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="n">trans</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">trans</span> <span class="o">(</span><span class="n">h₁₂</span> <span class="o">:</span> <span class="n">v₁</span><span class="bp">.</span><span class="n">is_equiv</span> <span class="n">v₂</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂₃</span> <span class="o">:</span> <span class="n">v₂</span><span class="bp">.</span><span class="n">is_equiv</span> <span class="n">v₃</span><span class="o">)</span> <span class="o">:</span> <span class="n">v₁</span><span class="bp">.</span><span class="n">is_equiv</span> <span class="n">v₃</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span> <span class="n">iff</span><span class="bp">.</span><span class="n">trans</span> <span class="o">(</span><span class="n">h₁₂</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂₃</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span>
</pre></div>


<p>What else should I do to make the transitivity tactic work?</p>

<a name="158514853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158514853" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158514853">Johan Commelin (Feb 14 2019 at 09:22)</a>:</h4>
<p>Oooh snap... this doesn't look good</p>
<div class="codehilite"><pre><span></span>[class_instances]  class-instance resolution trace
[class_instances] (0) ?x_0 : linear_ordered_comm_group ?m__fresh.1182.788 := _inst_4
failed is_def_eq
[class_instances] (0) ?x_0 : linear_ordered_comm_group ?m__fresh.1182.788 := _inst_3
failed is_def_eq
[class_instances] (0) ?x_0 : linear_ordered_comm_group ?m__fresh.1182.788 := @minimal_value_group.linear_ordered_comm_group ?x_1 ?x_2 ?x_3 ?x_4 ?x_5 ?x_6
failed is_def_eq
</pre></div>

<a name="158514888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158514888" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158514888">Johan Commelin (Feb 14 2019 at 09:23)</a>:</h4>
<p>Even if I explicitly give an argument</p>
<div class="codehilite"><pre><span></span><span class="k">begin</span>
  <span class="n">transitivity</span> <span class="n">v₁</span><span class="bp">.</span><span class="n">minimal_valuation</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>it is still not willing to create two subgoals and apply the trans-lemma.</p>

<a name="158515074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158515074" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158515074">Johan Commelin (Feb 14 2019 at 09:26)</a>:</h4>
<p><code>refine trans _ _,</code> does work... I wish <code>transitivity</code> would work in a similar way.</p>

<a name="158517637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158517637" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158517637">Johan Commelin (Feb 14 2019 at 10:13)</a>:</h4>
<p>Voila: Wedhorn 1.27 (i) =&gt; (iii)</p>
<div class="codehilite"><pre><span></span><span class="c1">-- why is this not in the library???</span>
<span class="c1">-- there are other theorems about strict monos!!!</span>
<span class="kn">lemma</span> <span class="n">monotone_of_strict_mono</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">preorder</span> <span class="n">β</span><span class="o">]</span>
<span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">f</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">monotone</span> <span class="n">f</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">iff</span><span class="bp">.</span><span class="n">mpr</span> <span class="err">$</span> <span class="n">le_iff_le_of_strict_mono</span> <span class="bp">_</span> <span class="n">H</span>

<span class="kn">lemma</span> <span class="n">of_map_of_strict_mono</span> <span class="o">{</span><span class="err">Γ₁</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₁</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_ordered_comm_group</span> <span class="err">Γ₁</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="err">Γ</span> <span class="bp">→</span> <span class="err">Γ₁</span><span class="o">)</span> <span class="o">[</span><span class="n">is_group_hom</span> <span class="n">f</span><span class="o">]</span>
<span class="c1">-- for some reason there is no definition of strict monos. But there are theorems about them.</span>
<span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">f</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">is_equiv</span> <span class="o">(</span><span class="n">v</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="o">(</span><span class="n">monotone_of_strict_mono</span> <span class="n">H</span><span class="o">))</span> <span class="n">v</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="n">swap</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">with_zero</span><span class="bp">.</span><span class="n">map_monotone</span> <span class="o">(</span><span class="n">monotone_of_strict_mono</span> <span class="n">H</span><span class="o">)</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">change</span> <span class="n">with_zero</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="bp">_</span> <span class="bp">≤</span> <span class="n">with_zero</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="bp">_</span> <span class="bp">→</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">refine</span> <span class="o">(</span><span class="n">le_iff_le_of_strict_mono</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">mp</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">with_zero</span><span class="bp">.</span><span class="n">map_strict_mono</span> <span class="n">H</span>
<span class="kn">end</span>
</pre></div>

<a name="158517744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158517744" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158517744">Johan Commelin (Feb 14 2019 at 10:14)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="c1">-- Wedhorn 1.27 (i) =&gt; (iii)</span>
<span class="kn">lemma</span> <span class="n">of_inj_value_group</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">v₁</span><span class="bp">.</span><span class="n">minimal_value_group</span><span class="bp">.</span><span class="err">Γ</span> <span class="bp">→</span> <span class="n">v₂</span><span class="bp">.</span><span class="n">minimal_value_group</span><span class="bp">.</span><span class="err">Γ</span><span class="o">)</span>
<span class="o">[</span><span class="n">is_group_hom</span> <span class="n">f</span><span class="o">]</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">f</span> <span class="n">b</span><span class="o">)</span>
<span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">v₂</span><span class="bp">.</span><span class="n">minimal_valuation</span> <span class="bp">=</span> <span class="n">v₁</span><span class="bp">.</span><span class="n">minimal_valuation</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="o">(</span><span class="n">monotone_of_strict_mono</span> <span class="n">H</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">v₁</span><span class="bp">.</span><span class="n">is_equiv</span> <span class="n">v₂</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">refine</span> <span class="n">trans</span> <span class="bp">_</span> <span class="o">(</span><span class="n">v₂</span><span class="bp">.</span><span class="n">minimal_valuation_is_equiv</span><span class="o">),</span>
  <span class="n">refine</span> <span class="n">trans</span> <span class="o">(</span><span class="n">v₁</span><span class="bp">.</span><span class="n">minimal_valuation_is_equiv</span><span class="bp">.</span><span class="n">symm</span><span class="o">)</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">symmetry</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">of_map_of_strict_mono</span> <span class="bp">_</span> <span class="bp">_</span>
<span class="kn">end</span>
</pre></div>

<a name="158519828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158519828" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158519828">Kevin Buzzard (Feb 14 2019 at 10:47)</a>:</h4>
<p>Hello, sorry, I was on a number theory thing</p>

<a name="158519910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158519910" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158519910">Kevin Buzzard (Feb 14 2019 at 10:48)</a>:</h4>
<p>Did you find a workaround for your question?</p>

<a name="158519955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158519955" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158519955">Kevin Buzzard (Feb 14 2019 at 10:49)</a>:</h4>
<p>Oh this is great!</p>

<a name="158519956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158519956" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158519956">Johan Commelin (Feb 14 2019 at 10:49)</a>:</h4>
<p>A workaround yes. But I think <code>transitivity</code> is "broken". I think it can be more general.</p>

<a name="158519966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158519966" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158519966">Johan Commelin (Feb 14 2019 at 10:49)</a>:</h4>
<p>Of course we don't need those tactics, but they are cute.</p>

<a name="158519970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158519970" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158519970">Kevin Buzzard (Feb 14 2019 at 10:49)</a>:</h4>
<p>Do we now have all of 1.27?</p>

<a name="158519985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158519985" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158519985">Johan Commelin (Feb 14 2019 at 10:49)</a>:</h4>
<p>Nope, not yet.</p>

<a name="158520030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520030" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520030">Kevin Buzzard (Feb 14 2019 at 10:50)</a>:</h4>
<p>What's still missing?</p>

<a name="158520051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520051">Kevin Buzzard (Feb 14 2019 at 10:50)</a>:</h4>
<p>I did the easy bit of (iii) -&gt; (ii)</p>

<a name="158520057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520057" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520057">Johan Commelin (Feb 14 2019 at 10:50)</a>:</h4>
<p>We have (i) =&gt; (iii) and (iii) =&gt; (ii).a</p>

<a name="158520058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520058" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520058">Johan Commelin (Feb 14 2019 at 10:50)</a>:</h4>
<p>Right.</p>

<a name="158520067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520067" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520067">Kevin Buzzard (Feb 14 2019 at 10:50)</a>:</h4>
<p>but we now know how to do (iii) -&gt; (ii)</p>

<a name="158520069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520069" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520069">Johan Commelin (Feb 14 2019 at 10:50)</a>:</h4>
<p>And I proved that (ii).a =&gt; K(v1) = K(v2)</p>

<a name="158520077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520077" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520077">Kevin Buzzard (Feb 14 2019 at 10:51)</a>:</h4>
<p>that's a key step :-)</p>

<a name="158520081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520081" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520081">Johan Commelin (Feb 14 2019 at 10:51)</a>:</h4>
<p>So now we need to show (ii).b</p>

<a name="158520085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520085" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520085">Kevin Buzzard (Feb 14 2019 at 10:51)</a>:</h4>
<p>because it now means we can <em>state</em> (ii).b :-)</p>

<a name="158520088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520088" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520088">Johan Commelin (Feb 14 2019 at 10:51)</a>:</h4>
<p>Yep, it's an <code>equiv</code> that is also a <code>field_hom</code>.</p>

<a name="158520103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520103" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520103">Johan Commelin (Feb 14 2019 at 10:51)</a>:</h4>
<p>Yes, but it's not so clean. You want to restrict an <code>equiv</code> to subtypes...</p>

<a name="158520104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520104" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520104">Kevin Buzzard (Feb 14 2019 at 10:51)</a>:</h4>
<p>Aah, I was wondering what you meant by <code>K(v1)=K(v2)</code></p>

<a name="158520136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520136" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520136">Kevin Buzzard (Feb 14 2019 at 10:52)</a>:</h4>
<p>You mean "mathematician's ="</p>

<a name="158520157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520157">Johan Commelin (Feb 14 2019 at 10:52)</a>:</h4>
<p>Are there theorems about that? (Right, and that restriction should be a <code>ring_hom</code>)</p>

<a name="158520177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520177" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520177">Johan Commelin (Feb 14 2019 at 10:52)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> What is the best way to prove that a certain <code>equiv</code> preserves two given subtypes?</p>

<a name="158520189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520189" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520189">Kevin Buzzard (Feb 14 2019 at 10:53)</a>:</h4>
<p>We have two fields which are "mathematician-equal", i.e. an equiv, and we want to prove that two subrings are also equiv</p>

<a name="158520195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520195" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520195">Johan Commelin (Feb 14 2019 at 10:53)</a>:</h4>
<p>I guess we first need to prove <code>x \in S1 \iff e.to_fun x \in S2</code>?</p>

<a name="158520205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520205" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520205">Kevin Buzzard (Feb 14 2019 at 10:53)</a>:</h4>
<p>That's the guts of (iii) -&gt; (ii).b</p>

<a name="158520251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520251" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520251">Mario Carneiro (Feb 14 2019 at 10:54)</a>:</h4>
<p>something like <code>subtype_equiv_of_subtype</code>?</p>

<a name="158520270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520270" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520270">Mario Carneiro (Feb 14 2019 at 10:54)</a>:</h4>
<p>you might want another version of that where both subtypes are variable...</p>

<a name="158520272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520272" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520272">Johan Commelin (Feb 14 2019 at 10:54)</a>:</h4>
<p>No, that takes only 1 Prop.</p>

<a name="158520359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520359" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520359">Mario Carneiro (Feb 14 2019 at 10:56)</a>:</h4>
<p>like this</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">subtype_equiv_of_subtype&#39;</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">{</span><span class="n">q</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span>
  <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span><span class="o">,</span> <span class="n">p</span> <span class="n">a</span> <span class="bp">↔</span> <span class="n">q</span> <span class="o">(</span><span class="n">e</span> <span class="n">a</span><span class="o">))</span> <span class="o">:</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">//</span> <span class="n">p</span> <span class="n">a</span><span class="o">}</span> <span class="err">≃</span> <span class="o">{</span><span class="n">b</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">//</span> <span class="n">q</span> <span class="n">b</span><span class="o">}</span>
</pre></div>

<a name="158520400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520400" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520400">Johan Commelin (Feb 14 2019 at 10:57)</a>:</h4>
<p>If you have two subtypes of <code>X</code>, given by props <code>P</code> and <code>Q</code>, and you know <code>P \iff Q</code>, does that give an equality of the subtypes, or an equiv?</p>

<a name="158520408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520408" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520408">Johan Commelin (Feb 14 2019 at 10:57)</a>:</h4>
<p>I guess the equality is again evil, right?</p>

<a name="158520410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520410" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520410">Johan Commelin (Feb 14 2019 at 10:57)</a>:</h4>
<p>But is that equiv in mathlib?</p>

<a name="158520456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520456" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520456">Johan Commelin (Feb 14 2019 at 10:58)</a>:</h4>
<p>If so, we could chain it to <code>subtype_equiv_of_subtype</code></p>

<a name="158520596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520596">Mario Carneiro (Feb 14 2019 at 11:01)</a>:</h4>
<p>et voilà:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">subtype_equiv_of_subtype&#39;</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">{</span><span class="n">q</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span>
  <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span><span class="o">,</span> <span class="n">p</span> <span class="n">a</span> <span class="bp">↔</span> <span class="n">q</span> <span class="o">(</span><span class="n">e</span> <span class="n">a</span><span class="o">))</span> <span class="o">:</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">//</span> <span class="n">p</span> <span class="n">a</span><span class="o">}</span> <span class="err">≃</span> <span class="o">{</span><span class="n">b</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">//</span> <span class="n">q</span> <span class="n">b</span><span class="o">}</span> <span class="o">:=</span>
<span class="bp">⟨λ</span> <span class="n">x</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">e</span> <span class="n">x</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="o">(</span><span class="n">h</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="n">x</span><span class="bp">.</span><span class="mi">2</span><span class="bp">⟩</span><span class="o">,</span>
 <span class="bp">λ</span> <span class="n">y</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">e</span><span class="bp">.</span><span class="n">symm</span> <span class="n">y</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="o">(</span><span class="n">h</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span> <span class="o">(</span><span class="k">by</span> <span class="n">simp</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">y</span><span class="bp">.</span><span class="mi">2</span><span class="o">)</span><span class="bp">⟩</span><span class="o">,</span>
 <span class="bp">λ</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">eq&#39;</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
 <span class="bp">λ</span> <span class="bp">⟨</span><span class="n">y</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">eq&#39;</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simp</span><span class="bp">⟩</span>

<span class="n">def</span> <span class="n">subtype_equiv_of_subtype</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">//</span> <span class="n">p</span> <span class="n">a</span><span class="o">}</span> <span class="err">≃</span> <span class="o">{</span><span class="n">b</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">//</span> <span class="n">p</span> <span class="o">(</span><span class="n">e</span><span class="bp">.</span><span class="n">symm</span> <span class="n">b</span><span class="o">)}</span> <span class="o">:=</span>
<span class="n">subtype_equiv_of_subtype&#39;</span> <span class="n">e</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simp</span>
</pre></div>

<a name="158520625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520625" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520625">Johan Commelin (Feb 14 2019 at 11:01)</a>:</h4>
<p>Merci!</p>

<a name="158520675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158520675" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158520675">Mario Carneiro (Feb 14 2019 at 11:02)</a>:</h4>
<p>If you have two props P and Q that are pointwise iff then the subtypes are indeed equal, and that is indeed evil</p>

<a name="158521202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158521202" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158521202">Johan Commelin (Feb 14 2019 at 11:12)</a>:</h4>
<p>Are you putting the above fact into mathlib? Or should I put it on some PR queue?</p>

<a name="158521208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158521208" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158521208">Mario Carneiro (Feb 14 2019 at 11:13)</a>:</h4>
<p>put it in a PR, it's easier for me that way</p>

<a name="158523534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158523534" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158523534">Johan Commelin (Feb 14 2019 at 11:58)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Voila: <a href="https://github.com/leanprover/mathlib/issues/724" target="_blank" title="https://github.com/leanprover/mathlib/issues/724">#724</a></p>

<a name="158615675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158615675" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158615675">Johan Commelin (Feb 15 2019 at 13:58)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> </p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">val_ring_equiv_of_is_equiv</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">v₁</span><span class="bp">.</span><span class="n">is_equiv</span> <span class="n">v₂</span><span class="o">)</span> <span class="o">:</span> <span class="n">v₁</span><span class="bp">.</span><span class="n">valuation_ring</span> <span class="err">≃</span> <span class="n">v₂</span><span class="bp">.</span><span class="n">valuation_ring</span> <span class="o">:=</span>
<span class="n">equiv</span><span class="bp">.</span><span class="n">subtype_congr</span> <span class="o">(</span><span class="n">valfield_equiv_valfield_of_eq_supp</span> <span class="n">h</span><span class="bp">.</span><span class="n">supp_eq</span><span class="o">)</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">x</span><span class="o">,</span>
  <span class="k">show</span> <span class="bp">_</span> <span class="bp">≤</span> <span class="bp">_</span> <span class="bp">↔</span> <span class="bp">_</span> <span class="bp">≤</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">erw</span> <span class="o">[</span><span class="err">←</span> <span class="n">v₁</span><span class="bp">.</span><span class="n">on_valuation_field</span><span class="bp">.</span><span class="n">map_one</span><span class="o">,</span> <span class="n">h</span><span class="bp">.</span><span class="n">on_valuation_field_is_equiv</span><span class="o">],</span>
  <span class="n">convert</span> <span class="n">iff</span><span class="bp">.</span><span class="n">refl</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">symmetry</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">valuation</span><span class="bp">.</span><span class="n">map_one</span> <span class="bp">_</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">instance</span> <span class="n">xyzzy</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">v₁</span><span class="bp">.</span><span class="n">is_equiv</span> <span class="n">v₂</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_ring_hom</span> <span class="o">(</span><span class="n">val_ring_equiv_of_is_equiv</span> <span class="n">h</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="o">(</span><span class="k">by</span> <span class="n">apply_instance</span> <span class="o">:</span> <span class="n">is_ring_hom</span> <span class="o">(</span><span class="n">valfield_equiv_valfield_of_eq_supp</span> <span class="n">h</span><span class="bp">.</span><span class="n">supp_eq</span> <span class="o">:</span>
      <span class="n">v₁</span><span class="bp">.</span><span class="n">valuation_field</span> <span class="bp">→</span> <span class="n">v₂</span><span class="bp">.</span><span class="n">valuation_field</span><span class="o">)),</span>
  <span class="n">constructor</span><span class="o">,</span>
  <span class="n">all_goals</span> <span class="o">{</span>
    <span class="n">intros</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">val_injective</span><span class="o">,</span>
    <span class="n">assumption</span> <span class="bp">&lt;|&gt;</span> <span class="n">apply_assumption</span><span class="o">,</span> <span class="o">},</span>
<span class="kn">end</span>
</pre></div>

<a name="158615711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158615711" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158615711">Johan Commelin (Feb 15 2019 at 13:58)</a>:</h4>
<p>I will probably get frowned at for that last proof... It ought to be generalised.</p>

<a name="158615729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158615729" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158615729">Johan Commelin (Feb 15 2019 at 13:59)</a>:</h4>
<p>Anyway, this proves Wedhorn 1.27 (iii) =&gt; (ii)b</p>

<a name="158637984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158637984" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158637984">Kevin Buzzard (Feb 15 2019 at 18:40)</a>:</h4>
<p>You're not old enough to remember <code>xyzzy</code>!</p>

<a name="158637994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158637994" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158637994">Johan Commelin (Feb 15 2019 at 18:40)</a>:</h4>
<p>Haha... parts of me are very old.</p>

<a name="158638348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158638348" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158638348">Johan Commelin (Feb 15 2019 at 18:46)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> <span class="user-mention" data-user-id="110032">@Reid Barton</span> So there is this "fake" quotient <code>Spv R</code> that is morally the set of equivalence classes of valuations on <code>R</code>. It isn't a Lean-quotient because of universe issues. We can manually define <code>mk</code> and <code>lift</code> etc, and prove the quotient-axioms. Now here is a question... do you think there is any value in making <code>out</code> computable?</p>

<a name="158638466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158638466" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158638466">Johan Commelin (Feb 15 2019 at 18:47)</a>:</h4>
<p>Given an equivalence class, I can write an algorithm that "canonically" builds a valuation that represents this class.</p>

<a name="158638578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158638578" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158638578">Johan Commelin (Feb 15 2019 at 18:48)</a>:</h4>
<p>Does this matter, if the computation-rule isn't going to be defeq anyway?</p>

<a name="158647172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/158647172" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#158647172">Kevin Buzzard (Feb 15 2019 at 20:35)</a>:</h4>
<p>One key observation is that the canonical element you construct is computable! So we can just define quotient.lift by evaluating at this element and it will be computable as well. This is in contrast to my construction of general quotients using equivalence classes</p>

<a name="159807884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159807884" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159807884">Johan Commelin (Mar 02 2019 at 17:54)</a>:</h4>
<p>Ok, getting back to this stuff with equality and equiv's. Suppose I have a type <code>X</code> and a function <code>f : X → Type u</code>. And suppose I have two terms <code>x y : X</code>, and a proof <code>h : x = y</code>. Do I understand correctly that it is now evil to apply <code>congr_arg f h</code> to conclude that <code>f x = f y</code>?</p>

<a name="159808130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808130" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808130">Mario Carneiro (Mar 02 2019 at 18:01)</a>:</h4>
<p>better question: what do you intend to do with this equality?</p>

<a name="159808136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808136" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808136">Johan Commelin (Mar 02 2019 at 18:01)</a>:</h4>
<p>For the moment I think I would mostly don't do anything and just be comforted by it</p>

<a name="159808178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808178" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808178">Mario Carneiro (Mar 02 2019 at 18:02)</a>:</h4>
<p>there are lots of ways to express "equality of types", and <code>=</code> is rarely the right one</p>

<a name="159808183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808183" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808183">Mario Carneiro (Mar 02 2019 at 18:02)</a>:</h4>
<p>the answer depends on what <code>f</code> is</p>

<a name="159808269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808269" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808269">Kevin Buzzard (Mar 02 2019 at 18:05)</a>:</h4>
<p>Which other ones can you <code>rw</code> with?</p>

<a name="159808314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808314">Kevin Buzzard (Mar 02 2019 at 18:06)</a>:</h4>
<p>Did you see the local ring question? Prove that if R is a local ring and S is isomorphic to R then S is a local ring.</p>

<a name="159808373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808373" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808373">Kevin Buzzard (Mar 02 2019 at 18:08)</a>:</h4>
<p>Proof: the lattice of ideals for R and S are isomorphic.</p>

<a name="159808396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808396">Johan Commelin (Mar 02 2019 at 18:09)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Suppose I have <code>f : Y → X</code>. Then I would really like the fibre of a point in <code>x</code> to be <em>unique</em>. So if <code>x = y</code>, then they have the same fibre.</p>

<a name="159808399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808399">Mario Carneiro (Mar 02 2019 at 18:10)</a>:</h4>
<p>I'm working on it <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span></p>

<a name="159808581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808581">Kenny Lau (Mar 02 2019 at 18:14)</a>:</h4>
<blockquote>
<p>Proof: the lattice of ideals for R and S are isomorphic.</p>
</blockquote>
<p>Proof: the non-units are closed under addition</p>

<a name="159808606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808606" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808606">Kevin Buzzard (Mar 02 2019 at 18:15)</a>:</h4>
<p>You still have to write some code. And when you've done that, prove that R is Cohen-Macauley iff S is.</p>

<a name="159808607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808607" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808607">Kevin Buzzard (Mar 02 2019 at 18:15)</a>:</h4>
<p>Then you have to write lots of code.</p>

<a name="159808609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808609" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808609">Kevin Buzzard (Mar 02 2019 at 18:15)</a>:</h4>
<p>But no mathematician even understands what to write.</p>

<a name="159808655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808655" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808655">Kevin Buzzard (Mar 02 2019 at 18:16)</a>:</h4>
<p>Hence automation should be doing it.</p>

<a name="159808657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808657">Kenny Lau (Mar 02 2019 at 18:16)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> is a local ring a) a ring that has a unique maximal ideal, or b) a ring with an ideal such that the ideal is the unique maximal ideal?</p>

<a name="159808659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808659" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808659">Kevin Buzzard (Mar 02 2019 at 18:16)</a>:</h4>
<p>I think (a)</p>

<a name="159808661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808661" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808661">Kevin Buzzard (Mar 02 2019 at 18:16)</a>:</h4>
<p>but of course I also think (b)</p>

<a name="159808663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808663" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808663">Kevin Buzzard (Mar 02 2019 at 18:17)</a>:</h4>
<p>But when these things matter, things are usually (a)ish</p>

<a name="159808668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808668">Kenny Lau (Mar 02 2019 at 18:17)</a>:</h4>
<p>is Q_p a local field?</p>

<a name="159808671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808671" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808671">Kevin Buzzard (Mar 02 2019 at 18:17)</a>:</h4>
<p>sure</p>

<a name="159808672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808672" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808672">Kenny Lau (Mar 02 2019 at 18:17)</a>:</h4>
<p>or is the local field (Q_p, Z_p, pZ_p, F_p)?</p>

<a name="159808674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808674" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808674">Kevin Buzzard (Mar 02 2019 at 18:17)</a>:</h4>
<p>sure</p>

<a name="159808675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808675" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808675">Kenny Lau (Mar 02 2019 at 18:17)</a>:</h4>
<p>mathematicians are strange</p>

<a name="159808676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808676" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808676">Kevin Buzzard (Mar 02 2019 at 18:17)</a>:</h4>
<p>let me think</p>

<a name="159808677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808677" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808677">Kevin Buzzard (Mar 02 2019 at 18:17)</a>:</h4>
<p>I can give you a better answer</p>

<a name="159808680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808680" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808680">Kevin Buzzard (Mar 02 2019 at 18:17)</a>:</h4>
<p>A local field comes equipped with an equivalence class of norms</p>

<a name="159808726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808726" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808726">Kevin Buzzard (Mar 02 2019 at 18:18)</a>:</h4>
<p>and I can work out all the other stuff you wrote from the norm</p>

<a name="159808728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808728">Johan Commelin (Mar 02 2019 at 18:18)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> What about my example? Fibres of a function. And suppose that the fibres are vector spaces. Will <code>f^{-1} x</code> and <code>f^{-1} y</code> be the same vector space if <code>x = y</code>?</p>

<a name="159808729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808729" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808729">Kevin Buzzard (Mar 02 2019 at 18:19)</a>:</h4>
<p>Is x defeq to y?</p>

<a name="159808737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808737" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808737">Johan Commelin (Mar 02 2019 at 18:19)</a>:</h4>
<p>Nope</p>

<a name="159808738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808738" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808738">Kenny Lau (Mar 02 2019 at 18:19)</a>:</h4>
<p>and there's also a theorem that you can recover the norm from the algebra</p>

<a name="159808742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808742" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808742">Kenny Lau (Mar 02 2019 at 18:19)</a>:</h4>
<p>so are we just going to omit the norm?</p>

<a name="159808748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808748" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808748">Kevin Buzzard (Mar 02 2019 at 18:19)</a>:</h4>
<p>It is not true for a general normed field that you can recover the norm from the algebra</p>

<a name="159808751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808751" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808751">Mario Carneiro (Mar 02 2019 at 18:19)</a>:</h4>
<p>Alright you guys are being impatient so I'll just show you what I have in mind:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">ring_theory</span><span class="bp">.</span><span class="n">ideals</span> <span class="n">data</span><span class="bp">.</span><span class="n">equiv</span><span class="bp">.</span><span class="n">algebra</span>

<span class="bp">#</span><span class="kn">print</span> <span class="n">relator</span><span class="bp">.</span><span class="n">bi_unique</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">relator</span>
<span class="kn">lemma</span> <span class="n">rel_exists_unique_of_total</span> <span class="o">[</span><span class="n">bi_total</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">bi_unique</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span>
  <span class="o">((</span><span class="n">R</span> <span class="err">⇒</span> <span class="n">iff</span><span class="o">)</span> <span class="err">⇒</span> <span class="n">iff</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span><span class="n">p</span><span class="o">,</span> <span class="bp">∃!</span> <span class="n">i</span><span class="o">,</span> <span class="n">p</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span><span class="n">q</span><span class="o">,</span> <span class="bp">∃!</span> <span class="n">i</span><span class="o">,</span> <span class="n">q</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">p</span> <span class="n">q</span> <span class="n">h</span><span class="o">,</span> <span class="n">rel_exists_of_total</span> <span class="n">R</span> <span class="err">$</span>
  <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span> <span class="n">r</span><span class="o">,</span> <span class="n">rel_and</span> <span class="o">(</span><span class="n">h</span> <span class="n">r</span><span class="o">)</span> <span class="err">$</span> <span class="n">rel_forall_of_total</span> <span class="n">R</span> <span class="err">$</span>
    <span class="bp">λ</span> <span class="n">c</span> <span class="n">d</span> <span class="n">s</span><span class="o">,</span> <span class="n">rel_imp</span> <span class="o">(</span><span class="n">h</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">rel_eq</span> <span class="n">R</span> <span class="n">s</span> <span class="n">r</span><span class="o">)</span>
<span class="kn">end</span> <span class="n">relator</span>

<span class="kn">namespace</span> <span class="n">equiv</span>

<span class="kn">protected</span> <span class="n">def</span> <span class="n">rel</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span>

<span class="kn">theorem</span> <span class="n">symm_rel</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span> <span class="n">β</span><span class="o">)</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">b</span> <span class="o">:</span> <span class="n">β</span><span class="o">}</span> <span class="o">:</span> <span class="n">f</span><span class="bp">.</span><span class="n">symm</span><span class="bp">.</span><span class="n">rel</span> <span class="n">b</span> <span class="n">a</span> <span class="bp">↔</span> <span class="n">f</span><span class="bp">.</span><span class="n">rel</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:=</span>
<span class="n">f</span><span class="bp">.</span><span class="n">symm_apply_eq</span><span class="bp">.</span><span class="n">trans</span> <span class="n">eq_comm</span>

<span class="kn">open</span> <span class="n">relator</span>
<span class="kn">theorem</span> <span class="n">rel_left_unique</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">left_unique</span> <span class="n">f</span><span class="bp">.</span><span class="n">rel</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">a₁</span> <span class="n">b</span> <span class="n">a₂</span> <span class="n">h</span><span class="o">,</span> <span class="k">by</span> <span class="n">rintro</span> <span class="bp">⟨⟩;</span> <span class="n">exact</span> <span class="n">f</span><span class="bp">.</span><span class="n">bijective</span><span class="bp">.</span><span class="mi">1</span> <span class="n">h</span>

<span class="kn">theorem</span> <span class="n">rel_right_unique</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">right_unique</span> <span class="n">f</span><span class="bp">.</span><span class="n">rel</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">a₁</span> <span class="n">b</span> <span class="n">a₂</span><span class="o">,</span> <span class="k">by</span> <span class="n">rintro</span> <span class="bp">⟨⟩</span> <span class="bp">⟨⟩;</span> <span class="n">refl</span>

<span class="kn">instance</span> <span class="n">rel_bi_unique</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">bi_unique</span> <span class="n">f</span><span class="bp">.</span><span class="n">rel</span> <span class="o">:=</span>
<span class="bp">⟨</span><span class="n">f</span><span class="bp">.</span><span class="n">rel_left_unique</span><span class="o">,</span> <span class="n">f</span><span class="bp">.</span><span class="n">rel_right_unique</span><span class="bp">⟩</span>

<span class="kn">instance</span> <span class="n">rel_left_total</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">left_total</span> <span class="n">f</span><span class="bp">.</span><span class="n">rel</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="bp">⟨_</span><span class="o">,</span> <span class="n">rfl</span><span class="bp">⟩</span>
<span class="kn">instance</span> <span class="n">rel_right_total</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">right_total</span> <span class="n">f</span><span class="bp">.</span><span class="n">rel</span> <span class="o">:=</span> <span class="n">f</span><span class="bp">.</span><span class="n">bijective</span><span class="bp">.</span><span class="mi">2</span>
<span class="kn">instance</span> <span class="n">rel_bi_total</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">bi_total</span> <span class="n">f</span><span class="bp">.</span><span class="n">rel</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">split</span><span class="bp">;</span> <span class="n">apply_instance</span>

<span class="kn">end</span> <span class="n">equiv</span>

<span class="kn">namespace</span> <span class="n">ring_equiv</span>
<span class="kn">variables</span> <span class="o">[</span><span class="n">ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">ring</span> <span class="n">β</span><span class="o">]</span>
<span class="kn">instance</span> <span class="o">(</span><span class="n">α</span> <span class="n">β</span><span class="o">)</span> <span class="o">[</span><span class="n">ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">ring</span> <span class="n">β</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_coe_to_fun</span> <span class="o">(</span><span class="n">α</span> <span class="err">≃</span><span class="n">r</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">⟨λ_</span><span class="o">,</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">,</span> <span class="bp">λ</span><span class="n">e</span><span class="o">,</span> <span class="n">e</span><span class="bp">.</span><span class="n">to_equiv</span><span class="bp">⟩</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">apply_inverse_apply</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span><span class="n">r</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">e</span> <span class="o">(</span><span class="n">e</span><span class="bp">.</span><span class="n">symm</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="n">e</span><span class="bp">.</span><span class="n">to_equiv</span><span class="bp">.</span><span class="n">apply_inverse_apply</span> <span class="n">x</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">inverse_apply_apply</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span><span class="n">r</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">e</span><span class="bp">.</span><span class="n">symm</span> <span class="o">(</span><span class="n">e</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="n">e</span><span class="bp">.</span><span class="n">to_equiv</span><span class="bp">.</span><span class="n">inverse_apply_apply</span> <span class="n">x</span>

<span class="n">def</span> <span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">ideal_comap</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span><span class="n">r</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">carrier</span> <span class="o">:=</span> <span class="n">e</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="n">I</span><span class="o">,</span>
  <span class="n">zero</span>  <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">is_ring_hom</span><span class="bp">.</span><span class="n">map_zero</span> <span class="n">e</span><span class="o">],</span>
  <span class="n">add</span>   <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span> <span class="n">h₁</span> <span class="n">h₂</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">is_ring_hom</span><span class="bp">.</span><span class="n">map_add</span> <span class="n">e</span><span class="o">]</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">I</span><span class="bp">.</span><span class="n">add_mem</span> <span class="n">h₁</span> <span class="n">h₂</span><span class="o">,</span>
  <span class="n">smul</span>  <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">x</span> <span class="n">h</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">is_ring_hom</span><span class="bp">.</span><span class="n">map_mul</span> <span class="n">e</span><span class="o">]</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">I</span><span class="bp">.</span><span class="n">smul_mem</span> <span class="bp">_</span> <span class="n">h</span> <span class="o">}</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">mem_ideal_comap</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">{</span><span class="n">e</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span><span class="n">r</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">I</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">r</span><span class="o">}</span> <span class="o">:</span> <span class="n">r</span> <span class="err">∈</span> <span class="n">ideal_comap</span> <span class="n">e</span> <span class="n">I</span> <span class="bp">↔</span> <span class="n">e</span> <span class="n">r</span> <span class="err">∈</span> <span class="n">I</span> <span class="o">:=</span> <span class="n">iff</span><span class="bp">.</span><span class="n">rfl</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">ideal_comap_top</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span><span class="n">r</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">ideal_comap</span> <span class="n">e</span> <span class="err">⊤</span> <span class="bp">=</span> <span class="err">⊤</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="n">def</span> <span class="n">ideal_congr</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span><span class="n">r</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">ideal</span> <span class="n">α</span> <span class="err">≃</span> <span class="n">ideal</span> <span class="n">β</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="n">e</span><span class="bp">.</span><span class="n">symm</span><span class="bp">.</span><span class="n">ideal_comap</span><span class="o">,</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="n">e</span><span class="bp">.</span><span class="n">ideal_comap</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">I</span><span class="o">,</span> <span class="n">ideal</span><span class="bp">.</span><span class="n">ext</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">r</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">I</span><span class="o">,</span> <span class="n">ideal</span><span class="bp">.</span><span class="n">ext</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">r</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">}</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">ideal_congr_apply</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span><span class="n">r</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">ideal_congr</span> <span class="n">e</span> <span class="n">I</span> <span class="bp">=</span> <span class="n">e</span><span class="bp">.</span><span class="n">symm</span><span class="bp">.</span><span class="n">ideal_comap</span> <span class="n">I</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">ideal_congr_symm_apply</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span><span class="n">r</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">ideal_congr</span> <span class="n">e</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span> <span class="n">I</span> <span class="bp">=</span> <span class="n">e</span><span class="bp">.</span><span class="n">ideal_comap</span> <span class="n">I</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="kn">end</span> <span class="n">ring_equiv</span>

<span class="kn">namespace</span> <span class="n">relator</span>

<span class="kn">theorem</span> <span class="n">rel_ideal_top</span>
  <span class="o">{</span><span class="n">R</span> <span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">S</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="err">≃</span><span class="n">r</span> <span class="n">S</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">f</span><span class="bp">.</span><span class="n">ideal_congr</span><span class="bp">.</span><span class="n">rel</span> <span class="err">⊤</span> <span class="err">⊤</span> <span class="o">:=</span>
<span class="n">ring_equiv</span><span class="bp">.</span><span class="n">ideal_comap_top</span> <span class="bp">_</span>

<span class="kn">theorem</span> <span class="n">rel_lt_ideal</span>
  <span class="o">{</span><span class="n">R</span> <span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">S</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="err">≃</span><span class="n">r</span> <span class="n">S</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">ideal_congr</span><span class="bp">.</span><span class="n">rel</span> <span class="err">⇒</span> <span class="n">f</span><span class="bp">.</span><span class="n">ideal_congr</span><span class="bp">.</span><span class="n">rel</span> <span class="err">⇒</span> <span class="n">iff</span><span class="o">)</span> <span class="n">has_lt</span><span class="bp">.</span><span class="n">lt</span> <span class="n">has_lt</span><span class="bp">.</span><span class="n">lt</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">I</span> <span class="n">J</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">_=_</span><span class="o">)</span> <span class="n">I&#39;</span> <span class="n">J&#39;</span> <span class="o">(</span><span class="n">h&#39;</span> <span class="o">:</span> <span class="bp">_=_</span><span class="o">),</span> <span class="k">by</span> <span class="n">substs</span> <span class="n">h</span> <span class="n">h&#39;</span><span class="bp">;</span> <span class="n">exact</span> <span class="bp">_</span>

<span class="kn">theorem</span> <span class="n">rel_is_maximal</span>
  <span class="o">{</span><span class="n">R</span> <span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">S</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="err">≃</span><span class="n">r</span> <span class="n">S</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">ideal_congr</span><span class="bp">.</span><span class="n">rel</span> <span class="err">⇒</span> <span class="n">iff</span><span class="o">)</span> <span class="n">ideal</span><span class="bp">.</span><span class="n">is_maximal</span> <span class="n">ideal</span><span class="bp">.</span><span class="n">is_maximal</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">I</span> <span class="n">J</span> <span class="n">h</span><span class="o">,</span> <span class="n">rel_and</span>
  <span class="o">(</span><span class="n">rel_not</span> <span class="err">$</span> <span class="n">rel_eq</span> <span class="n">f</span><span class="bp">.</span><span class="n">ideal_congr</span><span class="bp">.</span><span class="n">rel</span> <span class="n">h</span> <span class="err">$</span> <span class="n">rel_ideal_top</span> <span class="bp">_</span><span class="o">)</span>
  <span class="o">(</span><span class="n">rel_forall_of_total</span> <span class="n">f</span><span class="bp">.</span><span class="n">ideal_congr</span><span class="bp">.</span><span class="n">rel</span> <span class="err">$</span>
    <span class="bp">λ</span> <span class="n">I&#39;</span> <span class="n">J&#39;</span> <span class="n">h&#39;</span><span class="o">,</span> <span class="n">rel_imp</span>
      <span class="o">(</span><span class="n">rel_lt_ideal</span> <span class="n">f</span> <span class="n">h</span> <span class="n">h&#39;</span><span class="o">)</span>
      <span class="o">(</span><span class="n">rel_eq</span> <span class="n">f</span><span class="bp">.</span><span class="n">ideal_congr</span><span class="bp">.</span><span class="n">rel</span> <span class="n">h&#39;</span> <span class="o">(</span><span class="n">ring_equiv</span><span class="bp">.</span><span class="n">ideal_comap_top</span> <span class="bp">_</span><span class="o">)))</span>

<span class="kn">end</span> <span class="n">relator</span>

<span class="kn">theorem</span> <span class="n">is_local_ring_congr</span>
  <span class="o">{</span><span class="n">R</span> <span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">S</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="err">≃</span><span class="n">r</span> <span class="n">S</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">is_local_ring</span> <span class="n">R</span> <span class="bp">↔</span> <span class="n">is_local_ring</span> <span class="n">S</span> <span class="o">:=</span>
<span class="n">relator</span><span class="bp">.</span><span class="n">rel_exists_unique_of_total</span> <span class="n">f</span><span class="bp">.</span><span class="n">ideal_congr</span><span class="bp">.</span><span class="n">rel</span> <span class="err">$</span>
<span class="bp">λ</span> <span class="n">I</span> <span class="n">J</span><span class="o">,</span> <span class="n">relator</span><span class="bp">.</span><span class="n">rel_is_maximal</span> <span class="n">f</span>
</pre></div>

<a name="159808795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808795" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808795">Kevin Buzzard (Mar 02 2019 at 18:20)</a>:</h4>
<p>and I'm trying to do it properly</p>

<a name="159808815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808815" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808815">Kevin Buzzard (Mar 02 2019 at 18:20)</a>:</h4>
<p>Johan what do you mean by this fibre? Is it of type <code>set Y</code> or <code>subtype Y</code>?</p>

<a name="159808834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808834" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808834">Mario Carneiro (Mar 02 2019 at 18:21)</a>:</h4>
<p>There are definitely a lot of missing theorems for this kind of proof</p>

<a name="159808837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808837" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808837">Kenny Lau (Mar 02 2019 at 18:21)</a>:</h4>
<p>the fibre is the stalk of the blah blah blah</p>

<a name="159808875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808875" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808875">Johan Commelin (Mar 02 2019 at 18:22)</a>:</h4>
<p>I was thinking <code>subtype</code></p>

<a name="159808880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808880" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808880">Kevin Buzzard (Mar 02 2019 at 18:22)</a>:</h4>
<p>but the last theorem looks pretty cool</p>

<a name="159808881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808881" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808881">Mario Carneiro (Mar 02 2019 at 18:22)</a>:</h4>
<p>but this is what you want to do for transferring across isomorphisms in the general case</p>

<a name="159808883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808883" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808883">Kenny Lau (Mar 02 2019 at 18:22)</a>:</h4>
<p>sure, for every scenario one can transfer across isomorphisms</p>

<a name="159808891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808891" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808891">Kenny Lau (Mar 02 2019 at 18:22)</a>:</h4>
<p>but can one transfer across isomorphisms for every scenario?</p>

<a name="159808898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808898" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808898">Mario Carneiro (Mar 02 2019 at 18:22)</a>:</h4>
<p>You should look in particular at how <code>rel_is_maximal</code> is being proven</p>

<a name="159808908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808908" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808908">Kenny Lau (Mar 02 2019 at 18:23)</a>:</h4>
<p>what is <code>⇒</code>?</p>

<a name="159808909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808909" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808909">Mario Carneiro (Mar 02 2019 at 18:23)</a>:</h4>
<p><code>is_maximal</code> is some complicated proposition, but there are simple theorems you can apply in every case</p>

<a name="159808911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808911" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808911">Kevin Buzzard (Mar 02 2019 at 18:23)</a>:</h4>
<p>I am alone and not at work (very rare indeed) and I'm writing perfectoid stuff so I'd like to go back to that now but rest assured I will be back later to look at this code. I just want to keep working until my family return.</p>

<a name="159808958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159808958" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159808958">Mario Carneiro (Mar 02 2019 at 18:24)</a>:</h4>
<p><code>⇒</code> is the relation lifting for functions: <code>(R ⇒ S) f g</code> says that if the inputs to f and g are related by R then the outputs are related by S</p>

<a name="159809020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159809020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159809020">Mario Carneiro (Mar 02 2019 at 18:26)</a>:</h4>
<p>The notation isn't essential, you could just say that</p>

<a name="159953991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159953991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159953991">Kevin Buzzard (Mar 04 2019 at 21:47)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Johan and I have now made a load of API for valuations, and I just want to check this before I launch into the next bit:</p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">Spv</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₀</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">ineq</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="bp">//</span> <span class="bp">∃</span> <span class="o">(</span><span class="err">Γ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₀</span><span class="o">)</span> <span class="o">[</span><span class="n">h</span> <span class="o">:</span> <span class="n">linear_ordered_comm_group</span> <span class="err">Γ</span><span class="o">],</span>
 <span class="k">by</span> <span class="n">haveI</span> <span class="o">:=</span> <span class="n">h</span><span class="bp">;</span> <span class="n">exact</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span><span class="o">),</span> <span class="bp">∀</span> <span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v</span> <span class="n">s</span> <span class="bp">↔</span> <span class="n">ineq</span> <span class="n">r</span> <span class="n">s</span><span class="o">}</span>
</pre></div>


<p>Is this definition OK, because I use the same universe in the subtype as I do for <code>R</code>?</p>
<div class="codehilite"><pre><span></span>Spv : Π (R : Type u_1) [_inst_3 : comm_ring R], Type u_1
</pre></div>

<a name="159954003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159954003" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159954003">Kevin Buzzard (Mar 04 2019 at 21:47)</a>:</h4>
<p>And if I'd put Gamma : Type u\1 then it would be less OK, right?</p>

<a name="159955916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159955916" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159955916">Kevin Buzzard (Mar 04 2019 at 22:11)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">Spv</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₀</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">ineq</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="bp">//</span> <span class="bp">∃</span> <span class="o">{</span><span class="err">Γ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₀</span><span class="o">}</span> <span class="o">[</span><span class="n">h</span> <span class="o">:</span> <span class="n">linear_ordered_comm_group</span> <span class="err">Γ</span><span class="o">],</span>
 <span class="k">by</span> <span class="n">haveI</span> <span class="o">:=</span> <span class="n">h</span><span class="bp">;</span> <span class="n">exact</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span><span class="o">),</span> <span class="bp">∀</span> <span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v</span> <span class="n">s</span> <span class="bp">↔</span> <span class="n">ineq</span> <span class="n">r</span> <span class="n">s</span><span class="o">}</span>

<span class="kn">variable</span> <span class="o">{</span><span class="n">v</span> <span class="o">:</span> <span class="n">Spv</span> <span class="n">R</span><span class="o">}</span>

<span class="kn">notation</span> <span class="n">r</span> <span class="bp">`≤</span><span class="o">[</span><span class="bp">`</span><span class="n">v</span><span class="bp">`</span><span class="o">]</span><span class="bp">`</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">v</span><span class="bp">.</span><span class="mi">1</span> <span class="n">r</span> <span class="n">s</span>

<span class="kn">namespace</span> <span class="n">Spv</span>
<span class="kn">open</span> <span class="n">valuation</span>

<span class="kn">definition</span> <span class="n">mk</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span><span class="o">)</span> <span class="o">:</span> <span class="n">Spv</span> <span class="n">R</span> <span class="o">:=</span>
<span class="bp">⟨λ</span> <span class="n">r</span> <span class="n">s</span><span class="o">,</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v</span> <span class="n">s</span><span class="o">,</span>
  <span class="bp">⟨</span><span class="n">value_group</span> <span class="n">v</span><span class="o">,</span> <span class="k">by</span> <span class="n">apply_instance</span><span class="o">,</span> <span class="n">canonical_valuation</span> <span class="n">v</span><span class="o">,</span> <span class="n">canonical_valuation_is_equiv</span> <span class="n">v</span><span class="bp">⟩⟩</span>
</pre></div>


<p><span class="user-mention" data-user-id="210574">@Patrick Massot</span> <span class="user-mention" data-user-id="110031">@Patrick Massot</span> <span class="user-mention" data-user-id="112680">@Johan Commelin</span> we have a mk!</p>

<a name="159955942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159955942" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159955942">Kevin Buzzard (Mar 04 2019 at 22:11)</a>:</h4>
<p>(Gamma is in universe u1)</p>

<a name="159956086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159956086" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159956086">Kevin Buzzard (Mar 04 2019 at 22:13)</a>:</h4>
<p>We had one before, but this one is <em>much</em> nicer. No horrible quotient groups or anything. I've just looked at the proofs in canonical.lean and they're almost all only a few lines long. It feels like we have written some semi-professional code here. I'm sure the experts could have done better, but somehow this code feels a lot more maintainable than the sort of rubbish I was cranking out when I wrote schemes.</p>

<a name="159964978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159964978" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159964978">Mario Carneiro (Mar 05 2019 at 00:24)</a>:</h4>
<p>you don't need the <code>haveI := h; exact</code> bit, you can just <code>exactI</code></p>

<a name="159965119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159965119" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159965119">Mario Carneiro (Mar 05 2019 at 00:27)</a>:</h4>
<p>your definition of <code>Spv</code> looks good</p>

<a name="159965155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159965155" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159965155">Mario Carneiro (Mar 05 2019 at 00:27)</a>:</h4>
<p>I suggest using a local notation for <code>r ≤[v] s </code></p>

<a name="159992017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159992017" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159992017">Kevin Buzzard (Mar 05 2019 at 10:29)</a>:</h4>
<p>So now here's one approach:</p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">Spv</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₀</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">ineq</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="bp">//</span> <span class="bp">∃</span> <span class="o">{</span><span class="err">Γ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₀</span><span class="o">}</span> <span class="o">[</span><span class="n">h</span> <span class="o">:</span> <span class="n">linear_ordered_comm_group</span> <span class="err">Γ</span><span class="o">],</span>
 <span class="k">by</span> <span class="n">exactI</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span><span class="o">),</span> <span class="bp">∀</span> <span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v</span> <span class="n">s</span> <span class="bp">↔</span> <span class="n">ineq</span> <span class="n">r</span> <span class="n">s</span><span class="o">}</span>

<span class="kn">definition</span> <span class="n">out_</span><span class="err">Γ</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">Spv</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₀</span> <span class="o">:=</span> <span class="n">classical</span><span class="bp">.</span><span class="n">some</span> <span class="n">v</span><span class="bp">.</span><span class="mi">2</span>

<span class="n">noncomputable</span> <span class="kn">instance</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">Spv</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">linear_ordered_comm_group</span> <span class="o">(</span><span class="n">out_</span><span class="err">Γ</span> <span class="n">v</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">classical</span><span class="bp">.</span><span class="n">some</span> <span class="err">$</span> <span class="n">classical</span><span class="bp">.</span><span class="n">some_spec</span> <span class="n">v</span><span class="bp">.</span><span class="mi">2</span>

<span class="n">noncomputable</span> <span class="kn">definition</span> <span class="n">out</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">Spv</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="o">(</span><span class="n">out_</span><span class="err">Γ</span> <span class="n">v</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">classical</span><span class="bp">.</span><span class="n">some</span> <span class="err">$</span> <span class="n">classical</span><span class="bp">.</span><span class="n">some_spec</span> <span class="err">$</span> <span class="n">classical</span><span class="bp">.</span><span class="n">some_spec</span> <span class="n">v</span><span class="bp">.</span><span class="mi">2</span>
</pre></div>


<p>And another approach is to write a bunch of code which, given an inequality (for that is what a term of type <code>Spv R</code> actually is), actually construct a valuation on R. I am pretty sure that this is possible,  given the work we have already done. However I currently don't understand if it is worth doing this. It would involve extending the inequality on R to an inequality on a certain field and then constructing Gamma using the units of that field. If I wrote all this code, and it would not be hard to write given what we have, we would end up with a computable definition, I think.</p>
<p>Should I write this code?</p>

<a name="159992300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159992300" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159992300">Patrick Massot (Mar 05 2019 at 10:34)</a>:</h4>
<p>What would we do with this computable definition?</p>

<a name="159992317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159992317" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159992317">Kevin Buzzard (Mar 05 2019 at 10:34)</a>:</h4>
<p>I don't understand the point of computability. But I know it can be written now.</p>

<a name="159992353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159992353" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159992353">Kevin Buzzard (Mar 05 2019 at 10:35)</a>:</h4>
<p>I'm just writing a roadmap in valuation_spectrum.lean and then I'm going to push and take a break for a few days to do work admin.</p>

<a name="159992984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159992984" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159992984">Kevin Buzzard (Mar 05 2019 at 10:47)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I just realised that I don't know the type of <code>Spv.lift</code>. For every Gamma I have <code>mk: valuation R Gamma -&gt; Spv R</code>. I have <code>equiv: valuation R Gamma1 -&gt; valuation R Gamma2 -&gt; Prop</code>. What function am I trying to descend here? A function on valuation R Gamma? Then I don't need the full force of equiv -- I only need it for when Gamma1 = Gamma2. Does that sound right?</p>

<a name="159993046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159993046" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159993046">Kevin Buzzard (Mar 05 2019 at 10:48)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">is_equiv</span> <span class="o">(</span><span class="n">v₁</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ₁</span><span class="o">)</span> <span class="o">(</span><span class="n">v₂</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ₂</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">∀</span> <span class="n">r</span> <span class="n">s</span><span class="o">,</span> <span class="n">v₁</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v₁</span> <span class="n">s</span> <span class="bp">↔</span> <span class="n">v₂</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v₂</span> <span class="n">s</span>
</pre></div>

<a name="159993061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159993061" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159993061">Kevin Buzzard (Mar 05 2019 at 10:48)</a>:</h4>
<p><code>definition mk (v : valuation R Γ) : Spv R := ...</code></p>

<a name="159993109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159993109" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159993109">Kevin Buzzard (Mar 05 2019 at 10:50)</a>:</h4>
<p>Should my lift be descending functions defined on a big sigma type? If so, which universes should my Gammas live in? Completely general ones?</p>

<a name="159993239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159993239" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159993239">Kevin Buzzard (Mar 05 2019 at 10:51)</a>:</h4>
<p>This sounds right to me. In the ZFC lying version of this story, the "equivalence class" has arbitrarily large Gamma's in.</p>

<a name="159993370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159993370" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159993370">Kevin Buzzard (Mar 05 2019 at 10:54)</a>:</h4>
<p>Is it Ok for <code>Spv.out</code> to be a pi type <code>Spv.out : Pi (v : Spv R), valuation R (value_group v)</code>? Here <code>value_group v</code> will be in the same universe as <code>R</code> (but will depend on <code>v</code>).</p>

<a name="159993417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159993417" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159993417">Kevin Buzzard (Mar 05 2019 at 10:54)</a>:</h4>
<p>I had not realised these subtleties until now.</p>

<a name="159994621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/159994621" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#159994621">Kevin Buzzard (Mar 05 2019 at 11:16)</a>:</h4>
<p>I've just run through this and it looks right to me. Using what we have I believe we can define a continuity predicate on <code>valuation R Gamma</code> in such a way that if <code>v1 : valuation R Gamma1</code> and <code>v2 : valuation R Gamma2</code> are equivalent then one is continuous iff the other one is. This should be the input to <code>Spv.lift</code> in order to descend continuity to <code>Spv R</code>.</p>
<p>In summary then,</p>
<div class="codehilite"><pre><span></span>R : Type u, Γ : Type u0, Γ1 : Type u1, Γ2 : Type u2
Spv R : Type u

Spv.mk  (v : valuation R Γ) : Spv R

value_group {R : Type u} : Spv R -&gt; Type u -- same universe

Spv.out : Pi (v : Spv(R)), valuation R (value_group v)

Spv.lift : ∀ (f : Σ Γ, valuation R Γ → X),
  (∀ v1 v2 : Σ Γ, valuation R Γ, is_equiv v1.2 v2.2)
  → Spv R → X
</pre></div>

<a name="160014574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160014574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160014574">Mario Carneiro (Mar 05 2019 at 15:59)</a>:</h4>
<p>Do you know if it's possible to have a single Gamma that can support all valuations in Spv R?</p>

<a name="160014586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160014586" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160014586">Mario Carneiro (Mar 05 2019 at 15:59)</a>:</h4>
<p>that would simplify a lot of this</p>

<a name="160014616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160014616" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160014616">Johan Commelin (Mar 05 2019 at 15:59)</a>:</h4>
<p>Huh, that sounds suspicious...</p>

<a name="160014726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160014726" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160014726">Johan Commelin (Mar 05 2019 at 16:00)</a>:</h4>
<p>I mean, you could take the coproduct of <code>value_group v</code> for all <code>v : Spv R</code></p>

<a name="160014739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160014739" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160014739">Mario Carneiro (Mar 05 2019 at 16:00)</a>:</h4>
<p>I don't think it's that crazy - we know there are only set many valuations over R up to equivalence, because they are determined by relations on R, so we just need a group that embeds all of those canonical groups</p>

<a name="160014753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160014753" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160014753">Johan Commelin (Mar 05 2019 at 16:01)</a>:</h4>
<p>But that sounds like a very ugly group to work with, and it is not linearly ordered</p>

<a name="160014766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160014766" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160014766">Mario Carneiro (Mar 05 2019 at 16:01)</a>:</h4>
<p>it has to be linear ordered too</p>

<a name="160014790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160014790" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160014790">Mario Carneiro (Mar 05 2019 at 16:01)</a>:</h4>
<p>is it possible to show that some valuations are incompatible with others?</p>

<a name="160014856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160014856" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160014856">Johan Commelin (Mar 05 2019 at 16:02)</a>:</h4>
<p>What do you mean precisely?</p>

<a name="160014902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160014902" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160014902">Mario Carneiro (Mar 05 2019 at 16:02)</a>:</h4>
<p>well, you said the coproduct is the natural answer but it's not linearly ordered. So either there is a way to order it, or maybe there is some innate reason it's impossible</p>

<a name="160015017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160015017" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160015017">Mario Carneiro (Mar 05 2019 at 16:04)</a>:</h4>
<p>what is the construction <code>value_group</code> again?</p>

<a name="160015047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160015047" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160015047">Johan Commelin (Mar 05 2019 at 16:04)</a>:</h4>
<p>Hmm, maybe lexicographic order works on the coproduct (but that is very non-canonical, since it depends on ordering <code>Spv</code>)</p>

<a name="160015166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160015166" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160015166">Johan Commelin (Mar 05 2019 at 16:06)</a>:</h4>
<p><code>value_group v</code> is <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>K</mi><mo>∗</mo></msup><mi mathvariant="normal">/</mi><msup><mi>A</mi><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">K^* / A^*</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mord mathrm">/</span><span class="mord"><span class="mord mathit">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span>, where <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi><mo>=</mo><mtext>Frac</mtext><mo>(</mo><mi>R</mi><mi mathvariant="normal">/</mi><mtext>supp</mtext><mo>(</mo><mi>v</mi><mo>)</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">K = \text{Frac}(R/ \text{supp} (v))</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07153em;">K</span><span class="mrel">=</span><span class="mord text"><span class="mord mathrm">Frac</span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathrm">/</span><span class="mord text"><span class="mord mathrm">supp</span></span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>=</mo><mo>{</mo><mi>k</mi><mo>∈</mo><mi>K</mi><mi mathvariant="normal">∣</mi><mi>v</mi><mo>(</mo><mi>k</mi><mo>)</mo><mo>≤</mo><mn>1</mn><mo>}</mo></mrow><annotation encoding="application/x-tex">A = \{k \in K | v (k) \le 1\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">A</span><span class="mrel">=</span><span class="mopen">{</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mrel">∈</span><span class="mord mathit" style="margin-right:0.07153em;">K</span><span class="mord mathrm">∣</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">)</span><span class="mrel">≤</span><span class="mord mathrm">1</span><span class="mclose">}</span></span></span></span></p>

<a name="160015207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160015207" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160015207">Mario Carneiro (Mar 05 2019 at 16:06)</a>:</h4>
<p>how is that ordered?</p>

<a name="160015243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160015243" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160015243">Johan Commelin (Mar 05 2019 at 16:07)</a>:</h4>
<p>By working hard (-;</p>

<a name="160015348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160015348" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160015348">Johan Commelin (Mar 05 2019 at 16:08)</a>:</h4>
<p>By extending <code>v</code> to <code>K</code> (implicit in the above formula) you get an inequality on <code>K</code>. This descends to a linear order on <code>value_group v</code>.</p>

<a name="160015361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160015361" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160015361">Johan Commelin (Mar 05 2019 at 16:08)</a>:</h4>
<p>(Or maybe I should say it lifts...)</p>

<a name="160015757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160015757" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160015757">Mario Carneiro (Mar 05 2019 at 16:13)</a>:</h4>
<p>So this linearly ordered group is supposed to be a multiplicative group, right, with a bottom element adjoined?</p>

<a name="160015768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160015768" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160015768">Mario Carneiro (Mar 05 2019 at 16:13)</a>:</h4>
<p>What happens to the one of the group?</p>

<a name="160015787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160015787" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160015787">Mario Carneiro (Mar 05 2019 at 16:13)</a>:</h4>
<p>won't they have to be identified in the coproduct?</p>

<a name="160015839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160015839" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160015839">Johan Commelin (Mar 05 2019 at 16:14)</a>:</h4>
<p>This is just a group. And (in math-speak) you show that <code>v</code> takes values in <code>value_group \cup {0}</code></p>

<a name="160015882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160015882" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160015882">Mario Carneiro (Mar 05 2019 at 16:14)</a>:</h4>
<p>(When I say multiplicative group I mean that 0 is the exceptional element not really in the group)</p>

<a name="160015884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160015884" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160015884">Sebastien Gouezel (Mar 05 2019 at 16:14)</a>:</h4>
<blockquote>
<p>(Or maybe I should say it lifts...)</p>
</blockquote>
<p>Please don't.</p>

<a name="160016007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160016007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160016007">Johan Commelin (Mar 05 2019 at 16:16)</a>:</h4>
<p><code>value_group v</code> is an honest multiplicative group. The bottom element is not yet adjoined. So if you take a coproduct of multiplicative groups, then the <code>1</code>s get identified.</p>

<a name="160016034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160016034" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160016034">Johan Commelin (Mar 05 2019 at 16:16)</a>:</h4>
<p>But this coproduct is really a hack. Maybe <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> knows of a better way to find a universal Gamma</p>

<a name="160016094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160016094" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160016094">Mario Carneiro (Mar 05 2019 at 16:17)</a>:</h4>
<p>I suspect it's a necessary condition, since if you have a family of valuations on the same group then you can linearly order them by looking at where they send a random non-one element</p>

<a name="160016180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160016180" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160016180">Johan Commelin (Mar 05 2019 at 16:18)</a>:</h4>
<p>Which condition is necessary?</p>

<a name="160016226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160016226" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160016226">Mario Carneiro (Mar 05 2019 at 16:18)</a>:</h4>
<p>That the set of valuations has a total order</p>

<a name="160016268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160016268" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160016268">Mario Carneiro (Mar 05 2019 at 16:19)</a>:</h4>
<p>once you have a total order on all the valuations the lex order is canonical</p>

<a name="160016281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160016281" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160016281">Johan Commelin (Mar 05 2019 at 16:19)</a>:</h4>
<p>Ooh, but different valuations may send your random non-one element to the same <code>gamma : Gamma</code>.</p>

<a name="160017808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160017808" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160017808">Mario Carneiro (Mar 05 2019 at 16:34)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Okay, I think you had the right idea after all. The only thing I would change about your last post is that the sigmas should be uncurried:</p>
<div class="codehilite"><pre><span></span><span class="n">Spv</span><span class="bp">.</span><span class="n">lift</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span> <span class="err">Γ</span><span class="o">,</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span> <span class="bp">→</span> <span class="n">X</span><span class="o">),</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="err">Γ</span><span class="mi">1</span> <span class="err">Γ</span><span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">v1</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">v2</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span><span class="mi">2</span><span class="o">),</span> <span class="n">is_equiv</span> <span class="n">v1</span> <span class="n">v2</span><span class="o">)</span>
  <span class="bp">→</span> <span class="n">Spv</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">X</span>

<span class="n">Spv</span><span class="bp">.</span><span class="n">lift</span> <span class="n">f</span> <span class="n">H</span> <span class="o">(</span><span class="n">Spv</span><span class="bp">.</span><span class="n">mk</span> <span class="n">v</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="err">Γ</span> <span class="n">v</span>
</pre></div>

<a name="160018035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160018035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160018035">Mario Carneiro (Mar 05 2019 at 16:37)</a>:</h4>
<p>Note that <code>f</code> here necessarily cannot range over all gammas in all universes, so you can only use the final equation when v has an appropriate universe for its value group</p>

<a name="160019298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160019298" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160019298">Mario Carneiro (Mar 05 2019 at 16:54)</a>:</h4>
<p>Actually, I think this will work better than the traditional mk/lift approach for quotients:</p>
<div class="codehilite"><pre><span></span><span class="n">universes</span> <span class="n">u</span> <span class="n">u0</span> <span class="n">u1</span> <span class="n">u2</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="err">Γ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u0</span><span class="o">}</span> <span class="o">{</span><span class="err">Γ</span><span class="mi">1</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u1</span><span class="o">}</span> <span class="o">{</span><span class="err">Γ</span><span class="mi">2</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u2</span><span class="o">}</span>
<span class="kn">constant</span> <span class="n">Spv</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span>
<span class="kn">constant</span> <span class="n">valuation</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="err">Γ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u0</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="n">max</span> <span class="n">u</span> <span class="n">u0</span><span class="o">)</span>
<span class="kn">constant</span> <span class="n">Spv</span><span class="bp">.</span><span class="n">mk</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span><span class="o">)</span> <span class="o">:</span> <span class="n">Spv</span> <span class="n">R</span>
<span class="kn">constant</span> <span class="n">value_group</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">:</span> <span class="n">Spv</span> <span class="n">R</span> <span class="bp">-&gt;</span> <span class="kt">Type</span> <span class="n">u</span>
<span class="kn">constant</span> <span class="n">Spv</span><span class="bp">.</span><span class="n">out</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">Spv</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="o">(</span><span class="n">value_group</span> <span class="n">v</span><span class="o">)</span>
<span class="kn">constant</span> <span class="n">valuation</span><span class="bp">.</span><span class="n">is_equiv</span> <span class="o">(</span><span class="n">v₁</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">v₂</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span><span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span>

<span class="n">noncomputable</span> <span class="n">def</span> <span class="n">Spv</span><span class="bp">.</span><span class="n">lift</span> <span class="o">{</span><span class="n">X</span><span class="o">}</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">⦃</span><span class="err">Γ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">⦄,</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">Spv</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">X</span> <span class="o">:=</span>
<span class="n">f</span> <span class="o">(</span><span class="n">Spv</span><span class="bp">.</span><span class="n">out</span> <span class="n">v</span><span class="o">)</span>

<span class="kn">theorem</span> <span class="n">Spv</span><span class="bp">.</span><span class="n">lift_eq</span> <span class="o">{</span><span class="n">X</span><span class="o">}</span>
  <span class="o">(</span><span class="n">f₁</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">⦃</span><span class="err">Γ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">⦄,</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span>
  <span class="o">(</span><span class="n">f₂</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">⦃</span><span class="err">Γ</span><span class="mi">2</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u2</span><span class="o">⦄,</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span><span class="mi">2</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span>
  <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span><span class="mi">2</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">⦃</span><span class="err">Γ</span><span class="o">⦄</span> <span class="o">(</span><span class="n">v₁</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ</span><span class="o">),</span> <span class="n">v₁</span><span class="bp">.</span><span class="n">is_equiv</span> <span class="n">v</span> <span class="bp">→</span> <span class="n">f₁</span> <span class="n">v₁</span> <span class="bp">=</span> <span class="n">f₂</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">Spv</span><span class="bp">.</span><span class="n">lift</span> <span class="n">f₁</span> <span class="o">(</span><span class="n">Spv</span><span class="bp">.</span><span class="n">mk</span> <span class="n">v</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f₂</span> <span class="n">v</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>


<p>Here the proof of equality is delayed until the lift/mk rule, rather than being embedded in the lift function itself. This makes sense since you are defining it using <code>Spv.out</code> anyway, and by delaying the proof until the equality is used, you can have the equality use a different universe variable than the one it was originally defined with</p>

<a name="160019480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160019480" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160019480">Kevin Buzzard (Mar 05 2019 at 16:56)</a>:</h4>
<p>Thanks for pointing out this subtlety.</p>

<a name="160019499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160019499" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160019499">Kevin Buzzard (Mar 05 2019 at 16:56)</a>:</h4>
<p>Yes you're absolutely right, we don't need the equivalence in the definition of lift.</p>

<a name="160020628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160020628" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160020628">Johan Commelin (Mar 05 2019 at 17:10)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Cool, I like this idea.</p>

<a name="160020726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160020726" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160020726">Johan Commelin (Mar 05 2019 at 17:11)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I think we should forget about computable <code>out</code> until we have done a bunch of other stuff. It shouldn't affect any of the code that comes after it anyway. So we should be able to change the definition of <code>out</code> later on...</p>

<a name="160020741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160020741" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160020741">Johan Commelin (Mar 05 2019 at 17:11)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Or do you think this is a dangerous idea?</p>

<a name="160027955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160027955" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160027955">Mario Carneiro (Mar 05 2019 at 18:39)</a>:</h4>
<p>I think you shouldn't worry about anything being noncomputable here</p>

<a name="160028033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160028033" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160028033">Mario Carneiro (Mar 05 2019 at 18:39)</a>:</h4>
<p>In particular <code>quot.out</code> is noncomputable anyway so if your version of it is too then it's not a big surprise</p>

<a name="160092355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160092355" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160092355">Johan Commelin (Mar 06 2019 at 12:53)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> We have probably discussed this before, but I'd like to hear your opinion again.<br>
Currently, we are defining a topology on <code>Spv</code> as follows:</p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">basic_open</span> <span class="o">(</span><span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">Spv</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">v</span> <span class="bp">|</span> <span class="n">v</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">v</span> <span class="n">s</span> <span class="bp">∧</span> <span class="n">v</span> <span class="n">s</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">}</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">Spv</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">topological_space</span><span class="bp">.</span><span class="n">generate_from</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">Spv</span> <span class="n">R</span><span class="o">)</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">U</span> <span class="bp">=</span> <span class="n">basic_open</span> <span class="n">r</span> <span class="n">s</span><span class="o">}</span>
</pre></div>

<a name="160092427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160092427" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160092427">Johan Commelin (Mar 06 2019 at 12:54)</a>:</h4>
<p>This definition completely ignores the question whether those basic opens are independent of the representative of <code>v</code>.</p>

<a name="160092440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160092440" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160092440">Johan Commelin (Mar 06 2019 at 12:54)</a>:</h4>
<p>Is that a problem?</p>

<a name="160092460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160092460" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160092460">Johan Commelin (Mar 06 2019 at 12:54)</a>:</h4>
<p>To parse the definition of <code>basic_open</code> you need to know</p>
<div class="codehilite"><pre><span></span><span class="n">noncomputable</span> <span class="kn">instance</span> <span class="o">:</span> <span class="n">has_coe_to_fun</span> <span class="o">(</span><span class="n">Spv</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">F</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">v</span><span class="o">,</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">with_zero</span> <span class="o">(</span><span class="n">out_</span><span class="err">Γ</span> <span class="n">v</span><span class="o">),</span>
  <span class="n">coe</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">v</span><span class="o">,</span> <span class="o">(</span><span class="n">out</span> <span class="n">v</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="o">}</span>
</pre></div>

<a name="160095100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160095100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160095100">Kevin Buzzard (Mar 06 2019 at 13:32)</a>:</h4>
<p>Johan can't we define it as <code>r &lt;=[v] s</code> ?</p>

<a name="160095154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160095154" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160095154">Kevin Buzzard (Mar 06 2019 at 13:32)</a>:</h4>
<p>This must be what you mean. What is your question?</p>

<a name="160095328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160095328" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160095328">Johan Commelin (Mar 06 2019 at 13:34)</a>:</h4>
<p>That notation is nice, but then <code>v s ≠ 0</code> becomes ugly. Or we also need notation for that...</p>

<a name="160095363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160095363" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160095363">Kevin Buzzard (Mar 06 2019 at 13:35)</a>:</h4>
<p><code>0 &lt;[v] s</code></p>

<a name="160095470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160095470" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160095470">Johan Commelin (Mar 06 2019 at 13:36)</a>:</h4>
<p>Sure... we could do that... of course it is math-equal to <code>v s ≠ 0</code>.</p>

<a name="160095510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160095510" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160095510">Kevin Buzzard (Mar 06 2019 at 13:36)</a>:</h4>
<p>Isn't there some le_zero result which proves they're lean-equal too.</p>

<a name="160095539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160095539" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160095539">Johan Commelin (Mar 06 2019 at 13:37)</a>:</h4>
<p>What I mean is that it won't be defeq, not notational-eq. Mathematicians will not immediately recognise the definition. And they will find it odd. I don't know if we care.</p>

<a name="160485626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160485626" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160485626">Johan Commelin (Mar 11 2019 at 14:57)</a>:</h4>
<p>The most unreadable definition in the project so far:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">away_ring_of_definition</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">is_ring_of_definition</span> <span class="n">A₀</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">set</span> <span class="o">(</span><span class="n">away</span> <span class="n">s</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">let</span> <span class="n">E</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">away</span> <span class="n">s</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">*</span><span class="o">)</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="o">(</span><span class="n">of</span> <span class="err">&#39;&#39;</span> <span class="n">T</span><span class="o">)</span> <span class="bp">&lt;*&gt;</span> <span class="o">{</span> <span class="o">((</span><span class="n">to_units</span> <span class="bp">⟨</span><span class="n">s</span><span class="o">,</span> <span class="bp">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span><span class="bp">⟩⟩</span><span class="o">)</span><span class="bp">⁻¹</span> <span class="o">:</span> <span class="n">units</span> <span class="o">(</span><span class="n">away</span> <span class="n">s</span><span class="o">))</span> <span class="o">}</span> <span class="k">in</span>
<span class="n">ring</span><span class="bp">.</span><span class="n">closure</span> <span class="o">(</span><span class="n">of</span> <span class="err">&#39;&#39;</span> <span class="n">A₀</span> <span class="err">∪</span> <span class="n">E</span><span class="o">)</span>
</pre></div>


<p>This is saying: look at the subring generated by <code>A₀</code> and <code>E := {t_1/s, ..., t_n/s}</code> (where <code>{t_1, ..., t_n} := T</code>).</p>

<a name="160486195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160486195" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160486195">Kevin Buzzard (Mar 11 2019 at 15:03)</a>:</h4>
<p>What is this <code>&lt;$&gt;</code>?</p>

<a name="160486202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160486202" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160486202">Kevin Buzzard (Mar 11 2019 at 15:03)</a>:</h4>
<p>And <code>&lt;*&gt;</code>?</p>

<a name="160486209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160486209" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160486209">Johan Commelin (Mar 11 2019 at 15:03)</a>:</h4>
<p>I don't know. I think it is called <code>seq</code></p>

<a name="160486274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160486274" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160486274">Kevin Buzzard (Mar 11 2019 at 15:04)</a>:</h4>
<p><code>(*)</code> is just multiplication but as a prefix operator not infix, I _think_...</p>

<a name="160486527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160486527" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160486527">Kevin Buzzard (Mar 11 2019 at 15:07)</a>:</h4>
<p>Part of the reason this is a mess is that we can't do things like <code>[t/s for t in T]</code> in a readable way, I guess.</p>

<a name="160486553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160486553" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160486553">Johan Commelin (Mar 11 2019 at 15:07)</a>:</h4>
<p>That would be awesome</p>

<a name="160486561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160486561" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160486561">Kevin Buzzard (Mar 11 2019 at 15:07)</a>:</h4>
<p>Can we do it in Lean 4?</p>

<a name="160486578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160486578" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160486578">Kevin Buzzard (Mar 11 2019 at 15:07)</a>:</h4>
<p>We really want <code>[f(x) for x in X if pred(x)]</code> I guess</p>

<a name="160486581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160486581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160486581">Patrick Massot (Mar 11 2019 at 15:07)</a>:</h4>
<p>I've been saying this for ages: if the Lean 4 parser bring us python's list comprehension the nothing will ever be able to stop Lean</p>

<a name="160486665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160486665" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160486665">Patrick Massot (Mar 11 2019 at 15:08)</a>:</h4>
<p>But <span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> knows it already</p>

<a name="160486688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160486688" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160486688">Kevin Buzzard (Mar 11 2019 at 15:08)</a>:</h4>
<p>Does he think it might be possible?</p>

<a name="160486713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160486713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160486713">Patrick Massot (Mar 11 2019 at 15:09)</a>:</h4>
<p>He thinks everything will be possible with the Lean 4 parser, this is his Mission.</p>

<a name="160486723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160486723" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160486723">Kevin Buzzard (Mar 11 2019 at 15:09)</a>:</h4>
<p>Oh great :-)</p>

<a name="160486735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160486735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160486735">Patrick Massot (Mar 11 2019 at 15:09)</a>:</h4>
<p>I believe this is even his PhD thesis topic</p>

<a name="160486747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160486747" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160486747">Kevin Buzzard (Mar 11 2019 at 15:09)</a>:</h4>
<p>Oh even better!</p>

<a name="160486838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160486838" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160486838">Patrick Massot (Mar 11 2019 at 15:10)</a>:</h4>
<p>In the mean time we can use the unreadable way together with a good docstring displaying wht we mean</p>

<a name="160486894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160486894" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160486894">Kevin Buzzard (Mar 11 2019 at 15:11)</a>:</h4>
<p><code>ring.closure (of '' A_0 \union {t/s for t in of '' T})</code> looks much better</p>

<a name="160487106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160487106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160487106">Johan Commelin (Mar 11 2019 at 15:13)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">t</span> <span class="err">∈</span> <span class="n">T</span><span class="o">,</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">of</span> <span class="n">t</span> <span class="bp">*</span> <span class="o">((</span><span class="n">to_units</span> <span class="bp">⟨</span><span class="n">s</span><span class="o">,</span> <span class="bp">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span><span class="bp">⟩⟩</span><span class="o">)</span><span class="bp">⁻¹</span> <span class="o">:</span> <span class="n">units</span> <span class="o">(</span><span class="n">away</span> <span class="n">s</span><span class="o">))</span> <span class="o">}</span>
</pre></div>


<p>This is probably defeq to the runes I casted above. And maybe slightly more readable. It's still a very awkard way of dividing by <code>s</code>.</p>

<a name="160487167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160487167" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160487167">Kevin Buzzard (Mar 11 2019 at 15:14)</a>:</h4>
<p>Johan, I guess you could define <code>s_inv</code> in <code>away s</code> with another <code>let</code> and I guess you could define E to be the image of lam t, of t * s_inv<code>, and that would make it look a bit less insane. All this </code>&lt;$&gt; &lt;*&gt;` business is for multiplying general sets together, right? And one of your sets only has one element.</p>

<a name="160487234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160487234" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160487234">Kevin Buzzard (Mar 11 2019 at 15:15)</a>:</h4>
<p>right.</p>

<a name="160487236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160487236" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160487236">Johan Commelin (Mar 11 2019 at 15:15)</a>:</h4>
<p>Yes another alternative:</p>
<div class="codehilite"><pre><span></span><span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">t</span> <span class="err">∈</span> <span class="n">T</span><span class="o">,</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">localization</span><span class="bp">.</span><span class="n">mk</span> <span class="n">t</span> <span class="bp">⟨</span><span class="n">s</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span><span class="bp">⟩</span> <span class="o">}</span>
</pre></div>

<a name="160487641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160487641" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160487641">Kevin Buzzard (Mar 11 2019 at 15:19)</a>:</h4>
<p>One could define a new constructor <code>of_inv : S -&gt; R[1/S]</code> and hide it away. This would be better if R[1/S] was defined for an arbitrary set S as R[1/(monid generated by S)].</p>

<a name="160592985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160592985" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160592985">Johan Commelin (Mar 12 2019 at 17:52)</a>:</h4>
<p>Currently we have the following definition in the perfectoid project:</p>
<div class="codehilite"><pre><span></span><span class="kn">variables</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_ring</span> <span class="n">A</span><span class="o">]</span>

<span class="kn">structure</span> <span class="n">Huber_ring</span><span class="bp">.</span><span class="n">pair_of_definition</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">A₀</span>   <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span>
<span class="o">[</span><span class="n">Hr</span>   <span class="o">:</span> <span class="n">is_subring</span> <span class="n">A₀</span><span class="o">]</span>
<span class="o">(</span><span class="n">Ho</span>   <span class="o">:</span> <span class="n">is_open</span> <span class="n">A₀</span><span class="o">)</span>
<span class="o">(</span><span class="n">J</span>    <span class="o">:</span> <span class="n">ideal</span> <span class="n">A₀</span><span class="o">)</span>
<span class="o">(</span><span class="n">fin</span>  <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">gen</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A₀</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="o">:</span> <span class="n">fintype</span> <span class="n">gen</span><span class="o">),</span> <span class="n">ideal</span><span class="bp">.</span><span class="n">span</span> <span class="n">gen</span> <span class="bp">=</span> <span class="n">J</span><span class="o">)</span>
<span class="o">(</span><span class="n">top</span>  <span class="o">:</span> <span class="bp">@</span><span class="n">is_ideal_adic</span> <span class="bp">_</span> <span class="o">(</span><span class="n">subset</span><span class="bp">.</span><span class="n">comm_ring</span><span class="o">)</span> <span class="bp">_</span> <span class="o">(</span><span class="n">topological_subring</span> <span class="n">A₀</span><span class="o">)</span> <span class="n">J</span><span class="o">)</span>
</pre></div>


<p>However, the first example (<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="double-struck">Z</mi><mi>p</mi></msub><mo>⊂</mo><msub><mi mathvariant="double-struck">Q</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">\mathbb{Z}_p \subset \mathbb{Q}_p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68889em;"></span><span class="strut bottom" style="height:0.974998em;vertical-align:-0.286108em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mord mathbb">Z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span><span class="mrel">⊂</span><span class="mord"><span class="mord"><span class="mord mathbb">Q</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span></span></span></span>) does not actually fit in this setup very well, because <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi mathvariant="double-struck">Z</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">\mathbb{Z}_p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68889em;"></span><span class="strut bottom" style="height:0.974998em;vertical-align:-0.286108em;"></span><span class="base"><span class="mord"><span class="mord"><span class="mord mathbb">Z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span></span></span></span> is a subtype instead of a subset. So now I am considering to change the above definition, so that <code>A_0</code> is a type instead of a set, equipped with an injective continuous ring homomorphism to <code>A</code>.<br>
One issue with that approach is that we would have to choose a universe for <code>A_0</code>. But probably we could just put it in the same universe as <code>A</code>.<br>
Are there other reasons why this approach might be a bad idea? Or is this the right way to go in DTT?</p>

<a name="160604331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160604331" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160604331">Kevin Buzzard (Mar 12 2019 at 19:56)</a>:</h4>
<p>Won't it mean that every single one of those proofs you've been working on will get much messier because you'll constantly be having to apply some function from the small ring to the big one, moving subgroups of the small one to subgroups on the big one, open sets in the small one to open sets in the big one, and so on?</p>

<a name="160604489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160604489" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160604489">Kevin Buzzard (Mar 12 2019 at 19:58)</a>:</h4>
<p>And eventually you'll start to have cute little ideas such as "I know, why don't I formulate this statement not about subsets of the small ring but subsets of the big ring, so I don't have to keep wasting my time pulling back"</p>

<a name="160604555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160604555" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160604555">Johan Commelin (Mar 12 2019 at 19:59)</a>:</h4>
<p>Hmmm... I guess that's true</p>

<a name="160604582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160604582" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160604582">Kevin Buzzard (Mar 12 2019 at 19:59)</a>:</h4>
<p>Or "I know, why don't I just have a predicate on the big ring to say I'm in the image of the small ring, to save me from having to pull back"</p>

<a name="160604670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160604670" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160604670">Kevin Buzzard (Mar 12 2019 at 20:00)</a>:</h4>
<p>And then you will be back where you started :-)</p>

<a name="160604771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160604771" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160604771">Kevin Buzzard (Mar 12 2019 at 20:01)</a>:</h4>
<p>I have this vague recollection that Mario suggested not introducing new types as fields in a structure, but perhaps this was for universe issues</p>

<a name="160604873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160604873" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160604873">Kevin Buzzard (Mar 12 2019 at 20:02)</a>:</h4>
<p>What happens if we are in a situation where the universe doesn't match up anyway? What if the small ring turned out to be in a smaller universe for some reason?</p>

<a name="160604905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160604905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160604905">Kevin Buzzard (Mar 12 2019 at 20:03)</a>:</h4>
<p>I am not an expert but to me the set idea looks better.</p>

<a name="160604948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160604948" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160604948">Johan Commelin (Mar 12 2019 at 20:04)</a>:</h4>
<p>Ok...</p>

<a name="160604994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160604994" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160604994">Patrick Massot (Mar 12 2019 at 20:04)</a>:</h4>
<p>It's funny, I had the same kind of trouble earlier today (and I chose the function, not the set...)</p>

<a name="160605020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160605020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160605020">Johan Commelin (Mar 12 2019 at 20:04)</a>:</h4>
<p>It does mean that we have to port lots of things back and forth between Z_p the subtype and Z_p the subset.</p>

<a name="160629358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160629358" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160629358">Mario Carneiro (Mar 13 2019 at 02:21)</a>:</h4>
<p>I think you are right. You should make A0 a type and pull it out of the structure</p>

<a name="160629439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160629439" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160629439">Mario Carneiro (Mar 13 2019 at 02:23)</a>:</h4>
<blockquote>
<p>Won't it mean that every single one of those proofs you've been working on will get much messier because you'll constantly be having to apply some function from the small ring to the big one, moving subgroups of the small one to subgroups on the big one, open sets in the small one to open sets in the big one, and so on?</p>
</blockquote>
<p>That function is already there even with sets. You want to talk about A0 as a ring so you needed <code>subset.ring</code>, which I'm guessing is why we had that diamond discussion yesterday. Here the ring structure is previously imposed, and you use <code>comap</code> to transfer stuff instead of <code>subtype.val</code></p>

<a name="160641564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160641564" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160641564">Johan Commelin (Mar 13 2019 at 07:25)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> It is true that there are a number of proofs that I currently close by <code>rfl</code> because two subsets are defeq. Those might become a bit more complicated.</p>

<a name="160641569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160641569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160641569">Mario Carneiro (Mar 13 2019 at 07:25)</a>:</h4>
<p>why would it?</p>

<a name="160641570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160641570" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160641570">Johan Commelin (Mar 13 2019 at 07:25)</a>:</h4>
<p>Anyway, I guess I should just try a little experiment. <code>git</code> supports branches for a reason.</p>

<a name="160641574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160641574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160641574">Mario Carneiro (Mar 13 2019 at 07:25)</a>:</h4>
<p>if the sets are defeq so would the types</p>

<a name="160641629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160641629" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160641629">Johan Commelin (Mar 13 2019 at 07:26)</a>:</h4>
<p>Aah, you are saying that the only difference is in making the function explicit?</p>

<a name="160641633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160641633" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160641633">Mario Carneiro (Mar 13 2019 at 07:26)</a>:</h4>
<p>yes</p>

<a name="160641642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160641642" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160641642">Mario Carneiro (Mar 13 2019 at 07:26)</a>:</h4>
<p>in DTT there is always a function, this is just making it more general</p>

<a name="160641644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160641644" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160641644">Johan Commelin (Mar 13 2019 at 07:27)</a>:</h4>
<p>Once I'm in my office I'll try the experiment.</p>

<a name="160641741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160641741" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160641741">Johan Commelin (Mar 13 2019 at 07:29)</a>:</h4>
<p>And about the universe? I guess we shouldn't generalise that, right?</p>

<a name="160641743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160641743" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160641743">Johan Commelin (Mar 13 2019 at 07:29)</a>:</h4>
<p>Just stick to the same universe as <code>A</code>?</p>

<a name="160641789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160641789" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160641789">Kevin Buzzard (Mar 13 2019 at 07:30)</a>:</h4>
<p>If you use a subtype, then proving two subtypes are equal is the same as proving P iff Q, which is proving a Prop. If you used injective maps then you're going to run into the issue that the sources aren't equal only equiv. For me, subsets and subtypes are kind of the same modulo some pointy brackets, but injective maps sound like they'll be much harder to work with</p>

<a name="160641798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160641798" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160641798">Kevin Buzzard (Mar 13 2019 at 07:30)</a>:</h4>
<p>I don't understand why there's now a universe question at all</p>

<a name="160642030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160642030" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160642030">Mario Carneiro (Mar 13 2019 at 07:36)</a>:</h4>
<p>The universe should be generalized if it gets pulled out of the type</p>

<a name="160642049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160642049" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160642049">Mario Carneiro (Mar 13 2019 at 07:37)</a>:</h4>
<p>but Kevin has a point that general injective maps involve a property that wasn't needed in the subset situation</p>

<a name="160642137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160642137" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160642137">Johan Commelin (Mar 13 2019 at 07:38)</a>:</h4>
<p>I would need to impose 3 properties: that the map is injective, a ring hom, and an open embedding..</p>

<a name="160642230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160642230" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160642230">Johan Commelin (Mar 13 2019 at 07:40)</a>:</h4>
<p>Alternatively, would it make sense to turn <code>Z_[p]</code> into a subset? That also feels morally wrong. I guess this is just the pain of DTT. Just like <code>nat</code> is not a subset of <code>int</code> is not a subset of <code>rat</code> is not a ...</p>

<a name="160642246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160642246" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160642246">Johan Commelin (Mar 13 2019 at 07:40)</a>:</h4>
<p>But it also feels wrong to duplicate every result about <code>Z_[p]</code> for the subset version...</p>

<a name="160642364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160642364" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160642364">Mario Carneiro (Mar 13 2019 at 07:44)</a>:</h4>
<p>I think it looks like this (doesn't typecheck on my computer of course):</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">Huber_ring</span><span class="bp">.</span><span class="n">pair_of_definition</span>
  <span class="o">(</span><span class="n">A₀</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">A₀</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">A₀</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_ring</span> <span class="n">A₀</span><span class="o">]</span>
  <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_ring</span> <span class="n">A</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A₀</span> <span class="bp">→</span> <span class="n">A</span><span class="o">)</span>
<span class="o">(</span><span class="n">inj</span> <span class="o">:</span> <span class="n">function</span><span class="bp">.</span><span class="n">injective</span> <span class="n">f</span><span class="o">)</span>
<span class="o">(</span><span class="n">Hr</span> <span class="o">:</span> <span class="n">is_ring_hom</span> <span class="n">f</span><span class="o">)</span>
<span class="o">(</span><span class="n">Ho</span> <span class="o">:</span> <span class="n">is_open</span> <span class="o">(</span><span class="n">range</span> <span class="n">f</span><span class="o">))</span>
<span class="o">(</span><span class="n">J</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">A₀</span><span class="o">)</span>
<span class="o">(</span><span class="n">fin</span>  <span class="o">:</span> <span class="bp">∃</span> <span class="n">gen</span><span class="o">,</span> <span class="n">finite</span> <span class="n">gen</span> <span class="bp">∧</span> <span class="n">ideal</span><span class="bp">.</span><span class="n">span</span> <span class="n">gen</span> <span class="bp">=</span> <span class="n">J</span><span class="o">)</span>
<span class="o">(</span><span class="n">top</span>  <span class="o">:</span> <span class="n">is_ideal_adic</span> <span class="n">J</span><span class="o">)</span>
</pre></div>

<a name="160642441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160642441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160642441">Mario Carneiro (Mar 13 2019 at 07:45)</a>:</h4>
<p>Oh, you are right that you have to add the open embedding property. I think that implies injective</p>

<a name="160642751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Perfectoid%20spaces/near/160642751" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/04805Perfectoidspaces.html#160642751">Johan Commelin (Mar 13 2019 at 07:52)</a>:</h4>
<p>minor technical remark: once we pull <code>A₀</code> out of the structure, I think we should call this <code>ring_of_definition</code>.<br>
And now the definition of <code>Huber_ring</code> becomes something like</p>
<div class="codehilite"><pre><span></span><span class="bp">∃</span> <span class="o">(</span><span class="n">A₀</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">A₀</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">A₀</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_ring</span> <span class="n">A₀</span><span class="o">],</span>
  <span class="k">by</span> <span class="n">resetI</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">nonempty</span> <span class="o">(</span><span class="n">ring_of_definition</span> <span class="n">A₀</span> <span class="n">A</span><span class="o">)</span>
</pre></div>


{% endraw %}
