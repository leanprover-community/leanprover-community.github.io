---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/14314QdenseinR.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html">Q dense in R</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="152627608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152627608" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152627608">Kevin Buzzard (Dec 28 2018 at 00:15)</a>:</h4>
<p><code>theorem rationals_dense (x y : ℝ) (H : x &lt; y) : ∃ q : ℚ, x &lt; q ∧ (q : ℝ) &lt; y :=</code> Where is this now? I think it was explicitly there before the reals were refactored. Now there is <code>dense_embedding_of_rat</code> but then I have to work to get the statement I want.</p>

<a name="152627809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152627809" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152627809">Reid Barton (Dec 28 2018 at 00:20)</a>:</h4>
<p><code>algebra.archimedean</code> has some similar things</p>

<a name="152634813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152634813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152634813">Mario Carneiro (Dec 28 2018 at 04:09)</a>:</h4>
<p>the rationals are archimedean, so <code>exists_rat_btwn</code> will work. Also the rationals are dense, so <code>dense</code> will work</p>

<a name="152634858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152634858" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152634858">Mario Carneiro (Dec 28 2018 at 04:10)</a>:</h4>
<p>oh wait that last one is just rationals between rationals, with no casting</p>

<a name="152655840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152655840" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152655840">Kevin Buzzard (Dec 28 2018 at 14:21)</a>:</h4>
<p>Aah, thanks to both of you. I'm looking in the wrong places. That was silly of me -- I even lectured this term on the fact that unboundedness of Z in R implied this fact.</p>

<a name="152666498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152666498" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152666498">Kevin Buzzard (Dec 28 2018 at 18:41)</a>:</h4>
<p>I want the coercion from Q to R to be different somehow. Look at this question the first years will be asked next term: "Let <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.05764em;">S</span></span></span></span> be a non-empty bounded above set of reals. True or false: if <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mo>⊆</mo><mrow><mi mathvariant="double-struck">Q</mi></mrow></mrow><annotation encoding="application/x-tex">S\subseteq\mathbb{Q}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68889em;"></span><span class="strut bottom" style="height:0.85556em;vertical-align:-0.16667em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mrel">⊆</span><span class="mord"><span class="mord mathbb">Q</span></span></span></span></span> then <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>u</mi><mi>p</mi><mo>(</mo><mi>S</mi><mo>)</mo><mo>∈</mo><mrow><mi mathvariant="double-struck">Q</mi></mrow></mrow><annotation encoding="application/x-tex">sup(S)\in\mathbb{Q}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mord mathit">p</span><span class="mopen">(</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mclose">)</span><span class="mrel">∈</span><span class="mord"><span class="mord mathbb">Q</span></span></span></span></span>. How do I make the Lean formalisation of this question less ugly? [added later: this is just one part of a multi-part question about a non-empty bounded-above set of reals <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.05764em;">S</span></span></span></span> so we don't really want to change the definition of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.05764em;">S</span></span></span></span> itself]</p>

<a name="152666549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152666549" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152666549">Kevin Buzzard (Dec 28 2018 at 18:42)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>

<span class="c1">-- structure or class?</span>
<span class="kn">structure</span> <span class="n">real</span><span class="bp">.</span><span class="n">rat1</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span>
<span class="o">(</span><span class="n">pf</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">q</span><span class="o">)</span>

<span class="kn">definition</span> <span class="n">real</span><span class="bp">.</span><span class="n">rat2</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∃</span> <span class="n">q</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">,</span> <span class="n">r</span> <span class="bp">=</span> <span class="n">q</span>
</pre></div>


<p>Are these functions in Lean already? What are they / should they be called?</p>

<a name="152672823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152672823" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152672823">Mario Carneiro (Dec 28 2018 at 20:58)</a>:</h4>
<p>As usual, this is nonidiomatic lean and so it's less than nice to say. It is equivalent to talk about the supremum of a family <code>f : I -&gt; Q</code></p>

<a name="152672849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152672849" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152672849">Mario Carneiro (Dec 28 2018 at 20:59)</a>:</h4>
<p>alternatively, you can let <code>S : set Q</code> and have its interpretation in <code>R</code> be <code>(coe '' S)</code></p>

<a name="152672917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152672917" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152672917">Mario Carneiro (Dec 28 2018 at 21:00)</a>:</h4>
<p>alternatively <code>S : set R</code> and <code>S \sub range coe</code></p>

<a name="152672923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152672923" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152672923">Kevin Buzzard (Dec 28 2018 at 21:00)</a>:</h4>
<p>Oh that's better</p>

<a name="152672949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152672949" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152672949">Mario Carneiro (Dec 28 2018 at 21:01)</a>:</h4>
<p>if I wasn't constrained by aiming for a direct translation I would certainly go for the first option</p>

<a name="152673077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152673077" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152673077">Mario Carneiro (Dec 28 2018 at 21:04)</a>:</h4>
<p>I think we could define <code>real.rats, real.nats : set R</code> in the obvious way and use that</p>

<a name="152675391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152675391" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152675391">Kevin Buzzard (Dec 28 2018 at 21:59)</a>:</h4>
<p>and now I have to reprove things like <code>real.rats x -&gt; real.rats y -&gt; real.rats (x + y)</code>?</p>

<a name="152675592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152675592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152675592">Kevin Buzzard (Dec 28 2018 at 22:04)</a>:</h4>
<p>I am not 100% clear on what needs proving actually. There's a lemma which says that + on Q and R coincide, and that's kind of why I need to prove the thing above. But there's another lemma which says that &lt; on Q and R coincide, and that doesn't seem to correspond to something I need to prove here.</p>

<a name="152696668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152696668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152696668">Mario Carneiro (Dec 29 2018 at 08:24)</a>:</h4>
<p>well, it's a set so you would want to write that <code>x \in rats -&gt; y \in rats -&gt; x + y \in rats</code>, but yes, and it follows from <code>rat.cast_add</code></p>

<a name="152696679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152696679" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152696679">Mario Carneiro (Dec 29 2018 at 08:25)</a>:</h4>
<p>and you are right, there isn't really an analogue for <code>rat.cast_le</code></p>

<a name="152696719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152696719" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152696719">Mario Carneiro (Dec 29 2018 at 08:26)</a>:</h4>
<p>it's just the set of rational numbers, as a subset of R</p>

<a name="152696720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152696720" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152696720">Mario Carneiro (Dec 29 2018 at 08:26)</a>:</h4>
<p>all the operations are real operations</p>

<a name="152696726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152696726" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152696726">Mario Carneiro (Dec 29 2018 at 08:27)</a>:</h4>
<p>you can do many things with such a set, the idea is when you need a set and not a type. For example <code>closure rats = univ</code> is hard to state otherwise</p>

<a name="152699297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Q%20dense%20in%20R/near/152699297" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14314QdenseinR.html#152699297">Chris Hughes (Dec 29 2018 at 10:01)</a>:</h4>
<p>(deleted)</p>


{% endraw %}

{% include archive_update.html %}