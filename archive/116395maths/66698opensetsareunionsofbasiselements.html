---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/66698opensetsareunionsofbasiselements.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html">open sets are unions of basis elements</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="126495112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495112" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495112">Kevin Buzzard (May 13 2018 at 11:30)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">topology</span><span class="bp">.</span><span class="n">topological_space</span>
<span class="kn">open</span> <span class="n">topological_space</span>
<span class="kn">universe</span> <span class="n">u</span>

<span class="kn">lemma</span> <span class="n">union_basis_elemnts_of_open</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span>
<span class="o">{</span><span class="n">B</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)}</span> <span class="o">(</span><span class="n">HB</span> <span class="o">:</span> <span class="n">is_topological_basis</span> <span class="n">B</span><span class="o">)</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">HU</span> <span class="o">:</span> <span class="n">is_open</span> <span class="n">U</span><span class="o">)</span> <span class="o">:</span>
<span class="bp">∃</span> <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">α</span><span class="o">),</span> <span class="n">U</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">Union</span> <span class="n">f</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">β</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">B</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">β</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">//</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">U</span><span class="o">},</span>
  <span class="n">existsi</span> <span class="n">β</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">f0</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">i</span> <span class="o">:</span> <span class="n">β</span><span class="o">,</span> <span class="o">(</span><span class="n">mem_basis_subset_of_mem_open</span> <span class="n">HB</span> <span class="n">U</span> <span class="n">i</span><span class="bp">.</span><span class="n">property</span> <span class="n">HU</span><span class="o">),</span>
  <span class="k">let</span> <span class="n">f</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">classical</span><span class="bp">.</span><span class="n">some</span> <span class="o">(</span><span class="n">f0</span> <span class="n">i</span><span class="o">),</span>
  <span class="k">let</span> <span class="n">f1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">β</span><span class="o">),</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="err">∈</span> <span class="n">B</span><span class="o">),</span> <span class="o">(</span><span class="n">i</span><span class="bp">.</span><span class="n">val</span> <span class="err">∈</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="err">⊆</span> <span class="n">U</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">classical</span><span class="bp">.</span><span class="n">some_spec</span> <span class="o">(</span><span class="n">f0</span> <span class="n">i</span><span class="o">),</span>
  <span class="k">let</span> <span class="n">g</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">classical</span><span class="bp">.</span><span class="n">some</span> <span class="o">(</span><span class="n">f1</span> <span class="n">i</span><span class="o">),</span>
  <span class="k">let</span> <span class="n">g1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">β</span><span class="o">),</span> <span class="o">(</span><span class="n">i</span><span class="bp">.</span><span class="n">val</span> <span class="err">∈</span> <span class="n">f</span> <span class="n">i</span> <span class="bp">∧</span> <span class="n">f</span> <span class="n">i</span> <span class="err">⊆</span> <span class="n">U</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">classical</span><span class="bp">.</span><span class="n">some_spec</span> <span class="o">(</span><span class="n">f1</span> <span class="n">i</span><span class="o">),</span>
  <span class="n">existsi</span> <span class="n">f</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">set</span><span class="bp">.</span><span class="n">subset</span><span class="bp">.</span><span class="n">antisymm_iff</span><span class="o">,</span>
    <span class="n">split</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">intros</span> <span class="n">y</span> <span class="n">Hy</span><span class="o">,</span>
      <span class="k">let</span> <span class="n">i</span> <span class="o">:</span> <span class="n">β</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">y</span><span class="o">,</span><span class="n">Hy</span><span class="bp">⟩</span><span class="o">,</span>
      <span class="n">existsi</span> <span class="o">(</span><span class="n">f</span> <span class="bp">⟨</span><span class="n">y</span><span class="o">,</span><span class="n">Hy</span><span class="bp">⟩</span><span class="o">),</span>
      <span class="n">constructor</span><span class="o">,</span>
        <span class="n">existsi</span> <span class="n">i</span><span class="o">,</span>
        <span class="n">refl</span><span class="o">,</span>
      <span class="n">exact</span> <span class="o">(</span><span class="n">g1</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">left</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="o">{</span> <span class="n">intros</span> <span class="n">y</span> <span class="n">Hy</span><span class="o">,</span>
      <span class="n">cases</span> <span class="n">Hy</span> <span class="k">with</span> <span class="n">V</span> <span class="n">HV</span><span class="o">,</span><span class="n">cases</span> <span class="n">HV</span> <span class="k">with</span> <span class="n">HV</span> <span class="n">Hy</span><span class="o">,</span><span class="n">cases</span> <span class="n">HV</span> <span class="k">with</span> <span class="n">i</span> <span class="n">Hi</span><span class="o">,</span>
      <span class="n">apply</span> <span class="o">(</span><span class="n">g1</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span>
      <span class="n">rwa</span> <span class="err">←</span><span class="n">Hi</span><span class="o">,</span>
    <span class="o">},</span>
  <span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">i</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">g</span> <span class="n">i</span>
  <span class="o">}</span>
<span class="kn">end</span>
</pre></div>

<a name="126495116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495116">Kevin Buzzard (May 13 2018 at 11:31)</a>:</h4>
<p>That's the sort of proof I find very easy to write nowadays in tactic mode.</p>

<a name="126495122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495122" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495122">Kevin Buzzard (May 13 2018 at 11:31)</a>:</h4>
<p>At its heart though is a triviality.</p>

<a name="126495124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495124" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495124">Kevin Buzzard (May 13 2018 at 11:31)</a>:</h4>
<p><code>mem_basis_subset_of_mem_open</code> says</p>

<a name="126495167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495167" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495167">Kenny Lau (May 13 2018 at 11:32)</a>:</h4>
<p>you shouldn't use <code>let</code> for propositions (<code>f0</code>, <code>f1</code>, <code>g1</code>)</p>

<a name="126495169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495169" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495169">Kevin Buzzard (May 13 2018 at 11:32)</a>:</h4>
<p>for every element <code>x</code> of an open set <code>U</code>, there's some basis element <code>V</code> with <code>x \in V</code> and <code>V \sub U</code></p>

<a name="126495172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495172" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495172">Kevin Buzzard (May 13 2018 at 11:32)</a>:</h4>
<p>So it's one of those things which is in some sense completely trivial</p>

<a name="126495177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495177" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495177">Kevin Buzzard (May 13 2018 at 11:33)</a>:</h4>
<p>however because I have to use classical arguments I find writing a one-liner very hard</p>

<a name="126495179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495179" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495179">Kenny Lau (May 13 2018 at 11:33)</a>:</h4>
<p>also I don't think you need choice to do that, there's a trick I read somewhere</p>

<a name="126495180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495180" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495180">Kevin Buzzard (May 13 2018 at 11:33)</a>:</h4>
<p>So I just write it in tactic mode and I know I'll never get stuck</p>

<a name="126495183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495183" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495183">Kenny Lau (May 13 2018 at 11:33)</a>:</h4>
<p>instead of choosing one of them, choose all of them</p>

<a name="126495184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495184" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495184">Kevin Buzzard (May 13 2018 at 11:33)</a>:</h4>
<p>Kenny what I care about is whether I should be concerned that I am writing this sort of proof in 30 lines of tactic mode</p>

<a name="126495223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495223" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495223">Kenny Lau (May 13 2018 at 11:34)</a>:</h4>
<p>well I say that <code>classical.some</code> doesn't have a good interface</p>

<a name="126495224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495224" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495224">Kevin Buzzard (May 13 2018 at 11:34)</a>:</h4>
<p>and whether I should be striving to write a one-liner in term mode.</p>

<a name="126495225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495225" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495225">Kevin Buzzard (May 13 2018 at 11:34)</a>:</h4>
<p>Well I say that you are supposed to be sitting my exam at 10am tomorrow morning, so what are you doing chatting here? ;-)</p>

<a name="126495227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495227" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495227">Kenny Lau (May 13 2018 at 11:34)</a>:</h4>
<p>proving that determinant is multiplicative (not in Lean)</p>

<a name="126495229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495229" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495229">Kevin Buzzard (May 13 2018 at 11:35)</a>:</h4>
<p>I talked about interface to classical.some recently and Simon wrote <code>ccases</code> and Mario wrote <code>classical.rec_on</code></p>

<a name="126495269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495269" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495269">Kevin Buzzard (May 13 2018 at 11:36)</a>:</h4>
<p>so there are some interfaces if you need them</p>

<a name="126495274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495274" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495274">Kenny Lau (May 13 2018 at 11:36)</a>:</h4>
<p>well you didn't use them</p>

<a name="126495276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495276" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495276">Kevin Buzzard (May 13 2018 at 11:36)</a>:</h4>
<p><a href="#narrow/stream/113488-general/subject/cases.20eliminating.20into.20type/near/125696468" title="#narrow/stream/113488-general/subject/cases.20eliminating.20into.20type/near/125696468">https://leanprover.zulipchat.com/#narrow/stream/113488-general/subject/cases.20eliminating.20into.20type/near/125696468</a></p>

<a name="126495282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495282" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495282">Kevin Buzzard (May 13 2018 at 11:37)</a>:</h4>
<p><a href="#narrow/stream/113488-general/subject/cases.20eliminating.20into.20type/near/125695647" title="#narrow/stream/113488-general/subject/cases.20eliminating.20into.20type/near/125695647">https://leanprover.zulipchat.com/#narrow/stream/113488-general/subject/cases.20eliminating.20into.20type/near/125695647</a></p>

<a name="126495283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495283" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495283">Kevin Buzzard (May 13 2018 at 11:37)</a>:</h4>
<p>I didn't use them because I have my own interface now -- see f,f1 and g,g1</p>

<a name="126495284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495284" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495284">Kevin Buzzard (May 13 2018 at 11:38)</a>:</h4>
<p>I don't really like it but it was easier to do it like that than find the thread</p>

<a name="126495324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495324" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495324">Kevin Buzzard (May 13 2018 at 11:38)</a>:</h4>
<p>that's not true</p>

<a name="126495325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495325" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495325">Kevin Buzzard (May 13 2018 at 11:38)</a>:</h4>
<p>I didn't use them because I didn't know how to use them in the middle of a function</p>

<a name="126495327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495327" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495327">Kevin Buzzard (May 13 2018 at 11:38)</a>:</h4>
<p>well, I didn't know how to use Simon's, and Mario's is in some sense just as complicated as what I did</p>

<a name="126495334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495334" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495334">Kevin Buzzard (May 13 2018 at 11:39)</a>:</h4>
<p>I was not in a situation where I had <code>exists x, p x</code> and I wanted <code>x</code> and <code>H : p x</code></p>

<a name="126495336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495336" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495336">Kevin Buzzard (May 13 2018 at 11:39)</a>:</h4>
<p>I was in a situation where I wanted to construct a function</p>

<a name="126495337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495337" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495337">Kevin Buzzard (May 13 2018 at 11:40)</a>:</h4>
<p>so I had <code>forall i, exists x, p i x</code></p>

<a name="126495383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495383" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495383">Kevin Buzzard (May 13 2018 at 11:40)</a>:</h4>
<p>and I wanted a map sending i to x</p>

<a name="126495384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495384" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495384">Kevin Buzzard (May 13 2018 at 11:40)</a>:</h4>
<p>hey, maybe I'm just saying that the interface for classical.some isn't great</p>

<a name="126495393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495393">Kevin Buzzard (May 13 2018 at 11:41)</a>:</h4>
<p>I guess I wanted a map sending i to x and a map sending i to a proof of p i x</p>

<a name="126495394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495394">Kevin Buzzard (May 13 2018 at 11:41)</a>:</h4>
<p>More precisely, I wanted a map <code>f</code> sending <code>i</code> to <code>x</code> and a map <code>f_proof</code> sending <code>i</code> to a proof of <code>p i (f i)</code></p>

<a name="126495433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495433" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495433">Kevin Buzzard (May 13 2018 at 11:42)</a>:</h4>
<p>(rather than a proof of <code>p i (classical.some _)</code></p>

<a name="126495439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495439" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495439">Kevin Buzzard (May 13 2018 at 11:43)</a>:</h4>
<p>and it still irks me a bit that I can't use a tactic which just builds these functions for me (with exactly those types, so no classical.some mentioned anywhere in the types, just in the definitions of the terms of these types)</p>

<a name="126495441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495441">Kevin Buzzard (May 13 2018 at 11:43)</a>:</h4>
<p>because my constructions of f f1 g and g1 involved building f, copying the type of the some_spec, editing it to replace classical.some _ with f i, then building f1, and this is a purely mechanical procedure.</p>

<a name="126495489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495489" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495489">Kevin Buzzard (May 13 2018 at 11:45)</a>:</h4>
<p>i.e. I started by writing</p>

<a name="126495490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495490" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495490">Kevin Buzzard (May 13 2018 at 11:45)</a>:</h4>
<div class="codehilite"><pre><span></span>  <span class="k">let</span> <span class="n">f</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">classical</span><span class="bp">.</span><span class="n">some</span> <span class="o">(</span><span class="n">f0</span> <span class="n">i</span><span class="o">),</span>
  <span class="k">let</span> <span class="n">f1</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">classical</span><span class="bp">.</span><span class="n">some_spec</span> <span class="o">(</span><span class="n">f0</span> <span class="n">i</span><span class="o">),</span>
</pre></div>

<a name="126495530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495530" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495530">Kevin Buzzard (May 13 2018 at 11:46)</a>:</h4>
<p>and then I looked at the type of <code>f1</code> in the context, edited it to remove all trace of <code>classical.some</code> (replacing it with <code>f i</code>) and then inserted the explicit type of <code>f1</code>.</p>

<a name="126495531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495531" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495531">Kevin Buzzard (May 13 2018 at 11:46)</a>:</h4>
<p>It somehow all feels like both a waste of time and something which students would find confusing.</p>

<a name="126495536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126495536" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126495536">Kevin Buzzard (May 13 2018 at 11:47)</a>:</h4>
<p>Kenny can you write a proof in term mode?</p>

<a name="126496195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126496195" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126496195">Mario Carneiro (May 13 2018 at 12:10)</a>:</h4>
<p>You shouldn't be using classical.some in the first place in this proof. It complicates things and there's no need. Before you start optimizing your use don't forget to see if another proof strategy works better by making canonical choices only</p>

<a name="126496206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126496206" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126496206">Kevin Buzzard (May 13 2018 at 12:11)</a>:</h4>
<p>I am a classical guy and have no feeling as to when I can get away with constructive maths</p>

<a name="126496259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126496259" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126496259">Kevin Buzzard (May 13 2018 at 12:13)</a>:</h4>
<p>I just wrote the first proof I thought of</p>

<a name="126496298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126496298" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126496298">Kevin Buzzard (May 13 2018 at 12:14)</a>:</h4>
<p>and I still find this sort of proof a joy to write</p>

<a name="126496746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126496746" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126496746">Mario Carneiro (May 13 2018 at 12:32)</a>:</h4>
<p>I would go for the version with a set first:</p>
<div class="codehilite"><pre><span></span>lemma sUnion_basis_elemnts_of_open {α : Type u} [topological_space α]
{B : set (set α)} (HB : is_topological_basis B) {U : set α} (HU : is_open U) :
∃ (S : set (set α)), U = ⋃₀ S ∧ S ⊆ B :=
⟨{b ∈ B | b ⊆ U}, set.ext (λ a,
   ⟨λ ha, let ⟨b, hb, ab, bu⟩ := mem_basis_subset_of_mem_open HB _ ha HU in
              ⟨b, ⟨hb, bu⟩, ab⟩,
    λ ⟨b, ⟨hb, bu⟩, ab⟩, bu ab⟩),
 λ b h, h.1⟩

lemma Union_basis_elemnts_of_open {α : Type u} [topological_space α]
{B : set (set α)} (HB : is_topological_basis B) {U : set α} (HU : is_open U) :
∃ (β : Type u) (f : β → set α), U = (⋃ i, f i) ∧ ∀ i : β, f i ∈ B :=
let ⟨S, su, sb⟩ := sUnion_basis_elemnts_of_open HB HU in
⟨S, subtype.val, su.trans set.sUnion_eq_Union&#39;, λ ⟨b, h⟩, sb h⟩
</pre></div>


<p>(I didn't start out planning to write a term proof, but there never really came a point where I needed a tactic)</p>

<a name="126496845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126496845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126496845">Kevin Buzzard (May 13 2018 at 12:37)</a>:</h4>
<p>Right -- I generally switch to tactic mode when I want to do something like a rw which I'm too lazy to figure out with the funny triangle thing. But here I switched because it just felt easier with the classical.stuff and I felt I'd been beaten too early, that was the reason I asked.</p>

<a name="126496886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126496886" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126496886">Kevin Buzzard (May 13 2018 at 12:38)</a>:</h4>
<p>I see the constructivist's trick now -- thanks.</p>

<a name="126496892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126496892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126496892">Kevin Buzzard (May 13 2018 at 12:39)</a>:</h4>
<p>That was the idea I was missing -- I feel confident that I could have generated a term proof now.</p>

<a name="126496936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126496936" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126496936">Kevin Buzzard (May 13 2018 at 12:40)</a>:</h4>
<p>PS the mis-spelling of <code>elements</code> in the name was not intentional :-)</p>

<a name="126496941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126496941" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126496941">Kevin Buzzard (May 13 2018 at 12:41)</a>:</h4>
<p>I wanted to write "Union_of_basis_elements_of_open" but then I had two different ofs with two different meanings</p>

<a name="126496982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126496982" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126496982">Kevin Buzzard (May 13 2018 at 12:42)</a>:</h4>
<p>PS1 is this already in mathlib? I couldn't find it. It is the canonical thing you do with a basis!</p>

<a name="126501829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126501829" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126501829">Reid Barton (May 13 2018 at 15:59)</a>:</h4>
<blockquote>
<p>I was in a situation where I wanted to construct a function<br>
so I had forall i, exists x, p i x<br>
and I wanted a map sending i to x</p>
</blockquote>
<p>Use <code>classical.axiom_of_choice</code></p>

<a name="126501880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126501880" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126501880">Reid Barton (May 13 2018 at 16:00)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="gu">@@ -11,6 +11,3 @@</span>
   let f0 := λ i : β, (mem_basis_subset_of_mem_open HB U i.property HU),
<span class="gd">-  let f := λ i, classical.some (f0 i),</span>
<span class="gd">-  let f1 : ∀ (i : β), ∃ (H : (f i) ∈ B), (i.val ∈ (f i) ∧ (f i) ⊆ U) := λ i, classical.some_spec (f0 i),</span>
<span class="gd">-  let g := λ i, classical.some (f1 i),</span>
<span class="gd">-  let g1 : ∀ (i : β), (i.val ∈ f i ∧ f i ⊆ U) := λ i, classical.some_spec (f1 i),</span>
<span class="gi">+  cases classical.axiom_of_choice f0 with f hf,</span>
   existsi f,
<span class="gu">@@ -25,3 +22,3 @@</span>
         refl,
<span class="gd">-      exact (g1 i).left,</span>
<span class="gi">+      exact (hf i).snd.1</span>
     },
<span class="gu">@@ -29,3 +26,3 @@</span>
       cases Hy with V HV,cases HV with HV Hy,cases HV with i Hi,
<span class="gd">-      apply (g1 i).2,</span>
<span class="gi">+      apply (hf i).snd.2,</span>
       rwa ←Hi,
<span class="gu">@@ -34,3 +31,3 @@</span>
   { intro i,
<span class="gd">-    exact g i</span>
<span class="gi">+    exact (hf i).fst</span>
   }
</pre></div>

<a name="126501890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/open%20sets%20are%20unions%20of%20basis%20elements/near/126501890" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/66698opensetsareunionsofbasiselements.html#126501890">Mario Carneiro (May 13 2018 at 16:01)</a>:</h4>
<p>Oh yes, sorry for not engaging with the original question, Reid is right that you should use <code>axiom_of_choice</code> here</p>


{% endraw %}
