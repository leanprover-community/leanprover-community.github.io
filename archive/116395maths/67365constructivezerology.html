---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/67365constructivezerology.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html">constructive zerology</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="129817429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129817429" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129817429">Patrick Massot (Jul 17 2018 at 14:59)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> I have a question for you. Do you have a proof without <code>decidable</code> or <code>classical</code> of:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">closure_empty_iff</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">)]</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
<span class="n">closure</span> <span class="n">s</span> <span class="bp">=</span> <span class="err">∅</span> <span class="bp">↔</span> <span class="n">s</span> <span class="bp">=</span> <span class="err">∅</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span> <span class="bp">;</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">by_contradiction</span> <span class="n">h&#39;</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">set</span><span class="bp">.</span><span class="n">not_eq_empty_iff_exists</span><span class="bp">.</span><span class="mi">1</span> <span class="n">h&#39;</span> <span class="k">with</span> <span class="bp">_</span> <span class="n">H</span><span class="o">,</span>
    <span class="n">simpa</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="kn">using</span> <span class="n">subset_closure</span> <span class="n">H</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="n">h</span><span class="o">)</span> <span class="bp">▸</span> <span class="n">closure_empty</span> <span class="o">},</span>
<span class="kn">end</span>
</pre></div>

<a name="129817776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129817776" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129817776">Reid Barton (Jul 17 2018 at 15:06)</a>:</h4>
<p>Use <code>set.eq_empty_iff_forall_not_mem</code> instead I think</p>

<a name="129818028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129818028" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129818028">Kenny Lau (Jul 17 2018 at 15:11)</a>:</h4>
<p>for this case, contradiction is intuitionistically valid</p>

<a name="129818071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129818071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129818071">Patrick Massot (Jul 17 2018 at 15:12)</a>:</h4>
<p>Thanks Reid!</p>

<a name="129818092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129818092" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129818092">Patrick Massot (Jul 17 2018 at 15:12)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">closure_empty_iff</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
<span class="n">closure</span> <span class="n">s</span> <span class="bp">=</span> <span class="err">∅</span> <span class="bp">↔</span> <span class="n">s</span> <span class="bp">=</span> <span class="err">∅</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span> <span class="bp">;</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">set</span><span class="bp">.</span><span class="n">eq_empty_iff_forall_not_mem</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">x</span> <span class="n">H</span><span class="o">,</span>
    <span class="n">simpa</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="kn">using</span> <span class="n">subset_closure</span> <span class="n">H</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="n">h</span><span class="o">)</span> <span class="bp">▸</span> <span class="n">closure_empty</span> <span class="o">},</span>
<span class="kn">end</span>
</pre></div>

<a name="129818174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129818174" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129818174">Patrick Massot (Jul 17 2018 at 15:14)</a>:</h4>
<p>I'm very slowly working towards proving that the Hausdorff completion of a uniform space X is nonempty unless X is empty. This is no fun at all.</p>

<a name="129818681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129818681" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129818681">Patrick Massot (Jul 17 2018 at 15:24)</a>:</h4>
<p>I can feel the dreaded spiral where I'm upset something is not obvious to Lean and I'm proving more and more stupid lemmas instead of cooling down and figure out what I exactly need</p>

<a name="129819050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129819050" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129819050">Patrick Massot (Jul 17 2018 at 15:32)</a>:</h4>
<p>I need a break. If anyone here is bored and loves zerology, I think I may need proofs of:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">nonempty_iff_univ</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">:</span> <span class="n">nonempty</span> <span class="n">α</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">univ</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="bp">≠</span> <span class="err">∅</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kn">lemma</span> <span class="n">nonempty_of_nonempty_range</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">range</span> <span class="n">f</span> <span class="bp">=</span> <span class="err">∅</span><span class="o">)</span> <span class="o">:</span> <span class="n">nonempty</span> <span class="n">α</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>

<a name="129819486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129819486" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129819486">Kevin Buzzard (Jul 17 2018 at 15:42)</a>:</h4>
<p>What am I allowed to use?</p>

<a name="129819498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129819498" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129819498">Kevin Buzzard (Jul 17 2018 at 15:43)</a>:</h4>
<p>Excluded middle?</p>

<a name="129819501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129819501" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129819501">Kevin Buzzard (Jul 17 2018 at 15:43)</a>:</h4>
<p>Or nothing like this?</p>

<a name="129819612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129819612" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129819612">Patrick Massot (Jul 17 2018 at 15:45)</a>:</h4>
<p>Of course I don't care. Again, the goal is to prove the completion is empty only if the original space is empty. And this is only needed to implement Mario's trick allowing to totalize the function "lift to completion" so that any function from a uniform space to a complete Hausdorff space lifts, the lift being garbage is the function is not uniformly continuous.</p>

<a name="129819683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129819683" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129819683">Patrick Massot (Jul 17 2018 at 15:47)</a>:</h4>
<p>But at some point we hope to put all this into mathlib, so it would be nicer to avoid unnecessary decidability assumption or classical logic</p>

<a name="129819773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129819773" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129819773">Kevin Buzzard (Jul 17 2018 at 15:49)</a>:</h4>
<p><code>nonempty</code> needs data for its constructor, and <code>(univ : set α) ≠ ∅</code> is only a proposition</p>

<a name="129819777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129819777" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129819777">Patrick Massot (Jul 17 2018 at 15:49)</a>:</h4>
<p>You can have a look at <a href="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/completion.lean" target="_blank" title="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/completion.lean">https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/completion.lean</a>  to see where I stand</p>

<a name="129819790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129819790" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129819790">Patrick Massot (Jul 17 2018 at 15:49)</a>:</h4>
<p>Mario style lifting is defined at <a href="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/completion.lean#L124" target="_blank" title="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/completion.lean#L124">https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/completion.lean#L124</a></p>

<a name="129819865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129819865" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129819865">Kevin Buzzard (Jul 17 2018 at 15:50)</a>:</h4>
<p>For the first one you need something like <code>¬ (∀ a : α, false) → ∃ a : α, true</code></p>

<a name="129819870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129819870" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129819870">Patrick Massot (Jul 17 2018 at 15:50)</a>:</h4>
<p>Maybe I should use <code>inhabited</code> instead of <code>nonempty</code></p>

<a name="129819883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129819883" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129819883">Chris Hughes (Jul 17 2018 at 15:51)</a>:</h4>
<p>Assuming α is nonempty, the assumption <code>decidable_eq (set α)</code> implies decidability of all propositions</p>

<a name="129819888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129819888" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129819888">Patrick Massot (Jul 17 2018 at 15:51)</a>:</h4>
<p>Or maybe this is too much trouble, given that I already have a working lift for uniformly continuous functions</p>

<a name="129819935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129819935" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129819935">Patrick Massot (Jul 17 2018 at 15:52)</a>:</h4>
<p>I'm upset because none of this has any mathematical content</p>

<a name="129820225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129820225" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129820225">Kevin Buzzard (Jul 17 2018 at 15:58)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">nonempty_iff_univ</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">:</span> <span class="n">nonempty</span> <span class="n">α</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">univ</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="bp">≠</span> <span class="err">∅</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">H</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">H</span> <span class="k">with</span> <span class="n">a</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">H2</span><span class="o">,</span>
    <span class="k">show</span> <span class="o">(</span><span class="err">∅</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="n">a</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span><span class="n">H2</span><span class="o">,</span>
    <span class="n">trivial</span>
  <span class="o">},</span>
  <span class="n">intro</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">classical</span><span class="bp">.</span><span class="n">by_contradiction</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">H2</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">funext</span><span class="o">,</span>
  <span class="n">exfalso</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">H2</span><span class="o">,</span>
  <span class="n">exact</span> <span class="bp">⟨</span><span class="n">a</span><span class="bp">⟩</span>
<span class="kn">end</span>
</pre></div>

<a name="129820641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129820641" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129820641">Mario Carneiro (Jul 17 2018 at 16:07)</a>:</h4>
<p>I used many of these same theorems in the proof of <code>dense_embedding.extend</code></p>

<a name="129820666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129820666" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129820666">Mario Carneiro (Jul 17 2018 at 16:08)</a>:</h4>
<p>for the most part I just brute forced through all of it, using <code>exists_mem_of_ne_empty</code> to get elements out of nonempty sets</p>

<a name="129820713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129820713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129820713">Mario Carneiro (Jul 17 2018 at 16:08)</a>:</h4>
<p>and using <code>mem_closure_iff</code> to get a nonempty set from a closure</p>

<a name="129821218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129821218" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129821218">Kevin Buzzard (Jul 17 2018 at 16:21)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">nonempty_of_nonempty_range</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">range</span> <span class="n">f</span> <span class="bp">=</span> <span class="err">∅</span><span class="o">)</span> <span class="o">:</span> <span class="n">nonempty</span> <span class="n">α</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">apply</span> <span class="n">classical</span><span class="bp">.</span><span class="n">by_contradiction</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">H2</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">range</span><span class="o">,</span>
  <span class="n">funext</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">propext</span><span class="o">,</span>
  <span class="k">show</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">f</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="bp">↔</span> <span class="n">false</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span><span class="n">swap</span><span class="o">,</span><span class="n">exact</span> <span class="n">false</span><span class="bp">.</span><span class="n">elim</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">H3</span><span class="o">,</span><span class="n">cases</span> <span class="n">H3</span> <span class="k">with</span> <span class="n">a</span> <span class="n">Ha</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">H2</span><span class="o">,</span>
  <span class="n">exact</span> <span class="bp">⟨</span><span class="n">a</span><span class="bp">⟩</span>
<span class="kn">end</span>
</pre></div>

<a name="129821220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129821220" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129821220">Kevin Buzzard (Jul 17 2018 at 16:21)</a>:</h4>
<p>What's the hurry :-)</p>

<a name="129821261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129821261" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129821261">Mario Carneiro (Jul 17 2018 at 16:22)</a>:</h4>
<p>not so cleaned up:</p>
<div class="codehilite"><pre><span></span>lemma nonempty_completion_iff : nonempty (completion α) ↔ nonempty α :=
begin
  split,
  { rintro ⟨c⟩,
    have := eq_univ_iff_forall.1 (to_completion.dense α) c,
    have := mem_closure_iff.1 this _ is_open_univ trivial,
    rcases exists_mem_of_ne_empty this with ⟨_, ⟨_, a, _⟩⟩,
    exact ⟨a⟩ },
  { rintro ⟨a⟩,
    exact ⟨to_completion α a⟩ }
end
</pre></div>

<a name="129821269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129821269" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129821269">Patrick Massot (Jul 17 2018 at 16:22)</a>:</h4>
<p>Many thanks to both of you!</p>

<a name="129821281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129821281" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129821281">Patrick Massot (Jul 17 2018 at 16:23)</a>:</h4>
<p>In the mean time I saw Kevin's first lemma proof and then found some courage to write:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">nonempty_of_nonempty_range</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">range</span> <span class="n">f</span> <span class="bp">=</span> <span class="err">∅</span><span class="o">)</span> <span class="o">:</span> <span class="n">nonempty</span> <span class="n">α</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="n">exists_mem_of_ne_empty</span> <span class="n">H</span> <span class="k">with</span> <span class="n">x</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">mem_range</span><span class="bp">.</span><span class="mi">1</span> <span class="n">h</span> <span class="k">with</span> <span class="n">y</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">exact</span> <span class="bp">⟨</span><span class="n">y</span><span class="bp">⟩</span>
<span class="kn">end</span>
</pre></div>

<a name="129821332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129821332" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129821332">Kevin Buzzard (Jul 17 2018 at 16:24)</a>:</h4>
<p>I don't know any of these lemmas which people are using :-)</p>

<a name="129821337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129821337" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129821337">Patrick Massot (Jul 17 2018 at 16:24)</a>:</h4>
<p>I find them using lots of suffering</p>

<a name="129821344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129821344" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129821344">Patrick Massot (Jul 17 2018 at 16:24)</a>:</h4>
<p>But now I need to understand Mario's proof</p>

<a name="129821346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129821346" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129821346">Kevin Buzzard (Jul 17 2018 at 16:25)</a>:</h4>
<p>I never quite know whether I should somehow attempt to learn exactly what is in mathlib and where it all is</p>

<a name="129821369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129821369" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129821369">Kevin Buzzard (Jul 17 2018 at 16:25)</a>:</h4>
<p>I'm doing a lot of work with multisets at the minute for a student, and now I really know my way around multiset.lean</p>

<a name="129821424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129821424" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129821424">Kevin Buzzard (Jul 17 2018 at 16:26)</a>:</h4>
<p>but I don't know my way around data.set.basic in that way</p>

<a name="129821456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129821456" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129821456">Mario Carneiro (Jul 17 2018 at 16:27)</a>:</h4>
<p>It's worth a perusal (data.set.lattice is the other important one)</p>

<a name="129821507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129821507" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129821507">Mario Carneiro (Jul 17 2018 at 16:28)</a>:</h4>
<p>but ideally you should be able to guess beforehand what is in there</p>

<a name="129821513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129821513" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129821513">Patrick Massot (Jul 17 2018 at 16:28)</a>:</h4>
<p><code>rintro ⟨c⟩</code> is already a nice trick</p>

<a name="129821533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129821533" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129821533">Patrick Massot (Jul 17 2018 at 16:29)</a>:</h4>
<p>But then I'm not sure this isn't too efficient. Don't you think <code>closure_empty_iff</code> should be in mathlib anyway?</p>

<a name="129821603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129821603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129821603">Kevin Buzzard (Jul 17 2018 at 16:30)</a>:</h4>
<p>I hope <code>rintro</code> isn't as slow as <code>rsimp</code></p>

<a name="129821608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129821608" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129821608">Patrick Massot (Jul 17 2018 at 16:30)</a>:</h4>
<p>Never noticed any slowness there</p>

<a name="129821678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129821678" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129821678">Patrick Massot (Jul 17 2018 at 16:32)</a>:</h4>
<p>If you don't fear <code>rcases</code> then you don't fear <code>rintro</code></p>

<a name="129821701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129821701" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129821701">Patrick Massot (Jul 17 2018 at 16:33)</a>:</h4>
<p>and, together, they really make a difference in conciseness, without obfuscation (it's all about unpacking stuff that our mind would unpack unconsciously)</p>

<a name="129822053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129822053" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129822053">Patrick Massot (Jul 17 2018 at 16:41)</a>:</h4>
<p>Mario, I tried to use your trick in <a href="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/completion.lean#L124" target="_blank" title="https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/completion.lean#L124">https://github.com/PatrickMassot/lean-perfectoid-spaces/blob/completions/src/for_mathlib/completion.lean#L124</a> but I needed to assume uniform continuity of <code>f</code> is decidable. Now I want to state lemmas assuming uniform continuity, but Lean asks me for an instance of <code>decidable (uniform_continuous f)</code>. Did I do it wrong? What should I do?</p>

<a name="129822112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129822112" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129822112">Mario Carneiro (Jul 17 2018 at 16:42)</a>:</h4>
<p>since that proof uses only structural tactics, I would normally compress it into a term proof</p>

<a name="129822131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129822131" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129822131">Patrick Massot (Jul 17 2018 at 16:43)</a>:</h4>
<p>which proof?</p>

<a name="129822190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129822190" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129822190">Mario Carneiro (Jul 17 2018 at 16:44)</a>:</h4>
<p>the one I gave</p>

<a name="129822230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129822230" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129822230">Mario Carneiro (Jul 17 2018 at 16:45)</a>:</h4>
<p>you should have local instance prop_decidable</p>

<a name="129822292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129822292" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129822292">Patrick Massot (Jul 17 2018 at 16:46)</a>:</h4>
<p>Oh I will happily add that if you don't tell me this will be an issue when trying to get all this into mathlib</p>

<a name="129822318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129822318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129822318">Patrick Massot (Jul 17 2018 at 16:47)</a>:</h4>
<p>My original version (with unique exists!) had no such assumption, but if course it makes no difference to me</p>

<a name="129822369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129822369" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129822369">Mario Carneiro (Jul 17 2018 at 16:48)</a>:</h4>
<p>of course cases on uniform continuity is firmly classical, but we are not working in the constructive fragment here</p>

<a name="129822444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129822444" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129822444">Patrick Massot (Jul 17 2018 at 16:50)</a>:</h4>
<p>Nice. I should be able to move on tonight. But right now I'm too hungry, I need diner.</p>

<a name="129822446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129822446" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129822446">Patrick Massot (Jul 17 2018 at 16:50)</a>:</h4>
<p>Thanks!</p>

<a name="129822721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129822721" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129822721">Mario Carneiro (Jul 17 2018 at 16:57)</a>:</h4>
<p>totalizing functions often requires classical axioms</p>

<a name="129832556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129832556" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129832556">Patrick Massot (Jul 17 2018 at 20:12)</a>:</h4>
<p>I'm done totalizing. Now I'm back exactly where I was yesterday except that, in <code>uniform_space.completion_lift f</code>, <code>f</code> is now a function rather than a proof that a function is uniformly continuous. In particular fonctoriality now reads <code>completion_lift (g ∘ f) = (completion_lift g) ∘ completion_lift f</code>, as it should</p>

<a name="129832572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129832572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129832572">Patrick Massot (Jul 17 2018 at 20:13)</a>:</h4>
<p>All this for the cheap price of a few hours and a <code>local attribute [instance] classical.prop_decidable</code></p>

<a name="129832630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/constructive%20zerology/near/129832630" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/67365constructivezerology.html#129832630">Patrick Massot (Jul 17 2018 at 20:14)</a>:</h4>
<p>And I can see wisdom is coming to Kenny. He didn't write anything about that last classical detail.</p>


{% endraw %}

{% include archive_update.html %}