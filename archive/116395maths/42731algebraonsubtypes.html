---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/42731algebraonsubtypes.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html">algebra on subtypes</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="129923410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129923410" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129923410">Patrick Massot (Jul 19 2018 at 11:57)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> Simon has been working for us, and Mario promptly merged. You can update mathlib to at least c2f54ad03 and try to understand how to use the magic in <a href="https://gist.github.com/PatrickMassot/8afef3917a917300cf31c1396a895705" target="_blank" title="https://gist.github.com/PatrickMassot/8afef3917a917300cf31c1396a895705">https://gist.github.com/PatrickMassot/8afef3917a917300cf31c1396a895705</a></p>

<a name="129926331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129926331" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129926331">Johan Commelin (Jul 19 2018 at 13:04)</a>:</h4>
<p>Looks interesting! I'm updating (-;</p>

<a name="129926592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129926592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129926592">Johan Commelin (Jul 19 2018 at 13:11)</a>:</h4>
<p>I really like where this is going! You give it the data (zero, addition, ...) and for the properties (assoc, comm, ...) you just tell Lean: look, follow your nose and you'll get there.</p>

<a name="129926847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129926847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129926847">Patrick Massot (Jul 19 2018 at 13:18)</a>:</h4>
<p>Indeed. This now really looks like what you would wrote on paper: explain why operations make sense and then write either nothing  or "algebraic axioms follow from the parent structure axiom"</p>

<a name="129926851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129926851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129926851">Patrick Massot (Jul 19 2018 at 13:18)</a>:</h4>
<p>And this will be reused a lot. Each algebraic structure need subtype instances</p>

<a name="129926923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129926923" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129926923">Patrick Massot (Jul 19 2018 at 13:20)</a>:</h4>
<p>Note that <code>refine_struct</code> is an ongoing long-term collaboration effort using all available strengths: I do the whining and Simon does the coding. It started with the <code>pi_instance</code> tactic back in February I think</p>

<a name="129927028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927028" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927028">Johan Commelin (Jul 19 2018 at 13:24)</a>:</h4>
<p>Ok, so here are some explicit kudos to <span class="user-mention" data-user-id="110026">@Simon Hudon</span> <span class="emoji emoji-1f44d" title="thumbs up">:thumbs_up:</span> <span class="emoji emoji-1f389" title="tada">:tada:</span> <span class="emoji emoji-1f419" title="octopus">:octopus:</span> <span class="emoji emoji-1f370" title="cake">:cake:</span> <span class="emoji emoji-1f6e0" title="hammer and wrench">:hammer_and_wrench:</span> <span class="emoji emoji-1f4aa" title="muscle">:muscle:</span></p>

<a name="129927113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927113" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927113">Johan Commelin (Jul 19 2018 at 13:27)</a>:</h4>
<p>I do wonder, in how far is this overlapping with Scott's tactics? I don't fully understand what his <code>obviously</code> does, but it is also related to deriving obvious results from fields in structures and such, right?</p>

<a name="129927179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927179" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927179">Mario Carneiro (Jul 19 2018 at 13:29)</a>:</h4>
<p><code>obviously</code> is one of several "hammer" style tactics by scott</p>

<a name="129927180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927180" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927180">Mario Carneiro (Jul 19 2018 at 13:29)</a>:</h4>
<p>i.e. "throw every automation we have at the problem until it buckles"</p>

<a name="129927242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927242" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927242">Mario Carneiro (Jul 19 2018 at 13:30)</a>:</h4>
<p>I don't think <code>refine_struct</code> does anything like this</p>

<a name="129927259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927259" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927259">Johan Commelin (Jul 19 2018 at 13:31)</a>:</h4>
<p>Agreed, but vice versa? Would most of these goals buckle under <del>Thor's</del> Scott's hammer?</p>

<a name="129927315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927315" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927315">Patrick Massot (Jul 19 2018 at 13:33)</a>:</h4>
<p>No, <code>refine_struct</code> by itself carefully understand and name what Lean wants to be proved. Then specialized automation like <a href="https://github.com/leanprover/mathlib/blob/master/algebra/pi_instances.lean#L16" target="_blank" title="https://github.com/leanprover/mathlib/blob/master/algebra/pi_instances.lean#L16">https://github.com/leanprover/mathlib/blob/master/algebra/pi_instances.lean#L16</a> or <a href="https://gist.github.com/PatrickMassot/8afef3917a917300cf31c1396a895705#file-subtypes-lean-L9" target="_blank" title="https://gist.github.com/PatrickMassot/8afef3917a917300cf31c1396a895705#file-subtypes-lean-L9">https://gist.github.com/PatrickMassot/8afef3917a917300cf31c1396a895705#file-subtypes-lean-L9</a> take over.</p>

<a name="129927370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927370" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927370">Johan Commelin (Jul 19 2018 at 13:34)</a>:</h4>
<p>Since Lean supports unicode, I think we really should have a tactic called <a href="https://en.wikipedia.org/wiki/Mj%C3%B6lnir" target="_blank" title="https://en.wikipedia.org/wiki/Mj%C3%B6lnir">Mjölnir</a>.</p>

<a name="129927543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927543" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927543">Kevin Buzzard (Jul 19 2018 at 13:38)</a>:</h4>
<p>You should propose a unicode character for that thing</p>

<a name="129927555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927555" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927555">Patrick Massot (Jul 19 2018 at 13:39)</a>:</h4>
<p>Let's ask google how to spell that in runes</p>

<a name="129927563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927563" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927563">Patrick Massot (Jul 19 2018 at 13:39)</a>:</h4>
<p>And then we can email Jasmin and give him one more incentive to bring us that hammer thing</p>

<a name="129927614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927614" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927614">Patrick Massot (Jul 19 2018 at 13:40)</a>:</h4>
<p>Looks like this could be our winner: <a href="https://static1.fjcdn.com/comments/Spelled+the+right+way+_47df3c7a85289a0912599c30d252cf08.jpg" target="_blank" title="https://static1.fjcdn.com/comments/Spelled+the+right+way+_47df3c7a85289a0912599c30d252cf08.jpg">https://static1.fjcdn.com/comments/Spelled+the+right+way+_47df3c7a85289a0912599c30d252cf08.jpg</a></p>
<div class="message_inline_image"><a href="https://static1.fjcdn.com/comments/Spelled+the+right+way+_47df3c7a85289a0912599c30d252cf08.jpg" target="_blank" title="https://static1.fjcdn.com/comments/Spelled+the+right+way+_47df3c7a85289a0912599c30d252cf08.jpg"><img src="https://static1.fjcdn.com/comments/Spelled+the+right+way+_47df3c7a85289a0912599c30d252cf08.jpg"></a></div>

<a name="129927691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927691" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927691">Kenny Lau (Jul 19 2018 at 13:42)</a>:</h4>
<blockquote>
<p>Let's ask google how to spell that in runes</p>
</blockquote>
<p>ᛗᛃᛟᛚᚾᛁᚱ</p>

<a name="129927701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927701" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927701">Mario Carneiro (Jul 19 2018 at 13:42)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="err">ᛗᛃᛟᛚᚾᛁᚱ</span> <span class="o">:=</span> <span class="k">by</span> <span class="err">ᛗᛃᛟᛚᚾᛁᚱ</span>
</pre></div>

<a name="129927730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927730" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927730">Patrick Massot (Jul 19 2018 at 13:43)</a>:</h4>
<p>Too bad: I tried <code>meta def ᛗᛃᛟᛚᚾᛁᚱ : tactic unit := sorry</code> but Lean complains <code>invalid declaration, identifier expected</code></p>

<a name="129927771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927771" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927771">Patrick Massot (Jul 19 2018 at 13:44)</a>:</h4>
<p>It seems we'll need some help from <span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span></p>

<a name="129927772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927772">Mario Carneiro (Jul 19 2018 at 13:44)</a>:</h4>
<div class="codehilite"><pre><span></span>meta def «ᛗᛃᛟᛚᚾᛁᚱ» : tactic unit := sorry
</pre></div>

<a name="129927808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927808" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927808">Sean Leather (Jul 19 2018 at 13:45)</a>:</h4>
<p>Guillemets: how appropriate.</p>

<a name="129927817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927817" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927817">Mario Carneiro (Jul 19 2018 at 13:45)</a>:</h4>
<p>problem solved:</p>
<div class="codehilite"><pre><span></span><span class="n">meta</span> <span class="n">def</span> <span class="err">«ᛗᛃᛟᛚᚾᛁᚱ»</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kn">notation</span> <span class="bp">`</span><span class="err">ᛗᛃᛟᛚᚾᛁᚱ</span><span class="bp">`</span> <span class="o">:=</span> <span class="err">«ᛗᛃᛟᛚᚾᛁᚱ»</span>
<span class="kn">example</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span> <span class="k">by</span> <span class="err">ᛗᛃᛟᛚᚾᛁᚱ</span>
</pre></div>

<a name="129927870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927870" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927870">Patrick Massot (Jul 19 2018 at 13:46)</a>:</h4>
<p>This works! We're almost set. It only remains to whine long enough for someone to unsorry this</p>

<a name="129927879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927879" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927879">Mario Carneiro (Jul 19 2018 at 13:47)</a>:</h4>
<p>obviously <code>meta def «ᛗᛃᛟᛚᚾᛁᚱ» : tactic unit :=  by ᛗᛃᛟᛚᚾᛁᚱ</code></p>

<a name="129927891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927891" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927891">Johan Commelin (Jul 19 2018 at 13:47)</a>:</h4>
<p>I like your use of "obviously"</p>

<a name="129927939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/algebra%20on%20subtypes/near/129927939" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42731algebraonsubtypes.html#129927939">Patrick Massot (Jul 19 2018 at 13:48)</a>:</h4>
<p>We shouldn't forget the PR to <a href="https://github.com/leanprover/vscode-lean/blob/master/translations.json" target="_blank" title="https://github.com/leanprover/vscode-lean/blob/master/translations.json">https://github.com/leanprover/vscode-lean/blob/master/translations.json</a></p>


{% endraw %}
