---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/00990finsetmaxfornonemptysets.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html">finset.max for nonempty sets</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="156716988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156716988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156716988">Kevin Buzzard (Jan 23 2019 at 19:29)</a>:</h4>
<p>I've been trying to use <code>finset.max</code> and it's a bit annoying in all my use cases because it takes in an arbitrary finset X and returns an option X (to deal with the case where the finset is empty). It would be very easy to write a variant which takes a non-empty finset and returns its max, and I find myself wanting this variant. What should I call it?</p>

<a name="156717153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156717153" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156717153">Kenny Lau (Jan 23 2019 at 19:30)</a>:</h4>
<p>you want to write a partial function? <span aria-label="shock" class="emoji emoji-1f628" role="img" title="shock">:shock:</span></p>

<a name="156717184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156717184" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156717184">Kevin Buzzard (Jan 23 2019 at 19:31)</a>:</h4>
<p>And is there room for it in finset.lean?</p>

<a name="156717213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156717213" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156717213">Kenny Lau (Jan 23 2019 at 19:31)</a>:</h4>
<p>I think <code>finset.sup</code> might be what you seek</p>

<a name="156717335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156717335" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156717335">Kevin Buzzard (Jan 23 2019 at 19:32)</a>:</h4>
<p>It's not that either, because <code>finset.sup</code> wants the lattice to have a bot, and in my use case there is no bot.</p>

<a name="156717357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156717357" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156717357">Kenny Lau (Jan 23 2019 at 19:32)</a>:</h4>
<p>so you really want a partial function <span aria-label="shock" class="emoji emoji-1f628" role="img" title="shock">:shock:</span></p>

<a name="156717365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156717365" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156717365">Kevin Buzzard (Jan 23 2019 at 19:32)</a>:</h4>
<p>I simply want a function which takes in a non-empty finite set of reals and produces its max.</p>

<a name="156717381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156717381" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156717381">Kevin Buzzard (Jan 23 2019 at 19:32)</a>:</h4>
<p>I am happy to supply the proof that it's non-empty.</p>

<a name="156717521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156717521" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156717521">Kevin Buzzard (Jan 23 2019 at 19:34)</a>:</h4>
<p>Surely there will be more use cases. Kenny this is for proving that a convergent sequence of reals is bounded. Working with the option is a pain, because I simply want the answer rather than having to keep talking about elements of the option output.</p>

<a name="156717730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156717730" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156717730">Kevin Buzzard (Jan 23 2019 at 19:36)</a>:</h4>
<p>Is <code>finset.max'</code> a crap name?</p>

<a name="156717989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156717989" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156717989">Kevin Buzzard (Jan 23 2019 at 19:39)</a>:</h4>
<p>Ultimately it will be easier to use than the contortions I'm having to go through to prove the results I need about finset.max. Kenny, try proving that if <code>f : nat -&gt; real</code> and B = max {f 0, f 1, f 2}` then for all i &lt;= 2, f i &lt;= B. I had to extract B from the option and then prove that it was in the option and it clutters up the local context -- both of these could be avoided because the fact that f 0 is in the set is easy to prove. I think my proposal makes it easier, but I might be wrong because it's only just occurred to me.</p>

<a name="156718137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156718137" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156718137">Chris Hughes (Jan 23 2019 at 19:41)</a>:</h4>
<p>You can use <code>option.get </code></p>

<a name="156718312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156718312" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156718312">Johannes HÃ¶lzl (Jan 23 2019 at 19:43)</a>:</h4>
<p>No, Kevin wants <code>option.iget</code>. Or a max version which assumes <code>inhabited</code>.</p>

<a name="156719527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156719527" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156719527">Johan Commelin (Jan 23 2019 at 19:56)</a>:</h4>
<p>So we should fix ourselves a <code>finset.imax</code>?</p>

<a name="156719571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156719571" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156719571">Johan Commelin (Jan 23 2019 at 19:57)</a>:</h4>
<p><code>iget</code> and <code>imax</code> sound like they were invented by Apple. <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>

<a name="156723283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156723283" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156723283">Kevin Buzzard (Jan 23 2019 at 20:42)</a>:</h4>
<p>I don't want to keep applying iget, I know the set is nonempty and I just want the max :-) There seem to be more contortions using what is there already. I should try writing the code and see if it's actually better.</p>

<a name="156725776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156725776" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156725776">Kevin Buzzard (Jan 23 2019 at 21:12)</a>:</h4>
<p>rofl I decided to call it <code>finset.max'</code> and then I discovered it was there already :-)</p>

<a name="156725955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156725955" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156725955">Kevin Buzzard (Jan 23 2019 at 21:15)</a>:</h4>
<p>Johannes put it there in October!</p>

<a name="156726063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156726063" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156726063">Patrick Massot (Jan 23 2019 at 21:17)</a>:</h4>
<p>One day I taught Simon what was <code>convert</code>. At some point in the history section of the explanation, I was forced to mention that Simon himself wrote that tactic.</p>

<a name="156726084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156726084" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156726084">Kevin Buzzard (Jan 23 2019 at 21:17)</a>:</h4>
<p>I see, the point is that <code>max'</code> wants a proof that <code>S â  â</code>, perhaps Johannes could see that I wanted something a bit more convenient.</p>

<a name="156740020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156740020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156740020">Mario Carneiro (Jan 24 2019 at 01:11)</a>:</h4>
<p>I am 100% on board with having <code>finset.imax</code> defined and including the obvious lemmas. (Johan, I don't think you can patent single letter prefixes.) I agree you shouldn't deal with <code>(finset.max s).iget</code>, there should be a definition for this combination.</p>

<a name="156753780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/finset.max%20for%20nonempty%20sets/near/156753780" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/00990finsetmaxfornonemptysets.html#156753780">Kevin Buzzard (Jan 24 2019 at 07:13)</a>:</h4>
<p>So I'm currently using <code>finset.max'</code> and it's fine</p>


{% endraw %}
