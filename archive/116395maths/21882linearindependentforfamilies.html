---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/21882linearindependentforfamilies.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html">linear_independent for families</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="163502492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163502492" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163502492">Alexander Bentkamp (Apr 16 2019 at 20:08)</a>:</h4>
<p>For my work on eigenvectors, I need a definition of linear independence for families of vectors, not only sets, because I need to be able to talk about a family being linearly dependent if it contains the same vector twice. I've started working on this here: </p>
<p><a href="https://github.com/leanprover-community/mathlib/commit/7a590e5a29469975798a6432e577826a81ea0b94" target="_blank" title="https://github.com/leanprover-community/mathlib/commit/7a590e5a29469975798a6432e577826a81ea0b94">https://github.com/leanprover-community/mathlib/commit/7a590e5a29469975798a6432e577826a81ea0b94</a></p>
<p>The crucial change I did is to replace the definition</p>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="kn">reducible</span><span class="o">]</span> <span class="n">def</span> <span class="n">lc</span> <span class="o">(</span><span class="n">α</span> <span class="n">β</span><span class="o">)</span> <span class="o">[</span><span class="n">ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">α</span> <span class="n">β</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span> <span class="o">:=</span> <span class="n">β</span> <span class="bp">→</span><span class="err">₀</span> <span class="n">α</span>
</pre></div>


<p>by</p>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="kn">reducible</span><span class="o">]</span> <span class="n">def</span> <span class="n">lc</span> <span class="o">(</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span> <span class="n">ι</span> <span class="bp">→</span><span class="err">₀</span> <span class="n">α</span>
</pre></div>


<p>I'd like to get some feedback from you before I continue because this change breaks quite a lot of things that I need to repair.</p>

<a name="163502933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163502933" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163502933">Kevin Buzzard (Apr 16 2019 at 20:13)</a>:</h4>
<p>Are you in the finite-dimensional setting? I have seen that in the finite-dimensional case one often has to deal with lists of vectors, whereas in the infinite-dimensional case it's often sets; the problems one works on are somehow different in the two cases.</p>

<a name="163503092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163503092" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163503092">Johan Commelin (Apr 16 2019 at 20:15)</a>:</h4>
<p><span class="user-mention" data-user-id="129120">@Alexander Bentkamp</span> I'm not sure if it is worth it to <em>replace</em> <code>lc</code> with that definition. In particular, <code>lc</code> currently has some semantics that you won't be able to recover with your definition.</p>

<a name="163503095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163503095" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163503095">Alexander Bentkamp (Apr 16 2019 at 20:15)</a>:</h4>
<p>Yes, I work in the finite-dimensional setting, but if we had a definition that uses families, both lists and sets would be special cases.</p>

<a name="163503104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163503104" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163503104">Johan Commelin (Apr 16 2019 at 20:15)</a>:</h4>
<p>Maybe you should just make a new definition</p>

<a name="163503178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163503178" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163503178">Johan Commelin (Apr 16 2019 at 20:16)</a>:</h4>
<p><code>lc</code> is the type of <em>all</em> formal linear combinations. And you don't get that with the family version.</p>

<a name="163503372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163503372" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163503372">Alexander Bentkamp (Apr 16 2019 at 20:18)</a>:</h4>
<p>The old definition is a special case of my new one by choosing the set of vectors itself as the index set and the identity as the map. Where it matters, we could restrict ourselves to that case.</p>

<a name="163503425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163503425" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163503425">Johan Commelin (Apr 16 2019 at 20:19)</a>:</h4>
<p>That's true</p>

<a name="163503556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163503556" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163503556">Johan Commelin (Apr 16 2019 at 20:20)</a>:</h4>
<p>If you pull this off, chapeau! But I agree that it is quite non-trivial. You might want to coordinate with <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> and <span class="user-mention" data-user-id="110044">@Chris Hughes</span>. This will be quite an effort, and you'll want the merge into mathlib to be as smooth as possible.</p>

<a name="163503571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163503571" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163503571">Kevin Buzzard (Apr 16 2019 at 20:20)</a>:</h4>
<p>Why not just make a new function <code>lc'</code> or whatever?</p>

<a name="163503608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163503608" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163503608">Kevin Buzzard (Apr 16 2019 at 20:21)</a>:</h4>
<blockquote>
<p><code>lc</code> currently has some semantics that you won't be able to recover with your definition.</p>
</blockquote>
<p>What does the word "semantics" mean?</p>

<a name="163503697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163503697" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163503697">Johan Commelin (Apr 16 2019 at 20:22)</a>:</h4>
<p>Oooh, I don't actually know precisely. I meant "intended meaning".</p>

<a name="163503702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163503702" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163503702">Johan Commelin (Apr 16 2019 at 20:22)</a>:</h4>
<p>And I retract the claim.</p>

<a name="163503707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163503707" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163503707">Alexander Bentkamp (Apr 16 2019 at 20:22)</a>:</h4>
<blockquote>
<p>Why not just make a new function lc' or whatever?</p>
</blockquote>
<p>I don't want to duplicate the proofs that we have about <code>lc</code>.</p>

<a name="163503753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163503753" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163503753">Johan Commelin (Apr 16 2019 at 20:23)</a>:</h4>
<p>I guess that several proofs will actually simplify</p>

<a name="163503760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163503760" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163503760">Johan Commelin (Apr 16 2019 at 20:23)</a>:</h4>
<p>Other things will become a bit more verbose</p>

<a name="163503833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163503833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163503833">Neil Strickland (Apr 16 2019 at 20:24)</a>:</h4>
<p>I am strongly in favour of this.  All sorts of things are awkward and unnatural if you define linear independence in terms of subsets, because of the fact that vectors can accidentally be equal for spurious reasons.</p>

<a name="163505389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163505389" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163505389">Kevin Buzzard (Apr 16 2019 at 20:43)</a>:</h4>
<p>I must confess I was surprised when I first saw this. The justification I heard at the time was that to prove every vector space has a basis you want to use Zorn's lemma and then it's convenient to use subsets.</p>

<a name="163512432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163512432" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163512432">Alexander Bentkamp (Apr 16 2019 at 22:22)</a>:</h4>
<p>That was easier than I thought: <a href="https://github.com/leanprover-community/mathlib/pull/943" target="_blank" title="https://github.com/leanprover-community/mathlib/pull/943">https://github.com/leanprover-community/mathlib/pull/943</a></p>

<a name="163519553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163519553" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163519553">Chris Hughes (Apr 17 2019 at 00:27)</a>:</h4>
<p>Do we want the <code>beta</code> and <code>iota - &gt; beta</code> arguments for <code>lc</code>, given that they're not used?</p>

<a name="163519920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163519920" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163519920">Alexander Bentkamp (Apr 17 2019 at 00:34)</a>:</h4>
<p>Good point. I will try to remove them and see what happens.</p>

<a name="163520237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163520237" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163520237">Mario Carneiro (Apr 17 2019 at 00:40)</a>:</h4>
<p>I agree that linear independence should be in terms of families rather than sets, and <code>lc</code> itself seems a bit overly specific, but the definition of <code>lc</code> in Alex's first post doesn't make any sense (EDIT: I see chris also noted this)</p>

<a name="163520273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163520273" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163520273">Mario Carneiro (Apr 17 2019 at 00:41)</a>:</h4>
<p>It would be nice if there is an obvious generalization of <code>lc</code> that makes sense for families such that the submodule based definition of <code>linear_independent</code> stays the same</p>

<a name="163520359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163520359" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163520359">Mario Carneiro (Apr 17 2019 at 00:43)</a>:</h4>
<p>In PR <a href="https://github.com/leanprover-community/mathlib/issues/943" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/943">#943</a> the definition of <code>linear_independent</code> is still over a set, rather than a family?</p>

<a name="163520427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163520427" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163520427">Alexander Bentkamp (Apr 17 2019 at 00:44)</a>:</h4>
<p>It's over a set of indices of the family</p>

<a name="163520435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163520435" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163520435">Alexander Bentkamp (Apr 17 2019 at 00:44)</a>:</h4>
<p>So it can contain duplicate vectors</p>

<a name="163520446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163520446" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163520446">Mario Carneiro (Apr 17 2019 at 00:44)</a>:</h4>
<p>I think it can just be the entire family, the set isn't needed</p>

<a name="163520464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163520464" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163520464">Mario Carneiro (Apr 17 2019 at 00:45)</a>:</h4>
<p>we can compose with <code>subtype.val</code> to recover sets when needed</p>

<a name="163520657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163520657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163520657">Mario Carneiro (Apr 17 2019 at 00:48)</a>:</h4>
<p>Okay, so I'm catching up here, but I think what we want is for <code>lc</code> to denote <code>iota -&gt;0 alpha</code>, that is, finitely supported coefficients, and <code>lc.total</code> now takes a separate argument <code>iota -&gt; beta</code> for the family</p>

<a name="163520668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163520668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163520668">Mario Carneiro (Apr 17 2019 at 00:48)</a>:</h4>
<p>That's basically the same as what you have except that <code>lc</code> doesn't take the family as input</p>

<a name="163520711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163520711" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163520711">Alexander Bentkamp (Apr 17 2019 at 00:49)</a>:</h4>
<p>Yes, I am already working on removing the arguments <code>beta</code> and <code>v</code> where they are not needed.</p>

<a name="163520783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163520783" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163520783">Mario Carneiro (Apr 17 2019 at 00:50)</a>:</h4>
<p>so <code>lc.supported</code> isn't needed anymore in the definition of <code>linear_independent</code>, it can just be <code>(lc.total alpha v).ker = bot</code> where <code>v : iota -&gt; beta</code></p>

<a name="163520810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163520810" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163520810">Mario Carneiro (Apr 17 2019 at 00:51)</a>:</h4>
<p>in place of <code>lc.supported</code> we have some rules about how <code>lc.total</code> interacts with composition of the valuation functions</p>

<a name="163521031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163521031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163521031">Alexander Bentkamp (Apr 17 2019 at 00:56)</a>:</h4>
<p>Ok, I'll try that.</p>

<a name="163522963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163522963" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163522963">Alexander Bentkamp (Apr 17 2019 at 01:39)</a>:</h4>
<p>The first part (removing the unnecessary arguments) is done - see pull request.</p>

<a name="163523165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163523165" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163523165">Alexander Bentkamp (Apr 17 2019 at 01:44)</a>:</h4>
<p>The second part (changing the definiton of <code>linearly_independent</code> to <code>(lc.total alpha v).ker = bot</code>)  will be a lot of work. Are you sure it is the right thing to do? Having the additional set-argument may be more practical than forcing the user to use subtypes.</p>

<a name="163523676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163523676" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163523676">Mario Carneiro (Apr 17 2019 at 01:56)</a>:</h4>
<p>I agree it's not trivial, but in hindsight I think that was a bad move on the library design side</p>

<a name="163523713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163523713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163523713">Mario Carneiro (Apr 17 2019 at 01:57)</a>:</h4>
<p>I actually think that in almost all cases we care about linearly independent families, not sets. The only counterexample is the zorn's lemma proof of existence of a basis, but that has more to do with the particulars of that proof and shouldn't affect the rest of the development</p>

<a name="163526777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163526777" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163526777">Alexander Bentkamp (Apr 17 2019 at 03:04)</a>:</h4>
<p>How can lemmas like<br>
- A subset of a lin. indep. set is lin. indep.<br>
- If two sets are lin. indep. and their spans are disjoint, their union is lin. indep.<br>
best be formulated then?</p>

<a name="163527073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163527073" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163527073">Mario Carneiro (Apr 17 2019 at 03:10)</a>:</h4>
<p>subset is lin indep becomes f linind -&gt; g injective -&gt; g o f linind</p>

<a name="163527264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163527264" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163527264">Mario Carneiro (Apr 17 2019 at 03:15)</a>:</h4>
<p>union linind becomes something about <code>sum.elim f g</code> (that function might not exist now that I come to think of it, it's nondependent <code>sum.rec</code>). If <code>f : I -&gt; A</code> and <code>g : J -&gt; A</code> are linind and <code>span (range f) \cap span (range g) = bot</code> then <code>sum.elim f g : I + J -&gt; A</code> is linind</p>

<a name="163527293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163527293" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163527293">Mario Carneiro (Apr 17 2019 at 03:15)</a>:</h4>
<p>I'm not totally happy with <code>span (range f)</code> but it does the job and I don't think there is another notation for it</p>

<a name="163527357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163527357" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163527357">Alexander Bentkamp (Apr 17 2019 at 03:16)</a>:</h4>
<p>I am more worried about the <code>I + J</code>. This looks like dependent type hell :-)</p>

<a name="163527358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163527358" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163527358">Mario Carneiro (Apr 17 2019 at 03:16)</a>:</h4>
<p>no dependent types</p>

<a name="163527367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163527367" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163527367">Mario Carneiro (Apr 17 2019 at 03:17)</a>:</h4>
<p>that's just a plain old sum</p>

<a name="163527374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163527374" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163527374">Mario Carneiro (Apr 17 2019 at 03:17)</a>:</h4>
<p>The theorems about postcomposition with injective functions will allow you to use equivs if that representation doesn't make you happy</p>

<a name="163527434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163527434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163527434">Mario Carneiro (Apr 17 2019 at 03:19)</a>:</h4>
<p>I don't think the original theorem ever applies when the union is not disjoint, so it should be fine</p>

<a name="163527445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163527445" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163527445">Alexander Bentkamp (Apr 17 2019 at 03:19)</a>:</h4>
<p>Ok, that's right.</p>

<a name="163527446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163527446" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163527446">Mario Carneiro (Apr 17 2019 at 03:19)</a>:</h4>
<p>except maybe in weird trivial cases like the zero ring</p>

<a name="163527612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163527612" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163527612">Alexander Bentkamp (Apr 17 2019 at 03:23)</a>:</h4>
<p>I am worried about a user who actually would like to use sets, but is forced to use the subtypes corresponding to those sets. Then <code>↑s + ↑t</code> would be a different type than <code>↑ (s ⋃ t)</code>, which can be annoying.</p>

<a name="163530051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163530051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163530051">Mario Carneiro (Apr 17 2019 at 04:22)</a>:</h4>
<p>This can be proven as a lemma</p>

<a name="163530054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163530054" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163530054">Mario Carneiro (Apr 17 2019 at 04:23)</a>:</h4>
<p>the equiv is already there, you just have to apply it here</p>

<a name="163530454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163530454" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163530454">Alexander Bentkamp (Apr 17 2019 at 04:33)</a>:</h4>
<p>Ok, sounds good</p>

<a name="163535773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163535773" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163535773">Johan Commelin (Apr 17 2019 at 06:43)</a>:</h4>
<p>So now <code>lc</code> is just a type wrapper around <code>finsupp</code>. Is there any reason to not just use finsupp?</p>

<a name="163537354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163537354" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163537354">Mario Carneiro (Apr 17 2019 at 07:18)</a>:</h4>
<p>no</p>

<a name="163537367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163537367" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163537367">Mario Carneiro (Apr 17 2019 at 07:18)</a>:</h4>
<p>once upon a time it was a bad module because of the multiple base rings problem</p>

<a name="163537389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163537389" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163537389">Johan Commelin (Apr 17 2019 at 07:19)</a>:</h4>
<p>Ok, then I suggest just using <code>finsupp</code>, because it means even less duplication.</p>

<a name="163537547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163537547" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163537547">Johan Commelin (Apr 17 2019 at 07:22)</a>:</h4>
<p><span class="user-mention" data-user-id="129120">@Alexander Bentkamp</span> What is your opinion? In order to avoid duplicate work, do you think we should wait for a while with <a href="https://github.com/leanprover-community/mathlib/issues/943" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/943">#943</a>?</p>

<a name="163540034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163540034" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163540034">Rob Lewis (Apr 17 2019 at 08:05)</a>:</h4>
<p>If <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> has time to chime in here, I'd love to hear his opinion. He worked quite a bit with this part of the library for the cap set proof. But he's a few weeks into the new job and in California right now. Maybe he's too distracted by wealth and fame and shiny white electronics.</p>

<a name="163556924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163556924" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163556924">Alexander Bentkamp (Apr 17 2019 at 12:51)</a>:</h4>
<blockquote>
<p>@Alexander Bentkamp What is your opinion? In order to avoid duplicate work, do you think we should wait for a while with <a href="https://github.com/leanprover-community/mathlib/issues/943" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/943">#943</a>?</p>
</blockquote>
<p>I'd be happy if you'd merge it. It may not be perfect, but it's a step in the right direction.</p>

<a name="163647092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163647092" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163647092">Chris Hughes (Apr 18 2019 at 12:40)</a>:</h4>
<p>I'm not in favour of changing a definition with the intention of changing it straight away afterwards, just in case somebody ends up having to update their project twice, who didn't know they should wait until the second change.</p>

<a name="163714696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163714696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163714696">Johan Commelin (Apr 19 2019 at 05:27)</a>:</h4>
<p><span class="user-mention" data-user-id="129120">@Alexander Bentkamp</span> Thanks for the work on merging <code>lc</code> and <code>finsupp</code>. Well done!</p>

<a name="163953118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163953118" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163953118">Alexander Bentkamp (Apr 23 2019 at 01:24)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span>  As we discussed today in person, I will try to change the definiton of <code>linearly_independent</code> to <code>(lc.total alpha v).ker = bot</code>, i.e. remove the <code>s : set</code> argument. Do you think I should also redefine <code>is_basis</code> to use families instead of sets? It doesn't seem to make much sense there...</p>

<a name="163959433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163959433" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163959433">Mario Carneiro (Apr 23 2019 at 03:57)</a>:</h4>
<p>Certainly. In fact I think the argument to use families instead of sets for a basis is even stronger than for linearly independent sets. A basis is necessarily injective so it might seem redundant, but we definitely want to think of basis elements as indexed by a family. In particular this seamlessly represents the concept of "ordered basis", since rather than asking for an ordering on some subset of the type (messy) we have an indexed family where the index type has a built in ordering (simple and provided by TC inference)</p>

<a name="163964826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163964826" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163964826">Johan Commelin (Apr 23 2019 at 06:08)</a>:</h4>
<p><span class="user-mention" data-user-id="129120">@Alexander Bentkamp</span> I think this is a very good move. I'm looking forward to your PR.</p>

<a name="163965271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163965271" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163965271">Kevin Buzzard (Apr 23 2019 at 06:17)</a>:</h4>
<blockquote>
<p>Certainly. In fact I think the argument to use families instead of sets for a basis is even stronger than for linearly independent sets. A basis is necessarily injective so it might seem redundant, but we definitely want to think of basis elements as indexed by a family. In particular this seamlessly represents the concept of "ordered basis", since rather than asking for an ordering on some subset of the type (messy) we have an indexed family where the index type has a built in ordering (simple and provided by TC inference)</p>
</blockquote>
<p>For a free module over the zero ring, a basis might not be injective! R is isomorphic to R^2 as an R-module.</p>

<a name="163965500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163965500" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163965500">Johan Commelin (Apr 23 2019 at 06:22)</a>:</h4>
<p>If you squint a bit you can easily see that <code>punit</code> is defeq to <code>p0wnd</code></p>

<a name="163965588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163965588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163965588">Johan Commelin (Apr 23 2019 at 06:24)</a>:</h4>
<p>The zero ring is the one ring...</p>

<a name="163999131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/163999131" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#163999131">Alexander Bentkamp (Apr 23 2019 at 15:17)</a>:</h4>
<p>The empty set should then be replaced by a family with an empty type as index set. How do I best describe an empty type? Not every empty type is equal to <code>empty</code>, right? So maybe <code>∀ x : ⍺, false</code>? Or <code>¬ nonempty ⍺</code>?</p>

<a name="164001422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164001422" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164001422">Mario Carneiro (Apr 23 2019 at 15:43)</a>:</h4>
<p>For the theorem I would use not nonempty as an assumption, so it is maximally applicable</p>

<a name="164025529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164025529" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164025529">Alexander Bentkamp (Apr 23 2019 at 20:11)</a>:</h4>
<p>I am trying to define <code>def finsupp.sum_elim_left {α β γ : Type*} [has_zero γ] (l : α ⊕ β →₀ γ) : α →₀ γ</code>, which should simply ignore the values on <code>β</code>. Anything that I can come up with seems far too complicated. Any suggestions?</p>

<a name="164025656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164025656" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164025656">Kevin Buzzard (Apr 23 2019 at 20:13)</a>:</h4>
<p>I would just precompose with the injection alpha -&gt; alpha + beta I guess.</p>

<a name="164025660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164025660" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164025660">Mario Carneiro (Apr 23 2019 at 20:13)</a>:</h4>
<p><code>map_domain inl</code>?</p>

<a name="164025759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164025759" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164025759">Mario Carneiro (Apr 23 2019 at 20:14)</a>:</h4>
<p>I guess you need to know some finiteness property of the function in order for preimages to work like that</p>

<a name="164025943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164025943" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164025943">Kevin Buzzard (Apr 23 2019 at 20:17)</a>:</h4>
<p>If you use <code>map_domain</code>, don't you need a map from alpha+beta to alpha? This might be problematic if alpha is empty and beta is not. Or have I got things the wrong way around?</p>

<a name="164026240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164026240" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164026240">Kevin Buzzard (Apr 23 2019 at 20:21)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm">- Given `f : α₁ ↪ α₂` and `v : α₁ →₀ β`, `emb_domain f v : α₂ →₀ β` is the finitely supported</span>
<span class="cm">function whose value at `f a : α₂` is `v a`. For a `a : α₁` outside the domain of `f` it is zero. -/</span>
<span class="n">def</span> <span class="n">emb_domain</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α₁</span> <span class="err">↪</span> <span class="n">α₂</span><span class="o">)</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">α₁</span> <span class="bp">→</span><span class="err">₀</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">α₂</span> <span class="bp">→</span><span class="err">₀</span> <span class="n">β</span> <span class="o">:=</span>
</pre></div>


<p>I think that's what you're after</p>

<a name="164026303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164026303" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164026303">Kevin Buzzard (Apr 23 2019 at 20:21)</a>:</h4>
<p>no that's still the wrong way round</p>

<a name="164027193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164027193" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164027193">Kevin Buzzard (Apr 23 2019 at 20:33)</a>:</h4>
<p>The closest I can find is</p>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm">- `subtype_domain p f` is the restriction of the finitely supported function</span>
<span class="cm">  `f` to the subtype `p`. -/</span>
<span class="n">def</span> <span class="n">subtype_domain</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable_pred</span> <span class="n">p</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span><span class="err">₀</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">subtype</span> <span class="n">p</span> <span class="bp">→</span><span class="err">₀</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>


<p>But this is not ideal -- it should be Stricklandized into a definition which works for an arbitrary injection gamma -&gt; alpha, not just a subtype.</p>

<a name="164027283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164027283" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164027283">Kevin Buzzard (Apr 23 2019 at 20:34)</a>:</h4>
<p>What I am surprised by here is that finsupp has been used extensively in a lot of APIs so I am pretty sure I must have missed it -- someone would surely have spotted this by now.</p>

<a name="164028811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164028811" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164028811">Alexander Bentkamp (Apr 23 2019 at 20:53)</a>:</h4>
<p>Yes, <code>map_domain</code> and <code>emb_domain</code> are in the wrong direction. And I don't see how I could modify <code>subtype_domain</code> to work with an injection...</p>

<a name="164034774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164034774" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164034774">Alexander Bentkamp (Apr 23 2019 at 22:16)</a>:</h4>
<p>I found this solution, which is quite ok I think:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">finsupp</span><span class="bp">.</span><span class="n">sum_elim_left</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">γ</span><span class="o">]</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">α</span> <span class="err">⊕</span> <span class="n">β</span> <span class="bp">→</span><span class="err">₀</span> <span class="n">γ</span><span class="o">)</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span><span class="err">₀</span> <span class="n">γ</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">support</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">finite_preimage</span> <span class="o">(</span><span class="bp">@</span><span class="n">sum</span><span class="bp">.</span><span class="n">inl</span><span class="bp">.</span><span class="n">inj</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span> <span class="n">l</span><span class="bp">.</span><span class="n">support</span><span class="bp">.</span><span class="n">finite_to_set</span><span class="o">)</span><span class="bp">.</span><span class="n">to_finset</span><span class="o">,</span>
  <span class="n">to_fun</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="n">l</span> <span class="o">(</span><span class="n">sum</span><span class="bp">.</span><span class="n">inl</span> <span class="n">a</span><span class="o">)),</span>
  <span class="n">mem_support_to_fun</span> <span class="o">:=</span>
    <span class="k">begin</span>
      <span class="n">intros</span> <span class="n">a</span><span class="o">,</span>
      <span class="n">simp</span> <span class="o">[</span><span class="n">set</span><span class="bp">.</span><span class="n">finite</span><span class="bp">.</span><span class="n">to_finset</span><span class="o">]</span>
    <span class="kn">end</span> <span class="o">}</span>
</pre></div>


<p>*Edit: I removed a few spurious type assumptions</p>

<a name="164035013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164035013" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164035013">Mario Carneiro (Apr 23 2019 at 22:20)</a>:</h4>
<p>I think <code>emb_domain</code> should work the other way around, using essentially the proof you gave with a variable in place of <code>sum.inl.inj</code></p>

<a name="164035036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164035036" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164035036">Mario Carneiro (Apr 23 2019 at 22:21)</a>:</h4>
<p>Actually I'm surprised <code>emb_domain</code> exists at all, since it's a special case of <code>map_domain</code>. Maybe it's for the defeqs?</p>

<a name="164035208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164035208" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164035208">Alexander Bentkamp (Apr 23 2019 at 22:23)</a>:</h4>
<p>map_domain works only if beta is a <code>add_comm_monoid</code>.</p>

<a name="164035510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164035510" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164035510">Mario Carneiro (Apr 23 2019 at 22:28)</a>:</h4>
<p>I guess the most general precondition for which precomp is well defined is that the fibers of the function are fintypes</p>

<a name="164035561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164035561" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164035561">Alexander Bentkamp (Apr 23 2019 at 22:29)</a>:</h4>
<p>I'll see what I can do.</p>

<a name="164052148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164052148" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164052148">Johan Commelin (Apr 24 2019 at 04:15)</a>:</h4>
<blockquote>
<p>I guess the most general precondition for which precomp is well defined is that the fibers of the function are fintypes</p>
</blockquote>
<p>Aka "finite maps"?</p>

<a name="164090569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164090569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164090569">Alexander Bentkamp (Apr 24 2019 at 15:24)</a>:</h4>
<p>I didn't know that they were called that either, but I think that's what Mario meant.</p>

<a name="164090718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164090718" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164090718">Alexander Bentkamp (Apr 24 2019 at 15:25)</a>:</h4>
<p>I will stick to injective maps for now though, because that is what the theorems in <code>finite.lean</code> are about. If I try to make everything as general as possible I will never get it done :)</p>

<a name="164099219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164099219" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164099219">Alexander Bentkamp (Apr 24 2019 at 17:00)</a>:</h4>
<p>Is <code>α ⊕ β</code> a sigma type? For example, in <code>big_operators.lean</code> there are no lemmas about <code>α ⊕ β</code>, but there are some about <code>sigma</code>. Can I use those?</p>

<a name="164111026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/linear_independent%20for%20families/near/164111026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/21882linearindependentforfamilies.html#164111026">Alexander Bentkamp (Apr 24 2019 at 19:14)</a>:</h4>
<p>OK, I managed to establish a connection between <code>⊕</code> and <code>sigma</code> with Simon's help.</p>


{% endraw %}

{% include archive_update.html %}