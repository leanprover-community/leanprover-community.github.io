---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/26743SchroederBernstein.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/26743SchroederBernstein.html">Schroeder-Bernstein</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="175591319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Schroeder-Bernstein/near/175591319" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/26743SchroederBernstein.html#175591319">Scott Morrison (Sep 13 2019 at 03:46)</a>:</h4>
<p>There's a stronger version of the Schroeder-Bernstein theorem</p>
<div class="codehilite"><pre><span></span>theorem schroeder_bernstein {f : α → β} {g : β → α}
  (hf : injective f) (hg : injective g) : ∃h:α→β, bijective h := ...
</pre></div>


<p>that further promises that for each <code>a : α</code>, either <code>h a = f a</code>, or <code>\exists b : β, g (h a) = a</code>.</p>
<p>We don't seem to have that form. Does anyone have it in a secret stash, or feels like adding it? :-)</p>

<a name="175591675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Schroeder-Bernstein/near/175591675" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/26743SchroederBernstein.html#175591675">Kevin Buzzard (Sep 13 2019 at 03:56)</a>:</h4>
<p>It follows from the proof! What more do you need? ;-)</p>

<a name="175591769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Schroeder-Bernstein/near/175591769" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/26743SchroederBernstein.html#175591769">Mario Carneiro (Sep 13 2019 at 03:59)</a>:</h4>
<p>I agree with Kevin, it's pretty easy to adapt the proof to get this (also, the exists b should be deleted in that statement)</p>

<a name="175592062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Schroeder-Bernstein/near/175592062" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/26743SchroederBernstein.html#175592062">Kevin Buzzard (Sep 13 2019 at 04:06)</a>:</h4>
<p>(Assuming mathlib used the proof I know ;-) )</p>

<a name="175592132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Schroeder-Bernstein/near/175592132" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/26743SchroederBernstein.html#175592132">Keeley Hoek (Sep 13 2019 at 04:08)</a>:</h4>
<p>what does <code>''</code> mean in e.g. <a href="https://github.com/leanprover-community/mathlib/blob/b5b40c749f2f581778e5d72907eca1aa663962b1/src/set_theory/schroeder_bernstein.lean" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/b5b40c749f2f581778e5d72907eca1aa663962b1/src/set_theory/schroeder_bernstein.lean">https://github.com/leanprover-community/mathlib/blob/b5b40c749f2f581778e5d72907eca1aa663962b1/src/set_theory/schroeder_bernstein.lean</a></p>

<a name="175592241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Schroeder-Bernstein/near/175592241" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/26743SchroederBernstein.html#175592241">Alex J. Best (Sep 13 2019 at 04:11)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/34d69b5054549f6cc2de9a6311be5cba9c595977/src/data/set/basic.lean#L809" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/34d69b5054549f6cc2de9a6311be5cba9c595977/src/data/set/basic.lean#L809">https://github.com/leanprover-community/mathlib/blob/34d69b5054549f6cc2de9a6311be5cba9c595977/src/data/set/basic.lean#L809</a></p>

<a name="175592289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Schroeder-Bernstein/near/175592289" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/26743SchroederBernstein.html#175592289">Alex J. Best (Sep 13 2019 at 04:12)</a>:</h4>
<p>Tldr: image</p>

<a name="175592754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Schroeder-Bernstein/near/175592754" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/26743SchroederBernstein.html#175592754">Scott Morrison (Sep 13 2019 at 04:23)</a>:</h4>
<p>Okay... I'm unlikely to do this myself, but I hope someone does it sometime!</p>

<a name="175641802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Schroeder-Bernstein/near/175641802" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/26743SchroederBernstein.html#175641802">Jesse Michael Han (Sep 13 2019 at 16:44)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">order</span><span class="bp">.</span><span class="n">fixed_points</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">lattice</span> <span class="n">logic</span><span class="bp">.</span><span class="n">function</span> <span class="n">logic</span><span class="bp">.</span><span class="n">embedding</span> <span class="n">order</span><span class="bp">.</span><span class="n">zorn</span> <span class="n">tactic</span>

<span class="kn">open</span> <span class="n">lattice</span> <span class="n">set</span> <span class="n">classical</span>
<span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="n">prop_decidable</span>

<span class="n">universes</span> <span class="n">u</span> <span class="n">v</span>

<span class="kn">namespace</span> <span class="n">function</span>
<span class="kn">namespace</span> <span class="n">embedding</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span>

<span class="kn">theorem</span> <span class="n">schroeder_bernstein&#39;</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">α</span><span class="o">}</span>
  <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">hg</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">h</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">,</span> <span class="n">bijective</span> <span class="n">h</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span><span class="o">},</span> <span class="n">h</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">∨</span> <span class="n">g</span> <span class="o">(</span><span class="n">h</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">let</span> <span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="o">:=</span> <span class="n">lfp</span> <span class="err">$</span> <span class="bp">λ</span><span class="n">s</span><span class="o">,</span> <span class="bp">-</span> <span class="o">(</span><span class="n">g</span> <span class="err">&#39;&#39;</span> <span class="bp">-</span> <span class="o">(</span><span class="n">f</span> <span class="err">&#39;&#39;</span> <span class="n">s</span><span class="o">))</span> <span class="k">in</span>
<span class="k">have</span> <span class="n">hs</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">=</span> <span class="bp">-</span> <span class="o">(</span><span class="n">g</span> <span class="err">&#39;&#39;</span> <span class="bp">-</span> <span class="o">(</span><span class="n">f</span> <span class="err">&#39;&#39;</span> <span class="n">s</span><span class="o">)),</span>
  <span class="k">from</span> <span class="n">lfp_eq</span> <span class="err">$</span> <span class="k">assume</span> <span class="n">s</span> <span class="n">t</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">compl_subset_compl</span><span class="bp">.</span><span class="n">mpr</span> <span class="err">$</span> <span class="n">image_subset</span> <span class="bp">_</span> <span class="err">$</span>
    <span class="n">compl_subset_compl</span><span class="bp">.</span><span class="n">mpr</span> <span class="err">$</span> <span class="n">image_subset</span> <span class="bp">_</span> <span class="n">h</span><span class="o">,</span>

<span class="k">have</span> <span class="n">hns</span> <span class="o">:</span> <span class="bp">-</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">g</span> <span class="err">&#39;&#39;</span> <span class="bp">-</span> <span class="o">(</span><span class="n">f</span> <span class="err">&#39;&#39;</span> <span class="n">s</span><span class="o">),</span>
  <span class="k">from</span> <span class="n">lattice</span><span class="bp">.</span><span class="n">neg_eq_neg_of_eq</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hs</span><span class="bp">.</span><span class="n">symm</span><span class="o">],</span>

<span class="k">let</span> <span class="n">g&#39;</span> <span class="o">:=</span> <span class="bp">λ</span><span class="n">a</span><span class="o">,</span> <span class="bp">@</span><span class="n">inv_fun</span> <span class="n">β</span> <span class="bp">⟨</span><span class="n">f</span> <span class="n">a</span><span class="bp">⟩</span> <span class="n">α</span> <span class="n">g</span> <span class="n">a</span> <span class="k">in</span>
<span class="k">have</span> <span class="n">g&#39;g</span> <span class="o">:</span> <span class="n">g&#39;</span> <span class="err">∘</span> <span class="n">g</span> <span class="bp">=</span> <span class="n">id</span><span class="o">,</span>
  <span class="k">from</span> <span class="n">funext</span> <span class="err">$</span> <span class="k">assume</span> <span class="n">b</span><span class="o">,</span> <span class="bp">@</span><span class="n">left_inverse_inv_fun</span> <span class="bp">_</span> <span class="bp">⟨</span><span class="n">f</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span><span class="bp">⟩</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">hg</span> <span class="n">b</span><span class="o">,</span>
<span class="k">have</span> <span class="n">hg&#39;ns</span> <span class="o">:</span> <span class="n">g&#39;</span> <span class="err">&#39;&#39;</span> <span class="o">(</span><span class="bp">-</span><span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">-</span> <span class="o">(</span><span class="n">f</span> <span class="err">&#39;&#39;</span> <span class="n">s</span><span class="o">),</span>
  <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">hns</span><span class="o">,</span> <span class="err">←</span><span class="n">image_comp</span><span class="o">,</span> <span class="n">g&#39;g</span><span class="o">,</span> <span class="n">image_id</span><span class="o">],</span>

<span class="k">let</span> <span class="n">h</span> <span class="o">:=</span> <span class="bp">λ</span><span class="n">a</span><span class="o">,</span> <span class="k">if</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">s</span> <span class="k">then</span> <span class="n">f</span> <span class="n">a</span> <span class="k">else</span> <span class="n">g&#39;</span> <span class="n">a</span> <span class="k">in</span>

<span class="k">have</span> <span class="n">h</span> <span class="err">&#39;&#39;</span> <span class="n">univ</span> <span class="bp">=</span> <span class="n">univ</span><span class="o">,</span>
  <span class="k">from</span> <span class="k">calc</span> <span class="n">h</span> <span class="err">&#39;&#39;</span> <span class="n">univ</span> <span class="bp">=</span> <span class="n">h</span> <span class="err">&#39;&#39;</span> <span class="n">s</span> <span class="err">∪</span> <span class="n">h</span> <span class="err">&#39;&#39;</span> <span class="o">(</span><span class="bp">-</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">image_union</span><span class="o">,</span> <span class="n">union_compl_self</span><span class="o">]</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">f</span> <span class="err">&#39;&#39;</span> <span class="n">s</span> <span class="err">∪</span> <span class="n">g&#39;</span> <span class="err">&#39;&#39;</span> <span class="o">(</span><span class="bp">-</span><span class="n">s</span><span class="o">)</span> <span class="o">:</span>
      <span class="n">congr</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="o">(</span><span class="err">∪</span><span class="o">)</span>
        <span class="o">(</span><span class="n">image_congr</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">if_pos</span><span class="o">]</span> <span class="o">{</span><span class="n">contextual</span> <span class="o">:=</span> <span class="n">tt</span><span class="o">}))</span>
        <span class="o">(</span><span class="n">image_congr</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">if_neg</span><span class="o">]</span> <span class="o">{</span><span class="n">contextual</span> <span class="o">:=</span> <span class="n">tt</span><span class="o">})</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">univ</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">hg&#39;ns</span><span class="o">,</span> <span class="n">union_compl_self</span><span class="o">],</span>
<span class="k">have</span> <span class="n">surjective</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">from</span> <span class="k">assume</span> <span class="n">b</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">h</span> <span class="err">&#39;&#39;</span> <span class="n">univ</span><span class="o">,</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">this</span><span class="o">]</span><span class="bp">;</span> <span class="n">trivial</span><span class="o">,</span>
  <span class="k">let</span> <span class="bp">⟨</span><span class="n">a</span><span class="o">,</span> <span class="bp">_</span><span class="o">,</span> <span class="n">eq</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">this</span> <span class="k">in</span>
  <span class="bp">⟨</span><span class="n">a</span><span class="o">,</span> <span class="n">eq</span><span class="bp">⟩</span><span class="o">,</span>

<span class="k">have</span> <span class="n">split</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">x</span><span class="err">∈</span><span class="n">s</span><span class="o">,</span> <span class="bp">∀</span><span class="n">y</span><span class="err">∉</span><span class="n">s</span><span class="o">,</span> <span class="n">h</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">h</span> <span class="n">y</span> <span class="bp">→</span> <span class="n">false</span><span class="o">,</span>
  <span class="k">from</span> <span class="k">assume</span> <span class="n">x</span> <span class="n">hx</span> <span class="n">y</span> <span class="n">hy</span> <span class="n">eq</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">g</span> <span class="err">&#39;&#39;</span> <span class="bp">-</span> <span class="o">(</span><span class="n">f</span> <span class="err">&#39;&#39;</span> <span class="n">s</span><span class="o">),</span> <span class="k">by</span> <span class="n">rwa</span> <span class="o">[</span><span class="err">←</span><span class="n">hns</span><span class="o">],</span>
  <span class="k">let</span> <span class="bp">⟨</span><span class="n">y&#39;</span><span class="o">,</span> <span class="n">hy&#39;</span><span class="o">,</span> <span class="n">eq_y&#39;</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">this</span> <span class="k">in</span>
  <span class="k">have</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y&#39;</span><span class="o">,</span>
    <span class="k">from</span> <span class="k">calc</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">g&#39;</span> <span class="n">y</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">hx</span><span class="o">,</span> <span class="n">hy</span><span class="o">,</span> <span class="n">if_pos</span><span class="o">,</span> <span class="n">if_neg</span><span class="o">]</span> <span class="n">at</span> <span class="n">eq</span><span class="bp">;</span> <span class="n">assumption</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">g&#39;</span> <span class="err">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y&#39;</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[(</span><span class="err">∘</span><span class="o">),</span> <span class="n">eq_y&#39;</span><span class="o">]</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="bp">_</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">g&#39;g</span><span class="o">],</span>
  <span class="k">have</span> <span class="n">y&#39;</span> <span class="err">∈</span> <span class="n">f</span> <span class="err">&#39;&#39;</span> <span class="n">s</span><span class="o">,</span> <span class="k">from</span> <span class="n">this</span> <span class="bp">▸</span> <span class="n">mem_image_of_mem</span> <span class="bp">_</span> <span class="n">hx</span><span class="o">,</span>
  <span class="n">hy&#39;</span> <span class="n">this</span><span class="o">,</span>
<span class="k">have</span> <span class="n">injective</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">from</span> <span class="k">assume</span> <span class="n">x</span> <span class="n">y</span> <span class="n">eq</span><span class="o">,</span>
  <span class="n">by_cases</span>
    <span class="o">(</span><span class="k">assume</span> <span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">by_cases</span>
      <span class="o">(</span><span class="k">assume</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">hx</span><span class="o">,</span> <span class="n">hy</span><span class="o">,</span> <span class="n">if_pos</span><span class="o">,</span> <span class="n">if_neg</span><span class="o">]</span> <span class="n">at</span> <span class="n">eq</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">hf</span> <span class="n">eq</span><span class="o">)</span>
      <span class="o">(</span><span class="k">assume</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="err">∉</span> <span class="n">s</span><span class="o">,</span> <span class="o">(</span><span class="n">split</span> <span class="n">x</span> <span class="n">hx</span> <span class="n">y</span> <span class="n">hy</span> <span class="n">eq</span><span class="o">)</span><span class="bp">.</span><span class="n">elim</span><span class="o">))</span>
    <span class="o">(</span><span class="k">assume</span> <span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∉</span> <span class="n">s</span><span class="o">,</span> <span class="n">by_cases</span>
      <span class="o">(</span><span class="k">assume</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="o">(</span><span class="n">split</span> <span class="n">y</span> <span class="n">hy</span> <span class="n">x</span> <span class="n">hx</span> <span class="n">eq</span><span class="bp">.</span><span class="n">symm</span><span class="o">)</span><span class="bp">.</span><span class="n">elim</span><span class="o">)</span>
      <span class="o">(</span><span class="k">assume</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="err">∉</span> <span class="n">s</span><span class="o">,</span>
        <span class="k">have</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">g</span> <span class="err">&#39;&#39;</span> <span class="bp">-</span> <span class="o">(</span><span class="n">f</span> <span class="err">&#39;&#39;</span> <span class="n">s</span><span class="o">),</span> <span class="k">by</span> <span class="n">rwa</span> <span class="o">[</span><span class="err">←</span><span class="n">hns</span><span class="o">],</span>
        <span class="k">let</span> <span class="bp">⟨</span><span class="n">x&#39;</span><span class="o">,</span> <span class="n">hx&#39;</span><span class="o">,</span> <span class="n">eqx</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">this</span> <span class="k">in</span>
        <span class="k">have</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">g</span> <span class="err">&#39;&#39;</span> <span class="bp">-</span> <span class="o">(</span><span class="n">f</span> <span class="err">&#39;&#39;</span> <span class="n">s</span><span class="o">),</span> <span class="k">by</span> <span class="n">rwa</span> <span class="o">[</span><span class="err">←</span><span class="n">hns</span><span class="o">],</span>
        <span class="k">let</span> <span class="bp">⟨</span><span class="n">y&#39;</span><span class="o">,</span> <span class="n">hy&#39;</span><span class="o">,</span> <span class="n">eqy</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">this</span> <span class="k">in</span>
        <span class="k">have</span> <span class="n">g&#39;</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">g&#39;</span> <span class="n">y</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">hx</span><span class="o">,</span> <span class="n">hy</span><span class="o">,</span> <span class="n">if_pos</span><span class="o">,</span> <span class="n">if_neg</span><span class="o">]</span> <span class="n">at</span> <span class="n">eq</span><span class="bp">;</span> <span class="n">assumption</span><span class="o">,</span>
        <span class="k">have</span> <span class="o">(</span><span class="n">g&#39;</span> <span class="err">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">x&#39;</span> <span class="bp">=</span> <span class="o">(</span><span class="n">g&#39;</span> <span class="err">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y&#39;</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[(</span><span class="err">∘</span><span class="o">),</span> <span class="n">eqx</span><span class="o">,</span> <span class="n">eqy</span><span class="o">,</span> <span class="n">this</span><span class="o">],</span>
        <span class="k">have</span> <span class="n">x&#39;</span> <span class="bp">=</span> <span class="n">y&#39;</span><span class="o">,</span> <span class="k">by</span> <span class="n">rwa</span> <span class="o">[</span><span class="n">g&#39;g</span><span class="o">]</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
        <span class="k">calc</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">g</span> <span class="n">x&#39;</span> <span class="o">:</span> <span class="n">eqx</span><span class="bp">.</span><span class="n">symm</span>
          <span class="bp">...</span> <span class="bp">=</span> <span class="n">g</span> <span class="n">y&#39;</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">this</span><span class="o">]</span>
          <span class="bp">...</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">:</span> <span class="n">eqy</span><span class="o">)),</span>

  <span class="k">by</span> <span class="o">{</span><span class="n">refine</span> <span class="bp">⟨</span><span class="n">h</span><span class="o">,</span> <span class="bp">⟨⟨</span><span class="err">‹</span><span class="n">injective</span> <span class="n">h</span><span class="err">›</span><span class="o">,</span> <span class="err">‹</span><span class="n">surjective</span> <span class="n">h</span><span class="err">›</span><span class="bp">⟩</span><span class="o">,</span><span class="bp">_⟩⟩</span><span class="o">,</span>
          <span class="o">{</span> <span class="n">intro</span> <span class="n">a</span><span class="o">,</span> <span class="n">by_cases</span> <span class="n">Ha</span> <span class="o">:</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span>
            <span class="o">{</span> <span class="n">left</span><span class="o">,</span> <span class="n">dsimp</span> <span class="o">[</span><span class="n">h</span><span class="o">],</span> <span class="n">simp</span> <span class="o">[</span><span class="n">Ha</span><span class="o">]</span> <span class="o">},</span>
            <span class="o">{</span> <span class="n">right</span><span class="o">,</span> <span class="n">dsimp</span> <span class="o">[</span><span class="n">h</span><span class="o">],</span> <span class="n">rw</span> <span class="o">(</span><span class="n">if_neg</span> <span class="err">‹</span><span class="bp">_</span><span class="err">›</span><span class="o">),</span> <span class="n">apply</span> <span class="n">inv_fun_eq</span><span class="o">,</span>
              <span class="k">have</span> <span class="n">Ha&#39;</span> <span class="o">:</span> <span class="n">a</span> <span class="err">∈</span> <span class="bp">-</span><span class="n">s</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">rwa</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_compl_eq</span><span class="o">,</span> <span class="n">finish</span> <span class="o">}}}</span>

<span class="kn">end</span> <span class="n">embedding</span>
<span class="kn">end</span> <span class="n">function</span>
</pre></div>

<a name="175642053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Schroeder-Bernstein/near/175642053" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/26743SchroederBernstein.html#175642053">Jesse Michael Han (Sep 13 2019 at 16:47)</a>:</h4>
<p>i'm not a fan of huge proofs like this</p>
<p>is it worse to define auxiliary constructions and lemmas as <code>private</code> declarations in a separate section?</p>

<a name="175671753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Schroeder-Bernstein/near/175671753" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/26743SchroederBernstein.html#175671753">Scott Morrison (Sep 13 2019 at 23:08)</a>:</h4>
<p>Yes, I was surprised how monolithic this proof was, and I think it's definitely better style to break out intermediate lemmas and constructions. Ideally one would have been able to prove this stronger version of SB just by adding some lemmas, not having to break into the old proof.</p>

<a name="175671777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Schroeder-Bernstein/near/175671777" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/26743SchroederBernstein.html#175671777">Scott Morrison (Sep 13 2019 at 23:09)</a>:</h4>
<p>I don't think the intermediate results even need to be private.</p>

<a name="175694751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Schroeder-Bernstein/near/175694751" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/26743SchroederBernstein.html#175694751">David Michael Roberts (Sep 14 2019 at 10:41)</a>:</h4>
<p>You could prove the Knaster-Tarski theorem first (<a href="https://ncatlab.org/nlab/show/fixed+point#knastertarski_theorem" target="_blank" title="https://ncatlab.org/nlab/show/fixed+point#knastertarski_theorem">https://ncatlab.org/nlab/show/fixed+point#knastertarski_theorem</a>), then CBS, as in <a href="https://ncatlab.org/nlab/show/Cantor-Schroeder-Bernstein+theorem#proof" target="_blank" title="https://ncatlab.org/nlab/show/Cantor-Schroeder-Bernstein+theorem#proof">https://ncatlab.org/nlab/show/Cantor-Schroeder-Bernstein+theorem#proof</a> (interestingly, this still constructs the same bijection, which has the properties Scott wanted above)</p>

<a name="175694811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Schroeder-Bernstein/near/175694811" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/26743SchroederBernstein.html#175694811">David Michael Roberts (Sep 14 2019 at 10:43)</a>:</h4>
<p>There's also some deep discussion here: <a href="https://golem.ph.utexas.edu/category/2014/12/a_categorical_understanding_of.html" target="_blank" title="https://golem.ph.utexas.edu/category/2014/12/a_categorical_understanding_of.html">https://golem.ph.utexas.edu/category/2014/12/a_categorical_understanding_of.html</a></p>

<a name="175704042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Schroeder-Bernstein/near/175704042" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/26743SchroederBernstein.html#175704042">Jesse Michael Han (Sep 14 2019 at 14:38)</a>:</h4>
<p>i thought this proof did use tarski-knaster, in the guise of <code>lfp</code></p>

<a name="175951321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Schroeder-Bernstein/near/175951321" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/26743SchroederBernstein.html#175951321">David Michael Roberts (Sep 17 2019 at 21:35)</a>:</h4>
<p>Oh, I see. I didn't read through it <span aria-label="sweat" class="emoji emoji-1f613" role="img" title="sweat">:sweat:</span></p>


{% endraw %}

{% include archive_update.html %}