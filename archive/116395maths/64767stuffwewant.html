---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/64767stuffwewant.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html">stuff we want</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="163314770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163314770" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163314770">Kevin Buzzard (Apr 14 2019 at 12:18)</a>:</h4>
<p>I think it's time to update</p>
<p><a href="https://github.com/leanprover-community/mathlib/blob/master/docs/wip.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/wip.md">https://github.com/leanprover-community/mathlib/blob/master/docs/wip.md</a></p>
<p>and it's also perhaps a good idea to write a list of stuff which we'd like to have in mathlib.</p>
<p>Everyone -- what maths would you like to see in mathlib? Some ideas are <a href="https://mathoverflow.net/questions/311071/which-mathematical-definitions-should-be-formalised-in-lean" target="_blank" title="https://mathoverflow.net/questions/311071/which-mathematical-definitions-should-be-formalised-in-lean">on the mathoverflow question</a> -- which ones should be listed as "todo"? Are we ready for manifolds next? I don't know enough about the state of multivariable calculus in Lean to know how ready we are.</p>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> <span class="user-mention" data-user-id="110087">@Scott Morrison</span> <span class="user-mention" data-user-id="110032">@Reid Barton</span> <span class="user-mention" data-user-id="110044">@Chris Hughes</span> <span class="user-mention" data-user-id="110031">@Patrick Massot</span> <span class="user-mention" data-user-id="110045">@Sean Leather</span> could you give me an update for these former WIPs? Did they happen? Will they happen? Shall I delete or edit those entries?</p>
<p>We should mention the work of <span class="user-mention" data-user-id="110865">@Jeremy Avigad</span> and others on differentiable functions I guess.</p>
<p>I don't think we have power series in 1 variable (although it's easier to code than polynomials in one variable!), and I don't think we have the basic theory of Dedekind domains; both of these should be easily accessible nowadays.</p>

<a name="163330278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163330278" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163330278">Patrick Massot (Apr 14 2019 at 19:24)</a>:</h4>
<p>I think it's time either get rid of that page or find someone who wants to take responsibility to update it. You can remove the line about calculus, and maybe indicate that Sébastien is working on manifolds.</p>

<a name="163330300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163330300" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163330300">Patrick Massot (Apr 14 2019 at 19:25)</a>:</h4>
<p>The documentation about what is already covered is also badly out of date, but I certainly intend to work on this once my teaching semester will be over</p>

<a name="163336927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163336927" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163336927">Jeremy Avigad (Apr 14 2019 at 21:57)</a>:</h4>
<p>I don't have an opinion on how / whether to maintain that page, but I thought I would mention that a student here, Zhouhang (Joe) Zhou, has started working on integration. He is aiming to define the Bochner integral following advice from Johannes. If all goes well,  the plan is to also prove suitably general versions of the FTC to link integration and differentiation.</p>

<a name="163338860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163338860" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163338860">Scott Morrison (Apr 14 2019 at 22:48)</a>:</h4>
<p>I agree we should get rid of that page, but I would really love to replace it with something better.</p>

<a name="163338865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163338865" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163338865">Scott Morrison (Apr 14 2019 at 22:49)</a>:</h4>
<p>One option is to use the issues list on leanprover-community/mathlib.</p>

<a name="163338880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163338880" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163338880">Scott Morrison (Apr 14 2019 at 22:49)</a>:</h4>
<p>We could tag things as "bug", "chore", "roadmap", "easy", "medium", "good-first-PR", etc.</p>

<a name="163338984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163338984" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163338984">Scott Morrison (Apr 14 2019 at 22:51)</a>:</h4>
<p>Another option is trello, a "kanban board" app. I've used it in the past; it's very nice to use, but doesn't magically solve the problem of needing a commitment from a enough people to actually use it.</p>

<a name="163339048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163339048" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163339048">Scott Morrison (Apr 14 2019 at 22:53)</a>:</h4>
<p>It seems there are reasonable integrations with zulip, github, and vscode.</p>

<a name="163339058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163339058" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163339058">Scott Morrison (Apr 14 2019 at 22:53)</a>:</h4>
<p>I think writing a few "roadmaps" would be really helpful.</p>

<a name="163372134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163372134" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163372134">Joseph Corneli (Apr 15 2019 at 11:39)</a>:</h4>
<p>I think it would be great to have some more tutorials (_target/deps/mathlib/docs/tutorial/) so that the features that exist already (and new ones that are developed) are easier to understand.</p>

<a name="163373741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163373741" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163373741">Scott Morrison (Apr 15 2019 at 12:08)</a>:</h4>
<p>I just added a tutorial to <a href="https://github.com/leanprover-community/mathlib/issues/938" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/938">#938</a>, mostly demonstrating how far we have to go. :-)</p>

<a name="163834950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163834950" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163834950">Adrian Chu (Apr 21 2019 at 04:50)</a>:</h4>
<p>Are ordinal numbers and cardinal number formalized yet?</p>

<a name="163834951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163834951" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163834951">Mario Carneiro (Apr 21 2019 at 04:50)</a>:</h4>
<p>yes</p>

<a name="163834953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163834953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163834953">Mario Carneiro (Apr 21 2019 at 04:50)</a>:</h4>
<p><code>set_theory.ordinal</code> and <code>set_theory.cardinal</code></p>

<a name="163834965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163834965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163834965">Adrian Chu (Apr 21 2019 at 04:51)</a>:</h4>
<p>how about surreal numbers? lol</p>

<a name="163835014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163835014" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163835014">Mario Carneiro (Apr 21 2019 at 04:52)</a>:</h4>
<p>no surreals, go for it</p>

<a name="163835362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163835362" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163835362">Kevin Buzzard (Apr 21 2019 at 05:03)</a>:</h4>
<p>There are hyperreals!</p>

<a name="163835434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163835434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163835434">Kevin Buzzard (Apr 21 2019 at 05:05)</a>:</h4>
<p>That Conway stuff -- I went back to Conway's book, and he's clearly aware of the foundational issues surrounding his constructions of numbers and games. It seems to me that these definitions are proper classes. Hence I would expect to be able to define a game recursively like before, except only using subsets of Game from Type 0 in some sense -- I want to stop the diagonalisation argument from failing because of ulift issues. Is this possible?</p>

<a name="163835519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163835519" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163835519">Adrian Chu (Apr 21 2019 at 05:07)</a>:</h4>
<p>each individual surreal number is a set, but the collection of all surreals is a class</p>

<a name="163835558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163835558" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163835558">Mario Carneiro (Apr 21 2019 at 05:07)</a>:</h4>
<p>lean doesn't do classes, it does universe parametric types</p>

<a name="163835606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163835606" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163835606">Mario Carneiro (Apr 21 2019 at 05:08)</a>:</h4>
<p><code>ordinal.{u} : Type (u+1)</code></p>

<a name="163835632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163835632" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163835632">Kevin Buzzard (Apr 21 2019 at 05:08)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">game</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">intro</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">L</span> <span class="n">R</span> <span class="o">:</span> <span class="n">list</span> <span class="n">game</span><span class="o">,</span> <span class="n">game</span>
</pre></div>


<p>This was Scott's original formalization of Conway's notion of a game.</p>

<a name="163835735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163835735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163835735">Kevin Buzzard (Apr 21 2019 at 05:10)</a>:</h4>
<p>This version</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">finset</span>

<span class="kn">inductive</span> <span class="n">game</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">intro</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">L</span> <span class="n">R</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">game</span><span class="o">,</span> <span class="n">game</span>
</pre></div>


<p>is maybe not inconsistent, but is not strong enough to capture Conway's powerful notion.</p>

<a name="163835757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163835757" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163835757">Kevin Buzzard (Apr 21 2019 at 05:11)</a>:</h4>
<p>Mario's diagonalisation argument is here:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">logic</span><span class="bp">.</span><span class="n">function</span>

<span class="kn">constant</span> <span class="n">game</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="kn">constant</span> <span class="n">game</span><span class="bp">.</span><span class="n">intro</span> <span class="o">:</span> <span class="n">set</span> <span class="n">game</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">game</span> <span class="bp">→</span> <span class="n">game</span>
<span class="kn">constant</span> <span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">game</span><span class="bp">.</span><span class="n">rec</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">game</span> <span class="bp">→</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">}</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">L</span> <span class="n">R</span><span class="o">,</span> <span class="n">C</span> <span class="o">(</span><span class="n">game</span><span class="bp">.</span><span class="n">intro</span> <span class="n">L</span> <span class="n">R</span><span class="o">))</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="n">g</span><span class="o">,</span> <span class="n">C</span> <span class="n">g</span>
<span class="kn">axiom</span> <span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">game</span><span class="bp">.</span><span class="n">rec_eq</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">game</span> <span class="bp">→</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">}</span>
  <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">L</span> <span class="n">R</span><span class="o">,</span> <span class="n">C</span> <span class="o">(</span><span class="n">game</span><span class="bp">.</span><span class="n">intro</span> <span class="n">L</span> <span class="n">R</span><span class="o">))</span> <span class="o">(</span><span class="n">L</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">game</span><span class="bp">.</span><span class="n">rec</span> <span class="n">H</span> <span class="o">(</span><span class="n">game</span><span class="bp">.</span><span class="n">intro</span> <span class="n">L</span> <span class="n">R</span><span class="o">)</span> <span class="bp">=</span> <span class="n">H</span> <span class="n">L</span> <span class="n">R</span>

<span class="n">def</span> <span class="n">game</span><span class="bp">.</span><span class="n">right</span> <span class="o">:</span> <span class="n">game</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">game</span> <span class="o">:=</span> <span class="n">game</span><span class="bp">.</span><span class="n">rec</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">L</span> <span class="n">R</span><span class="o">,</span> <span class="n">R</span><span class="o">)</span>
<span class="kn">theorem</span> <span class="n">game</span><span class="bp">.</span><span class="n">right_eq</span> <span class="o">(</span><span class="n">L</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">game</span><span class="bp">.</span><span class="n">intro</span> <span class="n">L</span> <span class="n">R</span><span class="o">)</span><span class="bp">.</span><span class="n">right</span> <span class="bp">=</span> <span class="n">R</span> <span class="o">:=</span> <span class="n">game</span><span class="bp">.</span><span class="n">rec_eq</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">false</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">function</span><span class="bp">.</span><span class="n">cantor_injective</span> <span class="n">game</span> <span class="o">(</span><span class="n">game</span><span class="bp">.</span><span class="n">intro</span> <span class="err">∅</span><span class="o">)</span> <span class="err">$</span>
<span class="bp">λ</span> <span class="n">R</span> <span class="n">R&#39;</span> <span class="n">e</span><span class="o">,</span>
  <span class="o">(</span><span class="n">game</span><span class="bp">.</span><span class="n">right_eq</span> <span class="err">∅</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="bp">.</span><span class="n">trans</span> <span class="err">$</span>
  <span class="o">(</span><span class="n">congr_arg</span> <span class="n">game</span><span class="bp">.</span><span class="n">right</span> <span class="n">e</span><span class="o">)</span><span class="bp">.</span><span class="n">trans</span> <span class="o">(</span><span class="n">game</span><span class="bp">.</span><span class="n">right_eq</span> <span class="err">∅</span> <span class="bp">_</span><span class="o">)</span>
</pre></div>

<a name="163835804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163835804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163835804">Kevin Buzzard (Apr 21 2019 at 05:12)</a>:</h4>
<p>So it seems to me that thus far we have failed to define a Conway game in Lean and I for one am unsure how to proceed.</p>

<a name="163835864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163835864" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163835864">Keeley Hoek (Apr 21 2019 at 05:14)</a>:</h4>
<p>What if <code>game</code>s take a universe parameter</p>

<a name="163835867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163835867" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163835867">Keeley Hoek (Apr 21 2019 at 05:14)</a>:</h4>
<p>And their "inner games" are one universe lower</p>

<a name="163835937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163835937" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163835937">Mario Carneiro (Apr 21 2019 at 05:17)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">pSurreal</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="n">u</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">mk</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span> <span class="o">(</span><span class="n">α</span> <span class="bp">→</span> <span class="n">pSurreal</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">β</span> <span class="bp">→</span> <span class="n">pSurreal</span><span class="o">)</span> <span class="bp">→</span> <span class="n">pSurreal</span>
</pre></div>


<p>I'm reading the definition of le, well formed, and the equivalence relation, and it's a complicated mutual induction, but this is the basic structure</p>

<a name="163835945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163835945" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163835945">Kevin Buzzard (Apr 21 2019 at 05:17)</a>:</h4>
<p>And what happens to the diagonal argument?</p>

<a name="163835946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163835946" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163835946">Mario Carneiro (Apr 21 2019 at 05:17)</a>:</h4>
<p>they are well founded just as in Conway's construction</p>

<a name="163835991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163835991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163835991">Mario Carneiro (Apr 21 2019 at 05:18)</a>:</h4>
<p>you can't make a surreal number from any set of surreal numbers, only a set composed of previously constructed surreals</p>

<a name="163838824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163838824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163838824">Kevin Buzzard (Apr 21 2019 at 06:49)</a>:</h4>
<p>Here's where I get stuck trying to prove false:</p>
<div class="codehilite"><pre><span></span>type mismatch at application
  pSurreal.mk ↥∅ (subtype R)
term
  subtype R
has type
  Type (?+2) : Type (max 1 (?+3))
but is expected to have type
  Type (?+1) : Type (?+2)
</pre></div>

<a name="163838882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163838882" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163838882">Kevin Buzzard (Apr 21 2019 at 06:50)</a>:</h4>
<p>Given an arbirtrary R, I can't convince Lean that it's come from the universe below.</p>

<a name="163838884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163838884" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163838884">Kevin Buzzard (Apr 21 2019 at 06:50)</a>:</h4>
<p>Oh but this is great! There are a ton of things one can prove about that structure!</p>

<a name="163840271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/stuff%20we%20want/near/163840271" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/64767stuffwewant.html#163840271">Mario Carneiro (Apr 21 2019 at 07:35)</a>:</h4>
<p>I have a definition of the order:</p>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">pSurreal</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="n">u</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">mk</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span> <span class="o">(</span><span class="n">α</span> <span class="bp">→</span> <span class="n">pSurreal</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">β</span> <span class="bp">→</span> <span class="n">pSurreal</span><span class="o">)</span> <span class="bp">→</span> <span class="n">pSurreal</span>

<span class="kn">namespace</span> <span class="n">pSurreal</span>

<span class="n">def</span> <span class="n">le_lt</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pSurreal</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="bp">×</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">induction</span> <span class="n">x</span> <span class="k">with</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="n">IHxl</span> <span class="n">IHxr</span> <span class="n">generalizing</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">y</span> <span class="k">with</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span> <span class="n">IHyl</span> <span class="n">IHyr</span><span class="o">,</span>
  <span class="n">exact</span> <span class="o">(</span>
    <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">IHxl</span> <span class="n">i</span> <span class="bp">⟨</span><span class="n">yl</span><span class="o">,</span> <span class="n">yr</span><span class="o">,</span> <span class="n">yL</span><span class="o">,</span> <span class="n">yR</span><span class="bp">⟩</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">IHyr</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span><span class="o">),</span>
    <span class="o">(</span><span class="bp">∃</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">IHxr</span> <span class="n">i</span> <span class="bp">⟨</span><span class="n">yl</span><span class="o">,</span> <span class="n">yr</span><span class="o">,</span> <span class="n">yL</span><span class="o">,</span> <span class="n">yR</span><span class="bp">⟩</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">IHyl</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span><span class="o">))</span>
<span class="kn">end</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_le</span> <span class="n">pSurreal</span> <span class="o">:=</span> <span class="bp">⟨λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="o">(</span><span class="n">le_lt</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span><span class="bp">⟩</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_lt</span> <span class="n">pSurreal</span> <span class="o">:=</span> <span class="bp">⟨λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="o">(</span><span class="n">le_lt</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span><span class="bp">⟩</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">mk_le_mk</span> <span class="o">{</span><span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">}</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">⟨</span><span class="n">xl</span><span class="o">,</span> <span class="n">xr</span><span class="o">,</span> <span class="n">xL</span><span class="o">,</span> <span class="n">xR</span><span class="bp">⟩</span> <span class="o">:</span> <span class="n">pSurreal</span><span class="o">)</span> <span class="bp">≤</span> <span class="bp">⟨</span><span class="n">yl</span><span class="o">,</span> <span class="n">yr</span><span class="o">,</span> <span class="n">yL</span><span class="o">,</span> <span class="n">yR</span><span class="bp">⟩</span> <span class="bp">↔</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">xL</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="bp">⟨</span><span class="n">yl</span><span class="o">,</span> <span class="n">yr</span><span class="o">,</span> <span class="n">yL</span><span class="o">,</span> <span class="n">yR</span><span class="bp">⟩</span><span class="o">)</span> <span class="bp">∧</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="bp">⟨</span><span class="n">xl</span><span class="o">,</span> <span class="n">xr</span><span class="o">,</span> <span class="n">xL</span><span class="o">,</span> <span class="n">xR</span><span class="bp">⟩</span> <span class="o">:</span> <span class="n">pSurreal</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="n">yR</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span> <span class="n">iff</span><span class="bp">.</span><span class="n">rfl</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">mk_lt_mk</span> <span class="o">{</span><span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">}</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">⟨</span><span class="n">xl</span><span class="o">,</span> <span class="n">xr</span><span class="o">,</span> <span class="n">xL</span><span class="o">,</span> <span class="n">xR</span><span class="bp">⟩</span> <span class="o">:</span> <span class="n">pSurreal</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="bp">⟨</span><span class="n">yl</span><span class="o">,</span> <span class="n">yr</span><span class="o">,</span> <span class="n">yL</span><span class="o">,</span> <span class="n">yR</span><span class="bp">⟩</span> <span class="bp">↔</span>
  <span class="o">(</span><span class="bp">∃</span> <span class="n">i</span><span class="o">,</span> <span class="n">xR</span> <span class="n">i</span> <span class="bp">≤</span> <span class="bp">⟨</span><span class="n">yl</span><span class="o">,</span> <span class="n">yr</span><span class="o">,</span> <span class="n">yL</span><span class="o">,</span> <span class="n">yR</span><span class="bp">⟩</span><span class="o">)</span> <span class="bp">∨</span>
  <span class="o">(</span><span class="bp">∃</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="bp">⟨</span><span class="n">xl</span><span class="o">,</span> <span class="n">xr</span><span class="o">,</span> <span class="n">xL</span><span class="o">,</span> <span class="n">xR</span><span class="bp">⟩</span> <span class="o">:</span> <span class="n">pSurreal</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">yL</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span> <span class="n">iff</span><span class="bp">.</span><span class="n">rfl</span>

<span class="n">def</span> <span class="n">equiv</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pSurreal</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span>

<span class="n">def</span> <span class="n">ok</span> <span class="o">:</span> <span class="n">pSurreal</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="bp">⟨</span><span class="n">l</span><span class="o">,</span> <span class="n">r</span><span class="o">,</span> <span class="n">L</span><span class="o">,</span> <span class="n">R</span><span class="bp">⟩</span> <span class="o">:=</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span> <span class="n">j</span><span class="o">,</span> <span class="n">L</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">R</span> <span class="n">j</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">ok</span> <span class="o">(</span><span class="n">L</span> <span class="n">i</span><span class="o">))</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">ok</span> <span class="o">(</span><span class="n">R</span> <span class="n">i</span><span class="o">))</span>

<span class="kn">end</span> <span class="n">pSurreal</span>
</pre></div>


<p>Proving that it's a good ordering is a mess though</p>


{% endraw %}
