---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/53771natpowandring.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/53771natpowandring.html">nat.pow and ring</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="127802027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.pow%20and%20ring/near/127802027" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53771natpowandring.html#127802027">Kevin Buzzard (Jun 09 2018 at 01:19)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">ring</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">d</span> <span class="o">:</span> <span class="bp">â„•</span><span class="o">)</span> <span class="o">:</span> <span class="n">d</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">d</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">d</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">unfold</span> <span class="n">has_pow</span><span class="bp">.</span><span class="n">pow</span> <span class="n">monoid</span><span class="bp">.</span><span class="n">pow</span> <span class="n">nat</span><span class="bp">.</span><span class="n">pow</span><span class="o">,</span>
  <span class="n">ring</span>
<span class="kn">end</span>
</pre></div>

<a name="127802028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.pow%20and%20ring/near/127802028" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53771natpowandring.html#127802028">Kevin Buzzard (Jun 09 2018 at 01:19)</a>:</h4>
<p>Could I have done that in one line with <code>ring</code>? [using some options or something]</p>

<a name="127802751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.pow%20and%20ring/near/127802751" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53771natpowandring.html#127802751">Andrew Ashworth (Jun 09 2018 at 01:45)</a>:</h4>
<p>[deleted - incorrect information]</p>

<a name="127802943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.pow%20and%20ring/near/127802943" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53771natpowandring.html#127802943">Kevin Buzzard (Jun 09 2018 at 01:52)</a>:</h4>
<p>So I could make an even cooler ring tactic by writing a tactic which tries to do those unfolds and then applies ring?</p>

<a name="127802946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.pow%20and%20ring/near/127802946" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53771natpowandring.html#127802946">Kevin Buzzard (Jun 09 2018 at 01:52)</a>:</h4>
<p>Is life that easy?</p>

<a name="127803089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.pow%20and%20ring/near/127803089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53771natpowandring.html#127803089">Andrew Ashworth (Jun 09 2018 at 01:58)</a>:</h4>
<p>[deleted - incorrect information]</p>

<a name="127803099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.pow%20and%20ring/near/127803099" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53771natpowandring.html#127803099">Andrew Ashworth (Jun 09 2018 at 01:59)</a>:</h4>
<p>[deleted - incorrect information]</p>

<a name="127808199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.pow%20and%20ring/near/127808199" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53771natpowandring.html#127808199">Mario Carneiro (Jun 09 2018 at 05:24)</a>:</h4>
<p>ring should handle powers... it automatically handles ring like operations that make sense as polynomial expressions, although it can't handle x^n for nonconstant n</p>

<a name="127808250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.pow%20and%20ring/near/127808250" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53771natpowandring.html#127808250">Mario Carneiro (Jun 09 2018 at 05:26)</a>:</h4>
<p>in particular it has optimizations for sparse polynomials like x^100 + x, which requires interpreting ^</p>

<a name="127809868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.pow%20and%20ring/near/127809868" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53771natpowandring.html#127809868">Andrew Ashworth (Jun 09 2018 at 06:25)</a>:</h4>
<p>that's pretty sweet! I didn't expect that you'd put that much effort into the tactic. thanks for writing it!</p>

<a name="127816599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.pow%20and%20ring/near/127816599" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53771natpowandring.html#127816599">Kevin Buzzard (Jun 09 2018 at 10:41)</a>:</h4>
<p>Yes thanks very much indeed for writing it. It is an essential part of the "mathematician's interface" to Lean. Writing it was I'm sure nontrivial but at the end of the day, as I know I've said before, if a mathematician can't prove things like the example above with one or two lines then they will never take to Lean.</p>

<a name="127816655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.pow%20and%20ring/near/127816655" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53771natpowandring.html#127816655">Kevin Buzzard (Jun 09 2018 at 10:42)</a>:</h4>
<p>Just to be clear -- in the example above <code>ring</code> falls without the initial unfolding</p>

<a name="127816664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.pow%20and%20ring/near/127816664" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53771natpowandring.html#127816664">Patrick Massot (Jun 09 2018 at 10:43)</a>:</h4>
<p>The <code>ring</code> tactic is already very useful but it has bugs</p>

<a name="127822932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nat.pow%20and%20ring/near/127822932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53771natpowandring.html#127822932">Johan Commelin (Jun 09 2018 at 14:51)</a>:</h4>
<p>How hard would it be to state a theorem about the <code>ring</code> tactic, and prove that the implementation is compliant? Then we are sure we won't have bugs. But I guess that the <code>meta</code> stuff makes this complicated.</p>


{% endraw %}
