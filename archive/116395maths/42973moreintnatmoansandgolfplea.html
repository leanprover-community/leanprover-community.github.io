---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/42973moreintnatmoansandgolfplea.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html">more int nat moans and golf plea</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="134808309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134808309" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134808309">Kevin Buzzard (Sep 28 2018 at 08:02)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">coprime</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">y</span><span class="o">))</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">x</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">3</span> <span class="bp">*</span> <span class="n">y</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">4</span><span class="o">)</span> <span class="o">:</span>
<span class="o">(</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>


<p>Sent to me by <span class="user-mention" data-user-id="120884">@Clara List</span>  . The mathematician's proof: "h2 trivially implies |x|&lt;=2 and |y|&lt;=1; now check all cases". This line of reasoning should be feasible in Lean, right? How does one do it?</p>

<a name="134808379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134808379" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134808379">Kevin Buzzard (Sep 28 2018 at 08:04)</a>:</h4>
<p>I am embarrassed to post my solution. I decided it might be easier to convert everything to nat, but the killer <code>dec_trivial</code> line didn't work anyway:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group_power</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">coprime</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">y</span><span class="o">))</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">x</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">3</span> <span class="bp">*</span> <span class="n">y</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">4</span><span class="o">)</span> <span class="o">:</span>
<span class="o">(</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">x0</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">x</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">y0</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">y</span><span class="o">,</span>
  <span class="c1">-- now effortfully change to a question about nats</span>
  <span class="k">have</span> <span class="n">Hx</span> <span class="o">:</span> <span class="err">↑</span><span class="o">(</span><span class="n">x0</span> <span class="bp">*</span> <span class="n">x0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs_mul_self</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">Hy</span> <span class="o">:</span> <span class="err">↑</span><span class="o">(</span><span class="n">y0</span> <span class="bp">*</span> <span class="n">y0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs_mul_self</span><span class="o">,</span>
  <span class="n">change</span> <span class="n">x</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">3</span> <span class="bp">*</span> <span class="o">(</span><span class="n">y</span> <span class="bp">*</span> <span class="o">(</span><span class="n">y</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="mi">4</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">mul_one</span><span class="o">,</span><span class="n">mul_one</span><span class="o">]</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">Hx</span><span class="o">,</span> <span class="err">←</span><span class="n">Hy</span><span class="o">]</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">change</span> <span class="err">↑</span><span class="o">(</span><span class="n">x0</span> <span class="bp">*</span> <span class="n">x0</span><span class="o">)</span> <span class="bp">+</span> <span class="o">((</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="err">↑</span><span class="o">(</span><span class="n">y0</span> <span class="bp">*</span> <span class="n">y0</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">4</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_mul</span><span class="o">,</span> <span class="err">←</span><span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_add</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_eq_coe_nat_iff</span><span class="o">]</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
  <span class="c1">-- finally got h2 : x0 * x0 + 3 * (y0 * y0) = 4</span>
  <span class="c1">-- but mathematicians do not want to waste their time with the last 4 lines</span>
  <span class="c1">-- and need training before they can even construct them. What am I missing?</span>

  <span class="c1">-- now change the goal in the same way</span>
  <span class="n">suffices</span> <span class="o">:</span> <span class="n">x0</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∧</span> <span class="n">y0</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">,</span>
    <span class="n">split</span><span class="o">,</span>
    <span class="o">{</span> <span class="k">have</span> <span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">x0</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="bp">-</span><span class="err">↑</span><span class="n">x0</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs_eq</span> <span class="n">x</span><span class="o">,</span>
      <span class="n">rw</span> <span class="n">this</span><span class="bp">.</span><span class="mi">1</span> <span class="n">at</span> <span class="n">H</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">H</span> <span class="o">},</span>
    <span class="o">{</span> <span class="k">have</span> <span class="n">H</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">y0</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="bp">-</span><span class="err">↑</span><span class="n">y0</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs_eq</span> <span class="n">y</span><span class="o">,</span>
      <span class="n">rw</span> <span class="n">this</span><span class="bp">.</span><span class="mi">2</span> <span class="n">at</span> <span class="n">H</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">H</span> <span class="o">},</span>

  <span class="c1">-- It&#39;s now a question about nats. I regret doing all that.</span>
  <span class="n">clear</span> <span class="n">Hx</span> <span class="n">Hy</span><span class="o">,</span>

  <span class="k">have</span> <span class="n">Hx0</span> <span class="o">:</span> <span class="n">x0</span> <span class="bp">*</span> <span class="n">x0</span> <span class="bp">≤</span> <span class="mi">2</span> <span class="bp">*</span> <span class="mi">2</span><span class="o">,</span>
    <span class="k">show</span> <span class="bp">_</span> <span class="bp">≤</span> <span class="mi">4</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span><span class="n">h2</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">nat</span><span class="bp">.</span><span class="n">le_add_right</span> <span class="o">(</span><span class="n">x0</span> <span class="bp">*</span> <span class="n">x0</span><span class="o">)</span> <span class="o">(</span><span class="mi">3</span> <span class="bp">*</span> <span class="o">(</span><span class="n">y0</span> <span class="bp">*</span> <span class="n">y0</span><span class="o">)),</span>
  <span class="k">have</span> <span class="n">Hy0</span> <span class="o">:</span> <span class="n">y0</span> <span class="bp">*</span> <span class="n">y0</span> <span class="bp">≤</span> <span class="mi">1</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">,</span>
    <span class="n">suffices</span> <span class="o">:</span> <span class="mi">3</span> <span class="bp">*</span> <span class="o">(</span><span class="n">y0</span> <span class="bp">*</span> <span class="n">y0</span><span class="o">)</span> <span class="bp">≤</span> <span class="mi">4</span><span class="o">,</span>
      <span class="n">rwa</span> <span class="o">[</span><span class="n">mul_comm</span><span class="o">,</span> <span class="err">←</span><span class="n">nat</span><span class="bp">.</span><span class="n">le_div_iff_mul_le</span><span class="o">]</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span> <span class="n">exact</span> <span class="n">dec_trivial</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span><span class="n">h2</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">nat</span><span class="bp">.</span><span class="n">le_add_left</span><span class="o">,</span>
  <span class="n">rw</span> <span class="err">←</span><span class="n">nat</span><span class="bp">.</span><span class="n">mul_self_le_mul_self_iff</span> <span class="n">at</span> <span class="n">Hx0</span><span class="o">,</span>
  <span class="n">rw</span> <span class="err">←</span><span class="n">nat</span><span class="bp">.</span><span class="n">mul_self_le_mul_self_iff</span> <span class="n">at</span> <span class="n">Hy0</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">H</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">coprime</span> <span class="n">x0</span> <span class="n">y0</span> <span class="o">:=</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">revert</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">revert</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">revert</span> <span class="n">Hx0</span><span class="o">,</span>
  <span class="n">revert</span> <span class="n">Hy0</span><span class="o">,</span>
  <span class="c1">-- goal now</span>
  <span class="c1">-- ⊢ y0 ≤ 1 → x0 ≤ 2 → x0 * x0 + 3 * (y0 * y0) = 4 → nat.coprime x0 y0 → x0 = 1 ∧ y0 = 1</span>
  <span class="n">exact</span> <span class="n">dec_trivial</span><span class="o">,</span> <span class="c1">-- AARGH! Fails!</span>
  <span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>

<a name="134808476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134808476" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134808476">Kevin Buzzard (Sep 28 2018 at 08:06)</a>:</h4>
<p>That is pretty horrible and it didn't work either. (1) how to get <code>dec_trivial</code> to work and (2) can it work with ints? I guess we want <code>(x : int) ^ 2 &lt;= N -&gt; int.nat_abs x &lt;= sqrt N</code> or <code>x ^ 2 &lt;= N -&gt; - sqrt N &lt;= x and x &lt;= sqrt N</code> or something. But will this be enough for dec_trivial? Are these in mathlib somewhere? Of course there will be the usual kerfuffle coming from the fact that N is an int instead of a nat (see other nat int thread where I propose a goofy typeclass solution to this)</p>

<a name="134809743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134809743" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134809743">Kevin Buzzard (Sep 28 2018 at 08:35)</a>:</h4>
<p><code>example (n : ℕ) : n ≤ 0 → n = 0 := dec_trivial -- fails</code>. What modification makes this work? I'm sure I've seen people get <code>dec_trivial</code> to check a finite set of nats before</p>

<a name="134809799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134809799" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134809799">Mario Carneiro (Sep 28 2018 at 08:36)</a>:</h4>
<p>revert <code>n</code></p>

<a name="134809887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134809887" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134809887">Kevin Buzzard (Sep 28 2018 at 08:39)</a>:</h4>
<p>gaargh it's still not over</p>

<a name="134809949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134809949" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134809949">Kevin Buzzard (Sep 28 2018 at 08:41)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">x</span> <span class="bp">≤</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">change</span> <span class="n">n</span> <span class="bp">≤</span> <span class="mi">0</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">show</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
  <span class="n">revert</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">revert</span> <span class="n">n</span><span class="o">,</span>
  <span class="c1">-- ⊢ let n : ℕ := int.nat_abs x in n ≤ 0 → n = 0</span>
  <span class="n">exact</span> <span class="n">dec_trivial</span> <span class="c1">-- fails</span>
<span class="kn">end</span>
</pre></div>

<a name="134809967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134809967" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134809967">Kevin Buzzard (Sep 28 2018 at 08:41)</a>:</h4>
<p>I could fix this with <code>generalize</code> instead of <code>let</code> but in my actual use case there are 20 lines of manipulating <code>n</code> and <code>x</code> before I want to apply <code>exact dec_trivial</code>. I will work on the <code>generalize</code> trick though.</p>

<a name="134810341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134810341" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134810341">Kevin Buzzard (Sep 28 2018 at 08:50)</a>:</h4>
<p>Oh -- here's the problem. OK I'm stuck again :-( </p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">n</span> <span class="bp">≤</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">dec_trivial</span> <span class="c1">-- type class inference fails</span>
<span class="c1">-- ⊢ decidable (∀ (n : ℕ), n ≤ 0 → n = 0)</span>
</pre></div>


<p>Oh -- I can fix this with a random import :-/</p>

<a name="134810537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134810537" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134810537">Kevin Buzzard (Sep 28 2018 at 08:54)</a>:</h4>
<p>Oh, nope, still can't do it. I think I do need <span class="user-mention" data-user-id="110044">@Chris Hughes</span> now.</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group_power</span>

<span class="kn">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x1</span> <span class="n">y1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">y1</span> <span class="bp">≤</span> <span class="mi">1</span> <span class="bp">→</span> <span class="n">x1</span> <span class="bp">≤</span> <span class="mi">2</span> <span class="bp">→</span> <span class="n">x1</span> <span class="bp">*</span> <span class="n">x1</span> <span class="bp">+</span> <span class="mi">3</span> <span class="bp">*</span> <span class="o">(</span><span class="n">y1</span> <span class="bp">*</span> <span class="n">y1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">4</span>
  <span class="bp">→</span> <span class="n">nat</span><span class="bp">.</span><span class="n">coprime</span> <span class="n">x1</span> <span class="n">y1</span> <span class="bp">→</span> <span class="n">x1</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∧</span> <span class="n">y1</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">failed to synthesize type class instance for</span>
<span class="cm">⊢ decidable</span>
<span class="cm">    (∀ (x1 y1 : ℕ),</span>
<span class="cm">       y1 ≤ 1 → x1 ≤ 2 → x1 * x1 + 3 * (y1 * y1) = 4 → nat.coprime x1 y1 → x1 = 1 ∧ y1 = 1)</span>
<span class="cm">-/</span>
</pre></div>


<p>How do I begin to figure out what is not decidable here?</p>

<a name="134810830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134810830" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134810830">Kevin Buzzard (Sep 28 2018 at 09:00)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">y1</span> <span class="bp">≤</span> <span class="mi">1</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">x1</span> <span class="bp">≤</span> <span class="mi">2</span> <span class="bp">→</span> <span class="n">x1</span> <span class="bp">*</span> <span class="n">x1</span> <span class="bp">+</span> <span class="mi">3</span> <span class="bp">*</span> <span class="o">(</span><span class="n">y1</span> <span class="bp">*</span> <span class="n">y1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">4</span>
  <span class="bp">→</span> <span class="n">nat</span><span class="bp">.</span><span class="n">coprime</span> <span class="n">x1</span> <span class="n">y1</span> <span class="bp">→</span> <span class="n">x1</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∧</span> <span class="n">y1</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
</pre></div>


<p><span class="emoji emoji-1f600" title="grinning">:grinning:</span></p>

<a name="134811186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134811186" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134811186">Kevin Buzzard (Sep 28 2018 at 09:06)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group_power</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">coprime</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">y</span><span class="o">))</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">x</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">3</span> <span class="bp">*</span> <span class="n">y</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">4</span><span class="o">)</span> <span class="o">:</span>
<span class="o">(</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">let</span> <span class="n">x0</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">x</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">y0</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">y</span><span class="o">,</span>
  <span class="c1">-- now effortfully change to a question about nats</span>
  <span class="k">have</span> <span class="n">Hx</span> <span class="o">:</span> <span class="err">↑</span><span class="o">(</span><span class="n">x0</span> <span class="bp">*</span> <span class="n">x0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs_mul_self</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">Hy</span> <span class="o">:</span> <span class="err">↑</span><span class="o">(</span><span class="n">y0</span> <span class="bp">*</span> <span class="n">y0</span><span class="o">)</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs_mul_self</span><span class="o">,</span>
  <span class="n">change</span> <span class="n">x</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">3</span> <span class="bp">*</span> <span class="o">(</span><span class="n">y</span> <span class="bp">*</span> <span class="o">(</span><span class="n">y</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="mi">4</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">mul_one</span><span class="o">,</span><span class="n">mul_one</span><span class="o">]</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">Hx</span><span class="o">,</span> <span class="err">←</span><span class="n">Hy</span><span class="o">]</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">change</span> <span class="err">↑</span><span class="o">(</span><span class="n">x0</span> <span class="bp">*</span> <span class="n">x0</span><span class="o">)</span> <span class="bp">+</span> <span class="o">((</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="err">↑</span><span class="o">(</span><span class="n">y0</span> <span class="bp">*</span> <span class="n">y0</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">4</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_mul</span><span class="o">,</span> <span class="err">←</span><span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_add</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_eq_coe_nat_iff</span><span class="o">]</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
  <span class="c1">-- finally got h2 : x0 * x0 + 3 * (y0 * y0) = 4</span>
  <span class="c1">-- but mathematicians do not want to waste their time with the last 4 lines</span>
  <span class="c1">-- and need training before they can even construct them. What am I missing?</span>

  <span class="c1">-- now change the goal in the same way</span>
  <span class="n">suffices</span> <span class="o">:</span> <span class="n">x0</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∧</span> <span class="n">y0</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">,</span>
    <span class="n">split</span><span class="o">,</span>
    <span class="o">{</span> <span class="k">have</span> <span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">x0</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="bp">-</span><span class="err">↑</span><span class="n">x0</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs_eq</span> <span class="n">x</span><span class="o">,</span>
      <span class="n">rw</span> <span class="n">this</span><span class="bp">.</span><span class="mi">1</span> <span class="n">at</span> <span class="n">H</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">H</span> <span class="o">},</span>
    <span class="o">{</span> <span class="k">have</span> <span class="n">H</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">y0</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="bp">-</span><span class="err">↑</span><span class="n">y0</span> <span class="o">:=</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs_eq</span> <span class="n">y</span><span class="o">,</span>
      <span class="n">rw</span> <span class="n">this</span><span class="bp">.</span><span class="mi">2</span> <span class="n">at</span> <span class="n">H</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">H</span> <span class="o">},</span>

  <span class="c1">-- now a question about nats. I regret doing all that.</span>
  <span class="n">clear</span> <span class="n">Hx</span> <span class="n">Hy</span><span class="o">,</span>

  <span class="k">have</span> <span class="n">Hx0</span> <span class="o">:</span> <span class="n">x0</span> <span class="bp">*</span> <span class="n">x0</span> <span class="bp">≤</span> <span class="mi">2</span> <span class="bp">*</span> <span class="mi">2</span><span class="o">,</span>
    <span class="k">show</span> <span class="bp">_</span> <span class="bp">≤</span> <span class="mi">4</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span><span class="n">h2</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">nat</span><span class="bp">.</span><span class="n">le_add_right</span> <span class="o">(</span><span class="n">x0</span> <span class="bp">*</span> <span class="n">x0</span><span class="o">)</span> <span class="o">(</span><span class="mi">3</span> <span class="bp">*</span> <span class="o">(</span><span class="n">y0</span> <span class="bp">*</span> <span class="n">y0</span><span class="o">)),</span>
  <span class="k">have</span> <span class="n">Hy0</span> <span class="o">:</span> <span class="n">y0</span> <span class="bp">*</span> <span class="n">y0</span> <span class="bp">≤</span> <span class="mi">1</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">,</span>
    <span class="n">suffices</span> <span class="o">:</span> <span class="mi">3</span> <span class="bp">*</span> <span class="o">(</span><span class="n">y0</span> <span class="bp">*</span> <span class="n">y0</span><span class="o">)</span> <span class="bp">≤</span> <span class="mi">4</span><span class="o">,</span>
      <span class="n">rwa</span> <span class="o">[</span><span class="n">mul_comm</span><span class="o">,</span> <span class="err">←</span><span class="n">nat</span><span class="bp">.</span><span class="n">le_div_iff_mul_le</span><span class="o">]</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span> <span class="n">exact</span> <span class="n">dec_trivial</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span><span class="n">h2</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">nat</span><span class="bp">.</span><span class="n">le_add_left</span><span class="o">,</span>
  <span class="n">rw</span> <span class="err">←</span><span class="n">nat</span><span class="bp">.</span><span class="n">mul_self_le_mul_self_iff</span> <span class="n">at</span> <span class="n">Hx0</span><span class="o">,</span>
  <span class="n">rw</span> <span class="err">←</span><span class="n">nat</span><span class="bp">.</span><span class="n">mul_self_le_mul_self_iff</span> <span class="n">at</span> <span class="n">Hy0</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">H</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">coprime</span> <span class="n">x0</span> <span class="n">y0</span> <span class="o">:=</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">revert</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">revert</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">revert</span> <span class="n">Hy0</span><span class="o">,</span>
  <span class="n">generalize</span> <span class="o">:</span> <span class="n">y0</span> <span class="bp">=</span> <span class="n">y1</span><span class="o">,</span>
  <span class="n">revert</span> <span class="n">y1</span><span class="o">,</span>
  <span class="n">revert</span> <span class="n">Hx0</span><span class="o">,</span>
  <span class="n">generalize</span> <span class="o">:</span> <span class="n">x0</span> <span class="bp">=</span> <span class="n">x1</span><span class="o">,</span>
  <span class="n">revert</span> <span class="n">x1</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">dec_trivial</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>Those reverts and generalizes near the end have to be done in pretty much exactly the right order :-)</p>

<a name="134812553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134812553" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134812553">Kevin Buzzard (Sep 28 2018 at 09:36)</a>:</h4>
<p>OK here is my challenge. This is a concrete example of the sort of thing which my undergraduate mathematicians are reading in their lecture notes and are finding very hard to put into Lean. The following result is extremely easy for a mathematician and I have supplied a 4-line pseudocode proof. How many lines does take an expert Leaner? I would very much like to get this answer down to 4. Even eight lines would be fine at this point -- between each line of code corresponding to the pseudocode it would be fine to have a<code>show</code> or something, or <code>suffices : ..., by simp</code> or whatever. What I don't want is random bursts of 5 lines of garbage to get Lean to jump from line to line, because on some very concrete level that pseudocode proof looks complete to me and, more to the point, will look complete to most mathematicians.</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">rat</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group_power</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">y</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">3</span> <span class="bp">→</span> <span class="o">(</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">Pseudo-code proof</span>
<span class="cm">1) Squares are non-negative</span>
<span class="cm">2) Hence x ^ 2 &lt;= 3 and y ^ 2 &lt;= 3/2</span>
<span class="cm">3) Hence |x| &lt;= 1 and |y| &lt;= 1</span>
<span class="cm">4) Now check all cases.</span>
<span class="cm">-/</span>
</pre></div>

<a name="134813633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134813633" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134813633">Kevin Buzzard (Sep 28 2018 at 09:56)</a>:</h4>
<p>PS I guess the "and" lines can be split, giving us six lines of pseudocode, and i would even allow for seven if we wanted to get from 2y^2 le 3 to y^2 le 3/2</p>

<a name="134813668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134813668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134813668">Kevin Buzzard (Sep 28 2018 at 09:57)</a>:</h4>
<p>The lean issues are getting from rat to int (and when?) and getting dec_trivial to check the cases</p>

<a name="134813807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134813807" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134813807">Kevin Buzzard (Sep 28 2018 at 10:00)</a>:</h4>
<p>PPS I recommend not going via nat. <span class="user-mention" data-user-id="110064">@Kenny Lau</span> how many lines of tactic mode does it take you to solve my challenge?</p>

<a name="134814042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134814042" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134814042">Kevin Buzzard (Sep 28 2018 at 10:05)</a>:</h4>
<p>PPPS <code>example (x y : ℤ) : (x : ℚ) ^ 2 + 2 * y ^ 2 = 3 ↔ x ^ 2 + 2 * y ^ 2 = 3 := by simp</code> fails :-(. Why?? PPPPS you will all be pleased to know that I am now going to do 5 hours of admin with Lean chat off.</p>

<a name="134814377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134814377" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134814377">Johannes Hölzl (Sep 28 2018 at 10:13)</a>:</h4>
<p>I guess for step 2) you can try to use <code>linarith</code>.</p>

<a name="134814523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134814523" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134814523">Mario Carneiro (Sep 28 2018 at 10:16)</a>:</h4>
<p>it doesn't look very linear to me</p>

<a name="134814559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134814559" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134814559">Rob Lewis (Sep 28 2018 at 10:18)</a>:</h4>
<p>Step 2 is linear if you treat the squares as atoms. But this isn't the hard part of the proof.</p>

<a name="134814603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134814603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134814603">Rob Lewis (Sep 28 2018 at 10:18)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">y</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">3</span> <span class="bp">→</span> <span class="o">(</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">y</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">h</span><span class="o">,</span>
<span class="k">have</span> <span class="n">hxn</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span> <span class="k">from</span> <span class="n">pow_two_nonneg</span> <span class="bp">_</span><span class="o">,</span>
<span class="k">have</span> <span class="n">hyn</span> <span class="o">:</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">,</span> <span class="k">from</span> <span class="n">pow_two_nonneg</span> <span class="bp">_</span><span class="o">,</span>
<span class="k">have</span> <span class="n">hx3</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">≤</span> <span class="mi">3</span><span class="o">,</span> <span class="k">by</span> <span class="n">linarith</span><span class="o">,</span>
<span class="k">have</span> <span class="n">hy3</span> <span class="o">:</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">≤</span> <span class="mi">3</span><span class="bp">/</span><span class="mi">2</span><span class="o">,</span> <span class="k">by</span> <span class="n">linarith</span><span class="o">,</span>
<span class="bp">_</span>
</pre></div>

<a name="134814767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134814767" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134814767">Mario Carneiro (Sep 28 2018 at 10:23)</a>:</h4>
<p>can you prove <code>(x : ℚ) ^ 2 &lt; 4</code> and <code>(y : ℚ) ^ 2 &lt; 4</code> instead by linarith?</p>

<a name="134814816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134814816" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134814816">Rob Lewis (Sep 28 2018 at 10:24)</a>:</h4>
<p>Yup.</p>

<a name="134814823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134814823" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134814823">Mario Carneiro (Sep 28 2018 at 10:24)</a>:</h4>
<p>I believe there is a theorem that says <code>a^2 &lt; b^2 &lt;-&gt; a &lt; b</code></p>

<a name="134814837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134814837" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134814837">Rob Lewis (Sep 28 2018 at 10:24)</a>:</h4>
<p>I hope there's no theorem that says that on <code>rat</code>.</p>

<a name="134814854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134814854" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134814854">Rob Lewis (Sep 28 2018 at 10:25)</a>:</h4>
<p>Or <code>int</code>, for that matter.</p>

<a name="134814860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134814860" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134814860">Mario Carneiro (Sep 28 2018 at 10:25)</a>:</h4>
<p>It should hold on rat, but I'm omitting the nonnegativity assumptions</p>

<a name="134815413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134815413" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134815413">Scott Morrison (Sep 28 2018 at 10:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110596">@Rob Lewis</span>, how hard do you think it would be to ask <code>linarith</code> to "try harder", automatically treating subexpressions it doesn't understand as atoms?</p>

<a name="134815488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134815488" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134815488">Mario Carneiro (Sep 28 2018 at 10:40)</a>:</h4>
<p>isn't that what it's already doing?</p>

<a name="134815551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134815551" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134815551">Scott Morrison (Sep 28 2018 at 10:42)</a>:</h4>
<div class="codehilite"><pre><span></span>example (x y : ℕ) (h : 6 + ((x + 4) * x + (6 + 3 * y) * y) = 3) : false :=
by linarith
</pre></div>

<a name="134815556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134815556" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134815556">Scott Morrison (Sep 28 2018 at 10:42)</a>:</h4>
<p>Says <code>no args to linarith</code>.</p>

<a name="134815584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134815584" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134815584">Scott Morrison (Sep 28 2018 at 10:43)</a>:</h4>
<p>While I'm hoping for something that would first generalize <code>(x + 4) * x</code> and <code>(6 + 3 * y) * y</code> ftw.</p>

<a name="134815654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134815654" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134815654">Scott Morrison (Sep 28 2018 at 10:44)</a>:</h4>
<p>I guess I can see how to do this, I'm just hoping someone says there's an easier way than what I have in mind. :-)</p>

<a name="134816758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134816758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134816758">Rob Lewis (Sep 28 2018 at 11:12)</a>:</h4>
<p>It wouldn't be hard to make it handle things like that. Right now, if it sees an obvious nonlinearity, it will reject that hypothesis. <code>x^2</code> doesn't count as obvious because it's only checking + and *.</p>

<a name="134816870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134816870" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134816870">Rob Lewis (Sep 28 2018 at 11:15)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I don't think we have the necessary nonnegativity assumptions in Kevin's problem, at least not without some work, which kind of defeats the point. And there's still some pain dealing with casts. Ultimately, I think we need some sort of "cast correction" tactic and integer arithmetic to do that properly.</p>

<a name="134816931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134816931" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134816931">Mario Carneiro (Sep 28 2018 at 11:16)</a>:</h4>
<p>well, you want to rewrite with <code>a^2 = (abs a)^2</code> first, and then you have your nonnegativity assumption</p>

<a name="134817679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134817679" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134817679">Rob Lewis (Sep 28 2018 at 11:34)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> Hmm, let me qualify my last response -- the way <code>linarith</code> handles nats right now makes it slightly harder. I'll think about a clean way to do this.</p>

<a name="134817712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134817712" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134817712">Rob Lewis (Sep 28 2018 at 11:35)</a>:</h4>
<p>But it's easy to make it handle this:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">6</span> <span class="bp">+</span> <span class="o">((</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">4</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">+</span> <span class="o">(</span><span class="mi">6</span> <span class="bp">+</span> <span class="mi">3</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">3</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#39;</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="mi">4</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h&#39;&#39;</span> <span class="o">:</span> <span class="o">(</span><span class="mi">6</span> <span class="bp">+</span> <span class="mi">3</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span>  <span class="o">:</span> <span class="n">false</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">linarith</span>
</pre></div>

<a name="134818221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134818221" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134818221">Scott Morrison (Sep 28 2018 at 11:47)</a>:</h4>
<p>That's great. (And the same for nats would be great!)</p>

<a name="134818589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134818589" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134818589">Rob Lewis (Sep 28 2018 at 11:55)</a>:</h4>
<p><a href="https://github.com/leanprover/mathlib/pull/379" target="_blank" title="https://github.com/leanprover/mathlib/pull/379">https://github.com/leanprover/mathlib/pull/379</a></p>

<a name="134828582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134828582" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134828582">Kenny Lau (Sep 28 2018 at 14:35)</a>:</h4>
<blockquote>
<p>PPS I recommend not going via nat. <span class="user-mention" data-user-id="110064">@Kenny Lau</span> how many lines of tactic mode does it take you to solve my challenge?</p>
</blockquote>
<p>I respectfully decline for personal reasons.</p>

<a name="134879587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879587" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879587">Scott Morrison (Sep 29 2018 at 11:40)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>, with a few(!) additional <code>simp</code> lemmas, some of which are perfectly sensible, and some of which are less so, we can do:</p>
<div class="codehilite"><pre><span></span>@[tidy] meta def la := `[linarith]
@[tidy] meta def cases_xy := `[cases x; cases y]

example (x y : ℤ) (h1 : nat.coprime (int.nat_abs x) (int.nat_abs y)) (h2 : x ^ 2 + 3 * y ^ 2 = 4) :
  (x = 1 ∨ x = -1) ∧ (y = 1 ∨ y = -1) :=
by tidy
</pre></div>

<a name="134879621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879621" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879621">Kevin Buzzard (Sep 29 2018 at 11:41)</a>:</h4>
<p>That's not exactly what I asked but I agree that this is a big step forward</p>

<a name="134879626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879626" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879626">Scott Morrison (Sep 29 2018 at 11:41)</a>:</h4>
<p>Oh, it isn't? I must have changed it at some point and forgotten I changed it.</p>

<a name="134879627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879627" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879627">Scott Morrison (Sep 29 2018 at 11:41)</a>:</h4>
<p>Let me go find the original :-)</p>

<a name="134879628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879628" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879628">Kevin Buzzard (Sep 29 2018 at 11:41)</a>:</h4>
<p>I don't care about efficiency, I care about making life easier for beginner mathematicians</p>

<a name="134879631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879631" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879631">Kevin Buzzard (Sep 29 2018 at 11:41)</a>:</h4>
<p>The equality was over rat</p>

<a name="134879671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879671" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879671">Kenny Lau (Sep 29 2018 at 11:42)</a>:</h4>
<p>how many seconds does it take to compile?</p>

<a name="134879676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879676" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879676">Kevin Buzzard (Sep 29 2018 at 11:42)</a>:</h4>
<p>Because moving from rat to int is another great example of something which is easy in maths</p>

<a name="134879683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879683" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879683">Scott Morrison (Sep 29 2018 at 11:43)</a>:</h4>
<p>Oh -- this was your original question (exactly), but then you asked a different one I didn't see yet.</p>

<a name="134879687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879687" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879687">Kevin Buzzard (Sep 29 2018 at 11:43)</a>:</h4>
<p>Oh! Yes you're exactly right</p>

<a name="134879690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879690" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879690">Kevin Buzzard (Sep 29 2018 at 11:43)</a>:</h4>
<p>I asked a challenge problem later</p>

<a name="134879736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879736" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879736">Kevin Buzzard (Sep 29 2018 at 11:44)</a>:</h4>
<p>which you have made serious inroads into</p>

<a name="134879744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879744" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879744">Kevin Buzzard (Sep 29 2018 at 11:44)</a>:</h4>
<p>Are those safe tidy lemmas by the way?</p>

<a name="134879754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879754" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879754">Scott Morrison (Sep 29 2018 at 11:45)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> --- it takes 13 seconds, or 5 seconds after you substitute in the proof <code>tidy</code> provides.</p>

<a name="134879762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879762" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879762">Scott Morrison (Sep 29 2018 at 11:45)</a>:</h4>
<p>It's fine to use linarith in <code>tidy</code>, as long as you don't care about how long things take to run. :-)</p>

<a name="134879765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879765" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879765">Kevin Buzzard (Sep 29 2018 at 11:45)</a>:</h4>
<p>Scott I think this is the first time I've seen tidy do something which I really did not want to do myself</p>

<a name="134879803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879803" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879803">Scott Morrison (Sep 29 2018 at 11:46)</a>:</h4>
<p>It's completely insane to let <code>tidy</code> case bash on ints or nats unless you know case bashing is the right thing to do.</p>

<a name="134879814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879814" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879814">Kevin Buzzard (Sep 29 2018 at 11:46)</a>:</h4>
<p>Kenny I don't care how long it takes to run because this is for undergraduates solving cheap problems, not a library</p>

<a name="134879872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879872" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879872">Scott Morrison (Sep 29 2018 at 11:48)</a>:</h4>
<p>I'm hiding here quite a few simp lemmas I had to write before this could work.</p>

<a name="134879877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879877" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879877">Scott Morrison (Sep 29 2018 at 11:48)</a>:</h4>
<p>The dubious one was:</p>

<a name="134879879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879879" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879879">Scott Morrison (Sep 29 2018 at 11:48)</a>:</h4>
<div class="codehilite"><pre><span></span>meta def dt := `[exact dec_trivial]
@[simp] lemma int.of_nat_eq_neg (n : ℕ) (m : ℤ) (h : m &lt; 0 . dt) : int.of_nat n = m ↔ false := sorry
</pre></div>

<a name="134879904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879904" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879904">Scott Morrison (Sep 29 2018 at 11:49)</a>:</h4>
<p>(And here of course by "write" I mean "write the statement of and sorry the proof", as usual. :-)</p>

<a name="134879916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879916" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879916">Kevin Buzzard (Sep 29 2018 at 11:50)</a>:</h4>
<p>I think I could manage a proof of that one</p>

<a name="134879963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879963" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879963">Scott Morrison (Sep 29 2018 at 11:50)</a>:</h4>
<p>oh -- there's nothing scary with the proof. The scary thing is have the <code>exact dec_trivial</code> autoparam.</p>

<a name="134879972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879972" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879972">Scott Morrison (Sep 29 2018 at 11:51)</a>:</h4>
<p>I've no idea if that is a viable thing to do in a <code>@[simp]</code> lemma. I mean, it works, apparently, but it may be insane for some reason I don't understand. :-)</p>

<a name="134879975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879975" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879975">Scott Morrison (Sep 29 2018 at 11:51)</a>:</h4>
<p>The full set of <code>simp</code> lemmas I needed was </p>
<div class="codehilite"><pre><span></span>@[simp] lemma nat.coprime_zero (n : ℕ) : nat.coprime n 0 = false := sorry
@[simp] lemma nat.zero_coprime (n : ℕ) : nat.coprime 0 n = false := sorry

local attribute [simp] nat.succ_eq_add_one

@[simp] lemma nat.add_has_add (a b : ℕ) : nat.add a b = a + b := rfl
@[simp] lemma nat.mul_has_mul (a b : ℕ) : nat.mul a b = a * b := rfl
@[simp] lemma nat.pow_has_pow (a b : ℕ) : nat.pow a b = a ^ b := rfl

local attribute [simp] int.of_nat_add
local attribute [simp] int.of_nat_one

@[simp] lemma foo_1 (a b : ℕ) : a + b = a ↔ b = 0 := sorry
@[simp] lemma foo_2 (a b c : ℕ) : a + (b + c) = c ↔ a + b = 0 := sorry

@[simp] lemma nat.square_zero (n : ℕ) : n^2 = 0 ↔ n = 0 := sorry

local attribute [simp] nat.pow_zero
local attribute [simp] nat.pow_one

meta def dt := `[exact dec_trivial]

@[simp] lemma int.of_nat_eq_neg (n : ℕ) (m : ℤ) (h : m &lt; 0 . dt) : int.of_nat n = m ↔ false := sorry
@[simp] lemma int.of_nat_eq_one (n : ℕ) : int.of_nat n = 1 ↔ n = 1 := sorry
@[simp] lemma int.neg_succ_of_nat_eq_nneg (n : ℕ) (m : ℤ) (h : m ≥ 0 . dt) : int.neg_succ_of_nat n = m ↔ false := sorry
@[simp] lemma int.neg_succ_of_nat_eq_minus_one (n : ℕ) : int.neg_succ_of_nat n = -1 ↔ n = 0 := sorry
</pre></div>

<a name="134879981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134879981" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134879981">Kevin Buzzard (Sep 29 2018 at 11:51)</a>:</h4>
<p>I am supposed to be suggesting a list of projects for third year undergraduate joint maths/computing students and they want the list by Monday. I was going to propose making my <code>number</code> class as one of them</p>

<a name="134880024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134880024" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134880024">Scott Morrison (Sep 29 2018 at 11:52)</a>:</h4>
<p>Also -- this relies on Robert's latest PR for linarith; it doesn't work with the current mathlib one.</p>

<a name="134880030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134880030" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134880030">Kevin Buzzard (Sep 29 2018 at 11:52)</a>:</h4>
<p>I don't mind about that either</p>

<a name="134880104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134880104" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134880104">Scott Morrison (Sep 29 2018 at 11:55)</a>:</h4>
<p>I'm always surprised by how little is marked with @[simp] in mathlib</p>

<a name="134880111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134880111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134880111">Mario Carneiro (Sep 29 2018 at 11:55)</a>:</h4>
<p>I'm sure Kenny doesn't feel the same way</p>

<a name="134880113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134880113" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134880113">Scott Morrison (Sep 29 2018 at 11:55)</a>:</h4>
<p>Like <code>int.of_nat_one</code>. How is that not a simp lemma?</p>

<a name="134880157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134880157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134880157">Mario Carneiro (Sep 29 2018 at 11:56)</a>:</h4>
<p>Isn't that in core?</p>

<a name="134880159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134880159" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134880159">Scott Morrison (Sep 29 2018 at 11:56)</a>:</h4>
<p>Ah, okay :-)</p>

<a name="134880160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134880160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134880160">Scott Morrison (Sep 29 2018 at 11:56)</a>:</h4>
<p>We can still add the attribute, I guess!</p>

<a name="134880165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134880165" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134880165">Mario Carneiro (Sep 29 2018 at 11:56)</a>:</h4>
<p>At the start of <code>int.basic</code> is</p>
<div class="codehilite"><pre><span></span>attribute [simp] int.coe_nat_add int.coe_nat_mul int.coe_nat_zero int.coe_nat_one int.coe_nat_succ
</pre></div>

<a name="134880178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134880178" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134880178">Mario Carneiro (Sep 29 2018 at 11:57)</a>:</h4>
<p>I think we need a simp lemma for of_nat -&gt; coe_nat</p>

<a name="134880183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134880183" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134880183">Scott Morrison (Sep 29 2018 at 11:57)</a>:</h4>
<p>I see. Sounds good!</p>

<a name="134880231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134880231" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134880231">Scott Morrison (Sep 29 2018 at 11:58)</a>:</h4>
<p>And how about</p>
<div class="codehilite"><pre><span></span>attribute [simp] nat.pow_zero nat.pow_one
</pre></div>

<a name="134916514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134916514" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134916514">Scott Morrison (Sep 30 2018 at 09:45)</a>:</h4>
<p>I'm curious about</p>
<div class="codehilite"><pre><span></span>@[simp] theorem int.cast_pow [ring α] (n : ℤ) (m : ℕ) : (↑(n ^ m) : α) = ↑n ^ m :=
</pre></div>

<a name="134916521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134916521" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134916521">Scott Morrison (Sep 30 2018 at 09:45)</a>:</h4>
<p>My instinct would be to <code>simp</code> the other way here!</p>

<a name="134916523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134916523" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134916523">Kenny Lau (Sep 30 2018 at 09:45)</a>:</h4>
<p>well it's the same as <code>int.cast_mul</code> and <code>int.cast_add</code> and etc</p>

<a name="134916524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134916524" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134916524">Scott Morrison (Sep 30 2018 at 09:45)</a>:</h4>
<p>Yes. :-)</p>

<a name="134916564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134916564" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134916564">Scott Morrison (Sep 30 2018 at 09:46)</a>:</h4>
<p>Do you know situations where it's useful to <code>simp</code> in this direction?</p>

<a name="134917057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917057" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917057">Mario Carneiro (Sep 30 2018 at 10:05)</a>:</h4>
<p><code>int.of_nat (n - m)</code></p>

<a name="134917102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917102" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917102">Mario Carneiro (Sep 30 2018 at 10:06)</a>:</h4>
<p>Usually it doesn't matter as long as it is in a consistent direction, but generally speaking it is harder to simp the other way around because it is a kind of "distribution" lemma - the casts on the rhs have to line up for the simp to work, which can be a problem if simp wants to write <code>\u a + b + \u c</code></p>

<a name="134917120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917120" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917120">Mario Carneiro (Sep 30 2018 at 10:08)</a>:</h4>
<p>The recommended technique for bringing your casts together is to assert the form you want and <code>simpa</code> to reduce it to your goal</p>

<a name="134917159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917159" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917159">Kenny Lau (Sep 30 2018 at 10:08)</a>:</h4>
<p><code>simpa only</code></p>

<a name="134917160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917160">Kevin Buzzard (Sep 30 2018 at 10:08)</a>:</h4>
<p>Chris made a comment to me about all this -- he said the rule of thumb was that simp wants to make the up-arrows as close as possible to the variables</p>

<a name="134917180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917180" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917180">Kevin Buzzard (Sep 30 2018 at 10:09)</a>:</h4>
<p>That clarified things for me. My main beef is that you need to know the general cast lemmas from nat to blah and then a bunch of different ones for going from nat to int.</p>

<a name="134917225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917225" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917225">Mario Carneiro (Sep 30 2018 at 10:10)</a>:</h4>
<p>I hope we get the <code>cast</code> tactic for dealing with this</p>

<a name="134917229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917229" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917229">Kevin Buzzard (Sep 30 2018 at 10:11)</a>:</h4>
<p>My hope was to let everything be a <code>number</code> and let type class inference deal with everything</p>

<a name="134917234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917234" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917234">Kevin Buzzard (Sep 30 2018 at 10:11)</a>:</h4>
<p>Is this related?</p>

<a name="134917238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917238" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917238">Kevin Buzzard (Sep 30 2018 at 10:12)</a>:</h4>
<p>Would part of this tactic be the <code>is_actually_an_int</code> typeclass?</p>

<a name="134917280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917280" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917280">Mario Carneiro (Sep 30 2018 at 10:12)</a>:</h4>
<p>I wasn't planning on it</p>

<a name="134917283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917283" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917283">Mario Carneiro (Sep 30 2018 at 10:12)</a>:</h4>
<p>I'm not sure how those plans interact with the <code>is_int</code> class</p>

<a name="134917333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917333" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917333">Kevin Buzzard (Sep 30 2018 at 10:14)</a>:</h4>
<p>I am unclear on the details, but I am very clear on what I want the outcome to be: easy passing from <code>(x : rat) ^ 2  + 2 * y ^ 2 = 7</code> to <code>x ^ 2 + 2 * y ^ 2 = 7</code> with x y ints, where some of those 2's are nats and some are rats, and some of those 7's are ints are some are rats, and in the future this won't matter.</p>

<a name="134917344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917344" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917344">Mario Carneiro (Sep 30 2018 at 10:15)</a>:</h4>
<p>Yes, I think this can be done</p>

<a name="134917393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917393">Mario Carneiro (Sep 30 2018 at 10:16)</a>:</h4>
<p>The idea is you point at an equation and say "make this an equation on int" and it figures out the appropriate coercions rewriting this way and that</p>

<a name="134917403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917403" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917403">Kevin Buzzard (Sep 30 2018 at 10:17)</a>:</h4>
<p>Is this tactic just on a list of things to do, or are there actually plans to develop it? My users would find it extremely helpful.</p>

<a name="134917404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917404" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917404">Mario Carneiro (Sep 30 2018 at 10:17)</a>:</h4>
<p>somewhere in between</p>

<a name="134917444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917444" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917444">Mario Carneiro (Sep 30 2018 at 10:18)</a>:</h4>
<p>I have a fairly concrete idea of how to implement it, but I haven't tried</p>

<a name="134917445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917445" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917445">Kevin Buzzard (Sep 30 2018 at 10:18)</a>:</h4>
<p>That's great news. I'm really glad it's on your radar in some sense.</p>

<a name="134917504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917504" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917504">Kevin Buzzard (Sep 30 2018 at 10:21)</a>:</h4>
<p>This is I think the third time when I have managed to pinpoint an issue which is "trivial in maths and hard in Lean", and you solved both the previous ones. The first was that it seemed to be very hard to prove things like "2 + 2 \not= 5" for real numbers in Lean, and then <code>norm_num</code> appeared. The second was that it seemed to be very hard to prove <code>(x+y)^3=x^3+3x^2y+3xy^2+y^3</code> in Lean and then <code>ring</code> appeared. The reason I find these sorts of questions particularly interesting to focus on is that undergraduate mathematicians take these sorts of things for granted, having no insight into what actually goes in to proving them, but I would rather not try to teach them that insight, I would rather it were just easy.</p>

<a name="134917549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917549" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917549">Mario Carneiro (Sep 30 2018 at 10:23)</a>:</h4>
<p>usually the hard part with these tactics is just figuring out what you want them to do (and what is not in scope)</p>

<a name="134917590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917590" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917590">Mario Carneiro (Sep 30 2018 at 10:24)</a>:</h4>
<p>it's hard to do anything with "I want magic", but "I want a decision procedure for linear inequalities on nat" has a clear enough specification to actually get implemented</p>

<a name="134917598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917598" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917598">Kevin Buzzard (Sep 30 2018 at 10:25)</a>:</h4>
<p>"the hard part" -- I beg to differ. From where I'm standing, the hard part is that there are an extremely small number of people in the world who are equipped to write these tactics, and they are all busy. And I am not yet one of those people. That's why I wrote the ring blog post, to get some sort of insight into how these things might work. I am also not yet convinced that I will be able to write a convincing grant proposal to pay for a computer scientist to write these tactics for me, because the applications are firmly pedagogical and the big grant funders in the UK are more interested in research.</p>

<a name="134917643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917643" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917643">Kevin Buzzard (Sep 30 2018 at 10:27)</a>:</h4>
<p>But I saw undergraduates bravely struggling with this sort of thing all summer, and the reason I got up to speed with how casts currently work in Lean is so I could write the code myself which solved their problems in the particular instances they got stuck at.</p>

<a name="134917685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917685" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917685">Kevin Buzzard (Sep 30 2018 at 10:28)</a>:</h4>
<p>e.g. <a href="#narrow/stream/116395-maths/topic/Coercions.20N-.3EZ-.3EQ-.3ER-.3EC" title="#narrow/stream/116395-maths/topic/Coercions.20N-.3EZ-.3EQ-.3ER-.3EC">https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Coercions.20N-.3EZ-.3EQ-.3ER-.3EC</a></p>

<a name="134917686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917686" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917686">Mario Carneiro (Sep 30 2018 at 10:28)</a>:</h4>
<p>By the way, it is very easy to write a tactic that does what this <code>cast</code> would do, if you aren't picky about the flexibility</p>

<a name="134917691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917691" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917691">Kevin Buzzard (Sep 30 2018 at 10:29)</a>:</h4>
<p>It is very easy for you. I have never written meta code and currently I don't have the time to learn.</p>

<a name="134917692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917692" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917692">Mario Carneiro (Sep 30 2018 at 10:29)</a>:</h4>
<p>you can just define a tactic like <code> `[rw &lt;- int.cast_inj, simp [int.cast_one, int.cast_add, ...]]</code></p>

<a name="134917693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917693" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917693">Kevin Buzzard (Sep 30 2018 at 10:29)</a>:</h4>
<p>Also it takes me a long time to learn things, far longer than it takes people like you or Chris or Kenny.</p>

<a name="134917694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917694" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917694">Mario Carneiro (Sep 30 2018 at 10:29)</a>:</h4>
<p>I mean a "poor mans tactic"</p>

<a name="134917744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917744" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917744">Mario Carneiro (Sep 30 2018 at 10:31)</a>:</h4>
<p>I think I've even used essentially this tactic in <code>data.num.lemmas</code></p>

<a name="134917785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917785" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917785">Kevin Buzzard (Sep 30 2018 at 10:33)</a>:</h4>
<p>My strategy is different. I encourage Chris and Kenny to learn tactics and next week I will be encouraging many more people to learn Lean and then encouraging the best ones to learn tactics. One might argue that part of the reason that localisations of rings and quadratic reciprocity are now in mathlib is that people near me somehow got persuaded that these were important projects. And for me they are extremely important because they are undergraduate level mathematics, which is something I am hugely trying to push.</p>

<a name="134917791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917791" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917791">Kevin Buzzard (Sep 30 2018 at 10:33)</a>:</h4>
<p>I don't know to what extent <code>norm_num</code> and <code>ring</code> got written because of rants by me about how mathematicians needed them, but I know for sure that I am extremely grateful for both.</p>

<a name="134917967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917967" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917967">Kevin Buzzard (Sep 30 2018 at 10:40)</a>:</h4>
<p>Another thing I know for sure is that a bright undergraduate is less busy than a bright PhD student, because it's much easier for the bright undergraduate to coast.</p>

<a name="134917983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134917983" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134917983">Mario Carneiro (Sep 30 2018 at 10:41)</a>:</h4>
<p>The rants were definitely a factor :)</p>

<a name="134918026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918026">Mario Carneiro (Sep 30 2018 at 10:42)</a>:</h4>
<p>I try to let the community decide my priorities to some extent, so being loud is not ineffective if you want me to make something for you</p>

<a name="134918032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918032" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918032">Kevin Buzzard (Sep 30 2018 at 10:43)</a>:</h4>
<p>Thank you Mario for not just writing me off as an asshole.</p>

<a name="134918071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918071">Mario Carneiro (Sep 30 2018 at 10:44)</a>:</h4>
<p>you're just a guy with crazy pants</p>

<a name="134918074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918074" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918074">Kevin Buzzard (Sep 30 2018 at 10:44)</a>:</h4>
<p>My summer students would have been completely lost without ring and norm_num.</p>

<a name="134918091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918091" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918091">Patrick Massot (Sep 30 2018 at 10:45)</a>:</h4>
<p>Don't forget we also rant about the module refactoring and the <code>module</code> tactic</p>

<a name="134918093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918093" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918093">Kevin Buzzard (Sep 30 2018 at 10:45)</a>:</h4>
<p>I am writing teaching materials and I introduce ring and norm_num at the same time as rw. That's how important they seem to be in practice when doing undergraduate problem sheets in mathematics.</p>

<a name="134918134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918134" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918134">Patrick Massot (Sep 30 2018 at 10:46)</a>:</h4>
<p>The point where module refactoring is the main stumbling block of the perfectoid project is approaching fast.</p>

<a name="134918137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918137" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918137">Mario Carneiro (Sep 30 2018 at 10:46)</a>:</h4>
<p>it's my top lean priority right now</p>

<a name="134918138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918138" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918138">Kevin Buzzard (Sep 30 2018 at 10:46)</a>:</h4>
<p>ROFL the slower module refactoring goes the longer I have an excuse for putting off the perfectoid project, which is what I have needed to do over the last week or two</p>

<a name="134918139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918139" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918139">Patrick Massot (Sep 30 2018 at 10:47)</a>:</h4>
<p>With the category theory PR</p>

<a name="134918144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918144" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918144">Patrick Massot (Sep 30 2018 at 10:47)</a>:</h4>
<p>Is 33 open PR our new record?</p>

<a name="134918147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918147" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918147">Mario Carneiro (Sep 30 2018 at 10:47)</a>:</h4>
<p>I think second is merging the ever growing zoo of community branches</p>

<a name="134918188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918188" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918188">Patrick Massot (Sep 30 2018 at 10:48)</a>:</h4>
<p>The community (not only you) needs to go through the community repo and delete or rename branches</p>

<a name="134918189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918189" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918189">Kevin Buzzard (Sep 30 2018 at 10:48)</a>:</h4>
<p>Patrick I was thinking about pushing perfectoids forward by epsilon yesterday but all I managed to do was write down a bit more precisely what needed to be done next. I pushed a commit which was just about ten lines of comments!</p>

<a name="134918190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918190" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918190">Kevin Buzzard (Sep 30 2018 at 10:48)</a>:</h4>
<p>Again I think that the long term solution for this is training</p>

<a name="134918191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918191" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918191">Mario Carneiro (Sep 30 2018 at 10:49)</a>:</h4>
<p>I wonder whether it would be possible to set up a voting system for the PRs</p>

<a name="134918196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918196" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918196">Mario Carneiro (Sep 30 2018 at 10:49)</a>:</h4>
<p>so we can prioritize them a bit</p>

<a name="134918262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918262" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918262">Mario Carneiro (Sep 30 2018 at 10:50)</a>:</h4>
<p>are thumbs up on a PR visible from the PR list?</p>

<a name="134918263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918263" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918263">Kevin Buzzard (Sep 30 2018 at 10:50)</a>:</h4>
<p>The risk with that is that if Patrick and I start rallying the troops to vote for the mathsy ones then Simon's work on traversable or other stuff which I don't understand the point of ends up languishing forever.</p>

<a name="134918269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918269" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918269">Mario Carneiro (Sep 30 2018 at 10:51)</a>:</h4>
<p>that seems fair - you actually have more users</p>

<a name="134918270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918270" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918270">Kevin Buzzard (Sep 30 2018 at 10:51)</a>:</h4>
<p>I'm not saying there's no point though</p>

<a name="134918310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918310" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918310">Kevin Buzzard (Sep 30 2018 at 10:52)</a>:</h4>
<p>and what I worry about is that actually in the long term whatever simon is doing might end up being much more important for making stuff work</p>

<a name="134918315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918315" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918315">Mario Carneiro (Sep 30 2018 at 10:53)</a>:</h4>
<p>I think I can judge that to some extent, any voting would be a suggestion at best</p>

<a name="134918320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918320" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918320">Kevin Buzzard (Sep 30 2018 at 10:53)</a>:</h4>
<p>Patrick, I got into the habit of calling my branches <code>kmb_...</code> because I felt it only right that I should take some sort of responsibility for their existence.</p>

<a name="134918368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918368" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918368">Kevin Buzzard (Sep 30 2018 at 10:55)</a>:</h4>
<p>After module refactoring I will go back to them and take a good look at all of the ones I created and then tidy them up. But (in contrast to you) I am not in a hurry for this because I am trying to put together a bunch of cocalc example sheets and a bunch of lean example sheets and in the long term I believe it's in my (and possibly the community's) interests to make the delivery of my course as smooth as possible.</p>

<a name="134918413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918413" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918413">Mario Carneiro (Sep 30 2018 at 10:56)</a>:</h4>
<p>yeah, I realize that the module refactoring is going to cause some disruption</p>

<a name="134918472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918472" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918472">Mario Carneiro (Sep 30 2018 at 10:59)</a>:</h4>
<p>In my metamath days the main database <a href="http://set.mm" target="_blank" title="http://set.mm">set.mm</a> was like 90% of the existing code in the community, so if I do a refactoring and fix everything that's there most people don't feel the change.  With mathlib it's probably closer to 60% so I either have to visit everyone's projects or trust that they can fix it themselves</p>

<a name="134918517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918517" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918517">Kevin Buzzard (Sep 30 2018 at 11:00)</a>:</h4>
<p>I am very happy to fix my comm alg stuff and perfectoid stuff myself.</p>

<a name="134918526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134918526" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134918526">Kevin Buzzard (Sep 30 2018 at 11:01)</a>:</h4>
<p>I understand how all this works much better now. But it's also a reason why I don't want to write anything new right now (that and the far more important reason that I have no time).</p>

<a name="134919521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/more%20int%20nat%20moans%20and%20golf%20plea/near/134919521" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42973moreintnatmoansandgolfplea.html#134919521">Patrick Massot (Sep 30 2018 at 11:36)</a>:</h4>
<p>Sorry, I was captured by my children. My votes are: module refactoring and Scott's PR</p>


{% endraw %}

{% include archive_update.html %}