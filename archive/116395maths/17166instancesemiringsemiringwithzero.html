---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/17166instancesemiringsemiringwithzero.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html">instance [semiring α] : semiring (with_zero α)</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="172588803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172588803" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172588803">Kevin Buzzard (Aug 06 2019 at 13:39)</a>:</h4>
<p>OK so <span class="user-mention" data-user-id="118107">@Amelia Livingston</span> just pointed out to me that in <code>algebra/ring.lean</code> we have <a href="https://github.com/leanprover-community/mathlib/blob/88ad3cf59d905f8796f3fc954e1af9c8db14274a/src/algebra/ring.lean#L57" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/88ad3cf59d905f8796f3fc954e1af9c8db14274a/src/algebra/ring.lean#L57">the following insanity</a>:</p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">semiring</span> <span class="o">(</span><span class="n">with_zero</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">...</span>
</pre></div>


<p><code>semiring</code> extends <code>add_comm_monoid</code> so a semiring already has a zero. Adding another zero is something which is I guess logically possible, but at the same time is surely "always a mistake". Should this instance be removed though?</p>

<a name="172589934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172589934" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172589934">Kenny Lau (Aug 06 2019 at 13:50)</a>:</h4>
<p>but it really is a semiring...?</p>

<a name="172589947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172589947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172589947">Kevin Buzzard (Aug 06 2019 at 13:50)</a>:</h4>
<p>Yes!</p>

<a name="172589980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172589980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172589980">Kevin Buzzard (Aug 06 2019 at 13:50)</a>:</h4>
<p>If you have an add_semigroup and you add a zero, you get an add_monoid</p>

<a name="172589990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172589990" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172589990">Kevin Buzzard (Aug 06 2019 at 13:50)</a>:</h4>
<p>Now apply when the add_semigroup was already an add_monoid</p>

<a name="172590800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172590800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172590800">Kenny Lau (Aug 06 2019 at 13:58)</a>:</h4>
<p>it's the (co)unit</p>

<a name="172593650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172593650" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172593650">Kevin Buzzard (Aug 06 2019 at 14:30)</a>:</h4>
<p>Mathlib still compiles if the instance is deleted. Why would we ever want this instance?</p>

<a name="172594183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172594183" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172594183">Floris van Doorn (Aug 06 2019 at 14:35)</a>:</h4>
<p>Yes, I think we want to get rid of an instance like that.</p>

<a name="172597026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172597026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172597026">Mario Carneiro (Aug 06 2019 at 15:05)</a>:</h4>
<p>Why would we want to remove it? It's the same as the situation with monoidifying a semigroup that happens to already be a monoid</p>

<a name="172597101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172597101" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172597101">Kevin Buzzard (Aug 06 2019 at 15:06)</a>:</h4>
<p>Because every instance makes life a bit slower, and this instance will never be used so cannot do good and might do harm</p>

<a name="172597165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172597165" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172597165">Mario Carneiro (Aug 06 2019 at 15:06)</a>:</h4>
<p>We could have a more accurate instance there but we would need a class for "semiring without zero"</p>

<a name="172597234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172597234" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172597234">Mario Carneiro (Aug 06 2019 at 15:07)</a>:</h4>
<p>but I disagree with the claim that the instance is "wrong"</p>

<a name="172597330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172597330" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172597330">Mario Carneiro (Aug 06 2019 at 15:08)</a>:</h4>
<p>if you actually have a with_zero and it actually has a semiring structure, I don't see how it could be anything but this one</p>

<a name="172599135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172599135" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172599135">Kevin Buzzard (Aug 06 2019 at 15:28)</a>:</h4>
<p>I guess I'm arguing that it's "wrong" in the sense that if something has a zero then it's very hard to imagine a good reason for adding another one. With the semigroup to monoid example the semiring might have a 1 but it might not. Here the semiring is guaranteed to already have a zero, and you are adding another one.</p>

<a name="172599165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172599165" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172599165">Kevin Buzzard (Aug 06 2019 at 15:28)</a>:</h4>
<p>The fact that the instance is not used in mathlib is evidence that the instance is useless</p>

<a name="172608841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172608841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172608841">Mario Carneiro (Aug 06 2019 at 17:20)</a>:</h4>
<p>The instance isn't used because no one cares about the theory of semirings</p>

<a name="172608900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172608900" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172608900">Kevin Buzzard (Aug 06 2019 at 17:21)</a>:</h4>
<p>But could it be the case that it leads type class inference the wrong way sometimes? If so then it should go</p>

<a name="172609003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172609003" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172609003">Kevin Buzzard (Aug 06 2019 at 17:22)</a>:</h4>
<blockquote>
<p>The instance isn't used because no one cares about the theory of semirings</p>
</blockquote>
<p>I think this is too weak. People care about the theory of rings, and a semiring is a ring, but the instance isn't used anyway. The point is that people don't care about adding 0 to something which already has a 0.</p>

<a name="172609044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172609044" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172609044">Mario Carneiro (Aug 06 2019 at 17:22)</a>:</h4>
<p>I don't disagree with this line of argument though. It shouldn't affect too much, unless you are inferring things on with_zero a lot - most types are not of the form <code>with_zero A</code> so it shouldn't lead typeclass significantly astray</p>

<a name="172609156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172609156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172609156">Mario Carneiro (Aug 06 2019 at 17:23)</a>:</h4>
<p>It would be difficult and probably inadvisable to define a type operator that only adds a zero if there isn't already one there</p>

<a name="172609181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172609181" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172609181">Kevin Buzzard (Aug 06 2019 at 17:23)</a>:</h4>
<p>That is not the case for this instance though!</p>

<a name="172609239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172609239" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172609239">Kevin Buzzard (Aug 06 2019 at 17:24)</a>:</h4>
<p>It would be very easy to modify this instance so that it only added a zero if there isn't one already there.</p>

<a name="172609246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172609246" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172609246">Mario Carneiro (Aug 06 2019 at 17:24)</a>:</h4>
<p>it's easier to reason about an operator that always adds exactly one new element</p>

<a name="172609251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172609251" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172609251">Kevin Buzzard (Aug 06 2019 at 17:24)</a>:</h4>
<p>By deleting it.</p>

<a name="172609335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172609335" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172609335">Mario Carneiro (Aug 06 2019 at 17:25)</a>:</h4>
<p>The reason this instance exists is because it's completing the cartesian product of all concepts in mathlib interacting with all others</p>

<a name="172609381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172609381" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172609381">Mario Carneiro (Aug 06 2019 at 17:25)</a>:</h4>
<p>We think <code>with_zero A</code> is a useful operator, hence it exists, hence we need all applicable instances because users shouldn't need to define those themselves</p>

<a name="172609434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172609434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172609434">Kevin Buzzard (Aug 06 2019 at 17:26)</a>:</h4>
<p>That would be the case if we were dealing with an object which was an add_comm_semigroup and a monoid, but that's not what a semiring is.</p>

<a name="172609502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172609502" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172609502">Kevin Buzzard (Aug 06 2019 at 17:26)</a>:</h4>
<p>What could concievably be useful is adding a zero to pnat, but I don't know what kind of an object pnat is. It's not a semiring :-/</p>

<a name="172609510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172609510" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172609510">Mario Carneiro (Aug 06 2019 at 17:26)</a>:</h4>
<p>Actually you need a distrib add_comm_semigroup monoid</p>

<a name="172609536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172609536" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172609536">Kevin Buzzard (Aug 06 2019 at 17:27)</a>:</h4>
<p>Like pnat!</p>

<a name="172609549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172609549" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172609549">Kevin Buzzard (Aug 06 2019 at 17:27)</a>:</h4>
<p><code>demisemiring</code>?</p>

<a name="172609573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172609573" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172609573">Mario Carneiro (Aug 06 2019 at 17:27)</a>:</h4>
<p>semirig?</p>

<a name="172609597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/instance%20%5Bsemiring%20%CE%B1%5D%20%3A%20semiring%20%28with_zero%20%CE%B1%29/near/172609597" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/17166instancesemiringsemiringwithzero.html#172609597">Mario Carneiro (Aug 06 2019 at 17:27)</a>:</h4>
<p>you can't spell ring without z</p>


{% endraw %}

{% include archive_update.html %}