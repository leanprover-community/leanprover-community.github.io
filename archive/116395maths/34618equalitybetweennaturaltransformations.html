---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/34618equalitybetweennaturaltransformations.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/34618equalitybetweennaturaltransformations.html">equality between natural transformations</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="165001300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/equality%20between%20natural%20transformations/near/165001300" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/34618equalitybetweennaturaltransformations.html#165001300">Floris van Doorn (May 06 2019 at 17:29)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> <span class="user-mention" data-user-id="110032">@Reid Barton</span> <span class="user-mention" data-user-id="110087">@Scott Morrison</span> <br>
In <a href="https://github.com/leanprover-community/mathlib/issues/986" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/986">#986</a> the following issue came up: how do we formulate equalities between natural transformations? We can of course use <code>α = β</code>, but we can also use <code>∀X, α.app X = β.app X</code> (of course, these are equivalent). I would have a preference for the latter: I think in general equalities between morphisms are easier to work with. In either case, we should choose one of the options, and then consistently stick with it throughout the library.</p>
<p>One disadvantage when we use <code>α = β</code> is that we sometimes have to insert unitors/associators between functors, which disappear on the morphism level. For example:</p>
<div class="codehilite"><pre><span></span><span class="kn">variables</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₁</span><span class="o">}</span> <span class="o">[</span><span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">v₁</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">D</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₂</span><span class="o">}</span> <span class="o">[</span><span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">v₂</span><span class="o">}</span> <span class="n">D</span><span class="o">]</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="n">D</span> <span class="err">⥤</span> <span class="n">C</span><span class="o">}</span> <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="n">C</span> <span class="err">⥤</span> <span class="n">C</span><span class="o">}</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">F</span> <span class="err">⟶</span> <span class="n">functor</span><span class="bp">.</span><span class="n">id</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="n">G</span> <span class="err">⋙</span> <span class="n">F</span> <span class="err">⟶</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">whisker_left</span> <span class="n">G</span> <span class="n">α</span> <span class="bp">=</span> <span class="n">β</span> <span class="err">≫</span> <span class="o">(</span><span class="n">right_unitor</span> <span class="n">G</span><span class="o">)</span><span class="bp">.</span><span class="n">inv</span> <span class="o">:=</span>
<span class="n">sorry</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">F</span> <span class="err">⟶</span> <span class="n">functor</span><span class="bp">.</span><span class="n">id</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="n">G</span> <span class="err">⋙</span> <span class="n">F</span> <span class="err">⟶</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">D</span><span class="o">)</span> <span class="o">:</span> <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="o">(</span><span class="n">G</span><span class="bp">.</span><span class="n">obj</span> <span class="n">X</span><span class="o">)</span> <span class="bp">=</span> <span class="n">β</span><span class="bp">.</span><span class="n">app</span> <span class="n">X</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>

<a name="165004761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/equality%20between%20natural%20transformations/near/165004761" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/34618equalitybetweennaturaltransformations.html#165004761">Johan Commelin (May 06 2019 at 18:10)</a>:</h4>
<p>I'm not sure if I understand the reason lying behind your proposal... but I trust your experience. I can't say much about how well your suggestion would "compose". But presumably you are claiming it will be at least as good as our current setup...</p>

<a name="165007001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/equality%20between%20natural%20transformations/near/165007001" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/34618equalitybetweennaturaltransformations.html#165007001">Floris van Doorn (May 06 2019 at 18:37)</a>:</h4>
<p>One of the questions is what would be more useful to <code>tidy</code>. Does <code>tidy</code> apply <code>ext</code> before <code>simp</code> when proving an equality between natural transformations? If so, a lemma like <code>whisker_left G α = β ≫ (right_unitor G).inv</code> will probably never be applied by <code>tidy</code>, while <code>α.app (G.obj X) = β.app X</code> would be.</p>
<blockquote>
<p>But presumably you are claiming it will be at least as good as our current setup...</p>
</blockquote>
<p>Probably there are (small) trade-offs either way.</p>

<a name="165007117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/equality%20between%20natural%20transformations/near/165007117" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/34618equalitybetweennaturaltransformations.html#165007117">Johan Commelin (May 06 2019 at 18:38)</a>:</h4>
<p>I think <code>ext</code> appears before <code>simp</code> in the list of tactics...</p>

<a name="165007158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/equality%20between%20natural%20transformations/near/165007158" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/34618equalitybetweennaturaltransformations.html#165007158">Johan Commelin (May 06 2019 at 18:39)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/00aaf05a00b928ea9ac09721d87ae5d2ca1ae5a1/src/tactic/tidy.lean#L42" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/00aaf05a00b928ea9ac09721d87ae5d2ca1ae5a1/src/tactic/tidy.lean#L42">https://github.com/leanprover-community/mathlib/blob/00aaf05a00b928ea9ac09721d87ae5d2ca1ae5a1/src/tactic/tidy.lean#L42</a></p>

<a name="165011412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/equality%20between%20natural%20transformations/near/165011412" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/34618equalitybetweennaturaltransformations.html#165011412">Scott Morrison (May 06 2019 at 19:30)</a>:</h4>
<p>In some recent work (on stalks) I actually switched it around. Tidy seems to work between with <code>ext</code> after <code>simp</code>, so I'd prefer we get used to that. :-)</p>

<a name="165011917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/equality%20between%20natural%20transformations/near/165011917" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/34618equalitybetweennaturaltransformations.html#165011917">Johan Commelin (May 06 2019 at 19:36)</a>:</h4>
<p>I can't parse your last sentence... Could you rephrase?</p>

<a name="165012571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/equality%20between%20natural%20transformations/near/165012571" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/34618equalitybetweennaturaltransformations.html#165012571">Kevin Buzzard (May 06 2019 at 19:44)</a>:</h4>
<p>Better?</p>

<a name="165012851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/equality%20between%20natural%20transformations/near/165012851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/34618equalitybetweennaturaltransformations.html#165012851">Johan Commelin (May 06 2019 at 19:48)</a>:</h4>
<p>Aah... <span class="user-mention" data-user-id="110087">@Scott Morrison</span> You switched <code>ext</code> and <code>simp</code> around?<br>
I should just go to bed. I thought you were saying you switched from <code>\a = \b</code> to the version that Floris is proposing.</p>

<a name="165012892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/equality%20between%20natural%20transformations/near/165012892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/34618equalitybetweennaturaltransformations.html#165012892">Johan Commelin (May 06 2019 at 19:48)</a>:</h4>
<p>/me <span aria-label="bulb" class="emoji emoji-1f4a1" role="img" title="bulb">:bulb:</span></p>

<a name="165032575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/equality%20between%20natural%20transformations/near/165032575" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/34618equalitybetweennaturaltransformations.html#165032575">Floris van Doorn (May 07 2019 at 00:50)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> Interesting! How often do you have to insert unitors. Is that annoying?</p>
<p>About the unit-counit laws specifically: do we want to "abuse" that <code>functor.id ⋙ F = F ⋙ functor.id</code> definitionally, or do we want to use both unitors?</p>

<a name="165035458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/equality%20between%20natural%20transformations/near/165035458" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/34618equalitybetweennaturaltransformations.html#165035458">Scott Morrison (May 07 2019 at 02:02)</a>:</h4>
<p>I guess I don't have an opinion about the <code>functor.id ⋙ F = F ⋙ functor.id</code> trick. If we get burnt by it, it's unlikely to be much trouble to fix.</p>

<a name="165040401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/equality%20between%20natural%20transformations/near/165040401" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/34618equalitybetweennaturaltransformations.html#165040401">Johan Commelin (May 07 2019 at 04:01)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> This commit <a href="https://github.com/leanprover-community/mathlib/pull/986/commits/56a95da8dbfd7610bc99cf72f621f8c967204604" target="_blank" title="https://github.com/leanprover-community/mathlib/pull/986/commits/56a95da8dbfd7610bc99cf72f621f8c967204604">https://github.com/leanprover-community/mathlib/pull/986/commits/56a95da8dbfd7610bc99cf72f621f8c967204604</a> by Scott shows why I'm inclined to go for the <code>\a = \b</code> version...</p>


{% endraw %}

{% include archive_update.html %}