---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/10127ChurchNumeralPuzzles.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html">Church Numeral Puzzles</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="126010843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126010843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126010843">Kevin Buzzard (May 02 2018 at 19:55)</a>:</h4>
<p>I am trying to understand church numerals by writing a collection of basic theorems about them.</p>

<a name="126010845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126010845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126010845">Kevin Buzzard (May 02 2018 at 19:55)</a>:</h4>
<p>I just solved this one:</p>

<a name="126010886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126010886" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126010886">Kevin Buzzard (May 02 2018 at 19:56)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">chℕ</span> <span class="o">:=</span> <span class="bp">Π</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">,</span> <span class="o">(</span><span class="n">X</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="bp">→</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span>

<span class="kn">namespace</span> <span class="n">chnat</span>

<span class="kn">open</span> <span class="n">nat</span>

<span class="kn">definition</span> <span class="n">to_nat</span> <span class="o">:</span> <span class="n">chℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">m</span><span class="o">,</span> <span class="n">m</span> <span class="bp">ℕ</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="mi">0</span>

<span class="n">def</span> <span class="n">of_nat</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">chℕ</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">zero</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">succ</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">of_nat</span> <span class="n">n</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="c1">-- f (f^n x)</span>

<span class="kn">definition</span> <span class="n">of_nat&#39;</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">chℕ</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span> <span class="n">of_nat&#39;</span> <span class="n">n</span> <span class="n">X</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="c1">-- f^n (f x)</span>

<span class="kn">theorem</span> <span class="n">of_nat_is_of_nat&#39;</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">of_nat</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">of_nat&#39;</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">end</span> <span class="n">chnat</span>
</pre></div>

<a name="126010904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126010904" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126010904">Kevin Buzzard (May 02 2018 at 19:57)</a>:</h4>
<p>it was harder than I expected though, so I probably missed a trick, which is why I mention it here.</p>

<a name="126011292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126011292" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126011292">Gabriel Ebner (May 02 2018 at 20:06)</a>:</h4>
<p>Hmm, this was a pretty straightforward induction:</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">of_nat_is_of_nat&#39;</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">of_nat</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">of_nat&#39;</span> <span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span><span class="bp">;</span> <span class="n">funext</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span><span class="bp">;</span> <span class="n">simp</span><span class="bp">!</span> <span class="bp">*</span><span class="o">,</span>
<span class="n">clear</span> <span class="n">n_ih</span><span class="o">,</span> <span class="n">induction</span> <span class="n">n</span> <span class="n">generalizing</span> <span class="n">x</span><span class="bp">;</span> <span class="n">simp</span><span class="bp">!</span> <span class="bp">*</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="126012437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126012437" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126012437">Kevin Buzzard (May 02 2018 at 20:33)</a>:</h4>
<p>This is the key lemma I've been after:</p>

<a name="126012439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126012439" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126012439">Kevin Buzzard (May 02 2018 at 20:33)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">of_nat_functorial</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span>
<span class="n">a</span> <span class="o">(</span><span class="n">of_nat</span> <span class="n">n</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">@</span><span class="n">of_nat</span> <span class="n">n</span> <span class="o">(</span><span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">g</span> <span class="n">x&#39;</span><span class="o">,</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">x&#39;</span><span class="o">))</span> <span class="n">a</span> <span class="n">x</span> <span class="o">:=</span>
</pre></div>

<a name="126012493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126012493" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126012493">Kevin Buzzard (May 02 2018 at 20:35)</a>:</h4>
<p>I have never used <code>generalizing</code> or <code>simp!</code> before.</p>

<a name="126012503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126012503" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126012503">Kevin Buzzard (May 02 2018 at 20:35)</a>:</h4>
<p>So thanks very much for these!</p>

<a name="126012504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126012504" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126012504">Kevin Buzzard (May 02 2018 at 20:35)</a>:</h4>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span></p>

<a name="126012553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126012553" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126012553">Kevin Buzzard (May 02 2018 at 20:36)</a>:</h4>
<p>I also have this:</p>

<a name="126012554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126012554" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126012554">Kevin Buzzard (May 02 2018 at 20:36)</a>:</h4>
<p><code>example (m n : ℕ) : of_nat (m + n) = of_nat m + of_nat n := sorry</code></p>

<a name="126012995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126012995" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126012995">Chris Hughes (May 02 2018 at 20:47)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">of_nat_functorial</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span>
<span class="n">a</span> <span class="o">(</span><span class="n">of_nat</span> <span class="n">n</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">@</span><span class="n">of_nat</span> <span class="n">n</span> <span class="o">(</span><span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">g</span> <span class="n">x&#39;</span><span class="o">,</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">x&#39;</span><span class="o">))</span> <span class="n">a</span> <span class="n">x</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">intros</span><span class="bp">;</span> <span class="n">refl</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="k">begin</span>
  <span class="k">assume</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">a</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">of_nat</span><span class="o">],</span>
  <span class="n">dsimp</span><span class="o">,</span>
  <span class="n">rw</span> <span class="err">←</span> <span class="n">of_nat_functorial</span><span class="o">,</span>
  <span class="n">dsimp</span><span class="o">,</span>
   <span class="n">apply</span> <span class="n">congr_arg</span><span class="o">,</span>
   <span class="n">clear</span> <span class="n">of_nat_functorial</span><span class="o">,</span>
   <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">ih</span> <span class="n">generalizing</span> <span class="n">x</span><span class="o">,</span>
   <span class="n">refl</span><span class="o">,</span>
   <span class="n">rw</span> <span class="n">of_nat</span><span class="o">,</span>
   <span class="n">dsimp</span><span class="o">,</span>
   <span class="n">rw</span> <span class="n">ih</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="126013010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126013010" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126013010">Chris Hughes (May 02 2018 at 20:47)</a>:</h4>
<p>Not the cleanest, but done.</p>

<a name="126013555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126013555" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126013555">Gabriel Ebner (May 02 2018 at 20:58)</a>:</h4>
<p>These lemmas are all induction+simp, if you set them up correctly:</p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span><span class="o">:</span> <span class="n">has_add</span> <span class="n">chℕ</span> <span class="o">:=</span> <span class="bp">⟨λ</span> <span class="n">a</span> <span class="n">b</span> <span class="n">X</span> <span class="n">f</span><span class="o">,</span> <span class="n">a</span> <span class="bp">_</span> <span class="n">f</span> <span class="err">∘</span> <span class="n">b</span> <span class="bp">_</span> <span class="n">f</span><span class="bp">⟩</span>
<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">chℕ_add</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">chℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">X</span> <span class="n">f</span><span class="o">,</span> <span class="n">a</span> <span class="bp">_</span> <span class="n">f</span> <span class="err">∘</span> <span class="n">b</span> <span class="bp">_</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">of_nat_f</span> <span class="o">(</span><span class="n">n</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">of_nat</span> <span class="n">n</span> <span class="n">X</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">(</span><span class="n">of_nat</span> <span class="n">n</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">induction</span> <span class="n">n</span> <span class="n">generalizing</span> <span class="n">x</span><span class="bp">;</span> <span class="n">simp</span><span class="bp">!</span> <span class="bp">*</span>

<span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="bp">-</span><span class="n">simp</span><span class="o">]</span> <span class="n">add_comm</span>
<span class="kn">lemma</span> <span class="n">of_nat_add</span>  <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">of_nat</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">of_nat</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">of_nat</span> <span class="n">n</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">generalizing</span> <span class="n">m</span><span class="bp">;</span> <span class="n">funext</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span><span class="bp">;</span> <span class="n">simp</span> <span class="o">[</span><span class="n">of_nat</span><span class="o">,</span> <span class="bp">*</span><span class="o">]</span>
</pre></div>

<a name="126013667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126013667" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126013667">Gabriel Ebner (May 02 2018 at 21:00)</a>:</h4>
<p>Unfortunately you can't orient <code>of_nat_f</code> the other way around because it won't work as a simp lemma then.</p>

<a name="126015189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126015189" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126015189">Kevin Buzzard (May 02 2018 at 21:34)</a>:</h4>
<p>Thanks so much Gabriel!</p>

<a name="126016767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126016767" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126016767">Kevin Buzzard (May 02 2018 at 22:12)</a>:</h4>
<p>These proofs are really cool :-)</p>

<a name="126016801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126016801" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126016801">Kevin Buzzard (May 02 2018 at 22:13)</a>:</h4>
<p>I understand better the way you think about the question now. I want to prove all the intermediate lemmas first, because historically I have been trained to go forwards. You just keep reducing the problem to simpler statements by induction because dependent type theory is somehow better at pushing backwards.</p>

<a name="126016926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126016926" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126016926">Kevin Buzzard (May 02 2018 at 22:16)</a>:</h4>
<p>The one with <code>clear n_ih</code> is interesting!</p>

<a name="126017263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017263" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017263">Kevin Buzzard (May 02 2018 at 22:26)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">pow</span> <span class="o">:</span> <span class="n">chℕ</span> <span class="bp">→</span> <span class="n">chℕ</span> <span class="bp">→</span> <span class="n">chℕ</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">m</span> <span class="n">n</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">n</span> <span class="o">(</span><span class="n">X</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">g</span><span class="o">,</span> <span class="o">(</span><span class="n">m</span> <span class="n">X</span> <span class="n">g</span><span class="o">))</span> <span class="n">f</span> <span class="n">x</span>
<span class="kn">theorem</span> <span class="n">of_nat_pow</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">of_nat</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">of_nat</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">of_nat</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="126017321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017321" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017321">Mario Carneiro (May 02 2018 at 22:28)</a>:</h4>
<p>I think the proof is <code>of_nat_add _ _</code> :)</p>

<a name="126017327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017327" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017327">Kevin Buzzard (May 02 2018 at 22:28)</a>:</h4>
<p>wait a second</p>

<a name="126017334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017334" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017334">Kevin Buzzard (May 02 2018 at 22:29)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">chℕ</span> <span class="o">:=</span> <span class="bp">Π</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">,</span> <span class="o">(</span><span class="n">X</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="bp">→</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span>

<span class="kn">namespace</span> <span class="n">chnat</span>

<span class="kn">open</span> <span class="n">nat</span>

<span class="kn">definition</span> <span class="n">to_nat</span> <span class="o">:</span> <span class="n">chℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">m</span><span class="o">,</span> <span class="n">m</span> <span class="bp">ℕ</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="mi">0</span>

<span class="n">def</span> <span class="n">of_nat</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">chℕ</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">zero</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">succ</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">of_nat</span> <span class="n">n</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="c1">-- f (f^n x)</span>

<span class="n">def</span> <span class="n">pow</span> <span class="o">:</span> <span class="n">chℕ</span> <span class="bp">→</span> <span class="n">chℕ</span> <span class="bp">→</span> <span class="n">chℕ</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">m</span> <span class="n">n</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">n</span> <span class="o">(</span><span class="n">X</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">g</span><span class="o">,</span> <span class="o">(</span><span class="n">m</span> <span class="n">X</span> <span class="n">g</span><span class="o">))</span> <span class="n">f</span> <span class="n">x</span>
<span class="kn">theorem</span> <span class="n">of_nat_pow</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">of_nat</span> <span class="o">(</span><span class="n">m</span> <span class="err">^</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">pow</span> <span class="o">(</span><span class="n">of_nat</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">of_nat</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>


<span class="kn">end</span> <span class="n">chnat</span>
</pre></div>

<a name="126017344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017344" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017344">Kevin Buzzard (May 02 2018 at 22:29)</a>:</h4>
<p>I think that runs and asks the question I want to ask :-)</p>

<a name="126017350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017350" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017350">Kenny Lau (May 02 2018 at 22:29)</a>:</h4>
<p>I thought I already proved it</p>

<a name="126017353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017353" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017353">Kevin Buzzard (May 02 2018 at 22:29)</a>:</h4>
<p>Can you golf it though?</p>

<a name="126017355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017355" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017355">Kenny Lau (May 02 2018 at 22:29)</a>:</h4>
<p>...</p>

<a name="126017360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017360" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017360">Kevin Buzzard (May 02 2018 at 22:29)</a>:</h4>
<p>Did you see Gabriel's proofs?</p>

<a name="126017446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017446" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017446">Mario Carneiro (May 02 2018 at 22:31)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">chℕ</span> <span class="o">:=</span> <span class="bp">Π</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">,</span> <span class="o">(</span><span class="n">X</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="bp">→</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span>

<span class="kn">namespace</span> <span class="n">chnat</span>

<span class="kn">open</span> <span class="n">nat</span>

<span class="n">def</span> <span class="n">to_nat</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">chℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="n">m</span> <span class="bp">ℕ</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="mi">0</span>

<span class="n">def</span> <span class="n">of_nat</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">chℕ</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">zero</span><span class="o">)</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">x</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">succ</span> <span class="n">n</span><span class="o">)</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">of_nat</span> <span class="n">n</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="c1">-- f (f^n x)</span>

<span class="n">def</span> <span class="n">pow</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">chℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">chℕ</span>
<span class="bp">|</span> <span class="n">X</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">n</span> <span class="o">(</span><span class="n">X</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="n">X</span><span class="o">)</span> <span class="n">f</span> <span class="n">x</span>

<span class="kn">theorem</span> <span class="n">of_nat_pow</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">of_nat</span> <span class="o">(</span><span class="n">m</span> <span class="err">^</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">pow</span> <span class="o">(</span><span class="n">of_nat</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">of_nat</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kn">end</span> <span class="n">chnat</span>
</pre></div>


<p>golfed</p>

<a name="126017509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017509" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017509">Kenny Lau (May 02 2018 at 22:32)</a>:</h4>
<p>...</p>

<a name="126017581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017581">Kevin Buzzard (May 02 2018 at 22:35)</a>:</h4>
<p>Mario I guess that in reality I am more interested in the style. Is yours both preferable and golfier? Ultimately I want to write good style Lean.</p>

<a name="126017660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017660" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017660">Kenny Lau (May 02 2018 at 22:37)</a>:</h4>
<p>I wouldn't prefer it</p>

<a name="126017666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017666" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017666">Kevin Buzzard (May 02 2018 at 22:37)</a>:</h4>
<p>ooh the <code>lam g</code> on my part was a rookie error</p>

<a name="126017667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017667" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017667">Kenny Lau (May 02 2018 at 22:37)</a>:</h4>
<p>you see, it uses the equation compiler</p>

<a name="126017674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017674" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017674">Kenny Lau (May 02 2018 at 22:37)</a>:</h4>
<p>and uses "external" definitional equality</p>

<a name="126017718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017718" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017718">Kenny Lau (May 02 2018 at 22:38)</a>:</h4>
<p>like it isn't "expressionally equal" but somehow they made it definitionally equal (by all those ._equation_1) thing</p>

<a name="126017719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017719" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017719">Kenny Lau (May 02 2018 at 22:38)</a>:</h4>
<p>do <code>#print prefix chnat.pow</code> to see what I mean</p>

<a name="126017740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017740">Mario Carneiro (May 02 2018 at 22:39)</a>:</h4>
<p>huh? There is no fancy business in any of the definitions except <code>of_nat</code>, but that was already defined by eqn compiler</p>

<a name="126017781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017781" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017781">Kenny Lau (May 02 2018 at 22:40)</a>:</h4>
<p>hmm...</p>

<a name="126017791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017791" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017791">Kenny Lau (May 02 2018 at 22:40)</a>:</h4>
<p>they don't do <code>._main</code> if you don't have two cases?</p>

<a name="126017800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017800">Mario Carneiro (May 02 2018 at 22:40)</a>:</h4>
<p>the eqn compiler always produces <code>._main</code> I guess</p>

<a name="126017804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017804">Mario Carneiro (May 02 2018 at 22:40)</a>:</h4>
<p>for uniformity I assume</p>

<a name="126017880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017880" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017880">Kenny Lau (May 02 2018 at 22:43)</a>:</h4>
<p>I don't like main</p>

<a name="126017922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017922" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017922">Kenny Lau (May 02 2018 at 22:44)</a>:</h4>
<p>as a sidenote now I prefer <code>trans_rel_left</code> over <code>calc</code> lol</p>

<a name="126017924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017924" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017924">Kenny Lau (May 02 2018 at 22:44)</a>:</h4>
<p>because _ with the tactics</p>

<a name="126017938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017938" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017938">Kevin Buzzard (May 02 2018 at 22:45)</a>:</h4>
<p>Oh you're right Kenny. So Mario does this  mean that the lambda style is preferred in practice?</p>

<a name="126017985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017985" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017985">Kenny Lau (May 02 2018 at 22:46)</a>:</h4>
<p>I think Mario prefers the equation compiler because it looks nicer</p>

<a name="126017988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017988">Mario Carneiro (May 02 2018 at 22:46)</a>:</h4>
<p>I always locally optimize <code>def T : A -&gt; B := \lam x, t</code> =&gt;  <code>def T (x : A) : B := t</code></p>

<a name="126017995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126017995" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126017995">Mario Carneiro (May 02 2018 at 22:47)</a>:</h4>
<p>and <code>def T : B := \lam x, t</code> =&gt; <code>def T : B | x := t</code></p>

<a name="126018003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018003" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018003">Kenny Lau (May 02 2018 at 22:47)</a>:</h4>
<p>what next, <code>\la x, A $ B x</code> =&gt; <code>A \o B</code>?</p>

<a name="126018043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018043" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018043">Kenny Lau (May 02 2018 at 22:48)</a>:</h4>
<p>does your optimization have church rosser?</p>

<a name="126018044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018044" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018044">Mario Carneiro (May 02 2018 at 22:48)</a>:</h4>
<p>that one depends on whether the \o gets in the way later</p>

<a name="126018045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018045" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018045">Mario Carneiro (May 02 2018 at 22:48)</a>:</h4>
<p>but usually yes</p>

<a name="126018048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018048" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018048">Kenny Lau (May 02 2018 at 22:48)</a>:</h4>
<p>even if <code>x</code> is a proposition?</p>

<a name="126018054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018054" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018054">Mario Carneiro (May 02 2018 at 22:49)</a>:</h4>
<p>sure, why not?</p>

<a name="126018057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018057" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018057">Kenny Lau (May 02 2018 at 22:49)</a>:</h4>
<p>wow</p>

<a name="126018064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018064" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018064">Kevin Buzzard (May 02 2018 at 22:49)</a>:</h4>
<p>It's the <code>|</code> that causes the trouble</p>

<a name="126018065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018065" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018065">Mario Carneiro (May 02 2018 at 22:49)</a>:</h4>
<p>it often doesn't work as a straight replacement since it could be dependent</p>

<a name="126018066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018066" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018066">Kevin Buzzard (May 02 2018 at 22:49)</a>:</h4>
<p>suddenly I have <code>pow._main</code></p>

<a name="126018073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018073" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018073">Kenny Lau (May 02 2018 at 22:49)</a>:</h4>
<p>yay we're on the same side for this time</p>

<a name="126018075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018075" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018075">Mario Carneiro (May 02 2018 at 22:49)</a>:</h4>
<p>Yes, the <code>|</code> triggers the equation compiler</p>

<a name="126018124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018124" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018124">Mario Carneiro (May 02 2018 at 22:50)</a>:</h4>
<p>It also gives you the correct (applied) equation lemma</p>

<a name="126018133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018133" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018133">Mario Carneiro (May 02 2018 at 22:50)</a>:</h4>
<p>rather than the lambda equation lemma</p>

<a name="126018134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018134" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018134">Kenny Lau (May 02 2018 at 22:50)</a>:</h4>
<p>I don't like that</p>

<a name="126018164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018164" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018164">Kevin Buzzard (May 02 2018 at 22:51)</a>:</h4>
<p>But Kenny is that just because you haven't learned how to use the more complex type properly?</p>

<a name="126018169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018169" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018169">Kevin Buzzard (May 02 2018 at 22:51)</a>:</h4>
<p>What is an example of where this causes you problems?</p>

<a name="126018171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018171" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018171">Kenny Lau (May 02 2018 at 22:51)</a>:</h4>
<p>heh... I use the equation compiler all the time</p>

<a name="126018172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018172" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018172">Kenny Lau (May 02 2018 at 22:51)</a>:</h4>
<p>I just don't like it</p>

<a name="126018175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018175" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018175">Kevin Buzzard (May 02 2018 at 22:51)</a>:</h4>
<p>and I am asking why exactly</p>

<a name="126018218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018218" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018218">Kenny Lau (May 02 2018 at 22:52)</a>:</h4>
<p>i don't know</p>

<a name="126018232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018232" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018232">Mario Carneiro (May 02 2018 at 22:52)</a>:</h4>
<p>I understand wanting a simple underlying term, but that's an issue best aimed at the equation compiler</p>

<a name="126018242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018242" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018242">Kevin Buzzard (May 02 2018 at 22:53)</a>:</h4>
<p>I am just learning all these tricks now. I have learned that when you write a substantial amount of code you end up picking stuff up as you need it; Kenny you wrote a lot of code a lot quicker than me.</p>

<a name="126018247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018247" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018247">Kevin Buzzard (May 02 2018 at 22:53)</a>:</h4>
<p>Mario, did you do my Ackermann church question? ;-)</p>

<a name="126018250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018250" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018250">Kenny Lau (May 02 2018 at 22:53)</a>:</h4>
<p>I'm convinced you can't do it</p>

<a name="126018252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018252" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018252">Kenny Lau (May 02 2018 at 22:53)</a>:</h4>
<p>you need a higher order functional</p>

<a name="126018256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018256" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018256">Kenny Lau (May 02 2018 at 22:54)</a>:</h4>
<p>since chNat lives in Type 1</p>

<a name="126018295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018295" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018295">Kenny Lau (May 02 2018 at 22:54)</a>:</h4>
<p>you need an empowered chNat that lives in Type 2</p>

<a name="126018296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018296" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018296">Kenny Lau (May 02 2018 at 22:54)</a>:</h4>
<p>Ackermann isn't primitive recursive</p>

<a name="126018297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018297" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018297">Kenny Lau (May 02 2018 at 22:54)</a>:</h4>
<p>its image is in Delta_1 not Delta_0</p>

<a name="126018299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018299" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018299">Kenny Lau (May 02 2018 at 22:54)</a>:</h4>
<p>in the arithmetic hierarchy</p>

<a name="126018300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018300" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018300">Kevin Buzzard (May 02 2018 at 22:54)</a>:</h4>
<p><code>def ack : chℕ → chℕ → chℕ := sorry -- KB didn't try this one</code></p>

<a name="126018302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018302" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018302">Kenny Lau (May 02 2018 at 22:54)</a>:</h4>
<p>whatever that means</p>

<a name="126018303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018303" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018303">Kevin Buzzard (May 02 2018 at 22:54)</a>:</h4>
<p>(for good reason!)</p>

<a name="126018306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018306" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018306">Mario Carneiro (May 02 2018 at 22:54)</a>:</h4>
<p>what ackermann church question</p>

<a name="126018308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018308">Kevin Buzzard (May 02 2018 at 22:54)</a>:</h4>
<p>fill in the def above</p>

<a name="126018309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018309" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018309">Kenny Lau (May 02 2018 at 22:54)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> make ackermann using church</p>

<a name="126018311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018311" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018311">Kevin Buzzard (May 02 2018 at 22:55)</a>:</h4>
<p>so that it commutes with usual ack on nat</p>

<a name="126018324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018324" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018324">Kenny Lau (May 02 2018 at 22:55)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> or do you already know that one can't do it</p>

<a name="126018327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018327" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018327">Kevin Buzzard (May 02 2018 at 22:55)</a>:</h4>
<p>I don't have a clue</p>

<a name="126018329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018329" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018329">Mario Carneiro (May 02 2018 at 22:55)</a>:</h4>
<p>You can do it</p>

<a name="126018330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018330" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018330">Kevin Buzzard (May 02 2018 at 22:55)</a>:</h4>
<p>I just think this is really cool :-)</p>

<a name="126018334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018334" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018334">Kevin Buzzard (May 02 2018 at 22:55)</a>:</h4>
<p>How do you know you can do it?</p>

<a name="126018375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018375" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018375">Kenny Lau (May 02 2018 at 22:56)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I tried to do it and found myself requiring a more complex term in each iteration</p>

<a name="126018379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018379" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018379">Kenny Lau (May 02 2018 at 22:56)</a>:</h4>
<p>you can't iterate on (chN -&gt; chN) either</p>

<a name="126018387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018387" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018387">Kevin Buzzard (May 02 2018 at 22:57)</a>:</h4>
<p>When a computer scientist says "you can do it" do they mean "there exists some computer code which does that job" or "it's possible to construct, in polynomial time, some computer code which does that job"</p>

<a name="126018390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018390" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018390">Kenny Lau (May 02 2018 at 22:57)</a>:</h4>
<p>the former</p>

<a name="126018391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018391" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018391">Mario Carneiro (May 02 2018 at 22:57)</a>:</h4>
<p>I mean there is a solution in less than 50 chars</p>

<a name="126018393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018393">Kevin Buzzard (May 02 2018 at 22:57)</a>:</h4>
<p>:-)</p>

<a name="126018394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018394">Kenny Lau (May 02 2018 at 22:57)</a>:</h4>
<p>??????</p>

<a name="126018395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018395" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018395">Kenny Lau (May 02 2018 at 22:57)</a>:</h4>
<p>50 chars....</p>

<a name="126018396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018396">Mario Carneiro (May 02 2018 at 22:57)</a>:</h4>
<p>so just go through all the lambda terms, you'll get it</p>

<a name="126018398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018398">Kevin Buzzard (May 02 2018 at 22:57)</a>:</h4>
<p>that's not polynomial time though</p>

<a name="126018438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018438" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018438">Mario Carneiro (May 02 2018 at 22:58)</a>:</h4>
<p>heck no</p>

<a name="126018448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018448" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018448">Kevin Buzzard (May 02 2018 at 22:58)</a>:</h4>
<p>Just to be clear, we're talking about the church numeral type without the axiom.</p>

<a name="126018459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018459" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018459">Kevin Buzzard (May 02 2018 at 22:59)</a>:</h4>
<p><code>def chℕ := Π X : Type, (X → X) → X → X</code></p>

<a name="126018461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018461" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018461">Kenny Lau (May 02 2018 at 22:59)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> so what is wrong with my analysis?</p>

<a name="126018467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018467" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018467">Mario Carneiro (May 02 2018 at 22:59)</a>:</h4>
<p>Ah, I see what you mean now</p>

<a name="126018518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018518" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018518">Mario Carneiro (May 02 2018 at 23:00)</a>:</h4>
<p>In lambda calculus it's untyped so there is no problems</p>

<a name="126018519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018519" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018519">Kenny Lau (May 02 2018 at 23:00)</a>:</h4>
<p>exactly</p>

<a name="126018522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018522" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018522">Mario Carneiro (May 02 2018 at 23:00)</a>:</h4>
<p>but lean has universe issues</p>

<a name="126018523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018523" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018523">Kenny Lau (May 02 2018 at 23:00)</a>:</h4>
<p>we're in typed lamdba calculus</p>

<a name="126018525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018525" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018525">Kevin Buzzard (May 02 2018 at 23:00)</a>:</h4>
<p>as opposed to his rather more well-behaved friend <code>chℕfree := {m : Π X : Type, (X → X) → X → X // ∀ (X Y : Type) (a : X → Y) (f : X → X) (x : X),
  m (X → Y) (λ g, g ∘ f) a x = a (m X f x)}</code></p>

<a name="126018526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018526" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018526">Kevin Buzzard (May 02 2018 at 23:00)</a>:</h4>
<p>which comes with a free theorem</p>

<a name="126018530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018530" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018530">Mario Carneiro (May 02 2018 at 23:00)</a>:</h4>
<p>you can still do it but you need inductive types, I think</p>

<a name="126018540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018540" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018540">Kevin Buzzard (May 02 2018 at 23:01)</a>:</h4>
<p>oh wait I can do it by cheating!</p>

<a name="126018549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018549" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018549">Kevin Buzzard (May 02 2018 at 23:01)</a>:</h4>
<p>There's a projection from church nat to nat</p>

<a name="126018550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018550" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018550">Mario Carneiro (May 02 2018 at 23:01)</a>:</h4>
<p>exactly</p>

<a name="126018551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018551" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018551">Mario Carneiro (May 02 2018 at 23:01)</a>:</h4>
<p>so you do an induction on <code>nat -&gt; nat</code></p>

<a name="126018553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018553" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018553">Kenny Lau (May 02 2018 at 23:02)</a>:</h4>
<p>that's cheating</p>

<a name="126018567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018567" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018567">Kevin Buzzard (May 02 2018 at 23:02)</a>:</h4>
<p>so I can define an "incorrect" pow</p>

<a name="126018594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018594" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018594">Kevin Buzzard (May 02 2018 at 23:02)</a>:</h4>
<p>But this is cheating</p>

<a name="126018596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018596">Kevin Buzzard (May 02 2018 at 23:02)</a>:</h4>
<p>Is this what they do with pred?</p>

<a name="126018597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018597" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018597">Mario Carneiro (May 02 2018 at 23:02)</a>:</h4>
<p>like I said, you need inductive types</p>

<a name="126018598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018598" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018598">Kenny Lau (May 02 2018 at 23:02)</a>:</h4>
<p>that's like asking can I define pow by of_nat and to_nat</p>

<a name="126018600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018600" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018600">Kevin Buzzard (May 02 2018 at 23:02)</a>:</h4>
<p>If you were to project to nat and then project back with any of add, mul or pow</p>

<a name="126018602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018602" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018602">Mario Carneiro (May 02 2018 at 23:02)</a>:</h4>
<p>I think you are right that chN only allows primrec definitions directly</p>

<a name="126018605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018605" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018605">Kevin Buzzard (May 02 2018 at 23:02)</a>:</h4>
<p>you would get a different answer to the "pure" answers which exist</p>

<a name="126018627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018627" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018627">Kenny Lau (May 02 2018 at 23:03)</a>:</h4>
<blockquote>
<p>I mean there is a solution in less than 50 chars</p>
</blockquote>
<p>this wouldn't work. how are you going to check if a given lambda term produces ack?</p>

<a name="126018668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018668">Mario Carneiro (May 02 2018 at 23:04)</a>:</h4>
<p>solve the halting problem of course</p>

<a name="126018669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018669" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018669">Kevin Buzzard (May 02 2018 at 23:04)</a>:</h4>
<p>in the proof I'm envisaging</p>

<a name="126018675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018675" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018675">Kenny Lau (May 02 2018 at 23:04)</a>:</h4>
<p>you...</p>

<a name="126018677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018677" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018677">Kevin Buzzard (May 02 2018 at 23:04)</a>:</h4>
<p>:-)</p>

<a name="126018684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018684" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018684">Kevin Buzzard (May 02 2018 at 23:04)</a>:</h4>
<p>it's going to follow from some cunning unravelling isn't it?</p>

<a name="126018841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018841">Mario Carneiro (May 02 2018 at 23:09)</a>:</h4>
<p>wait, no I lied again, it is possible</p>

<a name="126018844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018844" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018844">Kenny Lau (May 02 2018 at 23:09)</a>:</h4>
<p>hmm</p>

<a name="126018846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018846" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018846">Mario Carneiro (May 02 2018 at 23:09)</a>:</h4>
<p>the motive is <code>X → X</code></p>

<a name="126018890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126018890" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126018890">Kenny Lau (May 02 2018 at 23:10)</a>:</h4>
<p>you need to store a function each time</p>

<a name="126019177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126019177" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126019177">Kevin Buzzard (May 02 2018 at 23:18)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">nat_of_chnat_of_nat</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">to_nat</span> <span class="o">(</span><span class="n">of_nat</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">sorry</span> <span class="c1">-- exercise</span>

<span class="c1">-- breakthough! I implemented my exciting new foo function on church numerals</span>
<span class="n">def</span> <span class="n">foo</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="n">def</span> <span class="n">choo</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">chℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">chℕ</span> <span class="o">:=</span> <span class="n">of_nat</span> <span class="o">(</span><span class="n">foo</span> <span class="o">(</span><span class="n">to_nat</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">to_nat</span> <span class="n">n</span><span class="o">))</span>

<span class="kn">theorem</span> <span class="n">amazing_compatibility</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span>
<span class="n">of_nat</span> <span class="o">(</span><span class="n">foo</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">choo</span> <span class="o">(</span><span class="n">of_nat</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">of_nat</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">unfold</span> <span class="n">choo</span><span class="o">,</span>
<span class="n">simp</span> <span class="o">[</span><span class="n">nat_of_chnat_of_nat</span><span class="o">]</span>
<span class="kn">end</span>
</pre></div>

<a name="126019267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126019267" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126019267">Kevin Buzzard (May 02 2018 at 23:20)</a>:</h4>
<p>That makes me slightly sad</p>

<a name="126019292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126019292" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126019292">Kevin Buzzard (May 02 2018 at 23:21)</a>:</h4>
<p>I spent some time today thinking about the Church Numeral which given X and f and x, returns x unless X = nat and f = succ and x = 0, in which case it returns 1</p>

<a name="126019341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126019341" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126019341">Kevin Buzzard (May 02 2018 at 23:22)</a>:</h4>
<p>it's quite a good way of reminding yourself exactly how far you can expect to push things</p>

<a name="126019415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126019415" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126019415">Kevin Buzzard (May 02 2018 at 23:24)</a>:</h4>
<p>e.g. I believe that funny numeral doesn't commute with + 1 and this can be easily checked via  very concrete calculation on nat</p>

<a name="126019425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126019425" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126019425">Kevin Buzzard (May 02 2018 at 23:24)</a>:</h4>
<p>so you know you shouldn't be trying to prove that add commutes</p>

<a name="126019428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126019428" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126019428">Kevin Buzzard (May 02 2018 at 23:25)</a>:</h4>
<p>I'm not sure what Mr Ackermann would have thought about evaluating his function there</p>

<a name="126019502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126019502" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126019502">Mario Carneiro (May 02 2018 at 23:26)</a>:</h4>
<p>By the way, you got the free statement a bit off:</p>
<div class="codehilite"><pre><span></span>def chℕfree := {m : Π X : Type, (X → X) → X → X //
  ∀ (X Y : Type) (a : X → Y) (f : X → X) (g : Y → Y),
  a ∘ f = g ∘ a → m Y g ∘ a = a ∘ m X f}
</pre></div>

<a name="126019642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126019642" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126019642">Kevin Buzzard (May 02 2018 at 23:30)</a>:</h4>
<p>Do you think that's the same?</p>

<a name="126019651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126019651" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126019651">Kevin Buzzard (May 02 2018 at 23:30)</a>:</h4>
<p>You are quantifying over g too</p>

<a name="126019661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126019661" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126019661">Kevin Buzzard (May 02 2018 at 23:31)</a>:</h4>
<p>It might be the same</p>

<a name="126019775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126019775" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126019775">Mario Carneiro (May 02 2018 at 23:34)</a>:</h4>
<p>It might be the same, but my version fits a more regular pattern</p>

<a name="126019789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126019789" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126019789">Mario Carneiro (May 02 2018 at 23:34)</a>:</h4>
<p>and it doesn't require evaluating <code>m</code> at a function type</p>

<a name="126019821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126019821" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126019821">Mario Carneiro (May 02 2018 at 23:35)</a>:</h4>
<p>It's basically saying that if <code>a : f -&gt; g</code> is a natural transformation, then so is <code>m</code></p>

<a name="126019871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126019871" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126019871">Mario Carneiro (May 02 2018 at 23:36)</a>:</h4>
<p>That's probably a poor reading, but something like that</p>

<a name="126019886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126019886" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126019886">Mario Carneiro (May 02 2018 at 23:38)</a>:</h4>
<p>What makes <code>chN</code> not quite as powerful as system T is that <code>chN</code> isn't a type in the internal sense</p>

<a name="126019930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126019930" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126019930">Mario Carneiro (May 02 2018 at 23:38)</a>:</h4>
<p>with impredicative quantification (like in system F) this would work</p>

<a name="126020008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126020008" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126020008">Mario Carneiro (May 02 2018 at 23:41)</a>:</h4>
<p>Godel's system T is simply typed lambda calculus with arrows and products, and a type <code>N</code> with <code>0 : N</code> and <code>S : N -&gt; N</code> and <code>iter_A : (A -&gt; A) -&gt; A -&gt; N -&gt; A</code></p>

<a name="126020060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126020060" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126020060">Mario Carneiro (May 02 2018 at 23:42)</a>:</h4>
<p>Then <code>N</code> there is just like lean's <code>ℕ</code>, but <code>chℕ</code> is not a substitute because it lives in <code>Type 1</code> so it is not a type in STLC</p>

<a name="126020250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126020250" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126020250">Kevin Buzzard (May 02 2018 at 23:49)</a>:</h4>
<p>This is really interesting</p>

<a name="126020253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126020253" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126020253">Kevin Buzzard (May 02 2018 at 23:49)</a>:</h4>
<p>I identified nat as the universal object</p>

<a name="126020256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126020256" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126020256">Kevin Buzzard (May 02 2018 at 23:49)</a>:</h4>
<p>and just wrote down some kind of standard maths functory thing about evaluating the universal object at a map</p>

<a name="126020304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126020304" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126020304">Kevin Buzzard (May 02 2018 at 23:50)</a>:</h4>
<p>but, like induction, you might think about universal objects in a different way to us</p>

<a name="126020312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126020312" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126020312">Kevin Buzzard (May 02 2018 at 23:50)</a>:</h4>
<p>I think I see what I'm missing</p>

<a name="126020322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126020322" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126020322">Kevin Buzzard (May 02 2018 at 23:51)</a>:</h4>
<p>In my world, a would be a map in the category</p>

<a name="126020323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126020323" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126020323">Kevin Buzzard (May 02 2018 at 23:51)</a>:</h4>
<p>and I would be assuming m was a functor</p>

<a name="126020325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126020325" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126020325">Kevin Buzzard (May 02 2018 at 23:51)</a>:</h4>
<p>and trying to represent it</p>

<a name="126020332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126020332" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126020332">Kevin Buzzard (May 02 2018 at 23:51)</a>:</h4>
<p>but m being a functor is an extra condition which I have forgotten about because in the examples I know it is always there</p>

<a name="126022755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126022755" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126022755">Kevin Buzzard (May 03 2018 at 01:12)</a>:</h4>
<p><code>example : equiv ℕ chℕfree := ⟨to_chfr,of_chfr,inv₁,inv₂⟩ </code></p>

<a name="126022901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126022901" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126022901">Kevin Buzzard (May 03 2018 at 01:17)</a>:</h4>
<p>Mario's definition definitely works. I wonder if mine (which is implied by Mario's) is too weak.</p>

<a name="126023071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023071">Kevin Buzzard (May 03 2018 at 01:23)</a>:</h4>
<p>So I understand the category theory language much better than this DTT stuff.</p>

<a name="126023076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023076" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023076">Kevin Buzzard (May 03 2018 at 01:23)</a>:</h4>
<p>I want to say that Type is a category.</p>

<a name="126023077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023077" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023077">Mario Carneiro (May 03 2018 at 01:23)</a>:</h4>
<p>It is</p>

<a name="126023078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023078" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023078">Kevin Buzzard (May 03 2018 at 01:23)</a>:</h4>
<p>Then m wants to be a functor from Type to Type</p>

<a name="126023080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023080" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023080">Kevin Buzzard (May 03 2018 at 01:23)</a>:</h4>
<p>but Church's naive definition just demands a map on objects</p>

<a name="126023123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023123" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023123">Mario Carneiro (May 03 2018 at 01:24)</a>:</h4>
<p>In languages where the naive definition works, that's because of parametric polymorphism</p>

<a name="126023124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023124" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023124">Mario Carneiro (May 03 2018 at 01:24)</a>:</h4>
<p>i.e. everything is functorial</p>

<a name="126023125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023125" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023125">Kevin Buzzard (May 03 2018 at 01:24)</a>:</h4>
<p>I don't know what that means</p>

<a name="126023127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023127" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023127">Mario Carneiro (May 03 2018 at 01:24)</a>:</h4>
<p>HoTT is a lot like this</p>

<a name="126023128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023128" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023128">Kevin Buzzard (May 03 2018 at 01:24)</a>:</h4>
<p>Oh I see</p>

<a name="126023130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023130" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023130">Mario Carneiro (May 03 2018 at 01:24)</a>:</h4>
<p>the language is crafted such that you can't write badly behaved terms at all</p>

<a name="126023138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023138" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023138">Mario Carneiro (May 03 2018 at 01:25)</a>:</h4>
<p>everything is "fibrant"</p>

<a name="126023139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023139" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023139">Mario Carneiro (May 03 2018 at 01:25)</a>:</h4>
<p>whatever that means</p>

<a name="126023140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023140" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023140">Kevin Buzzard (May 03 2018 at 01:25)</a>:</h4>
<p>Let me modify Type</p>

<a name="126023142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023142" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023142">Kevin Buzzard (May 03 2018 at 01:25)</a>:</h4>
<p>so that its objects are still terms whose type is Type</p>

<a name="126023143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023143" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023143">Mario Carneiro (May 03 2018 at 01:25)</a>:</h4>
<p>but that's basically why univalence works</p>

<a name="126023144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023144" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023144">Kevin Buzzard (May 03 2018 at 01:25)</a>:</h4>
<p>but the morphisms are equivs</p>

<a name="126023146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023146" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023146">Kevin Buzzard (May 03 2018 at 01:25)</a>:</h4>
<p>Now m is a map on objects</p>

<a name="126023186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023186" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023186">Kevin Buzzard (May 03 2018 at 01:26)</a>:</h4>
<p>and the data of the equiv is exactly what m needs to be extendible to a map on morphisms I suspect</p>

<a name="126023187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023187" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023187">Mario Carneiro (May 03 2018 at 01:26)</a>:</h4>
<p>Check this out: <a href="http://www.cs.bham.ac.uk/~udr/papers/logical-relations-and-parametricity.pdf" target="_blank" title="http://www.cs.bham.ac.uk/~udr/papers/logical-relations-and-parametricity.pdf">http://www.cs.bham.ac.uk/~udr/papers/logical-relations-and-parametricity.pdf</a></p>

<a name="126023193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023193" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023193">Kevin Buzzard (May 03 2018 at 01:27)</a>:</h4>
<p>In fact I guess it's exactly when X and Y biject that I would even dream of identifying <code>(X-&gt;X) -&gt; X -&gt; X</code> and the analogous term for <code>Y</code></p>

<a name="126023194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023194" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023194">Mario Carneiro (May 03 2018 at 01:27)</a>:</h4>
<p>It argues that naturality is the wrong idea and should be replaced by parametricity</p>

<a name="126023196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023196" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023196">Mario Carneiro (May 03 2018 at 01:27)</a>:</h4>
<p>I need to finish digesting it though, so don't quote me on that</p>

<a name="126023241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023241" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023241">Mario Carneiro (May 03 2018 at 01:28)</a>:</h4>
<p>Notice though that the condition I gave does not require that a is an equiv</p>

<a name="126023244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023244" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023244">Mario Carneiro (May 03 2018 at 01:28)</a>:</h4>
<p>I think that's going to be true in general</p>

<a name="126023245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023245" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023245">Mario Carneiro (May 03 2018 at 01:28)</a>:</h4>
<p>It really is a functoriality condition</p>

<a name="126023249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023249" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023249">Kevin Buzzard (May 03 2018 at 01:29)</a>:</h4>
<p>You have to be careful</p>

<a name="126023254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023254" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023254">Kevin Buzzard (May 03 2018 at 01:29)</a>:</h4>
<p>Given a map A to B</p>

<a name="126023255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023255" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023255">Mario Carneiro (May 03 2018 at 01:29)</a>:</h4>
<p>it's just this weird higher order functoriality thing</p>

<a name="126023256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023256" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023256">Mario Carneiro (May 03 2018 at 01:29)</a>:</h4>
<p>It seems like logical relations generate the condition well</p>

<a name="126023258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023258" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023258">Kevin Buzzard (May 03 2018 at 01:29)</a>:</h4>
<p>You don't get a map (A to A) to (B to B)</p>

<a name="126023300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023300" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023300">Kevin Buzzard (May 03 2018 at 01:30)</a>:</h4>
<p>So I don't know what you mean when you say functoriality is true "in general"</p>

<a name="126023301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023301" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023301">Kevin Buzzard (May 03 2018 at 01:30)</a>:</h4>
<p>I can only see a functor in the equiv category</p>

<a name="126023308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023308">Kevin Buzzard (May 03 2018 at 01:31)</a>:</h4>
<p>Maybe we mean different things by functorially</p>

<a name="126023309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023309" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023309">Mario Carneiro (May 03 2018 at 01:31)</a>:</h4>
<p>I mean that if you write down some more complicated thing than chN I can write down a more complicated parametricity constraint for it</p>

<a name="126023310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023310" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023310">Mario Carneiro (May 03 2018 at 01:31)</a>:</h4>
<p>and I can always do this</p>

<a name="126023311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023311" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023311">Mario Carneiro (May 03 2018 at 01:31)</a>:</h4>
<p>and it will involve a function a : X -&gt; Y</p>

<a name="126023313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023313" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023313">Mario Carneiro (May 03 2018 at 01:32)</a>:</h4>
<p>and that function will usually not be required to be an equiv</p>

<a name="126023363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023363" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023363">Kevin Buzzard (May 03 2018 at 01:33)</a>:</h4>
<p>I can't make that concept into a functor</p>

<a name="126023404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023404" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023404">Kevin Buzzard (May 03 2018 at 01:34)</a>:</h4>
<p>For me, F (X -&gt; Y) is a map F X -&gt; F Y</p>

<a name="126023412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023412" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023412">Mario Carneiro (May 03 2018 at 01:35)</a>:</h4>
<p>Here's the setup: we define a collection of logical relations [R] : X -&gt; Y -&gt; Prop. The important one is for arrows: <code>[R -&gt; S] : (X -&gt; X') -&gt; (Y -&gt; Y') -&gt; Prop</code> is defined by</p>
<div class="codehilite"><pre><span></span>f [R -&gt; S] g &lt;-&gt; \forall x y, x [R] y -&gt; f x [S] g y
</pre></div>

<a name="126023452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023452" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023452">Mario Carneiro (May 03 2018 at 01:36)</a>:</h4>
<p>At the base types we define <code>[R] : X -&gt; Y -&gt; Prop</code> by <code>x [R] y &lt;-&gt; a x = y</code></p>

<a name="126023454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023454" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023454">Mario Carneiro (May 03 2018 at 01:36)</a>:</h4>
<p>where <code>a : X -&gt; Y</code> is our fixed morphism to commute over</p>

<a name="126023460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023460" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023460">Mario Carneiro (May 03 2018 at 01:37)</a>:</h4>
<p>Applying this definition to <code>[(R -&gt; R) -&gt; R -&gt; R]</code> gives exactly the condition I wrote down</p>

<a name="126023463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023463" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023463">Kevin Buzzard (May 03 2018 at 01:37)</a>:</h4>
<p>Oh so you're going to tell me that the function I'm looking for is actually a relation</p>

<a name="126023623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023623" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023623">Mario Carneiro (May 03 2018 at 01:42)</a>:</h4>
<p>And we can go further to even get the <code>a</code> part: we can define <code>[∀ X, R] : (∀ X:Type, P X) -&gt; (∀ X:Type, Q X) -&gt; Prop</code> by</p>
<div class="codehilite"><pre><span></span>F [∀ X, R] G &lt;-&gt; ∀ X Y : Type, ∀ (a : X -&gt; Y), F X [R] G Y
</pre></div>


<p>(here if <code>X</code> appears in <code>R</code> it's referring to the relation for the function <code>a</code>)</p>

<a name="126023635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023635" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023635">Mario Carneiro (May 03 2018 at 01:43)</a>:</h4>
<p>Finally, a term is parametrically polymorphic if it is related to itself at its type, i.e. <code>m [∀ X, (X -&gt; X) -&gt; X -&gt; X] m</code> for the case of <code>chN</code></p>

<a name="126023674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126023674" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126023674">Mario Carneiro (May 03 2018 at 01:44)</a>:</h4>
<p>This is how logical relations work, and how the theorems for free statements are derived</p>

<a name="126050623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Church%20Numeral%20Puzzles/near/126050623" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10127ChurchNumeralPuzzles.html#126050623">Kevin Buzzard (May 03 2018 at 15:34)</a>:</h4>
<blockquote>
<p>Check this out: <a href="http://www.cs.bham.ac.uk/~udr/papers/logical-relations-and-parametricity.pdf" target="_blank" title="http://www.cs.bham.ac.uk/~udr/papers/logical-relations-and-parametricity.pdf">http://www.cs.bham.ac.uk/~udr/papers/logical-relations-and-parametricity.pdf</a></p>
</blockquote>
<p>That paper</p>


{% endraw %}
