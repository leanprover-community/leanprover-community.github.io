---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/12844Writingreadableunclutteredgrouptheory.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html">Writing readable uncluttered group theory</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="125808670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808670" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808670">Kevin Buzzard (Apr 28 2018 at 05:39)</a>:</h4>
<p>I noticed that the definition of a group in Lean was one more axiom than it could be</p>

<a name="125808710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808710" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808710">Kevin Buzzard (Apr 28 2018 at 05:40)</a>:</h4>
<p>you can prove <code>mul_one</code> from the other axioms</p>

<a name="125808713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808713">Kevin Buzzard (Apr 28 2018 at 05:40)</a>:</h4>
<p>This may well have been talked about before</p>

<a name="125808714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808714" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808714">Kevin Buzzard (Apr 28 2018 at 05:40)</a>:</h4>
<p>But I thought I'd write a blog post on this</p>

<a name="125808715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808715" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808715">Kevin Buzzard (Apr 28 2018 at 05:40)</a>:</h4>
<p>and I wanted to talk about the proof of <code>mul_one</code> (which goes via <code>mul_left_cancel</code>)</p>

<a name="125808719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808719" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808719">Kevin Buzzard (Apr 28 2018 at 05:41)</a>:</h4>
<p>for Lean-groups-without-<code>mul_one</code></p>

<a name="125808721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808721" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808721">Kevin Buzzard (Apr 28 2018 at 05:41)</a>:</h4>
<p>But I could not make the arguments look beautiful</p>

<a name="125808723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808723" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808723">Kevin Buzzard (Apr 28 2018 at 05:41)</a>:</h4>
<p>This is kind of OK</p>

<a name="125808724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808724" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808724">Kevin Buzzard (Apr 28 2018 at 05:42)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">gripe</span><span class="bp">.</span><span class="n">mul_left_cancel</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">has_mul</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">has_one</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">has_inv</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">gripe</span> <span class="n">G</span><span class="o">]</span>
<span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">Habac</span><span class="o">,</span>
  <span class="n">exact</span> <span class="k">calc</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:</span> <span class="o">(</span><span class="n">one_mul</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">gripe</span><span class="bp">.</span><span class="n">mul_left_inv</span> <span class="n">a</span><span class="o">]</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">mul_assoc</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">Habac</span>
<span class="c1">-- ... = c : by simp only [mul_assoc,one_mul,mul_left_inv] -- fails</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:</span> <span class="o">(</span><span class="n">gripe</span><span class="bp">.</span><span class="n">mul_assoc</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">gripe</span><span class="bp">.</span><span class="n">mul_left_inv</span> <span class="n">a</span><span class="o">]</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:</span> <span class="n">one_mul</span> <span class="bp">_</span>
<span class="kn">end</span>
</pre></div>

<a name="125808776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808776" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808776">Kevin Buzzard (Apr 28 2018 at 05:42)</a>:</h4>
<p>although all this <code>has_mul</code> stuff is both really cluttering things up and not actually telling us the one useful thing about it, which is that it is a map alpha -&gt; alpha -&gt; alpha</p>

<a name="125808784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808784">Kevin Buzzard (Apr 28 2018 at 05:43)</a>:</h4>
<p>I made a type for that</p>

<a name="125808785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808785" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808785">Kevin Buzzard (Apr 28 2018 at 05:43)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">gripe</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">has_mul</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">has_one</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">has_inv</span> <span class="n">G</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">mul_assoc</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">))</span>
<span class="o">(</span><span class="n">one_mul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">mul_left_inv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>

<a name="125808828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808828" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808828">Kevin Buzzard (Apr 28 2018 at 05:44)</a>:</h4>
<p>But got a bit sick about still having to say we have a <code>has_mul</code>. On the other hand I really want the notation.</p>

<a name="125808836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808836" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808836">Reid Barton (Apr 28 2018 at 05:45)</a>:</h4>
<p>can you use <code>extends</code> instead of those extra parameters to the class? I've never used it myself but I see it in the algebraic classes</p>

<a name="125808837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808837" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808837">Kevin Buzzard (Apr 28 2018 at 05:45)</a>:</h4>
<p>Other complains about that calc proof is that I need to give too many hint, I seem to have to mention the type's name (gripe) randomly and I can only sometimes get away with <code>_</code>s, and why do I even have to put them at all?</p>

<a name="125808843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808843">Kevin Buzzard (Apr 28 2018 at 05:45)</a>:</h4>
<p>I tried without the structure</p>

<a name="125808845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808845">Kenny Lau (Apr 28 2018 at 05:45)</a>:</h4>
<blockquote>
<p>This may well have been talked about before</p>
</blockquote>
<p><a href="https://gitter.im/leanprover_public/Lobby?at=59fd723d976e63937e268f50" target="_blank" title="https://gitter.im/leanprover_public/Lobby?at=59fd723d976e63937e268f50">https://gitter.im/leanprover_public/Lobby?at=59fd723d976e63937e268f50</a></p>

<a name="125808888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808888" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808888">Kevin Buzzard (Apr 28 2018 at 05:46)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">mul_left_cancel&#39;</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">has_mul</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">has_one</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">has_inv</span> <span class="n">G</span><span class="o">]</span>
<span class="o">(</span><span class="n">mul_assoc</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">))</span>
<span class="o">(</span><span class="n">one_mul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">mul_left_inv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span>
<span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">Habac</span><span class="o">,</span>
  <span class="n">exact</span> <span class="k">calc</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:</span> <span class="o">(</span><span class="n">one_mul</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_left_inv</span><span class="o">]</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">mul_assoc</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="c1">-- why not just mul_assoc?</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">Habac</span>
<span class="c1">-- ... = c : by simp only [mul_assoc,one_mul,mul_left_inv] -- fails</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:</span> <span class="o">(</span><span class="n">mul_assoc</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_left_inv</span><span class="o">]</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:</span> <span class="n">one_mul</span> <span class="bp">_</span> <span class="c1">-- why the _ ?</span>
<span class="kn">end</span>
</pre></div>

<a name="125808938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808938" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808938">Kevin Buzzard (Apr 28 2018 at 05:48)</a>:</h4>
<p>and that seemed to go better, but then</p>

<a name="125808940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808940" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808940">Kevin Buzzard (Apr 28 2018 at 05:48)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">mul_one&#39;</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">has_mul</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">has_one</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">has_inv</span> <span class="n">G</span><span class="o">]</span>
<span class="o">(</span><span class="n">mul_assoc</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">))</span>
<span class="o">(</span><span class="n">one_mul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">mul_left_inv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span>
<span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">intro</span> <span class="n">a</span><span class="o">,</span>
 <span class="n">apply</span> <span class="o">(</span><span class="n">mul_left_cancel&#39;</span> <span class="n">mul_assoc</span> <span class="n">one_mul</span> <span class="n">mul_left_inv</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">),</span> <span class="c1">-- aargh</span>
 <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">mul_assoc</span><span class="o">,</span><span class="n">mul_left_inv</span><span class="o">,</span><span class="n">one_mul</span><span class="o">],</span>
<span class="kn">end</span>
</pre></div>

<a name="125808942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808942" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808942">Kenny Lau (Apr 28 2018 at 05:48)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> edit &gt; change title</p>

<a name="125808943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808943" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808943">Reid Barton (Apr 28 2018 at 05:48)</a>:</h4>
<p>Oh, I guess you are complaining about <code>has_mul</code> being opaque to the reader wherever it appears, not that you had to write it twice?</p>

<a name="125808948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808948" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808948">Kevin Buzzard (Apr 28 2018 at 05:49)</a>:</h4>
<p>I couldn't apply the theorem I proved without carrying around all the axioms.</p>

<a name="125808949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808949" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808949">Kenny Lau (Apr 28 2018 at 05:49)</a>:</h4>
<p>wrong thread</p>

<a name="125808952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808952" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808952">Kevin Buzzard (Apr 28 2018 at 05:49)</a>:</h4>
<p>I want to write a blog post which looks good and works in Lean and proves clearly that one of the axioms of a group follows from the others</p>

<a name="125808953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808953">Kenny Lau (Apr 28 2018 at 05:49)</a>:</h4>
<p>god</p>

<a name="125808991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808991">Kevin Buzzard (Apr 28 2018 at 05:50)</a>:</h4>
<p>but I really want the kids to understand that they can also do some of their group theory example sheets in Lean</p>

<a name="125808995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808995" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808995">Kenny Lau (Apr 28 2018 at 05:50)</a>:</h4>
<p>whatever</p>

<a name="125808998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808998" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808998">Reid Barton (Apr 28 2018 at 05:50)</a>:</h4>
<p>How do you feel about using <code>variables</code> instead?</p>

<a name="125808999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125808999" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125808999">Kevin Buzzard (Apr 28 2018 at 05:50)</a>:</h4>
<p>can I move this?</p>

<a name="125809007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125809007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125809007">Kenny Lau (Apr 28 2018 at 05:51)</a>:</h4>
<p><span class="user-mention" data-user-id="110524">@Scott Morrison</span> sorry, had to move your messages as well; could you move your messages back to "notations in category theory"?</p>

<a name="125809008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125809008" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125809008">Kevin Buzzard (Apr 28 2018 at 05:51)</a>:</h4>
<p>Sorry</p>

<a name="125809010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125809010" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125809010">Kevin Buzzard (Apr 28 2018 at 05:52)</a>:</h4>
<p>The stupidity of all the has_one has_mul stuff</p>

<a name="125809049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125809049" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125809049">Kevin Buzzard (Apr 28 2018 at 05:52)</a>:</h4>
<p>is that these typeclasses have notation attached to them</p>

<a name="125809050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125809050" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125809050">Kevin Buzzard (Apr 28 2018 at 05:52)</a>:</h4>
<p>and you want to use the notation</p>

<a name="125809051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125809051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125809051">Reid Barton (Apr 28 2018 at 05:52)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">variable</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span>
<span class="kn">variable</span> <span class="o">(</span><span class="n">mul</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">G</span><span class="o">)</span>
<span class="kn">variable</span> <span class="o">(</span><span class="n">one</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span>
<span class="kn">variable</span> <span class="o">(</span><span class="n">inv</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">G</span><span class="o">)</span>

<span class="n">local</span> <span class="kn">notation</span> <span class="n">a</span> <span class="bp">`*`</span> <span class="n">b</span> <span class="o">:=</span> <span class="n">mul</span> <span class="n">a</span> <span class="n">b</span>
<span class="n">local</span> <span class="kn">notation</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">one</span>
<span class="n">local</span> <span class="kn">notation</span> <span class="n">a</span> <span class="bp">`⁻¹`</span> <span class="o">:=</span> <span class="n">inv</span> <span class="n">a</span>

<span class="kn">variable</span> <span class="o">(</span><span class="n">mul_assoc</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">))</span>
<span class="kn">variable</span> <span class="o">(</span><span class="n">one_mul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="kn">variable</span> <span class="o">(</span><span class="n">mul_left_inv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span>

<span class="kn">lemma</span> <span class="n">mul_left_cancel&#39;</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span>
</pre></div>

<a name="125809053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125809053" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125809053">Kevin Buzzard (Apr 28 2018 at 05:52)</a>:</h4>
<p>Maybe instead of local notation I can use instances</p>

<a name="125809250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125809250" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125809250">Reid Barton (Apr 28 2018 at 06:00)</a>:</h4>
<p>oh, I forgot <code>variables</code> don't get along well with tactics</p>

<a name="125823314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125823314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125823314">Kevin Buzzard (Apr 28 2018 at 15:36)</a>:</h4>
<p>I am just going to bite the bullet and implement it in 5 different ways and see which one is best</p>

<a name="125823316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125823316" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125823316">Kevin Buzzard (Apr 28 2018 at 15:37)</a>:</h4>
<p><code>class has_group_notation (G : Type) extends has_mul G, has_one G, has_inv G</code></p>

<a name="125823322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125823322" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125823322">Kevin Buzzard (Apr 28 2018 at 15:37)</a>:</h4>
<p>Does that class exist <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> ?</p>

<a name="125823328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125823328" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125823328">Kevin Buzzard (Apr 28 2018 at 15:37)</a>:</h4>
<p>It seems to come with free and painless type class inference</p>

<a name="125823374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125823374" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125823374">Kevin Buzzard (Apr 28 2018 at 15:39)</a>:</h4>
<p>I had not appreciated how that barrage of classes in <code>core.lean</code> was actually just a barrage of notation. Each typeclass corresponds to precisely one piece of notation. I had not realised this before!</p>

<a name="125823419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125823419" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125823419">Kevin Buzzard (Apr 28 2018 at 15:40)</a>:</h4>
<p>I don't really understand notation and don't use any in my schemes work.</p>

<a name="125823422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125823422" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125823422">Kevin Buzzard (Apr 28 2018 at 15:40)</a>:</h4>
<p>actually I think I suddenly understand it a whole lot better</p>

<a name="125823427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125823427" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125823427">Kevin Buzzard (Apr 28 2018 at 15:41)</a>:</h4>
<p>my class corresponds to a finite set of notations.</p>

<a name="125823661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125823661" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125823661">Kevin Buzzard (Apr 28 2018 at 15:50)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">group&#39;</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">has_group_notation</span> <span class="n">G</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">mul_assoc</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">))</span>
<span class="o">(</span><span class="n">one_mul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">mul_left_inv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>

<a name="125823664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125823664" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125823664">Kevin Buzzard (Apr 28 2018 at 15:50)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span></p>

<a name="125823665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125823665" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125823665">Kevin Buzzard (Apr 28 2018 at 15:50)</a>:</h4>
<p>That's the way to get rid of all that continually carrying around <code>[has_add]</code></p>

<a name="125823670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125823670" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125823670">Kevin Buzzard (Apr 28 2018 at 15:51)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">group&#39;</span><span class="bp">.</span><span class="n">mul_left_cancel</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">group&#39;</span> <span class="n">G</span><span class="o">]</span>
<span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="125823671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125823671" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125823671">Kevin Buzzard (Apr 28 2018 at 15:51)</a>:</h4>
<p>This thread is about making the proof that one of the axioms of a group as defined by Lean follows from all of the others</p>

<a name="125823711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125823711" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125823711">Kevin Buzzard (Apr 28 2018 at 15:52)</a>:</h4>
<p>look as nice and uncluttered as possible</p>

<a name="125823727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125823727" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125823727">Kevin Buzzard (Apr 28 2018 at 15:53)</a>:</h4>
<p>The strat is : first prove <code>mul_left_cancel</code> (without using <code>mul_one</code> of course), and then deduce <code>mul_one</code>. I know there are other strategies but that's the strategy I'd like to showcase in Lean</p>

<a name="125823728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125823728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125823728">Kevin Buzzard (Apr 28 2018 at 15:53)</a>:</h4>
<p>so I can show the undergraduates one way of revising for their upcoming group theory exam</p>

<a name="125823743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125823743" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125823743">Kevin Buzzard (Apr 28 2018 at 15:54)</a>:</h4>
<p>I want to show them that using Lean to do abstract basic chase stuff around stuff in group theory is really easy in Lean</p>

<a name="125823771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125823771" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125823771">Kevin Buzzard (Apr 28 2018 at 15:54)</a>:</h4>
<p>I'll blog about it but I need to get it as nice looking as possible first</p>

<a name="125824936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125824936" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125824936">Kevin Buzzard (Apr 28 2018 at 16:42)</a>:</h4>
<p><a href="https://gist.github.com/kbuzzard/2adf2b42a9ea23dabc2eb26a1a4b20fb" target="_blank" title="https://gist.github.com/kbuzzard/2adf2b42a9ea23dabc2eb26a1a4b20fb">https://gist.github.com/kbuzzard/2adf2b42a9ea23dabc2eb26a1a4b20fb</a></p>

<a name="125824937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125824937" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125824937">Kevin Buzzard (Apr 28 2018 at 16:42)</a>:</h4>
<p>My efforts using classes</p>

<a name="125824938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125824938" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125824938">Kevin Buzzard (Apr 28 2018 at 16:43)</a>:</h4>
<p>I had to keep writing the class name</p>

<a name="125824943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125824943" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125824943">Kevin Buzzard (Apr 28 2018 at 16:43)</a>:</h4>
<p>and the calc proof needed a lot of blanks</p>

<a name="125824944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125824944" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125824944">Kevin Buzzard (Apr 28 2018 at 16:43)</a>:</h4>
<p>How could this be improved?</p>

<a name="125824984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125824984" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125824984">Kevin Buzzard (Apr 28 2018 at 16:44)</a>:</h4>
<p>I am going to try other ways of setting this up to see pros and cons</p>

<a name="125824987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125824987" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125824987">Kenny Lau (Apr 28 2018 at 16:44)</a>:</h4>
<p>Change</p>
<div class="codehilite"><pre><span></span><span class="o">(</span><span class="n">mul_assoc</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">))</span>
</pre></div>


<p>to</p>
<div class="codehilite"><pre><span></span><span class="o">(</span><span class="n">mul_assoc</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">},</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">))</span>
</pre></div>

<a name="125825665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825665" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825665">Kevin Buzzard (Apr 28 2018 at 17:12)</a>:</h4>
<p>Do you think that's right?</p>

<a name="125825667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825667" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825667">Kevin Buzzard (Apr 28 2018 at 17:12)</a>:</h4>
<p>I changed it for the constants example</p>

<a name="125825668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825668">Kevin Buzzard (Apr 28 2018 at 17:12)</a>:</h4>
<p>and my tactic proof got worse</p>

<a name="125825669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825669" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825669">Kenny Lau (Apr 28 2018 at 17:13)</a>:</h4>
<p>if you change it then you don't need to put underscores</p>

<a name="125825674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825674" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825674">Kevin Buzzard (Apr 28 2018 at 17:13)</a>:</h4>
<p>I'll show you you're wrong</p>

<a name="125825716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825716" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825716">Kevin Buzzard (Apr 28 2018 at 17:14)</a>:</h4>
<p><a href="https://github.com/kbuzzard/xena/blob/master/canonical_isomorphism/group_axioms_constants.lean" target="_blank" title="https://github.com/kbuzzard/xena/blob/master/canonical_isomorphism/group_axioms_constants.lean">https://github.com/kbuzzard/xena/blob/master/canonical_isomorphism/group_axioms_constants.lean</a></p>

<a name="125825718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825718" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825718">Kevin Buzzard (Apr 28 2018 at 17:14)</a>:</h4>
<p>But maybe you can fix it :-)</p>

<a name="125825720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825720" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825720">Kevin Buzzard (Apr 28 2018 at 17:14)</a>:</h4>
<p>there is a point in tactic mode where I needed underscores :-(</p>

<a name="125825723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825723" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825723">Kenny Lau (Apr 28 2018 at 17:15)</a>:</h4>
<p>where?</p>

<a name="125825729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825729" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825729">Kevin Buzzard (Apr 28 2018 at 17:15)</a>:</h4>
<p><a href="https://github.com/kbuzzard/xena/blob/master/canonical_isomorphism/group_axioms_class.lean" target="_blank" title="https://github.com/kbuzzard/xena/blob/master/canonical_isomorphism/group_axioms_class.lean">https://github.com/kbuzzard/xena/blob/master/canonical_isomorphism/group_axioms_class.lean</a></p>

<a name="125825730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825730" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825730">Kevin Buzzard (Apr 28 2018 at 17:15)</a>:</h4>
<p>not there</p>

<a name="125825732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825732" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825732">Kenny Lau (Apr 28 2018 at 17:15)</a>:</h4>
<p>so where am I wrong?</p>

<a name="125825733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825733" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825733">Kevin Buzzard (Apr 28 2018 at 17:15)</a>:</h4>
<p><a href="https://github.com/kbuzzard/xena/blob/48ce83d8bc9782a08ee852d126e784f696086846/canonical_isomorphism/group_axioms_constants.lean#L48" target="_blank" title="https://github.com/kbuzzard/xena/blob/48ce83d8bc9782a08ee852d126e784f696086846/canonical_isomorphism/group_axioms_constants.lean#L48">https://github.com/kbuzzard/xena/blob/48ce83d8bc9782a08ee852d126e784f696086846/canonical_isomorphism/group_axioms_constants.lean#L48</a></p>

<a name="125825734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825734" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825734">Kevin Buzzard (Apr 28 2018 at 17:15)</a>:</h4>
<p>there</p>

<a name="125825775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825775" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825775">Reid Barton (Apr 28 2018 at 17:16)</a>:</h4>
<p>In the calc proof, if you just begin every justification with <code>by rw</code>, you can make it quite uniform (at least in this case)</p>
<div class="codehilite"><pre><span></span>  <span class="n">exact</span> <span class="k">calc</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span>         <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">group&#39;</span><span class="bp">.</span><span class="n">one_mul</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">group&#39;</span><span class="bp">.</span><span class="n">mul_left_inv</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">group&#39;</span><span class="bp">.</span><span class="n">mul_assoc</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">Habac</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">group&#39;</span><span class="bp">.</span><span class="n">mul_assoc</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">c</span>         <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">group&#39;</span><span class="bp">.</span><span class="n">mul_left_inv</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="n">c</span>             <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">group&#39;</span><span class="bp">.</span><span class="n">one_mul</span>
</pre></div>

<a name="125825776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825776" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825776">Kenny Lau (Apr 28 2018 at 17:16)</a>:</h4>
<p>Change</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">mul_left_cancel</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">},</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span>
</pre></div>


<p>to</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">mul_left_cancel</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="o">{</span><span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">},</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span>
</pre></div>

<a name="125825781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825781" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825781">Kevin Buzzard (Apr 28 2018 at 17:17)</a>:</h4>
<p>do you feel that this change is actually justified rather than it being an attempt to sort out a problem?</p>

<a name="125825782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825782" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825782">Kenny Lau (Apr 28 2018 at 17:17)</a>:</h4>
<p>yes, because <code>a</code> could not be infered from the final type <code>b = c</code></p>

<a name="125825783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825783" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825783">Kevin Buzzard (Apr 28 2018 at 17:17)</a>:</h4>
<p>yes</p>

<a name="125825784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825784">Kevin Buzzard (Apr 28 2018 at 17:17)</a>:</h4>
<p>I wondered if that was a reasonable justification for the change</p>

<a name="125825823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825823" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825823">Chris Hughes (Apr 28 2018 at 17:18)</a>:</h4>
<p>It can be inferred from the hypothesis though.</p>

<a name="125825824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825824">Kevin Buzzard (Apr 28 2018 at 17:18)</a>:</h4>
<p>exactly</p>

<a name="125825825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825825" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825825">Kenny Lau (Apr 28 2018 at 17:18)</a>:</h4>
<p>well if you don't want to change it you can state the hypothesis explicitly using <code>have</code></p>

<a name="125825826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825826" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825826">Reid Barton (Apr 28 2018 at 17:18)</a>:</h4>
<blockquote>
<p>... = (a⁻¹ * a) * b : by rw [mul_left_inv] -- why does that line even work? I believe it should fail. Is it a bug?</p>
</blockquote>
<p>I was puzzled by this too up until quite recently. The reason it works is that <code>rw</code> does not rewrite the left hand side to the right hand side as one might think. Rather, it rewrites the desired equality <code>1 * b = (a⁻¹ * a) * b</code> to whatever it becomes after the rewrite, and that rewrite might occur on either side.</p>

<a name="125825827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825827" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825827">Kevin Buzzard (Apr 28 2018 at 17:18)</a>:</h4>
<p>so Kenny based on your logic what are the forms of the other axioms that I should be using?</p>

<a name="125825833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825833">Reid Barton (Apr 28 2018 at 17:19)</a>:</h4>
<p>Then because the rewritten goal is of the form <code>a = a</code>, it gets solved by <code>rfl</code> automatically</p>

<a name="125825834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825834" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825834">Kenny Lau (Apr 28 2018 at 17:19)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> maybe don't make <code>a</code> explicit afterall, lol</p>

<a name="125825835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825835" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825835">Kevin Buzzard (Apr 28 2018 at 17:19)</a>:</h4>
<p>:-)</p>

<a name="125825887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825887" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825887">Kevin Buzzard (Apr 28 2018 at 17:21)</a>:</h4>
<p>I don't quite know what I am looking for here. I guess what is going on is that different conventions produce different results which may or may not have slight annoyances</p>

<a name="125825888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825888" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825888">Reid Barton (Apr 28 2018 at 17:21)</a>:</h4>
<p>Also if you use <code>by rw</code> on every line of the calc proof, then it doesn't matter whether you make the arguments of the axioms explicit or not</p>

<a name="125825980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825980">Kevin Buzzard (Apr 28 2018 at 17:24)</a>:</h4>
<p>Kenny in none of the standard typeclasses do I see variables in axioms being introduced with <code>{}</code>. I am imagining there is a good reason for this</p>

<a name="125825987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825987" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825987">Kevin Buzzard (Apr 28 2018 at 17:25)</a>:</h4>
<p>Letting them all be <code>{}</code> announces that you're 100 percent convinced that unification will save you</p>

<a name="125825988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825988">Kenny Lau (Apr 28 2018 at 17:25)</a>:</h4>
<p>well they have interface like</p>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">semigroup</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">has_mul</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">mul_assoc</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">))</span>

<span class="kn">lemma</span> <span class="n">mul_assoc</span> <span class="o">[</span><span class="n">semigroup</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">semigroup</span><span class="bp">.</span><span class="n">mul_assoc</span>
</pre></div>

<a name="125825989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825989" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825989">Kevin Buzzard (Apr 28 2018 at 17:25)</a>:</h4>
<p>but letting them all be <code>()</code> does not mean you're giving up home</p>

<a name="125825990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825990" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825990">Kenny Lau (Apr 28 2018 at 17:25)</a>:</h4>
<p>oh wait</p>

<a name="125825991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825991">Kevin Buzzard (Apr 28 2018 at 17:25)</a>:</h4>
<p>because other things might fill in the gaps later</p>

<a name="125825992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125825992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125825992">Kenny Lau (Apr 28 2018 at 17:25)</a>:</h4>
<p>right, you still need <code>_</code> for <code>mul_assoc</code> lol</p>

<a name="125826031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826031">Kenny Lau (Apr 28 2018 at 17:26)</a>:</h4>
<p>so maybe change back to <code>()</code> and use Reid's approach</p>

<a name="125826032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826032" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826032">Kevin Buzzard (Apr 28 2018 at 17:26)</a>:</h4>
<p>Sometimes I did</p>

<a name="125826033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826033" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826033">Kevin Buzzard (Apr 28 2018 at 17:26)</a>:</h4>
<p>sometimes I didn't</p>

<a name="125826040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826040" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826040">Kevin Buzzard (Apr 28 2018 at 17:26)</a>:</h4>
<p>Oh I make the interface!</p>

<a name="125826053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826053" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826053">Kenny Lau (Apr 28 2018 at 17:27)</a>:</h4>
<p>I'm saying, the interface in the library still uses explicit variables</p>

<a name="125826096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826096" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826096">Kevin Buzzard (Apr 28 2018 at 17:28)</a>:</h4>
<p><code>exact calc b = 1 * b         : by rw group'.one_mul</code> -- that "shouldn't work" either</p>

<a name="125826097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826097" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826097">Kenny Lau (Apr 28 2018 at 17:28)</a>:</h4>
<p>why not?</p>

<a name="125826100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826100">Kenny Lau (Apr 28 2018 at 17:28)</a>:</h4>
<p>the goal is <code>b = 1 * b</code></p>

<a name="125826105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826105" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826105">Kevin Buzzard (Apr 28 2018 at 17:29)</a>:</h4>
<p>Oh I see</p>

<a name="125826106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826106">Kevin Buzzard (Apr 28 2018 at 17:29)</a>:</h4>
<p>of course</p>

<a name="125826107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826107" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826107">Kevin Buzzard (Apr 28 2018 at 17:29)</a>:</h4>
<p>Kenny do you understand why that bug is not a bug?</p>

<a name="125826149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826149" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826149">Kevin Buzzard (Apr 28 2018 at 17:30)</a>:</h4>
<p>line 33</p>

<a name="125826164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826164" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826164">Kevin Buzzard (Apr 28 2018 at 17:30)</a>:</h4>
<p>Oh I now understand</p>

<a name="125826165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826165" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826165">Kevin Buzzard (Apr 28 2018 at 17:30)</a>:</h4>
<p>I should think of what the rw actually does</p>

<a name="125826166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826166" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826166">Kevin Buzzard (Apr 28 2018 at 17:30)</a>:</h4>
<p>not what I want it to do</p>

<a name="125826218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826218" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826218">Kevin Buzzard (Apr 28 2018 at 17:32)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">mul_left_cancel</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">},</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">Habac</span><span class="o">,</span>
  <span class="n">exact</span> <span class="k">calc</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span>         <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">one_mul</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_left_inv</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_assoc</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">Habac</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_assoc</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">c</span>         <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_left_inv</span>
           <span class="bp">...</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:</span> <span class="n">one_mul</span>
<span class="kn">end</span>
</pre></div>

<a name="125826221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826221" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826221">Kevin Buzzard (Apr 28 2018 at 17:32)</a>:</h4>
<p>Yes that's really nice</p>

<a name="125826224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826224" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826224">Kevin Buzzard (Apr 28 2018 at 17:32)</a>:</h4>
<p>That's just how a mathematician would explain it</p>

<a name="125826228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826228" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826228">Kevin Buzzard (Apr 28 2018 at 17:33)</a>:</h4>
<p>"apply this axiom"</p>

<a name="125826233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826233" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826233">Kevin Buzzard (Apr 28 2018 at 17:33)</a>:</h4>
<p>"I don't care which way"</p>

<a name="125826234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826234" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826234">Kevin Buzzard (Apr 28 2018 at 17:33)</a>:</h4>
<p>"the obvious way"</p>

<a name="125826236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826236" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826236">Kenny Lau (Apr 28 2018 at 17:33)</a>:</h4>
<p>I'm sure you can have fewer lines lol</p>

<a name="125826237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826237" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826237">Kevin Buzzard (Apr 28 2018 at 17:33)</a>:</h4>
<p>of course</p>

<a name="125826253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826253" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826253">Kevin Buzzard (Apr 28 2018 at 17:34)</a>:</h4>
<p>but this is the raw beauty which you see here</p>

<a name="125826280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826280" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826280">Kenny Lau (Apr 28 2018 at 17:34)</a>:</h4>
<p>and then your <code>begin intros exact</code> kind of defeat the purpose of entering tactic mode</p>

<a name="125826282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826282" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826282">Kevin Buzzard (Apr 28 2018 at 17:34)</a>:</h4>
<p>ha ha you are exactly right</p>

<a name="125826292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826292" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826292">Reid Barton (Apr 28 2018 at 17:35)</a>:</h4>
<p>I wasn't sure whether to comment about the intros line, haha</p>

<a name="125826294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826294" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826294">Kenny Lau (Apr 28 2018 at 17:35)</a>:</h4>
<p>comment about them.</p>

<a name="125826451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125826451" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125826451">Kenny Lau (Apr 28 2018 at 17:40)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I just finished writing a file without ever entering tactic mode</p>

<a name="125831048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831048" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831048">Kevin Buzzard (Apr 28 2018 at 20:47)</a>:</h4>
<p>All the rewrites fail in the below</p>

<a name="125831051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831051">Kevin Buzzard (Apr 28 2018 at 20:47)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">has_group_notation</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">has_mul</span> <span class="n">G</span><span class="o">,</span> <span class="n">has_one</span> <span class="n">G</span><span class="o">,</span> <span class="n">has_inv</span> <span class="n">G</span>

<span class="kn">structure</span> <span class="n">group&#39;</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">has_group_notation</span> <span class="n">G</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">mul_assoc</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">))</span>
<span class="o">(</span><span class="n">one_mul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">mul_left_inv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">group&#39;</span><span class="bp">.</span><span class="n">G</span> <span class="o">:</span> <span class="n">group&#39;</span> <span class="n">G</span><span class="o">)</span> <span class="o">[</span><span class="n">has_group_notation</span> <span class="n">G</span><span class="o">]</span>
<span class="c1">-- variables (H : Type) [has_mul H] [has_one H] [has_inv H]</span>

<span class="c1">-- We prove left_mul_cancel for group&#39;</span>

<span class="kn">lemma</span> <span class="n">group&#39;</span><span class="bp">.</span><span class="n">mul_left_cancel</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">Habac</span><span class="o">,</span>
 <span class="k">calc</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span>         <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">one_mul</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_left_inv</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_assoc</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">Habac</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_assoc</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">c</span>         <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_left_inv</span>
                <span class="bp">...</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">one_mul</span>
</pre></div>

<a name="125831052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831052" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831052">Kevin Buzzard (Apr 28 2018 at 20:47)</a>:</h4>
<p>I am using a structure</p>

<a name="125831053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831053" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831053">Kevin Buzzard (Apr 28 2018 at 20:47)</a>:</h4>
<p>I don't understand the error messages</p>

<a name="125831054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831054" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831054">Kevin Buzzard (Apr 28 2018 at 20:47)</a>:</h4>
<p>First is</p>

<a name="125831055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831055" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831055">Kevin Buzzard (Apr 28 2018 at 20:47)</a>:</h4>
<div class="codehilite"><pre><span></span>rewrite tactic failed, did not find instance of the pattern in the target expression
  1 * ?m_3
state:
G : Type,
_inst_1 : has_group_notation G,
a b c : G,
Habac : a * b = a * c
⊢ b = 1 * b
</pre></div>

<a name="125831094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831094" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831094">Kevin Buzzard (Apr 28 2018 at 20:48)</a>:</h4>
<p>I am unimpressed with Lean's instance-finding abilities here</p>

<a name="125831095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831095" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831095">Kevin Buzzard (Apr 28 2018 at 20:48)</a>:</h4>
<p>what am i missing?</p>

<a name="125831099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831099" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831099">Kevin Buzzard (Apr 28 2018 at 20:48)</a>:</h4>
<p>I wondered how changing a class to astructure changed things</p>

<a name="125831106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831106">Kevin Buzzard (Apr 28 2018 at 20:49)</a>:</h4>
<p>I think all notation as a notational typeclass works great in these sorts of situations</p>

<a name="125831107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831107" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831107">Kenny Lau (Apr 28 2018 at 20:49)</a>:</h4>
<p>Lean only finds classes, not structures</p>

<a name="125831109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831109" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831109">Kevin Buzzard (Apr 28 2018 at 20:49)</a>:</h4>
<p>it's clear what it's doing</p>

<a name="125831110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831110" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831110">Kevin Buzzard (Apr 28 2018 at 20:49)</a>:</h4>
<p>and it's doing nothing more</p>

<a name="125831111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831111">Kenny Lau (Apr 28 2018 at 20:49)</a>:</h4>
<p>the structure isnt even in the hypotheses</p>

<a name="125831154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831154" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831154">Kevin Buzzard (Apr 28 2018 at 20:50)</a>:</h4>
<p>I don't understand</p>

<a name="125831158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831158" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831158">Kevin Buzzard (Apr 28 2018 at 20:50)</a>:</h4>
<p>I will take notation off</p>

<a name="125831160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831160">Kevin Buzzard (Apr 28 2018 at 20:50)</a>:</h4>
<p>and put pp.all on</p>

<a name="125831161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831161" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831161">Kevin Buzzard (Apr 28 2018 at 20:50)</a>:</h4>
<p>am I missing something simple?</p>

<a name="125831166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831166" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831166">Kevin Buzzard (Apr 28 2018 at 20:51)</a>:</h4>
<p>kenny can you fix it?</p>

<a name="125831171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831171" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831171">Kevin Buzzard (Apr 28 2018 at 20:51)</a>:</h4>
<p>that might help me understand</p>

<a name="125831267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831267" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831267">Kevin Buzzard (Apr 28 2018 at 20:55)</a>:</h4>
<p>Look at this beautiful proof</p>

<a name="125831273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831273" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831273">Kevin Buzzard (Apr 28 2018 at 20:55)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">mul_left_cancel&#39;</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">has_mul</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">has_one</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">has_inv</span> <span class="n">G</span><span class="o">]</span>
<span class="o">(</span><span class="n">mul_assoc</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">))</span>
<span class="o">(</span><span class="n">one_mul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">mul_left_inv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span>
<span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">Habac</span><span class="o">,</span>
 <span class="k">calc</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span>         <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">one_mul</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_left_inv</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_assoc</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">Habac</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_assoc</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">c</span>         <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_left_inv</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">c</span>             <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">one_mul</span>
</pre></div>

<a name="125831281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831281" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831281">Kevin Buzzard (Apr 28 2018 at 20:55)</a>:</h4>
<p>Can you show me how to make a proof which is just as beautiful, but using a class or structure?</p>

<a name="125831329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831329" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831329">Kevin Buzzard (Apr 28 2018 at 20:57)</a>:</h4>
<p>I am getting sick of carrying the axioms around with me</p>

<a name="125831368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831368" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831368">Kevin Buzzard (Apr 28 2018 at 20:58)</a>:</h4>
<p>I have packaged up all the notation in a typeclass</p>

<a name="125831369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831369" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831369">Kevin Buzzard (Apr 28 2018 at 20:58)</a>:</h4>
<p>but I want to package all the group axioms up as well</p>

<a name="125831379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831379" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831379">Kevin Buzzard (Apr 28 2018 at 20:59)</a>:</h4>
<p>The typeclass system is perfect for notation.</p>

<a name="125831381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831381" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831381">Kevin Buzzard (Apr 28 2018 at 20:59)</a>:</h4>
<p>There is very little risk of a diamond :-)</p>

<a name="125831406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831406">Kevin Buzzard (Apr 28 2018 at 21:00)</a>:</h4>
<p>I want to package everything away but keep the proof beautiful</p>

<a name="125831438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831438" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831438">Kevin Buzzard (Apr 28 2018 at 21:00)</a>:</h4>
<p>and once I have managed that, I think I am done.</p>

<a name="125831505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831505">Chris Hughes (Apr 28 2018 at 21:03)</a>:</h4>
<p>Why aren't you just using the <code>group</code> typeclass?</p>

<a name="125831988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125831988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125831988">Mario Carneiro (Apr 28 2018 at 21:21)</a>:</h4>
<p>The <code>has_group_notation</code> class has been discussed in some of Jeremy's explorations, called <code>group_struct</code>, but it's not needed in mathlib as it is now</p>

<a name="125832087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125832087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125832087">Mario Carneiro (Apr 28 2018 at 21:25)</a>:</h4>
<p>The standard way to show that an axiom is redundant is to have an auxiliary constructor for <code>group</code> that doesn't have the redundant axioms</p>

<a name="125832272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125832272" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125832272">Chris Hughes (Apr 28 2018 at 21:32)</a>:</h4>
<p>Is this better?</p>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">has_group_notation</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">has_mul</span> <span class="n">G</span><span class="o">,</span> <span class="n">has_one</span> <span class="n">G</span><span class="o">,</span> <span class="n">has_inv</span> <span class="n">G</span>

<span class="n">class</span> <span class="n">group&#39;</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">has_group_notation</span> <span class="n">G</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">mul_assoc&#39;</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">))</span>
<span class="o">(</span><span class="n">one_mul&#39;</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">mul_left_inv&#39;</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">group&#39;</span> <span class="n">G</span><span class="o">]</span>
<span class="kn">open</span> <span class="n">group&#39;</span>
<span class="c1">-- variables (H : Type) [has_mul H] [has_one H] [has_inv H]</span>

<span class="c1">-- We prove left_mul_cancel for group&#39;</span>

<span class="kn">lemma</span> <span class="n">group&#39;</span><span class="bp">.</span><span class="n">mul_left_cancel</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">Habac</span><span class="o">,</span>
 <span class="k">calc</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span>         <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">one_mul&#39;</span> <span class="n">b</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_left_inv&#39;</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_assoc&#39;</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">Habac</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_assoc&#39;</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">c</span>         <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_left_inv&#39;</span>
                <span class="bp">...</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">one_mul&#39;</span>
</pre></div>

<a name="125832280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125832280" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125832280">Chris Hughes (Apr 28 2018 at 21:33)</a>:</h4>
<p>You had two <code>has_group_notation</code> instances, one from <code>group'</code> and another one</p>

<a name="125832281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125832281" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125832281">Kenny Lau (Apr 28 2018 at 21:33)</a>:</h4>
<p>Just use a namespace and drop the fucking primes</p>

<a name="125832284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125832284" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125832284">Chris Hughes (Apr 28 2018 at 21:33)</a>:</h4>
<p>one mul is global</p>

<a name="125832322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125832322" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125832322">Kenny Lau (Apr 28 2018 at 21:34)</a>:</h4>
<p>protected</p>

<a name="125832326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125832326" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125832326">Chris Hughes (Apr 28 2018 at 21:34)</a>:</h4>
<p>but it doesn't know which <code>one_mul</code> I mean.</p>

<a name="125832826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125832826" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125832826">Mario Carneiro (Apr 28 2018 at 21:54)</a>:</h4>
<div class="codehilite"><pre><span></span>def group.mk&#39; {α : Type*} [semigroup α] [has_one α] [has_inv α]
  (one_mul : ∀ (a : α), 1 * a = a)
  (mul_left_inv : ∀ (a : α), a⁻¹ * a = 1) : group α :=
have ∀ a : α, a * a = a → a = 1, from λ a h,
  calc a = a⁻¹ * a * a : by simp [mul_left_inv, one_mul]
    ... = a⁻¹ * a : by rw [mul_assoc, h]
    ... = 1 : mul_left_inv _,
have ∀ a : α, a * a⁻¹ = 1, from
λ a, this _ $ calc
  a * a⁻¹ * (a * a⁻¹)
      = a * (a⁻¹ * a) * a⁻¹ : by simp [mul_assoc]
  ... = a * a⁻¹ : by rw mul_left_inv; simp [mul_assoc, one_mul],
{ one_mul := one_mul,
  mul_left_inv := mul_left_inv,
  mul_one := λ a, show a * 1 = a,
    by rw [← mul_left_inv a, ← mul_assoc, this, one_mul],
  ..‹semigroup α›, ..‹has_one α›, ..‹has_inv α› }
</pre></div>

<a name="125834341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125834341" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125834341">Scott Morrison (Apr 28 2018 at 22:54)</a>:</h4>
<p>This is a common problem in making definitions --- do you go for maximal axioms (so that you don't need lots of lemmas later, and the big results follow easily from the definitions), or minimal axioms (so instances are easy to construct)? Often, the right solution in Lean is to go for maximal axioms with alternate constructors that require minimal axioms.</p>

<a name="125836997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125836997" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125836997">Kevin Buzzard (Apr 29 2018 at 00:38)</a>:</h4>
<blockquote>
<p>The standard way to show that an axiom is redundant is to have an auxiliary constructor for <code>group</code> that doesn't have the redundant axioms</p>
</blockquote>
<p>Yes but these are mathematicians with no functional programming background and I think they would prefer to see something which looks like an honest proof (never mention the axiom, then prove it) rather than wrapping anything in a complicated structure.</p>

<a name="125837057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125837057" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125837057">Kevin Buzzard (Apr 29 2018 at 00:41)</a>:</h4>
<p>Mario your proof is in some sense canonical, but I prefer mine for pedagogical reasons.</p>

<a name="125839656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125839656" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125839656">Kevin Buzzard (Apr 29 2018 at 02:27)</a>:</h4>
<blockquote>
<p>Just use a namespace and drop the fucking primes</p>
</blockquote>
<p>Kenny can you do it? Namespaces seem to lead to overloading anyway.</p>

<a name="125839695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125839695" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125839695">Kevin Buzzard (Apr 29 2018 at 02:28)</a>:</h4>
<p>I am reluctant to prime the axioms</p>

<a name="125839696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125839696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125839696">Kevin Buzzard (Apr 29 2018 at 02:28)</a>:</h4>
<p>but maybe I have to</p>

<a name="125840944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125840944" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125840944">Mario Carneiro (Apr 29 2018 at 03:18)</a>:</h4>
<blockquote>
<p>something which looks like an honest proof (never mention the axiom, then prove it)</p>
</blockquote>
<p>I'm confused. Isn't that pretty much exactly what my proof does? I start with a semigroup with a one and inv, and the left_inv and one_mul axioms, and derive mul_one. There is no funny business at all, or complicated structures, it's literally just proving one statement from another, and then wrapping it up in a <code>group</code>. The proof part could also be factored out like so:</p>
<div class="codehilite"><pre><span></span>section
parameters {α : Type*} [semigroup α] [has_one α] [has_inv α]
  (one_mul : ∀ (a : α), 1 * a = a)
  (mul_left_inv : ∀ (a : α), a⁻¹ * a = 1)
include one_mul mul_left_inv

theorem group.mk&#39;_aux1 {a : α} (h : a * a = a) : a = 1 :=
calc a = a⁻¹ * a * a : by simp [mul_left_inv, one_mul]
   ... = a⁻¹ * a : by rw [mul_assoc, h]
   ... = 1 : mul_left_inv _

theorem group.mk&#39;_aux2 (a : α) : a * a⁻¹ = 1 :=
group.mk&#39;_aux1 $ calc
  a * a⁻¹ * (a * a⁻¹)
      = a * (a⁻¹ * a) * a⁻¹ : by simp [mul_assoc]
  ... = a * a⁻¹ : by rw mul_left_inv; simp [mul_assoc, one_mul]

theorem group.mk&#39;_aux3 (a : α) : a * 1 = a :=
by rw [← mul_left_inv a, ← mul_assoc, group.mk&#39;_aux2, one_mul]

def group.mk&#39; : group α :=
{ one_mul := one_mul,
  mul_left_inv := mul_left_inv,
  mul_one := group.mk&#39;_aux3,
  ..‹semigroup α›, ..‹has_one α›, ..‹has_inv α› }

end
</pre></div>

<a name="125841574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/125841574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#125841574">Mario Carneiro (Apr 29 2018 at 03:45)</a>:</h4>
<p>Another way to present a proof like this is via an auxiliary class like your <code>gripe</code>, like so:</p>
<div class="codehilite"><pre><span></span>class gripe (α : Type*) extends semigroup α, has_one α, has_inv α :=
(one_mul : ∀ (a : α), 1 * a = a)
(mul_left_inv : ∀ (a : α), a⁻¹ * a = 1)

namespace gripe
variables {α : Type*} [gripe α]

theorem eq_one_of_idem {a : α} (h : a * a = a) : a = 1 :=
calc a = a⁻¹ * a * a : by simp [mul_left_inv, one_mul]
   ... = a⁻¹ * a : by rw [mul_assoc, h]
   ... = 1 : mul_left_inv _

theorem mul_right_inv (a : α) : a * a⁻¹ = 1 :=
eq_one_of_idem $ calc
  a * a⁻¹ * (a * a⁻¹)
      = a * (a⁻¹ * a) * a⁻¹ : by simp [mul_assoc]
  ... = a * a⁻¹ : by rw mul_left_inv; simp [mul_assoc, one_mul]

theorem mul_one (a : α) : a * 1 = a :=
by rw [← mul_left_inv a, ← mul_assoc, mul_right_inv, one_mul]

instance (α) [gripe α] : group α :=
{ one_mul := one_mul,
  mul_left_inv := mul_left_inv,
  mul_one := mul_one,
  ..gripe.to_semigroup α,
  ..gripe.to_has_one α,
  ..gripe.to_has_inv α }

end gripe
</pre></div>

<a name="126004737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Writing%20readable%20uncluttered%20group%20theory/near/126004737" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/12844Writingreadableunclutteredgrouptheory.html#126004737">Kevin Buzzard (May 02 2018 at 17:47)</a>:</h4>
<p>Here's how it ended up. <a href="https://xenaproject.wordpress.com/2018/04/30/group-theory-revision/" target="_blank" title="https://xenaproject.wordpress.com/2018/04/30/group-theory-revision/">https://xenaproject.wordpress.com/2018/04/30/group-theory-revision/</a></p>


{% endraw %}
