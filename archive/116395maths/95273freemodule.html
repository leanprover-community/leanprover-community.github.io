---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/95273freemodule.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html">free module</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="158484975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158484975" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158484975">Reid Barton (Feb 13 2019 at 22:56)</a>:</h4>
<p><code>The module `lc α β` of linear combinations over `β` (`α` is the scalar ring)</code><br>
This is what I would call the free module on a set, right?</p>

<a name="158485001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485001" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485001">Kenny Lau (Feb 13 2019 at 22:57)</a>:</h4>
<p>Unfortunately there <code>\b</code> needs to be a module or something</p>

<a name="158485012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485012" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485012">Reid Barton (Feb 13 2019 at 22:57)</a>:</h4>
<p>oh, I see...</p>

<a name="158485015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485015" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485015">Kenny Lau (Feb 13 2019 at 22:57)</a>:</h4>
<p>if you want module over a set you would want either <code>direct_sum</code> or <code>finsupp</code></p>

<a name="158485030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485030" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485030">Reid Barton (Feb 13 2019 at 22:57)</a>:</h4>
<p>Okay, I was wondering if there was something more specific than <code>direct_sum</code>.</p>

<a name="158485080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485080" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485080">Reid Barton (Feb 13 2019 at 22:58)</a>:</h4>
<p>Actually, in my case the set does happen to be a module</p>

<a name="158485086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485086" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485086">Kenny Lau (Feb 13 2019 at 22:58)</a>:</h4>
<p>then very good</p>

<a name="158485116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485116">Reid Barton (Feb 13 2019 at 22:58)</a>:</h4>
<p>the module structure on <code>lc</code> is the one that doesn't use the module structure on <code>\b</code> right?</p>

<a name="158485122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485122" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485122">Reid Barton (Feb 13 2019 at 22:58)</a>:</h4>
<p>because it's <code>finsupp.to_module</code></p>

<a name="158485130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485130" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485130">Kenny Lau (Feb 13 2019 at 22:58)</a>:</h4>
<p>nothing uses the module structure on <code>\b</code></p>

<a name="158485133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485133" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485133">Kenny Lau (Feb 13 2019 at 22:59)</a>:</h4>
<p>it's just <code>lc</code> that requires it</p>

<a name="158485233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485233" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485233">Reid Barton (Feb 13 2019 at 23:00)</a>:</h4>
<p>oh wait, I lied. I have a subset of a module, not a module. Never mind</p>

<a name="158485237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485237" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485237">Kenny Lau (Feb 13 2019 at 23:00)</a>:</h4>
<p>sadness</p>

<a name="158485778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485778" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485778">Reid Barton (Feb 13 2019 at 23:09)</a>:</h4>
<p>Do we already have <code>M → (R →ₗ[R] M)</code>?</p>

<a name="158485865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485865" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485865">Kenny Lau (Feb 13 2019 at 23:11)</a>:</h4>
<p>how about <code>M \equiv\_l (R \to\_l[R] M)</code></p>

<a name="158485889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485889">Reid Barton (Feb 13 2019 at 23:11)</a>:</h4>
<p>I think specializing <code>direct_sum</code> to the free module on a set would be worthwhile</p>

<a name="158487391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158487391" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158487391">Reid Barton (Feb 13 2019 at 23:42)</a>:</h4>
<p>Here's what I ended up writing. I'm sure it could be golfed more.</p>
<div class="codehilite"><pre><span></span><span class="n">universes</span> <span class="n">u</span> <span class="n">v</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span>

<span class="n">def</span> <span class="n">lself</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">:</span> <span class="o">(</span><span class="n">R</span> <span class="bp">→</span><span class="err">ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">M</span><span class="o">)</span> <span class="err">≃ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">M</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="n">f</span> <span class="mi">1</span><span class="o">,</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">m</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">r</span><span class="o">,</span> <span class="n">r</span> <span class="err">•</span> <span class="n">m</span><span class="o">,</span>
    <span class="n">add</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">intros</span><span class="bp">;</span> <span class="n">apply</span> <span class="n">add_smul</span><span class="o">,</span>
    <span class="n">smul</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">intros</span><span class="bp">;</span> <span class="n">symmetry</span><span class="bp">;</span> <span class="n">apply</span> <span class="n">smul_smul</span> <span class="o">},</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="k">begin</span>
    <span class="n">ext</span> <span class="n">r</span><span class="o">,</span>
    <span class="n">convert</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">smul</span> <span class="n">r</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
    <span class="n">change</span> <span class="n">f</span> <span class="n">r</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">(</span><span class="n">r</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">),</span>
    <span class="n">rw</span> <span class="n">mul_one</span>
  <span class="kn">end</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">m</span><span class="o">,</span> <span class="n">one_smul</span> <span class="bp">_</span> <span class="n">m</span><span class="o">,</span>
  <span class="n">add</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">f</span> <span class="n">g</span><span class="o">,</span> <span class="n">rfl</span><span class="o">,</span>
  <span class="n">smul</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">r</span> <span class="n">f</span><span class="o">,</span> <span class="n">rfl</span> <span class="o">}</span>
</pre></div>

<a name="158487569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158487569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158487569">Johannes Hölzl (Feb 13 2019 at 23:46)</a>:</h4>
<p>can you use <code>smul_right</code> for as <code>inv_fun</code>?</p>

<a name="158487968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158487968" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158487968">Reid Barton (Feb 13 2019 at 23:53)</a>:</h4>
<p>oh, nice</p>

<a name="158488416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158488416" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158488416">Reid Barton (Feb 14 2019 at 00:00)</a>:</h4>
<p>edited</p>

<a name="158488533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158488533" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158488533">Reid Barton (Feb 14 2019 at 00:03)</a>:</h4>
<blockquote>
<p>oh wait, I lied. I have a subset of a module, not a module. Never mind</p>
</blockquote>
<p>Except actually I can also just use the entire module.</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">projective</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">∃</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">M</span> <span class="bp">→</span><span class="err">ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">lc</span> <span class="n">R</span> <span class="n">M</span><span class="o">),</span> <span class="o">(</span><span class="n">lc</span><span class="bp">.</span><span class="n">total</span> <span class="n">R</span> <span class="n">M</span><span class="o">)</span><span class="bp">.</span><span class="n">comp</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">linear_map</span><span class="bp">.</span><span class="n">id</span>
</pre></div>

<a name="158488549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158488549" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158488549">Reid Barton (Feb 14 2019 at 00:03)</a>:</h4>
<p>is this definition too weird</p>

<a name="158504691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158504691" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158504691">Johan Commelin (Feb 14 2019 at 05:53)</a>:</h4>
<p>I don't think mathematicians will recognise it</p>

<a name="158504709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158504709" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158504709">Johan Commelin (Feb 14 2019 at 05:53)</a>:</h4>
<p>I think <code>lc</code> is somewhat unintuitive to use there</p>

<a name="158504757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158504757" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158504757">Reid Barton (Feb 14 2019 at 05:54)</a>:</h4>
<p>do you mean because of the weird name, or because the definition itself is weird in a math way</p>

<a name="158504763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158504763" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158504763">Johan Commelin (Feb 14 2019 at 05:54)</a>:</h4>
<p>I guess both <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>

<a name="158504839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158504839" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158504839">Reid Barton (Feb 14 2019 at 05:56)</a>:</h4>
<p>I agree it's not very recognizable, and doing similar things for injective or flat modules will probably be worse</p>

<a name="158504920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158504920" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158504920">Reid Barton (Feb 14 2019 at 05:58)</a>:</h4>
<p>On the other hand the usual definitions become not very pretty due to unbundled objects</p>

<a name="158504964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158504964" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158504964">Reid Barton (Feb 14 2019 at 06:00)</a>:</h4>
<p>maybe I should give in and use category theory</p>

<a name="158505007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158505007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158505007">Johan Commelin (Feb 14 2019 at 06:00)</a>:</h4>
<p>I guess if it was called <code>formal_lin_comb</code> and didn't require <code>\b</code> to be a subset of a module, then it would be better.</p>

<a name="158505031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158505031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158505031">Johan Commelin (Feb 14 2019 at 06:01)</a>:</h4>
<p>Or at least the docstring could say that we are talking of formal linear combinations</p>

<a name="158505512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158505512" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158505512">Mario Carneiro (Feb 14 2019 at 06:12)</a>:</h4>
<p>I am confused by this conversation. How can <code>lc A B</code> be a module if <code>B</code> isn't a module?</p>

<a name="158505777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158505777" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158505777">Mario Carneiro (Feb 14 2019 at 06:18)</a>:</h4>
<p>Oh, I see, the B and A get flipped in the definition</p>

<a name="158505825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158505825" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158505825">Mario Carneiro (Feb 14 2019 at 06:19)</a>:</h4>
<p>In <code>finsupp</code>, we have</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">to_module</span> <span class="o">{</span><span class="n">R</span><span class="o">:</span><span class="n">ring</span> <span class="n">γ</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">γ</span> <span class="n">β</span><span class="o">]</span> <span class="o">:</span> <span class="n">module</span> <span class="n">γ</span> <span class="o">(</span><span class="n">α</span> <span class="bp">→</span><span class="err">₀</span> <span class="n">β</span><span class="o">)</span>
</pre></div>


<p>I think this can be an instance now, and that can replace/generalize much of <code>lc</code></p>

<a name="158510322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510322" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510322">Kevin Buzzard (Feb 14 2019 at 07:56)</a>:</h4>
<p>That definition of projective is no weirder than Neil's definition of a localisation or mathlib's definition of a compact topological space</p>

<a name="158510346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510346" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510346">Kevin Buzzard (Feb 14 2019 at 07:57)</a>:</h4>
<p>Who cares about weird definitions, use the definition that works best and write a useful interface relating it to other definitions people use in practice</p>

<a name="158510431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510431" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510431">Kevin Buzzard (Feb 14 2019 at 07:59)</a>:</h4>
<p>I remember the first time I tried to use continuous functions, about a year ago, to prove something like multiplication by an element of a topological group was continuous. I thought "I can prove this from first principles" and started unfolding everything. Then Kenny saw what I was doing and said "you're not supposed to do it like that" and it began to dawn on me how this whole thing is supposed to work</p>

<a name="158510625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510625" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510625">Kevin Buzzard (Feb 14 2019 at 08:02)</a>:</h4>
<p>We shouldn't ever really care about which definition we're using, we just need good docs which point us to all the theorems saying that the internal definition is equivalent to whichever definition we find is most convenient for us at the time. I don't even have a definition of projective in my head. I have 3 definitions and would claim that something is true "by definition" when I mean "by the definition which is most convenient for me at this point"</p>

<a name="158510722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510722" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510722">Kevin Buzzard (Feb 14 2019 at 08:03)</a>:</h4>
<p>I have a proposition-definition of projective. "The following three concepts are equivalent -- so let's say a module is projective if it satisfies any one of them"</p>

<a name="158510777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510777" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510777">Kevin Buzzard (Feb 14 2019 at 08:04)</a>:</h4>
<p>I'm happy to add Reid's more exotic one to the list</p>

<a name="158510778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510778" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510778">Mario Carneiro (Feb 14 2019 at 08:04)</a>:</h4>
<p>In <a href="https://en.wikipedia.org/wiki/Projective_module" target="_blank" title="https://en.wikipedia.org/wiki/Projective_module">https://en.wikipedia.org/wiki/Projective_module</a> it seems like all the definitions involve quantifying over all modules</p>

<a name="158510804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510804">Mario Carneiro (Feb 14 2019 at 08:05)</a>:</h4>
<p>you didn't list any of wikipedia's definitions, but I like yours better</p>

<a name="158510807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510807" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510807">Kevin Buzzard (Feb 14 2019 at 08:05)</a>:</h4>
<p>I was told "direct summand of a free" was the definition once</p>

<a name="158510821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510821" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510821">Kevin Buzzard (Feb 14 2019 at 08:05)</a>:</h4>
<p>I was told "locally free" was the definition once</p>

<a name="158510865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510865" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510865">Kevin Buzzard (Feb 14 2019 at 08:06)</a>:</h4>
<p>Ie all localisations were free modules</p>

<a name="158510876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510876" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510876">Kevin Buzzard (Feb 14 2019 at 08:06)</a>:</h4>
<p>Neither of these involve quantifying over all modules</p>

<a name="158510891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510891" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510891">Mario Carneiro (Feb 14 2019 at 08:07)</a>:</h4>
<p>direct summand of free quantifies over all modules</p>

<a name="158510894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510894" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510894">Mario Carneiro (Feb 14 2019 at 08:07)</a>:</h4>
<p>dunno what locally free means</p>

<a name="158510902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510902" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510902">Kevin Buzzard (Feb 14 2019 at 08:07)</a>:</h4>
<p>It means that for all prime ideals P of R, M tensor R_P is free</p>

<a name="158510905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510905">Johan Commelin (Feb 14 2019 at 08:07)</a>:</h4>
<p>Just like you can localise rings, you can also localise modules (and you get a module over the localised ring)</p>

<a name="158510950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510950" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510950">Mario Carneiro (Feb 14 2019 at 08:08)</a>:</h4>
<p>I guess with localizations it's a large quantification if you use Neil's localization and small if you use Kenny's localization</p>

<a name="158510957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510957" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510957">Kevin Buzzard (Feb 14 2019 at 08:08)</a>:</h4>
<p>In ZFC we only use one universe</p>

<a name="158510961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510961" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510961">Mario Carneiro (Feb 14 2019 at 08:08)</a>:</h4>
<p>yeah, then it's an impredicative definition</p>

<a name="158510962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510962" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510962">Kevin Buzzard (Feb 14 2019 at 08:08)</a>:</h4>
<p>And so one definition of localisation I have been using for decades is</p>

<a name="158510978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510978" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510978">Mario Carneiro (Feb 14 2019 at 08:09)</a>:</h4>
<p>not that it's usually a big problem, but sometimes it complicates size arguments</p>

<a name="158510980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510980">Kevin Buzzard (Feb 14 2019 at 08:09)</a>:</h4>
<p>That all surjections in M's universe split</p>

<a name="158510984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158510984" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158510984">Kevin Buzzard (Feb 14 2019 at 08:09)</a>:</h4>
<p>Hmm</p>

<a name="158511025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511025" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511025">Kevin Buzzard (Feb 14 2019 at 08:10)</a>:</h4>
<p>Or is that R's universe?</p>

<a name="158511035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511035">Mario Carneiro (Feb 14 2019 at 08:10)</a>:</h4>
<p>the surjections aren't in a universe, they are bounded by the given modules</p>

<a name="158511045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511045" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511045">Mario Carneiro (Feb 14 2019 at 08:11)</a>:</h4>
<p>but I guess the N and M in the commutative triangle live in some universe</p>

<a name="158511049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511049" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511049">Kevin Buzzard (Feb 14 2019 at 08:11)</a>:</h4>
<p>I was going to say that by some general nonsense one can deduce that if all surjections in a sensible universe split then all surjections spilt</p>

<a name="158511054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511054" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511054">Mario Carneiro (Feb 14 2019 at 08:11)</a>:</h4>
<p>yes, that should be the case, but you want to start from a small definition to prove that</p>

<a name="158511055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511055" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511055">Kevin Buzzard (Feb 14 2019 at 08:11)</a>:</h4>
<p>But I'm suddenly not sure what the sensible universe is</p>

<a name="158511099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511099" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511099">Mario Carneiro (Feb 14 2019 at 08:12)</a>:</h4>
<p>I think it's the universe of P, the projective module itself</p>

<a name="158511101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511101" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511101">Kevin Buzzard (Feb 14 2019 at 08:12)</a>:</h4>
<p>Because in this silly place R and M can be in different universes</p>

<a name="158511119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511119" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511119">Mario Carneiro (Feb 14 2019 at 08:12)</a>:</h4>
<p>I'm not sure what happens if a large ring acts on a small module</p>

<a name="158511129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511129" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511129">Kevin Buzzard (Feb 14 2019 at 08:13)</a>:</h4>
<p>It can happen</p>

<a name="158511133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511133" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511133">Kevin Buzzard (Feb 14 2019 at 08:13)</a>:</h4>
<p>R + S is a ring</p>

<a name="158511140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511140" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511140">Kevin Buzzard (Feb 14 2019 at 08:13)</a>:</h4>
<p>Making S a projective R module</p>

<a name="158511146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511146" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511146">Kevin Buzzard (Feb 14 2019 at 08:13)</a>:</h4>
<p>So take R and S rings in different universes</p>

<a name="158511194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511194" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511194">Kevin Buzzard (Feb 14 2019 at 08:14)</a>:</h4>
<p>S is projective because it's clearly locally free :-)</p>

<a name="158511198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511198">Mario Carneiro (Feb 14 2019 at 08:14)</a>:</h4>
<p>clearly</p>

<a name="158511205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511205" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511205">Kevin Buzzard (Feb 14 2019 at 08:14)</a>:</h4>
<p>It's free rank 1 over Spec (S) and free rank 0 over Spec(R)</p>

<a name="158511214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511214" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511214">Mario Carneiro (Feb 14 2019 at 08:15)</a>:</h4>
<p>I wonder if the function <code>f</code> in Reid's definition should be data</p>

<a name="158511219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511219" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511219">Kevin Buzzard (Feb 14 2019 at 08:15)</a>:</h4>
<p>I'm not qualified to answer that</p>

<a name="158511220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511220" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511220">Mario Carneiro (Feb 14 2019 at 08:15)</a>:</h4>
<p>The commutative diagram suggests non-uniqueness, so maybe not</p>

<a name="158511225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511225" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511225">Mario Carneiro (Feb 14 2019 at 08:15)</a>:</h4>
<p>is it "canonical"?</p>

<a name="158511229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511229" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511229">Kevin Buzzard (Feb 14 2019 at 08:15)</a>:</h4>
<p>No</p>

<a name="158511275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511275" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511275">Kevin Buzzard (Feb 14 2019 at 08:16)</a>:</h4>
<p>I'm glad to see you're learning the lingo</p>

<a name="158511294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511294" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511294">Mario Carneiro (Feb 14 2019 at 08:17)</a>:</h4>
<p>huh, I just noticed that all 5 of the wikipedia definitions involve some existence statement</p>

<a name="158511349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511349" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511349">Mario Carneiro (Feb 14 2019 at 08:18)</a>:</h4>
<p>oh, I get it, Reid's definition is the "dual basis" one</p>

<a name="158511369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511369" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511369">Kevin Buzzard (Feb 14 2019 at 08:18)</a>:</h4>
<p>All surjections split is one definition of a projective module</p>

<a name="158511385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511385" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511385">Kevin Buzzard (Feb 14 2019 at 08:19)</a>:</h4>
<p>Reid is using the universal surjection</p>

<a name="158511389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511389" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511389">Kevin Buzzard (Feb 14 2019 at 08:19)</a>:</h4>
<p>If that splits, they all do</p>

<a name="158511477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511477" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511477">Kevin Buzzard (Feb 14 2019 at 08:21)</a>:</h4>
<p>I say this without any clear understanding of the details, which I'm currently trying to work out :-)</p>

<a name="158511554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511554" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511554">Mario Carneiro (Feb 14 2019 at 08:22)</a>:</h4>
<p>My understanding is that <code>lc</code> is dumb and ever since the multiple-rings-on-a-module thing the previous definition of modules over <code>finsupp</code> is typeclassable, and can replace <code>lc</code> as the theory of free modules</p>

<a name="158511581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511581">Mario Carneiro (Feb 14 2019 at 08:23)</a>:</h4>
<p>and we want <code>projective</code>, and to prove that free modules are projective</p>

<a name="158511644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511644" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511644">Kevin Buzzard (Feb 14 2019 at 08:24)</a>:</h4>
<p>I can't work out the details :-/</p>

<a name="158511680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511680" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511680">Kevin Buzzard (Feb 14 2019 at 08:25)</a>:</h4>
<p>My posts just above starting at "all surjections split" sound appealing but I can't make them rigorous</p>

<a name="158511758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511758">Kevin Buzzard (Feb 14 2019 at 08:27)</a>:</h4>
<p>I'm finally at a computer. Reid's definition is related to "A module P is projective if and only if there is another module Q such that the direct sum of P and Q is a free module. "</p>

<a name="158511814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511814" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511814">Kevin Buzzard (Feb 14 2019 at 08:28)</a>:</h4>
<p>If F is a module with a surjection F -&gt; M, then this R-module map has a one-sided inverse if and only if "F is isomorphic to M plus kernel of the surjection"</p>

<a name="158511840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511840" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511840">Kevin Buzzard (Feb 14 2019 at 08:29)</a>:</h4>
<p>This is not quite rigorous -- one should say the isomorphism between F and the direct sum identifies the surjection F -&gt; M with the projection</p>

<a name="158511851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511851">Kevin Buzzard (Feb 14 2019 at 08:29)</a>:</h4>
<p>Reid's definition is that M is projective iff a certain surjection from a certain explicit free module splits</p>

<a name="158511906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511906">Kevin Buzzard (Feb 14 2019 at 08:30)</a>:</h4>
<p>so it's equivalent to saying that M is a direct summand of that very explicit free module</p>

<a name="158511940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511940" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511940">Kevin Buzzard (Feb 14 2019 at 08:31)</a>:</h4>
<p>I guess that's a key thing that should be flagged for people who might not know this stuff back to front -- if M and N are modules and we have a surjection M -&gt; N, then this surjection splitting is equivalent to M being isomorphic to N + kernel and the surjection being the projection</p>

<a name="158511945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511945" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511945">Johan Commelin (Feb 14 2019 at 08:31)</a>:</h4>
<p>May we please have short exact sequences in Lean?</p>

<a name="158511949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511949" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511949">Johan Commelin (Feb 14 2019 at 08:31)</a>:</h4>
<p>Once we have a good encoding for them, we can prove lots of interesting stuff.</p>

<a name="158511953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511953">Kevin Buzzard (Feb 14 2019 at 08:31)</a>:</h4>
<p>Random surjections are harder than this, e.g. Z/4Z surjects onto Z/2Z but (a) this doesn't split and (b) Z/4Z is not Z/2Z + anything</p>

<a name="158511998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158511998" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158511998">Kevin Buzzard (Feb 14 2019 at 08:32)</a>:</h4>
<p>(a) and (b) are equivalent statements</p>

<a name="158512005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512005" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512005">Johan Commelin (Feb 14 2019 at 08:32)</a>:</h4>
<p>It's one of the things where I really don't know how to encode them in a nice way so that they are still intuitive to use. The mathematical notation is very compact.</p>

<a name="158512037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512037" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512037">Kevin Buzzard (Feb 14 2019 at 08:33)</a>:</h4>
<p>A <em>short</em> exact sequence is surely just a predicate on three modules and two maps</p>

<a name="158512039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512039" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512039">Johan Commelin (Feb 14 2019 at 08:33)</a>:</h4>
<p>I fear we will end up with <code>short_exact f g</code>. Which is really ugly.</p>

<a name="158512051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512051">Kevin Buzzard (Feb 14 2019 at 08:33)</a>:</h4>
<p>Why is that ugly?</p>

<a name="158512059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512059" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512059">Kevin Buzzard (Feb 14 2019 at 08:33)</a>:</h4>
<p>I agree that it's one approach</p>

<a name="158512065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512065" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512065">Mario Carneiro (Feb 14 2019 at 08:33)</a>:</h4>
<p>I think drawing a picture every time is tiresome</p>

<a name="158512074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512074" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512074">Kevin Buzzard (Feb 14 2019 at 08:33)</a>:</h4>
<p>OTOH a morphism of short exact sequences is maps on the modules</p>

<a name="158512080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512080" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512080">Kevin Buzzard (Feb 14 2019 at 08:34)</a>:</h4>
<p>and I'm finding it hard to see the modules in Johan's proposal</p>

<a name="158512117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512117" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512117">Johan Commelin (Feb 14 2019 at 08:34)</a>:</h4>
<p>"Let <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn><mo>⟶</mo><mi>A</mi><mstyle><msup><mo><mo>⟶</mo></mo><mi>f</mi></msup></mstyle><mi>B</mi><mstyle><msup><mo><mo>⟶</mo></mo><mi>g</mi></msup></mstyle><mi>C</mi><mo>⟶</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">0 \longrightarrow A \stackrel{f}{\longrightarrow} B \stackrel{g}{\longrightarrow} C \longrightarrow 0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:1.3442159999999999em;"></span><span class="strut bottom" style="height:1.3552159999999998em;vertical-align:-0.011em;"></span><span class="base"><span class="mord mathrm">0</span><span class="mrel">⟶</span><span class="mord mathit">A</span><span class="mrel"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3442159999999999em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">⟶</span></span></span><span style="top:-3.758108em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right:0.10764em;">f</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.011em;"></span></span></span></span></span><span class="mord mathit" style="margin-right:0.05017em;">B</span><span class="mrel"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1595em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">⟶</span></span></span><span style="top:-3.758108em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right:0.03588em;">g</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.011em;"></span></span></span></span></span><span class="mord mathit" style="margin-right:0.07153em;">C</span><span class="mrel">⟶</span><span class="mord mathrm">0</span></span></span></span> be a short exact sequence" is much nicer to read.</p>

<a name="158512124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512124" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512124">Mario Carneiro (Feb 14 2019 at 08:34)</a>:</h4>
<p>like I said, drawing a picture</p>

<a name="158512127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512127" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512127">Kevin Buzzard (Feb 14 2019 at 08:34)</a>:</h4>
<p>That's just the notation we should use :-)</p>

<a name="158512137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512137" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512137">Kevin Buzzard (Feb 14 2019 at 08:34)</a>:</h4>
<p>I think unicode notation is rubbish. We need LaTeX notation.</p>

<a name="158512153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512153" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512153">Kevin Buzzard (Feb 14 2019 at 08:35)</a>:</h4>
<p>I heard that <span class="user-mention" data-user-id="110031">@Patrick Massot</span> was working on this in between his 16 hours / week of teaching ;-)</p>

<a name="158512219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512219" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512219">Mario Carneiro (Feb 14 2019 at 08:36)</a>:</h4>
<div class="codehilite"><pre><span></span>notation `[0→ ` A ` →[` f `] ` B `→[` g `] ` C ` →0]` := short_exact f g
</pre></div>

<a name="158512329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512329" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512329">Johan Commelin (Feb 14 2019 at 08:38)</a>:</h4>
<p>Ok... too bad we can use that to introduce them...</p>
<div class="codehilite"><pre><span></span><span class="kn">variables</span> <span class="o">([</span><span class="mi">0</span><span class="bp">→</span> <span class="n">A</span> <span class="bp">→</span><span class="o">[</span><span class="n">f</span><span class="o">]</span> <span class="n">B</span> <span class="bp">→</span><span class="o">[</span><span class="n">g</span><span class="o">]</span> <span class="n">C</span> <span class="bp">→</span><span class="mi">0</span><span class="o">]</span> <span class="o">:</span> <span class="n">short_exact_sequence</span> <span class="o">(</span><span class="n">Mod</span> <span class="n">R</span><span class="o">))</span>
</pre></div>

<a name="158512334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512334" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512334">Mario Carneiro (Feb 14 2019 at 08:38)</a>:</h4>
<p>oh wait, this isn't even enough, I have to annotate that this is about linear maps somewhere</p>

<a name="158512367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512367" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512367">Johan Commelin (Feb 14 2019 at 08:39)</a>:</h4>
<blockquote>
<p>oh wait, this isn't even enough, I have to annotate that this is about linear maps somewhere</p>
</blockquote>
<p>That's hidden in <code>short_exact</code> I guess.</p>

<a name="158512382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512382" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512382">Mario Carneiro (Feb 14 2019 at 08:39)</a>:</h4>
<p>yes but if you want the same notation for group homs then it will be overloaded</p>

<a name="158512422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512422" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512422">Johan Commelin (Feb 14 2019 at 08:40)</a>:</h4>
<p>I guess I want it for objects of an additive category?</p>

<a name="158512445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512445" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512445">Mario Carneiro (Feb 14 2019 at 08:40)</a>:</h4>
<p>how about no</p>

<a name="158512461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512461" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512461">Mario Carneiro (Feb 14 2019 at 08:40)</a>:</h4>
<p>this is a ridiculous notation</p>

<a name="158512475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512475" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512475">Kevin Buzzard (Feb 14 2019 at 08:41)</a>:</h4>
<p>Will that notation work? We want A to be the domain of f.</p>

<a name="158512478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512478" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512478">Mario Carneiro (Feb 14 2019 at 08:41)</a>:</h4>
<p>the variables notation won't work</p>

<a name="158512501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512501" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512501">Mario Carneiro (Feb 14 2019 at 08:41)</a>:</h4>
<p>for the rest of it, sure, if you stick a <code>_l</code> at the end or something</p>

<a name="158512509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512509" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512509">Kevin Buzzard (Feb 14 2019 at 08:41)</a>:</h4>
<p>It's not a ridiculous notation, it's just an example of how mathematicians think -- in a non-CS-y way.</p>

<a name="158512511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512511" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512511">Mario Carneiro (Feb 14 2019 at 08:41)</a>:</h4>
<p>or use local notations... actually please use local notations for this</p>

<a name="158512564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512564" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512564">Kevin Buzzard (Feb 14 2019 at 08:42)</a>:</h4>
<p>Mathematicians reason by drawing diagrams sometimes.</p>

<a name="158512573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512573" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512573">Kevin Buzzard (Feb 14 2019 at 08:42)</a>:</h4>
<p>This is hard to do in Lean.</p>

<a name="158512576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512576" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512576">Mario Carneiro (Feb 14 2019 at 08:42)</a>:</h4>
<p>You can't introduce five variables in a diagram in lean</p>

<a name="158512592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512592">Kevin Buzzard (Feb 14 2019 at 08:42)</a>:</h4>
<p>So it's interesting, because there must be some underlying thing we're doing which is completely rigorous</p>

<a name="158512597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512597" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512597">Kevin Buzzard (Feb 14 2019 at 08:42)</a>:</h4>
<p>and hence explicable to Lean</p>

<a name="158512606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512606" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512606">Mario Carneiro (Feb 14 2019 at 08:43)</a>:</h4>
<p>Yes, it's equivalent to a whole stack of variables definitions</p>

<a name="158512609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512609" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512609">Kevin Buzzard (Feb 14 2019 at 08:43)</a>:</h4>
<p>but if you were to ask any mathematician to state the snake lemma</p>

<a name="158512614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512614" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512614">Kevin Buzzard (Feb 14 2019 at 08:43)</a>:</h4>
<p>they would just draw a picture</p>

<a name="158512620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512620" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512620">Johan Commelin (Feb 14 2019 at 08:43)</a>:</h4>
<p>We'll end up writing</p>
<div class="codehilite"><pre><span></span><span class="bp">λ</span> <span class="bp">⟨</span><span class="n">A</span><span class="o">,</span> <span class="n">f</span><span class="o">,</span> <span class="n">B</span><span class="o">,</span> <span class="n">g</span><span class="o">,</span> <span class="n">C</span><span class="o">,</span> <span class="n">h_short_exact</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">foobar</span>
</pre></div>


<p>only to realise that this gives problems later on, because of <code>_match</code>-issues.</p>

<a name="158512625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512625" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512625">Mario Carneiro (Feb 14 2019 at 08:43)</a>:</h4>
<p>if we had a bit more lean support (aka a fork) we could make a tactic that introduces a bunch of variables</p>

<a name="158512677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512677" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512677">Kevin Buzzard (Feb 14 2019 at 08:44)</a>:</h4>
<p>I figured out the "universal surjection" claim above. Reid's surjection is not universal in the usual sense, because there is more than one choice.</p>

<a name="158512697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512697" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512697">Mario Carneiro (Feb 14 2019 at 08:44)</a>:</h4>
<p>choice of sense?</p>

<a name="158512709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512709" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512709">Kevin Buzzard (Feb 14 2019 at 08:45)</a>:</h4>
<p>Reid wrote down an explicit free module F (free with basis the elements of M)</p>

<a name="158512719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512719" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512719">Kevin Buzzard (Feb 14 2019 at 08:45)</a>:</h4>
<p>and said that projective was equivalent to F -&gt; M splitting</p>

<a name="158512729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512729" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512729">Kevin Buzzard (Feb 14 2019 at 08:45)</a>:</h4>
<p>The reason for this is that now if N is a random R-module and we have a surjection N -&gt; M</p>

<a name="158512742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512742" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512742">Kevin Buzzard (Feb 14 2019 at 08:45)</a>:</h4>
<p>then because F is free, F -&gt; M lifts to F -&gt; N</p>

<a name="158512786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512786" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512786">Kevin Buzzard (Feb 14 2019 at 08:46)</a>:</h4>
<p>-- but not necessarily uniquely</p>

<a name="158512806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512806" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512806">Kevin Buzzard (Feb 14 2019 at 08:46)</a>:</h4>
<p>and I can now split N -&gt; M by going from M to F and then down to N</p>

<a name="158512836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512836" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512836">Mario Carneiro (Feb 14 2019 at 08:47)</a>:</h4>
<p>in wiki you want to split a surjection in a different module though</p>

<a name="158512842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512842" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512842">Kevin Buzzard (Feb 14 2019 at 08:47)</a>:</h4>
<p>oh did I screw up?</p>

<a name="158512849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512849" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512849">Kevin Buzzard (Feb 14 2019 at 08:47)</a>:</h4>
<p>Oh, there are two different lifting definitions</p>

<a name="158512850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512850">Mario Carneiro (Feb 14 2019 at 08:47)</a>:</h4>
<p>like your projective module is P and you have a surjection N -&gt;&gt; M and a linear map P -&gt; M</p>

<a name="158512905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512905">Kevin Buzzard (Feb 14 2019 at 08:48)</a>:</h4>
<p>Yeah yeah, there's another one -- "P is projective iff all surjections to P split"</p>

<a name="158512914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512914" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512914">Kevin Buzzard (Feb 14 2019 at 08:48)</a>:</h4>
<p>That's what I'm trying to check, not the more general one. They're equivalent you know ;-)</p>

<a name="158512917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512917" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512917">Mario Carneiro (Feb 14 2019 at 08:48)</a>:</h4>
<p>okay, so you are halfway there</p>

<a name="158512921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512921" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512921">Kevin Buzzard (Feb 14 2019 at 08:48)</a>:</h4>
<p>I know this because they're both the definition of a projective module</p>

<a name="158512958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158512958" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158512958">Kevin Buzzard (Feb 14 2019 at 08:49)</a>:</h4>
<p>I'm proving that if P satisfies Reid's property then every short exact sequence 0 -&gt; M -&gt; N -&gt; P -&gt; 0 splits</p>

<a name="158513024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158513024" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158513024">Kevin Buzzard (Feb 14 2019 at 08:50)</a>:</h4>
<p>and I'm doing it by writing down a morphism of short exact sequences</p>

<a name="158513479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158513479" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158513479">Kevin Buzzard (Feb 14 2019 at 08:58)</a>:</h4>
<p>It's just like alg closure, I'm now a little uncomfortable with this argument even though I've known it for years. Start with P which is Reid-projective. Reid then conjures up a free module which is isomorphic to K + P. Now say N -&gt; P is a surjection. I said "Reid's module is universal, so..." but there is actually no uniqueness in this claim: the projection K + P -&gt; P now lifts (not necessarily uniquely) to a map K + P -&gt; N, because you simply choose a basis for K + P and lift each element randomly and then use universal property of free objects. We now have maps K + P -&gt; N -&gt; P with the composite being the projection, so if P -&gt; K + P is the inclusion then P -&gt; K + P -&gt; N -&gt; P is the identity, hence P -&gt; K + P -&gt; N splits N -&gt; P. Thinking that Reid's object was "universal" leads you to this argument, but the map K + P -&gt; N is not at all canonical.</p>

<a name="158513640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158513640" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158513640">Kevin Buzzard (Feb 14 2019 at 09:01)</a>:</h4>
<p>Anyway, the reason this is somehow one of the more interesting parts of the equivalence from Lean's point of view is that Reid's definition has no universe issues, whereas I am quantifying over all N in the "all surjections split" definition.</p>

<a name="158513927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158513927" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158513927">Mario Carneiro (Feb 14 2019 at 09:06)</a>:</h4>
<p>But this still doesn't answer how to change the codomain of the surjection away from P</p>

<a name="158513934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158513934" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158513934">Kevin Buzzard (Feb 14 2019 at 09:06)</a>:</h4>
<p>no but that's just more standard maths</p>

<a name="158514018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514018" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514018">Kevin Buzzard (Feb 14 2019 at 09:08)</a>:</h4>
<p>Which way do you want to see?</p>

<a name="158514026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514026">Kevin Buzzard (Feb 14 2019 at 09:08)</a>:</h4>
<p>I was just interested in one argument which had as a conclusion that you can quantify over all universes</p>

<a name="158514089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514089">Kevin Buzzard (Feb 14 2019 at 09:10)</a>:</h4>
<p>For decades all these definitions were equivalent to me but now I see that some, in my language, have set-theoretic issues</p>

<a name="158514128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514128" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514128">Kevin Buzzard (Feb 14 2019 at 09:10)</a>:</h4>
<p>Whereas Reid's most definitely does not</p>

<a name="158514283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514283" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514283">Mario Carneiro (Feb 14 2019 at 09:13)</a>:</h4>
<p>Assume it is Reid surjective, show that every surjection M -&gt;&gt; N splits over P -&gt; N</p>

<a name="158514291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514291" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514291">Kevin Buzzard (Feb 14 2019 at 09:13)</a>:</h4>
<p>Ok so the more general statement is just the same principle. Reid's definition shows that there's some K such that P + K is free. Now say A-&gt;B is surjective and we have P -&gt; B. We extend this to P+ K to B via the projection P + K -&gt; P</p>

<a name="158514383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514383" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514383">Kevin Buzzard (Feb 14 2019 at 09:14)</a>:</h4>
<p>Now by surjectivity the map P + K to B lifts to P + K to A</p>

<a name="158514405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514405" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514405">Mario Carneiro (Feb 14 2019 at 09:14)</a>:</h4>
<p>is that what surjectivity does?</p>

<a name="158514409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514409" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514409">Kevin Buzzard (Feb 14 2019 at 09:14)</a>:</h4>
<p>And we have P -&gt; P + K</p>

<a name="158514415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514415" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514415">Mario Carneiro (Feb 14 2019 at 09:14)</a>:</h4>
<p>do we have AC for Mod(R)?</p>

<a name="158514425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514425" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514425">Kevin Buzzard (Feb 14 2019 at 09:14)</a>:</h4>
<p>and on a good day with a following wind the diagram will commute</p>

<a name="158514457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514457" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514457">Kevin Buzzard (Feb 14 2019 at 09:15)</a>:</h4>
<p>I don't know what AC is</p>

<a name="158514474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514474" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514474">Mario Carneiro (Feb 14 2019 at 09:15)</a>:</h4>
<p>oh, I guess we have it: <code>exists_right_inverse_linear_map_of_surjective</code></p>

<a name="158514489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514489" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514489">Mario Carneiro (Feb 14 2019 at 09:15)</a>:</h4>
<p>I mean every surjection splits in Mod(R)</p>

<a name="158514544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514544" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514544">Johan Commelin (Feb 14 2019 at 09:16)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> AC = axiom of choice <span aria-label="lol" class="emoji emoji-1f606" role="img" title="lol">:lol:</span></p>

<a name="158514545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514545" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514545">Kevin Buzzard (Feb 14 2019 at 09:16)</a>:</h4>
<p>The diagram commutes. We think of the map P -&gt; B as P -&gt; P + K -&gt; P -&gt; B</p>

<a name="158514584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514584" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514584">Kevin Buzzard (Feb 14 2019 at 09:17)</a>:</h4>
<p>and then as P -&gt; P + K -&gt; B</p>

<a name="158514589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514589" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514589">Kevin Buzzard (Feb 14 2019 at 09:17)</a>:</h4>
<p>And that's the map we can lift</p>

<a name="158514590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514590" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514590">Mario Carneiro (Feb 14 2019 at 09:17)</a>:</h4>
<p>when you say P + K do you mean lc(P)?</p>

<a name="158514597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514597" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514597">Mario Carneiro (Feb 14 2019 at 09:17)</a>:</h4>
<p>like is that K needed at all?</p>

<a name="158514600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514600" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514600">Kevin Buzzard (Feb 14 2019 at 09:17)</a>:</h4>
<p>Yes</p>

<a name="158514654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514654" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514654">Mario Carneiro (Feb 14 2019 at 09:18)</a>:</h4>
<p>so pi1 : P + K -&gt; P is lc.total and P -&gt; P+K is Reid's inverse</p>

<a name="158514659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514659" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514659">Kevin Buzzard (Feb 14 2019 at 09:18)</a>:</h4>
<p>Reid's definition is that lc(P) is isomorphic to P + K (K the kernel of the canonical map lc(P) -&gt; P)</p>

<a name="158514662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514662">Kevin Buzzard (Feb 14 2019 at 09:18)</a>:</h4>
<p>Right</p>

<a name="158514692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514692" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514692">Kevin Buzzard (Feb 14 2019 at 09:19)</a>:</h4>
<p>And I'm using this basic but fundamental fact that a surjection having an inverse is equivalent to the surjection being a projection</p>

<a name="158514742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514742" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514742">Mario Carneiro (Feb 14 2019 at 09:20)</a>:</h4>
<p>being a projection doesn't mean much to me</p>

<a name="158514749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514749" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514749">Mario Carneiro (Feb 14 2019 at 09:20)</a>:</h4>
<p>but I understand the first thing, so if it's equivalent I'm happy</p>

<a name="158514775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514775" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514775">Kevin Buzzard (Feb 14 2019 at 09:21)</a>:</h4>
<p>Being a projection is a way of extending a map P -&gt; M to a map P + K -&gt; M</p>

<a name="158514780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514780" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514780">Kevin Buzzard (Feb 14 2019 at 09:21)</a>:</h4>
<p>You just let it be 0 on K</p>

<a name="158514796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514796" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514796">Kevin Buzzard (Feb 14 2019 at 09:21)</a>:</h4>
<p>Wait</p>

<a name="158514843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514843">Kevin Buzzard (Feb 14 2019 at 09:22)</a>:</h4>
<p>It's more than an extension</p>

<a name="158514848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514848" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514848">Mario Carneiro (Feb 14 2019 at 09:22)</a>:</h4>
<p>So we split f : A -&gt;&gt; B to f^-1 : B -&gt; A, and the desired map comes from P -&gt; lc(P) -&gt; P -&gt; B -&gt; A</p>

<a name="158514854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514854" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514854">Kevin Buzzard (Feb 14 2019 at 09:22)</a>:</h4>
<p>It's the fact that we can factor any map P -&gt; M as P -&gt; P + K -&gt; M</p>

<a name="158514855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514855" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514855">Kevin Buzzard (Feb 14 2019 at 09:22)</a>:</h4>
<p>That's the key</p>

<a name="158514872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514872" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514872">Kevin Buzzard (Feb 14 2019 at 09:23)</a>:</h4>
<p>f^-1 might not be linear</p>

<a name="158514879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514879" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514879">Mario Carneiro (Feb 14 2019 at 09:23)</a>:</h4>
<p>I mean the inverse coming from that theorem</p>

<a name="158514883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514883" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514883">Mario Carneiro (Feb 14 2019 at 09:23)</a>:</h4>
<p>every surjection splits</p>

<a name="158514884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514884" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514884">Kevin Buzzard (Feb 14 2019 at 09:23)</a>:</h4>
<p>Wait</p>

<a name="158514938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514938" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514938">Kevin Buzzard (Feb 14 2019 at 09:24)</a>:</h4>
<p>A random surjection does not split</p>

<a name="158514947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514947">Kevin Buzzard (Feb 14 2019 at 09:24)</a>:</h4>
<p>This is exactly what we're trying to work around</p>

<a name="158514951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514951" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514951">Mario Carneiro (Feb 14 2019 at 09:24)</a>:</h4>
<p>oh crap that theorem's in vector spaces</p>

<a name="158514953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514953">Johan Commelin (Feb 14 2019 at 09:24)</a>:</h4>
<p>Those are free</p>

<a name="158514965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514965">Johan Commelin (Feb 14 2019 at 09:25)</a>:</h4>
<p>Sorry, I wasn't paying attention. Should have warned you when you started talking about AC</p>

<a name="158514988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514988">Kevin Buzzard (Feb 14 2019 at 09:25)</a>:</h4>
<p>Every vector space has a basis.</p>

<a name="158514992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514992">Mario Carneiro (Feb 14 2019 at 09:25)</a>:</h4>
<p>okay, so then I'm still stuck on</p>
<blockquote>
<p>Now by surjectivity the map P + K to B lifts to P + K to A</p>
</blockquote>

<a name="158514995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158514995" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158514995">Kevin Buzzard (Feb 14 2019 at 09:25)</a>:</h4>
<p>That says that every k-module is free, if k is a field</p>

<a name="158515003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515003" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515003">Kevin Buzzard (Feb 14 2019 at 09:25)</a>:</h4>
<p>but the integers are not so forgiving.</p>

<a name="158515011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515011" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515011">Kevin Buzzard (Feb 14 2019 at 09:26)</a>:</h4>
<p>Z-modules are abelian groups</p>

<a name="158515057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515057" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515057">Kevin Buzzard (Feb 14 2019 at 09:26)</a>:</h4>
<p>and Z/2Z is not free</p>

<a name="158515063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515063" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515063">Mario Carneiro (Feb 14 2019 at 09:26)</a>:</h4>
<p>yeah, I get that not all modules are free, although I don't see immediately what this has to do with inverting surjections, but I can believe it</p>

<a name="158515065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515065" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515065">Kevin Buzzard (Feb 14 2019 at 09:26)</a>:</h4>
<p>and Z/4Z -&gt; Z/2Z is a surjection which does not split, because Z/4Z is not isomorphic to Z/2Z + Z/2Z</p>

<a name="158515075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515075" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515075">Kevin Buzzard (Feb 14 2019 at 09:26)</a>:</h4>
<p>The key definition is that a surjection M -&gt; N <em>splits</em> if there's a linear injection N -&gt; M which is a one-sided inverse</p>

<a name="158515091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515091" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515091">Kevin Buzzard (Feb 14 2019 at 09:27)</a>:</h4>
<p>The lemma is that a surjection splits iff it's isomorphic to a projection</p>

<a name="158515114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515114" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515114">Johan Commelin (Feb 14 2019 at 09:27)</a>:</h4>
<blockquote>
<p>yeah, I get that not all modules are free, although I don't see immediately what this has to do with inverting surjections, but I can believe it</p>
</blockquote>
<p>Free =&gt; projective =&gt; surjections split</p>

<a name="158515115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515115">Kevin Buzzard (Feb 14 2019 at 09:27)</a>:</h4>
<p>If M-&gt;N has kernel K and M -&gt; N splits, then choose a splitting i: N -&gt; M. We now get a map N + K -&gt; M and this is an isomorphism</p>

<a name="158515172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515172" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515172">Kevin Buzzard (Feb 14 2019 at 09:28)</a>:</h4>
<p>The theorem is that if P is projective then all surjections onto P split</p>

<a name="158515178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515178" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515178">Kevin Buzzard (Feb 14 2019 at 09:28)</a>:</h4>
<p>Or maybe it's the definition, who knows</p>

<a name="158515195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515195" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515195">Kevin Buzzard (Feb 14 2019 at 09:29)</a>:</h4>
<blockquote>
<p>okay, so then I'm still stuck on</p>
<blockquote>
<p>Now by surjectivity the map P + K to B lifts to P + K to A</p>
</blockquote>
</blockquote>
<p>This is where we use that P + K is free. We construct a completely non-canonical lift of P+K-&gt;B to P+K-&gt;A</p>

<a name="158515264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515264" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515264">Mario Carneiro (Feb 14 2019 at 09:30)</a>:</h4>
<p>okay, so <code>exists_left_inverse_linear_map_of_injective</code> needs generalizing</p>

<a name="158515270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515270" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515270">Kevin Buzzard (Feb 14 2019 at 09:30)</a>:</h4>
<p>by saying "pick a basis of P+K, because it's free. Choose a random basis element. It gets mapped to an element of A which we know lifts (via a completely random non-linear set-theoretic splitting A -&gt; B) to an element of B. Send the basis element here. Extend by linearity"</p>

<a name="158515314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515314">Kevin Buzzard (Feb 14 2019 at 09:31)</a>:</h4>
<p>The "extend by linearity" line is exactly where you assume that something is free. If I have a random module M and a random generating subset, I can't be defining maps M -&gt; N by saying "send the generators to random things and extend linearly" because the generators might satisfy random relations which won't work in N</p>

<a name="158515319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515319" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515319">Mario Carneiro (Feb 14 2019 at 09:31)</a>:</h4>
<p>the proof constructs a basis C extending the image of a basis of the domain basis</p>

<a name="158515373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515373" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515373">Kevin Buzzard (Feb 14 2019 at 09:32)</a>:</h4>
<p>I am using the obvious basis of lc(P) in my head</p>

<a name="158515376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515376" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515376">Mario Carneiro (Feb 14 2019 at 09:32)</a>:</h4>
<p>both sides need vector space assumption, but the basis on the domain follows if the domain is free, and the basis on the target comes from... where?</p>

<a name="158515377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515377" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515377">Kevin Buzzard (Feb 14 2019 at 09:32)</a>:</h4>
<p>I think that's the only basis in the argument</p>

<a name="158515394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515394">Kevin Buzzard (Feb 14 2019 at 09:32)</a>:</h4>
<p>You have lost me</p>

<a name="158515404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515404" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515404">Mario Carneiro (Feb 14 2019 at 09:32)</a>:</h4>
<p>the second basis is used for the "extend by linearity" part</p>

<a name="158515435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515435" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515435">Mario Carneiro (Feb 14 2019 at 09:33)</a>:</h4>
<p>each basis element of lc(P) goes somewhere, so you take these elements and throw more in to make a basis of B</p>

<a name="158515448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515448" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515448">Kevin Buzzard (Feb 14 2019 at 09:33)</a>:</h4>
<p><code>exists_left_inverse_linear_map_of_injective</code> generalises to the statement that if M is a random module and P is a projective module then every injection M -&gt; P has a one-sided inverse.</p>

<a name="158515499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515499" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515499">Mario Carneiro (Feb 14 2019 at 09:34)</a>:</h4>
<p>oh, oops wrong proof</p>

<a name="158515500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515500" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515500">Mario Carneiro (Feb 14 2019 at 09:34)</a>:</h4>
<p><code>exists_right_inverse_linear_map_of_surjective</code></p>

<a name="158515514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515514" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515514">Mario Carneiro (Feb 14 2019 at 09:34)</a>:</h4>
<p>ah, this one only needs one basis</p>

<a name="158515549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515549" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515549">Mario Carneiro (Feb 14 2019 at 09:35)</a>:</h4>
<p>oh, it's actually a zero cost generalization, there is no need to assume beta is a vector space , except that alpha is a field anyway in the theorem statement</p>

<a name="158515596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515596">Kevin Buzzard (Feb 14 2019 at 09:36)</a>:</h4>
<p><code>exists_right_inverse_linear_map_of_surjective</code> generalizes to the assertion that if P is a projective module then every surjection P -&gt; M has a right inverse</p>

<a name="158515613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515613" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515613">Kevin Buzzard (Feb 14 2019 at 09:36)</a>:</h4>
<p>Every module over a field is a vector space, hence has a basis, hence is free, hence is projective</p>

<a name="158515637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515637" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515637">Kevin Buzzard (Feb 14 2019 at 09:37)</a>:</h4>
<p>Over a general ring you get two new phenomena which stop things from being free.</p>

<a name="158515656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515656" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515656">Kevin Buzzard (Feb 14 2019 at 09:37)</a>:</h4>
<p>The first is that modules over the ring can "wrap around themselves" -- e.g. Z/10Z is a module over Z but {1} isn't a basis because it's linearly dependent -- 10 * 1 = 0</p>

<a name="158515717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515717" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515717">Kevin Buzzard (Feb 14 2019 at 09:38)</a>:</h4>
<p>The second is that you can have abelian groups like Q which have no torsion as Z-modules but which aren't free anyway, because any two elements are linearly dependent</p>

<a name="158515729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515729" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515729">Kevin Buzzard (Feb 14 2019 at 09:38)</a>:</h4>
<p>Neither Q nor Z/10Z is free over Z</p>

<a name="158515733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515733" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515733">Mario Carneiro (Feb 14 2019 at 09:38)</a>:</h4>
<p>right</p>

<a name="158515734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515734" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515734">Kevin Buzzard (Feb 14 2019 at 09:38)</a>:</h4>
<p>But Q is flat over Z :-)</p>

<a name="158515762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515762" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515762">Kevin Buzzard (Feb 14 2019 at 09:39)</a>:</h4>
<p>but that's probably a story for another day</p>

<a name="158515764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515764" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515764">Mario Carneiro (Feb 14 2019 at 09:39)</a>:</h4>
<p>okay, I am convinced that projective modules are interesting enough to have a few theorems in mathlib</p>

<a name="158515822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515822" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515822">Kevin Buzzard (Feb 14 2019 at 09:40)</a>:</h4>
<p>A nice example of a projective module that isn't free is a non-zero ideal in the integers of a number field.</p>

<a name="158515827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515827" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515827">Mario Carneiro (Feb 14 2019 at 09:40)</a>:</h4>
<p>not Z?</p>

<a name="158515830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515830" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515830">Kevin Buzzard (Feb 14 2019 at 09:40)</a>:</h4>
<p>If R = Z[sqrt(-5)] then numbers do not factor uniquely into primes</p>

<a name="158515843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515843">Mario Carneiro (Feb 14 2019 at 09:41)</a>:</h4>
<p>oh right Z is free</p>

<a name="158515849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515849" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515849">Kevin Buzzard (Feb 14 2019 at 09:41)</a>:</h4>
<p>All ideals of Z are principal, and a non-zero ideal is hence free -- the generator is a basis</p>

<a name="158515857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515857" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515857">Kevin Buzzard (Feb 14 2019 at 09:41)</a>:</h4>
<p>But for R you have <code>2*3=(1+sqrt(-5))*(1-sqrt(-5))</code></p>

<a name="158515899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515899" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515899">Kevin Buzzard (Feb 14 2019 at 09:42)</a>:</h4>
<p>and all of these are primes</p>

<a name="158515910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515910" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515910">Mario Carneiro (Feb 14 2019 at 09:42)</a>:</h4>
<p>aside: How do you check stuff like that?</p>

<a name="158515919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515919" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515919">Kevin Buzzard (Feb 14 2019 at 09:43)</a>:</h4>
<p>However uniqueness of factorization is restored if you have the amazing insight to invent "ideal numbers", generalisations of numbers which do have unique factorization, and which historically I believe is the reason that ideals are called ideal.</p>

<a name="158515941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515941" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515941">Kevin Buzzard (Feb 14 2019 at 09:43)</a>:</h4>
<p>The incredibly tedious proof that 2,3, etc are all primes is "embed everything in the complexes and observe that if r in R is non-zero then |r|&gt;=1"</p>

<a name="158515961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158515961" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158515961">Kevin Buzzard (Feb 14 2019 at 09:43)</a>:</h4>
<p>and so an algorithm for checking to see if x is prime is to consider the finitely many elements of R whose norm is &lt;= |x| and see if any of them go into x</p>

<a name="158516006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516006" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516006">Mario Carneiro (Feb 14 2019 at 09:44)</a>:</h4>
<p>Don't some primes factor in number fields like that?</p>

<a name="158516009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516009" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516009">Kevin Buzzard (Feb 14 2019 at 09:44)</a>:</h4>
<p>Normal prime numbers can factor, yes</p>

<a name="158516015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516015" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516015">Mario Carneiro (Feb 14 2019 at 09:44)</a>:</h4>
<p>oh, did you mean something other than 2,3, etc</p>

<a name="158516020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516020">Kevin Buzzard (Feb 14 2019 at 09:44)</a>:</h4>
<p>Oh wait, I am using incorrect notation.</p>

<a name="158516047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516047" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516047">Kevin Buzzard (Feb 14 2019 at 09:45)</a>:</h4>
<p>I should say that if R=Z[sqrt(-5)] then elements of R do not in general factor uniquely into <em>irreducibles</em></p>

<a name="158516060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516060" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516060">Kevin Buzzard (Feb 14 2019 at 09:45)</a>:</h4>
<p>And the tedious proof I gave you above is that 2,3,1+sqrt(-5) and 1-sqrt(-5) are all <em>irreducible</em></p>

<a name="158516063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516063" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516063">Mario Carneiro (Feb 14 2019 at 09:45)</a>:</h4>
<p>aha, not the same because Z{sqrt(-5)] is not a UFD, yes?</p>

<a name="158516069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516069" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516069">Kevin Buzzard (Feb 14 2019 at 09:46)</a>:</h4>
<p>Yeah.</p>

<a name="158516123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516123" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516123">Kevin Buzzard (Feb 14 2019 at 09:46)</a>:</h4>
<p>For Z[sqrt(-5)] you can use the embedding into C as an algorithm for checking for irreducibility.</p>

<a name="158516126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516126" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516126">Kevin Buzzard (Feb 14 2019 at 09:46)</a>:</h4>
<p>(C the complexes)</p>

<a name="158516130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516130" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516130">Mario Carneiro (Feb 14 2019 at 09:46)</a>:</h4>
<p>When you talk about the norm, you mean the norm on C, not that funny number field norm?</p>

<a name="158516144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516144" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516144">Mario Carneiro (Feb 14 2019 at 09:47)</a>:</h4>
<p>a^2 + 5b^2 or something</p>

<a name="158516147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516147" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516147">Kevin Buzzard (Feb 14 2019 at 09:47)</a>:</h4>
<p>Well using the funny number field norm is a bit saner for this example</p>

<a name="158516154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516154" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516154">Kevin Buzzard (Feb 14 2019 at 09:47)</a>:</h4>
<p>because it's nat-valued and is the square of the complex norm</p>

<a name="158516163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516163" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516163">Kevin Buzzard (Feb 14 2019 at 09:47)</a>:</h4>
<p>so for this example the stories are the same.</p>

<a name="158516166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516166" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516166">Mario Carneiro (Feb 14 2019 at 09:48)</a>:</h4>
<p>I guess as long as you have Z[sqrt(-n)] the norm is positive definite so this list is finite</p>

<a name="158516212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516212" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516212">Mario Carneiro (Feb 14 2019 at 09:48)</a>:</h4>
<p>but for Z[sqrt(n)] it's some kind of pell's equation</p>

<a name="158516213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516213" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516213">Kevin Buzzard (Feb 14 2019 at 09:48)</a>:</h4>
<p>So some German mathematician 150 years ago had the idea that 2  and 1+sqrt(-5) seemed to be coprime in the sense that they couldn't find anything dividing both of them</p>

<a name="158516230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516230" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516230">Mario Carneiro (Feb 14 2019 at 09:49)</a>:</h4>
<p>dedekind, I presume?</p>

<a name="158516231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516231" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516231">Kevin Buzzard (Feb 14 2019 at 09:49)</a>:</h4>
<p>For Z[sqrt(n)] you'd be better off using the funny number field norm, but now there are issues because there are infinitely many elements of norm &lt;= B</p>

<a name="158516235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516235" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516235">Kevin Buzzard (Feb 14 2019 at 09:49)</a>:</h4>
<p>so you need tricks to cut your search space down</p>

<a name="158516239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516239" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516239">Kevin Buzzard (Feb 14 2019 at 09:49)</a>:</h4>
<p>the first of which is that you need a good way to solve Pell's equation</p>

<a name="158516246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516246" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516246">Mario Carneiro (Feb 14 2019 at 09:49)</a>:</h4>
<p>is there a reason to believe that the large ones don't matter?</p>

<a name="158516292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516292" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516292">Kevin Buzzard (Feb 14 2019 at 09:50)</a>:</h4>
<p>So dammit 2 and 1+sqrt(-5) seem to be distinct "primes" i.e. irreducible, but we can't solve lambda * 2 + mu * 1+sqrt(-5) = 1</p>

<a name="158516300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516300" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516300">Kevin Buzzard (Feb 14 2019 at 09:50)</a>:</h4>
<p>even though they're "coprime"</p>

<a name="158516301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516301" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516301">Mario Carneiro (Feb 14 2019 at 09:50)</a>:</h4>
<p>lol sorry for the distractions</p>

<a name="158516303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516303" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516303">Kevin Buzzard (Feb 14 2019 at 09:50)</a>:</h4>
<p>and then they were left with this big pile of elements of the form lambda * 2 + mu * (1+sqrt(-5))</p>

<a name="158516310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516310" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516310">Kevin Buzzard (Feb 14 2019 at 09:50)</a>:</h4>
<p>and they left them under a microscope and there was some chemical reaction or something</p>

<a name="158516326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516326" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516326">Kevin Buzzard (Feb 14 2019 at 09:51)</a>:</h4>
<p>and when they came back they realised they'd invented ideals</p>

<a name="158516344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516344" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516344">Kevin Buzzard (Feb 14 2019 at 09:51)</a>:</h4>
<p>and that instead of trying to find 1 in this set, they should just let this entire set be the model for the highest common factor</p>

<a name="158516390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516390" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516390">Kevin Buzzard (Feb 14 2019 at 09:52)</a>:</h4>
<p>and then it turned out that they could multiply two sets of this form</p>

<a name="158516393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516393">Kevin Buzzard (Feb 14 2019 at 09:52)</a>:</h4>
<p>and after the dust had cleared, uniqueness of factorization had been restored!</p>

<a name="158516398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516398">Mario Carneiro (Feb 14 2019 at 09:52)</a>:</h4>
<p>what does that statement mean here?</p>

<a name="158516403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516403" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516403">Kevin Buzzard (Feb 14 2019 at 09:52)</a>:</h4>
<p>So if I=(2,1+sqrt(-5)) and J = (3,1+sqrt(-5)) then I and J are prime ideals</p>

<a name="158516417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516417" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516417">Kevin Buzzard (Feb 14 2019 at 09:53)</a>:</h4>
<p>and 2=I^2</p>

<a name="158516422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516422" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516422">Kevin Buzzard (Feb 14 2019 at 09:53)</a>:</h4>
<p>and if K = (3,1-sqrt(-5)) then K is prime too and 3 = J*K</p>

<a name="158516431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516431" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516431">Kevin Buzzard (Feb 14 2019 at 09:53)</a>:</h4>
<p>and (1+sqrt(-5)) is I*K</p>

<a name="158516483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516483" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516483">Kevin Buzzard (Feb 14 2019 at 09:54)</a>:</h4>
<p>and the non-unique <code>2*3=(1+sqrt(-5))(1-sqrt(-5))</code> now can be written as <code>(I^2)*(J*K)=(I*J)*(I*K)</code></p>

<a name="158516493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516493" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516493">Mario Carneiro (Feb 14 2019 at 09:54)</a>:</h4>
<p>interesting</p>

<a name="158516497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516497" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516497">Kevin Buzzard (Feb 14 2019 at 09:54)</a>:</h4>
<p>which becomes the unique <code>(6)=I^2*J*K</code></p>

<a name="158516501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516501" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516501">Kevin Buzzard (Feb 14 2019 at 09:54)</a>:</h4>
<p>so these sets were behaving better than numbers, so they called them ideal numbers</p>

<a name="158516524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516524" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516524">Mario Carneiro (Feb 14 2019 at 09:55)</a>:</h4>
<p>so why isn't this the even more fundamental theorem of arithmetic?</p>

<a name="158516526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516526" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516526">Kevin Buzzard (Feb 14 2019 at 09:55)</a>:</h4>
<p>and the principal ideal <code>(6)</code> is factoring uniquely into prime ideals</p>

<a name="158516530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516530" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516530">Kevin Buzzard (Feb 14 2019 at 09:55)</a>:</h4>
<p>The correct theorem is that for a Dedekind domain, every non-zero ideal is uniquely the product of prime ideals.</p>

<a name="158516536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516536" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516536">Kevin Buzzard (Feb 14 2019 at 09:55)</a>:</h4>
<p>The proof is that this is true by one of the definitions of a Dedekind domain</p>

<a name="158516577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516577" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516577">Mario Carneiro (Feb 14 2019 at 09:56)</a>:</h4>
<p>lol figures</p>

<a name="158516585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516585" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516585">Kevin Buzzard (Feb 14 2019 at 09:56)</a>:</h4>
<p>Another definition is that it's an integrally closed integral domain for which all non-zero prime ideals are maximal. We have all of those notions in Lean.</p>

<a name="158516590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516590" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516590">Kevin Buzzard (Feb 14 2019 at 09:57)</a>:</h4>
<p>Assuming Kenny PR'ed integrally closed and someone accepted it, which might not be true</p>

<a name="158516600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516600" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516600">Kevin Buzzard (Feb 14 2019 at 09:57)</a>:</h4>
<p>Or maybe Johan PR'ed it</p>

<a name="158516606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516606" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516606">Kevin Buzzard (Feb 14 2019 at 09:57)</a>:</h4>
<p>I know they were both thinking about it but it was when I was mired in teaching hell</p>

<a name="158516610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516610" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516610">Mario Carneiro (Feb 14 2019 at 09:57)</a>:</h4>
<p>We don't have this factorization statement in mathlib, right?</p>

<a name="158516618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516618" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516618">Kevin Buzzard (Feb 14 2019 at 09:57)</a>:</h4>
<p>No, but I did consider setting it as an undergraduate project</p>

<a name="158516620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516620" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516620">Mario Carneiro (Feb 14 2019 at 09:57)</a>:</h4>
<p>or dedekind domains at all</p>

<a name="158516624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516624" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516624">Kevin Buzzard (Feb 14 2019 at 09:58)</a>:</h4>
<p>Right.</p>

<a name="158516669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516669" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516669">Mario Carneiro (Feb 14 2019 at 09:58)</a>:</h4>
<p>but I guess you can also unfold the statement PID =&gt; DD using this definition</p>

<a name="158516673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516673" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516673">Kevin Buzzard (Feb 14 2019 at 09:58)</a>:</h4>
<p>The reason that such a theorem would be important for mathlib, is that the ring of integers of a number field is by definition an integral closure</p>

<a name="158516677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516677" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516677">Kevin Buzzard (Feb 14 2019 at 09:58)</a>:</h4>
<p>and it is not hard to go from that to checking that the ring of integers of a number field is a Dedekind domain</p>

<a name="158516680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516680" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516680">Mario Carneiro (Feb 14 2019 at 09:58)</a>:</h4>
<p>oh wait PID =&gt; DD is trivial isn't it</p>

<a name="158516681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516681" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516681">Kevin Buzzard (Feb 14 2019 at 09:59)</a>:</h4>
<p>However there are other examples, for example <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi mathvariant="double-struck">C</mi></mrow><mo>[</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo>]</mo><mi mathvariant="normal">/</mi><mo>(</mo><msup><mi>Y</mi><mn>2</mn></msup><mo>−</mo><msup><mi>X</mi><mn>3</mn></msup><mo>−</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">\mathbb{C}[X,Y]/(Y^2-X^3-1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base"><span class="mord"><span class="mord mathbb">C</span></span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.22222em;">Y</span><span class="mclose">]</span><span class="mord mathrm">/</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">2</span></span></span></span></span></span></span></span><span class="mbin">−</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">3</span></span></span></span></span></span></span></span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span></p>

<a name="158516693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516693" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516693">Kevin Buzzard (Feb 14 2019 at 09:59)</a>:</h4>
<p>Well, it depends on which definition of DD you use I guess</p>

<a name="158516701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516701" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516701">Kevin Buzzard (Feb 14 2019 at 09:59)</a>:</h4>
<p>You can make everything trivial if you choose your definitions carefully</p>

<a name="158516710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516710" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516710">Kevin Buzzard (Feb 14 2019 at 09:59)</a>:</h4>
<p>PID -&gt; UFD and UFD's are integrally closed</p>

<a name="158516711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516711" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516711">Mario Carneiro (Feb 14 2019 at 09:59)</a>:</h4>
<p>that's my hope</p>

<a name="158516787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516787" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516787">Kevin Buzzard (Feb 14 2019 at 10:00)</a>:</h4>
<p>I think I might have missed out a Noetherian hypothesis in one of my definitions of Dedekind domain; I don't have Cassels-Froehlich to hand</p>

<a name="158516795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516795" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516795">Kevin Buzzard (Feb 14 2019 at 10:00)</a>:</h4>
<p>But again we have it in mathlib</p>

<a name="158516797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516797" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516797">Kenny Lau (Feb 14 2019 at 10:00)</a>:</h4>
<blockquote>
<p>Assuming Kenny PR'ed integrally closed and someone accepted it, which might not be true</p>
</blockquote>
<p>it's still being gradually PR'ed ~ the current one is <a href="https://github.com/leanprover/mathlib/issues/679" target="_blank" title="https://github.com/leanprover/mathlib/issues/679">#679</a> ~</p>

<a name="158516860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516860" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516860">Kevin Buzzard (Feb 14 2019 at 10:00)</a>:</h4>
<p>Maybe I need Noetherian, integrally closed, and all non-zero primes are maximal</p>

<a name="158516912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516912" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516912">Kevin Buzzard (Feb 14 2019 at 10:01)</a>:</h4>
<p>(and a domain)</p>

<a name="158516984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158516984" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158516984">Kevin Buzzard (Feb 14 2019 at 10:02)</a>:</h4>
<p>But if you use the definition that all non-zero ideals factor uniquely into prime ideals then PID -&gt; DD should be very easy. I'm a mathematician, I have no idea what "the" definition of a DD is. I believe that in Cassels-Froehlich it's exactly one of these proposition-definitions.</p>

<a name="158517011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517011" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517011">Kevin Buzzard (Feb 14 2019 at 10:03)</a>:</h4>
<p>The two definitions I've suggested above and I think there's a third one too.</p>

<a name="158517034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517034" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517034">Kevin Buzzard (Feb 14 2019 at 10:03)</a>:</h4>
<p>The reason I mention these things it that if R = Z[sqrt(-5)] then the principal ideals are the free submodules of R, but every ideal is projective.</p>

<a name="158517087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517087">Kevin Buzzard (Feb 14 2019 at 10:04)</a>:</h4>
<p>So it's a good concrete example of a projective non-free module.</p>

<a name="158517097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517097" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517097">Mario Carneiro (Feb 14 2019 at 10:04)</a>:</h4>
<p>is this easy to see concretely with Reid's definition?</p>

<a name="158517101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517101" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517101">Kevin Buzzard (Feb 14 2019 at 10:04)</a>:</h4>
<p>If I=(2,1+sqrt(-5)) as above, then <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>I</mi><mn>2</mn></msup><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">I^2=2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">2</span></span></span></span></span></span></span></span><span class="mrel">=</span><span class="mord mathrm">2</span></span></span></span></p>

<a name="158517106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517106">Kevin Buzzard (Feb 14 2019 at 10:04)</a>:</h4>
<p>and this implies that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi><mo>⊕</mo><mi>I</mi></mrow><annotation encoding="application/x-tex">I\oplus I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mbin">⊕</span><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span> is free</p>

<a name="158517122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517122" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517122">Kevin Buzzard (Feb 14 2019 at 10:05)</a>:</h4>
<p>I have no idea at all how to see it from Reid's definition</p>

<a name="158517142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517142" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517142">Kevin Buzzard (Feb 14 2019 at 10:05)</a>:</h4>
<p>But I bet that, after a struggle, I could come up with a basis for <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi><mo>⊕</mo><mi>I</mi></mrow><annotation encoding="application/x-tex">I\oplus I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mbin">⊕</span><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span>, of size 2</p>

<a name="158517143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517143" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517143">Mario Carneiro (Feb 14 2019 at 10:05)</a>:</h4>
<p>oh you are using the P + K free version</p>

<a name="158517155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517155" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517155">Mario Carneiro (Feb 14 2019 at 10:05)</a>:</h4>
<p>size 2? Not 1?</p>

<a name="158517204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517204" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517204">Kevin Buzzard (Feb 14 2019 at 10:06)</a>:</h4>
<p>Yeah, projective modules have dimension even though they don't have bases</p>

<a name="158517218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517218" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517218">Kevin Buzzard (Feb 14 2019 at 10:06)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span> is "locally free of rank 1"</p>

<a name="158517222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517222" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517222">Mario Carneiro (Feb 14 2019 at 10:06)</a>:</h4>
<p>I mean (2) is principal so it should have dimension 1</p>

<a name="158517236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517236" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517236">Kevin Buzzard (Feb 14 2019 at 10:06)</a>:</h4>
<p>Yes, but <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi><mo>⊕</mo><mi>I</mi></mrow><annotation encoding="application/x-tex">I\oplus I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mbin">⊕</span><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span> is the abstract direct sum</p>

<a name="158517239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517239" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517239">Mario Carneiro (Feb 14 2019 at 10:06)</a>:</h4>
<p>oh I+I not I*I</p>

<a name="158517242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517242" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517242">Kevin Buzzard (Feb 14 2019 at 10:06)</a>:</h4>
<p>it's not <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>I</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">I^2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">2</span></span></span></span></span></span></span></span></span></span></span> which is an ideal-theoretic multiplication</p>

<a name="158517275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517275" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517275">Mario Carneiro (Feb 14 2019 at 10:07)</a>:</h4>
<p>okay so why does I^2 = 2 imply I+I free?</p>

<a name="158517277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517277" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517277">Kevin Buzzard (Feb 14 2019 at 10:07)</a>:</h4>
<p>That's not obvious</p>

<a name="158517329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517329" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517329">Kevin Buzzard (Feb 14 2019 at 10:08)</a>:</h4>
<p>An unhelpful answer is that this is how the picard group of a Dedekind domain works</p>

<a name="158517335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517335" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517335">Mario Carneiro (Feb 14 2019 at 10:08)</a>:</h4>
<p>Are you asserting it from experience or from a high powered theorem?</p>

<a name="158517338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517338" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517338">Mario Carneiro (Feb 14 2019 at 10:08)</a>:</h4>
<p>or both?</p>

<a name="158517339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517339" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517339">Kevin Buzzard (Feb 14 2019 at 10:08)</a>:</h4>
<p>both</p>

<a name="158517385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517385" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517385">Kevin Buzzard (Feb 14 2019 at 10:09)</a>:</h4>
<p>I would rather argue that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span> is projective because by definition a module is projective iff it is locally free</p>

<a name="158517457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517457" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517457">Kevin Buzzard (Feb 14 2019 at 10:10)</a>:</h4>
<p>and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span> is locally free because the localisations of a Dedekind domain are 1-dimensional regular local rings and over such a ring all projective modules are free</p>

<a name="158517462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517462" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517462">Kevin Buzzard (Feb 14 2019 at 10:10)</a>:</h4>
<p>I think that argument uses less machinery but it's still hopeless</p>

<a name="158517464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517464" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517464">Kevin Buzzard (Feb 14 2019 at 10:10)</a>:</h4>
<p>I'm sure there will be an elementary argument</p>

<a name="158517472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517472" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517472">Mario Carneiro (Feb 14 2019 at 10:10)</a>:</h4>
<p>wow you have high powered theorems up all your sleeves</p>

<a name="158517586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517586" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517586">Kevin Buzzard (Feb 14 2019 at 10:12)</a>:</h4>
<p>meaning that I've forgotten all the low-level proofs :-/</p>

<a name="158517605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517605" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517605">Mario Carneiro (Feb 14 2019 at 10:13)</a>:</h4>
<p>It's not necessarily a bad thing, I'd rather have the high powered theorem than an ad hoc argument</p>

<a name="158517727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517727" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517727">Kevin Buzzard (Feb 14 2019 at 10:14)</a>:</h4>
<p>Geometrically, what we are doing is analysing 1-dimensional rings. This is not dimension in the sense of number of basis elements, this is a different use of the word</p>

<a name="158517739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517739" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517739">Kevin Buzzard (Feb 14 2019 at 10:14)</a>:</h4>
<p>If R is a Dedekind domain then Spec(R) is a smooth curve</p>

<a name="158517781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517781" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517781">Kevin Buzzard (Feb 14 2019 at 10:15)</a>:</h4>
<p>and nowadays I think about algebra using R as being geometric statements about this curve</p>

<a name="158517838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517838" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517838">Kevin Buzzard (Feb 14 2019 at 10:16)</a>:</h4>
<p>In fact I should say that in some sense this is a <em>bad</em> thing about the current status of mathlib. this Spec trick absolutely relies on the fact that R is commutative.</p>

<a name="158517866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517866" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517866">Kevin Buzzard (Feb 14 2019 at 10:16)</a>:</h4>
<p>So all of the theory of modules which we are building up all has these inbuilt assumptions that R is commutative because it's the only case I've ever cared about, and I know how to steer it really well, and I point people like Kenny to books about commutative rings</p>

<a name="158517884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517884" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517884">Mario Carneiro (Feb 14 2019 at 10:17)</a>:</h4>
<p>lol I'm pretty sure this is your fault</p>

<a name="158517887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517887" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517887">Kevin Buzzard (Feb 14 2019 at 10:17)</a>:</h4>
<p>But some of the more basic stuff, like all the foundational work I was looking at yesterday in mathlib about how modules over a commutative ring form a lattice etc</p>

<a name="158517895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517895" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517895">Mario Carneiro (Feb 14 2019 at 10:17)</a>:</h4>
<p>I would have left comm out everywhere and you would have called me crazy</p>

<a name="158517906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517906">Kevin Buzzard (Feb 14 2019 at 10:17)</a>:</h4>
<p>all of that works for modules over a non-commutative ring</p>

<a name="158517966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517966" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517966">Mario Carneiro (Feb 14 2019 at 10:18)</a>:</h4>
<p>in metamath vector spaces are over a division ring</p>

<a name="158517970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517970" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517970">Mario Carneiro (Feb 14 2019 at 10:18)</a>:</h4>
<p>literally the whole theory goes through</p>

<a name="158517984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517984" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517984">Kevin Buzzard (Feb 14 2019 at 10:18)</a>:</h4>
<p>It would not surprise me if you could replace <code>comm_ring</code> by <code>ring</code> in some of those mathlib files and they would still compile</p>

<a name="158517997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158517997" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158517997">Kevin Buzzard (Feb 14 2019 at 10:18)</a>:</h4>
<p>It's just that all us algebraic geometers know that there is no interesting example of a ring which isn't commutative :-)</p>

<a name="158518004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518004" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518004">Mario Carneiro (Feb 14 2019 at 10:18)</a>:</h4>
<p>until you do</p>

<a name="158518016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518016" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518016">Kevin Buzzard (Feb 14 2019 at 10:19)</a>:</h4>
<p>and one day an algebraist will stumble over this work and will be like "WTF have you idiots done??"</p>

<a name="158518084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518084" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518084">Kevin Buzzard (Feb 14 2019 at 10:20)</a>:</h4>
<p>I should get to work. Let me finish with this. The <em>class group</em> of a Dedekind domain is the set of isomorphism classes of non-zero ideals!</p>

<a name="158518102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518102" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518102">Mario Carneiro (Feb 14 2019 at 10:20)</a>:</h4>
<p>is that a group or is the word just for decoration?</p>

<a name="158518108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518108" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518108">Kevin Buzzard (Feb 14 2019 at 10:20)</a>:</h4>
<p>Miraculously, this set is a group, because (and this needs checking) if I and J are isomorphic, then so are <code>I*K</code> and <code>J*K</code></p>

<a name="158518140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518140" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518140">Kevin Buzzard (Feb 14 2019 at 10:21)</a>:</h4>
<p>and this is because two ideals <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>J</mi></mrow><annotation encoding="application/x-tex">J</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.09618em;">J</span></span></span></span> are isomorphic iff there is an element <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>λ</mi></mrow><annotation encoding="application/x-tex">\lambda</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">λ</span></span></span></span> of the field of fractions of the Dedekind domain such that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>λ</mi><mi>I</mi><mo>=</mo><mi>J</mi></mrow><annotation encoding="application/x-tex">\lambda I=J</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">λ</span><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.09618em;">J</span></span></span></span></p>

<a name="158518146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518146" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518146">Mario Carneiro (Feb 14 2019 at 10:21)</a>:</h4>
<p>isomorphism of ideals means an automorphism of R that sends I to J?</p>

<a name="158518148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518148" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518148">Kevin Buzzard (Feb 14 2019 at 10:21)</a>:</h4>
<p>It means abstractly isomorphic as modules</p>

<a name="158518205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518205" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518205">Kevin Buzzard (Feb 14 2019 at 10:22)</a>:</h4>
<p>but a much better definition of the equivalence relation would be the one using the field of fractions</p>

<a name="158518237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518237" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518237">Kevin Buzzard (Feb 14 2019 at 10:22)</a>:</h4>
<p>For example all principal ideals are related (let me say "related" not "isomorphic") because to relate <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>a</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">(a)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mopen">(</span><span class="mord mathit">a</span><span class="mclose">)</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mi>b</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">(b)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mopen">(</span><span class="mord mathit">b</span><span class="mclose">)</span></span></span></span> you just multiply by <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mi mathvariant="normal">/</mi><mi>a</mi></mrow><annotation encoding="application/x-tex">b/a</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">b</span><span class="mord mathrm">/</span><span class="mord mathit">a</span></span></span></span></p>

<a name="158518253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518253" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518253">Kevin Buzzard (Feb 14 2019 at 10:23)</a>:</h4>
<p>This is an equivalence relation. The equivalence class of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>=</mo><mo>(</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">R=(1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mrel">=</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span> is all the principal ideals</p>

<a name="158518255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518255" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518255">Mario Carneiro (Feb 14 2019 at 10:23)</a>:</h4>
<p>aha, so the field of fractions is a group action on the ideals?</p>

<a name="158518268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518268" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518268">Mario Carneiro (Feb 14 2019 at 10:23)</a>:</h4>
<p>nonzero elements of the field, I assume</p>

<a name="158518270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518270" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518270">Kevin Buzzard (Feb 14 2019 at 10:23)</a>:</h4>
<p>The best way to think about it is to define a <em>fractional ideal</em> to be a...let me set up notation</p>

<a name="158518323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518323" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518323">Kevin Buzzard (Feb 14 2019 at 10:24)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> a Dedekind domain, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07153em;">K</span></span></span></span> its field of fractions</p>

<a name="158518337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518337" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518337">Kevin Buzzard (Feb 14 2019 at 10:24)</a>:</h4>
<p>e.g. <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>=</mo><mrow><mi mathvariant="double-struck">Z</mi></mrow></mrow><annotation encoding="application/x-tex">R=\mathbb{Z}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68889em;"></span><span class="strut bottom" style="height:0.68889em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mrel">=</span><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi><mo>=</mo><mrow><mi mathvariant="double-struck">Q</mi></mrow></mrow><annotation encoding="application/x-tex">K=\mathbb{Q}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68889em;"></span><span class="strut bottom" style="height:0.85556em;vertical-align:-0.16667em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07153em;">K</span><span class="mrel">=</span><span class="mord"><span class="mord mathbb">Q</span></span></span></span></span></p>

<a name="158518347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518347" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518347">Kevin Buzzard (Feb 14 2019 at 10:24)</a>:</h4>
<p>or R=Z[sqrt(-5)] and K=Q(sqrt(-5))</p>

<a name="158518355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518355" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518355">Kevin Buzzard (Feb 14 2019 at 10:24)</a>:</h4>
<p>A <em>fractional ideal</em> is an "ideal with denominator"</p>

<a name="158518376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518376" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518376">Kevin Buzzard (Feb 14 2019 at 10:25)</a>:</h4>
<p>i.e. a subset <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>J</mi></mrow><annotation encoding="application/x-tex">J</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.09618em;">J</span></span></span></span> of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07153em;">K</span></span></span></span> such that there exists some non-zero <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mo>∈</mo><mi>R</mi></mrow><annotation encoding="application/x-tex">r\in R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mrel">∈</span><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> such that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mi>J</mi></mrow><annotation encoding="application/x-tex">rJ</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.09618em;">J</span></span></span></span> is a regular non-zero ideal</p>

<a name="158518387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518387" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518387">Kevin Buzzard (Feb 14 2019 at 10:25)</a>:</h4>
<p>For example <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mn>3</mn></mrow><mrow><mn>7</mn></mrow></mfrac><mrow><mi mathvariant="double-struck">Z</mi></mrow></mrow><annotation encoding="application/x-tex">\frac{3}{7}\mathbb{Z}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="base"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">7</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span> is a fractional ideal of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi mathvariant="double-struck">Z</mi></mrow></mrow><annotation encoding="application/x-tex">\mathbb{Z}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68889em;"></span><span class="strut bottom" style="height:0.68889em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span></p>

<a name="158518395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518395" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518395">Mario Carneiro (Feb 14 2019 at 10:25)</a>:</h4>
<p>btw we definitely need a predicate version of "field of fractions", so you can say that</p>

<a name="158518442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518442" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518442">Kevin Buzzard (Feb 14 2019 at 10:26)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><mfrac><mrow><mn>3</mn></mrow><mrow><mn>7</mn></mrow></mfrac><mi>n</mi><mspace width="0.16667em"></mspace><mo>:</mo><mspace width="0.16667em"></mspace><mi>n</mi><mo>∈</mo><mrow><mi mathvariant="double-struck">Z</mi></mrow><mspace width="0.16667em"></mspace><mo>}</mo></mrow><annotation encoding="application/x-tex">\{\frac{3}{7}n\,:\,n\in\mathbb{Z}\,\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="base"><span class="mopen">{</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">7</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathit">n</span><span class="mrel"><span class="mspace thinspace"></span><span class="mrel">:</span></span><span class="mord mathit"><span class="mspace thinspace"></span><span class="mord mathit">n</span></span><span class="mrel">∈</span><span class="mord"><span class="mord mathbb">Z</span></span><span class="mclose"><span class="mspace thinspace"></span><span class="mclose">}</span></span></span></span></span></p>

<a name="158518463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518463" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518463">Kevin Buzzard (Feb 14 2019 at 10:26)</a>:</h4>
<p>You can multiply fractional ideals together. A fractional ideal is an R-module, in fact it's a sub-R-module of K</p>

<a name="158518482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518482" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518482">Mario Carneiro (Feb 14 2019 at 10:27)</a>:</h4>
<p>Isn't that the same as just saying <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi><mi mathvariant="normal">/</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">I/r</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span> for some nonzero <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mo>∈</mo><mi>R</mi></mrow><annotation encoding="application/x-tex">r\in R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mrel">∈</span><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span>?</p>

<a name="158518488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518488" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518488">Kevin Buzzard (Feb 14 2019 at 10:27)</a>:</h4>
<p>There's an action of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>K</mi><mo>×</mo></msup></mrow><annotation encoding="application/x-tex">K^\times</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">×</span></span></span></span></span></span></span></span></span></span></span> on the fractional ideals. Yes, it's the same</p>

<a name="158518495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518495" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518495">Kevin Buzzard (Feb 14 2019 at 10:27)</a>:</h4>
<p>A fractional ideal is <em>principal</em> if it's of the form <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>κ</mi><mi>R</mi></mrow><annotation encoding="application/x-tex">\kappa R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">κ</span><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> for some <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>κ</mi><mo>∈</mo><msup><mi>K</mi><mo>×</mo></msup></mrow><annotation encoding="application/x-tex">\kappa\in K^\times</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.810431em;vertical-align:-0.0391em;"></span><span class="base"><span class="mord mathit">κ</span><span class="mrel">∈</span><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">×</span></span></span></span></span></span></span></span></span></span></span></p>

<a name="158518502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518502" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518502">Kevin Buzzard (Feb 14 2019 at 10:27)</a>:</h4>
<p>(<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>K</mi><mo>×</mo></msup></mrow><annotation encoding="application/x-tex">K^\times</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">×</span></span></span></span></span></span></span></span></span></span></span> is the group of non-zero element of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07153em;">K</span></span></span></span>)</p>

<a name="158518574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518574">Kevin Buzzard (Feb 14 2019 at 10:28)</a>:</h4>
<p>The group acts on the fractional ideals, one orbit is the principal fractional ideals, and if unique factorization fails in <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> then there are other orbits</p>

<a name="158518591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518591" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518591">Kevin Buzzard (Feb 14 2019 at 10:29)</a>:</h4>
<p>Say two ideals are equivalent if they're in the same orbit. Then the equivalence classes form a group, the so-called ideal class group.</p>

<a name="158518592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518592">Johan Commelin (Feb 14 2019 at 10:29)</a>:</h4>
<blockquote>
<p>The group acts on the fractional ideals, one orbit is the principal fractional ideals, and if unique factorization fails in <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> then there are other orbits</p>
</blockquote>
<p><strong>iff</strong></p>

<a name="158518625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518625" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518625">Kevin Buzzard (Feb 14 2019 at 10:29)</a>:</h4>
<p>A mathematician would say that the ideal class group "measures" the failure of uniqueness of factorization</p>

<a name="158518698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518698" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518698">Mario Carneiro (Feb 14 2019 at 10:30)</a>:</h4>
<p>Is the fact about <code>I*K ~ J*K</code> only valid in DDs?</p>

<a name="158518703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518703" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518703">Kevin Buzzard (Feb 14 2019 at 10:30)</a>:</h4>
<p>i.e. the ideal class group of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> is the trivial group iff <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> is a PID iff <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span></span> is a UFD</p>

<a name="158518729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518729" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518729">Kevin Buzzard (Feb 14 2019 at 10:30)</a>:</h4>
<p>I have never seen the concept of fractional ideal used outside the theory of DD's but it would not surprise me at all if parts of the general theory could be set up for general ID's</p>

<a name="158518750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518750" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518750">Johan Commelin (Feb 14 2019 at 10:31)</a>:</h4>
<p>Well, you have <code>ClGr(R) = Pic(Spec(R))</code></p>

<a name="158518758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518758">Johan Commelin (Feb 14 2019 at 10:31)</a>:</h4>
<p>And you have <code>Pic(X)</code> for any scheme <code>X</code></p>

<a name="158518759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518759" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518759">Kevin Buzzard (Feb 14 2019 at 10:31)</a>:</h4>
<p>In a DD it's true that two fractional ideals are abstractly isomorphic as R-modules if and only if they are in the same orbit under <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>K</mi><mo>×</mo></msup></mrow><annotation encoding="application/x-tex">K^\times</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.771331em;"></span><span class="strut bottom" style="height:0.771331em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">×</span></span></span></span></span></span></span></span></span></span></span></p>

<a name="158518843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518843">Kevin Buzzard (Feb 14 2019 at 10:32)</a>:</h4>
<p>So in algebraic geometry there is this vast generalisation of class groups, where you consider isomorphism classes of rank 1 projective modules</p>

<a name="158518849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518849" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518849">Johan Commelin (Feb 14 2019 at 10:32)</a>:</h4>
<p>So in some sense there is a very big generalisation. It uses "fractional ideal" = "locally free of rank 1".</p>

<a name="158518857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518857" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518857">Kevin Buzzard (Feb 14 2019 at 10:32)</a>:</h4>
<p>but I've never thought about how it translates into fractional ideals</p>

<a name="158518889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518889">Johan Commelin (Feb 14 2019 at 10:32)</a>:</h4>
<p>It's certainly not defeq (-;</p>

<a name="158518890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518890" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518890">Kevin Buzzard (Feb 14 2019 at 10:33)</a>:</h4>
<p>So for R=Z the class group is trivial because all fractional ideals are principal</p>

<a name="158518908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518908" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518908">Kevin Buzzard (Feb 14 2019 at 10:33)</a>:</h4>
<p>but for R=Z[sqrt(-5)] the class group turns out to have size 2</p>

<a name="158518931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518931" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518931">Johan Commelin (Feb 14 2019 at 10:33)</a>:</h4>
<p>Now comes a high-powered theorem... drum roll...</p>

<a name="158518991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158518991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158518991">Kevin Buzzard (Feb 14 2019 at 10:34)</a>:</h4>
<p>lemme say one moer thing first</p>

<a name="158519007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519007">Kevin Buzzard (Feb 14 2019 at 10:34)</a>:</h4>
<p>and because of the group structure you can conclude the highly non-obvious fact that if <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi></mrow><annotation encoding="application/x-tex">I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span></span> is any random ideal of Z[sqrt(-5)] then <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>I</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">I^2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">2</span></span></span></span></span></span></span></span></span></span></span> is a principal ideal</p>

<a name="158519018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519018" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519018">Kevin Buzzard (Feb 14 2019 at 10:34)</a>:</h4>
<p>I don't think that this is at all obvious</p>

<a name="158519035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519035">Kevin Buzzard (Feb 14 2019 at 10:34)</a>:</h4>
<p>Anyway, class groups are cool, they're random abelian groups attached to Dedekind domains</p>

<a name="158519056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519056" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519056">Mario Carneiro (Feb 14 2019 at 10:35)</a>:</h4>
<p>I get the sense that calculating class groups for Z[sqrt(-n)] is one of those things mathematicians like to do</p>

<a name="158519057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519057" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519057">Kevin Buzzard (Feb 14 2019 at 10:35)</a>:</h4>
<p>and the class group of the ring of integers of a number field is always finite :-)</p>

<a name="158519072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519072" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519072">Kevin Buzzard (Feb 14 2019 at 10:35)</a>:</h4>
<p>Yes, mathematicians get very excited about class groups of Z[sqrt(-n)]</p>

<a name="158519084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519084" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519084">Mario Carneiro (Feb 14 2019 at 10:35)</a>:</h4>
<p>any chance of a decision procedure?</p>

<a name="158519097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519097" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519097">Johan Commelin (Feb 14 2019 at 10:36)</a>:</h4>
<p>Yes, there are algorithms for this.</p>

<a name="158519146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519146" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519146">Kevin Buzzard (Feb 14 2019 at 10:36)</a>:</h4>
<p>If n is something like 27 then strictly speaking this is not a Dedekind domain because it's not the full ring of integers, but using this alg geom generalization you have some variant of the class group anyway</p>

<a name="158519173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519173" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519173">Kevin Buzzard (Feb 14 2019 at 10:36)</a>:</h4>
<p>There have been really deep theorems proved about these class groups, for example the class group of the ring of integers of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi mathvariant="double-struck">Q</mi></mrow><mo>(</mo><mo>(</mo><mo>−</mo><mn>1</mn><mn>6</mn><mn>3</mn><msup><mo>)</mo><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">\mathbb{Q}((-163)^{1/2})</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.138em;vertical-align:-0.25em;"></span><span class="base"><span class="mord"><span class="mord mathbb">Q</span></span><span class="mopen">(</span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathrm">1</span><span class="mord mathrm">6</span><span class="mord mathrm">3</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">1</span><span class="mord mathrm mtight">/</span><span class="mord mathrm mtight">2</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> is trivial</p>

<a name="158519180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519180" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519180">Kevin Buzzard (Feb 14 2019 at 10:37)</a>:</h4>
<p>but that's the last one</p>

<a name="158519200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519200" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519200">Kevin Buzzard (Feb 14 2019 at 10:37)</a>:</h4>
<p>For <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>&lt;</mo><mo>−</mo><mn>1</mn><mn>6</mn><mn>3</mn></mrow><annotation encoding="application/x-tex">n&lt;-163</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord mathit">n</span><span class="mrel">&lt;</span><span class="mord">−</span><span class="mord mathrm">1</span><span class="mord mathrm">6</span><span class="mord mathrm">3</span></span></span></span> squarefree, the class group is never trivial</p>

<a name="158519201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519201" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519201">Mario Carneiro (Feb 14 2019 at 10:37)</a>:</h4>
<p>I recall hearing about how Z[sqrt(-163)] is the last UFD</p>

<a name="158519208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519208" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519208">Kevin Buzzard (Feb 14 2019 at 10:37)</a>:</h4>
<p>Right</p>

<a name="158519214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519214" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519214">Kevin Buzzard (Feb 14 2019 at 10:37)</a>:</h4>
<p>An even stronger statement is true -- the size of the class group tends to infinity as <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">n</span></span></span></span> tends to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">-\infty</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord">−</span><span class="mord mathrm">∞</span></span></span></span></p>

<a name="158519238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519238" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519238">Kevin Buzzard (Feb 14 2019 at 10:37)</a>:</h4>
<p>so the failure of unique factorization gets worse and worse</p>

<a name="158519294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519294" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519294">Kevin Buzzard (Feb 14 2019 at 10:38)</a>:</h4>
<p>This is pretty much the culmination (the statement, not the proof) of the algebraic number theory course at Imperial.</p>

<a name="158519318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519318">Kevin Buzzard (Feb 14 2019 at 10:38)</a>:</h4>
<p>Chris and others proved most of the main theorems of the basic number theory course last summer.</p>

<a name="158519323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519323" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519323">Mario Carneiro (Feb 14 2019 at 10:38)</a>:</h4>
<p>so, worth it for mathlib?</p>

<a name="158519328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519328" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519328">Kevin Buzzard (Feb 14 2019 at 10:39)</a>:</h4>
<p>But we have not begun to scratch the surface of the algebraic number theory course.</p>

<a name="158519339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519339" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519339">Mario Carneiro (Feb 14 2019 at 10:39)</a>:</h4>
<p>it's sometimes hard to tell how much is playing with examples and how much is big theorems</p>

<a name="158519353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519353" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519353">Kevin Buzzard (Feb 14 2019 at 10:39)</a>:</h4>
<p>Who knows what's worth it for mathlib. But one definition I've been using is "if it's in a standard undergraduate curriculum, there is a case for it being in mathlib"</p>

<a name="158519405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519405" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519405">Mario Carneiro (Feb 14 2019 at 10:40)</a>:</h4>
<p>In a perfect world, I would like to have all the big theorems and have decision procedures for all the examples</p>

<a name="158519434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519434">Kevin Buzzard (Feb 14 2019 at 10:40)</a>:</h4>
<p>That's why I made the issue about Cauchy's theorem, to remind me, whenever I think "yay we have all of this 3rd year course, and most of that 3rd year course, and we're now ready to start on that 3rd year course"</p>

<a name="158519451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519451" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519451">Kevin Buzzard (Feb 14 2019 at 10:40)</a>:</h4>
<p>I should then remember that there is a big 2nd year course that we are not even ready to <em>start</em> formalising</p>

<a name="158519452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519452" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519452">Mario Carneiro (Feb 14 2019 at 10:40)</a>:</h4>
<p>I'm 100% with you on Cauchy's theorem, that's been a blocker for me forever</p>

<a name="158519457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519457" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519457">Kevin Buzzard (Feb 14 2019 at 10:40)</a>:</h4>
<p>i.e. we can't even formalise the statement of the main theorem of that course</p>

<a name="158519479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519479" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519479">Mario Carneiro (Feb 14 2019 at 10:41)</a>:</h4>
<p>I never managed it in metamath, got stuck debating how general to make it</p>

<a name="158519481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519481" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519481">Kevin Buzzard (Feb 14 2019 at 10:41)</a>:</h4>
<p>We have enough comm alg in Lean now to formalise all the statements of the theorems in the algebraic number theory course, and in the correct generality too.</p>

<a name="158519567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519567" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519567">Kevin Buzzard (Feb 14 2019 at 10:42)</a>:</h4>
<p>In the course at Imperial we only prove that all non-zero ideals are uniquely the product of prime ideals for integers of number fields</p>

<a name="158519574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519574">Kevin Buzzard (Feb 14 2019 at 10:42)</a>:</h4>
<p>However the proofs all extend easily to Dedekind domains</p>

<a name="158519588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519588">Kevin Buzzard (Feb 14 2019 at 10:42)</a>:</h4>
<p>The class group of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi mathvariant="double-struck">C</mi></mrow><mo>[</mo><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mo>]</mo><mi mathvariant="normal">/</mi><mo>(</mo><msup><mi>Y</mi><mn>2</mn></msup><mo>−</mo><msup><mi>X</mi><mn>3</mn></msup><mo>−</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">\mathbb{C}[X,Y]/(Y^2-X^3-1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="base"><span class="mord"><span class="mord mathbb">C</span></span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.22222em;">Y</span><span class="mclose">]</span><span class="mord mathrm">/</span><span class="mopen">(</span><span class="mord"><span class="mord mathit" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">2</span></span></span></span></span></span></span></span><span class="mbin">−</span><span class="mord"><span class="mord mathit" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">3</span></span></span></span></span></span></span></span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span> is uncountably infinite however :-)</p>

<a name="158519608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519608" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519608">Kevin Buzzard (Feb 14 2019 at 10:43)</a>:</h4>
<p>so the proof that the class group of the integers of a number field is finite is of arithmetic nature, and needs number fields.</p>

<a name="158519666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519666" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519666">Kevin Buzzard (Feb 14 2019 at 10:44)</a>:</h4>
<p>All non-zero primes are maximal, but finiteness of class group is implied by the further finiteness assumption that if you quotient out by one of these maximal ideals, the field you get is a finite field.</p>

<a name="158519682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519682" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519682">Kevin Buzzard (Feb 14 2019 at 10:44)</a>:</h4>
<p>There are algorithms for computing class groups, but it would not surprise me if none of them ever terminated in Lean.</p>

<a name="158519704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519704" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519704">Kevin Buzzard (Feb 14 2019 at 10:45)</a>:</h4>
<p>Although one has to be optimistic that we could get as far as Q(sqrt(-5))</p>

<a name="158519718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519718" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519718">Kevin Buzzard (Feb 14 2019 at 10:45)</a>:</h4>
<p><em>rofl</em> we might need a better approximation for <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.03588em;">π</span></span></span></span> first :-)</p>

<a name="158519778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519778" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519778">Kevin Buzzard (Feb 14 2019 at 10:46)</a>:</h4>
<p>The proofs that the algorithms are correct use embeddings into the complexes, and logarithms</p>

<a name="158519788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519788" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519788">Kevin Buzzard (Feb 14 2019 at 10:46)</a>:</h4>
<p>oh shit and some integration</p>

<a name="158519794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519794" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519794">Kevin Buzzard (Feb 14 2019 at 10:46)</a>:</h4>
<p>hmm</p>

<a name="158519800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519800">Kevin Buzzard (Feb 14 2019 at 10:46)</a>:</h4>
<p>maybe we'd better make them meta algorithms</p>

<a name="158519819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158519819" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158519819">Kevin Buzzard (Feb 14 2019 at 10:47)</a>:</h4>
<p>I know pi to 100 decimal places, I'd better start working on my decimal expansions PR</p>

<a name="158539535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158539535" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158539535">Patrick Massot (Feb 14 2019 at 15:47)</a>:</h4>
<blockquote>
<p>okay, I am convinced that projective modules are interesting enough to have a few theorems in mathlib</p>
</blockquote>
<p>Epic quote.</p>

<a name="158542617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158542617" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158542617">Kevin Buzzard (Feb 14 2019 at 16:26)</a>:</h4>
<p>yeah it made me snigger too. Apparently line bundles are an important feature in geometry :-)</p>

<a name="158542991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158542991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158542991">Kevin Buzzard (Feb 14 2019 at 16:31)</a>:</h4>
<p>Vector bundles even!</p>

<a name="158543086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158543086" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158543086">Kevin Buzzard (Feb 14 2019 at 16:32)</a>:</h4>
<p>Now if only we had manifolds to put them on :P</p>

<a name="158544539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158544539" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158544539">Reid Barton (Feb 14 2019 at 16:52)</a>:</h4>
<p>Should we prove Swan's theorem?</p>

<a name="158544717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158544717" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158544717">Kevin Buzzard (Feb 14 2019 at 16:55)</a>:</h4>
<p>I think we might be a way off that. But sure, let's prove all the theorems.</p>

<a name="158544824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158544824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158544824">Kevin Buzzard (Feb 14 2019 at 16:56)</a>:</h4>
<p>I feel that maybe in the distant future when we have some cohomology we might be able to get Serre's version. To get the manifold version it might be best to have manifolds first.</p>

<a name="158545165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158545165" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158545165">Reid Barton (Feb 14 2019 at 17:00)</a>:</h4>
<p>I was thinking of the version for compact Hausdorff spaces</p>

<a name="158545303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158545303" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158545303">Kevin Buzzard (Feb 14 2019 at 17:02)</a>:</h4>
<p>Oh I'm just looking at Wikipedia, I'm not sure I knew about that version. This will convince Mario that projective modules are useful because it shows they're equivalent to something he's never heard of, right?</p>

<a name="158545373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158545373" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158545373">Kevin Buzzard (Feb 14 2019 at 17:03)</a>:</h4>
<p>Is the proof straightforward?</p>

<a name="158545424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158545424" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158545424">Kevin Buzzard (Feb 14 2019 at 17:04)</a>:</h4>
<p>"projective modules over commutative rings are like vector bundles on compact spaces".</p>

<a name="158545550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158545550" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158545550">Reid Barton (Feb 14 2019 at 17:05)</a>:</h4>
<p>... kind of? I only took a quick look but it seems like the main facts it uses are things like the existence of partitions of unity and projective iff locally free</p>

<a name="158545623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158545623" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158545623">Kevin Buzzard (Feb 14 2019 at 17:06)</a>:</h4>
<p>Oh, we only have Reid-projective at the minute :-)</p>

<a name="158545939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158545939" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158545939">Reid Barton (Feb 14 2019 at 17:11)</a>:</h4>
<p>I'm not sure we need more big projects but this would tie together the active parts of mathlib in a neat way</p>

<a name="158546198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158546198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158546198">Patrick Massot (Feb 14 2019 at 17:14)</a>:</h4>
<p>I have a better big project: do this topology reorganization and file splitting <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>

<a name="158546221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158546221" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158546221">Kevin Buzzard (Feb 14 2019 at 17:15)</a>:</h4>
<p>I thought topology got reorganised?</p>

<a name="158546232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158546232" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158546232">Patrick Massot (Feb 14 2019 at 17:15)</a>:</h4>
<p>only the very first step of the reorganization</p>

<a name="158546315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158546315" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158546315">Patrick Massot (Feb 14 2019 at 17:16)</a>:</h4>
<p>Then I drafted a less trivial step, but everybody was busy, and now many things have been added so we need to start over</p>

<a name="158546331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158546331" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158546331">Patrick Massot (Feb 14 2019 at 17:16)</a>:</h4>
<p>This kind of reorganization has to be very quick from PR to merge</p>


{% endraw %}

{% include archive_update.html %}