---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/58886partialorderformatrix.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html">partial order for matrix</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="134185883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134185883" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134185883">Tobias Grosser (Sep 18 2018 at 19:02)</a>:</h4>
<p>Dear all, as you know I just get up-to-speed on lean (and theorem proving) and don't do it fulltime for now. However, I picked as first toy-project to get started the extension of matrix as an instance of partial_order. (See <a href="https://github.com/tobig/lean-polyhedra/blob/master/src/polyhedra.lean" target="_blank" title="https://github.com/tobig/lean-polyhedra/blob/master/src/polyhedra.lean">https://github.com/tobig/lean-polyhedra/blob/master/src/polyhedra.lean</a>)</p>

<a name="134185923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134185923" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134185923">Andrew Ashworth (Sep 18 2018 at 19:03)</a>:</h4>
<p>Hi Tobias, you may want to post this in the #maths channel so people who are interested in this sort of stuff see it!</p>

<a name="134186016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134186016" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134186016">Andrew Ashworth (Sep 18 2018 at 19:04)</a>:</h4>
<p>or you may post in #general if this is a concrete matrix implementation meant for use in computation</p>

<a name="134186420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134186420" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134186420">Tobias Grosser (Sep 18 2018 at 19:11)</a>:</h4>
<p>Honestly, I don't even know how to post to the #maths channel. I see a "general" and a "new members" stream, but no "#maths" channel. I know streams and topics from <a href="https://zulipchat.com/help/about-streams-and-topics" target="_blank" title="https://zulipchat.com/help/about-streams-and-topics">https://zulipchat.com/help/about-streams-and-topics</a>, but have no ideas of channels. I can obviously move this topic to the general stream if this helps. Would also post it to a math channel, if you can explain what a math channel is? Are you refering to "stream:general topic:#maths"?</p>

<a name="134186434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134186434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134186434">Tobias Grosser (Sep 18 2018 at 19:11)</a>:</h4>
<p>I posted it in new members, as my questions are for now still very simple.</p>

<a name="134186514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134186514" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134186514">Reid Barton (Sep 18 2018 at 19:12)</a>:</h4>
<p>"Channel" means stream in this context I think.</p>

<a name="134186540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134186540" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134186540">Andrew Ashworth (Sep 18 2018 at 19:13)</a>:</h4>
<p>whew, yes, I forgot Zulip isn't IRC</p>

<a name="134186549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134186549" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134186549">Reid Barton (Sep 18 2018 at 19:13)</a>:</h4>
<p><a class="stream" data-stream-id="116395" href="/#narrow/stream/116395-maths">#maths</a></p>

<a name="134186552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134186552" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134186552">Tobias Grosser (Sep 18 2018 at 19:13)</a>:</h4>
<p>OK, got it. Had to subscribe to #maths explicitly</p>

<a name="134186634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134186634" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134186634">Tobias Grosser (Sep 18 2018 at 19:14)</a>:</h4>
<p>My questions still remain simple. I mostly would like to know how to destruct an equality: <a href="https://github.com/tobig/lean-polyhedra/blob/master/src/polyhedra.lean#L51" target="_blank" title="https://github.com/tobig/lean-polyhedra/blob/master/src/polyhedra.lean#L51">https://github.com/tobig/lean-polyhedra/blob/master/src/polyhedra.lean#L51</a></p>

<a name="134186752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134186752" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134186752">Tobias Grosser (Sep 18 2018 at 19:16)</a>:</h4>
<p>I spend some time looking and will probably figure it out eventually, but maybe somebody has a pointer.</p>

<a name="134186772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134186772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134186772">Reid Barton (Sep 18 2018 at 19:17)</a>:</h4>
<p>Don't you need to construct an equality?</p>

<a name="134186781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134186781" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134186781">Reid Barton (Sep 18 2018 at 19:17)</a>:</h4>
<p>I guess you mean: "destruct" the goal</p>

<a name="134186787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134186787" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134186787">Tobias Grosser (Sep 18 2018 at 19:17)</a>:</h4>
<p>Exactly.</p>

<a name="134186843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134186843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134186843">Tobias Grosser (Sep 18 2018 at 19:18)</a>:</h4>
<p>I had the same problem with the &lt;=, but there I could just "assume i" and lean would auto-destruct it.</p>

<a name="134186872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134186872" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134186872">Reid Barton (Sep 18 2018 at 19:18)</a>:</h4>
<p>I'm assuming your matrices are functions (of two variables), so the low-level way is to apply <code>funext</code> (twice)</p>

<a name="134186888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134186888" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134186888">Andrew Ashworth (Sep 18 2018 at 19:19)</a>:</h4>
<p>you will probably want <code>ext_iff </code> in <code>ring_theory.matrix</code></p>

<a name="134186956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134186956" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134186956">Andrew Ashworth (Sep 18 2018 at 19:20)</a>:</h4>
<p>this will allow you to turn <code>M = N</code> into <code> (∀ i j, M i j = N i j)</code></p>

<a name="134187198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134187198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134187198">Tobias Grosser (Sep 18 2018 at 19:24)</a>:</h4>
<p>Right. ext_iff looks good. Now I need to figure out how to apply it.</p>

<a name="134187201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134187201" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134187201">Tobias Grosser (Sep 18 2018 at 19:25)</a>:</h4>
<p>Reid's proposal also worked.</p>

<a name="134187220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134187220" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134187220">Tobias Grosser (Sep 18 2018 at 19:25)</a>:</h4>
<p>But from there I would not know how to proceed.</p>

<a name="134187234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134187234" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134187234">Johan Commelin (Sep 18 2018 at 19:25)</a>:</h4>
<p>Either <code>ext</code> or <code>rw ext_iff</code> probably works</p>

<a name="134187236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134187236" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134187236">Andrew Ashworth (Sep 18 2018 at 19:25)</a>:</h4>
<p>indeed, <code>ext_iff</code> is defined using multiple <code>funext</code> applications</p>

<a name="134187309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134187309" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134187309">Tobias Grosser (Sep 18 2018 at 19:26)</a>:</h4>
<p>Perfect. All works.</p>

<a name="134187314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134187314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134187314">Tobias Grosser (Sep 18 2018 at 19:26)</a>:</h4>
<p>So easy. I tried rw, but had missed a comma before. Thought I needed more magic.</p>

<a name="134187329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134187329" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134187329">Tobias Grosser (Sep 18 2018 at 19:26)</a>:</h4>
<p>Thanks guys. This got me over a slow phase. Will finish my proofs and get back. Very nice community here.</p>

<a name="134187979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134187979" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134187979">Tobias Grosser (Sep 18 2018 at 19:39)</a>:</h4>
<p>Just to report back, my proof went through and I know have the partial_order I wanted to define on matrix.</p>

<a name="134187985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134187985" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134187985">Kevin Buzzard (Sep 18 2018 at 19:39)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">protected</span> <span class="n">def</span> <span class="n">matrix</span><span class="bp">.</span><span class="n">le_antisymm</span> <span class="o">[</span><span class="n">partial_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span><span class="o">:</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">m</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
<span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">≤</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">assume</span> <span class="n">h1</span><span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">,</span>
  <span class="k">assume</span> <span class="n">h2</span><span class="o">:</span> <span class="n">b</span> <span class="bp">≤</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">funext</span><span class="o">,</span> <span class="n">intro</span> <span class="n">i</span><span class="o">,</span> <span class="n">apply</span> <span class="n">funext</span><span class="o">,</span> <span class="n">intro</span> <span class="n">j</span><span class="o">,</span>
<span class="c1">-- or   funext i,funext j,</span>
<span class="c1">-- or  ext i j,</span>
  <span class="n">exact</span> <span class="n">le_antisymm</span> <span class="o">(</span><span class="n">h1</span> <span class="n">i</span> <span class="n">j</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="n">i</span> <span class="n">j</span><span class="o">),</span>
<span class="kn">end</span>
</pre></div>

<a name="134187996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134187996" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134187996">Tobias Grosser (Sep 18 2018 at 19:39)</a>:</h4>
<p>Ah, even better.</p>

<a name="134188004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134188004" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134188004">Tobias Grosser (Sep 18 2018 at 19:39)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span></p>

<a name="134188071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134188071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134188071">Tobias Grosser (Sep 18 2018 at 19:40)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>, I used this for a proof on polyhedra. Would it make sense to add such defintions to your recent mathlib changes?</p>

<a name="134188081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134188081" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134188081">Mario Carneiro (Sep 18 2018 at 19:41)</a>:</h4>
<p>golfed:</p>
<div class="codehilite"><pre><span></span>protected lemma matrix.le_antisymm [partial_order α] (a b: matrix n m α)
  (h1 : a ≤ b) (h2 : b ≤ a) : a = b :=
by ext i j; exact le_antisymm (h1 i j) (h2 i j)
</pre></div>

<a name="134188096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134188096" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134188096">Mario Carneiro (Sep 18 2018 at 19:41)</a>:</h4>
<p>(also I don't have your definitions, so I had to guess if that's right)</p>

<a name="134188203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134188203" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134188203">Kevin Buzzard (Sep 18 2018 at 19:43)</a>:</h4>
<p>It would not surprise me if the Pi_instance tactic did this automatically, but it might not do.</p>

<a name="134188206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134188206" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134188206">Kenny Lau (Sep 18 2018 at 19:43)</a>:</h4>
<p>golfeded:</p>
<div class="codehilite"><pre><span></span><span class="kn">protected</span> <span class="kn">lemma</span> <span class="n">matrix</span><span class="bp">.</span><span class="n">le_antisymm</span> <span class="o">[</span><span class="n">partial_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span><span class="o">:</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">m</span> <span class="n">α</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≤</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">ext</span> <span class="n">i</span> <span class="n">j</span><span class="bp">;</span> <span class="k">from</span> <span class="n">le_antisymm</span> <span class="o">(</span><span class="n">h1</span> <span class="n">i</span> <span class="n">j</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="n">i</span> <span class="n">j</span><span class="o">)</span>
</pre></div>

<a name="134188431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134188431" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134188431">Tobias Grosser (Sep 18 2018 at 19:47)</a>:</h4>
<p>Nice, this lean golf.</p>

<a name="134188437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134188437" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134188437">Tobias Grosser (Sep 18 2018 at 19:47)</a>:</h4>
<p>The two solutions from Mario and Kenny don't work in my editor.</p>

<a name="134188444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134188444" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134188444">Tobias Grosser (Sep 18 2018 at 19:47)</a>:</h4>
<p>Need to replace "by" with "begin .. end"</p>

<a name="134188491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134188491" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134188491">Tobias Grosser (Sep 18 2018 at 19:48)</a>:</h4>
<p>Not yet sure why, but this proofs starts to look really nice. And you are all fast in golfing. ;-)</p>

<a name="134188689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134188689" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134188689">Tobias Grosser (Sep 18 2018 at 19:51)</a>:</h4>
<p>Got it, need a semicolon for 'by'.</p>

<a name="134188751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134188751" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134188751">Kevin Buzzard (Sep 18 2018 at 19:52)</a>:</h4>
<p>yes, <code>by</code> takes only one tactic, so you can either do <code>{tactic 1, tactic 2}</code> or <code>tactic 1;tactic 2</code></p>

<a name="134188801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134188801" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134188801">Kevin Buzzard (Sep 18 2018 at 19:53)</a>:</h4>
<p>Did you notice that they both moved the hypotheses to the left of the colon? That's standard Lean style, so it seems; put as many hypotheses as possible on the left of the colon unless you can't do this for some reason (e.g. you're using the equation compiler).</p>

<a name="134188858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134188858" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134188858">Kevin Buzzard (Sep 18 2018 at 19:54)</a>:</h4>
<p>It makes your tactic proof two lines shorter at no extra cost</p>

<a name="134188885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134188885" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134188885">Tobias Grosser (Sep 18 2018 at 19:55)</a>:</h4>
<p>I noticed and changed my code, but lacked the explanation. Thanks for providing it.</p>

<a name="134188910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134188910" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134188910">Mario Carneiro (Sep 18 2018 at 19:55)</a>:</h4>
<p>basically, if the very first thing in your proof is a lambda/<code>intro</code>, you should probably shift your colon</p>

<a name="134188921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134188921" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134188921">Kevin Buzzard (Sep 18 2018 at 19:55)</a>:</h4>
<p>my partner does that for a living</p>

<a name="134188934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134188934" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134188934">Kevin Buzzard (Sep 18 2018 at 19:55)</a>:</h4>
<p>she's a colorectal surgeon</p>

<a name="134188980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134188980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134188980">Mario Carneiro (Sep 18 2018 at 19:56)</a>:</h4>
<p>I need an emoji for this</p>

<a name="134189102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189102" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189102">Tobias Grosser (Sep 18 2018 at 19:58)</a>:</h4>
<p>Meanwhile, things look a lot better: <a href="https://github.com/tobig/lean-polyhedra/blob/master/src/polyhedra.lean" target="_blank" title="https://github.com/tobig/lean-polyhedra/blob/master/src/polyhedra.lean">https://github.com/tobig/lean-polyhedra/blob/master/src/polyhedra.lean</a></p>

<a name="134189125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189125" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189125">Tobias Grosser (Sep 18 2018 at 19:58)</a>:</h4>
<p>In case you have more suggestions:</p>
<div class="codehilite"><pre><span></span>protected def matrix.le_trans [partial_order α] (a b c: matrix n m α)
  (h1 : a ≤ b) (h2 : b ≤ c) : a ≤ c :=
begin
  assume i: n,
  assume j: m,
  have h1l: a i j ≤ b i j, from h1 i j,
  have h2l: b i j ≤ c i j, from h2 i j,
  transitivity,
  apply h1l,
  apply h2l,
end
</pre></div>


<p>and</p>
<div class="codehilite"><pre><span></span>protected def matrix.le_refl [partial_order α] (A: matrix n m α) :
A ≤ A :=
begin
  assume i: n,
  assume j: m,
  refl
end
</pre></div>


<p>are also open for golfing. ;-)</p>

<a name="134189147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189147" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189147">Tobias Grosser (Sep 18 2018 at 19:59)</a>:</h4>
<p>I will golf myself a little browsing mathlib code.</p>

<a name="134189154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189154" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189154">Kenny Lau (Sep 18 2018 at 19:59)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">protected</span> <span class="n">def</span> <span class="n">matrix</span><span class="bp">.</span><span class="n">le_trans</span> <span class="o">[</span><span class="n">partial_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">:</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">m</span> <span class="n">α</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">c</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">intros</span> <span class="n">i</span> <span class="n">j</span><span class="bp">;</span> <span class="k">from</span> <span class="n">le_trans</span> <span class="o">(</span><span class="n">h1</span> <span class="n">i</span> <span class="n">j</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="n">i</span> <span class="n">j</span><span class="o">)</span>

<span class="kn">protected</span> <span class="n">def</span> <span class="n">matrix</span><span class="bp">.</span><span class="n">le_refl</span> <span class="o">[</span><span class="n">partial_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">A</span><span class="o">:</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">m</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">A</span> <span class="bp">≤</span> <span class="n">A</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">intros</span> <span class="n">i</span> <span class="n">j</span><span class="bp">;</span> <span class="n">refl</span>
</pre></div>

<a name="134189245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189245" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189245">Kenny Lau (Sep 18 2018 at 20:00)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">protected</span> <span class="n">def</span> <span class="n">matrix</span><span class="bp">.</span><span class="n">le_trans</span> <span class="o">[</span><span class="n">partial_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">:</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">m</span> <span class="n">α</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≤</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">c</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">intros</span> <span class="n">i</span> <span class="n">j</span><span class="bp">;</span> <span class="n">transitivity</span><span class="bp">;</span> <span class="n">solve_by_elim</span>
</pre></div>

<a name="134189264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189264" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189264">Kenny Lau (Sep 18 2018 at 20:01)</a>:</h4>
<p>hmm the last one may not work</p>

<a name="134189409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189409" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189409">Tobias Grosser (Sep 18 2018 at 20:03)</a>:</h4>
<p>They all work.</p>

<a name="134189412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189412" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189412">Kevin Buzzard (Sep 18 2018 at 20:03)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">protected</span> <span class="n">def</span> <span class="n">matrix</span><span class="bp">.</span><span class="n">le_refl</span> <span class="o">[</span><span class="n">partial_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">A</span><span class="o">:</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">m</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
<span class="n">A</span> <span class="bp">≤</span> <span class="n">A</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">i</span> <span class="n">j</span><span class="o">,</span> <span class="n">le_refl</span> <span class="bp">_</span>
</pre></div>

<a name="134189417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189417" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189417">Tobias Grosser (Sep 18 2018 at 20:03)</a>:</h4>
<p>I learned a lot. So much fun.</p>

<a name="134189468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189468" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189468">Kevin Buzzard (Sep 18 2018 at 20:04)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">protected</span> <span class="n">def</span> <span class="n">matrix</span><span class="bp">.</span><span class="n">le_refl</span> <span class="o">[</span><span class="n">partial_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">A</span><span class="o">:</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">m</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
<span class="n">A</span> <span class="bp">≤</span> <span class="n">A</span> <span class="o">:=</span> <span class="bp">λ_</span> <span class="bp">_</span><span class="o">,</span> <span class="n">le_refl</span> <span class="bp">_</span>
</pre></div>

<a name="134189479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189479" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189479">Kevin Buzzard (Sep 18 2018 at 20:05)</a>:</h4>
<p>bad style (should be a space after the lambda)</p>

<a name="134189493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189493" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189493">Kevin Buzzard (Sep 18 2018 at 20:05)</a>:</h4>
<p>but I'm just trying to beat Kenny</p>

<a name="134189508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189508" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189508">Tobias Grosser (Sep 18 2018 at 20:05)</a>:</h4>
<p>Now I am unsure which ones to commit.</p>

<a name="134189560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189560" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189560">Kevin Buzzard (Sep 18 2018 at 20:06)</a>:</h4>
<p><code>set_option profiler true</code> and see which one is quickest :-)</p>

<a name="134189566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189566" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189566">Tobias Grosser (Sep 18 2018 at 20:06)</a>:</h4>
<p>I feel the last ones are a little too tight. What's the stylistic preferred solution?</p>

<a name="134189584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189584" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189584">Kevin Buzzard (Sep 18 2018 at 20:06)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">protected</span> <span class="n">def</span> <span class="n">matrix</span><span class="bp">.</span><span class="n">le_refl</span> <span class="o">[</span><span class="n">partial_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">A</span><span class="o">:</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">m</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
<span class="n">A</span> <span class="bp">≤</span> <span class="n">A</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span> <span class="n">le_refl</span> <span class="bp">_</span>
</pre></div>


<p>would probably be fine for mathlib I suspect</p>

<a name="134189797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189797" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189797">Chris Hughes (Sep 18 2018 at 20:09)</a>:</h4>
<p>Shouldn't all of this be <code>by pi_instance</code>?</p>

<a name="134189804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189804">Kevin Buzzard (Sep 18 2018 at 20:09)</a>:</h4>
<p>right</p>

<a name="134189858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189858" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189858">Kevin Buzzard (Sep 18 2018 at 20:10)</a>:</h4>
<p>but I don't know if they did partial orders and I didn't look.</p>

<a name="134189876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189876" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189876">Kenny Lau (Sep 18 2018 at 20:10)</a>:</h4>
<p>I believe they did</p>

<a name="134189882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189882" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189882">Kenny Lau (Sep 18 2018 at 20:10)</a>:</h4>
<p>though I too did not look</p>

<a name="134189931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134189931" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134189931">Kevin Buzzard (Sep 18 2018 at 20:11)</a>:</h4>
<p><span class="user-mention" data-user-id="122318">@Tobias Grosser</span> The original matrix add_comm_group code was written by Ellen Arlt and I was rewriting it in a live Lean coding session with an audience of undergrads, and Chris pointed out that pi_instances just did everything immediately.</p>

<a name="134190187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134190187" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134190187">Tobias Grosser (Sep 18 2018 at 20:15)</a>:</h4>
<p>Interesting. I don't know how to use pi_instance(s)</p>

<a name="134190270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134190270" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134190270">Tobias Grosser (Sep 18 2018 at 20:17)</a>:</h4>
<p>If I just write pi_instance, I get "too many constructors" for the first two lemmas, and "failed" for the last.</p>

<a name="134212318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134212318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134212318">Tobias Grosser (Sep 19 2018 at 05:41)</a>:</h4>
<p>I made some good progress, but got stuck in type class resolution. I try to do dependent pattern matching in the following code:</p>
<div class="codehilite"><pre><span></span>#check matrix
universe v
def Gaussian_elimination {α : Type v} [ordered_ring α] :
   Π {x y : Type u}  [fintype x] [fintype y], matrix x y α →  α
| _ _ _ := 1
</pre></div>


<p>Unfortunately, I get the following error at location 'matrix':</p>
<div class="codehilite"><pre><span></span>polyhedra.lean:104:46: error

failed to synthesize type class instance for
α : Type v,
_inst_4 : ordered_ring α,
x y : Type u,
_inst_5 : fintype x,
_inst_6 : fintype y
⊢ fintype x
polyhedra.lean:104:46: error
</pre></div>

<a name="134212376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134212376" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134212376">Tobias Grosser (Sep 19 2018 at 05:43)</a>:</h4>
<p>I modeled this according to <a href="https://leanprover.github.io/theorem_proving_in_lean/induction_and_recursion.html#dependent-pattern-matching" target="_blank" title="https://leanprover.github.io/theorem_proving_in_lean/induction_and_recursion.html#dependent-pattern-matching">https://leanprover.github.io/theorem_proving_in_lean/induction_and_recursion.html#dependent-pattern-matching</a>, and therae the example on vector works without problems. In case anybody has some flyby ideas.</p>

<a name="134213060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134213060" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134213060">Mario Carneiro (Sep 19 2018 at 06:03)</a>:</h4>
<p><code>by exactI 1</code></p>

<a name="134213712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134213712" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134213712">Tobias Grosser (Sep 19 2018 at 06:23)</a>:</h4>
<p>Is this in reply to the type class issue?</p>

<a name="134213766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134213766" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134213766">Tobias Grosser (Sep 19 2018 at 06:24)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Gaussian_elimination</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">ordered_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span>
   <span class="bp">Π</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>  <span class="o">[</span><span class="n">fintype</span> <span class="n">x</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">y</span><span class="o">],</span> <span class="n">matrix</span> <span class="n">x</span> <span class="n">y</span> <span class="n">α</span> <span class="bp">→</span>  <span class="n">α</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">exactI</span> <span class="mi">1</span>
</pre></div>


<p>does not work for me.</p>

<a name="134213773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134213773" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134213773">Tobias Grosser (Sep 19 2018 at 06:24)</a>:</h4>
<p>I still get an error at 'matrix x y \a'</p>

<a name="134213854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134213854" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134213854">Tobias Grosser (Sep 19 2018 at 06:27)</a>:</h4>
<p>I also don't see why I would add a tactics proof at a definition of a value. This seems to not make a lot of sense to me.</p>

<a name="134213905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134213905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134213905">Kenny Lau (Sep 19 2018 at 06:28)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Gaussian_elimination</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">ordered_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span>
   <span class="bp">Π</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>  <span class="o">[</span><span class="n">fintype</span> <span class="n">x</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">y</span><span class="o">],</span> <span class="n">matrix</span> <span class="n">x</span> <span class="n">y</span> <span class="n">α</span> <span class="bp">→</span>  <span class="n">α</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">exactI</span> <span class="mi">1</span>
</pre></div>

<a name="134213986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134213986" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134213986">Tobias Grosser (Sep 19 2018 at 06:31)</a>:</h4>
<p>Thanks, now I know how to use syntax highlighting.</p>

<a name="134213988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134213988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134213988">Tobias Grosser (Sep 19 2018 at 06:31)</a>:</h4>
<p>But your code does not work either.</p>

<a name="134213990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134213990" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134213990">Tobias Grosser (Sep 19 2018 at 06:31)</a>:</h4>
<p>I still get:</p>
<div class="codehilite"><pre><span></span>polyhedra.lean:108:46: error

failed to synthesize type class instance for
α : Type v,
_inst_4 : ordered_ring α,
x y : Type u,
_inst_5 : fintype x,
_inst_6 : fintype y
⊢ fintype x
</pre></div>

<a name="134214030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214030" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214030">Kenny Lau (Sep 19 2018 at 06:32)</a>:</h4>
<p>is that the whole error?</p>

<a name="134214037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214037" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214037">Kenny Lau (Sep 19 2018 at 06:32)</a>:</h4>
<p>oh, the error is in the type</p>

<a name="134214038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214038" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214038">Tobias Grosser (Sep 19 2018 at 06:32)</a>:</h4>
<p>I get it 4 times in a row at the same location.</p>

<a name="134214041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214041" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214041">Tobias Grosser (Sep 19 2018 at 06:32)</a>:</h4>
<p>Yes, something is broken. I just don't know how to interpret the error message.</p>

<a name="134214046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214046" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214046">Tobias Grosser (Sep 19 2018 at 06:33)</a>:</h4>
<p>It seems to derive fintype x, but I feel I provided all information.</p>

<a name="134214050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214050" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214050">Kenny Lau (Sep 19 2018 at 06:33)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Gaussian_elimination</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">ordered_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span>
   <span class="bp">Π</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>  <span class="o">[</span><span class="n">hx</span> <span class="o">:</span> <span class="n">fintype</span> <span class="n">x</span><span class="o">]</span> <span class="o">[</span><span class="n">hy</span> <span class="o">:</span> <span class="n">fintype</span> <span class="n">y</span><span class="o">],</span> <span class="bp">@</span><span class="n">matrix</span> <span class="n">x</span> <span class="n">y</span> <span class="n">α</span> <span class="n">hx</span> <span class="n">hy</span> <span class="bp">_</span> <span class="bp">→</span>  <span class="n">α</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">exactI</span> <span class="mi">1</span>
</pre></div>

<a name="134214051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214051">Kenny Lau (Sep 19 2018 at 06:33)</a>:</h4>
<p>something like that</p>

<a name="134214055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214055" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214055">Kenny Lau (Sep 19 2018 at 06:33)</a>:</h4>
<p>the order of the arguments may be wrong</p>

<a name="134214096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214096" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214096">Kenny Lau (Sep 19 2018 at 06:34)</a>:</h4>
<p>I don't see why you would need pattern matching</p>

<a name="134214107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214107" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214107">Kenny Lau (Sep 19 2018 at 06:35)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Gaussian_elimination</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">ordered_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">x</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">y</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">matrix</span> <span class="n">x</span> <span class="n">y</span> <span class="n">α</span> <span class="bp">→</span>  <span class="n">α</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="o">:=</span> <span class="mi">1</span>
</pre></div>

<a name="134214156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214156">Tobias Grosser (Sep 19 2018 at 06:36)</a>:</h4>
<p>The one without pattern matching works (I managed to write sth similar myself).</p>

<a name="134214161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214161" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214161">Tobias Grosser (Sep 19 2018 at 06:36)</a>:</h4>
<p>The @matrix one breaks with:</p>

<a name="134214168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214168" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214168">Tobias Grosser (Sep 19 2018 at 06:37)</a>:</h4>
<div class="codehilite"><pre><span></span>polyhedra.lean:192:57: error

type mismatch at application
  matrix x y
term
  α
has type
  Type v : Type (v+1)
but is expected to have type
  fintype x : Type u
</pre></div>

<a name="134214176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214176" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214176">Kenny Lau (Sep 19 2018 at 06:37)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Gaussian_elimination</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">ordered_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span>
   <span class="bp">Π</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>  <span class="o">[</span><span class="n">hx</span> <span class="o">:</span> <span class="n">fintype</span> <span class="n">x</span><span class="o">]</span> <span class="o">[</span><span class="n">hy</span> <span class="o">:</span> <span class="n">fintype</span> <span class="n">y</span><span class="o">],</span> <span class="bp">@</span><span class="n">matrix</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hx</span> <span class="n">hy</span> <span class="n">α</span> <span class="bp">_</span> <span class="bp">→</span> <span class="n">α</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">exactI</span> <span class="mi">1</span>
</pre></div>

<a name="134214177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214177" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214177">Tobias Grosser (Sep 19 2018 at 06:37)</a>:</h4>
<p>I want to implement something similar to</p>
<div class="codehilite"><pre><span></span>Fixpoint Gaussian_elimination {m n} : &#39;M_(m, n) → &#39;M_m × &#39;M_n × nat :=
  match m, n with
  | _.+1, _.+1 ⇒ fun A : &#39;M_(1 + _, 1 + _) ⇒
    if [pick ij | A ij.1 ij.2 != 0] is Some (i, j) then
      let a := A i j in let A1 := xrow i 0 (xcol j 0 A) in
      let u := ursubmx A1 in let v := a^-1 *: dlsubmx A1 in
      let: (L, U, r) := Gaussian_elimination (drsubmx A1 - v ×m u) in
      (xrow i 0 (block_mx 1 0 v L), xcol j 0 (block_mx a%:M u 0 U), r.+1)
    else (1%:M, 1%:M, 0%N)
  | _, _ ⇒ fun _ ⇒ (1%:M, 1%:M, 0%N)
  end.
</pre></div>

<a name="134214224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214224" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214224">Tobias Grosser (Sep 19 2018 at 06:38)</a>:</h4>
<p>As implemented in mathcomp.</p>

<a name="134214229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214229" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214229">Tobias Grosser (Sep 19 2018 at 06:38)</a>:</h4>
<p>Need it to compute the matrix rank.</p>

<a name="134214302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214302" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214302">Tobias Grosser (Sep 19 2018 at 06:40)</a>:</h4>
<div class="codehilite"><pre><span></span>polyhedra.lean:196:57: error

function expected at
  matrix x y α
term has type
  Type (max u v)
</pre></div>


<p>for the last one.</p>

<a name="134214312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214312" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214312">Tobias Grosser (Sep 19 2018 at 06:41)</a>:</h4>
<p>Matrix is defined as <code>matrix : Π (m n : Type u_1) [_inst_1 : fintype m] [_inst_2 : fintype n], Type u_2 → Type (max u_1 u_2)</code></p>

<a name="134214362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214362" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214362">Tobias Grosser (Sep 19 2018 at 06:42)</a>:</h4>
<p>This one works:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Gaussian_elimination5</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">ordered_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span>
   <span class="bp">Π</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>  <span class="o">[</span><span class="n">hx</span> <span class="o">:</span> <span class="n">fintype</span> <span class="n">x</span><span class="o">]</span> <span class="o">[</span><span class="n">hy</span> <span class="o">:</span> <span class="n">fintype</span> <span class="n">y</span><span class="o">],</span> <span class="bp">@</span><span class="n">matrix</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hx</span> <span class="n">hy</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">exactI</span> <span class="mi">1</span>
</pre></div>

<a name="134214378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214378" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214378">Tobias Grosser (Sep 19 2018 at 06:43)</a>:</h4>
<p>Thanks.</p>

<a name="134214379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214379" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214379">Tobias Grosser (Sep 19 2018 at 06:43)</a>:</h4>
<p>Need to read up what all this stuff does.</p>

<a name="134214390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214390" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214390">Tobias Grosser (Sep 19 2018 at 06:43)</a>:</h4>
<p>I am especially surprised that I need to pass the hx, hy as parameters.</p>

<a name="134214768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214768" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214768">Kevin Buzzard (Sep 19 2018 at 06:54)</a>:</h4>
<p>I never answered your question about how to use <code>pi_instances</code>. It was used at some point in the code defining matrices, but this was in a branch of mathlib-community in code that got rewritten and then I think the branch was deleted? I couldn't find it anyway. In short, it's a tactic whereby if <code>f x</code> has a certain structure (e.g. that of an additive group) then<code>Pi x, f x</code> gets it too. For matrices over a ring it would immediately give them the structure of an additive commutative group by just guessing addition and zero and then figuring out the proofs itself. Of course it can't guess multiplication (if you asked it to, I guess it would guess pointwise multiplication of matrices).</p>

<a name="134214936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134214936" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134214936">Tobias Grosser (Sep 19 2018 at 06:58)</a>:</h4>
<p>Thanks.</p>

<a name="134215050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215050" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215050">Tobias Grosser (Sep 19 2018 at 07:01)</a>:</h4>
<p>Ok, the last one for this morning:</p>
<div class="codehilite"><pre><span></span>def Gaussian_elimination5 {α : Type v} [ordered_ring α] {x y} [has_one x] [has_one y]:
   Π {x y}  [hx : fintype x] [hy : fintype y], @matrix x y hx hy α  → α
| (x+1) _ _ _ _ := by exactI 1
</pre></div>

<a name="134215121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215121" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215121">Tobias Grosser (Sep 19 2018 at 07:02)</a>:</h4>
<p>Gives me "equation compiler failed (use 'set_option trace.eqn_compiler.elim_match true' for additional details)".<br>
Setting this option does not give me more details.</p>

<a name="134215131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215131" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215131">Kenny Lau (Sep 19 2018 at 07:03)</a>:</h4>
<p>1. you have two <code>x</code> and two <code>y</code>, which would cause much confusion, although it is not the source of the error</p>

<a name="134215133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215133" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215133">Tobias Grosser (Sep 19 2018 at 07:03)</a>:</h4>
<p>I wanted x to be both a fintype and a type with has_one.</p>

<a name="134215140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215140" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215140">Kenny Lau (Sep 19 2018 at 07:03)</a>:</h4>
<p>the source of the error is that the type of <code>(x+1)</code>, whatever it is, is not an inductive type with <code>_+1</code> as one of the constructors</p>

<a name="134215193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215193" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215193">Tobias Grosser (Sep 19 2018 at 07:04)</a>:</h4>
<p>Right. It's a fintype.</p>

<a name="134215195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215195" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215195">Tobias Grosser (Sep 19 2018 at 07:04)</a>:</h4>
<p>I also want to make it to satisfy has_one.</p>

<a name="134215198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215198">Tobias Grosser (Sep 19 2018 at 07:04)</a>:</h4>
<p>That's why I added additional constraints.</p>

<a name="134215204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215204" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215204">Kenny Lau (Sep 19 2018 at 07:05)</a>:</h4>
<p>you have two <code>x</code> and two <code>y</code>. Lean treats those as separate objects.</p>

<a name="134215212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215212" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215212">Tobias Grosser (Sep 19 2018 at 07:05)</a>:</h4>
<p>Right, I lack the notation how to add more constraints on x.</p>

<a name="134215215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215215" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215215">Tobias Grosser (Sep 19 2018 at 07:05)</a>:</h4>
<p>I tried this one before:</p>
<div class="codehilite"><pre><span></span>def Gaussian_elimination5 {α : Type v} [ordered_ring α]  :
   Π {x y} [has_one x] [has_one y]  [hx : fintype x] [hy : fintype y], @matrix x y hx hy α  → α
| (x+1) _ _ _ _ := by exactI 1
</pre></div>

<a name="134215256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215256" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215256">Mario Carneiro (Sep 19 2018 at 07:06)</a>:</h4>
<p><code>x</code> is not a number, it's a type</p>

<a name="134215257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215257" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215257">Kenny Lau (Sep 19 2018 at 07:06)</a>:</h4>
<p>I don't know what <code>x+1</code> is supposed to mean</p>

<a name="134215259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215259" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215259">Mario Carneiro (Sep 19 2018 at 07:06)</a>:</h4>
<p>This differs from the Coq development because matrices are not defined with indices in 1..n, they are drawn from an arbitrary finite type</p>

<a name="134215271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215271" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215271">Tobias Grosser (Sep 19 2018 at 07:07)</a>:</h4>
<p>Right.</p>

<a name="134215277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215277" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215277">Tobias Grosser (Sep 19 2018 at 07:08)</a>:</h4>
<p>I assumed I can fix this by defining my algorithm to only work if x and y are both finite _and_ satisfy has_one.</p>

<a name="134215317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215317" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215317">Mario Carneiro (Sep 19 2018 at 07:08)</a>:</h4>
<p>You could define your function on <code>matrix (fin m) (fin n) α</code> if you want to do induction on m and n</p>

<a name="134215322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215322" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215322">Mario Carneiro (Sep 19 2018 at 07:08)</a>:</h4>
<p>there is no problem with assuming your type has a one, but that doesn't license you to write <code>x+1</code></p>

<a name="134215328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215328" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215328">Tobias Grosser (Sep 19 2018 at 07:09)</a>:</h4>
<p>That's what I tried ( I forgot that fin m exists, Johannes mentioned it at some point)</p>

<a name="134215331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215331" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215331">Mario Carneiro (Sep 19 2018 at 07:09)</a>:</h4>
<p>if <code>x</code> is a type containing a <code>1</code>, then <code>1 : x</code> is okay</p>

<a name="134215334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215334" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215334">Tobias Grosser (Sep 19 2018 at 07:09)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Gaussian_elimination5</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">ordered_ring</span> <span class="n">α</span><span class="o">]</span>  <span class="o">:</span>
   <span class="bp">Π</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span><span class="o">}</span> <span class="o">[</span><span class="n">hx</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">x</span><span class="o">]</span> <span class="o">[</span><span class="n">hy</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">y</span><span class="o">],</span> <span class="bp">@</span><span class="n">matrix</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hx</span> <span class="n">hy</span> <span class="n">α</span>  <span class="bp">→</span> <span class="n">α</span>
<span class="bp">|</span> <span class="o">(</span><span class="bp">_+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">exactI</span> <span class="mi">1</span>
</pre></div>

<a name="134215411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215411" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215411">Tobias Grosser (Sep 19 2018 at 07:10)</a>:</h4>
<p>Now I am here. This works so far, but gives the error:</p>
<div class="codehilite"><pre><span></span>polyhedra.lean:201:46: error

maximum class-instance resolution depth has been reached (the limit can be increased by setting option &#39;class.instance_max_depth&#39;) (the class-instance resolution trace can be visualized by setting option &#39;trace.class_instances&#39;)
</pre></div>

<a name="134215418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215418" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215418">Mario Carneiro (Sep 19 2018 at 07:10)</a>:</h4>
<p><code>fin</code> is not a typeclass, it is an actual type</p>
<div class="codehilite"><pre><span></span>def Gaussian_elimination5 {α : Type v} [ordered_ring α]  :
   Π (m n : ℕ), matrix (fin m) (fin n) α  → α
| (m+1) (n+1) := 1
</pre></div>

<a name="134215562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215562" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215562">Tobias Grosser (Sep 19 2018 at 07:13)</a>:</h4>
<p>Amazing: </p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Gaussian_elimination6</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">ordered_ring</span> <span class="n">α</span><span class="o">]</span>  <span class="o">:</span>
   <span class="bp">Π</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span><span class="o">),</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="n">α</span>  <span class="bp">→</span> <span class="n">α</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">A</span> <span class="o">:=</span> <span class="n">A</span> <span class="mi">0</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">A</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span>
</pre></div>

<a name="134215623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134215623" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134215623">Tobias Grosser (Sep 19 2018 at 07:14)</a>:</h4>
<p>That type checks and does what I want. Thanks guys for getting me started.</p>

<a name="134216363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134216363" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134216363">Kevin Buzzard (Sep 19 2018 at 07:31)</a>:</h4>
<p><code>has_one</code> only means there's some term in your type called <code>1</code>. You need <code>has_add</code> too to make sense of <code>x + 1</code>.</p>

<a name="134216462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134216462" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134216462">Johan Commelin (Sep 19 2018 at 07:33)</a>:</h4>
<p>Right, so you want <code>has_one Type</code> and <code>has_add Type</code> (-;</p>

<a name="134217164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217164" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217164">Tobias Grosser (Sep 19 2018 at 07:53)</a>:</h4>
<p>That's what I understand.</p>

<a name="134217168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217168" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217168">Tobias Grosser (Sep 19 2018 at 07:53)</a>:</h4>
<p>Now I don't understand how torequest such a type in a pattern match.</p>

<a name="134217171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217171" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217171">Tobias Grosser (Sep 19 2018 at 07:53)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Gaussian_elimination5</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">ordered_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span>
   <span class="bp">Π</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">has_one</span> <span class="n">x</span><span class="o">]</span> <span class="o">[</span><span class="n">has_add</span> <span class="n">x</span><span class="o">]</span> <span class="o">[</span><span class="n">has_one</span> <span class="n">y</span><span class="o">]</span> <span class="o">[</span><span class="n">has_add</span> <span class="n">y</span><span class="o">]</span> <span class="o">[</span><span class="n">hx</span> <span class="o">:</span> <span class="n">fintype</span> <span class="n">x</span><span class="o">]</span> <span class="o">[</span><span class="n">hy</span> <span class="o">:</span> <span class="n">fintype</span> <span class="n">y</span><span class="o">],</span> <span class="bp">@</span><span class="n">matrix</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hx</span> <span class="n">hy</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>
<span class="bp">|</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="n">f</span> <span class="n">g</span> <span class="n">h</span> <span class="n">i</span> <span class="o">:=</span>
</pre></div>

<a name="134217173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217173" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217173">Tobias Grosser (Sep 19 2018 at 07:53)</a>:</h4>
<p>This is what I came up with.</p>

<a name="134217219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217219" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217219">Mario Carneiro (Sep 19 2018 at 07:54)</a>:</h4>
<p>you can't pattern match on types</p>

<a name="134217222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217222" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217222">Kevin Buzzard (Sep 19 2018 at 07:54)</a>:</h4>
<p>As a general rule you shouldn't need to name variables which are showing up in <code>[boxes like this]</code></p>

<a name="134217225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217225" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217225">Kevin Buzzard (Sep 19 2018 at 07:54)</a>:</h4>
<p>The system is supposed to do that for you</p>

<a name="134217232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217232" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217232">Tobias Grosser (Sep 19 2018 at 07:54)</a>:</h4>
<p>I don't want to match  on types.</p>

<a name="134217236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217236" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217236">Tobias Grosser (Sep 19 2018 at 07:54)</a>:</h4>
<p>It seems I need to match on all the boxes for this to type check.</p>

<a name="134217239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217239" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217239">Tobias Grosser (Sep 19 2018 at 07:55)</a>:</h4>
<p>What I would like is something like</p>

<a name="134217247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217247" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217247">Kevin Buzzard (Sep 19 2018 at 07:55)</a>:</h4>
<p>You could move stuff to the left of the colon</p>

<a name="134217251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217251" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217251">Mario Carneiro (Sep 19 2018 at 07:55)</a>:</h4>
<p>this line is almost certainly not what you want</p>

<a name="134217254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217254" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217254">Kevin Buzzard (Sep 19 2018 at 07:55)</a>:</h4>
<p>the equation compiler only matches on stuff to the right of the colon</p>

<a name="134217307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217307" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217307">Kevin Buzzard (Sep 19 2018 at 07:56)</a>:</h4>
<p>and similarly in general you should be able to avoid using <code>@</code></p>

<a name="134217314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217314">Kevin Buzzard (Sep 19 2018 at 07:56)</a>:</h4>
<p>because Lean is supposed to guess correctly</p>

<a name="134217326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217326" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217326">Mario Carneiro (Sep 19 2018 at 07:57)</a>:</h4>
<p>Also, in case it wasn't clear Johan's suggestion above was not serious</p>

<a name="134217332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217332" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217332">Mario Carneiro (Sep 19 2018 at 07:57)</a>:</h4>
<p>you don't actually want <code>has_add Type</code></p>

<a name="134217339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217339" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217339">Mario Carneiro (Sep 19 2018 at 07:57)</a>:</h4>
<p>Perhaps you could explain what you are trying to do informally?</p>

<a name="134217376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217376" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217376">Kevin Buzzard (Sep 19 2018 at 07:58)</a>:</h4>
<p>You're more likely to want <code>has_add X</code> with <code>X : Type</code></p>

<a name="134217383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217383" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217383">Mario Carneiro (Sep 19 2018 at 07:58)</a>:</h4>
<p>I'm not sure you want that either though, in this case</p>

<a name="134217388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217388" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217388">Kevin Buzzard (Sep 19 2018 at 07:58)</a>:</h4>
<p>On the other hand, I am pretty sure we want Gaussian Elimination</p>

<a name="134217402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217402" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217402">Tobias Grosser (Sep 19 2018 at 07:59)</a>:</h4>
<p>I want a function that takes a (matrix n m \a) and returns an alpha (for now)</p>

<a name="134217403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217403" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217403">Kevin Buzzard (Sep 19 2018 at 07:59)</a>:</h4>
<p>It's kind of a disgrace that we only just got matrices and that we still don't have differentiation of functions from R to R</p>

<a name="134217404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217404" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217404">Tobias Grosser (Sep 19 2018 at 07:59)</a>:</h4>
<p>I also want to do induction over n and m</p>

<a name="134217406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217406">Tobias Grosser (Sep 19 2018 at 07:59)</a>:</h4>
<p>So I looked at dependent type pattern matching</p>

<a name="134217408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217408" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217408">Kevin Buzzard (Sep 19 2018 at 07:59)</a>:</h4>
<p><span class="user-mention" data-user-id="122318">@Tobias Grosser</span> your two goals sound very achievable</p>

<a name="134217409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217409" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217409">Mario Carneiro (Sep 19 2018 at 07:59)</a>:</h4>
<p>In that case you should go with the version I stated with <code>fin m</code> and <code>fin n</code></p>

<a name="134217410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217410" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217410">Tobias Grosser (Sep 19 2018 at 07:59)</a>:</h4>
<p>And my understanding is that I need to constrain n and m to satisfy has_add and has_one.</p>

<a name="134217413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217413" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217413">Kevin Buzzard (Sep 19 2018 at 07:59)</a>:</h4>
<p>if <code>fin n</code> makes sense</p>

<a name="134217415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217415" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217415">Kevin Buzzard (Sep 19 2018 at 08:00)</a>:</h4>
<p>then <code>n : nat</code></p>

<a name="134217458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217458" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217458">Tobias Grosser (Sep 19 2018 at 08:00)</a>:</h4>
<p>Right. That one works perfectly.</p>

<a name="134217463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217463" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217463">Mario Carneiro (Sep 19 2018 at 08:00)</a>:</h4>
<p><code>fin m</code> is a type, which already has a one and an add</p>

<a name="134217464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217464" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217464">Kevin Buzzard (Sep 19 2018 at 08:00)</a>:</h4>
<p>and <code>nat</code> already has a 1 and an +</p>

<a name="134217467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217467" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217467">Kevin Buzzard (Sep 19 2018 at 08:00)</a>:</h4>
<p>as does <code>fin n</code></p>

<a name="134217472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217472" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217472">Tobias Grosser (Sep 19 2018 at 08:00)</a>:</h4>
<p>I have a variant that works</p>

<a name="134217505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217505">Kevin Buzzard (Sep 19 2018 at 08:01)</a>:</h4>
<p>feel free to post code</p>

<a name="134217506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217506" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217506">Tobias Grosser (Sep 19 2018 at 08:01)</a>:</h4>
<p>Which is:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Gaussian_elimination6</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">ordered_ring</span> <span class="n">α</span><span class="o">]</span>  <span class="o">:</span>
   <span class="bp">Π</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span><span class="o">),</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="n">α</span>  <span class="bp">→</span> <span class="n">α</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">A</span> <span class="o">:=</span> <span class="n">A</span> <span class="mi">0</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">A</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span>
</pre></div>

<a name="134217554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217554" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217554">Tobias Grosser (Sep 19 2018 at 08:02)</a>:</h4>
<p>(I mean the pattern match, not the gaussian elimination yet)</p>

<a name="134217556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217556" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217556">Kevin Buzzard (Sep 19 2018 at 08:02)</a>:</h4>
<p>gotcha</p>

<a name="134217558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217558" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217558">Kevin Buzzard (Sep 19 2018 at 08:02)</a>:</h4>
<p>You use m and n to mean two different things</p>

<a name="134217560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217560" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217560">Kevin Buzzard (Sep 19 2018 at 08:02)</a>:</h4>
<p>you were doing this with x and y earlier</p>

<a name="134217562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217562" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217562">Kevin Buzzard (Sep 19 2018 at 08:02)</a>:</h4>
<p>I find it quite confusing</p>

<a name="134217563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217563" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217563">Mario Carneiro (Sep 19 2018 at 08:02)</a>:</h4>
<p>I think it was a bad idea to call the types <code>m</code> and <code>n</code> in the definition of <code>matrix</code></p>

<a name="134217565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217565" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217565">Tobias Grosser (Sep 19 2018 at 08:03)</a>:</h4>
<p>I was asking for has_one has_add out of curiosity (and also it seemed it would be preferable)</p>

<a name="134217569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217569">Mario Carneiro (Sep 19 2018 at 08:03)</a>:</h4>
<p>we never use lowercase latin for types</p>

<a name="134217572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217572">Tobias Grosser (Sep 19 2018 at 08:03)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Gaussian_elimination6</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">ordered_ring</span> <span class="n">α</span><span class="o">]</span>  <span class="o">:</span>
   <span class="bp">Π</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span><span class="o">),</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="n">α</span>  <span class="bp">→</span> <span class="n">α</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">A</span> <span class="o">:=</span> <span class="n">A</span> <span class="mi">0</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">A</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span>
</pre></div>

<a name="134217573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217573" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217573">Kevin Buzzard (Sep 19 2018 at 08:03)</a>:</h4>
<p>The matching only matches stuff to the right of the colon, so you're writing "let m = m + 1".</p>

<a name="134217618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217618" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217618">Kevin Buzzard (Sep 19 2018 at 08:04)</a>:</h4>
<p>I used to do this in mathematics when I was younger -- "I have a quadratic equation x^2+bx+c=0 -- now let's complete the square by setting x=x+b/2"</p>

<a name="134217623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217623" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217623">Tobias Grosser (Sep 19 2018 at 08:04)</a>:</h4>
<p>I am aware that 'n' and 'm' in my original example mean different things.</p>

<a name="134217624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217624" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217624">Mario Carneiro (Sep 19 2018 at 08:04)</a>:</h4>
<p>where would you want to perform an addition, where you can't already?</p>

<a name="134217634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217634" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217634">Tobias Grosser (Sep 19 2018 at 08:04)</a>:</h4>
<p>All is good in this example.</p>

<a name="134217638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217638" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217638">Kevin Buzzard (Sep 19 2018 at 08:04)</a>:</h4>
<p>I never write that now because it's so easy to lose track of whether you're using the old x or the new x. Now I write "let y = x+b/2"</p>

<a name="134217639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217639" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217639">Tobias Grosser (Sep 19 2018 at 08:04)</a>:</h4>
<p>Things work fo rme.</p>

<a name="134217663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217663" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217663">Kevin Buzzard (Sep 19 2018 at 08:05)</a>:</h4>
<p>The only time I let "x=x+1" nowadays is in procedural programming when I actually want the old value to be forgotten forever</p>

<a name="134217710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217710" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217710">Mario Carneiro (Sep 19 2018 at 08:06)</a>:</h4>
<p>Here is a working version that doesn't use fin:</p>
<div class="codehilite"><pre><span></span>def Gaussian_elimination6 {α : Type v} [ordered_ring α]
  (M N) [fintype M] [fintype N] : matrix M N α  → α
| A := A 0 0
</pre></div>


<p>But you can't do induction on <code>m : nat</code> in this case, since there is no <code>m</code></p>

<a name="134217715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217715" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217715">Tobias Grosser (Sep 19 2018 at 08:06)</a>:</h4>
<p>Right.</p>

<a name="134217716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217716" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217716">Kevin Buzzard (Sep 19 2018 at 08:06)</a>:</h4>
<blockquote>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Gaussian_elimination6</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">ordered_ring</span> <span class="n">α</span><span class="o">]</span>  <span class="o">:</span>
   <span class="bp">Π</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span><span class="o">),</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="n">α</span>  <span class="bp">→</span> <span class="n">α</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">A</span> <span class="o">:=</span> <span class="n">A</span> <span class="mi">0</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">A</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span>
</pre></div>


</blockquote>
<p>Do you see that you're also using the fact that <code>fin (x+1)</code> has a zero here.</p>

<a name="134217722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217722" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217722">Kevin Buzzard (Sep 19 2018 at 08:07)</a>:</h4>
<p>Type class inference figured that out for you and let you use it</p>

<a name="134217730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217730" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217730">Tobias Grosser (Sep 19 2018 at 08:07)</a>:</h4>
<p>Yes.</p>

<a name="134217736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217736" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217736">Tobias Grosser (Sep 19 2018 at 08:07)</a>:</h4>
<p>That's why I had to write (0:\a) in the second match.</p>

<a name="134217741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217741" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217741">Tobias Grosser (Sep 19 2018 at 08:07)</a>:</h4>
<p>I think.</p>

<a name="134217744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217744" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217744">Kevin Buzzard (Sep 19 2018 at 08:07)</a>:</h4>
<p><code>0</code> by itself means "the zero of something"</p>

<a name="134217745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217745" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217745">Tobias Grosser (Sep 19 2018 at 08:07)</a>:</h4>
<p>Because in that case it is not known that a zero exists.</p>

<a name="134217746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217746" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217746">Mario Carneiro (Sep 19 2018 at 08:07)</a>:</h4>
<p>Kevin means the <code>0</code> in <code>A 0 0</code></p>

<a name="134217751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217751" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217751">Kevin Buzzard (Sep 19 2018 at 08:07)</a>:</h4>
<p>Lean was expecting something of type "fin (x+1)" and you wrote "0"</p>

<a name="134217798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217798" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217798">Tobias Grosser (Sep 19 2018 at 08:08)</a>:</h4>
<p>Right.</p>

<a name="134217801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217801" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217801">Kevin Buzzard (Sep 19 2018 at 08:08)</a>:</h4>
<p>and Lean figured "aah, this must be one of those types that has a zero, let me find an instance of has_zero (fin (x+1)) behind the scenes</p>

<a name="134217812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217812" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217812">Tobias Grosser (Sep 19 2018 at 08:08)</a>:</h4>
<p>I wrote</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Gaussian_elimination6</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">ordered_ring</span> <span class="n">α</span><span class="o">]</span>  <span class="o">:</span>
   <span class="bp">Π</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span><span class="o">),</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="n">α</span>  <span class="bp">→</span> <span class="n">α</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">A</span> <span class="o">:=</span> <span class="n">A</span> <span class="mi">0</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">A</span> <span class="o">:=</span> <span class="n">A</span> <span class="mi">0</span> <span class="mi">0</span>
</pre></div>

<a name="134217815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217815" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217815">Tobias Grosser (Sep 19 2018 at 08:08)</a>:</h4>
<p>Initially</p>

<a name="134217828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217828" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217828">Kevin Buzzard (Sep 19 2018 at 08:09)</a>:</h4>
<p>Lean's typeclass magic: <code>example (x : ℕ) : has_zero (fin (x+1)) := by apply_instance</code></p>

<a name="134217835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217835" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217835">Kevin Buzzard (Sep 19 2018 at 08:09)</a>:</h4>
<p>your initial approach doesn't work becasue <code>fin 0</code> is the empty type and in particular has no zero</p>

<a name="134217838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217838" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217838">Tobias Grosser (Sep 19 2018 at 08:09)</a>:</h4>
<p>Right.</p>

<a name="134217841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217841">Tobias Grosser (Sep 19 2018 at 08:09)</a>:</h4>
<p>I understood this.</p>

<a name="134217843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217843">Tobias Grosser (Sep 19 2018 at 08:09)</a>:</h4>
<p>That's very interesting.</p>

<a name="134217898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217898" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217898">Kevin Buzzard (Sep 19 2018 at 08:10)</a>:</h4>
<p><code>example : has_zero (fin 0) := by apply_instance -- "failed to generate instance" error</code></p>

<a name="134217911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217911" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217911">Kevin Buzzard (Sep 19 2018 at 08:10)</a>:</h4>
<p>This black magic is related to the square bracket stuff and it took me a very long time before I got comfortable with it.</p>

<a name="134217914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217914" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217914">Tobias Grosser (Sep 19 2018 at 08:10)</a>:</h4>
<p>I see.</p>

<a name="134217924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217924" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217924">Kevin Buzzard (Sep 19 2018 at 08:11)</a>:</h4>
<p>In retrospect I wish that people had stressed earlier how basic notation like <code>0</code> and <code>+</code> worked in Lean</p>

<a name="134217927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217927" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217927">Tobias Grosser (Sep 19 2018 at 08:11)</a>:</h4>
<p>The only thing I do not understand is if it is possible to take Mario's stuff, but expose n and m without introducing 'fin n', but instead just use has_one and has_add.</p>

<a name="134217928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217928" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217928">Kevin Buzzard (Sep 19 2018 at 08:11)</a>:</h4>
<p>because it seems to me that this is a very good introduction to the type class system</p>

<a name="134217935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217935" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217935">Tobias Grosser (Sep 19 2018 at 08:11)</a>:</h4>
<p>I feel this should work, but seems to be far beyond my type_class capabilities.</p>

<a name="134217937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217937" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217937">Kevin Buzzard (Sep 19 2018 at 08:11)</a>:</h4>
<p>I'm afraid I'm not a computer scientist and I don't know what "expose" means</p>

<a name="134217970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217970" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217970">Tobias Grosser (Sep 19 2018 at 08:12)</a>:</h4>
<p>As I have a solution, that's not needed. But would be nice to understand this eventually.</p>

<a name="134217983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217983" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217983">Kevin Buzzard (Sep 19 2018 at 08:12)</a>:</h4>
<p><code>matrix</code> eats something of type <code>fin n</code></p>

<a name="134217987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217987" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217987">Kevin Buzzard (Sep 19 2018 at 08:12)</a>:</h4>
<p>so you have to give it something of type <code>fin n</code></p>

<a name="134217989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217989" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217989">Mario Carneiro (Sep 19 2018 at 08:12)</a>:</h4>
<p>actually it eats a fintype</p>

<a name="134217992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217992">Tobias Grosser (Sep 19 2018 at 08:12)</a>:</h4>
<p>"expose" means pattern match on n and m to be able to do induction on n and m</p>

<a name="134217994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134217994" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134217994">Tobias Grosser (Sep 19 2018 at 08:12)</a>:</h4>
<p>Right. I can pass it a fin n and all is good.</p>

<a name="134218002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218002" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218002">Kevin Buzzard (Sep 19 2018 at 08:13)</a>:</h4>
<p>wait, that's not even true any more</p>

<a name="134218005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218005" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218005">Tobias Grosser (Sep 19 2018 at 08:13)</a>:</h4>
<p>I was wondering if I could pass it a fintype x, where I know that x has_add and has_one.</p>

<a name="134218006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218006" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218006">Mario Carneiro (Sep 19 2018 at 08:13)</a>:</h4>
<p>any fintype has a cardinality, <code>fintype.card X</code>, and you can do induction on that</p>

<a name="134218012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218012" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218012">Kevin Buzzard (Sep 19 2018 at 08:13)</a>:</h4>
<p>sorry, I seem to be behind the times</p>

<a name="134218023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218023" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218023">Kevin Buzzard (Sep 19 2018 at 08:13)</a>:</h4>
<p><code>#check @matrix -- matrix : Π (m n : Type u_1) [_inst_1 : fintype m] [_inst_2 : fintype n], Type u_2 → Type (max u_1 u_2)</code></p>

<a name="134218026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218026">Mario Carneiro (Sep 19 2018 at 08:13)</a>:</h4>
<p>You don't usually need a one and an add on the index type</p>

<a name="134218035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218035">Mario Carneiro (Sep 19 2018 at 08:13)</a>:</h4>
<p>what is this needed for?</p>

<a name="134218072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218072" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218072">Tobias Grosser (Sep 19 2018 at 08:14)</a>:</h4>
<p>So how can I do induction over card? That's what I am trying to figure out.</p>

<a name="134218079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218079" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218079">Mario Carneiro (Sep 19 2018 at 08:14)</a>:</h4>
<p>It's a bit messy</p>

<a name="134218084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218084" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218084">Kevin Buzzard (Sep 19 2018 at 08:14)</a>:</h4>
<p>Do you want to prove things for matrices indexed by random finite types?</p>

<a name="134218085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218085" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218085">Tobias Grosser (Sep 19 2018 at 08:14)</a>:</h4>
<p>I just want to do induction on my dimensionality to do gaussion elimination.</p>

<a name="134218090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218090" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218090">Tobias Grosser (Sep 19 2018 at 08:14)</a>:</h4>
<p>No. If you tell me 'fin x' is enough, we are done.</p>

<a name="134218103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218103" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218103">Kevin Buzzard (Sep 19 2018 at 08:15)</a>:</h4>
<p>I guess this is a design decision</p>

<a name="134218104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218104" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218104">Tobias Grosser (Sep 19 2018 at 08:15)</a>:</h4>
<p>Just got curious about the type classes. Seems matlib likes to generalize things.</p>

<a name="134218111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218111">Tobias Grosser (Sep 19 2018 at 08:15)</a>:</h4>
<p>I am fine being in 'fin x'. That seems a lot less messy.</p>

<a name="134218113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218113" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218113">Kevin Buzzard (Sep 19 2018 at 08:15)</a>:</h4>
<p>Yes, if mathlib did Gaussian Elimination it would almost certainly do it for random types which are fintypes</p>

<a name="134218114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218114" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218114">Tobias Grosser (Sep 19 2018 at 08:15)</a>:</h4>
<p>Let's leave it at this for now.</p>

<a name="134218116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218116">Mario Carneiro (Sep 19 2018 at 08:15)</a>:</h4>
<div class="codehilite"><pre><span></span>def Gaussian_elimination6 {α : Type v} [ordered_ring α]
  : ∀ (m n M N) [fintype M] [fintype N], fintype.card M = m → fintype.card N = n → matrix M N α  → α
| m n M N _ _ h1 h2 A := A 0 0
</pre></div>


<p>You will need some <code>@</code>'s in there, my typechecker isn't running</p>

<a name="134218164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218164" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218164">Kevin Buzzard (Sep 19 2018 at 08:16)</a>:</h4>
<p>If you do it like that then you can induct on m and n</p>

<a name="134218173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218173" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218173">Mario Carneiro (Sep 19 2018 at 08:16)</a>:</h4>
<p>More likely, I would just do it on <code>fin m</code> by induction and then use equivalence lemmas to transfer to the original fintype</p>

<a name="134218187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218187" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218187">Kevin Buzzard (Sep 19 2018 at 08:17)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="n">class</span> <span class="kn">instance</span> <span class="n">for</span>
<span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">ordered_ring</span> <span class="n">α</span><span class="o">,</span>
<span class="n">m</span> <span class="o">:</span> <span class="err">?</span><span class="n">m_1</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="err">?</span><span class="n">m_2</span><span class="o">,</span>
<span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span> <span class="err">?</span><span class="o">,</span>
<span class="n">N</span> <span class="o">:</span> <span class="kt">Type</span> <span class="err">?</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_2</span> <span class="o">:</span> <span class="n">fintype</span> <span class="n">M</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_3</span> <span class="o">:</span> <span class="n">fintype</span> <span class="n">N</span>
<span class="err">⊢</span> <span class="n">fintype</span> <span class="n">M</span>
</pre></div>

<a name="134218188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218188" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218188">Kevin Buzzard (Sep 19 2018 at 08:17)</a>:</h4>
<p>boo</p>

<a name="134218189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218189" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218189">Mario Carneiro (Sep 19 2018 at 08:17)</a>:</h4>
<p>Or find a way to work with subsets of a fixed type of size <code>m</code></p>

<a name="134218193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218193" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218193">Mario Carneiro (Sep 19 2018 at 08:17)</a>:</h4>
<p>you have to put a <code>by exactI</code> in there</p>

<a name="134218199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218199" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218199">Kevin Buzzard (Sep 19 2018 at 08:17)</a>:</h4>
<p>in the statement??</p>

<a name="134218200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218200" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218200">Mario Carneiro (Sep 19 2018 at 08:17)</a>:</h4>
<p>yeah</p>

<a name="134218244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218244" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218244">Mario Carneiro (Sep 19 2018 at 08:18)</a>:</h4>
<p>because there are typeclass args right of the colon</p>

<a name="134218249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218249" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218249">Mario Carneiro (Sep 19 2018 at 08:18)</a>:</h4>
<p>either that or use <code>@</code> a lot</p>

<a name="134218261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218261" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218261">Kenny Lau (Sep 19 2018 at 08:18)</a>:</h4>
<p>deja vu</p>

<a name="134218284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218284" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218284">Kevin Buzzard (Sep 19 2018 at 08:19)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Gaussian_elimination6</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">ordered_ring</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="n">M</span> <span class="n">N</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">N</span><span class="o">],</span>
      <span class="k">by</span> <span class="n">exactI</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card</span> <span class="n">M</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card</span> <span class="n">N</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">matrix</span> <span class="n">M</span> <span class="n">N</span> <span class="n">α</span>  <span class="bp">→</span> <span class="n">α</span>
<span class="bp">|</span> <span class="n">m</span> <span class="n">n</span> <span class="n">M</span> <span class="n">N</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">h1</span> <span class="n">h2</span> <span class="n">A</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="134218287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218287">Kevin Buzzard (Sep 19 2018 at 08:19)</a>:</h4>
<p>eew</p>

<a name="134218289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218289" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218289">Kevin Buzzard (Sep 19 2018 at 08:19)</a>:</h4>
<p>soon to be not fixed in Lean 4</p>

<a name="134218347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218347" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218347">Kevin Buzzard (Sep 19 2018 at 08:20)</a>:</h4>
<p>that looks fine, not at all confusing for beginners</p>

<a name="134218357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218357" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218357">Mario Carneiro (Sep 19 2018 at 08:20)</a>:</h4>
<p>like I said, messy</p>

<a name="134218362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218362" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218362">Kevin Buzzard (Sep 19 2018 at 08:20)</a>:</h4>
<p>Isn't there some pre-rolled <code>fintype.induction_on</code>?</p>

<a name="134218371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218371" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218371">Mario Carneiro (Sep 19 2018 at 08:21)</a>:</h4>
<p>not to mention that this is not going to be a nice inductive proof since you have to build a recursive subtype</p>

<a name="134218392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218392" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218392">Mario Carneiro (Sep 19 2018 at 08:21)</a>:</h4>
<p>It's probably better to do induction over the finsets on a fixed type</p>

<a name="134218397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218397" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218397">Tobias Grosser (Sep 19 2018 at 08:21)</a>:</h4>
<p>Cool. At least it works.</p>

<a name="134218450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218450" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218450">Tobias Grosser (Sep 19 2018 at 08:22)</a>:</h4>
<p>I feel I can do induction by using x+1 and y+1</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Gaussian_elimination6</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">ordered_ring</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="n">M</span> <span class="n">N</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">N</span><span class="o">],</span>
      <span class="k">by</span> <span class="n">exactI</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card</span> <span class="n">M</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card</span> <span class="n">N</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">matrix</span> <span class="n">M</span> <span class="n">N</span> <span class="n">α</span>  <span class="bp">→</span> <span class="n">α</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">M</span> <span class="n">N</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">h1</span> <span class="n">h2</span> <span class="n">A</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">M</span> <span class="n">N</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">h1</span> <span class="n">h2</span> <span class="n">A</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span>
</pre></div>

<a name="134218453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218453" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218453">Tobias Grosser (Sep 19 2018 at 08:22)</a>:</h4>
<p>Not sure what recursive subtypes mean.</p>

<a name="134218458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218458" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218458">Tobias Grosser (Sep 19 2018 at 08:22)</a>:</h4>
<p>I will start with the (fin n) stuff, which is sth I certainly understand.</p>

<a name="134218467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218467" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218467">Tobias Grosser (Sep 19 2018 at 08:23)</a>:</h4>
<p>If all works, I can see if I can generalize things.</p>

<a name="134218488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218488" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218488">Mario Carneiro (Sep 19 2018 at 08:23)</a>:</h4>
<p>when applying the induction hypothesis, you will need to build a type that contains one fewer element than the type you started with</p>

<a name="134218503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218503" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218503">Tobias Grosser (Sep 19 2018 at 08:23)</a>:</h4>
<p>I see. That's annoying. I will certainly stay with (fin n)</p>

<a name="134218568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218568" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218568">Tobias Grosser (Sep 19 2018 at 08:24)</a>:</h4>
<p>Thanks again. Now I learned quite a bit. Will need to read up on exactI in type definitions.</p>

<a name="134218604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/partial%20order%20for%20matrix/near/134218604" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58886partialorderformatrix.html#134218604">Sean Leather (Sep 19 2018 at 08:26)</a>:</h4>
<blockquote>
<p>Will need to read up on exactI in type definitions.</p>
</blockquote>
<p>Note that tactics are simply ways of generating code. They can appear in definitions or proofs. It's just that they are most useful in proofs.</p>


{% endraw %}

{% include archive_update.html %}