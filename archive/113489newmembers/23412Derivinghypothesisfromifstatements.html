---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113489newmembers/23412Derivinghypothesisfromifstatements.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html">Deriving hypothesis from if statements</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="135056007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056007">Tobias Grosser (Oct 02 2018 at 18:55)</a>:</h4>
<p>Hi, I am currently cleaning up my gaussian elimination proof. At one point I defined the following functions:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">fin_first</span> <span class="o">{</span><span class="n">n</span> <span class="n">m</span><span class="o">}</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">))</span> <span class="o">{</span><span class="n">h</span><span class="o">:</span> <span class="n">i</span><span class="bp">.</span><span class="n">val</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">}:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">⟨</span><span class="n">i</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="k">begin</span> <span class="n">apply</span> <span class="n">h</span> <span class="kn">end</span><span class="bp">⟩</span>

<span class="n">def</span> <span class="n">fin_second</span> <span class="o">{</span><span class="n">n</span> <span class="n">m</span><span class="o">}</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">))</span> <span class="o">{</span><span class="n">h</span><span class="o">:</span> <span class="n">i</span><span class="bp">.</span><span class="n">val</span> <span class="bp">&gt;=</span> <span class="n">n</span><span class="o">}:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">m</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">⟨</span><span class="n">i</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">-</span> <span class="n">n</span><span class="o">,</span> <span class="k">begin</span> <span class="n">sorry</span> <span class="kn">end</span><span class="bp">⟩</span>

<span class="n">def</span> <span class="n">block_mx</span> <span class="o">{</span><span class="n">m_down</span> <span class="n">m_up</span> <span class="n">n_left</span> <span class="n">n_right</span><span class="o">:</span> <span class="n">nat</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m_up</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n_left</span><span class="o">)</span> <span class="n">α</span> <span class="bp">→</span>
  <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m_up</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n_right</span><span class="o">)</span> <span class="n">α</span> <span class="bp">→</span>
  <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m_down</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n_left</span><span class="o">)</span> <span class="n">α</span> <span class="bp">→</span>
  <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m_down</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n_right</span><span class="o">)</span> <span class="n">α</span> <span class="bp">→</span>
  <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="o">(</span><span class="n">m_up</span> <span class="bp">+</span> <span class="n">m_down</span><span class="o">))</span> <span class="o">(</span><span class="n">fin</span> <span class="o">(</span><span class="n">n_left</span> <span class="bp">+</span> <span class="n">n_right</span><span class="o">))</span> <span class="n">α</span>
<span class="bp">|</span> <span class="n">up_left</span> <span class="n">up_right</span> <span class="n">down_left</span> <span class="n">down_right</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">i</span> <span class="n">j</span><span class="o">,</span>
 <span class="k">if</span> <span class="n">i</span><span class="bp">.</span><span class="n">val</span> <span class="bp">&lt;</span> <span class="n">m_up</span>
 <span class="k">then</span>
    <span class="k">if</span> <span class="n">j</span><span class="bp">.</span><span class="n">val</span> <span class="bp">&lt;</span> <span class="n">n_left</span>
    <span class="k">then</span>
      <span class="n">up_left</span> <span class="o">(</span><span class="n">fin_first</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">fin_first</span> <span class="n">j</span><span class="o">)</span>
    <span class="k">else</span>
      <span class="n">up_right</span> <span class="o">(</span><span class="n">fin_first</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">fin_second</span> <span class="n">j</span><span class="o">)</span>
  <span class="k">else</span>
   <span class="k">if</span> <span class="n">j</span><span class="bp">.</span><span class="n">val</span> <span class="bp">&lt;</span> <span class="n">n_left</span>
    <span class="k">then</span>
      <span class="n">down_left</span> <span class="o">(</span><span class="n">fin_second</span> <span class="n">i</span><span class="o">)</span>  <span class="o">(</span><span class="n">fin_first</span> <span class="n">j</span><span class="o">)</span>
    <span class="k">else</span>
      <span class="n">down_right</span> <span class="o">(</span><span class="n">fin_second</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">fin_second</span> <span class="n">j</span><span class="o">)</span>
<span class="bp">```</span> <span class="n">app</span>

<span class="n">Whenever</span> <span class="n">I</span> <span class="n">apply</span> <span class="n">fin_first</span> <span class="n">and</span> <span class="n">fin_second</span><span class="o">,</span> <span class="n">I</span> <span class="n">would</span> <span class="n">like</span> <span class="n">to</span> <span class="n">make</span> <span class="n">the</span> <span class="kn">hypothesis</span> <span class="s2">&quot;h&quot;</span> <span class="n">available</span> <span class="n">based</span> <span class="n">on</span> <span class="n">the</span> <span class="n">information</span> <span class="k">in</span> <span class="n">the</span> <span class="k">if</span><span class="bp">-</span><span class="n">condition</span><span class="bp">.</span>
</pre></div>

<a name="135056162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056162">Tobias Grosser (Oct 02 2018 at 18:56)</a>:</h4>
<p>I feel this is a super trivial question, but I did not find a good example googling for it. Can somebody throw me the right keywords / reference?</p>

<a name="135056304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056304" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056304">Rob Lewis (Oct 02 2018 at 18:59)</a>:</h4>
<p>If you write <code>if h :  j.val &lt; n_left then _ else _</code> you'll get local hypotheses with the right types in the placeholders.</p>

<a name="135056328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056328" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056328">Tobias Grosser (Oct 02 2018 at 19:00)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">test</span><span class="bp">.</span><span class="n">lean</span><span class="o">:</span><span class="mi">25</span><span class="o">:</span><span class="mi">29</span><span class="o">:</span> <span class="n">error</span>

<span class="n">don&#39;t</span> <span class="n">know</span> <span class="n">how</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">placeholder</span>
<span class="kn">context</span><span class="o">:</span>
<span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">,</span>
<span class="n">m_down</span> <span class="n">m_up</span> <span class="n">n_left</span> <span class="n">n_right</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">block_mx</span> <span class="o">:</span>
  <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m_up</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n_left</span><span class="o">)</span> <span class="n">α</span> <span class="bp">→</span>
  <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m_up</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n_right</span><span class="o">)</span> <span class="n">α</span> <span class="bp">→</span>
  <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m_down</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n_left</span><span class="o">)</span> <span class="n">α</span> <span class="bp">→</span>
  <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m_down</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n_right</span><span class="o">)</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="o">(</span><span class="n">m_up</span> <span class="bp">+</span> <span class="n">m_down</span><span class="o">))</span> <span class="o">(</span><span class="n">fin</span> <span class="o">(</span><span class="n">n_left</span> <span class="bp">+</span> <span class="n">n_right</span><span class="o">))</span> <span class="n">α</span><span class="o">,</span>
<span class="n">up_left</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m_up</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n_left</span><span class="o">)</span> <span class="n">α</span><span class="o">,</span>
<span class="n">up_right</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m_up</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n_right</span><span class="o">)</span> <span class="n">α</span><span class="o">,</span>
<span class="n">down_left</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m_down</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n_left</span><span class="o">)</span> <span class="n">α</span><span class="o">,</span>
<span class="n">down_right</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m_down</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n_right</span><span class="o">)</span> <span class="n">α</span><span class="o">,</span>
<span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">m_up</span> <span class="bp">+</span> <span class="n">m_down</span><span class="o">),</span>
<span class="n">j</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">n_left</span> <span class="bp">+</span> <span class="n">n_right</span><span class="o">),</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">j</span><span class="bp">.</span><span class="n">val</span> <span class="bp">&lt;</span> <span class="n">n_left</span>
<span class="err">⊢</span> <span class="n">j</span><span class="bp">.</span><span class="n">val</span> <span class="bp">&lt;</span> <span class="n">n_left</span>
</pre></div>

<a name="135056374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056374" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056374">Tobias Grosser (Oct 02 2018 at 19:00)</a>:</h4>
<p>I seem to be so close.</p>

<a name="135056407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056407" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056407">Tobias Grosser (Oct 02 2018 at 19:00)</a>:</h4>
<p>I would hope lean picks this from the context. But it does not seem to do so.</p>

<a name="135056461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056461" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056461">Patrick Massot (Oct 02 2018 at 19:01)</a>:</h4>
<p><a href="https://leanprover.github.io/theorem_proving_in_lean/type_classes.html?highlight=dite#decidable-propositions" target="_blank" title="https://leanprover.github.io/theorem_proving_in_lean/type_classes.html?highlight=dite#decidable-propositions">https://leanprover.github.io/theorem_proving_in_lean/type_classes.html?highlight=dite#decidable-propositions</a></p>

<a name="135056479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056479" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056479">Rob Lewis (Oct 02 2018 at 19:01)</a>:</h4>
<p>You want Lean to fill in those arguments automatically when it finds them in the local context?</p>

<a name="135056539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056539" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056539">Rob Lewis (Oct 02 2018 at 19:02)</a>:</h4>
<p>You can write <code>def fin_first {n m} (i : fin (n + m)) {h: i.val &lt; n . assumption}: fin (n)</code></p>

<a name="135056555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056555" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056555">Rob Lewis (Oct 02 2018 at 19:02)</a>:</h4>
<p>(I think that's the right syntax, don't have Lean open right this second to check.)</p>

<a name="135056569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056569">Patrick Massot (Oct 02 2018 at 19:02)</a>:</h4>
<p>binders in <code>def fin_first {n m} (i : fin (n + m)) {h: i.val &lt; n}: fin (n)</code> are a bit strange, how <code>h</code> could be inferred from the explicit arguments?</p>

<a name="135056585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056585" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056585">Tobias Grosser (Oct 02 2018 at 19:03)</a>:</h4>
<p>I have no idea what I am doing here.</p>

<a name="135056588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056588">Patrick Massot (Oct 02 2018 at 19:03)</a>:</h4>
<p>Of course Rob's solution should work in your use case</p>

<a name="135056601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056601" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056601">Tobias Grosser (Oct 02 2018 at 19:03)</a>:</h4>
<p>I hoped "{" and "}" would create a "free" argument</p>

<a name="135056610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056610" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056610">Tobias Grosser (Oct 02 2018 at 19:03)</a>:</h4>
<p>Which would be filled in if available in the local context.</p>

<a name="135056664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056664" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056664">Tobias Grosser (Oct 02 2018 at 19:04)</a>:</h4>
<p>Rob suggested to use "assumption", right?</p>

<a name="135056695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056695" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056695">Tobias Grosser (Oct 02 2018 at 19:04)</a>:</h4>
<p>This gives:</p>
<div class="codehilite"><pre><span></span><span class="n">test</span><span class="bp">.</span><span class="n">lean</span><span class="o">:</span><span class="mi">7</span><span class="o">:</span><span class="mi">52</span><span class="o">:</span> <span class="n">error</span>

<span class="n">invalid</span> <span class="n">declaration</span><span class="o">,</span> <span class="err">&#39;</span><span class="o">}</span><span class="err">&#39;</span> <span class="n">expected</span>
<span class="n">test</span><span class="bp">.</span><span class="n">lean</span><span class="o">:</span><span class="mi">7</span><span class="o">:</span><span class="mi">55</span><span class="o">:</span> <span class="n">error</span>

<span class="n">command</span> <span class="n">expected</span>
</pre></div>

<a name="135056704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056704" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056704">Tobias Grosser (Oct 02 2018 at 19:05)</a>:</h4>
<p>Will  ook for assumption in the lean doc</p>

<a name="135056711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056711" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056711">Rob Lewis (Oct 02 2018 at 19:05)</a>:</h4>
<p>{ } creates implicit arguments. They're arguments that can be filled in completely from other arguments, basically. Lean won't automatically search your local context for matches, because (1) there could be tons of stuff in the context, and (2) there could be multiple matches there.</p>

<a name="135056784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056784">Tobias Grosser (Oct 02 2018 at 19:06)</a>:</h4>
<p>I see. How do I tell lean which matches I want? Should I use ! to make the parameters explicit and then provide the ones needed explicitly?</p>

<a name="135056795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056795" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056795">Rob Lewis (Oct 02 2018 at 19:06)</a>:</h4>
<p>Here's the correct syntax for using auto parameters like my suggestion:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="mi">1</span> <span class="bp">.</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">assumption</span><span class="o">)</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span> <span class="n">trivial</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span>
<span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="mi">1</span> <span class="k">then</span> <span class="n">f</span> <span class="n">n</span> <span class="k">else</span> <span class="n">trivial</span>
</pre></div>

<a name="135056932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135056932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135056932">Rob Lewis (Oct 02 2018 at 19:08)</a>:</h4>
<p>With auto parameters, you give a tactic that will be executed to fill in that argument. So using <code>tactic.assumption</code> with an auto param will try to find something in the context that will work.</p>

<a name="135057019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057019" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057019">Rob Lewis (Oct 02 2018 at 19:10)</a>:</h4>
<blockquote>
<p>I see. How do I tell lean which matches I want? Should I use ! to make the parameters explicit and then provide the ones needed explicitly?</p>
</blockquote>
<p>I'm not sure exactly what you mean. It's usually clear in a signature which arguments are inferrable from others, assuming the declaration is fully applied. The custom is to make as much implicit as you can.</p>

<a name="135057088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057088" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057088">Rob Lewis (Oct 02 2018 at 19:10)</a>:</h4>
<p>There's no ! syntax anymore, that was only in Lean 2. But you can use placeholders <code>_</code> to ask the elaborator to fill in explicit arguments.</p>

<a name="135057250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057250" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057250">Tobias Grosser (Oct 02 2018 at 19:13)</a>:</h4>
<p>Great.</p>

<a name="135057251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057251" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057251">Tobias Grosser (Oct 02 2018 at 19:13)</a>:</h4>
<p>I got this working.</p>

<a name="135057301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057301" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057301">Tobias Grosser (Oct 02 2018 at 19:14)</a>:</h4>
<p>I previously used "{}" around the assumption tactic, but I need to use "()"</p>

<a name="135057335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057335" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057335">Rob Lewis (Oct 02 2018 at 19:15)</a>:</h4>
<p>Great! Sorry, I should have checked before I wrote it with {}, heh.</p>

<a name="135057408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057408" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057408">Tobias Grosser (Oct 02 2018 at 19:16)</a>:</h4>
<p>These seem to be really basic questions, but I have now only a last issue.</p>

<a name="135057411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057411" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057411">Tobias Grosser (Oct 02 2018 at 19:16)</a>:</h4>
<p>h_j : ¬j.val &lt; n_left<br>
⊢ j.val ≥ n_left</p>

<a name="135057416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057416" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057416">Tobias Grosser (Oct 02 2018 at 19:16)</a>:</h4>
<p>Is what I see in the else branch.</p>

<a name="135057421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057421" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057421">Tobias Grosser (Oct 02 2018 at 19:16)</a>:</h4>
<p>This seems to be an obvious rewrite.</p>

<a name="135057431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057431" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057431">Tobias Grosser (Oct 02 2018 at 19:16)</a>:</h4>
<p>Unfortunately, I don't understand where I would even insert my tactic to do the rewrite.</p>

<a name="135057433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057433" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057433">Rob Lewis (Oct 02 2018 at 19:16)</a>:</h4>
<p><code>le_of_not_gt</code></p>

<a name="135057443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057443" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057443">Patrick Massot (Oct 02 2018 at 19:17)</a>:</h4>
<p>No you need a lemma here</p>

<a name="135057446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057446" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057446">Patrick Massot (Oct 02 2018 at 19:17)</a>:</h4>
<p>Yes, that lemma</p>

<a name="135057473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057473" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057473">Rob Lewis (Oct 02 2018 at 19:17)</a>:</h4>
<p>Are you using the auto param trick? Because I see that this might complicate things a bit.</p>

<a name="135057563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057563" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057563">Tobias Grosser (Oct 02 2018 at 19:19)</a>:</h4>
<p>I currently write "up_right (fin_first i) (fin_second j (begin rw of_not_gt at h_j end))"</p>

<a name="135057567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057567" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057567">Tobias Grosser (Oct 02 2018 at 19:19)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">up_right</span> <span class="o">(</span><span class="n">fin_first</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">fin_second</span> <span class="n">j</span> <span class="o">(</span><span class="k">begin</span> <span class="n">rw</span> <span class="n">of_not_gt</span> <span class="n">at</span> <span class="n">h_j</span> <span class="kn">end</span><span class="o">))</span>
</pre></div>

<a name="135057621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057621" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057621">Tobias Grosser (Oct 02 2018 at 19:20)</a>:</h4>
<p>Which seems to not type-check even syntactically.</p>

<a name="135057635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057635" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057635">Tobias Grosser (Oct 02 2018 at 19:20)</a>:</h4>
<p>I feel I mix proofs and normal programs beyond what is reasonable.</p>

<a name="135057762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057762" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057762">Tobias Grosser (Oct 02 2018 at 19:22)</a>:</h4>
<p>Also, as a lemma I seem to need "ge_of_not_lt", but I can fix this.</p>

<a name="135057808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057808" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057808">Patrick Massot (Oct 02 2018 at 19:23)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">meta</span> <span class="n">def</span> <span class="n">tobias</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">le_of_not_gt</span><span class="o">,</span>  <span class="n">assumption</span><span class="o">]</span> <span class="bp">&lt;|&gt;</span>  <span class="bp">`</span><span class="o">[</span><span class="n">assumption</span><span class="o">]</span>

<span class="n">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≤</span> <span class="mi">1</span> <span class="bp">.</span> <span class="n">tobias</span><span class="o">)</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span> <span class="n">trivial</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span>
<span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="mi">1</span> <span class="k">then</span> <span class="n">f</span> <span class="n">n</span> <span class="k">else</span> <span class="n">trivial</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span>
<span class="k">if</span> <span class="n">h</span> <span class="o">:</span>  <span class="n">n</span> <span class="bp">≤</span> <span class="mi">1</span> <span class="k">then</span> <span class="n">f</span> <span class="n">n</span> <span class="k">else</span> <span class="n">trivial</span>
</pre></div>

<a name="135057878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057878" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057878">Rob Lewis (Oct 02 2018 at 19:24)</a>:</h4>
<p>Haha, you beat me to it, I just wrote almost exactly the same thing.</p>

<a name="135057900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057900" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057900">Patrick Massot (Oct 02 2018 at 19:24)</a>:</h4>
<p>And my daughter tried to help you</p>

<a name="135057932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057932">Tobias Grosser (Oct 02 2018 at 19:25)</a>:</h4>
<p>This is very much appreciated!</p>

<a name="135057944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057944" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057944">Tobias Grosser (Oct 02 2018 at 19:25)</a>:</h4>
<p>The full family working on lean!</p>

<a name="135057963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135057963" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135057963">Tobias Grosser (Oct 02 2018 at 19:25)</a>:</h4>
<p>What I understand is that I can only provide tactics at function definition, not at the call-site.</p>

<a name="135058030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135058030" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135058030">Rob Lewis (Oct 02 2018 at 19:26)</a>:</h4>
<p>Oh, you can certainly provide them at the call site too.</p>

<a name="135058039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135058039" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135058039">Tobias Grosser (Oct 02 2018 at 19:26)</a>:</h4>
<p>In this case, I could just change the hypothesis of fin_second to what I want.</p>

<a name="135058056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135058056" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135058056">Tobias Grosser (Oct 02 2018 at 19:26)</a>:</h4>
<p>I tried to avoid this, as I felt the hypothesis that I stated is more canonical.</p>

<a name="135058066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135058066" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135058066">Tobias Grosser (Oct 02 2018 at 19:26)</a>:</h4>
<p>Cool so how would I add them to the call site?</p>

<a name="135058097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135058097" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135058097">Patrick Massot (Oct 02 2018 at 19:27)</a>:</h4>
<p>I meant my daughter tried to help Rob winning the race</p>

<a name="135058115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135058115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135058115">Rob Lewis (Oct 02 2018 at 19:27)</a>:</h4>
<p>If you make the inequality hypotheses to <code>fin_first</code> and <code>fin_second</code> explicit arguments, using <code>(h : i.val &lt; n)</code>, then you can apply it using <code>fin_first i (by assumption)</code>.</p>

<a name="135058182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135058182" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135058182">Rob Lewis (Oct 02 2018 at 19:28)</a>:</h4>
<p>Or <code>by tobias</code> in this case.</p>

<a name="135058314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135058314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135058314">Patrick Massot (Oct 02 2018 at 19:30)</a>:</h4>
<p>More seriously, the basics of implicit arguments goes like this: say you have a lemma (or function) with arguments <code>(f : a -&gt; b) (hf : continuous f)</code>. Then having <code>hf</code> forces the value of <code>f</code>, so you can mark <code>f</code> as implicit by changing the declaration to <code>{f : a -&gt; b} (hf : continuous f)</code>. This was you can provide only <code>hf</code> when applying the lemma and Lean will figure out <code>f</code>. In your case Lean had no hope to figure out <code>h</code> from other arguments so you need to keep it explicit, or use auto-param like in Rob's solution.</p>

<a name="135058479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135058479" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135058479">Tobias Grosser (Oct 02 2018 at 19:33)</a>:</h4>
<p>I see.</p>

<a name="135058485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135058485" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135058485">Tobias Grosser (Oct 02 2018 at 19:33)</a>:</h4>
<p>Got it.</p>

<a name="135058505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135058505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135058505">Tobias Grosser (Oct 02 2018 at 19:33)</a>:</h4>
<p>I can now successfully forward the hypothesis.</p>

<a name="135058510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135058510" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135058510">Tobias Grosser (Oct 02 2018 at 19:33)</a>:</h4>
<p>Thanks again, I learned sth new.</p>

<a name="135058568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135058568" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135058568">Tobias Grosser (Oct 02 2018 at 19:34)</a>:</h4>
<p>For completeness, this is how my code looks like:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">ring_theory</span><span class="bp">.</span><span class="n">matrix</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">n</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">m</span><span class="o">]</span>

<span class="n">local</span> <span class="kn">infixl</span> <span class="bp">`</span> <span class="bp">*</span><span class="err">ₘ</span> <span class="bp">`</span> <span class="o">:</span> <span class="mi">70</span> <span class="o">:=</span> <span class="n">matrix</span><span class="bp">.</span><span class="n">mul</span>

<span class="n">def</span> <span class="n">fin_first</span> <span class="o">{</span><span class="n">n</span> <span class="n">m</span><span class="o">}</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">))</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">i</span><span class="bp">.</span><span class="n">val</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="o">):</span> <span class="n">fin</span> <span class="o">(</span><span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">⟨</span><span class="n">i</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="k">begin</span> <span class="n">apply</span> <span class="n">h</span> <span class="kn">end</span><span class="bp">⟩</span>

<span class="n">def</span> <span class="n">fin_second</span> <span class="o">{</span><span class="n">n</span> <span class="n">m</span><span class="o">}</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">))</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">i</span><span class="bp">.</span><span class="n">val</span> <span class="bp">&gt;=</span> <span class="n">n</span><span class="o">):</span> <span class="n">fin</span> <span class="o">(</span><span class="n">m</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">⟨</span><span class="n">i</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">-</span> <span class="n">n</span><span class="o">,</span> <span class="n">sorry</span><span class="bp">⟩</span>

<span class="n">def</span> <span class="n">block_mx</span> <span class="o">{</span><span class="n">m_down</span> <span class="n">m_up</span> <span class="n">n_left</span> <span class="n">n_right</span><span class="o">:</span> <span class="n">nat</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m_up</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n_left</span><span class="o">)</span> <span class="n">α</span> <span class="bp">→</span>
  <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m_up</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n_right</span><span class="o">)</span> <span class="n">α</span> <span class="bp">→</span>
  <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m_down</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n_left</span><span class="o">)</span> <span class="n">α</span> <span class="bp">→</span>
  <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="n">m_down</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n_right</span><span class="o">)</span> <span class="n">α</span> <span class="bp">→</span>
  <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="o">(</span><span class="n">m_up</span> <span class="bp">+</span> <span class="n">m_down</span><span class="o">))</span> <span class="o">(</span><span class="n">fin</span> <span class="o">(</span><span class="n">n_left</span> <span class="bp">+</span> <span class="n">n_right</span><span class="o">))</span> <span class="n">α</span>
<span class="bp">|</span> <span class="n">up_left</span> <span class="n">up_right</span> <span class="n">down_left</span> <span class="n">down_right</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">i</span> <span class="n">j</span><span class="o">,</span>
 <span class="k">if</span> <span class="n">h_i</span><span class="o">:</span> <span class="n">i</span><span class="bp">.</span><span class="n">val</span> <span class="bp">&lt;</span> <span class="n">m_up</span>
 <span class="k">then</span>
    <span class="k">if</span> <span class="n">h_j</span><span class="o">:</span> <span class="n">j</span><span class="bp">.</span><span class="n">val</span> <span class="bp">&lt;</span> <span class="n">n_left</span>
    <span class="k">then</span>
      <span class="n">up_left</span> <span class="o">(</span><span class="n">fin_first</span> <span class="n">i</span> <span class="o">(</span><span class="k">by</span> <span class="n">assumption</span><span class="o">))</span> <span class="o">(</span><span class="n">fin_first</span> <span class="n">j</span> <span class="o">(</span><span class="k">by</span> <span class="n">assumption</span><span class="o">))</span>
    <span class="k">else</span>
      <span class="n">up_right</span> <span class="o">(</span><span class="n">fin_first</span> <span class="n">i</span> <span class="o">(</span><span class="k">by</span> <span class="n">assumption</span><span class="o">))</span> <span class="o">(</span><span class="n">fin_second</span> <span class="n">j</span> <span class="o">(</span><span class="k">by</span> <span class="n">apply</span> <span class="n">le_of_not_gt</span><span class="bp">;</span> <span class="n">assumption</span><span class="o">))</span>
  <span class="k">else</span>
   <span class="k">if</span> <span class="n">h_j</span><span class="o">:</span> <span class="n">j</span><span class="bp">.</span><span class="n">val</span> <span class="bp">&lt;</span> <span class="n">n_left</span>
    <span class="k">then</span>
      <span class="n">down_left</span> <span class="o">(</span><span class="n">fin_second</span> <span class="n">i</span> <span class="o">(</span><span class="k">by</span> <span class="n">apply</span> <span class="n">le_of_not_gt</span><span class="bp">;</span> <span class="n">assumption</span><span class="o">))</span>  <span class="o">(</span><span class="n">fin_first</span> <span class="n">j</span> <span class="o">(</span><span class="k">by</span> <span class="n">assumption</span><span class="o">))</span>
    <span class="k">else</span>
      <span class="n">down_right</span> <span class="o">(</span><span class="n">fin_second</span> <span class="n">i</span> <span class="o">(</span><span class="k">by</span> <span class="n">apply</span> <span class="n">le_of_not_gt</span><span class="bp">;</span> <span class="n">assumption</span><span class="o">))</span> <span class="o">(</span><span class="n">fin_second</span> <span class="n">j</span> <span class="o">(</span><span class="k">by</span> <span class="n">apply</span> <span class="n">le_of_not_gt</span><span class="bp">;</span> <span class="n">assumption</span><span class="o">))</span>
</pre></div>

<a name="135058597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135058597" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135058597">Rob Lewis (Oct 02 2018 at 19:34)</a>:</h4>
<p>It's not that common to use auto params, but this is actually a pretty good application. <code>linarith</code> would be a reasonable auto param too if it handled negations of inequalities.</p>

<a name="135058621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135058621" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135058621">Patrick Massot (Oct 02 2018 at 19:35)</a>:</h4>
<p>I can feel the approximate SMT solver temptation here</p>

<a name="135058629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135058629" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135058629">Tobias Grosser (Oct 02 2018 at 19:35)</a>:</h4>
<p>:D</p>

<a name="135058649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135058649" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135058649">Patrick Massot (Oct 02 2018 at 19:35)</a>:</h4>
<p><a href="#narrow/stream/113488-general/subject/linarith.20.26.20nat/near/134919571" title="#narrow/stream/113488-general/subject/linarith.20.26.20nat/near/134919571">https://leanprover.zulipchat.com/#narrow/stream/113488-general/subject/linarith.20.26.20nat/near/134919571</a></p>

<a name="135058650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135058650" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135058650">Tobias Grosser (Oct 02 2018 at 19:35)</a>:</h4>
<p>I certainly would like to explore more powerful linarithmetic tactics here. But this is a separate discussion.</p>

<a name="135058720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135058720" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135058720">Tobias Grosser (Oct 02 2018 at 19:36)</a>:</h4>
<p>I know, we have a solver for full Presburger arithmetic based on dual simplex. Eventually, this is what I would like to understand if we can make it work in lean.</p>

<a name="135061274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135061274" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135061274">Rob Lewis (Oct 02 2018 at 20:19)</a>:</h4>
<blockquote>
<p>I can feel the approximate SMT solver temptation here</p>
</blockquote>
<p><a href="https://github.com/leanprover/mathlib/pull/384" target="_blank" title="https://github.com/leanprover/mathlib/pull/384">https://github.com/leanprover/mathlib/pull/384</a></p>

<a name="135087439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135087439" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135087439">Tobias Grosser (Oct 03 2018 at 07:55)</a>:</h4>
<p>Amazing. This got even merged already. Will try to use it.</p>

<a name="135087599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135087599" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135087599">Tobias Grosser (Oct 03 2018 at 07:59)</a>:</h4>
<p>I fact, i tried to use it already and it did not work. Thought I need to dig deeper, but then I found this in the tactic description:  "In particular, it will not work on nat."</p>

<a name="135087622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135087622" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135087622">Tobias Grosser (Oct 03 2018 at 08:00)</a>:</h4>
<p>Seems that's a problem in my case. Any reason why it would not work?</p>

<a name="135089959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deriving%20hypothesis%20from%20if%20statements/near/135089959" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/23412Derivinghypothesisfromifstatements.html#135089959">Rob Lewis (Oct 03 2018 at 08:59)</a>:</h4>
<p>Oops, I guess the description is outdated. It will work on <code>nat</code>, but it isn't complete (it's just doing Fourier Motzkin elimination). It also doesn't know about nat subtraction, which could be a problem in your case.</p>


{% endraw %}
