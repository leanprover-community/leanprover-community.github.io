---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/31431Partialfunctions.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html">Partial functions</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="135005256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135005256" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135005256">zaa (Oct 02 2018 at 00:29)</a>:</h4>
<p>Are there cases where partial functions are actually necessary? [Should probably make a new topic.]</p>

<a name="135005726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135005726" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135005726">Bryan Gin-ge Chen (Oct 02 2018 at 00:43)</a>:</h4>
<p>Necessary for lean, or for mathematics?</p>

<a name="135005767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135005767" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135005767">zaa (Oct 02 2018 at 00:44)</a>:</h4>
<p>I can imagine that high school math (or some university math) definitely contains exercises with, for example, functions not defined for all real numbers.<br>
"Find the domain of definition of blah-blah function, and it's range of values, etc."<br>
"Find the solutions and don't forget about domain of definition."</p>
<p>Programming should have use for them too, imo (they could throws exceptions, errors or NaNs)</p>
<p>...</p>

<a name="135005768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135005768" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135005768">zaa (Oct 02 2018 at 00:44)</a>:</h4>
<blockquote>
<p>Necessary for lean, or for mathematics?</p>
</blockquote>
<p>For math.</p>

<a name="135005836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135005836" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135005836">Mario Carneiro (Oct 02 2018 at 00:47)</a>:</h4>
<p>There are plenty of places where partial functions in all their guises are useful</p>

<a name="135005877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135005877" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135005877">Mario Carneiro (Oct 02 2018 at 00:48)</a>:</h4>
<p>But there are many ways to interpret what "partial function" even means</p>

<a name="135005878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135005878" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135005878">Bryan Gin-ge Chen (Oct 02 2018 at 00:48)</a>:</h4>
<p>There are definitely lots of circumstances when the domain of a function is only a subset of some initial set that we are interested in; I guess you might call that a partial function, though I think most of the time people prefer just to talk about functions with different domains.</p>

<a name="135005889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135005889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135005889">Mario Carneiro (Oct 02 2018 at 00:49)</a>:</h4>
<p>In dependent type theory, you have the ability to specify such precise domains that it is not really necessary to have a partial function in the truest sense</p>

<a name="135005934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135005934" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135005934">Mario Carneiro (Oct 02 2018 at 00:50)</a>:</h4>
<p>Usually when I talk about a partial function in lean I mean a function with an argument that is a proof</p>

<a name="135005943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135005943" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135005943">Mario Carneiro (Oct 02 2018 at 00:50)</a>:</h4>
<p>Every partial function is isomorphic to a total function, over the subtype</p>

<a name="135005954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135005954" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135005954">zaa (Oct 02 2018 at 00:51)</a>:</h4>
<blockquote>
<p>Usually when I talk about a partial function in lean I mean a function with an argument that is a proof</p>
</blockquote>
<p>Like <code>F: forall x, P x -&gt; A</code>?</p>

<a name="135005957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135005957" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135005957">Mario Carneiro (Oct 02 2018 at 00:51)</a>:</h4>
<p>Right</p>

<a name="135006020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135006020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135006020">Mario Carneiro (Oct 02 2018 at 00:53)</a>:</h4>
<p>Actually there are two ways to losslessly totalize the function. One is to "push the argument left" to form the subtype <code>{x // P x} -&gt; A</code>, and the other is to push the argument right, into the output, as <code>X -&gt; \Sigma p, p -&gt; A</code></p>

<a name="135006025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135006025" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135006025">Mario Carneiro (Oct 02 2018 at 00:53)</a>:</h4>
<p>also known as <code>X -&gt; roption A</code> or <code>X -&gt;. A</code> which is the mathlib type of partial functions</p>

<a name="135006076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135006076" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135006076">Mario Carneiro (Oct 02 2018 at 00:55)</a>:</h4>
<p>When working in a programming context, it is often reasonable to upgrade this to <code>X -&gt; option A</code>. Here the function will "tell you" if you have gone out of domain, and will return a result if not</p>

<a name="135006085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135006085" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135006085">Mario Carneiro (Oct 02 2018 at 00:55)</a>:</h4>
<p>whereas <code>X -&gt; roption A</code> will not "tell you" if you have got the domain right; you have to pass in a proof that you are allowed to call the function before you get a result</p>

<a name="135006134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135006134" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135006134">zaa (Oct 02 2018 at 00:57)</a>:</h4>
<p><code>X -&gt; option A</code> is what people have at school. :D</p>

<a name="135006139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135006139" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135006139">Bryan Gin-ge Chen (Oct 02 2018 at 00:57)</a>:</h4>
<p>It looks like <code>roption</code> is only used in the computability stuff in mathlib, whereas <code>option</code> appears much more frequently.</p>

<a name="135006187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135006187" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135006187">Mario Carneiro (Oct 02 2018 at 00:58)</a>:</h4>
<p>That's mostly because we don't use partial functions that much</p>

<a name="135006189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135006189" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135006189">Mario Carneiro (Oct 02 2018 at 00:58)</a>:</h4>
<p>Most of the time you can avoid it one way or another</p>

<a name="135006205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135006205" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135006205">Mario Carneiro (Oct 02 2018 at 00:59)</a>:</h4>
<p>Notice that with either approach, you get a plain nondependent function. This is important for stuff like rewriting to work smoothly</p>

<a name="135006216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135006216" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135006216">Mario Carneiro (Oct 02 2018 at 00:59)</a>:</h4>
<p>with the proof exposed version, you have a dependent function, and then <code>rw</code> will often fail and <code>simp</code> will produce huge goals</p>

<a name="135006411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135006411" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135006411">zaa (Oct 02 2018 at 01:03)</a>:</h4>
<p>How are square root or logarithms (staying with real numbers) done in lean?</p>

<a name="135006601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135006601" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135006601">zaa (Oct 02 2018 at 01:07)</a>:</h4>
<p>Coq has that <code>positive := { x | x &gt;= 0 }</code> approach and than square root works on them, if I remember correctly.<br>
No idea about logarithms, should check if they're even in the Standard Library. It seems they're not.</p>

<a name="135006655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135006655" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135006655">Bryan Gin-ge Chen (Oct 02 2018 at 01:08)</a>:</h4>
<p><a href="http://﻿﻿﻿﻿https://github.com/leanprover/mathlib/blob/master/data/real/basic.lean#L508" target="_blank" title="http://﻿﻿﻿﻿https://github.com/leanprover/mathlib/blob/master/data/real/basic.lean#L508">Here's sqrt</a> and <a href="https://github.com/leanprover-community/mathlib/blob/exp/analysis/exponential.lean#L119" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/exp/analysis/exponential.lean#L119">here's the in-progress fork with ln</a>.</p>

<a name="135006734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135006734" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135006734">Mario Carneiro (Oct 02 2018 at 01:10)</a>:</h4>
<p>Most mathematical functions in mathlib are totalized, meaning that rather than preserving the proof part we just do something random when it's not true</p>

<a name="135006750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135006750" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135006750">Mario Carneiro (Oct 02 2018 at 01:11)</a>:</h4>
<p>e.g. a sqrt function might be defined to be the usual thing for nonnegative x and 0 for negative x</p>

<a name="135013778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135013778" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135013778">Kenny Lau (Oct 02 2018 at 04:54)</a>:</h4>
<p>unfortunately sqrt(-1) is not 37</p>

<a name="135016849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135016849" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135016849">zaa (Oct 02 2018 at 06:29)</a>:</h4>
<p>And 1/0 isn't too.</p>

<a name="135016912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135016912" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135016912">zaa (Oct 02 2018 at 06:31)</a>:</h4>
<p>Ok, then partial functions are used only if really necessary. We should do that at school math too :D.</p>

<a name="135018459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Partial%20functions/near/135018459" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31431Partialfunctions.html#135018459">Kevin Buzzard (Oct 02 2018 at 07:17)</a>:</h4>
<p>I am a mathematician and was very uncomfortable initially with the fact that sqrt(-1) was not <code>NaN</code>. But now I interpret it exactly as Mario says -- I have a mental note not to use the square root function on negative numbers in the statements of my theorems because I use it like a partial function even though it's total. Of course in the proofs I can do what I like. The fact that the square root function "should" only be used on non-negative integers is somehow something which a human uses for guidelines, but Lean doesn't need to be told this.</p>


{% endraw %}

{% include archive_update.html %}