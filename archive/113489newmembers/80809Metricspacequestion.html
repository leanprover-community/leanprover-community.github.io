---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/80809Metricspacequestion.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html">Metric space question</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="191891270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/191891270" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#191891270">Jason KY. (Mar 26 2020 at 14:23)</a>:</h4>
<p>Hi,<br>
I have proved that the product of two metric spaces is also a metric space:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">topology</span><span class="bp">.</span><span class="n">metric_space</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">noncomputable</span> <span class="n">theory</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">metric_space</span> <span class="n">X</span><span class="o">]</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">metric_space</span> <span class="n">Y</span><span class="o">]</span>

<span class="c">/-</span><span class="cm"> The metric of any two elements of a metric space is non-negative -/</span>
<span class="kn">theorem</span> <span class="n">metric_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span>
<span class="k">begin</span>
    <span class="n">suffices</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">dist</span> <span class="n">y</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">-</span> <span class="n">dist</span> <span class="n">y</span> <span class="n">y</span><span class="o">,</span>
        <span class="n">rw</span> <span class="o">[</span><span class="n">dist_self</span><span class="o">,</span> <span class="n">dist_comm</span><span class="o">,</span> <span class="n">sub_zero</span><span class="o">]</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
        <span class="n">linarith</span><span class="o">,</span>
    <span class="n">linarith</span> <span class="o">[</span><span class="n">dist_triangle</span> <span class="n">y</span> <span class="n">x</span> <span class="n">y</span><span class="o">]</span>
<span class="kn">end</span>

<span class="c">/-</span><span class="cm"> The product of two metric spaces is also a metric space -/</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">metric_space</span> <span class="o">(</span><span class="n">X</span> <span class="bp">×</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span>   <span class="n">dist</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">⟨</span><span class="n">x₀</span><span class="o">,</span> <span class="n">y₀</span><span class="bp">⟩</span> <span class="bp">⟨</span><span class="n">x₁</span><span class="o">,</span> <span class="n">y₁</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">dist</span> <span class="n">x₀</span> <span class="n">x₁</span> <span class="bp">+</span> <span class="n">dist</span> <span class="n">y₀</span> <span class="n">y₁</span><span class="o">,</span>
    <span class="n">dist_self</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="bp">⟩</span><span class="o">,</span> <span class="k">show</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">dist</span> <span class="n">y</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
    <span class="n">eq_of_dist_eq_zero</span> <span class="o">:=</span> <span class="c1">-- Why can&#39;t I use λ ⟨x₀, y₀⟩ ⟨x₁, y₁⟩ here?</span>
        <span class="k">begin</span>
            <span class="n">rintros</span> <span class="bp">⟨</span><span class="n">x₀</span><span class="o">,</span> <span class="n">y₀</span><span class="bp">⟩</span> <span class="bp">⟨</span><span class="n">x₁</span><span class="o">,</span> <span class="n">y₁</span><span class="bp">⟩</span><span class="o">,</span>
            <span class="k">show</span> <span class="n">dist</span> <span class="n">x₀</span> <span class="n">x₁</span> <span class="bp">+</span> <span class="n">dist</span> <span class="n">y₀</span> <span class="n">y₁</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">→</span> <span class="o">(</span><span class="n">x₀</span><span class="o">,</span> <span class="n">y₀</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x₁</span><span class="o">,</span> <span class="n">y₁</span><span class="o">),</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
            <span class="n">suffices</span> <span class="o">:</span> <span class="n">dist</span> <span class="n">x₀</span> <span class="n">x₁</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∧</span> <span class="n">dist</span> <span class="n">y₀</span> <span class="n">y₁</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
                <span class="n">rwa</span> <span class="o">[</span><span class="n">eq_of_dist_eq_zero</span> <span class="n">this</span><span class="bp">.</span><span class="n">left</span><span class="o">,</span> <span class="n">eq_of_dist_eq_zero</span> <span class="n">this</span><span class="bp">.</span><span class="n">right</span><span class="o">],</span>
            <span class="n">split</span><span class="o">,</span>
            <span class="n">all_goals</span> <span class="o">{</span><span class="n">linarith</span> <span class="o">[</span><span class="n">metric_nonneg</span> <span class="n">x₀</span> <span class="n">x₁</span><span class="o">,</span> <span class="n">metric_nonneg</span> <span class="n">y₀</span> <span class="n">y₁</span><span class="o">,</span> <span class="n">h</span><span class="o">]}</span>
        <span class="kn">end</span><span class="o">,</span>
    <span class="n">dist_comm</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">⟨</span><span class="n">x₀</span><span class="o">,</span> <span class="n">y₀</span><span class="bp">⟩</span> <span class="bp">⟨</span><span class="n">x₁</span><span class="o">,</span> <span class="n">y₁</span><span class="bp">⟩</span><span class="o">,</span>
        <span class="k">show</span> <span class="n">dist</span> <span class="n">x₀</span> <span class="n">x₁</span> <span class="bp">+</span> <span class="n">dist</span> <span class="n">y₀</span> <span class="n">y₁</span> <span class="bp">=</span> <span class="n">dist</span> <span class="n">x₁</span> <span class="n">x₀</span> <span class="bp">+</span> <span class="n">dist</span> <span class="n">y₁</span> <span class="n">y₀</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">dist_comm</span><span class="o">],</span>
    <span class="n">dist_triangle</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">⟨</span><span class="n">x₀</span><span class="o">,</span> <span class="n">y₀</span><span class="bp">⟩</span> <span class="bp">⟨</span><span class="n">x₁</span><span class="o">,</span> <span class="n">y₁</span><span class="bp">⟩</span> <span class="bp">⟨</span><span class="n">x₂</span><span class="o">,</span> <span class="n">y₂</span><span class="bp">⟩</span><span class="o">,</span>
        <span class="k">show</span> <span class="n">dist</span> <span class="n">x₀</span> <span class="n">x₂</span> <span class="bp">+</span> <span class="n">dist</span> <span class="n">y₀</span> <span class="n">y₂</span> <span class="bp">≤</span> <span class="n">dist</span> <span class="n">x₀</span> <span class="n">x₁</span> <span class="bp">+</span> <span class="n">dist</span> <span class="n">y₀</span> <span class="n">y₁</span> <span class="bp">+</span> <span class="o">(</span><span class="n">dist</span> <span class="n">x₁</span> <span class="n">x₂</span> <span class="bp">+</span> <span class="n">dist</span> <span class="n">y₁</span> <span class="n">y₂</span><span class="o">),</span>
        <span class="k">by</span> <span class="n">linarith</span> <span class="o">[</span><span class="n">dist_triangle</span> <span class="n">x₀</span> <span class="n">x₁</span> <span class="n">x₂</span><span class="o">,</span> <span class="n">dist_triangle</span> <span class="n">y₀</span> <span class="n">y₁</span> <span class="n">y₂</span><span class="o">]</span>
<span class="o">}</span>
</pre></div>


<p>but as you can see in my proof that the product of two metric spaces is also a metric space, I wasn't able to use <code>λ ⟨x₀, y₀⟩ ⟨x₁, y₁⟩</code> when proving <code>eq_of_dist_eq_zero</code>. Why might this be?</p>

<a name="191905653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/191905653" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#191905653">Reid Barton (Mar 26 2020 at 15:53)</a>:</h4>
<p>What happens when you try?</p>

<a name="191909841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/191909841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#191909841">Jason KY. (Mar 26 2020 at 16:19)</a>:</h4>
<p>It gives me</p>
<div class="codehilite"><pre><span></span><span class="bp">__</span><span class="n">mlocal__fresh_2827_71439</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">×</span> <span class="n">Y</span><span class="o">,</span>
<span class="bp">_</span><span class="n">x</span> <span class="o">:</span> <span class="n">dist</span> <span class="o">(</span><span class="n">x₀</span><span class="o">,</span> <span class="n">y₀</span><span class="o">)</span> <span class="bp">__</span><span class="n">mlocal__fresh_2827_71439</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="bp">_</span><span class="n">fun_match</span> <span class="o">:</span> <span class="n">dist</span> <span class="o">(</span><span class="n">x₀</span><span class="o">,</span> <span class="n">y₀</span><span class="o">)</span> <span class="bp">__</span><span class="n">mlocal__fresh_2827_71439</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">→</span> <span class="o">(</span><span class="n">x₀</span><span class="o">,</span> <span class="n">y₀</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">__</span><span class="n">mlocal__fresh_2827_71439</span>
</pre></div>


<p>when I want</p>
<div class="codehilite"><pre><span></span><span class="n">x₀</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">y₀</span> <span class="o">:</span> <span class="n">Y</span><span class="o">,</span>
<span class="n">x₁</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span>
<span class="n">y₁</span> <span class="o">:</span> <span class="n">Y</span>
</pre></div>


<p>which is what <code>rintro</code> gives me</p>

<a name="191911796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/191911796" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#191911796">Reid Barton (Mar 26 2020 at 16:30)</a>:</h4>
<p>Weird. I have no idea.</p>

<a name="192023093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192023093" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192023093">Jason KY. (Mar 27 2020 at 14:17)</a>:</h4>
<p>I'm currently trying to define a category of metric spaces but I've gotten stuck when trying to define a mapping between two metric spaces.</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">topology</span><span class="bp">.</span><span class="n">metric_space</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">concrete_category</span>

<span class="kn">open</span> <span class="n">category_theory</span>
<span class="kn">definition</span> <span class="n">Metric_space</span> <span class="o">:=</span> <span class="n">bundled</span> <span class="n">metric_space</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">Metric_space</span><span class="o">}</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">→</span> <span class="n">Y</span><span class="bp">.</span><span class="mi">1</span><span class="o">}</span> <span class="c1">-- invalid universe declaration, &#39;u_1&#39; shadows a local universe</span>
</pre></div>


<p>As you can see, I received the error <code>invalid universe declaration, 'u_1' shadows a local universe</code> when trying to define a mapping. What does this mean and how can I fix this?</p>

<a name="192023349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192023349" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192023349">Reid Barton (Mar 27 2020 at 14:19)</a>:</h4>
<p>I don't really know why this happens, but it's better to be explicit with universe levels (just like you would write <code>Type u</code>)</p>

<a name="192023567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192023567" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192023567">Jason KY. (Mar 27 2020 at 14:20)</a>:</h4>
<p>How would I be explicit with universe levels in this case? Sorry I don't normally use universes :/</p>

<a name="192024131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192024131" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192024131">Reid Barton (Mar 27 2020 at 14:24)</a>:</h4>
<p>probably something like (untested)</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">topology</span><span class="bp">.</span><span class="n">metric_space</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">concrete_category</span>

<span class="kn">universe</span> <span class="n">u</span>

<span class="kn">open</span> <span class="n">category_theory</span>
<span class="kn">definition</span> <span class="n">Metric_space</span> <span class="o">:=</span> <span class="n">bundled</span> <span class="n">metric_space</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">Metric_space</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}}</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">→</span> <span class="n">Y</span><span class="bp">.</span><span class="mi">1</span><span class="o">}</span>
</pre></div>

<a name="192024276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192024276" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192024276">Jason KY. (Mar 27 2020 at 14:24)</a>:</h4>
<p>Ah! That works perfectly! Thanks</p>

<a name="192123045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123045" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123045">Jason KY. (Mar 28 2020 at 13:26)</a>:</h4>
<p>Hi again!<br>
I'm currently proving that the finite union of bounded sets is also bounded</p>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm"> The union of finitely many bounded subsets is also bounded -/</span>
<span class="kn">theorem</span> <span class="n">bounded_union</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">h₀</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">is_bounded</span> <span class="err">$</span> <span class="n">S</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span>
<span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">is_bounded</span> <span class="err">$</span> <span class="err">⋃</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="n">S</span> <span class="n">i</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span><span class="bp">;</span> <span class="n">constructor</span><span class="bp">;</span> <span class="n">refl</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">bounded_union_two</span><span class="o">,</span> <span class="n">bounded_union</span><span class="o">]</span>
</pre></div>


<p>And I'm receiving this error</p>
<div class="codehilite"><pre><span></span>failed to prove recursive application is decreasing, well founded relation
  @has_well_founded.r ℕ (@has_well_founded_of_has_sizeof ℕ nat.has_sizeof)
Possible solutions:
  - Use &#39;using_well_founded&#39; keyword in the end of your definition to specify tactics for synthesizing well founded relations and decreasing proofs.
  - The default decreasing tactic uses the &#39;assumption&#39; tactic, thus hints (aka local proofs) can be provided using &#39;have&#39;-expressions.
The nested exception contains the failure state for the decreasing tactic.
nested exception message:
failed
</pre></div>


<p>I don't really understand what the possible solutions mean, any help would be appreciated!</p>

<a name="192123133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123133" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123133">Kenny Lau (Mar 28 2020 at 13:28)</a>:</h4>
<p>if you include <code>bounded_union</code> then I suspect it will just use <code>bounded_union</code> on <code>n+1</code></p>

<a name="192123200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123200" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123200">Jason KY. (Mar 28 2020 at 13:31)</a>:</h4>
<p>Right, that's probably it</p>

<a name="192123272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123272" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123272">Jason KY. (Mar 28 2020 at 13:33)</a>:</h4>
<p>Actually I'm not sure,  I have<code>bounded_union : ∀ (n : ℕ), is_bounded (⋃ (i : ℕ) (H : i ∈ finset.range n), S i)</code> as a hypothesis. Will <code>simp</code> not use this instead?</p>

<a name="192123328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123328" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123328">Jason KY. (Mar 28 2020 at 13:34)</a>:</h4>
<p>Is there a way to manually name this inductive hypothesis so it's less confusing?</p>

<a name="192123348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123348" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123348">Kenny Lau (Mar 28 2020 at 13:35)</a>:</h4>
<p>it would be easier for me to help you if you would produce an MWE</p>

<a name="192123408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123408" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123408">Jason KY. (Mar 28 2020 at 13:36)</a>:</h4>
<p>Alright, will do!</p>

<a name="192123471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123471" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123471">Jason KY. (Mar 28 2020 at 13:38)</a>:</h4>
<p>This should work</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">topology</span><span class="bp">.</span><span class="n">metric_space</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">metric_space</span> <span class="n">X</span><span class="o">]</span>

<span class="c">/-</span><span class="cm"> Notion of boundedness on metric spaces -/</span>
<span class="n">def</span> <span class="n">is_bounded</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="n">S</span> <span class="bp">=</span> <span class="err">∅</span> <span class="bp">∨</span> <span class="bp">∃</span> <span class="n">x₀</span> <span class="err">∈</span> <span class="n">S</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">k</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">S</span><span class="o">,</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">x₀</span> <span class="bp">≤</span> <span class="n">k</span>

<span class="c">/-</span><span class="cm"> The union of two bounded subsets is also bounded -/</span>
<span class="kn">lemma</span> <span class="n">bounded_union_two</span> <span class="o">(</span><span class="n">S</span> <span class="n">T</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">is_bounded</span> <span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">is_bounded</span> <span class="n">T</span><span class="o">)</span> <span class="o">:</span>
<span class="n">is_bounded</span> <span class="err">$</span> <span class="n">S</span> <span class="err">∪</span> <span class="n">T</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="c">/-</span><span class="cm"> The union of finitely many bounded subsets is also bounded -/</span>
<span class="kn">theorem</span> <span class="n">bounded_union</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">h₀</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">is_bounded</span> <span class="err">$</span> <span class="n">S</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span>
<span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">is_bounded</span> <span class="err">$</span> <span class="err">⋃</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="n">S</span> <span class="n">i</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span><span class="bp">;</span> <span class="n">constructor</span><span class="bp">;</span> <span class="n">refl</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">bounded_union_two</span><span class="o">,</span> <span class="n">bounded_union</span><span class="o">]</span>
</pre></div>

<a name="192123539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123539" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123539">Kenny Lau (Mar 28 2020 at 13:40)</a>:</h4>
<p>I don't think <code>⋃ i ∈ finset.range n</code> is idiomatic</p>

<a name="192123561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123561" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123561">Reid Barton (Mar 28 2020 at 13:41)</a>:</h4>
<p>Since <code>n</code> is an explicit argument, does it help if you just put <code>bounded_union n</code> in simp?</p>

<a name="192123572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123572">Jason KY. (Mar 28 2020 at 13:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110064">Kenny Lau</span> <a href="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192123539" title="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192123539">said</a>:</p>
<blockquote>
<p>I don't think <code>⋃ i ∈ finset.range n</code> is idiomatic</p>
</blockquote>
<p>Sorry but what does idiomatic mean?</p>

<a name="192123637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123637" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123637">Jason KY. (Mar 28 2020 at 13:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192123561" title="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192123561">said</a>:</p>
<blockquote>
<p>Since <code>n</code> is an explicit argument, does it help if you just put <code>bounded_union n</code> in simp?</p>
</blockquote>
<p>Emm, then <code>simp</code> doesn't solve the goal, but maybe it's working as intended then?</p>

<a name="192123660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123660" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123660">Kenny Lau (Mar 28 2020 at 13:43)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">topology</span><span class="bp">.</span><span class="n">metric_space</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">metric_space</span> <span class="n">X</span><span class="o">]</span>

<span class="c">/-</span><span class="cm"> Notion of boundedness on metric spaces -/</span>
<span class="n">def</span> <span class="n">is_bounded</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="n">S</span> <span class="bp">=</span> <span class="err">∅</span> <span class="bp">∨</span> <span class="bp">∃</span> <span class="n">x₀</span> <span class="err">∈</span> <span class="n">S</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">k</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">S</span><span class="o">,</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">x₀</span> <span class="bp">≤</span> <span class="n">k</span>

<span class="c">/-</span><span class="cm"> The union of two bounded subsets is also bounded -/</span>
<span class="kn">lemma</span> <span class="n">bounded_union_two</span> <span class="o">(</span><span class="n">S</span> <span class="n">T</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">is_bounded</span> <span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">is_bounded</span> <span class="n">T</span><span class="o">)</span> <span class="o">:</span>
<span class="n">is_bounded</span> <span class="err">$</span> <span class="n">S</span> <span class="err">∪</span> <span class="n">T</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="c">/-</span><span class="cm"> The union of finitely many bounded subsets is also bounded -/</span>
<span class="kn">theorem</span> <span class="n">bounded_union</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">h₀</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">is_bounded</span> <span class="err">$</span> <span class="n">S</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span>
<span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">is_bounded</span> <span class="err">$</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sup</span> <span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">)</span> <span class="n">S</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">left</span><span class="bp">;</span> <span class="n">simp</span><span class="bp">;</span> <span class="n">refl</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">finset</span><span class="bp">.</span><span class="n">range_succ</span><span class="o">]</span> <span class="kn">using</span> <span class="n">bounded_union_two</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">h₀</span> <span class="bp">_</span><span class="o">)</span> <span class="o">(</span><span class="n">bounded_union</span> <span class="n">n</span><span class="o">)</span>
</pre></div>

<a name="192123662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123662">Reid Barton (Mar 28 2020 at 13:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243312">Jason KY.</span> <a href="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192123572" title="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192123572">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110064">Kenny Lau</span> <a href="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192123539" title="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192123539">said</a>:</p>
<blockquote>
<p>I don't think <code>⋃ i ∈ finset.range n</code> is idiomatic</p>
</blockquote>
<p>Sorry but what does idiomatic mean?</p>
</blockquote>
<p>The normal way to write something. Consider <code>⋃ i &lt; n</code>.</p>

<a name="192123706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123706" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123706">Kenny Lau (Mar 28 2020 at 13:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243312">Jason KY.</span> <a href="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192123572" title="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192123572">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110064">Kenny Lau</span> <a href="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192123539" title="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192123539">said</a>:</p>
<blockquote>
<p>I don't think <code>⋃ i ∈ finset.range n</code> is idiomatic</p>
</blockquote>
<p>Sorry but what does idiomatic mean?</p>
</blockquote>
<p>idiomatic means the same in English as in here: how people would say it</p>

<a name="192123714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123714" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123714">Jason KY. (Mar 28 2020 at 13:44)</a>:</h4>
<p>Ah, alright!</p>

<a name="192123716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123716" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123716">Kenny Lau (Mar 28 2020 at 13:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192123662" title="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192123662">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="243312">Jason KY.</span> <a href="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192123572" title="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192123572">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110064">Kenny Lau</span> <a href="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192123539" title="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192123539">said</a>:</p>
<blockquote>
<p>I don't think <code>⋃ i ∈ finset.range n</code> is idiomatic</p>
</blockquote>
<p>Sorry but what does idiomatic mean?</p>
</blockquote>
<p>The normal way to write something. Consider <code>⋃ i &lt; n</code>.</p>
</blockquote>
<p>I... don't think that's idiomatic either</p>

<a name="192123720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123720" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123720">Kenny Lau (Mar 28 2020 at 13:44)</a>:</h4>
<p>because there's not enough lemmas to reduce from n+1 to n</p>

<a name="192123801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123801" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123801">Jason KY. (Mar 28 2020 at 13:46)</a>:</h4>
<p>Right, I'll try to use <code>finset.sup</code> in the future then, thanks for the help!</p>

<a name="192123818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123818" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123818">Kenny Lau (Mar 28 2020 at 13:47)</a>:</h4>
<p>I don't know what's idiomatic actually. When do we use a finite union?</p>

<a name="192123824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123824">Kenny Lau (Mar 28 2020 at 13:47)</a>:</h4>
<p>I mean, this lemma has nothing to do with <code>is_bounded</code>: it's just induction from <code>bounded_union_two</code></p>

<a name="192123834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123834" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123834">Reid Barton (Mar 28 2020 at 13:47)</a>:</h4>
<p>ok yes</p>

<a name="192123880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123880" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123880">Reid Barton (Mar 28 2020 at 13:48)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">set</span><span class="bp">.</span><span class="n">finite</span><span class="bp">.</span><span class="n">compact_bUnion</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">finite</span> <span class="n">s</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">i</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">compact</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">compact</span> <span class="o">(</span><span class="err">⋃</span><span class="n">i</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

<a name="192123886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123886" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123886">Reid Barton (Mar 28 2020 at 13:48)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">compact_Union</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">i</span><span class="o">,</span> <span class="n">compact</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">))</span> <span class="o">:</span> <span class="n">compact</span> <span class="o">(</span><span class="err">⋃</span><span class="n">i</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span>
</pre></div>

<a name="192123889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123889">Kenny Lau (Mar 28 2020 at 13:48)</a>:</h4>
<p>huh</p>

<a name="192123891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123891" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123891">Reid Barton (Mar 28 2020 at 13:48)</a>:</h4>
<p>I didn't really pay attention to the whole statement of Jason's lemma.</p>

<a name="192123906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192123906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192123906">Jason KY. (Mar 28 2020 at 13:49)</a>:</h4>
<p>Emm, I'm a bit confused. When should we use what?</p>

<a name="192124267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192124267" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192124267">Jason KY. (Mar 28 2020 at 13:54)</a>:</h4>
<p>I was able to get it working by introducing a temp lemma</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">temp</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="err">⋃</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="n">S</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="err">⋃</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="n">S</span> <span class="n">i</span><span class="o">)</span> <span class="err">∪</span> <span class="n">S</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="o">:=</span> <span class="n">sorry</span>

<span class="c">/-</span><span class="cm"> The union of finitely many bounded subsets is also bounded -/</span>
<span class="kn">theorem</span> <span class="n">bounded_union</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">h₀</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">is_bounded</span> <span class="err">$</span> <span class="n">S</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span>
<span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">is_bounded</span> <span class="err">$</span> <span class="err">⋃</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="n">n</span><span class="o">,</span> <span class="n">S</span> <span class="n">i</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span><span class="bp">;</span> <span class="n">constructor</span><span class="bp">;</span> <span class="n">refl</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">temp</span><span class="o">,</span> <span class="n">bounded_union_two</span><span class="o">,</span> <span class="n">bounded_union</span> <span class="n">n</span><span class="o">,</span> <span class="n">h₀</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)]</span>
</pre></div>


<p>Is there something like <code>temp</code> in mathlib?</p>

<a name="192124340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192124340" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192124340">Reid Barton (Mar 28 2020 at 13:55)</a>:</h4>
<p>I would suggest imitating the statement of <code>set.finite.compact_bUnion</code> and using <code>finset.induction_on</code> in the proof</p>

<a name="192124380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192124380" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192124380">Reid Barton (Mar 28 2020 at 13:56)</a>:</h4>
<p>Your statement is not going to be very convenient to use anyways so why bother proving it?</p>

<a name="192124384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192124384" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192124384">Reid Barton (Mar 28 2020 at 13:56)</a>:</h4>
<p>Unless it happens to be exactly what you need for some application</p>

<a name="192124395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192124395" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192124395">Jason KY. (Mar 28 2020 at 13:57)</a>:</h4>
<p>Oh, I'm just learning metric spaces myself so I thought to prove all the theorems in my lecture notes in LEAN</p>

<a name="192124533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192124533" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192124533">Jason KY. (Mar 28 2020 at 13:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192124340" title="#narrow/stream/113489-new-members/topic/Metric.20space.20question/near/192124340">said</a>:</p>
<blockquote>
<p>I would suggest imitating the statement of <code>set.finite.compact_bUnion</code> and using <code>finset.induction_on</code> in the proof</p>
</blockquote>
<p>Right, I'll try to do this</p>

<a name="192124573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192124573" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192124573">Reid Barton (Mar 28 2020 at 13:58)</a>:</h4>
<p>Normally the finite set indexing your sets won't happen to be of the form <code>finset.range n</code> and then you would have to do a lot of work to massage things into a situation in which you can apply your <code>bounded_union</code>.</p>

<a name="192182423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192182423" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192182423">Jason KY. (Mar 29 2020 at 16:29)</a>:</h4>
<p>Hi,<br>
I would now like to define the notion of open in LEAN however I've gotten a bit stuck.</p>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm"> Definition of an open ball -/</span>
<span class="n">def</span> <span class="n">open_ball</span> <span class="o">(</span><span class="n">x₀</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">dist</span> <span class="n">x₀</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">r</span><span class="o">}</span>

<span class="c">/-</span><span class="cm"> Definition of being open -/</span>
<span class="n">def</span> <span class="n">is_open&#39;</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">S</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">ε</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="n">open_ball</span> <span class="n">s</span> <span class="n">ε</span> <span class="n">H</span> <span class="err">⊆</span> <span class="n">S</span>
</pre></div>


<p>As you can see, my definition of an open ball requires the radius to be positive but this makes things rather awkward as then I would need to refer to a proof that <code>r &gt; 0</code> whenever I would like to create an open ball.</p>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm"> Definition of being open -/</span>
<span class="n">def</span> <span class="n">is_open&#39;</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">S</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">ε</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="o">(</span><span class="n">hε</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">ε</span><span class="o">),</span> <span class="n">open_ball</span> <span class="n">s</span> <span class="n">ε</span> <span class="n">hε</span> <span class="err">⊆</span> <span class="n">S</span>
</pre></div>


<p>I was hoping something like this would work but unfortunately, it does not. Is there an easy way of doing this? (Or even better, perhaps a type called<code>ℝ⁺</code> which is the positive reals?)</p>

<a name="192182512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192182512" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192182512">Patrick Massot (Mar 29 2020 at 16:31)</a>:</h4>
<p>I think you have too many commas.</p>

<a name="192182563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192182563" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192182563">Patrick Massot (Mar 29 2020 at 16:32)</a>:</h4>
<p>But I can't be sure because you didn't provide a MWE.</p>

<a name="192182567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192182567" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192182567">Reid Barton (Mar 29 2020 at 16:32)</a>:</h4>
<p><code>∀ s ∈ S, ∃ (ε : ℝ) (hε : 0 &lt; ε), open_ball s ε hε ⊆ S</code></p>

<a name="192182574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192182574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192182574">Reid Barton (Mar 29 2020 at 16:32)</a>:</h4>
<p>is at least syntactically correct</p>

<a name="192182592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192182592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192182592">Jason KY. (Mar 29 2020 at 16:33)</a>:</h4>
<p>Ah, I see! thanks!</p>

<a name="192182650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192182650" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192182650">Patrick Massot (Mar 29 2020 at 16:34)</a>:</h4>
<p>But it's still a bad idea to include the positivity constraint in the definition of open_ball.</p>

<a name="192182697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192182697" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192182697">Jason KY. (Mar 29 2020 at 16:35)</a>:</h4>
<p>is it? It's what my lecture notes said atleast</p>

<a name="192182765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192182765" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192182765">Patrick Massot (Mar 29 2020 at 16:36)</a>:</h4>
<p>Your lecture notes don't include type theoretic convenience constraints.</p>

<a name="192182798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192182798" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192182798">Jason KY. (Mar 29 2020 at 16:37)</a>:</h4>
<p>Why would it be a bad idea with these constraints?</p>

<a name="192182932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192182932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192182932">Patrick Massot (Mar 29 2020 at 16:40)</a>:</h4>
<p>You saw why putting this in the definition of balls is a bad idea.</p>

<a name="192183051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192183051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192183051">Jason KY. (Mar 29 2020 at 16:43)</a>:</h4>
<p>Right... But I don't see a better solution if I would like to use the definition presented in my lecture notes so I guess I just have to deal with it :D</p>

<a name="192183142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192183142" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192183142">Patrick Massot (Mar 29 2020 at 16:45)</a>:</h4>
<p>I think your lecturer wouldn't notice this difference in the definition of balls. Of course the definition of open subsets must include a positive radius condition.</p>

<a name="192183295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192183295" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192183295">Jason KY. (Mar 29 2020 at 16:47)</a>:</h4>
<p>Okay, I'll try to do without this restriction and just apply the positive radius and see if I run into trouble. Thanks again!</p>

<a name="192183365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192183365" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192183365">Patrick Massot (Mar 29 2020 at 16:48)</a>:</h4>
<p>I mean you can change your code to</p>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm"> Definition of an open ball -/</span>
<span class="n">def</span> <span class="n">open_ball</span> <span class="o">(</span><span class="n">x₀</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">dist</span> <span class="n">x₀</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">r</span><span class="o">}</span>

<span class="c">/-</span><span class="cm"> Definition of being open -/</span>
<span class="n">def</span> <span class="n">is_open&#39;</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">S</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">ε</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="n">open_ball</span> <span class="n">s</span> <span class="n">ε</span> <span class="err">⊆</span> <span class="n">S</span>
</pre></div>

<a name="192183385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192183385" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192183385">Jason KY. (Mar 29 2020 at 16:49)</a>:</h4>
<p>I've changed it to this because I've heard you should always use <code>&lt;</code> rather than <code>&gt;</code></p>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm"> Definition of being open -/</span>
<span class="n">def</span> <span class="n">is_open&#39;</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">S</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">ε</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">hε</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">ε</span><span class="o">),</span> <span class="n">open_ball</span> <span class="n">s</span> <span class="n">ε</span> <span class="err">⊆</span> <span class="n">S</span>
</pre></div>

<a name="192183432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192183432" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192183432">Jason KY. (Mar 29 2020 at 16:50)</a>:</h4>
<p>But I guess it doesn't really matter either way</p>

<a name="192183452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192183452" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192183452">Patrick Massot (Mar 29 2020 at 16:50)</a>:</h4>
<p>I would keep the natural writing order here.</p>

<a name="192184561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192184561" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192184561">Kevin Buzzard (Mar 29 2020 at 17:17)</a>:</h4>
<p>Oh! There are cases when <code>&gt;</code>is OK?</p>

<a name="192184607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192184607" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192184607">Patrick Massot (Mar 29 2020 at 17:18)</a>:</h4>
<p>I'm lobbying that it should be allowed precisely in this case (when appearing in a quantifier).</p>

<a name="192184950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192184950" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192184950">Kevin Buzzard (Mar 29 2020 at 17:27)</a>:</h4>
<p>That's interesting because appearing in a quantifier of this form is the only time I ever miss <code>&gt;</code> but I tell Xenaites to use <code>&lt;</code> or else they'll get linted.</p>

<a name="192185004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192185004" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192185004">Patrick Massot (Mar 29 2020 at 17:28)</a>:</h4>
<p>You can always plea the linter's indulgence.</p>

<a name="192185022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192185022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192185022">Patrick Massot (Mar 29 2020 at 17:29)</a>:</h4>
<p>with <code>@[nolint ge_or_gt]</code></p>

<a name="192429373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192429373" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192429373">Jason KY. (Mar 31 2020 at 18:20)</a>:</h4>
<p>Following <span class="user-mention" data-user-id="110032">@Reid Barton</span> 's suggestion, I've been trying to use <code>set.finite.induction_on</code> but I'm not sure if the way I'm using it is correct.<br>
Below is a MWE of my current problem:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">topology</span><span class="bp">.</span><span class="n">metric_space</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">metric_space</span> <span class="n">X</span><span class="o">]</span>

<span class="c">/-</span><span class="cm"> Definition of an open ball -/</span>
<span class="n">def</span> <span class="n">open_ball</span> <span class="o">(</span><span class="n">x₀</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">dist</span> <span class="n">x₀</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">r</span><span class="o">}</span>

<span class="c">/-</span><span class="cm"> Definition of being open -/</span>
<span class="n">def</span> <span class="n">is_open&#39;</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">S</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">ε</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">hε</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">ε</span><span class="o">),</span> <span class="n">open_ball</span> <span class="n">s</span> <span class="n">ε</span> <span class="err">⊆</span> <span class="n">S</span>

<span class="c">/-</span><span class="cm"> The intersect of open sets is open -/</span>
<span class="kn">lemma</span> <span class="n">inter_open_is_open</span> <span class="o">(</span><span class="n">U₀</span> <span class="n">U₁</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">h₀</span> <span class="o">:</span> <span class="n">is_open&#39;</span> <span class="n">U₀</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">is_open&#39;</span> <span class="n">U₁</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_open&#39;</span> <span class="o">(</span><span class="n">U₀</span> <span class="err">∩</span> <span class="n">U₁</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">lemma</span> <span class="n">inter_finite_open_is_open</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">{</span><span class="n">hI</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">finite</span> <span class="n">I</span><span class="o">}</span>
<span class="o">(</span><span class="n">h₀</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">I</span><span class="o">,</span> <span class="n">is_open&#39;</span> <span class="err">$</span> <span class="n">U</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_open&#39;</span> <span class="err">$</span> <span class="err">⋂</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">I</span><span class="o">,</span> <span class="n">U</span> <span class="n">i</span> <span class="o">:=</span>
<span class="n">set</span><span class="bp">.</span><span class="n">finite</span><span class="bp">.</span><span class="n">induction_on</span> <span class="n">hI</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span><span class="bp">;</span> <span class="k">from</span> <span class="bp">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="k">by</span> <span class="n">norm_num</span><span class="bp">⟩</span><span class="o">)</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">i</span> <span class="n">S</span> <span class="n">hi</span> <span class="n">hS</span> <span class="n">hopen</span><span class="o">,</span>
<span class="k">begin</span>
    <span class="n">rw</span> <span class="n">set</span><span class="bp">.</span><span class="n">bInter_insert</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">inter_open_is_open</span><span class="o">,</span>
        <span class="o">{</span><span class="n">apply</span> <span class="n">h₀</span><span class="o">,</span> <span class="n">sorry</span><span class="o">},</span>
        <span class="n">assumption</span>
<span class="kn">end</span>
</pre></div>


<p>I feel that after applying induction, there should be a term like <code>is_open' (U i)</code>but there is not. What have I done wrong here?</p>

<a name="192431027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192431027" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192431027">Alex J. Best (Mar 31 2020 at 18:33)</a>:</h4>
<p>If you move <code>h₀</code> into the statement you can make it work, caveat lector: I didn't think too hard about the best way to do it, just followed my nose at every subgoal.</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">inter_finite_open_is_open</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">{</span><span class="n">hI</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">finite</span> <span class="n">I</span><span class="o">}</span>
<span class="o">:</span> <span class="o">(</span> <span class="bp">∀</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">I</span><span class="o">,</span> <span class="n">is_open&#39;</span> <span class="err">$</span> <span class="n">U</span> <span class="n">i</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">is_open&#39;</span> <span class="err">$</span> <span class="err">⋂</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">I</span><span class="o">,</span> <span class="n">U</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">set</span><span class="bp">.</span><span class="n">finite</span><span class="bp">.</span><span class="n">induction_on</span> <span class="n">hI</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span><span class="bp">;</span> <span class="k">begin</span> <span class="n">intro</span><span class="o">,</span> <span class="n">intro</span><span class="o">,</span> <span class="n">use</span> <span class="mi">1</span><span class="o">,</span> <span class="n">split</span><span class="o">,</span> <span class="n">exact</span> <span class="n">zero_lt_one</span><span class="o">,</span><span class="n">exact</span> <span class="n">set</span><span class="bp">.</span><span class="n">subset_univ</span> <span class="o">(</span><span class="n">open_ball</span> <span class="n">s</span> <span class="mi">1</span><span class="o">),</span> <span class="kn">end</span><span class="o">)</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">i</span> <span class="n">S</span> <span class="n">hi</span> <span class="n">hS</span> <span class="n">hopen</span><span class="o">,</span>
<span class="k">begin</span>
    <span class="n">rw</span> <span class="n">set</span><span class="bp">.</span><span class="n">bInter_insert</span><span class="o">,</span><span class="n">intros</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">inter_open_is_open</span><span class="o">,</span>
        <span class="o">{</span><span class="n">apply</span> <span class="n">a</span><span class="o">,</span> <span class="n">exact</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_insert</span> <span class="n">i</span> <span class="n">S</span><span class="o">,</span> <span class="o">},</span>
        <span class="n">apply</span> <span class="n">hopen</span><span class="o">,</span><span class="n">intros</span><span class="o">,</span>
        <span class="n">apply</span> <span class="n">a</span><span class="o">,</span><span class="n">exact</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_union_right</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">i</span><span class="o">)</span> <span class="n">H</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="192431383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192431383" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192431383">Jason KY. (Mar 31 2020 at 18:35)</a>:</h4>
<p>Thank you so much Alex!</p>

<a name="192431552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192431552" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192431552">Jason KY. (Mar 31 2020 at 18:37)</a>:</h4>
<p>I'll try to put such predicates in the statement in the future. Don't think it would hurt right?</p>

<a name="192432142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192432142" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192432142">Alex J. Best (Mar 31 2020 at 18:42)</a>:</h4>
<p>Well normally its annoying to have to explicitly intro them and name them at the start of the proof, but for induction type proofs, its sometimes needed.</p>

<a name="192918384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192918384" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192918384">Jason KY. (Apr 04 2020 at 17:31)</a>:</h4>
<p>Hi!<br>
I'm slightly stuck on trying to manipulate the following intersect</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">topology</span><span class="bp">.</span><span class="n">metric_space</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">metric_space</span> <span class="n">X</span><span class="o">]</span>

<span class="c">/-</span><span class="cm"> Definition of an open ball -/</span>
<span class="n">def</span> <span class="n">open_ball</span> <span class="o">(</span><span class="n">x₀</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">dist</span> <span class="n">x₀</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">r</span><span class="o">}</span>

<span class="c">/-</span><span class="cm"> Definition of being open -/</span>
<span class="n">def</span> <span class="n">is_open&#39;</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">S</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">ε</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">hε</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">ε</span><span class="o">),</span> <span class="n">open_ball</span> <span class="n">s</span> <span class="n">ε</span> <span class="err">⊆</span> <span class="n">S</span>

<span class="c">/-</span><span class="cm"> Definition of being closed -/</span>
<span class="n">def</span> <span class="n">is_closed&#39;</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="n">is_open&#39;</span> <span class="err">$</span> <span class="bp">-</span><span class="n">S</span>

<span class="c">/-</span><span class="cm"> Definition of closure -/</span>
<span class="n">def</span> <span class="n">closure&#39;</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="err">⋂</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">h₀</span> <span class="o">:</span> <span class="n">S</span> <span class="err">⊆</span> <span class="n">T</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">is_closed&#39;</span> <span class="n">T</span><span class="o">),</span> <span class="n">T</span>

<span class="n">attribute</span> <span class="o">[</span><span class="kn">reducible</span><span class="o">]</span> <span class="n">open_ball</span> <span class="n">is_open&#39;</span> <span class="n">is_closed&#39;</span>

<span class="kn">lemma</span> <span class="n">closure_closed</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_closed&#39;</span> <span class="err">$</span> <span class="n">closure&#39;</span> <span class="n">S</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">unfold</span> <span class="n">closure&#39;</span><span class="o">,</span> <span class="c1">-- ⊢ is_closed&#39; (⋂ (T : set X) (h₀ : S ⊆ T) (h₁ : is_closed&#39; T), T)</span>
    <span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>


<p>I would like to use a lemma I've proved which it that the intersect of closed sets is closed :</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">Inter_closed_is_closed</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">set</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">I</span><span class="o">,</span> <span class="n">is_closed&#39;</span> <span class="err">$</span> <span class="n">U</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_closed&#39;</span> <span class="err">$</span> <span class="err">⋂</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">I</span><span class="o">,</span> <span class="n">U</span> <span class="n">i</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>


<p>How should I go about doing this?</p>

<a name="192918601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192918601" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192918601">Reid Barton (Apr 04 2020 at 17:36)</a>:</h4>
<p>The statement of your lemma is not good. Compare <code>is_open_bUnion</code>.</p>

<a name="192918787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192918787" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192918787">Jason KY. (Apr 04 2020 at 17:40)</a>:</h4>
<p>Is the statement bad because of the squiggly brackets or because of the <code>Type*</code>s?</p>

<a name="192918822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192918822" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192918822">Reid Barton (Apr 04 2020 at 17:41)</a>:</h4>
<p>The <code>Type*</code>s</p>

<a name="192918827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192918827" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192918827">Reid Barton (Apr 04 2020 at 17:41)</a>:</h4>
<p>You should replace those with an arbitrary type</p>

<a name="192918894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192918894" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192918894">Jason KY. (Apr 04 2020 at 17:42)</a>:</h4>
<p>Like this?</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">Inter_closed_is_closed</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">set</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="kt">Type</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">I</span><span class="o">,</span> <span class="n">is_closed&#39;</span> <span class="err">$</span> <span class="n">U</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_closed&#39;</span> <span class="err">$</span> <span class="err">⋂</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">I</span><span class="o">,</span> <span class="n">U</span> <span class="n">i</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="192919384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192919384" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192919384">Reid Barton (Apr 04 2020 at 17:54)</a>:</h4>
<p>No, what is <code>set Type</code> for? I think you are confusing <code>Type</code> with the concept of "some type". Study what happens near the start of <code>topology.basic</code>.</p>

<a name="192919480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192919480" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192919480">Jason KY. (Apr 04 2020 at 17:56)</a>:</h4>
<p>Ah, I see. So it should be like this? </p>
<div class="codehilite"><pre><span></span><span class="kn">variable</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kn">theorem</span> <span class="n">Inter_closed_is_closed</span> <span class="o">{</span><span class="n">I</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">}</span>
<span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">I</span><span class="o">,</span> <span class="n">is_closed&#39;</span> <span class="err">$</span> <span class="n">U</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_closed&#39;</span> <span class="err">$</span> <span class="err">⋂</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">I</span><span class="o">,</span> <span class="n">U</span> <span class="n">i</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="192919499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192919499" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192919499">Reid Barton (Apr 04 2020 at 17:57)</a>:</h4>
<p>Yes. you might find you need additional lemmas though, I'm not sure.</p>

<a name="192919583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192919583" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192919583">Jason KY. (Apr 04 2020 at 17:58)</a>:</h4>
<p>I think it works, let me try to finish the proof</p>

<a name="192920206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192920206" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192920206">Jason KY. (Apr 04 2020 at 18:11)</a>:</h4>
<p>I couldn't get it working :/ But if I change the definition of my closure then it works:</p>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm"> Definition of closure -/</span>
<span class="n">def</span> <span class="n">closure&#39;&#39;</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="err">⋂</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">h₀</span> <span class="o">:</span> <span class="n">S</span> <span class="err">⊆</span> <span class="n">T</span> <span class="bp">∧</span> <span class="n">is_closed&#39;</span> <span class="n">T</span><span class="o">),</span> <span class="n">T</span>

<span class="c">/-</span><span class="cm"> The closure of a set is also closed -/</span>
<span class="kn">lemma</span> <span class="n">closure_closed</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_closed&#39;</span> <span class="err">$</span> <span class="n">closure&#39;&#39;</span> <span class="n">S</span> <span class="o">:=</span>
<span class="n">Inter_closed_is_closed</span> <span class="err">$</span>
<span class="k">begin</span>
    <span class="n">intros</span> <span class="n">T</span> <span class="n">hT</span><span class="o">,</span>
    <span class="k">from</span> <span class="n">hT</span><span class="bp">.</span><span class="n">right</span>
<span class="kn">end</span>
</pre></div>


<p>It there a way to change <code>⋂ (T : set X) (h₀ : S ⊆ T) (h₁ : is_closed' T), T</code> to <code> ⋂ (T : set X) (h₀ : S ⊆ T ∧ is_closed' T), T</code>. <br>
They are the same right?</p>

<a name="192920255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192920255" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192920255">Mario Carneiro (Apr 04 2020 at 18:12)</a>:</h4>
<p>did you try simp?</p>

<a name="192920260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192920260" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192920260">Mario Carneiro (Apr 04 2020 at 18:12)</a>:</h4>
<p>that's the sort of thing that <code>simp</code> is likely to know</p>

<a name="192920296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192920296" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192920296">Jason KY. (Apr 04 2020 at 18:13)</a>:</h4>
<p>Just tried it, doesn't work :/</p>

<a name="192920298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192920298" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192920298">Mario Carneiro (Apr 04 2020 at 18:13)</a>:</h4>
<p>The lemma you need is <code>infi_and</code>, not sure if that has a set version but it's defeq to it</p>

<a name="192920369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192920369" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192920369">Jason KY. (Apr 04 2020 at 18:15)</a>:</h4>
<p>Alright, I'll try it out!</p>

<a name="192920535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192920535" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192920535">Mario Carneiro (Apr 04 2020 at 18:19)</a>:</h4>
<p>You should prove the version without the set, because it is more general</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">Inter_closed_is_closed</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">is_closed&#39;</span> <span class="err">$</span> <span class="n">U</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_closed&#39;</span> <span class="err">$</span> <span class="err">⋂</span> <span class="n">i</span><span class="o">,</span> <span class="n">U</span> <span class="n">i</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">variable</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kn">theorem</span> <span class="n">bInter_closed_is_closed</span> <span class="o">{</span><span class="n">I</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">I</span><span class="o">,</span> <span class="n">is_closed&#39;</span> <span class="err">$</span> <span class="n">U</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_closed&#39;</span> <span class="err">$</span> <span class="err">⋂</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">I</span><span class="o">,</span> <span class="n">U</span> <span class="n">i</span> <span class="o">:=</span>
<span class="n">Inter_closed_is_closed</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">Inter_closed_is_closed</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">h&#39;</span><span class="o">,</span> <span class="n">h</span> <span class="n">i</span> <span class="n">h&#39;</span>
</pre></div>

<a name="192920619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192920619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192920619">Mario Carneiro (Apr 04 2020 at 18:20)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">closure&#39;</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="err">⋂</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">h₀</span> <span class="o">:</span> <span class="n">S</span> <span class="err">⊆</span> <span class="n">T</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">is_closed&#39;</span> <span class="n">T</span><span class="o">),</span> <span class="n">T</span>

<span class="c">/-</span><span class="cm"> The closure of a set is also closed -/</span>
<span class="kn">lemma</span> <span class="n">closure_closed</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_closed&#39;</span> <span class="err">$</span> <span class="n">closure&#39;</span> <span class="n">S</span> <span class="o">:=</span>
<span class="n">Inter_closed_is_closed</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">T</span><span class="o">,</span> <span class="n">Inter_closed_is_closed</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">h₁</span><span class="o">,</span>
<span class="n">Inter_closed_is_closed</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">h₂</span><span class="o">,</span> <span class="n">h₂</span>
</pre></div>

<a name="192920690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192920690" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192920690">Mario Carneiro (Apr 04 2020 at 18:22)</a>:</h4>
<p>Note that <code>Inter_closed_is_closed</code> has its own version of <code>{α}</code>, which is actually <code>{α : Sort*}</code>, so that it can also apply when the index type is a prop</p>

<a name="192920701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192920701" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192920701">Mario Carneiro (Apr 04 2020 at 18:22)</a>:</h4>
<p>if you reuse the variable it will be <code>{α : Type*}</code> which doesn't apply to Prop</p>

<a name="192920778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192920778" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192920778">Jason KY. (Apr 04 2020 at 18:25)</a>:</h4>
<p>So <code>{α}</code> is just short for <code>{α : Sort*}</code>?</p>

<a name="192920862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192920862" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192920862">Mario Carneiro (Apr 04 2020 at 18:27)</a>:</h4>
<p>Yes. Note that <code>Sort*</code> is actually <code>Sort _</code>, a metavariable that will be instantiated depending on the rest of the statement. So for example if you use this in the second statement:</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">bInter_closed_is_closed</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">I</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">I</span><span class="o">,</span> <span class="n">is_closed&#39;</span> <span class="err">$</span> <span class="n">U</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_closed&#39;</span> <span class="err">$</span> <span class="err">⋂</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">I</span><span class="o">,</span> <span class="n">U</span> <span class="n">i</span> <span class="o">:=</span> <span class="bp">...</span>
</pre></div>


<p>then <code>{α}</code> will get type <code>{α : Type u_1}</code> because that's what is needed to make <code>set α</code> typecheck</p>

<a name="192921019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Metric%20space%20question/near/192921019" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/80809Metricspacequestion.html#192921019">Jason KY. (Apr 04 2020 at 18:30)</a>:</h4>
<p>Ah, I see. Thank you!</p>


{% endraw %}

{% include archive_update.html %}