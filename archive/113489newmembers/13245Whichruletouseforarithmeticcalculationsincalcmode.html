---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html">Which rule to use for arithmetic calculations in calc mode?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="135641895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135641895" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135641895">Yufan Lou (Oct 12 2018 at 09:59)</a>:</h4>
<p>I am trying to prove for any odd number n, 3n + 5 is even as a practice. In the calc steps I have:<br>
3 * n + 5 = ...<br>
            ... = 3 * 2 * k + 3 + 5 : by rw mul_assoc<br>
            ... = 3 * 2 * k + 8        : by ?</p>
<p>What do I need to put in place of the question mark? I wrote the proof this way so as to closely track how I would write it manually, in hope I may introduce this to my classmates as a tool, so I don’t need to simplify it further.</p>

<a name="135641906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135641906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135641906">Kenny Lau (Oct 12 2018 at 09:59)</a>:</h4>
<p>by rw add_assoc</p>

<a name="135642081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642081" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642081">Mario Carneiro (Oct 12 2018 at 10:02)</a>:</h4>
<p><code>rfl</code></p>

<a name="135642100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642100">Mario Carneiro (Oct 12 2018 at 10:02)</a>:</h4>
<p><code>norm_num</code> is the correct answer though</p>

<a name="135642393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642393">Yufan Lou (Oct 12 2018 at 10:09)</a>:</h4>
<p>norm_num is unknown identifier tho</p>

<a name="135642396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642396">Yufan Lou (Oct 12 2018 at 10:09)</a>:</h4>
<p>I am using the online version</p>

<a name="135642442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642442" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642442">Abhimanyu Pallavi Sudhir (Oct 12 2018 at 10:10)</a>:</h4>
<blockquote>
<p>norm_num is unknown identifier tho</p>
</blockquote>
<p>Just import tactic.norm_num</p>

<a name="135642532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642532" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642532">Mario Carneiro (Oct 12 2018 at 10:12)</a>:</h4>
<p>I'm not sure if the online version has <code>tactic.norm_num</code>, it's got a quite old version of mathlib</p>

<a name="135642552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642552" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642552">Yufan Lou (Oct 12 2018 at 10:12)</a>:</h4>
<p>import went through</p>

<a name="135642587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642587" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642587">Yufan Lou (Oct 12 2018 at 10:13)</a>:</h4>
<p>curiously it still doesn't work. rw add_assoc works btw</p>

<a name="135642644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642644" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642644">Yufan Lou (Oct 12 2018 at 10:14)</a>:</h4>
<p>Given by norm_num: <code>⊢ 3 + (5 + 6 * k) = 8 + 6 * k</code></p>

<a name="135642649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642649" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642649">Mario Carneiro (Oct 12 2018 at 10:14)</a>:</h4>
<p>You have to reassociate first</p>

<a name="135642651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642651" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642651">Kenny Lau (Oct 12 2018 at 10:14)</a>:</h4>
<blockquote>
<p><code>norm_num</code> is the correct answer though</p>
</blockquote>
<p>I would prefer <code>rfl</code> over <code>norm_num</code></p>

<a name="135642664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642664" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642664">Mario Carneiro (Oct 12 2018 at 10:15)</a>:</h4>
<p><code>norm_num</code> will evaluate closed term expressions but they have to all be gathered together</p>

<a name="135642673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642673" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642673">Mario Carneiro (Oct 12 2018 at 10:15)</a>:</h4>
<p><code>rfl</code> works in small cases, especially on <code>nat</code></p>

<a name="135642678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642678" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642678">Yufan Lou (Oct 12 2018 at 10:15)</a>:</h4>
<p>Problem I have with rfl is that the error is not helpful at all</p>

<a name="135642734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642734" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642734">Mario Carneiro (Oct 12 2018 at 10:16)</a>:</h4>
<p>But stuff like <code>3 + 5 = 8</code> on <code>real</code> needs <code>norm_num</code></p>

<a name="135642744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642744" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642744">Kenny Lau (Oct 12 2018 at 10:16)</a>:</h4>
<blockquote>
<p>Problem I have with rfl is that the error is not helpful at all</p>
</blockquote>
<p>it just means they are not definitionally equal</p>

<a name="135642753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642753" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642753">Yufan Lou (Oct 12 2018 at 10:16)</a>:</h4>
<p>oh for my case I only work with int and nat</p>

<a name="135642759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642759" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642759">Yufan Lou (Oct 12 2018 at 10:16)</a>:</h4>
<p>no need for real here</p>

<a name="135642768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642768" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642768">Mario Carneiro (Oct 12 2018 at 10:17)</a>:</h4>
<p>Also stuff like <code>100 * 35 = 3500</code> should not be done by <code>rfl</code></p>

<a name="135642770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642770" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642770">Kenny Lau (Oct 12 2018 at 10:17)</a>:</h4>
<p>sure</p>

<a name="135642782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642782" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642782">Mario Carneiro (Oct 12 2018 at 10:17)</a>:</h4>
<p>but for numbers less than 10 you should be fine</p>

<a name="135642836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642836" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642836">Yufan Lou (Oct 12 2018 at 10:18)</a>:</h4>
<p>cuz <code>rfl</code> does induction?</p>

<a name="135642841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642841">Mario Carneiro (Oct 12 2018 at 10:18)</a>:</h4>
<p>It calculates both sides to a normal form in unary</p>

<a name="135642842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642842" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642842">Mario Carneiro (Oct 12 2018 at 10:19)</a>:</h4>
<p>so it's exponentially slower than <code>norm_num</code> in large cases</p>

<a name="135642851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135642851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135642851">Yufan Lou (Oct 12 2018 at 10:19)</a>:</h4>
<p>gotcha</p>

<a name="135643128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643128" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643128">Yufan Lou (Oct 12 2018 at 10:25)</a>:</h4>
<blockquote>
<p>You have to reassociate first</p>
</blockquote>
<p>this kinda beats the purpose of replacing <code>rw add_assoc</code> tho</p>

<a name="135643205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643205" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643205">Mario Carneiro (Oct 12 2018 at 10:26)</a>:</h4>
<p>that's true</p>

<a name="135643207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643207" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643207">Mario Carneiro (Oct 12 2018 at 10:26)</a>:</h4>
<p><code>ring</code> will actually solve the whole goal in this case</p>

<a name="135643211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643211" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643211">Yufan Lou (Oct 12 2018 at 10:26)</a>:</h4>
<div class="codehilite"><pre><span></span>... = 3 * 2 * k + 8            : by rw add_assoc
 ... = 2 * 3 * k + 8            : by rw mul_comm
</pre></div>


<p>gives me <code>⊢ k * (3 * 2) + 8 = 2 * 3 * k + 8</code></p>

<a name="135643221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643221" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643221">Mario Carneiro (Oct 12 2018 at 10:26)</a>:</h4>
<p>you can do <code>mul_comm 2</code></p>

<a name="135643229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643229" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643229">Mario Carneiro (Oct 12 2018 at 10:27)</a>:</h4>
<p>to give lean a bit of a hint of which mul to comm</p>

<a name="135643233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643233" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643233">Yufan Lou (Oct 12 2018 at 10:27)</a>:</h4>
<p>gotcha</p>

<a name="135643244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643244" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643244">Mario Carneiro (Oct 12 2018 at 10:27)</a>:</h4>
<p>that's one that <code>norm_num</code> can solve btw... or <code>rfl</code></p>

<a name="135643287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643287">Kenny Lau (Oct 12 2018 at 10:28)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">norm_num</span>

<span class="kn">theorem</span> <span class="n">test</span> <span class="o">:</span> <span class="o">(</span><span class="mi">3</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">5</span> <span class="bp">=</span> <span class="mi">8</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">norm_num</span>

<span class="bp">#</span><span class="kn">print</span> <span class="n">test</span>

<span class="kn">theorem</span> <span class="n">test1</span> <span class="o">:</span> <span class="o">(</span><span class="mi">3</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">5</span> <span class="bp">=</span> <span class="mi">8</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">bit1_add_bit1</span><span class="o">,</span> <span class="n">norm_num</span><span class="bp">.</span><span class="n">one_add_bit0</span><span class="o">,</span>
<span class="n">norm_num</span><span class="bp">.</span><span class="n">add1_bit1</span><span class="o">,</span> <span class="n">norm_num</span><span class="bp">.</span><span class="n">add1_one</span><span class="o">]</span>

<span class="bp">#</span><span class="kn">print</span> <span class="n">test1</span>

<span class="kn">theorem</span> <span class="n">test2</span> <span class="o">:</span> <span class="o">(</span><span class="mi">3</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">5</span> <span class="bp">=</span> <span class="mi">8</span> <span class="o">:=</span>
<span class="k">calc</span>  <span class="o">(</span><span class="mi">3</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">5</span>
    <span class="bp">=</span> <span class="n">bit0</span> <span class="o">(</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">add1</span> <span class="o">((</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">))</span> <span class="o">:</span> <span class="n">norm_num</span><span class="bp">.</span><span class="n">bit1_add_bit1</span> <span class="bp">_</span> <span class="bp">_</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="n">bit0</span> <span class="o">(</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">add1</span> <span class="o">(</span><span class="n">bit1</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)))</span> <span class="o">:</span> <span class="n">congr_arg</span> <span class="bp">_</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="bp">_</span> <span class="o">(</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">one_add_bit0</span> <span class="bp">_</span><span class="o">))</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="n">bit0</span> <span class="o">(</span><span class="n">bit0</span> <span class="o">(</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">add1</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)))</span> <span class="o">:</span> <span class="n">congr_arg</span> <span class="bp">_</span> <span class="o">(</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">add1_bit1</span> <span class="bp">_</span><span class="o">)</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="n">bit0</span> <span class="o">(</span><span class="n">bit0</span> <span class="o">(</span><span class="n">bit0</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)))</span> <span class="o">:</span> <span class="n">congr_arg</span> <span class="bp">_</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="bp">_</span> <span class="n">norm_num</span><span class="bp">.</span><span class="n">add1_one</span><span class="o">)</span>

<span class="bp">#</span><span class="kn">print</span> <span class="n">test2</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">test</span> <span class="o">:</span> <span class="mi">3</span> <span class="bp">+</span> <span class="mi">5</span> <span class="bp">=</span> <span class="mi">8</span> <span class="o">:=</span>
<span class="n">eq</span><span class="bp">.</span><span class="n">mpr</span>
  <span class="o">(</span><span class="n">id</span>
     <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">trans</span>
        <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="n">a_1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">e_1</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a_1</span><span class="o">)</span> <span class="o">(</span><span class="n">a_2</span> <span class="n">a_3</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">e_2</span> <span class="o">:</span> <span class="n">a_2</span> <span class="bp">=</span> <span class="n">a_3</span><span class="o">),</span> <span class="n">congr</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">eq</span> <span class="n">e_1</span><span class="o">)</span> <span class="n">e_2</span><span class="o">)</span> <span class="o">(</span><span class="mi">3</span> <span class="bp">+</span> <span class="mi">5</span><span class="o">)</span> <span class="mi">8</span>
           <span class="o">(</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">subst_into_sum</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">refl</span> <span class="mi">3</span><span class="o">)</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">refl</span> <span class="mi">5</span><span class="o">)</span>
              <span class="o">(</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">bit1_add_bit1_helper</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="o">(</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">one_add_bit0</span> <span class="mi">1</span><span class="o">)</span>
                 <span class="o">(</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">add1_bit1_helper</span> <span class="mi">1</span> <span class="mi">2</span> <span class="n">norm_num</span><span class="bp">.</span><span class="n">add1_one</span><span class="o">)))</span>
           <span class="mi">8</span>
           <span class="mi">8</span>
           <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">refl</span> <span class="mi">8</span><span class="o">))</span>
        <span class="o">(</span><span class="n">eq_true_intro</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">refl</span> <span class="mi">8</span><span class="o">))))</span>
  <span class="n">trivial</span>

<span class="kn">theorem</span> <span class="n">test1</span> <span class="o">:</span> <span class="mi">3</span> <span class="bp">+</span> <span class="mi">5</span> <span class="bp">=</span> <span class="mi">8</span> <span class="o">:=</span>
<span class="n">eq</span><span class="bp">.</span><span class="n">mpr</span> <span class="o">(</span><span class="n">id</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">rec</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="mi">3</span> <span class="bp">+</span> <span class="mi">5</span> <span class="bp">=</span> <span class="mi">8</span><span class="o">))</span> <span class="o">(</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">bit1_add_bit1</span> <span class="mi">1</span> <span class="mi">2</span><span class="o">)))</span>
  <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">mpr</span> <span class="o">(</span><span class="n">id</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">rec</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">bit0</span> <span class="o">(</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">add1</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">))</span> <span class="bp">=</span> <span class="mi">8</span><span class="o">))</span> <span class="o">(</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">one_add_bit0</span> <span class="mi">1</span><span class="o">)))</span>
     <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">mpr</span> <span class="o">(</span><span class="n">id</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">rec</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">bit0</span> <span class="o">(</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">add1</span> <span class="mi">3</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">8</span><span class="o">))</span> <span class="o">(</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">add1_bit1</span> <span class="mi">1</span><span class="o">)))</span>
        <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">mpr</span> <span class="o">(</span><span class="n">id</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">rec</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">bit0</span> <span class="o">(</span><span class="n">bit0</span> <span class="o">(</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">add1</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="mi">8</span><span class="o">))</span> <span class="n">norm_num</span><span class="bp">.</span><span class="n">add1_one</span><span class="o">))</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">refl</span> <span class="mi">8</span><span class="o">))))</span>

<span class="kn">theorem</span> <span class="n">test2</span> <span class="o">:</span> <span class="mi">3</span> <span class="bp">+</span> <span class="mi">5</span> <span class="bp">=</span> <span class="mi">8</span> <span class="o">:=</span>
<span class="n">eq</span><span class="bp">.</span><span class="n">trans</span>
  <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">trans</span> <span class="o">(</span><span class="n">eq</span><span class="bp">.</span><span class="n">trans</span> <span class="o">(</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">bit1_add_bit1</span> <span class="mi">1</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">bit0</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">norm_num</span><span class="bp">.</span><span class="n">add1</span> <span class="o">(</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">one_add_bit0</span> <span class="mi">1</span><span class="o">))))</span>
     <span class="o">(</span><span class="n">congr_arg</span> <span class="n">bit0</span> <span class="o">(</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">add1_bit1</span> <span class="mi">1</span><span class="o">)))</span>
  <span class="o">(</span><span class="n">congr_arg</span> <span class="n">bit0</span> <span class="o">(</span><span class="n">congr_arg</span> <span class="n">bit0</span> <span class="n">norm_num</span><span class="bp">.</span><span class="n">add1_one</span><span class="o">))</span>
</pre></div>

<a name="135643290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643290" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643290">Kenny Lau (Oct 12 2018 at 10:28)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Can Lean be better at golfing?</p>

<a name="135643294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643294" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643294">Kenny Lau (Oct 12 2018 at 10:28)</a>:</h4>
<p>or is that actually pointless?</p>

<a name="135643310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643310" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643310">Mario Carneiro (Oct 12 2018 at 10:29)</a>:</h4>
<p>Lean doesn't make it easy to golf proofs in tactics</p>

<a name="135643315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643315" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643315">Kenny Lau (Oct 12 2018 at 10:29)</a>:</h4>
<p>I see</p>

<a name="135643321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643321" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643321">Yufan Lou (Oct 12 2018 at 10:29)</a>:</h4>
<p>nevermind... the import seems successful but norm_num is not actually imported</p>

<a name="135643376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643376" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643376">Mario Carneiro (Oct 12 2018 at 10:30)</a>:</h4>
<p>I would prefer that lean produced kind of short proofs (i.e. not obviously stupid things) but unfortunately <code>dsimp</code> ignores proof arguments</p>

<a name="135643444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643444" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643444">Yufan Lou (Oct 12 2018 at 10:32)</a>:</h4>
<p>btw <code>rfl</code> didn't work on the replacement of <code>rw mul_comm 2</code>either</p>

<a name="135643450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643450" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643450">Yufan Lou (Oct 12 2018 at 10:32)</a>:</h4>
<p><code>rfl</code> is less powerful than I thought</p>

<a name="135643457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643457" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643457">Yufan Lou (Oct 12 2018 at 10:32)</a>:</h4>
<p>or is it just in calc mode</p>

<a name="135643458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643458" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643458">Mario Carneiro (Oct 12 2018 at 10:32)</a>:</h4>
<p>that's surprising</p>

<a name="135643471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643471" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643471">Mario Carneiro (Oct 12 2018 at 10:33)</a>:</h4>
<p>this works for me in the web editor:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">norm_num</span>
<span class="kn">example</span> <span class="o">:</span> <span class="mi">3</span> <span class="bp">+</span> <span class="mi">5</span> <span class="bp">=</span> <span class="mi">8</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">norm_num</span>
</pre></div>

<a name="135643482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643482" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643482">Mario Carneiro (Oct 12 2018 at 10:33)</a>:</h4>
<p>do you have a MWE with your unrflable proof?</p>

<a name="135643603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643603">Yufan Lou (Oct 12 2018 at 10:36)</a>:</h4>
<p>Maybe I had a typo... a minute</p>

<a name="135643691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643691" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643691">Yufan Lou (Oct 12 2018 at 10:40)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">}</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">is_odd</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_even</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">exists</span><span class="bp">.</span><span class="n">elim</span> <span class="n">h1</span> <span class="o">(</span><span class="k">assume</span> <span class="n">k</span><span class="o">,</span> <span class="k">assume</span> <span class="n">hw</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span>
  <span class="n">exists</span><span class="bp">.</span><span class="n">intro</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
    <span class="o">(</span><span class="k">calc</span>
      <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">hw</span><span class="o">]</span>
        <span class="bp">...</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">k</span> <span class="bp">+</span> <span class="mi">2</span>     <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">rfl</span>
        <span class="bp">...</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>   <span class="o">:</span> <span class="k">by</span> <span class="n">rfl</span><span class="o">)</span>
</pre></div>

<a name="135643806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643806" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643806">Yufan Lou (Oct 12 2018 at 10:42)</a>:</h4>
<p><code>rfl</code> doesn't work anytime I need to adjust association right</p>

<a name="135643807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643807" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643807">Yufan Lou (Oct 12 2018 at 10:42)</a>:</h4>
<p>same as <code>norm_num</code></p>

<a name="135643819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643819" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643819">Kenny Lau (Oct 12 2018 at 10:43)</a>:</h4>
<p><code>rfl</code> works iff the two expressions are definitionally equal</p>

<a name="135643823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643823" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643823">Kenny Lau (Oct 12 2018 at 10:43)</a>:</h4>
<p><code>2*(n+1)</code> for natural numbers is defined to be <code>2*n+2</code></p>

<a name="135643826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643826" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643826">Kenny Lau (Oct 12 2018 at 10:43)</a>:</h4>
<p>that's unfolding definition of natural number multiplication</p>

<a name="135643888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643888" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643888">Yufan Lou (Oct 12 2018 at 10:45)</a>:</h4>
<p>it doesn't work tho</p>

<a name="135643945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135643945" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135643945">Yufan Lou (Oct 12 2018 at 10:46)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">}</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">is_odd</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_even</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">exists</span><span class="bp">.</span><span class="n">elim</span> <span class="n">h1</span> <span class="o">(</span><span class="k">assume</span> <span class="n">k</span><span class="o">,</span> <span class="k">assume</span> <span class="n">hw</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span>
  <span class="n">exists</span><span class="bp">.</span><span class="n">intro</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
    <span class="o">(</span><span class="k">calc</span>
      <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">hw</span><span class="o">]</span>
        <span class="bp">...</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">k</span> <span class="bp">+</span> <span class="mi">2</span>     <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">add_assoc</span>
        <span class="bp">...</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">k</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_one</span>
        <span class="bp">...</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>   <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_add</span>
        <span class="o">))</span>
</pre></div>


<p>without <code>rfl</code> this works, but I can't seem to replace any of them with <code>rw rfl</code>or <code>rfl</code></p>

<a name="135644025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644025" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644025">Mario Carneiro (Oct 12 2018 at 10:49)</a>:</h4>
<p><code>rfl</code> is a term not a tactic</p>

<a name="135644031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644031">Mario Carneiro (Oct 12 2018 at 10:49)</a>:</h4>
<p>so there is no <code>by</code></p>

<a name="135644036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644036" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644036">Mario Carneiro (Oct 12 2018 at 10:49)</a>:</h4>
<p>also <code>by rw rfl</code> is always redundant (does nothing)</p>

<a name="135644042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644042" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644042">Yufan Lou (Oct 12 2018 at 10:49)</a>:</h4>
<p>ah i see</p>

<a name="135644080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644080" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644080">Yufan Lou (Oct 12 2018 at 10:50)</a>:</h4>
<p>didn't think to replace by as well</p>

<a name="135644090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644090" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644090">Yufan Lou (Oct 12 2018 at 10:50)</a>:</h4>
<p>works now</p>

<a name="135644091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644091" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644091">Mario Carneiro (Oct 12 2018 at 10:50)</a>:</h4>
<p>there is a tactic version, called <code>refl</code></p>

<a name="135644093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644093" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644093">Mario Carneiro (Oct 12 2018 at 10:50)</a>:</h4>
<p>so <code>by refl</code> and <code>rfl</code> are usually interchangeable</p>

<a name="135644154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644154" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644154">Yufan Lou (Oct 12 2018 at 10:52)</a>:</h4>
<p>okay for simple calc proofs I can just put <code>: rfl</code> after each step nice</p>

<a name="135644160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644160">Yufan Lou (Oct 12 2018 at 10:52)</a>:</h4>
<p>thx y'all</p>

<a name="135644176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644176" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644176">Mario Carneiro (Oct 12 2018 at 10:53)</a>:</h4>
<p>actually a <code>: rfl</code> calc step can usually just be deleted entirely</p>

<a name="135644221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644221" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644221">Yufan Lou (Oct 12 2018 at 10:54)</a>:</h4>
<p>I know, writing out just for demonstration</p>

<a name="135644224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644224" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644224">Mario Carneiro (Oct 12 2018 at 10:54)</a>:</h4>
<p>right</p>

<a name="135644568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644568" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644568">Yufan Lou (Oct 12 2018 at 11:02)</a>:</h4>
<p>while we are at it is there a one-line proof of that theorem</p>

<a name="135644653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644653" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644653">Mario Carneiro (Oct 12 2018 at 11:04)</a>:</h4>
<p>what are the definitions?</p>

<a name="135644664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644664" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644664">Mario Carneiro (Oct 12 2018 at 11:04)</a>:</h4>
<p>MWE please</p>

<a name="135644674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644674" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644674">Yufan Lou (Oct 12 2018 at 11:04)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">is_even</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∃</span> <span class="n">b</span><span class="o">,</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">b</span>
<span class="n">def</span> <span class="n">is_odd</span> <span class="o">(</span><span class="n">a</span><span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∃</span> <span class="n">b</span><span class="o">,</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span>
<span class="kn">example</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">}</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">is_odd</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_even</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>

<a name="135644698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644698" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644698">Mario Carneiro (Oct 12 2018 at 11:05)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">},</span> <span class="n">is_odd</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">is_even</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">⟨</span><span class="n">n</span><span class="o">,</span> <span class="n">rfl</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">rfl</span><span class="bp">⟩</span>
</pre></div>

<a name="135644753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644753" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644753">Mario Carneiro (Oct 12 2018 at 11:06)</a>:</h4>
<p>turns out the important part of the theorem is <code>2 * n + 1 + 1 = 2 * (n + 1)</code> which is true by definition</p>

<a name="135644768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644768" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644768">Yufan Lou (Oct 12 2018 at 11:06)</a>:</h4>
<p>cool</p>

<a name="135644777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644777" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644777">Yufan Lou (Oct 12 2018 at 11:07)</a>:</h4>
<p>what does <code>|</code> do and why <code>_</code> following it?</p>

<a name="135644786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644786" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644786">Mario Carneiro (Oct 12 2018 at 11:07)</a>:</h4>
<p>I'm using the equation compiler to pattern match on the exists</p>

<a name="135644831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644831" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644831">Mario Carneiro (Oct 12 2018 at 11:08)</a>:</h4>
<p>the <code>_</code> is the <code>n</code> from the statement</p>

<a name="135644838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644838" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644838">Yufan Lou (Oct 12 2018 at 11:08)</a>:</h4>
<p>ahh pattern matching thx</p>

<a name="135644851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644851">Mario Carneiro (Oct 12 2018 at 11:08)</a>:</h4>
<p>but it is matched against <code>2*n+1</code> because I matched on the equality too</p>

<a name="135644929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135644929" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135644929">Yufan Lou (Oct 12 2018 at 11:10)</a>:</h4>
<p>using <code>rfl</code> in pattern matching is pretty eye opening</p>

<a name="135645149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135645149" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135645149">Yufan Lou (Oct 12 2018 at 11:16)</a>:</h4>
<p>Could you explain the pattern matching more thoroughly?</p>

<a name="135645163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135645163" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135645163">Yufan Lou (Oct 12 2018 at 11:16)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">|</span> <span class="bp">_</span> <span class="bp">⟨</span><span class="n">n</span><span class="o">,</span> <span class="n">rfl</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">rfl</span><span class="bp">⟩</span>
</pre></div>

<a name="135645594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135645594" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135645594">Mario Carneiro (Oct 12 2018 at 11:28)</a>:</h4>
<p>Since exists and eq are both inductive types, you can match on them, meaning you have to give a case for each constructor. Both only have one constructor, so there is only one case, where the exists is the <code>Exists.mk</code> function (which can also be written using the angle pair bracket) and the eq has the contstructor for equality which is <code>rfl</code>. If you put in both of those for the second argument, the first argument is forced to be <code>(2*n+1)</code> (Lean can figure this out, but if you want you can replace the <code>_</code> with <code>.(2*n+1)</code>, where the dot means that this argument's value is forced by later arguments.)</p>
<p>So in this case of the match, we have to prove the statement with <code>n</code> replaced with <code>2*n+1</code>, that is, <code>is_even (2 * n + 1 + 1)</code>. This is defeq to an exists, so I use the angle brackets to supply the witness, which is <code>n+1</code>, and the proof of equality, of type <code>2 * n + 1 + 1 = 2 * (n + 1)</code>, which as I said is true by reflexivity because both sides are defeq.</p>

<a name="135645685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135645685" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135645685">Mario Carneiro (Oct 12 2018 at 11:31)</a>:</h4>
<p>the defeq chain looks like this btw:</p>
<div class="codehilite"><pre><span></span>2 * (n + 1)
= 2 * succ n
= 2 * n + 2
= 2 * n + succ 1
= succ (2 * n + 1)
= succ (succ (2 * n))
</pre></div>


<div class="codehilite"><pre><span></span>2 * n + 1 + 1
= succ (2 * n + 1)
= succ (succ (2 * n))
</pre></div>

<a name="135645733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135645733" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135645733">Kenny Lau (Oct 12 2018 at 11:32)</a>:</h4>
<div class="codehilite"><pre><span></span>2 * (n + 1)
= 2 * (succ (n + 0))
= 2 * (succ n)
= 2 * n + 2
= ...
</pre></div>

<a name="135645741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Which%20rule%20to%20use%20for%20arithmetic%20calculations%20in%20calc%20mode%3F/near/135645741" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13245Whichruletouseforarithmeticcalculationsincalcmode.html#135645741">Mario Carneiro (Oct 12 2018 at 11:32)</a>:</h4>
<p>I'll omit the steps that unfold the definition of <code>+</code>. :)</p>


{% endraw %}
