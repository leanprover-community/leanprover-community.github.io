---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html">cleaning up this tactic proof (regarding closures)</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="192339476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192339476" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192339476">Kevin Doran (Mar 31 2020 at 02:17)</a>:</h4>
<p>I've got most of the way through the following proof; however, I'm stuck at one section (Q6). In addition, I was wondering if you could help me clean up the existing code. (live in web editor: <a href="https://tinyurl.com/upkybhm" title="https://tinyurl.com/upkybhm">https://tinyurl.com/upkybhm</a>). Any help greatly appreciated.</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span>
<span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">normed_space</span><span class="bp">.</span><span class="n">basic</span>

<span class="c1">-- Q0. Notation for absolute. Should I reuse this from somewhere in Lean or mathlib?</span>
<span class="n">local</span> <span class="kn">notation</span> <span class="bp">`|`</span><span class="n">x</span><span class="bp">`|`</span> <span class="o">:=</span> <span class="n">abs</span> <span class="n">x</span>

<span class="bp">@</span><span class="o">[</span><span class="kn">reducible</span><span class="o">]</span>
<span class="n">def</span> <span class="n">is_adherent</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">∀</span> <span class="n">ε</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">∃</span><span class="n">y</span> <span class="err">∈</span> <span class="n">X</span><span class="o">,</span> <span class="bp">|</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="bp">|</span> <span class="bp">≤</span> <span class="n">ε</span>

<span class="kn">infix</span> <span class="bp">`</span><span class="n">is_adherent_to</span><span class="bp">`</span> <span class="o">:</span><span class="mi">55</span> <span class="o">:=</span> <span class="n">is_adherent</span>

<span class="bp">@</span><span class="o">[</span><span class="kn">reducible</span><span class="o">]</span>
<span class="n">def</span> <span class="n">closure</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">|</span> <span class="n">x</span> <span class="n">is_adherent_to</span> <span class="n">X</span> <span class="o">}</span>


<span class="kn">lemma</span> <span class="n">closure_squeeze</span>
  <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⊆</span> <span class="n">Y</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⊆</span> <span class="n">closure</span><span class="o">(</span><span class="n">X</span><span class="o">))</span> <span class="o">:</span>
<span class="n">closure</span><span class="o">(</span><span class="n">X</span><span class="o">)</span> <span class="bp">=</span> <span class="n">closure</span><span class="o">(</span><span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="c1">-- Q1. Should all unfolds be removed when finished? Are they superfluous?</span>
  <span class="c1">--unfold closure,</span>
  <span class="n">apply</span> <span class="n">set</span><span class="bp">.</span><span class="n">eq_of_subset_of_subset</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="n">intro</span> <span class="n">x</span><span class="o">,</span>
    <span class="c1">-- Q2. intro vs. assume, which is preferred? assume has the benefit of optionally being</span>
    <span class="c1">-- explicit in what is being introduced.</span>
    <span class="k">assume</span> <span class="n">h₃</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">closure</span><span class="o">(</span><span class="n">X</span><span class="o">),</span>
    <span class="n">intro</span> <span class="n">ε</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">hε</span> <span class="o">:</span> <span class="n">ε</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h₄</span> <span class="o">:</span> <span class="n">x</span> <span class="n">is_adherent_to</span> <span class="n">X</span><span class="o">,</span> <span class="k">from</span> <span class="n">h₃</span><span class="o">,</span>
    <span class="n">unfold</span> <span class="n">is_adherent</span> <span class="n">at</span> <span class="n">h₄</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h₅</span> <span class="o">:</span> <span class="bp">∃</span><span class="n">x&#39;</span> <span class="err">∈</span> <span class="n">X</span><span class="o">,</span> <span class="bp">|</span><span class="n">x</span><span class="bp">-</span><span class="n">x&#39;</span><span class="bp">|</span> <span class="bp">≤</span> <span class="n">ε</span><span class="o">,</span> <span class="k">from</span> <span class="n">h₃</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">exists</span><span class="bp">.</span><span class="n">elim</span> <span class="n">h₅</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">x&#39;</span> <span class="n">h_exists_temp</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">exists</span><span class="bp">.</span><span class="n">elim</span> <span class="n">h_exists_temp</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">h₆</span> <span class="n">h₇</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h₈</span> <span class="o">:</span> <span class="n">x&#39;</span> <span class="err">∈</span> <span class="n">Y</span><span class="o">,</span> <span class="k">from</span> <span class="n">h₁</span> <span class="n">h₆</span><span class="o">,</span>
    <span class="n">use</span> <span class="n">x&#39;</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">and</span><span class="bp">.</span><span class="n">intro</span> <span class="n">h₈</span> <span class="n">h₇</span>
  <span class="o">},</span>
  <span class="o">{</span>
    <span class="n">intro</span> <span class="n">y</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">h₃</span> <span class="o">:</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">closure</span><span class="o">(</span><span class="n">Y</span><span class="o">),</span>
    <span class="n">intro</span> <span class="n">ε</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">hε</span> <span class="o">:</span> <span class="n">ε</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span>
    <span class="c1">-- Q3. What is a better way to get a δ = ε/3? It takes...</span>
    <span class="k">have</span> <span class="n">h₄</span> <span class="o">:</span> <span class="bp">∃</span><span class="n">δ</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">δ</span> <span class="bp">=</span> <span class="n">ε</span><span class="bp">/</span><span class="mi">3</span><span class="o">,</span> <span class="k">from</span> <span class="n">exists_eq</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">exists</span><span class="bp">.</span><span class="n">elim</span> <span class="n">h₄</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">δ</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">hδ</span> <span class="o">:</span> <span class="n">δ</span> <span class="bp">=</span> <span class="n">ε</span><span class="bp">/</span><span class="mi">3</span><span class="o">,</span>
    <span class="c1">-- ... me 4 lines.</span>
    <span class="c1">-- Q4. What is the proof for h₅ exactly? library_search doesn&#39;t turn up anything.</span>
    <span class="k">have</span> <span class="n">h₅</span> <span class="o">:</span> <span class="n">δ</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="k">by</span> <span class="n">linarith</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h₆</span> <span class="o">:</span> <span class="bp">∃</span><span class="n">y&#39;</span> <span class="err">∈</span> <span class="n">Y</span><span class="o">,</span> <span class="bp">|</span><span class="n">y</span> <span class="bp">-</span> <span class="n">y&#39;</span><span class="bp">|</span> <span class="bp">≤</span> <span class="n">δ</span><span class="o">,</span> <span class="k">from</span> <span class="n">h₃</span> <span class="n">δ</span> <span class="n">h₅</span><span class="o">,</span>
    <span class="c1">-- Q5. Is there a better way to access the two proofs (hy&#39; and h₇)? It takes ...</span>
    <span class="n">apply</span> <span class="n">exists</span><span class="bp">.</span><span class="n">elim</span> <span class="n">h₆</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">y&#39;</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">temp</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">exists</span><span class="bp">.</span><span class="n">elim</span> <span class="n">temp</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">hy&#39;</span> <span class="o">:</span> <span class="n">y&#39;</span> <span class="err">∈</span> <span class="n">Y</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">h₇</span> <span class="o">:</span> <span class="bp">|</span><span class="n">y</span> <span class="bp">-</span> <span class="n">y&#39;</span><span class="bp">|</span> <span class="bp">≤</span> <span class="n">δ</span><span class="o">,</span>
    <span class="c1">--- ... me 6 lines.</span>
    <span class="k">have</span> <span class="n">h₈</span> <span class="o">:</span> <span class="n">y&#39;</span> <span class="err">∈</span> <span class="n">closure</span><span class="o">(</span><span class="n">X</span><span class="o">),</span> <span class="k">from</span> <span class="n">h₂</span> <span class="n">hy&#39;</span><span class="o">,</span>
    <span class="c1">-- This next bit is a repeat of Q5..</span>
    <span class="k">have</span> <span class="n">h₉</span> <span class="o">:</span> <span class="bp">∃</span><span class="n">x</span> <span class="err">∈</span> <span class="n">X</span><span class="o">,</span> <span class="bp">|</span><span class="n">y&#39;</span> <span class="bp">-</span> <span class="n">x</span><span class="bp">|</span> <span class="bp">≤</span> <span class="n">δ</span><span class="o">,</span> <span class="k">from</span> <span class="n">h₈</span> <span class="n">δ</span> <span class="n">h₅</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">exists</span><span class="bp">.</span><span class="n">elim</span> <span class="n">h₉</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">x</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">temp</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">exists</span><span class="bp">.</span><span class="n">elim</span> <span class="n">temp</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">X</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">h₁₀</span> <span class="o">:</span> <span class="bp">|</span><span class="n">y&#39;</span> <span class="bp">-</span> <span class="n">x</span><span class="bp">|</span> <span class="bp">≤</span> <span class="n">δ</span><span class="o">,</span>
    <span class="c1">-- ... another 6 lines.</span>
    <span class="c1">-- Q6. I&#39;m a bit stuck on the following line. I think, what is needed is something like:</span>
    <span class="c1">--    norm_add_le_of_le (by apply_instance) h₇ h₁₀,</span>
    <span class="k">have</span> <span class="n">h₁₁</span> <span class="o">:</span> <span class="bp">|</span><span class="n">y</span> <span class="bp">-</span> <span class="n">x</span><span class="bp">|</span> <span class="bp">≤</span> <span class="mi">2</span><span class="bp">*</span><span class="n">δ</span><span class="o">,</span> <span class="k">from</span> <span class="n">sorry</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h₁₂</span> <span class="o">:</span> <span class="bp">|</span><span class="n">y</span> <span class="bp">-</span> <span class="n">x</span><span class="bp">|</span> <span class="bp">≤</span> <span class="n">ε</span><span class="o">,</span> <span class="k">by</span> <span class="n">linarith</span><span class="o">,</span>
    <span class="n">use</span> <span class="n">x</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">and</span><span class="bp">.</span><span class="n">intro</span> <span class="n">hx</span> <span class="n">h₁₂</span>
  <span class="o">}</span>
<span class="kn">end</span>
</pre></div>

<a name="192352507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192352507" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192352507">Kevin Buzzard (Mar 31 2020 at 07:22)</a>:</h4>
<p>Which version of mathlib are you using? I get an error</p>
<div class="codehilite"><pre><span></span>invalid definition, a declaration named &#39;closure&#39; has already been declared
</pre></div>


<p>on line 15, and <code>#check @closure</code> gives me</p>
<div class="codehilite"><pre><span></span>closure : Π {α : Type u_1} [_inst_1 : topological_space α], set α → set α
</pre></div>

<a name="192353801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192353801" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192353801">Yury G. Kudryashov (Mar 31 2020 at 07:38)</a>:</h4>
<p>Yes, we have closure defined for any topological space, not just real numbers.</p>

<a name="192354975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192354975" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192354975">Kevin Buzzard (Mar 31 2020 at 07:53)</a>:</h4>
<p>Changing <code>closure</code> to <code>closure'</code> throughout the snippet fixes it. </p>
<p><code>norm_add_le_of_le</code> is a theorem about normed groups. I don't know much about what structures are put on the real numbers, but if I write <code>have ZZZ := norm_add_le_of_le h₇ h₁₀,</code> just before your sorry then the error seems to indicate that nobody has put a normed group structure on the reals with the norm being abs, or perhaps you have not imported the file where this structure is defined.</p>

<a name="192355193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192355193" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192355193">Kevin Buzzard (Mar 31 2020 at 07:55)</a>:</h4>
<p>What you need is <code>abs_add</code> I guess.</p>

<a name="192355388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192355388" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192355388">Yury G. Kudryashov (Mar 31 2020 at 07:57)</a>:</h4>
<p>This structure is defined in <code>normed_space.basic</code></p>

<a name="192355399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192355399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192355399">Kevin Buzzard (Mar 31 2020 at 07:57)</a>:</h4>
<p>but I guess you can persuade <code>linarith</code> to do this:</p>
<div class="codehilite"><pre><span></span>    <span class="k">have</span> <span class="n">h₁₁</span> <span class="o">:</span> <span class="bp">|</span><span class="n">y</span> <span class="bp">-</span> <span class="n">x</span><span class="bp">|</span> <span class="bp">≤</span> <span class="mi">2</span><span class="bp">*</span><span class="n">δ</span><span class="o">,</span>
      <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="n">y</span> <span class="bp">-</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="n">y</span> <span class="bp">-</span> <span class="n">y&#39;</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">y&#39;</span> <span class="bp">-</span> <span class="n">x</span><span class="o">),</span> <span class="k">by</span> <span class="n">ring</span><span class="o">),</span>
      <span class="n">linarith</span><span class="o">,</span>
</pre></div>

<a name="192355586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192355586" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192355586">Yury G. Kudryashov (Mar 31 2020 at 07:59)</a>:</h4>
<p>Actually it fails because for Lean <code>(a - b) + (b - c)</code> is not the same as <code>a - c</code></p>

<a name="192355798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192355798" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192355798">Yury G. Kudryashov (Mar 31 2020 at 08:01)</a>:</h4>
<p>So, you need to either rewrite as <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> suggested, or use <code>dist</code> instead of <code>|a - b|</code>.</p>

<a name="192356191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192356191" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192356191">Kevin Buzzard (Mar 31 2020 at 08:04)</a>:</h4>
<p>In terms of structure, I would not embark upon a big monolithic proof like this. Why is your result true? Here is a proof which only uses fundamental facts about closures. Firstly there is <code>closure_mono</code>, the fact that closure is monotonic, which is a fancy way of saying that if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>⊆</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\subseteq Y</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.13597em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span> then <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>X</mi><mo stretchy="true">‾</mo></mover><mo>⊆</mo><mover accent="true"><mi>Y</mi><mo stretchy="true">‾</mo></mover></mrow><annotation encoding="application/x-tex">\overline{X}\subseteq\overline{Y}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.0193em;vertical-align:-0.13597em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833300000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span><span style="top:-3.80333em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8833300000000001em;vertical-align:0em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833300000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span><span style="top:-3.80333em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span></span></span></span>. Applying this to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">h_1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> shows <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>X</mi><mo stretchy="true">‾</mo></mover><mo>⊆</mo><mover accent="true"><mi>Y</mi><mo stretchy="true">‾</mo></mover></mrow><annotation encoding="application/x-tex">\overline{X}\subseteq\overline{Y}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.0193em;vertical-align:-0.13597em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833300000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span><span style="top:-3.80333em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8833300000000001em;vertical-align:0em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833300000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span><span style="top:-3.80333em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span></span></span></span> and applying it to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">h_2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> shows <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>Y</mi><mo stretchy="true">‾</mo></mover><mo>⊆</mo></mrow><annotation encoding="application/x-tex">\overline{Y}\subseteq</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.0193em;vertical-align:-0.13597em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833300000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span><span style="top:-3.80333em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊆</span></span></span></span><code>closure(closure(X))</code>Secondly there is <code>closure_closure</code>, saying <code>closure (closure X)=closure X</code>. Applying these two facts shows inclusions in both ways so you're done. This means that the actual proof of <code>closure_squeeze</code> should be three lines long, deducing the result from these more fundamental results, whose proofs would obviously be where more of the work is. But you should try and make your proofs as modular as possible. Note that I used <code>closure_mono</code> twice in my argument above, and it would not surprise me if in some sense you prove it twice in your argument, meaning that your proof might be much longer than it should be.</p>

<a name="192359823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192359823" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192359823">Kevin Doran (Mar 31 2020 at 08:43)</a>:</h4>
<p>Apologies, I did not include a namespace in my snippet. </p>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> , thanks for the <code>rw</code> tip! Regarding the monolithic proof, my intention is to follow a textbook, and those closure properties you mention are later proved using this one.</p>

<a name="192359886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192359886" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192359886">Kevin Doran (Mar 31 2020 at 08:44)</a>:</h4>
<p>Any thoughts on improving the section:</p>
<div class="codehilite"><pre><span></span>    <span class="c1">-- Q3. What is a better way to get a δ = ε/3? It takes...</span>
    <span class="k">have</span> <span class="n">h₄</span> <span class="o">:</span> <span class="bp">∃</span><span class="n">δ</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">δ</span> <span class="bp">=</span> <span class="n">ε</span><span class="bp">/</span><span class="mi">3</span><span class="o">,</span> <span class="k">from</span> <span class="n">exists_eq</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">exists</span><span class="bp">.</span><span class="n">elim</span> <span class="n">h₄</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">δ</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">hδ</span> <span class="o">:</span> <span class="n">δ</span> <span class="bp">=</span> <span class="n">ε</span><span class="bp">/</span><span class="mi">3</span><span class="o">,</span>
    <span class="c1">-- ... me 4 lines.</span>
</pre></div>

<a name="192360757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192360757" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192360757">Kevin Buzzard (Mar 31 2020 at 08:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="252241">Kevin Doran</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192359823" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192359823">said</a>:</p>
<blockquote>
<p>Regarding the monolithic proof, my intention is to follow a textbook, and those closure properties you mention are later proved using this one.</p>
</blockquote>
<p>Having spent some time reading mathlib, I would now definitely question whether mathematicians always know best when it comes to ordering of material. You might be right though, I have not thought about how to develop this sort of theory (I probably should, there has been some real number game action recently)</p>

<a name="192360836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192360836" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192360836">Kevin Buzzard (Mar 31 2020 at 08:53)</a>:</h4>
<p>Chris Hughes pointed out to me that his 2nd year analysis lecturer proved the same result three times over the course of two lectures, as sublemmas or remarks in the middle of other proofs.</p>

<a name="192360928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192360928" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192360928">Kevin Buzzard (Mar 31 2020 at 08:54)</a>:</h4>
<p><code>set δ := ε/3 with hδ,</code> is the way to do the delta thing perhaps.</p>

<a name="192361864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192361864" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192361864">Kevin Doran (Mar 31 2020 at 09:03)</a>:</h4>
<p>I think, no matter which way you choose, at least one of them will require a delta-epsilon formulation, which is where most of my mess above comes from. </p>
<p>The other big eye sore is the double exist-elim:</p>
<div class="codehilite"><pre><span></span>    <span class="c1">-- Q5. Is there a better way to access the two proofs (hy&#39; and h₇)? It takes ...</span>
    <span class="n">apply</span> <span class="n">exists</span><span class="bp">.</span><span class="n">elim</span> <span class="n">h₆</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">y&#39;</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">temp</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">exists</span><span class="bp">.</span><span class="n">elim</span> <span class="n">temp</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">hy&#39;</span> <span class="o">:</span> <span class="n">y&#39;</span> <span class="err">∈</span> <span class="n">Y</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">h₇</span> <span class="o">:</span> <span class="bp">|</span><span class="n">y</span> <span class="bp">-</span> <span class="n">y&#39;</span><span class="bp">|</span> <span class="bp">≤</span> <span class="n">δ</span><span class="o">,</span>
    <span class="c1">--- ... me 6 lines.</span>
</pre></div>


<p>This seems like such a common pattern (working with an proposition, ∃x ∈ X, &lt;something&gt;). Any thoughts on a better way?</p>

<a name="192362498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192362498" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192362498">Kevin Buzzard (Mar 31 2020 at 09:08)</a>:</h4>
<p>Oh sorry -- I have only just noticed all the questions!</p>

<a name="192362675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192362675" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192362675">Kevin Doran (Mar 31 2020 at 09:10)</a>:</h4>
<p>Also, I would love a real number game.</p>

<a name="192362695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192362695" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192362695">Kevin Buzzard (Mar 31 2020 at 09:10)</a>:</h4>
<p>Q1 yeah I'd not bother unfolding. Q2 intro is much more common. Just above Q3: you can just do <code>intros eps heps</code>.</p>

<a name="192362815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192362815" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192362815">Kevin Buzzard (Mar 31 2020 at 09:11)</a>:</h4>
<p>Q4 the proof is linarith. Maybe there is some result of the form a&gt;0 and b&gt;0 -&gt; a/b&gt;0 but then you'll still need to prove 3&gt;0 (which you can do with <code>norm_num</code>)</p>

<a name="192363013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192363013" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192363013">Kevin Buzzard (Mar 31 2020 at 09:12)</a>:</h4>
<p>Q5 <code>    rcases h₆ with ⟨y', hy', h₇⟩,</code></p>

<a name="192363097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192363097" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192363097">Kevin Buzzard (Mar 31 2020 at 09:13)</a>:</h4>
<p>Hopefully that's everything! <code>rcases</code> is a brilliant tactic for this sort of proof.</p>

<a name="192363199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192363199" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192363199">Kevin Doran (Mar 31 2020 at 09:14)</a>:</h4>
<p>Thanks a million!</p>

<a name="192363478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192363478" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192363478">Kevin Buzzard (Mar 31 2020 at 09:16)</a>:</h4>
<p>I think <code>closure_mono</code> is very simple to prove by the way. I think it's just a set-theoretic triviality</p>

<a name="192363517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192363517" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192363517">Kevin Buzzard (Mar 31 2020 at 09:17)</a>:</h4>
<p>The same is true for closure_closure</p>

<a name="192363533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192363533" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192363533">Kevin Buzzard (Mar 31 2020 at 09:17)</a>:</h4>
<p>It's just a 2epsilon proof</p>

<a name="192365038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192365038" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192365038">Patrick Massot (Mar 31 2020 at 09:31)</a>:</h4>
<p>Can I vote twice for proving <code>closure_mono</code> first?</p>

<a name="192365231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192365231" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192365231">Patrick Massot (Mar 31 2020 at 09:33)</a>:</h4>
<p>Everything Kevin wrote about distrusting lecture notes for this kind of things is crucial.</p>

<a name="192366556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192366556" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192366556">Kevin Doran (Mar 31 2020 at 09:45)</a>:</h4>
<p>To try and argue the position of the author, <code>closure_mono</code> is fine to be proven first, no debate there. The main point of contention is between<code>closure_closure</code>, <code>closure_union</code> or the the above lemma; all follow easily from each other. So far, the author's presentation order has been illuminating.</p>

<a name="192366596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192366596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192366596">Patrick Massot (Mar 31 2020 at 09:46)</a>:</h4>
<p>I also think it's worth having a look at mathlib, even if the setup is hugely more general. <a href="https://github.com/leanprover-community/mathlib/blob/17632202cdf9682cea972e86437d32ac20c91b06/src/topology/basic.lean#L262-L319" title="https://github.com/leanprover-community/mathlib/blob/17632202cdf9682cea972e86437d32ac20c91b06/src/topology/basic.lean#L262-L319">This</a> is the sequence of lemmas you are interested in. You don't need to understand the proofs, only notice how shorts are the proofs because of the careful ordering of statements.</p>

<a name="192366737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192366737" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192366737">Kevin Doran (Mar 31 2020 at 09:47)</a>:</h4>
<p>Oh, yea, that's a great spot to study. I went looking before, but I got a bit lost.</p>

<a name="192368057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192368057" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192368057">Kevin Buzzard (Mar 31 2020 at 09:59)</a>:</h4>
<p><span class="user-mention" data-user-id="252241">@Kevin Doran</span> do you see how natural the proof below is?</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">closure&#39;_mono</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">hXY</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⊆</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span> <span class="n">closure&#39;</span> <span class="n">X</span> <span class="err">⊆</span> <span class="n">closure&#39;</span> <span class="n">Y</span> <span class="o">:=</span>
<span class="c1">--λ a haX ε hε, ⟨_, hXY haX, _⟩ #exit</span>
<span class="c1">--⟨(haX ε hε).1 _⟩</span>
<span class="k">begin</span>
  <span class="c1">-- Say a is in the closure of X. We want to show a is in the closure of Y.</span>
  <span class="c1">-- So say ε &gt; 0. We want to find y ∈ Y such that |a - y| ≤ ε.</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">haX</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span>
  <span class="c1">-- By definition of closure of X, there&#39;s x ∈ X with |a - x| ≤ ε.</span>
  <span class="n">rcases</span> <span class="n">haX</span> <span class="n">ε</span> <span class="n">hε</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">haX&#39;</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="c1">-- So let y be x.</span>
  <span class="n">use</span> <span class="n">x</span><span class="o">,</span>
  <span class="c1">-- Remark:</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="c1">-- x is in Y because it&#39;s in X and X ⊆ Y</span>
    <span class="n">exact</span> <span class="n">hXY</span> <span class="n">haX&#39;</span><span class="o">,</span> <span class="c1">-- hXY is actually a function!</span>
  <span class="o">},</span>
  <span class="c1">-- oh but now one of our assumptions is the conclusion</span>
  <span class="n">assumption</span>
<span class="kn">end</span>
</pre></div>

<a name="192368216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192368216" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192368216">Kevin Buzzard (Mar 31 2020 at 10:00)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">closure&#39;_mono</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">hXY</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⊆</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span> <span class="n">closure&#39;</span> <span class="n">X</span> <span class="err">⊆</span> <span class="n">closure&#39;</span> <span class="n">Y</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">a</span> <span class="n">haX</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span> <span class="bp">⟨_</span><span class="o">,</span> <span class="bp">_⟩</span>
</pre></div>


<p>Can you write the proof in term mode?</p>

<a name="192368229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192368229" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192368229">Kevin Buzzard (Mar 31 2020 at 10:00)</a>:</h4>
<p>The only tactics this proof uses are trivialities.</p>

<a name="192368384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192368384" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192368384">Kevin Buzzard (Mar 31 2020 at 10:02)</a>:</h4>
<p>Monotonocity is a really natural thing to look for -- we are saying monotonicity is a morphism of posets.</p>

<a name="192368413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192368413" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192368413">Kevin Buzzard (Mar 31 2020 at 10:02)</a>:</h4>
<p>The squeeze lemma you are trying to prove has a much uglier statement.</p>

<a name="192368453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192368453" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192368453">Kevin Buzzard (Mar 31 2020 at 10:02)</a>:</h4>
<p>Formalising reveals an underlying elegance which humans often miss.</p>

<a name="192368633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192368633" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192368633">Kevin Buzzard (Mar 31 2020 at 10:04)</a>:</h4>
<p>closure_closure is the statement that a morphism is idempotent. This is also a much more natural statement than the squeeze lemma.</p>

<a name="192368907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192368907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192368907">Patrick Massot (Mar 31 2020 at 10:08)</a>:</h4>
<p>Why do you tag all your definitions as reducible?</p>

<a name="192368947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192368947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192368947">Patrick Massot (Mar 31 2020 at 10:08)</a>:</h4>
<p>This is very rarely a good idea, and should certainly not be used when you don't understand what it means.</p>

<a name="192369222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192369222" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192369222">Kevin Doran (Mar 31 2020 at 10:12)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>,  that is far more elegant! </p>
<p>Also agreed that the squeeze statement is pretty ugly in itself.</p>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> , ah I forgot to take that out. I was just playing with the feature to see what it does.</p>

<a name="192369658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192369658" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192369658">Kevin Buzzard (Mar 31 2020 at 10:16)</a>:</h4>
<p>It is kind of annoying that <code>#print closure'_mono</code> gives a term</p>
<div class="codehilite"><pre><span></span>theorem closure&#39;_mono : ∀ {X Y : set ℝ}, X ⊆ Y → closure&#39; X ⊆ closure&#39; Y :=
λ {X Y : set ℝ} (hXY : X ⊆ Y),
  id
    (λ (a : ℝ) (haX : a ∈ closure&#39; X),
       id
         (λ (ε : ℝ) (hε : ε &gt; 0),
            Exists.dcases_on (haX ε hε)
              (λ (x : ℝ) (h : ∃ (H : x ∈ X), |a - x| ≤ ε),
                 Exists.dcases_on h
                   (λ (haX&#39; : x ∈ X) (h : |a - x| ≤ ε),
                      Exists.intro x (id (exists_prop.mpr ⟨hXY haX&#39;, h⟩))))))
</pre></div>


<p>in the pretty printer which does not then compile. I was finding it hard to eliminate the cases in term mode too.</p>

<a name="192369922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192369922" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192369922">Patrick Massot (Mar 31 2020 at 10:19)</a>:</h4>
<p>In term mode the <code>rcases</code> becomes a <code>let</code>.</p>

<a name="192370015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192370015" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192370015">Patrick Massot (Mar 31 2020 at 10:20)</a>:</h4>
<p>I'm only half paying attention, do you want me to post the proof term or is it an exercise for the new Kevin?</p>

<a name="192370403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192370403" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192370403">Kevin Buzzard (Mar 31 2020 at 10:25)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">infix</span> <span class="bp">`</span><span class="n">is_adherent_to</span><span class="bp">`</span> <span class="o">:</span><span class="mi">55</span> <span class="o">:=</span> <span class="n">is_adherent</span>
</pre></div>


<p><del>I definitely think you should choose one or the other.</del> Oh I see it's the infix, but don't we want better notation? Is this what they say in French?</p>

<a name="192370711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192370711" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192370711">Patrick Massot (Mar 31 2020 at 10:29)</a>:</h4>
<p>It does look like a literal translation from French.</p>

<a name="192370818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192370818" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192370818">Patrick Massot (Mar 31 2020 at 10:30)</a>:</h4>
<p>In the beginning I was also defining a lot of infix notation to make the assumption look like proper sentences, but then I quickly realized this was unsustainable. I don't even do it in my teaching because this obfuscate <code>unfold</code> lines (that have to refer the the actual name, not the notation).</p>

<a name="192370842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192370842" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192370842">Patrick Massot (Mar 31 2020 at 10:31)</a>:</h4>
<p>The proof term should be <code>assume a haX ε hε, let ⟨x, haX, h⟩ := haX ε hε in ⟨x, hXY haX, h⟩</code> by the way.</p>

<a name="192370925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192370925" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192370925">Kevin Buzzard (Mar 31 2020 at 10:32)</a>:</h4>
<p>Is there a way of writing this without the <code>let</code>?</p>

<a name="192371003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192371003" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192371003">Kevin Buzzard (Mar 31 2020 at 10:33)</a>:</h4>
<p>It did not occur to me to use <code>let</code>. I never normally use it, I think it obfuscates goals. When there are <code>let</code>s around, tactic mode proofs can start getting ugly goals.</p>

<a name="192408764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192408764" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192408764">Kevin Buzzard (Mar 31 2020 at 15:50)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span>
<span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">normed_space</span><span class="bp">.</span><span class="n">basic</span>

<span class="c1">-- Q0. Notation for absolute. Should I reuse this from somewhere in Lean or mathlib?</span>
<span class="n">local</span> <span class="kn">notation</span> <span class="bp">`|`</span><span class="n">x</span><span class="bp">`|`</span> <span class="o">:=</span> <span class="n">abs</span> <span class="n">x</span>

<span class="n">def</span> <span class="n">is_adherent</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">∀</span> <span class="n">ε</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">∃</span><span class="n">y</span> <span class="err">∈</span> <span class="n">X</span><span class="o">,</span> <span class="bp">|</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="bp">|</span> <span class="bp">≤</span> <span class="n">ε</span>

<span class="kn">infix</span> <span class="bp">`</span><span class="n">is_adherent_to</span><span class="bp">`</span> <span class="o">:</span><span class="mi">55</span> <span class="o">:=</span> <span class="n">is_adherent</span>

<span class="n">def</span> <span class="n">closure&#39;</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">|</span> <span class="n">x</span> <span class="n">is_adherent_to</span> <span class="n">X</span> <span class="o">}</span>

<span class="c1">-- closure_mono term proof</span>

<span class="c">/-</span><span class="cm">- If $$X\subseteq Y$$ then $$\overline{X}\subseteq\overline{Y}$$ -/</span>
<span class="kn">theorem</span> <span class="n">closure&#39;_mono</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">hXY</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⊆</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span> <span class="n">closure&#39;</span> <span class="n">X</span> <span class="err">⊆</span> <span class="n">closure&#39;</span> <span class="n">Y</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">a</span> <span class="n">haX</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span> <span class="k">let</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">haX&#39;</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">haX</span> <span class="n">ε</span> <span class="n">hε</span> <span class="k">in</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hXY</span> <span class="n">haX&#39;</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span>

<span class="c1">-- closure_mono tactic proof</span>
<span class="kn">example</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">hXY</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⊆</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span> <span class="n">closure&#39;</span> <span class="n">X</span> <span class="err">⊆</span> <span class="n">closure&#39;</span> <span class="n">Y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="c1">-- Say a is in the closure of X. We want to show a is in the closure of Y.</span>
  <span class="c1">-- So say ε &gt; 0. We want to find y ∈ Y such that |a - y| ≤ ε.</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">haX</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span>
  <span class="c1">-- By definition of closure of X, there&#39;s x ∈ X with |a - x| ≤ ε.</span>
  <span class="n">rcases</span> <span class="n">haX</span> <span class="n">ε</span> <span class="n">hε</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">haX&#39;</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="c1">-- So let y be x.</span>
  <span class="n">use</span> <span class="n">x</span><span class="o">,</span>
  <span class="c1">-- Remark:</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="c1">-- x is in Y because it&#39;s in X and X ⊆ Y</span>
    <span class="n">exact</span> <span class="n">hXY</span> <span class="n">haX&#39;</span><span class="o">,</span> <span class="c1">-- hXY is actually a function!</span>
  <span class="o">},</span>
  <span class="c1">-- oh but now one of our assumptions is the conclusion</span>
  <span class="n">assumption</span>
<span class="kn">end</span>

<span class="c1">-- subset_closure term proof</span>

<span class="c">/-</span><span class="cm">- For all subsets $$X$$ of $$\mathbb{R}$$, we have $$X\subseteq\overline{X}$$ -/</span>
<span class="kn">lemma</span> <span class="n">subset_closure&#39;</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⊆</span> <span class="n">closure&#39;</span> <span class="n">X</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">x</span> <span class="n">hx</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">,</span> <span class="n">le_of_lt</span> <span class="o">(</span><span class="k">by</span> <span class="n">rwa</span> <span class="o">[</span><span class="n">sub_self</span><span class="o">,</span> <span class="n">abs_zero</span><span class="o">])</span><span class="bp">⟩</span>

<span class="c1">-- tactic proof</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⊆</span> <span class="n">closure&#39;</span> <span class="n">X</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="c1">-- Say x ∈ X and ε &gt; 0.</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">hx</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span>
  <span class="c1">-- We need to find y ∈ X with |x - y| ≤ ε. Just use x.</span>
  <span class="n">use</span> <span class="n">x</span><span class="o">,</span>
  <span class="c1">-- Remark: x ∈ X</span>
  <span class="n">split</span><span class="o">,</span> <span class="n">exact</span> <span class="n">hx</span><span class="o">,</span>
  <span class="c1">-- Note also that |x - x| is obviously zero</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="c1">-- and because ε &gt; 0 we&#39;re done</span>
  <span class="n">exact</span> <span class="n">le_of_lt</span> <span class="n">hε</span>
  <span class="c1">-- Note that that last bit would have been better if your definition of closure&#39;</span>
  <span class="c1">-- had used &lt; and not ≤</span>
<span class="kn">end</span>

<span class="c1">-- closure_closure</span>

<span class="c1">-- Note: for some reason this is not formalaised as `closure ∘ closure = closure`</span>
<span class="c1">-- I don&#39;t know why we have this convention</span>

<span class="c1">-- tactic mode proof</span>

<span class="c">/-</span><span class="cm">- The closure of $$\overline{X}$$ is $$\overline{X}$$ again -/</span>
<span class="kn">lemma</span> <span class="n">closure&#39;_closure&#39;</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="n">closure&#39;</span> <span class="o">(</span><span class="n">closure&#39;</span> <span class="n">X</span><span class="o">)</span> <span class="bp">=</span> <span class="n">closure&#39;</span> <span class="n">X</span> <span class="o">:=</span> <span class="c1">--</span>
<span class="k">begin</span>
  <span class="c1">-- We prove inclusions in both directions</span>
  <span class="n">ext</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="c1">--</span>
  <span class="o">{</span> <span class="c1">-- ⊆ : say $$a$$ is in the closure of $$\overline{X}$$.</span>
    <span class="n">intro</span> <span class="n">ha</span><span class="o">,</span>
    <span class="c1">-- We want to show it&#39;s in $$\overline{X}$$ so say ε &gt; 0, and we want x with |x-a| ≤ ε</span>
    <span class="n">intros</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span>
    <span class="c1">-- By definition of a, there&#39;s some elements $$b\in\overline{X}$$</span>
    <span class="c1">-- with |a - b| ≤ ε/2</span>
    <span class="n">rcases</span> <span class="n">ha</span> <span class="o">(</span><span class="n">ε</span><span class="bp">/</span><span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="k">by</span> <span class="n">linarith</span><span class="o">)</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">b</span><span class="o">,</span> <span class="n">hb</span><span class="o">,</span> <span class="n">hab</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="c1">-- and by definition of b there&#39;s some x ∈ X with |b - x| ≤ ε/2</span>
    <span class="n">rcases</span> <span class="n">hb</span> <span class="o">(</span><span class="n">ε</span><span class="bp">/</span><span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="k">by</span> <span class="n">linarith</span><span class="o">)</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">,</span> <span class="n">hbx</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="c1">-- Let&#39;s use this x</span>
    <span class="n">use</span> <span class="n">x</span><span class="o">,</span>
    <span class="c1">-- Note it&#39;s obviously in X</span>
    <span class="n">split</span><span class="o">,</span> <span class="n">exact</span> <span class="n">hx</span><span class="o">,</span>
    <span class="c1">-- and now |a - x| = |(a - b) + (b - x)|</span>
    <span class="k">calc</span> <span class="bp">|</span><span class="n">a</span> <span class="bp">-</span> <span class="n">x</span><span class="bp">|</span> <span class="bp">=</span> <span class="bp">|</span><span class="o">(</span><span class="n">a</span> <span class="bp">-</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span><span class="bp">|</span> <span class="o">:</span> <span class="k">by</span> <span class="n">ring</span>
                   <span class="c1">-- ≤ ε/2 + ε/2 = ε</span>
    <span class="bp">...</span>          <span class="bp">≤</span> <span class="bp">|</span><span class="n">a</span> <span class="bp">-</span> <span class="n">b</span><span class="bp">|</span> <span class="bp">+</span> <span class="bp">|</span><span class="n">b</span> <span class="bp">-</span> <span class="n">x</span><span class="bp">|</span>   <span class="o">:</span> <span class="k">by</span> <span class="n">apply</span> <span class="n">abs_add</span>
    <span class="bp">...</span>          <span class="bp">≤</span> <span class="n">ε</span> <span class="o">:</span> <span class="k">by</span> <span class="n">linarith</span>
  <span class="o">},</span>
  <span class="o">{</span> <span class="c1">-- ⊇ : follows immediately from subset_closure&#39;</span>
    <span class="n">intro</span> <span class="n">h</span><span class="o">,</span> <span class="n">apply</span> <span class="n">subset_closure&#39;</span> <span class="n">h</span><span class="o">,</span>
  <span class="o">}</span>
<span class="kn">end</span>

<span class="c1">-- closure_squeeze term mode proof</span>
<span class="kn">lemma</span> <span class="n">closure&#39;_squeeze</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⊆</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⊆</span> <span class="n">closure&#39;</span><span class="o">(</span><span class="n">X</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">closure&#39;</span><span class="o">(</span><span class="n">X</span><span class="o">)</span> <span class="bp">=</span> <span class="n">closure&#39;</span><span class="o">(</span><span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">set</span><span class="bp">.</span><span class="n">subset</span><span class="bp">.</span><span class="n">antisymm</span> <span class="o">(</span><span class="n">closure&#39;_mono</span> <span class="n">h₁</span><span class="o">)</span> <span class="err">$</span> <span class="k">by</span> <span class="n">rw</span> <span class="err">←</span><span class="n">closure&#39;_closure&#39;</span> <span class="n">X</span><span class="bp">;</span> <span class="n">apply</span> <span class="n">closure&#39;_mono</span> <span class="n">h₂</span>

<span class="c1">-- tactic mode proof</span>
<span class="kn">example</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⊆</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⊆</span> <span class="n">closure&#39;</span><span class="o">(</span><span class="n">X</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">closure&#39;</span><span class="o">(</span><span class="n">X</span><span class="o">)</span> <span class="bp">=</span> <span class="n">closure&#39;</span><span class="o">(</span><span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="c1">-- We prove inclusions in both directions</span>
  <span class="n">apply</span> <span class="n">set</span><span class="bp">.</span><span class="n">subset</span><span class="bp">.</span><span class="n">antisymm</span><span class="o">,</span>
  <span class="o">{</span> <span class="c1">-- ⊆ is just closure&#39;_mono</span>
    <span class="n">apply</span> <span class="n">closure&#39;_mono</span> <span class="n">h₁</span><span class="o">},</span>
  <span class="o">{</span> <span class="c1">-- ⊇ -- first use closure&#39;_closure&#39;</span>
    <span class="n">rw</span> <span class="err">←</span><span class="n">closure&#39;_closure&#39;</span> <span class="n">X</span><span class="o">,</span>
    <span class="c1">-- and then it follows from closure&#39;_mono</span>
    <span class="n">apply</span> <span class="n">closure&#39;_mono</span> <span class="n">h₂</span><span class="o">},</span>
<span class="kn">end</span>
</pre></div>


<p><span class="user-mention" data-user-id="252241">@Kevin Doran</span></p>

<a name="192409166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192409166" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192409166">Reid Barton (Mar 31 2020 at 15:53)</a>:</h4>
<p>I think "destructuring <code>let</code>" (with a pattern match on the left) doesn't actually translate to a <code>let</code> in the usual sense.</p>

<a name="192409263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192409263" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192409263">Kevin Buzzard (Mar 31 2020 at 15:53)</a>:</h4>
<p>I think the more mathematically natural definition of adherent is</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">is_adherent</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">∀</span> <span class="n">ε</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">∃</span><span class="n">y</span> <span class="err">∈</span> <span class="n">X</span><span class="o">,</span> <span class="bp">|</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">ε</span>
</pre></div>


<p>This is because eps &gt; 0 and not eps &gt;= 0.</p>

<a name="192409425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192409425" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192409425">Kevin Buzzard (Mar 31 2020 at 15:54)</a>:</h4>
<p>I hadn't realised that one needed <code>let</code>. I was just trying to do <code>(haX ε hε).1</code> and it wouldn't work.</p>

<a name="192409571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192409571" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192409571">Reid Barton (Mar 31 2020 at 15:55)</a>:</h4>
<p>Assuming this is referring to a Prop, there's no reason to avoid this kind of <code>let</code>. If you put <code>_</code> after <code>in</code> and put your cursor on it you'll see the context is the same as it would be in a tactic proof where you used <code>rcases</code>.</p>

<a name="192409708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192409708" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192409708">Reid Barton (Mar 31 2020 at 15:56)</a>:</h4>
<p>Although if you used a "true" <code>let</code> I don't know what the context would look like, actually. But this kind of <code>let</code> must just be translated to an application of the recursor.</p>

<a name="192409739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192409739" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192409739">Reid Barton (Mar 31 2020 at 15:57)</a>:</h4>
<p>(Maybe multiple applications of recursors.)</p>

<a name="192410023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192410023" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192410023">Kevin Buzzard (Mar 31 2020 at 15:59)</a>:</h4>
<p>I hadn't realised this. Thanks!</p>

<a name="192611028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192611028" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192611028">Kevin Doran (Apr 02 2020 at 01:07)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> , the example is beautiful, thanks. It's funny to look back now at my original  monolith.</p>

<a name="192620772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192620772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192620772">Kevin Doran (Apr 02 2020 at 04:50)</a>:</h4>
<p>I have a follow up question. I'm posting it in the existing thread due to the shared context of closures.</p>
<p>When proving a conjunction where both conjuncts share a common quantifier and assumption, can the quantifier and assumption be introduced before the proof splits?</p>
<p>Concrete example below: </p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span>

<span class="kn">namespace</span> <span class="n">my_closure</span>

<span class="n">local</span> <span class="kn">notation</span> <span class="bp">`|`</span><span class="n">x</span><span class="bp">`|`</span> <span class="o">:=</span> <span class="n">abs</span> <span class="n">x</span>

<span class="n">def</span> <span class="n">is_adherent</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">∀</span> <span class="n">ε</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">∃</span><span class="n">y</span> <span class="err">∈</span> <span class="n">X</span><span class="o">,</span> <span class="bp">|</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">ε</span>

<span class="n">def</span> <span class="n">closure</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">|</span> <span class="n">is_adherent</span> <span class="n">x</span> <span class="n">X</span> <span class="o">}</span>

<span class="kn">lemma</span> <span class="n">closure_inter_subset_inter_closure&#39;</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span>
<span class="n">closure</span> <span class="o">(</span><span class="n">X</span> <span class="err">∩</span> <span class="n">Y</span><span class="o">)</span> <span class="err">⊆</span> <span class="n">closure</span> <span class="n">X</span> <span class="err">∩</span> <span class="n">closure</span> <span class="n">Y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">ha</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="n">repeat</span> <span class="o">{</span>
    <span class="n">intros</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">ha</span> <span class="n">ε</span> <span class="n">hε</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">xy</span><span class="o">,</span> <span class="n">hxy</span><span class="o">,</span> <span class="bp">_⟩</span><span class="o">,</span>
    <span class="n">use</span> <span class="n">xy</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">hxy</span> <span class="k">with</span> <span class="n">l</span> <span class="n">r</span><span class="o">,</span>
    <span class="n">split</span><span class="bp">;</span> <span class="n">assumption</span>
  <span class="o">}</span>
<span class="kn">end</span>

<span class="kn">end</span> <span class="n">my_closure</span>
</pre></div>


<p>It want to know how to prove the above without a repeat—have something like a <code>intros a ha ε hε</code> at the begging, <em>then</em> split the conjunction.</p>

<a name="192624118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192624118" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192624118">Kevin Buzzard (Apr 02 2020 at 06:09)</a>:</h4>
<p>I've seen people write things like <code>split; intro h</code> before but I never thought it was particularly good style</p>

<a name="192624125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192624125" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192624125">Kevin Buzzard (Apr 02 2020 at 06:10)</a>:</h4>
<p>This way the intro gets applied to both strands of the proof</p>

<a name="192625350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192625350" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192625350">Kevin Doran (Apr 02 2020 at 06:38)</a>:</h4>
<p>[In the right stream this time]</p>
<p>Ah, I see. They it could be taken to the extreme and have all tactics apply to both strands:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">closure_inter_subset_inter_closure</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span>
<span class="n">closure</span> <span class="o">(</span><span class="n">X</span> <span class="err">∩</span> <span class="n">Y</span><span class="o">)</span> <span class="err">⊆</span> <span class="n">closure</span> <span class="n">X</span> <span class="err">∩</span> <span class="n">closure</span> <span class="n">Y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">ha</span><span class="o">,</span>
  <span class="n">split</span><span class="bp">;</span>
  <span class="n">intros</span> <span class="n">ε</span> <span class="n">hε</span><span class="bp">;</span>
  <span class="n">rcases</span> <span class="n">ha</span> <span class="n">ε</span> <span class="n">hε</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">xy</span><span class="o">,</span> <span class="n">hxy</span><span class="o">,</span> <span class="n">h₁</span><span class="bp">⟩;</span>
  <span class="n">use</span> <span class="n">xy</span><span class="bp">;</span>
  <span class="n">cases</span> <span class="n">hxy</span><span class="bp">;</span>
  <span class="n">split</span><span class="bp">;</span>
  <span class="n">assumption</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>This too falls into the category of being questionable style? Are there other alternatives (other than repeat)?</p>

<a name="192625784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192625784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192625784">Kenny Lau (Apr 02 2020 at 06:46)</a>:</h4>
<p>if "style" means mathlib style:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">closure_mono</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⊆</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span> <span class="n">closure</span> <span class="n">X</span> <span class="err">⊆</span> <span class="n">closure</span> <span class="n">Y</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">a</span> <span class="n">ha</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span> <span class="k">let</span> <span class="bp">⟨</span><span class="n">p</span><span class="o">,</span> <span class="n">hpx</span><span class="o">,</span> <span class="n">hapε</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">ha</span> <span class="n">ε</span> <span class="n">hε</span> <span class="k">in</span> <span class="bp">⟨</span><span class="n">p</span><span class="o">,</span> <span class="n">H</span> <span class="n">hpx</span><span class="o">,</span> <span class="n">hapε</span><span class="bp">⟩</span>

<span class="kn">lemma</span> <span class="n">closure_inter_subset_inter_closure&#39;</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">closure</span> <span class="o">(</span><span class="n">X</span> <span class="err">∩</span> <span class="n">Y</span><span class="o">)</span> <span class="err">⊆</span> <span class="n">closure</span> <span class="n">X</span> <span class="err">∩</span> <span class="n">closure</span> <span class="n">Y</span> <span class="o">:=</span>
<span class="n">set</span><span class="bp">.</span><span class="n">subset_inter</span>
  <span class="o">(</span><span class="n">closure_mono</span> <span class="err">$</span> <span class="n">set</span><span class="bp">.</span><span class="n">inter_subset_left</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span>
  <span class="o">(</span><span class="n">closure_mono</span> <span class="err">$</span> <span class="n">set</span><span class="bp">.</span><span class="n">inter_subset_right</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span>
</pre></div>

<a name="192625822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192625822" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192625822">Kenny Lau (Apr 02 2020 at 06:47)</a>:</h4>
<p>and if you insist on using tactics, you can still have the lemma</p>

<a name="192629115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192629115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192629115">Kevin Doran (Apr 02 2020 at 07:30)</a>:</h4>
<p>That's pretty. I wish the proofs would come to mind like that, and not as hacks with epsilons.</p>

<a name="192630073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192630073" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192630073">Kevin Buzzard (Apr 02 2020 at 07:44)</a>:</h4>
<p>You want to move away from the epsilons as soon as possible. This is the whole point of proving things such as <code>closure_mono</code>. There might be a few basic properties such as <code>closure_mono</code> which ultimately end up defining all the key features of your <code>closure</code> function. It's probably something like a Galois insertion or something -- some very abstract combinatorial definition which implies a whole bunch of properties which a mathematician might try and prove with epsilons.</p>

<a name="192630390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192630390" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192630390">Kevin Doran (Apr 02 2020 at 07:48)</a>:</h4>
<p>That's become very apparent to me.</p>

<a name="192630916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192630916" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192630916">Reid Barton (Apr 02 2020 at 07:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="252241">Kevin Doran</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192625350" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192625350">said</a>:</p>
<blockquote>
<p>[In the right stream this time]<br>
This too falls into the category of being questionable style? Are there other alternatives (other than repeat)?</p>
</blockquote>
<p>After <code>split;</code>, use <code>{ }</code>.</p>

<a name="192631332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192631332" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192631332">Kevin Doran (Apr 02 2020 at 07:59)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span>, that's better.<br>
Posting the tweaked code for reference.</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">closure_inter_subset_inter_closure</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span>
<span class="n">closure</span> <span class="o">(</span><span class="n">X</span> <span class="err">∩</span> <span class="n">Y</span><span class="o">)</span> <span class="err">⊆</span> <span class="n">closure</span> <span class="n">X</span> <span class="err">∩</span> <span class="n">closure</span> <span class="n">Y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">ha</span><span class="o">,</span>
  <span class="n">split</span><span class="bp">;</span> <span class="o">{</span>
  <span class="n">intros</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span>
  <span class="n">rcases</span> <span class="n">ha</span> <span class="n">ε</span> <span class="n">hε</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">xy</span><span class="o">,</span> <span class="n">hxy</span><span class="o">,</span> <span class="n">h₁</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="n">use</span> <span class="n">xy</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">hxy</span><span class="o">,</span>
  <span class="n">split</span><span class="bp">;</span>
  <span class="n">assumption</span><span class="o">,</span>
  <span class="o">}</span>
<span class="kn">end</span>
</pre></div>

<a name="192808617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192808617" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192808617">Patrick Massot (Apr 03 2020 at 14:08)</a>:</h4>
<div class="codehilite"><pre><span></span>  <span class="n">rcases</span> <span class="n">ha</span> <span class="n">ε</span> <span class="n">hε</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">xy</span><span class="o">,</span> <span class="n">hxy</span><span class="o">,</span> <span class="bp">_⟩</span><span class="o">,</span>
  <span class="bp">...</span>
  <span class="n">cases</span> <span class="n">hxy</span> <span class="k">with</span> <span class="n">l</span> <span class="n">r</span><span class="o">,</span>
</pre></div>

<a name="192808671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192808671" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192808671">Patrick Massot (Apr 03 2020 at 14:09)</a>:</h4>
<p>This is useless splitting</p>

<a name="192808725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192808725" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192808725">Patrick Massot (Apr 03 2020 at 14:09)</a>:</h4>
<p>You can use <code>rcases ha ε hε with ⟨xy, ⟨l, r⟩, _⟩,</code></p>

<a name="192808889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192808889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192808889">Patrick Massot (Apr 03 2020 at 14:10)</a>:</h4>
<p>But of course Kenny's solution to use <code>closure_mono</code> is actually the "right" answer.</p>

<a name="192810659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192810659" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192810659">Patrick Massot (Apr 03 2020 at 14:21)</a>:</h4>
<p>And now let me introduce you to the next level:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">closure_mono</span> <span class="o">:</span> <span class="n">monotone</span> <span class="n">closure</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">H</span> <span class="n">a</span> <span class="n">ha</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span> <span class="k">let</span> <span class="bp">⟨</span><span class="n">p</span><span class="o">,</span> <span class="n">hpx</span><span class="o">,</span> <span class="n">hapε</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">ha</span> <span class="n">ε</span> <span class="n">hε</span> <span class="k">in</span> <span class="bp">⟨</span><span class="n">p</span><span class="o">,</span> <span class="n">H</span> <span class="n">hpx</span><span class="o">,</span> <span class="n">hapε</span><span class="bp">⟩</span>

<span class="kn">lemma</span> <span class="n">closure_inter_subset_inter_closure&#39;</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span>
<span class="n">closure</span> <span class="o">(</span><span class="n">X</span> <span class="err">∩</span> <span class="n">Y</span><span class="o">)</span> <span class="err">⊆</span> <span class="n">closure</span> <span class="n">X</span> <span class="err">∩</span> <span class="n">closure</span> <span class="n">Y</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">closure_mono</span><span class="o">)</span><span class="bp">.</span><span class="n">map_inf_le</span> <span class="bp">_</span> <span class="bp">_</span>
</pre></div>

<a name="192811309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192811309" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192811309">Kenny Lau (Apr 03 2020 at 14:26)</a>:</h4>
<p>what <code>import</code> does that use?</p>

<a name="192811382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192811382" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192811382">Patrick Massot (Apr 03 2020 at 14:26)</a>:</h4>
<p>Nothing beyond <code>data.real.basic</code></p>

<a name="192811436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192811436" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192811436">Patrick Massot (Apr 03 2020 at 14:27)</a>:</h4>
<p>And Kevin's definition of closure of course</p>

<a name="192811537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192811537" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192811537">Patrick Massot (Apr 03 2020 at 14:27)</a>:</h4>
<p>The full thing is:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">namespace</span> <span class="n">my_closure</span>

<span class="n">local</span> <span class="kn">notation</span> <span class="bp">`|`</span><span class="n">x</span><span class="bp">`|`</span> <span class="o">:=</span> <span class="n">abs</span> <span class="n">x</span>

<span class="n">def</span> <span class="n">is_adherent</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">∀</span> <span class="n">ε</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">∃</span><span class="n">y</span> <span class="err">∈</span> <span class="n">X</span><span class="o">,</span> <span class="bp">|</span><span class="n">x</span> <span class="bp">-</span> <span class="n">y</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">ε</span>

<span class="n">def</span> <span class="n">closure</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">|</span> <span class="n">is_adherent</span> <span class="n">x</span> <span class="n">X</span> <span class="o">}</span>

<span class="kn">lemma</span> <span class="n">closure_mono</span> <span class="o">:</span> <span class="n">monotone</span> <span class="n">closure</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">H</span> <span class="n">a</span> <span class="n">ha</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span> <span class="k">let</span> <span class="bp">⟨</span><span class="n">p</span><span class="o">,</span> <span class="n">hpx</span><span class="o">,</span> <span class="n">hapε</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">ha</span> <span class="n">ε</span> <span class="n">hε</span> <span class="k">in</span> <span class="bp">⟨</span><span class="n">p</span><span class="o">,</span> <span class="n">H</span> <span class="n">hpx</span><span class="o">,</span> <span class="n">hapε</span><span class="bp">⟩</span>

<span class="kn">lemma</span> <span class="n">closure_inter_subset_inter_closure&#39;</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span>
<span class="n">closure</span> <span class="o">(</span><span class="n">X</span> <span class="err">∩</span> <span class="n">Y</span><span class="o">)</span> <span class="err">⊆</span> <span class="n">closure</span> <span class="n">X</span> <span class="err">∩</span> <span class="n">closure</span> <span class="n">Y</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">closure_mono</span><span class="o">)</span><span class="bp">.</span><span class="n">map_inf_le</span> <span class="bp">_</span> <span class="bp">_</span>

<span class="kn">end</span> <span class="n">my_closure</span>
</pre></div>

<a name="192813716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192813716" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192813716">Kevin Buzzard (Apr 03 2020 at 14:41)</a>:</h4>
<p>So Reid pointed out <a href="https://en.wikipedia.org/wiki/Closure_operator#Closure_operators_on_partially_ordered_sets" title="https://en.wikipedia.org/wiki/Closure_operator#Closure_operators_on_partially_ordered_sets">this Wikipedia link</a> which seems to say that the three properties isolated earlier (closure_mono, le_closure, closure_closure) seem to be equivalent to saying that the closure operator is a Galois insertion.</p>

<a name="192813870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192813870" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192813870">Kevin Buzzard (Apr 03 2020 at 14:42)</a>:</h4>
<p>I see so this fundamental idea seems to be actually equivalent to the concept of a Galois insertion.</p>

<a name="192959006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192959006" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192959006">Kevin Buzzard (Apr 05 2020 at 13:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="252241">Kevin Doran</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192359823" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192359823">said</a>:</p>
<blockquote>
<p>Apologies, I did not include a namespace in my snippet. </p>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> , thanks for the <code>rw</code> tip! Regarding the monolithic proof, my intention is to follow a textbook, and those closure properties you mention are later proved using this one.</p>
</blockquote>
<p><span class="user-mention" data-user-id="252241">@Kevin Doran</span> which textbook were you following, out of interest?</p>

<a name="192959604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192959604" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192959604">Kevin Doran (Apr 05 2020 at 13:27)</a>:</h4>
<p>It's Tao's Analysis I.</p>

<a name="192959919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192959919" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192959919">Patrick Massot (Apr 05 2020 at 13:35)</a>:</h4>
<p>We need to have a conversation with that guy.</p>

<a name="192969731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192969731" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192969731">Andrew Ashworth (Apr 05 2020 at 17:44)</a>:</h4>
<p>It's a good book for analysis formalization. I think I got up to chapter 5 before I decided I had more interesting things to do on the weekends. There's also a similarly half-finished version done by someone in Lean 2 lying around somewhere on Github</p>

<a name="192969825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192969825" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192969825">Andrew Ashworth (Apr 05 2020 at 17:46)</a>:</h4>
<p>If you get far with it I'd be pretty interested in reading your code</p>

<a name="192972760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192972760" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192972760">Kevin Buzzard (Apr 05 2020 at 18:59)</a>:</h4>
<p><span class="user-mention" data-user-id="110025">@Andrew Ashworth</span>  What's wrong with all this calculus stuff in mathlib? I reckon they've got further than chapter 5 of Tao by now -- they have manifolds!</p>

<a name="192972825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192972825" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192972825">Patrick Massot (Apr 05 2020 at 19:00)</a>:</h4>
<p>That's a completely different story. All those people doing elementary analysis and topology in Lean without using what's in mathlib are doing exercises, or want to teach.</p>

<a name="192972843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192972843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192972843">Patrick Massot (Apr 05 2020 at 19:01)</a>:</h4>
<p>I do it as well. In my lectures, I define limits of a sequence without using mathlib, and ask my students to prove many lemmas that are super special cases of things we already have in mathlib.</p>

<a name="192973081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192973081" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192973081">Kevin Buzzard (Apr 05 2020 at 19:06)</a>:</h4>
<p>Yes I know. Isn't it interesting? One could ask why people formalise it at all, given that it's all a super-special case of mathlib. If we want people to do exercises or to teach them then we should write some definitive approach where everything gets done in a mathlib-sensible order and then tell people to work through that.</p>

<a name="192974158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192974158" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192974158">Ryan Lahfa (Apr 05 2020 at 19:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192973081" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192973081">said</a>:</p>
<blockquote>
<p>Yes I know. Isn't it interesting? One could ask why people formalise it at all, given that it's all a super-special case of mathlib. If we want people to do exercises or to teach them then we should write some definitive approach where everything gets done in a mathlib-sensible order and then tell people to work through that.</p>
</blockquote>
<p>FWIW, I see two reasons:</p>
<p>(1) mathlib uses machinery that students are not necessarily accustomed to, aware or can even understand (e.g. filters for undergraduate in topology who never know there is such thing as a topological space)<br>
(2) Teachers want you to re-formalize with another approach which is different from mathlib one; it's interesting, but it gets annoying to not be able to rely on the shoulders of giants, but that brings me to the next point.</p>
<p>If someone wanted to start to contribute to Lean or learn how to do advanced things in Lean (after doing the nat games, read the manual, read the docs), how should he proceed? Is there a list of lemmas that are not there? Good first issues for beginners?<br>
Some docs on this (maybe it exist and I just didn't search hard enough…) would be awesome.</p>
<p>If that's possible, then it becomes possible to do school projects around contributing to mathlib.</p>

<a name="192974215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192974215" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192974215">Patrick Massot (Apr 05 2020 at 19:34)</a>:</h4>
<p>Contributing elementary stuff to mathlib becomes harder and harder. You missed the golden age two years ago.</p>

<a name="192974227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192974227" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192974227">Patrick Massot (Apr 05 2020 at 19:34)</a>:</h4>
<p>But <span class="user-mention" data-user-id="266440">@Shing Tak Lam</span> still managed to find something with partial derivatives of polynomials.</p>

<a name="192974242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192974242" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192974242">Kevin Buzzard (Apr 05 2020 at 19:35)</a>:</h4>
<p>When I got interested in Lean in mid-2017 there were a <em>ton</em> of such issues. Lean didn't even have the complex numbers! My first PR to mathlib was a definition of the complex numbers as a pair of real numbers. </p>
<p>But now things are completely different. It's much harder to find undergraduate level gaping holes in mathlib, and many of the undergraduate holes left need very careful consideration by experts, unfortunately. For example, for years we did not have a basic theory of calculus in one variable, and I was always pushing for it, but the people like Patrick and Sebastien who understood analysis properly assured me that we just had to wait and do it properly, with stuff like the Bochner integral and multivariable calculus all done first before the one variable case.</p>

<a name="192974294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192974294" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192974294">Kevin Buzzard (Apr 05 2020 at 19:36)</a>:</h4>
<p>The partial derivative thing was just a fluke -- we were riffing with this STEP question and thought about the two-variable case and then all of a sudden we ran into this hole.</p>

<a name="192974333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192974333" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192974333">Kevin Buzzard (Apr 05 2020 at 19:37)</a>:</h4>
<p>Over Easter I plan on doing 1000 things, and amongst them is writing some tutorials for post-natural-number-game people. Until then there's always the stuff on codewars. Right now I am checking that a super-hard codewars level I set this afternoon is actually solvable.</p>

<a name="192974385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192974385" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192974385">Patrick Massot (Apr 05 2020 at 19:38)</a>:</h4>
<p>Ryan, what happened to your absolute value stuff by the way?</p>

<a name="192974839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192974839" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192974839">Ryan Lahfa (Apr 05 2020 at 19:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192974385" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192974385">said</a>:</p>
<blockquote>
<p>Ryan, what happened to your absolute value stuff by the way?</p>
</blockquote>
<p>I paused the work on this to help some students on this metric space thing and I used this opportunity to learn more Lean to write the whole machinery for Bolzano Weierstrass, hence my recent questions</p>
<p>I learned a lot and feel like I'll be able to move forward faster for the Ostrowski/absolute value thing</p>

<a name="192974864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192974864" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192974864">Ryan Lahfa (Apr 05 2020 at 19:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192974333" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192974333">said</a>:</p>
<blockquote>
<p>Over Easter I plan on doing 1000 things, and amongst them is writing some tutorials for post-natural-number-game people. Until then there's always the stuff on codewars. Right now I am checking that a super-hard codewars level I set this afternoon is actually solvable.</p>
</blockquote>
<p>I'm really curious about this super-hard level :D… Please post it when it's ready!</p>

<a name="192974865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192974865" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192974865">Patrick Massot (Apr 05 2020 at 19:49)</a>:</h4>
<p>Do you help students learning Lean or BW?</p>

<a name="192974927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192974927" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192974927">Ryan Lahfa (Apr 05 2020 at 19:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192974865" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192974865">said</a>:</p>
<blockquote>
<p>Do you help students learning Lean or BW?</p>
</blockquote>
<p>Learning Lean and I decompose some theorems they have to prove as smaller parts while explaining them the maths behind this and the process of proving "a big theorem" (R is a complete, for example)</p>

<a name="192974947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192974947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192974947">Patrick Massot (Apr 05 2020 at 19:51)</a>:</h4>
<p>Where did you find those students?</p>

<a name="192974956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192974956" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192974956">Patrick Massot (Apr 05 2020 at 19:51)</a>:</h4>
<p>Which construction of R do you want to use? Proving completeness of R is very dependent on its construction.</p>

<a name="192975003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975003" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975003">Ryan Lahfa (Apr 05 2020 at 19:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192974242" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192974242">said</a>:</p>
<blockquote>
<p>When I got interested in Lean in mid-2017 there were a <em>ton</em> of such issues. Lean didn't even have the complex numbers! My first PR to mathlib was a definition of the complex numbers as a pair of real numbers. </p>
<p>But now things are completely different. It's much harder to find undergraduate level gaping holes in mathlib, and many of the undergraduate holes left need very careful consideration by experts, unfortunately. For example, for years we did not have a basic theory of calculus in one variable, and I was always pushing for it, but the people like Patrick and Sebastien who understood analysis properly assured me that we just had to wait and do it properly, with stuff like the Bochner integral and multivariable calculus all done first before the one variable case.</p>
</blockquote>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192974215" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192974215">said</a>:</p>
<blockquote>
<p>Contributing elementary stuff to mathlib becomes harder and harder. You missed the golden age two years ago.</p>
</blockquote>
<p>I definitely see that. But in some schools, complex analysis is considered to be undergraduate level in France AFAIK and isn't this something that mathlib does not have currently?</p>

<a name="192975033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975033" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975033">Kevin Buzzard (Apr 05 2020 at 19:53)</a>:</h4>
<p><span class="user-mention" data-user-id="243312">@Jason KY.</span> has been learning metric spaces using Lean (he will not go to the metric space course until next year). He just proved that closure was a Galois connection :-) I'm not entirely sure if this statement is covered in the course, but it's where we ended up going...</p>

<a name="192975043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975043" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975043">Ryan Lahfa (Apr 05 2020 at 19:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192974947" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192974947">said</a>:</p>
<blockquote>
<p>Where did you find those students?</p>
</blockquote>
<p>In Jussieu, there is a math project and Frédéric Paugam suggested to work on Lean, so there are two groups of 4 students working on Lean, the plan is to do: natural number games → reworking the metric space file that Frédéric Le Roux initiated to see how to do metric spaces <em>without</em> filters and in a more natural way for undergraduate students</p>

<a name="192975098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975098" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975098">Kevin Buzzard (Apr 05 2020 at 19:54)</a>:</h4>
<p>I am absolutely serious: you should just make the metric space stuff into a tutorial.</p>

<a name="192975108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975108" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975108">Kevin Buzzard (Apr 05 2020 at 19:54)</a>:</h4>
<p>and then throw it into Patrick's tutorial project.</p>

<a name="192975113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975113" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975113">Patrick Massot (Apr 05 2020 at 19:54)</a>:</h4>
<p>Oh yes, I remembered you mentioned working with Paugam.</p>

<a name="192975114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975114" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975114">Jason KY. (Apr 05 2020 at 19:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192975033" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192975033">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="243312">Jason KY.</span> has been learning metric spaces using Lean (he will not go to the metric space course until next year). He just proved that closure was a Galois connection :-) I'm not entirely sure if this statement is covered in the course, but it's where we ended up going...</p>
</blockquote>
<p>I won't have metric spaces next year :P They replaced the course with Lesbegue measure theory instead!</p>

<a name="192975126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975126" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975126">Kevin Buzzard (Apr 05 2020 at 19:55)</a>:</h4>
<p>I think the metric space stuff in mathlib is hard to read. Even the definition of a metric space is intimidating because all the auto-generated fields are <a href="#narrow/stream/116395-maths/topic/.60metric_space.60.20documentation/near/191666976" title="#narrow/stream/116395-maths/topic/.60metric_space.60.20documentation/near/191666976">displayed both in mathlib and in the docs</a>.</p>

<a name="192975167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975167" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975167">Patrick Massot (Apr 05 2020 at 19:56)</a>:</h4>
<p>I definitely intend to transform my first year exercises into a tutorial in the near future. But this is even more elementary than metric spaces.</p>

<a name="192975192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975192" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975192">Patrick Massot (Apr 05 2020 at 19:56)</a>:</h4>
<p>What's nice with metric spaces is you need to build structures and classes. This is not at all covered in my class.</p>

<a name="192975193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975193" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975193">Kevin Buzzard (Apr 05 2020 at 19:56)</a>:</h4>
<p>Patrick -- how do you feel about adding a bunch of files with <code>sorry</code>s into the tutorial project? Would this be Ok?</p>

<a name="192975195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975195" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975195">Patrick Massot (Apr 05 2020 at 19:56)</a>:</h4>
<p>So that would be a very nice follow-up</p>

<a name="192975198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975198">Kevin Buzzard (Apr 05 2020 at 19:56)</a>:</h4>
<p>Metric space is a great example of a structure.</p>

<a name="192975208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975208" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975208">Ryan Lahfa (Apr 05 2020 at 19:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192974956" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192974956">said</a>:</p>
<blockquote>
<p>Which construction of R do you want to use? Proving completeness of R is very dependent on its construction.</p>
</blockquote>
<p>I'm using the usual construction of R coming from mathlib, but I use another definition of convergence, etc ; so I cannot reuse all the <code>cau_seq</code> part from mathlib (though I could prove equivalence).</p>
<p>I didn't bother too much because I wanted a R-agnostic proof, just give me something which looks like R, some sup/inf and here's completeness</p>
<p>But in the metric space file, there are plans to take completed space (using quotient of Cauchy sequences) so we can build R from Q using this and try to prove that our R is isomorphic to mathlib's R (which is cool IMHO).</p>

<a name="192975211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975211" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975211">Patrick Massot (Apr 05 2020 at 19:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192975193" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192975193">said</a>:</p>
<blockquote>
<p>Patrick -- how do you feel about adding a bunch of files with <code>sorry</code>s into the tutorial project? Would this be Ok?</p>
</blockquote>
<p>Yes, this is what I want to do. Keep the only existing file as a kind of overview of the basics, then have a lot of exercises.</p>

<a name="192975212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975212" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975212">Kevin Buzzard (Apr 05 2020 at 19:57)</a>:</h4>
<p>We are picking up people who know about the basics of apply and intro exact because of NNG. Getting them working on metric spaces would be great because this is proper mathematics, not like all this Peano nonsense.</p>

<a name="192975253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975253" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975253">Ryan Lahfa (Apr 05 2020 at 19:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192975212" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192975212">said</a>:</p>
<blockquote>
<p>But we are picking up people who know about the basics of apply and intro exact because of NNG. Getting them working on metric spaces would be great because this is proper mathematics, not like all this Peano nonsense.</p>
</blockquote>
<p>I want now NNG with ZFC…………… Can I?</p>

<a name="192975258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975258" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975258">Kevin Buzzard (Apr 05 2020 at 19:58)</a>:</h4>
<p>What does that mean?</p>

<a name="192975267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975267" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975267">Ryan Lahfa (Apr 05 2020 at 19:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192975033" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192975033">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="243312">Jason KY.</span> has been learning metric spaces using Lean (he will not go to the metric space course until next year). He just proved that closure was a Galois connection :-) I'm not entirely sure if this statement is covered in the course, but it's where we ended up going...</p>
</blockquote>
<p>Wow!</p>

<a name="192975275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975275" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975275">Kevin Buzzard (Apr 05 2020 at 19:58)</a>:</h4>
<p>If it means what I think it means, the first thing you should do in ZFC is to prove that induction and recursion work, and then just do things like NNG anyway :-)</p>

<a name="192975283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975283" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975283">Ryan Lahfa (Apr 05 2020 at 19:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192975258" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192975258">said</a>:</p>
<blockquote>
<p>What does that mean?</p>
</blockquote>
<p>Building natural numbers with ZFC rather than Peano, but yes, once you have minimal stuff, it becomes like with Peano</p>

<a name="192975317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975317" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975317">Kevin Buzzard (Apr 05 2020 at 19:59)</a>:</h4>
<p>It's not that hard to prove it's a Galois connection. It's one of these things which sounds super-complicated but is just some abstract computer science way of saying some triviality about closures.</p>

<a name="192975376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975376" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975376">Ryan Lahfa (Apr 05 2020 at 20:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192975317" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192975317">said</a>:</p>
<blockquote>
<p>It's not that hard to prove it's a Galois connection. It's one of these things which sounds super-complicated but is just some abstract computer science way of saying some triviality about closures.</p>
</blockquote>
<p>Still, it is not expected to see what is a Galois connection, and stuff around order theory (though I really like order theory but that's just me…)</p>

<a name="192975388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975388" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975388">Ryan Lahfa (Apr 05 2020 at 20:00)</a>:</h4>
<p>I really also like the idea that Lean could be used to learn mathematics, but I'm unsure whether it's a good idea (?)</p>

<a name="192975389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975389" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975389">Ryan Lahfa (Apr 05 2020 at 20:00)</a>:</h4>
<p>(I learned a lot of maths thanks to mathlib docs to be honest… :D)</p>

<a name="192975409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975409" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975409">Kevin Buzzard (Apr 05 2020 at 20:01)</a>:</h4>
<p>I think this is an interesting point. The people at Xena seem to be the ones who are on top of the material in the lectures. Athina Thoma specialises in education and she told me that she thinks it's difficult to teach people Lean and equivalence relations at the same time if a student has never heard of either of them before.</p>

<a name="192975462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975462" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975462">Kevin Buzzard (Apr 05 2020 at 20:02)</a>:</h4>
<p>This is why NNG is a nice thing to do because everyone knows natural numbers already, even if they didn't know why addition was commutative. The objects are not intimidating.</p>

<a name="192975487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975487" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975487">Patrick Massot (Apr 05 2020 at 20:03)</a>:</h4>
<p>In my course I don't cover any maths the students haven't met before. But I do cover a lot of maths they didn't understand before (all this "proving" stuff for instance).</p>

<a name="192975564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975564" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975564">Kevin Buzzard (Apr 05 2020 at 20:05)</a>:</h4>
<p>Yes this is exactly what I do in my course, and then the Xena people are the ones who kind of knew what a proof was already. I want to use Lean to teach people what a proof is but I just attract people who know what it is already.</p>

<a name="192975625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975625" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975625">Ryan Lahfa (Apr 05 2020 at 20:06)</a>:</h4>
<p>Definitely, once you have enough experience with Lean, well, the new game is the whole mathematics.</p>
<p>Also, I'm interested in Lean for computer science, proving some correctness of algorithms you see as CS undergraduate, this sort terminates, etc, etc.<br>
But that's something I didn't have time to get in, though doing some maths first was super important because the purpose of those specific mathlib containers which looked like really my <code>std::vector</code> or a list in Haskell was not totally obvious to me at start.</p>

<a name="192975634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975634" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975634">Ryan Lahfa (Apr 05 2020 at 20:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192975564" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192975564">said</a>:</p>
<blockquote>
<p>Yes this is exactly what I do in my course, and then the Xena people are the ones who kind of knew what a proof was already. I want to use Lean to teach people what a proof is but I just attract people who know what it is already.</p>
</blockquote>
<p>There is a finite number of people who know what is a proof, so surely, you will attract people who don't know what it is!</p>

<a name="192975646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975646" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975646">Patrick Massot (Apr 05 2020 at 20:07)</a>:</h4>
<p>A couple of weeks ago I heard one student telling the other: "Oh, I think I'm beginning to understand the math101 course" (the one where they studied limits without understanding any proof).</p>

<a name="192975704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975704" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975704">Patrick Massot (Apr 05 2020 at 20:08)</a>:</h4>
<p>But of course the best students in my course were probably the best ones before. It's very frustrating that Covid-19 will completely ruin my hope to measure the impact of my course.</p>

<a name="192975809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975809" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975809">Ryan Lahfa (Apr 05 2020 at 20:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192975704" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192975704">said</a>:</p>
<blockquote>
<p>But of course the best students in my course were probably the best ones before. It's very frustrating that Covid-19 will completely ruin my hope to measure the impact of my course.</p>
</blockquote>
<p>Are exams completely canceled in Orsay? Or are they like bonus marks only?</p>

<a name="192975874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975874" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975874">Patrick Massot (Apr 05 2020 at 20:12)</a>:</h4>
<p>Nobody really knows. But it's already clear that everything will be biased by the lock-down.</p>

<a name="192975971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192975971" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192975971">Ryan Lahfa (Apr 05 2020 at 20:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192975874" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/192975874">said</a>:</p>
<blockquote>
<p>Nobody really knows. But it's already clear that everything will be biased by the lock-down.</p>
</blockquote>
<p>Ah :/<br>
In Jussieu, they decided that everything done during the lock-down can only be beneficial to students, otherwise it'll be ignored.<br>
Meaning, there is no real incentive to continue studying right now ; but at the same time, some parts are unclear, e.g. whether a final exam or not will be performed in June.</p>

<a name="192976007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192976007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192976007">Patrick Massot (Apr 05 2020 at 20:15)</a>:</h4>
<p>It seems that roughly half of my students are still working. But the bias is this is most probably the better half.</p>

<a name="192988621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192988621" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192988621">Scott Morrison (Apr 06 2020 at 01:56)</a>:</h4>
<p>It is pretty worrying that Kevin above has said "all the easy stuff is done". I don't think that's really the case at all, and we need to provide much better "on-ramping" to get new users towards useful things they could contribute.</p>

<a name="192988633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192988633" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192988633">Scott Morrison (Apr 06 2020 at 01:57)</a>:</h4>
<p>We need a better workflow for turning <code>sorry</code> into an accessible issue marked "needs-help" "new-user" somewhere. :-)</p>

<a name="192994696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192994696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192994696">Scott Morrison (Apr 06 2020 at 04:34)</a>:</h4>
<p>... maybe we need a channel here for standalone sorries. :-)</p>

<a name="192994711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192994711" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192994711">Scott Morrison (Apr 06 2020 at 04:35)</a>:</h4>
<p>We could have some standard set of emojis for "found the lemma in mathlib", "proof provided", "new user issue created", "sounds hard".</p>

<a name="192994713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192994713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192994713">Scott Morrison (Apr 06 2020 at 04:35)</a>:</h4>
<p>to keep track of progress :-)</p>

<a name="192994852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192994852" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192994852">Alex J. Best (Apr 06 2020 at 04:38)</a>:</h4>
<p>I've often wondered about this, how feasible it is to have a natural number game / proving for fun / codewars style website to collaboratively work towards a goal one lemma at a time. Sometimes I want to do some lean for mathlib but not spend several hours on a project.</p>

<a name="192995509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192995509" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192995509">Scott Morrison (Apr 06 2020 at 04:55)</a>:</h4>
<p>Anyone want to: locate in mathlib / PR / generalize-then-PR:</p>
<div class="codehilite"><pre><span></span>@[simp]
lemma head_add_tail_sum (L : list ℕ) : L.head + L.tail.sum = L.sum :=
begin
  cases L,
  { simp, refl, },
  { simp, },
end

-- lemma head_le_sum (L : list ℕ) : L.head ≤ L.sum := by library_search -- fails

@[simp]
lemma tail_sum (L : list ℕ) : L.tail.sum = L.sum - L.head :=
begin
  have := head_add_tail_sum L,
  omega,
end
</pre></div>

<a name="192995547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192995547" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192995547">Scott Morrison (Apr 06 2020 at 04:56)</a>:</h4>
<p>Is this the sort of thing we could conceivably put on a big list / gamify?</p>

<a name="192995691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192995691" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192995691">Scott Morrison (Apr 06 2020 at 04:58)</a>:</h4>
<p>Really we need something real time and interactive. :-)</p>

<a name="192998449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192998449" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192998449">Kevin Buzzard (Apr 06 2020 at 06:05)</a>:</h4>
<p>By "all the easy stuff is done" I mean "it is no longer the case that a beginner eg Kevin in 2017 can just come along and do the complex numbers". The elementary stuff which needs doing typically needs to be done in a certain way which beginners can't do. This at least is my impression</p>

<a name="192998518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192998518" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192998518">Yury G. Kudryashov (Apr 06 2020 at 06:06)</a>:</h4>
<p>I'm doing quaternions now. It's not much harder than complex numbers...</p>

<a name="192998604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/192998604" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#192998604">Kevin Buzzard (Apr 06 2020 at 06:08)</a>:</h4>
<p>That's a good counterpoint :-)</p>

<a name="193014542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/193014542" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#193014542">Scott Morrison (Apr 06 2020 at 09:15)</a>:</h4>
<p>sedenions!</p>

<a name="193014668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/193014668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#193014668">Kevin Buzzard (Apr 06 2020 at 09:16)</a>:</h4>
<p>rofl, I'd never heard of these. A <a href="https://en.wikipedia.org/wiki/Sedenion" title="https://en.wikipedia.org/wiki/Sedenion">16-dimensional algebra in which no axioms hold at all</a>!</p>

<a name="193014724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/193014724" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#193014724">Kevin Buzzard (Apr 06 2020 at 09:16)</a>:</h4>
<p>Oh I take that back -- it's a <code>distrib</code>! <em>rofl</em> so <em>that's</em> the point of distribs!</p>

<a name="193015441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/193015441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#193015441">Johan Commelin (Apr 06 2020 at 09:23)</a>:</h4>
<p>Lol, also</p>
<blockquote>
<p>Moreno (1998) showed that the space of pairs of norm-one sedenions that multiply to zero is homeomorphic to the compact form of the exceptional Lie group G2. (Note that in his paper, a "zero divisor" means a pair of elements that multiply to zero.) </p>
</blockquote>

<a name="193015705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/193015705" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#193015705">Kevin Buzzard (Apr 06 2020 at 09:26)</a>:</h4>
<p><em>wow</em> so actually they do have a point :-)</p>

<a name="193015732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/193015732" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#193015732">Kevin Buzzard (Apr 06 2020 at 09:26)</a>:</h4>
<p>Oh wait -- homeomorphic? No group structure?</p>

<a name="193026381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/193026381" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#193026381">Ryan Lahfa (Apr 06 2020 at 11:15)</a>:</h4>
<p>Do we even have Clifford algebras?</p>

<a name="193026390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/193026390" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#193026390">Johan Commelin (Apr 06 2020 at 11:15)</a>:</h4>
<p>Not in mathlib</p>

<a name="193026402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/193026402" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#193026402">Ryan Lahfa (Apr 06 2020 at 11:15)</a>:</h4>
<p>But in perfectoid I suppose?</p>

<a name="193026910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/193026910" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#193026910">Kevin Buzzard (Apr 06 2020 at 11:20)</a>:</h4>
<p>nope</p>

<a name="193026978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/193026978" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#193026978">Ryan Lahfa (Apr 06 2020 at 11:21)</a>:</h4>
<p>Oh okay</p>

<a name="193031326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/193031326" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#193031326">Johan Commelin (Apr 06 2020 at 12:07)</a>:</h4>
<p>Ok, I should have said "Not in any repo I know of"</p>

<a name="193032037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/193032037" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#193032037">Patrick Massot (Apr 06 2020 at 12:15)</a>:</h4>
<p>If you want more algebra I'd suggest doing antisymmetric multilinear forms long before doing Clifford algebras.</p>

<a name="193039360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/193039360" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#193039360">Ryan Lahfa (Apr 06 2020 at 13:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/193032037" title="#narrow/stream/113489-new-members/topic/cleaning.20up.20this.20tactic.20proof.20(regarding.20closures)/near/193032037">said</a>:</p>
<blockquote>
<p>If you want more algebra I'd suggest doing antisymmetric multilinear forms long before doing Clifford algebras.</p>
</blockquote>
<p>Isn't something being worked on? I have seen some commits multilinear/* but I don't know what's the state of all this</p>

<a name="193043043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/193043043" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#193043043">Patrick Massot (Apr 06 2020 at 13:43)</a>:</h4>
<p>Yes, Sébastien did a lot on multilinear on his way to higher order derivatives and then analytic functions. But I really mean exterior algebras.</p>

<a name="193043133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/193043133" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#193043133">Patrick Massot (Apr 06 2020 at 13:43)</a>:</h4>
<p>In particular we probably want to do it right in full generality, provided this doesn't make elementary examples too painful.</p>

<a name="193043418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/193043418" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#193043418">Patrick Massot (Apr 06 2020 at 13:45)</a>:</h4>
<p>There is a tension between having <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="normal">Λ</mi><mi>k</mi></msup><msup><mi>V</mi><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">\Lambda^k V^*</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.849108em;vertical-align:0em;"></span><span class="mord"><span class="mord">Λ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span> seen as the subspace of multilinear maps from <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>V</mi><mi>k</mi></msup></mrow><annotation encoding="application/x-tex">V^k</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.849108em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span> to the base field which happen to be antisymmetric, which is nice and concrete, and the fact this is clearly wrong in positive characteristic where there is no other choice than seeing it as a <em>quotient</em> of the tensor algebra.</p>

<a name="193043615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/cleaning%20up%20this%20tactic%20proof%20%28regarding%20closures%29/near/193043615" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/12529cleaningupthistacticproofregardingclosures.html#193043615">Patrick Massot (Apr 06 2020 at 13:47)</a>:</h4>
<p>So I would say to first have a look at what we have about tensor algebras (I know there are binary tensor product, but I'm afraid maybe not much more). Then try the quotient route. And then think about simpler things.</p>


{% endraw %}

{% include archive_update.html %}