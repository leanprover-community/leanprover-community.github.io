---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113489newmembers/30422helpfindingalemma.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html">help finding a lemma</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="159223961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159223961" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159223961">Scott Morrison (Feb 23 2019 at 10:33)</a>:</h4>
<p>Where is <code>(a - b) - (c - b) = a - c</code>? (With the appropriate inequality as a hypothesis)</p>

<a name="159223962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159223962" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159223962">Kenny Lau (Feb 23 2019 at 10:33)</a>:</h4>
<p>so... for nat?</p>

<a name="159224002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159224002" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159224002">Scott Morrison (Feb 23 2019 at 10:34)</a>:</h4>
<p>Sure.</p>

<a name="159224009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159224009" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159224009">Scott Morrison (Feb 23 2019 at 10:34)</a>:</h4>
<p>(Sorry, yes, I should have said that!)</p>

<a name="159224088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159224088" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159224088">Scott Morrison (Feb 23 2019 at 10:36)</a>:</h4>
<p>Is this meant to be called <code>sub_sub_sub_right</code> or something?</p>

<a name="159224099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159224099" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159224099">Scott Morrison (Feb 23 2019 at 10:37)</a>:</h4>
<p>by analogy with <code>nat.add_sub_add_right : ∀ (n k m : ℕ), n + k - (m + k) = n - m</code></p>

<a name="159224220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159224220" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159224220">Chris Hughes (Feb 23 2019 at 10:41)</a>:</h4>
<p>The group version is called <code>sub_sub_sub_cancel_right</code>. I would rather be consistent with that.</p>

<a name="159224460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159224460" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159224460">Scott Morrison (Feb 23 2019 at 10:49)</a>:</h4>
<p>Sure! But does it exist already?</p>

<a name="159224462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159224462" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159224462">Scott Morrison (Feb 23 2019 at 10:49)</a>:</h4>
<p>Surely?</p>

<a name="159224533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159224533" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159224533">Chris Hughes (Feb 23 2019 at 10:50)</a>:</h4>
<p><code>#find ((_ - _) - (_ - _) = _)</code> didn't return anything about naturals.</p>

<a name="159224537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159224537" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159224537">Scott Morrison (Feb 23 2019 at 10:51)</a>:</h4>
<p>And while we're at it: <code>a \le b \imp (a - c) \le (b-c)</code>?</p>

<a name="159224545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159224545" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159224545">Chris Hughes (Feb 23 2019 at 10:51)</a>:</h4>
<p><code>nat.sub_le_sub_left</code> is there.</p>

<a name="159224586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159224586" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159224586">Chris Hughes (Feb 23 2019 at 10:52)</a>:</h4>
<p>sorry <code>right</code></p>

<a name="159224646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159224646" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159224646">Scott Morrison (Feb 23 2019 at 10:55)</a>:</h4>
<p>Ok:</p>
<div class="codehilite"><pre><span></span>lemma sub_sub_sub_cancel_right {a b c : ℕ} (h₂ : c ≤ b) : (a - c) - (b - c) = a - b :=
begin
  rw [nat.sub_sub, ←nat.add_sub_assoc, nat.add_sub_cancel_left],
  exact h₂
end
</pre></div>


<p>looks okay? Can I put that in <code>data/nat/basic.lean</code>?</p>

<a name="159224700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159224700" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159224700">Chris Hughes (Feb 23 2019 at 10:57)</a>:</h4>
<p>Yes. Can't you <code>rw ←nat.add_sub_assoc h₂</code> and put the proof on one line</p>

<a name="159224753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159224753" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159224753">Scott Morrison (Feb 23 2019 at 10:59)</a>:</h4>
<p>Thanks.</p>

<a name="159224754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159224754" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159224754">Chris Hughes (Feb 23 2019 at 10:59)</a>:</h4>
<p>Should probably be <code>protected</code> as well</p>

<a name="159224763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159224763" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159224763">Scott Morrison (Feb 23 2019 at 10:59)</a>:</h4>
<p>Why is that?</p>

<a name="159225156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159225156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159225156">Kevin Buzzard (Feb 23 2019 at 11:12)</a>:</h4>
<p>One could go through every lemma proved for add comm groups and reprove it for nat with the appropriate inequalities added as hypotheses if necessary.</p>

<a name="159225172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159225172" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159225172">Scott Morrison (Feb 23 2019 at 11:13)</a>:</h4>
<p>That sounds like a good exercise for someone. :-)</p>

<a name="159225224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159225224" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159225224">Scott Morrison (Feb 23 2019 at 11:14)</a>:</h4>
<p>I _hate_ having to deal with stupid inequalities. At the moment I'm staring at </p>
<div class="codehilite"><pre><span></span>h₂ : a &lt; m,
h₃ : m ≤ a
⊢ false
</pre></div>


<p>and trying to remember implementation details of <code>lt</code> and <code>le</code>...</p>

<a name="159225291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159225291" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159225291">Scott Morrison (Feb 23 2019 at 11:16)</a>:</h4>
<p>I guess <code>exact not_lt_of_ge h₃ h₂</code> is not so bad. But where is my <code>duh</code> tactic for these? Can we just import <code>linarith</code> at the beginning of time?</p>

<a name="159225301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159225301" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159225301">Scott Morrison (Feb 23 2019 at 11:17)</a>:</h4>
<p>How about a lemma that says "two lists are equal if they are both ordered according to a strict order, and they have the same members"?</p>

<a name="159225350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159225350" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159225350">Kevin Buzzard (Feb 23 2019 at 11:18)</a>:</h4>
<p><code>linarith</code></p>

<a name="159225374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159225374" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159225374">Kevin Buzzard (Feb 23 2019 at 11:19)</a>:</h4>
<p>oh you know <code>linarith</code>. Does it not work? whenever I'm doing undergraduate analysis it's the first thing I import after <code>data.real.basic</code></p>

<a name="159225428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159225428" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159225428">Kevin Buzzard (Feb 23 2019 at 11:20)</a>:</h4>
<p>you could also prove a &lt; a with lt_of_lt_of_le I guess</p>

<a name="159226125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159226125" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159226125">Mario Carneiro (Feb 23 2019 at 11:42)</a>:</h4>
<p>The two lists are equal thing is <code>eq_of_sorted_of_perm</code></p>

<a name="159226416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159226416" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159226416">Scott Morrison (Feb 23 2019 at 11:52)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>, the problem here is that I'm filling in gaps I'm finding back in data.list, data.finset and data.multiset, where it's presumably too early to import linarith.</p>

<a name="159226420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159226420" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159226420">Scott Morrison (Feb 23 2019 at 11:52)</a>:</h4>
<p>And there's no <code>linarith?</code> mode that prints out a proof term for you. :-)</p>

<a name="159226438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159226438" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159226438">Kevin Buzzard (Feb 23 2019 at 11:53)</a>:</h4>
<p>Oh I see!</p>

<a name="159226905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159226905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159226905">Mario Carneiro (Feb 23 2019 at 12:07)</a>:</h4>
<p>I want a tactic that explores short tactic scripts and gives you a short proof if one exists</p>

<a name="159227834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159227834" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159227834">Rob Lewis (Feb 23 2019 at 12:36)</a>:</h4>
<p>I promise you don't want to see the proof terms that <code>linarith</code> generates. :)</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">linarith</span>

<span class="bp">#</span><span class="kn">print</span> <span class="n">f</span>
</pre></div>

<a name="159248834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159248834" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159248834">Scott Morrison (Feb 23 2019 at 22:44)</a>:</h4>
<p>What is <code>lemma nat.le_pred_of_lt (h : a &lt; b) : a ≤ b - 1</code> actually called?</p>

<a name="159248899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159248899" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159248899">Chris Hughes (Feb 23 2019 at 22:46)</a>:</h4>
<p><code>nat.pred_le_iff</code></p>

<a name="159249038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159249038" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159249038">Scott Morrison (Feb 23 2019 at 22:50)</a>:</h4>
<p>oh, but that's still only half of it</p>

<a name="159249049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159249049" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159249049">Scott Morrison (Feb 23 2019 at 22:51)</a>:</h4>
<p>actually, <span class="user-mention" data-user-id="110044">@Chris Hughes</span>, I think that one is irrelevant here</p>

<a name="159249162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159249162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159249162">Chris Hughes (Feb 23 2019 at 22:55)</a>:</h4>
<p>Yeah, it's <code>pred_le</code> not <code>le_pred</code></p>

<a name="159258315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159258315" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159258315">Scott Morrison (Feb 24 2019 at 03:47)</a>:</h4>
<p>How is one meant to prove</p>
<div class="codehilite"><pre><span></span>lemma nat.ge_one_of_gt {n m : ℕ} (h : m &gt; n) : m ≥ 1 :=
le_trans ((le_add_iff_nonneg_left _).2 (nat.zero_le _)) h
</pre></div>


<p>That proof is obviously lame.</p>

<a name="159258547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159258547" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159258547">Mario Carneiro (Feb 24 2019 at 03:54)</a>:</h4>
<p>I would have gone for <code>lt_trans (nat.zero_le _) h</code></p>

<a name="159258573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159258573" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159258573">Mario Carneiro (Feb 24 2019 at 03:55)</a>:</h4>
<p>also, stop using <code>ge</code> and <code>gt</code> so much</p>

<a name="159259103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159259103" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159259103">Scott Morrison (Feb 24 2019 at 04:12)</a>:</h4>
<p>Hmm.. I used <code>ge</code> and <code>gt</code> here for the sake of naming.</p>

<a name="159259106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159259106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159259106">Scott Morrison (Feb 24 2019 at 04:12)</a>:</h4>
<p>Would you name it <code>lemma nat.one_le_of_lt {n m : ℕ} (h : n &lt; m) : 1 \le m :=</code>?</p>

<a name="159259119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159259119" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159259119">Scott Morrison (Feb 24 2019 at 04:13)</a>:</h4>
<p>Somehow that seems harder to parse. (Because the subject of the phrase is embedded in the middle "one is le than ARGUMENT of lt", rather than "ARGUMENT is ge one of gt".)</p>

<a name="159259669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159259669" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159259669">Scott Morrison (Feb 24 2019 at 04:30)</a>:</h4>
<p>Grah, I hate (Lean's lack of support for) the natural numbers so much.</p>

<a name="159259674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159259674" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159259674">Scott Morrison (Feb 24 2019 at 04:30)</a>:</h4>
<p>What is the easiest proof of false, given <code>a : n + 1 ≤ n</code>?</p>

<a name="159260148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159260148" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159260148">Andrew Ashworth (Feb 24 2019 at 04:44)</a>:</h4>
<p><code>example (n : ℕ) : ¬(n + 1 ≤ n) := not_le_of_gt (nat.lt_succ_self _)</code></p>

<a name="159260206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159260206" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159260206">Scott Morrison (Feb 24 2019 at 04:46)</a>:</h4>
<p>Thanks, <span class="user-mention" data-user-id="110025">@Andrew Ashworth</span>.</p>

<a name="159260383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159260383" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159260383">Jesse Michael Han (Feb 24 2019 at 04:53)</a>:</h4>
<p>there's also a <code>nat</code> lemma that says exactly what you want</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">not_succ_le_self</span> <span class="bp">_</span>
</pre></div>


<p>(of course <code>linarith</code> works, but the proof term is hideous)</p>

<a name="159413106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159413106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159413106">Scott Morrison (Feb 26 2019 at 10:14)</a>:</h4>
<p>Do we have <code>lemma mul_mod (a b n : ℕ) : (a * b) % n = (a % n) * (b % n) % n := sorry</code>?</p>

<a name="159413157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159413157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159413157">Patrick Massot (Feb 26 2019 at 10:15)</a>:</h4>
<p>I would look into <code>data/nat/modeq.lean</code></p>

<a name="159414197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159414197" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159414197">Scott Morrison (Feb 26 2019 at 10:37)</a>:</h4>
<p>Doesn't seem to be there. It seems a pain to prove, actually.</p>

<a name="159414212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159414212" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159414212">Scott Morrison (Feb 26 2019 at 10:37)</a>:</h4>
<p>I'd be surprised if it hasn't been needed yet</p>

<a name="159414216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159414216" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159414216">Scott Morrison (Feb 26 2019 at 10:37)</a>:</h4>
<p>similarly for <code>add_mod</code>.</p>

<a name="159414474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159414474" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159414474">Mario Carneiro (Feb 26 2019 at 10:42)</a>:</h4>
<p>It follows from some stuff about modeq</p>

<a name="159414489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159414489" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159414489">Mario Carneiro (Feb 26 2019 at 10:43)</a>:</h4>
<p>it is roughly <code>modeq_mul mod_modeq mod_modeq</code></p>

<a name="159414510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159414510" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159414510">Scott Morrison (Feb 26 2019 at 10:43)</a>:</h4>
<p>okay, I see.</p>

<a name="159414526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159414526" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159414526">Patrick Massot (Feb 26 2019 at 10:43)</a>:</h4>
<p>Why not descending all this to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi><mi mathvariant="normal">/</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">Z/n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07153em;">Z</span><span class="mord mathrm">/</span><span class="mord mathit">n</span></span></span></span>?</p>

<a name="159414576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159414576" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159414576">Scott Morrison (Feb 26 2019 at 10:44)</a>:</h4>
<p>modeq seems supremely painful to use ... rather than just having a new type for N/nN and Z/nZ</p>

<a name="159414583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159414583" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159414583">Scott Morrison (Feb 26 2019 at 10:44)</a>:</h4>
<p>has someone done N/nZ and Z/nZ?</p>

<a name="159414584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159414584" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159414584">Patrick Massot (Feb 26 2019 at 10:44)</a>:</h4>
<p>Prove that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mi mathvariant="normal">%</mi><mi>n</mi><mo>=</mo><mi>b</mi><mi mathvariant="normal">%</mi><mi>n</mi></mrow><annotation encoding="application/x-tex"> a \% n = b \% n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="base"><span class="mord mathit">a</span><span class="mord mathrm">%</span><span class="mord mathit">n</span><span class="mrel">=</span><span class="mord mathit">b</span><span class="mord mathrm">%</span><span class="mord mathit">n</span></span></span></span> iff <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>π</mi><mo>(</mo><mi>a</mi><mo>)</mo><mo>=</mo><mi>π</mi><mo>(</mo><mi>b</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\pi(a) = \pi(b)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.03588em;">π</span><span class="mopen">(</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.03588em;">π</span><span class="mopen">(</span><span class="mord mathit">b</span><span class="mclose">)</span></span></span></span> where <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.03588em;">π</span></span></span></span> goes down from <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi></mrow><annotation encoding="application/x-tex">Z</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07153em;">Z</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>Z</mi><mi mathvariant="normal">/</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">Z/n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.07153em;">Z</span><span class="mord mathrm">/</span><span class="mord mathit">n</span></span></span></span></p>

<a name="159414585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159414585" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159414585">Mario Carneiro (Feb 26 2019 at 10:44)</a>:</h4>
<p>there is a type for Z/nZ</p>

<a name="159414589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159414589" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159414589">Mario Carneiro (Feb 26 2019 at 10:44)</a>:</h4>
<p>like Patrick said</p>

<a name="159414590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159414590" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159414590">Mario Carneiro (Feb 26 2019 at 10:45)</a>:</h4>
<p><code>zmod</code></p>

<a name="159414603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159414603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159414603">Mario Carneiro (Feb 26 2019 at 10:45)</a>:</h4>
<p>That is surely proven already</p>

<a name="159414657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159414657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159414657">Mario Carneiro (Feb 26 2019 at 10:46)</a>:</h4>
<p><code>zmod.eq_iff_modeq_nat</code></p>

<a name="159415432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159415432" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159415432">Scott Morrison (Feb 26 2019 at 11:01)</a>:</h4>
<p>Thanks!</p>
<p>... so at the end of the day I get a hypothesis <code>1 = 1 + (1 + (1 + 4 * ↑n))</code> (here we are in <code>zmod 4</code>) and I want to prove false...</p>

<a name="159415453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159415453" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159415453">Mario Carneiro (Feb 26 2019 at 11:01)</a>:</h4>
<p>I think you can <code>change 4 with 0</code></p>

<a name="159415505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159415505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159415505">Mario Carneiro (Feb 26 2019 at 11:02)</a>:</h4>
<p>there's probably a better way though</p>

<a name="159415521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159415521" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159415521">Mario Carneiro (Feb 26 2019 at 11:02)</a>:</h4>
<p><code>cast_self_eq_zero</code>?</p>

<a name="159415567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159415567" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159415567">Scott Morrison (Feb 26 2019 at 11:03)</a>:</h4>
<p>I can't seem to get that to rewrite. Because the 4 here is the actual numeral, not the cast of the 4 in \nat+</p>

<a name="159415636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159415636" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159415636">Scott Morrison (Feb 26 2019 at 11:04)</a>:</h4>
<p><code>change 4 with 0 at w</code> doesn't seem to have any effect</p>

<a name="159415775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159415775" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159415775">Mario Carneiro (Feb 26 2019 at 11:07)</a>:</h4>
<p><code>change 4 with ((4:N+):N)</code> might work</p>

<a name="159415845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159415845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159415845">Mario Carneiro (Feb 26 2019 at 11:08)</a>:</h4>
<p>Or just go back to nats from this point</p>

<a name="159415854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159415854" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159415854">Scott Morrison (Feb 26 2019 at 11:08)</a>:</h4>
<p>How do I go back to nats? That's what I'm missing, I think.</p>

<a name="159415878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159415878" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159415878">Scott Morrison (Feb 26 2019 at 11:09)</a>:</h4>
<p>Here's a MWE:</p>
<div class="codehilite"><pre><span></span>lemma foo (n : ℕ) (h : @eq (zmod 4) 1
    (@has_add.add (zmod 4)
       (@add_semigroup.to_has_add (zmod 4) (@add_comm_semigroup.to_add_semigroup (zmod 4) (zmod.add_comm_semigroup 4)))
       1
       (@has_add.add (zmod 4)
          (@add_semigroup.to_has_add (zmod 4)
             (@add_comm_semigroup.to_add_semigroup (zmod 4) (zmod.add_comm_semigroup 4)))
          1
          (@has_add.add (zmod 4)
             (@add_semigroup.to_has_add (zmod 4)
                (@add_comm_semigroup.to_add_semigroup (zmod 4) (zmod.add_comm_semigroup 4)))
             1
             (@has_mul.mul (zmod 4)
                (@mul_zero_class.to_has_mul (zmod 4)
                   (@semiring.to_mul_zero_class (zmod 4)
                      (@ring.to_semiring (zmod 4) (@comm_ring.to_ring (zmod 4) (zmod.comm_ring 4)))))
                4
                (@coe nat (zmod 4)
                   (@coe_to_lift nat (zmod 4)
                      (@coe_base nat (zmod 4)
                         (@nat.cast_coe (zmod 4) (zmod.has_zero 4) (zmod.has_one 4)
                            (@distrib.to_has_add (zmod 4)
                               (@ring.to_distrib (zmod 4) (@comm_ring.to_ring (zmod 4) (zmod.comm_ring 4)))))))
                   n)))))) : false :=
begin

end
</pre></div>

<a name="159416187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159416187" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159416187">Mario Carneiro (Feb 26 2019 at 11:15)</a>:</h4>
<p>this works:</p>
<div class="codehilite"><pre><span></span>  simp [show (4:zmod 4) = 0, from @zmod.cast_self_eq_zero 4] at h,
  cases h
</pre></div>

<a name="159416265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159416265" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159416265">Scott Morrison (Feb 26 2019 at 11:17)</a>:</h4>
<p>woah... okay.</p>

<a name="159416283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159416283" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159416283">Scott Morrison (Feb 26 2019 at 11:17)</a>:</h4>
<p>Is there any way we can make that more ergonomic?</p>

<a name="159416330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159416330" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159416330">Scott Morrison (Feb 26 2019 at 11:18)</a>:</h4>
<p>It seems like the sort of thing you'd hope <code>simp</code> to do unassisted.</p>

<a name="159416434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159416434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159416434">Scott Morrison (Feb 26 2019 at 11:20)</a>:</h4>
<p>or are we just doomed because the <code>4</code> here is a numeral?</p>

<a name="159416505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159416505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159416505">Mario Carneiro (Feb 26 2019 at 11:22)</a>:</h4>
<p>That's one of the things that the <code>cast</code> tactic is supposed to do</p>

<a name="159416510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159416510" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159416510">Mario Carneiro (Feb 26 2019 at 11:22)</a>:</h4>
<p>I forget who was working on that</p>

<a name="159416536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159416536" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159416536">Mario Carneiro (Feb 26 2019 at 11:23)</a>:</h4>
<p><code>simp</code> can't do this unassisted because the cast goes the wrong direction... It wants to get rid of up arrows not put them in</p>

<a name="159416619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159416619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159416619">Scott Morrison (Feb 26 2019 at 11:24)</a>:</h4>
<p>The lemma <code>@[simp] lemma cast_self_eq_zero' {n : ℕ} {h : n &gt; 0} : (n : zmod ⟨n, h⟩) = 0 :=</code></p>

<a name="159416628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159416628" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159416628">Scott Morrison (Feb 26 2019 at 11:24)</a>:</h4>
<p>seems to work... except that the <code>0</code> ends up in the wrong version of <code>zmod 4</code>, somehow...</p>

<a name="159416637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159416637" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159416637">Scott Morrison (Feb 26 2019 at 11:24)</a>:</h4>
<p>so afterwards <code>rw [zero_mul]</code> fails, but <code>erw [zero_mul]</code> succeeds...</p>

<a name="159416714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159416714" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159416714">Scott Morrison (Feb 26 2019 at 11:26)</a>:</h4>
<p>(or rather, it _doesn't_ work in the MWE example I posted, but mysteriously does work in my bigger example!)</p>

<a name="159416717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159416717" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159416717">Scott Morrison (Feb 26 2019 at 11:26)</a>:</h4>
<p>grah</p>

<a name="159416949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159416949" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159416949">Mario Carneiro (Feb 26 2019 at 11:30)</a>:</h4>
<p>this is the main downside of <code>zmod</code> compared to <code>modeq</code> - you have to worry about positivity</p>

<a name="159417076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417076" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417076">Scott Morrison (Feb 26 2019 at 11:33)</a>:</h4>
<p>such a nightmare... I got most of the way through our 2nd years first problem sheet, and then this blew up in my face :-)</p>

<a name="159417133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417133" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417133">Scott Morrison (Feb 26 2019 at 11:34)</a>:</h4>
<p>Here's another MWE, where I can get a simp lemma working, but then have to <code>erw</code> later instead of <code>simp</code>:</p>
<div class="codehilite"><pre><span></span>@[simp] lemma zmod.cast_self_eq_zero&#39; {n : ℕ} {h : n &gt; 0} : (n : zmod ⟨n, h⟩) = 0 :=
zmod.cast_self_eq_zero


lemma bar (n : ℕ) (w : @eq (zmod 4)
    1
    (@has_add.add (zmod 4)
       (@distrib.to_has_add (zmod 4) (@ring.to_distrib (zmod 4) (@comm_ring.to_ring (zmod 4) (zmod.comm_ring 4))))
       (@has_add.add (zmod 4)
          (@distrib.to_has_add (zmod 4) (@ring.to_distrib (zmod 4) (@comm_ring.to_ring (zmod 4) (zmod.comm_ring 4))))
          (@has_add.add (zmod 4)
             (@distrib.to_has_add (zmod 4) (@ring.to_distrib (zmod 4) (@comm_ring.to_ring (zmod 4) (zmod.comm_ring 4))))
             (@coe nat (zmod 4)
                (@coe_to_lift nat (zmod 4)
                   (@coe_base nat (zmod 4)
                      (@nat.cast_coe (zmod 4) (zmod.has_zero 4) (zmod.has_one 4)
                         (@distrib.to_has_add (zmod 4)
                            (@ring.to_distrib (zmod 4) (@comm_ring.to_ring (zmod 4) (zmod.comm_ring 4)))))))
                (@has_mul.mul nat nat.has_mul 4 n))
             1)
          1)
       1)) : false :=
begin
  simp at w,
  erw [zero_mul] at w,
  simp at w,
  cases w,
end
</pre></div>

<a name="159417136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417136" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417136">Kevin Buzzard (Feb 26 2019 at 11:34)</a>:</h4>
<p>This happened to me all the time when I was doing problem sheet questions.</p>

<a name="159417154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417154" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417154">Kevin Buzzard (Feb 26 2019 at 11:35)</a>:</h4>
<p>The Lean devs focus on theorems not examples, and sometimes examples are far harder than you'd like.</p>

<a name="159417167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417167" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417167">Mario Carneiro (Feb 26 2019 at 11:35)</a>:</h4>
<p>the best solution is to stop doing problem sheet questions :P</p>

<a name="159417172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417172" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417172">Scott Morrison (Feb 26 2019 at 11:35)</a>:</h4>
<p>I'm sold...</p>

<a name="159417177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417177" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417177">Kevin Buzzard (Feb 26 2019 at 11:35)</a>:</h4>
<p>I know you're not interested in this aspect of Lean :-) But my students are.</p>

<a name="159417183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417183" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417183">Kevin Buzzard (Feb 26 2019 at 11:35)</a>:</h4>
<p>As you said a day or two ago, examples are for the educators.</p>

<a name="159417246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417246" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417246">Scott Morrison (Feb 26 2019 at 11:36)</a>:</h4>
<p>(For context, I was actually trying to write a "an undergraduate could do this" proof that there are infinitely many 4n+3 primes.)</p>

<a name="159417287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417287">Mario Carneiro (Feb 26 2019 at 11:37)</a>:</h4>
<p>when you say "an undergraduate could do this" do you mean you wrote it in a deliberately inefficient way to find out how to recover?</p>

<a name="159417303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417303" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417303">Mario Carneiro (Feb 26 2019 at 11:37)</a>:</h4>
<p>That's a theorem I want in mathlib btw</p>

<a name="159417356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417356" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417356">Mario Carneiro (Feb 26 2019 at 11:38)</a>:</h4>
<p>aha, you wanted to prove that a 4n+3 prime is not equal to 1?</p>

<a name="159417652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417652" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417652">Scott Morrison (Feb 26 2019 at 11:44)</a>:</h4>
<p>I was just proving a lemma, that a 4n+3 number has a 4n+3 prime factor:</p>

<a name="159417669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417669" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417669">Scott Morrison (Feb 26 2019 at 11:44)</a>:</h4>
<p><a href="https://gist.github.com/semorrison/a43a508646169efe1d1b3bda1e142140" target="_blank" title="https://gist.github.com/semorrison/a43a508646169efe1d1b3bda1e142140">https://gist.github.com/semorrison/a43a508646169efe1d1b3bda1e142140</a></p>

<a name="159417846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417846" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417846">Mario Carneiro (Feb 26 2019 at 11:48)</a>:</h4>
<p>I think it would help to not call the number <code>4*k+3</code> and instead call it <code>k'</code> such that <code>k' % 4 = 3</code></p>

<a name="159417860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417860" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417860">Mario Carneiro (Feb 26 2019 at 11:48)</a>:</h4>
<p>or maybe <code>k' == 3 [MOD 4]</code></p>

<a name="159417885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417885" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417885">Scott Morrison (Feb 26 2019 at 11:49)</a>:</h4>
<p>or maybe <code>(k' : zmod 4) = 1</code>, since <code>modeq</code> is horrible to use :-)</p>

<a name="159417906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417906">Mario Carneiro (Feb 26 2019 at 11:49)</a>:</h4>
<p>it's a relation between nats. This matters more than you seem to think</p>

<a name="159417914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417914" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417914">Scott Morrison (Feb 26 2019 at 11:49)</a>:</h4>
<p>It's just that the relation is almost-but-not-actually equality</p>

<a name="159417968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417968" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417968">Scott Morrison (Feb 26 2019 at 11:50)</a>:</h4>
<p>so you find yourself wanting to rewrite using it, but you can't</p>

<a name="159417984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417984" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417984">Mario Carneiro (Feb 26 2019 at 11:50)</a>:</h4>
<p>You can use it in calc blocks and apply transitivity lemmas and so on</p>

<a name="159417989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159417989" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159417989">Mario Carneiro (Feb 26 2019 at 11:50)</a>:</h4>
<p>but it's true, the congruences you can use are controlled</p>

<a name="159418008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159418008" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159418008">Mario Carneiro (Feb 26 2019 at 11:51)</a>:</h4>
<p>(hm, overlapping meanings of "congruence" here)</p>

<a name="159418013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159418013" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159418013">Scott Morrison (Feb 26 2019 at 11:51)</a>:</h4>
<p>(sure)</p>

<a name="159418035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159418035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159418035">Mario Carneiro (Feb 26 2019 at 11:51)</a>:</h4>
<p>when you use zmod, you have to deal with coercions and how they affect everything else</p>

<a name="159418041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159418041" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159418041">Mario Carneiro (Feb 26 2019 at 11:51)</a>:</h4>
<p>it's the same problem in a different notation</p>

<a name="159418098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159418098" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159418098">Scott Morrison (Feb 26 2019 at 11:52)</a>:</h4>
<blockquote>
<p>I think it would help to not call the number <code>4*k+3</code> and instead call it <code>k'</code> such that <code>k' % 4 = 3</code></p>
</blockquote>
<p>Can you explain the motivation here? I can imagine this is worth trying, but I don't have an intuition ahead of time.</p>

<a name="159418118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159418118" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159418118">Mario Carneiro (Feb 26 2019 at 11:52)</a>:</h4>
<p>you don't care about <code>k</code> here. it's just some multiplier</p>

<a name="159418144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159418144" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159418144">Mario Carneiro (Feb 26 2019 at 11:53)</a>:</h4>
<p>So this is exposing all that structure, the 4 and the 3 and the plus, to be rearranged by simp and friends and that will be bad news</p>

<a name="159418223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159418223" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159418223">Scott Morrison (Feb 26 2019 at 11:54)</a>:</h4>
<p>okay</p>

<a name="159418228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159418228" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159418228">Mario Carneiro (Feb 26 2019 at 11:54)</a>:</h4>
<p>the point of definitions is to hide and idiomize irrelevant structure for the task at hand</p>

<a name="159418257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159418257" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159418257">Johan Commelin (Feb 26 2019 at 11:55)</a>:</h4>
<blockquote>
<p>That's a theorem I want in mathlib btw</p>
</blockquote>
<p>It's a trivial corollary of Chebotarev's density theorem.</p>

<a name="159418321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159418321" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159418321">Mario Carneiro (Feb 26 2019 at 11:56)</a>:</h4>
<p>oh, actually I realize I misread it now... I was thinking about another theorem about 4*k+3 primes</p>

<a name="159418336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159418336" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159418336">Mario Carneiro (Feb 26 2019 at 11:56)</a>:</h4>
<p>Maybe the two square theorem? That's about 4*k+1 primes though</p>

<a name="159418370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159418370" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159418370">Mario Carneiro (Feb 26 2019 at 11:57)</a>:</h4>
<p>I don't know Chebotarev's density theorem, but it also follows from Dirichlet's theorem which I have some experience with</p>

<a name="159418614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159418614" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159418614">Johan Commelin (Feb 26 2019 at 12:01)</a>:</h4>
<p>Chebotarev's density theorem generalizes all the others. It's a very nice result in analytic number theory, but it's also quite hard to prove (-;<br>
Let's do Cauchy first...</p>

<a name="159419375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159419375" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159419375">Patrick Massot (Feb 26 2019 at 12:16)</a>:</h4>
<blockquote>
<p>the best solution is to stop doing problem sheet questions :P</p>
</blockquote>
<p>This was also my conclusion after reading Kevin's adventures. In my course I use only exercises designed specifically for Lean.</p>

<a name="159419839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159419839" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159419839">Andrew Ashworth (Feb 26 2019 at 12:25)</a>:</h4>
<p>It is very exciting to hear about this sort of thing. So far, what do your students think of Lean and formal proofs?</p>

<a name="159420757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159420757" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159420757">Patrick Massot (Feb 26 2019 at 12:41)</a>:</h4>
<p>It's hard to say. They like to pretend things are clear in their head, but they have difficulties explaining them to the machine. But actually things are not clear in their heads, and they also don't know how to explain them on paper.</p>

<a name="159420832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/159420832" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#159420832">Patrick Massot (Feb 26 2019 at 12:43)</a>:</h4>
<p>Also I had a non-optimal start because I didn't realize how far they were from being able to understand proofs (I hadn't seen a first year student for seven years, and even back then I was teaching stuff that did not require very precise reasonning)</p>

<a name="162165893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162165893" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162165893">Scott Morrison (Mar 31 2019 at 09:28)</a>:</h4>
<p>Does</p>
<div class="codehilite"><pre><span></span>def split_on {α : Type u} [decidable_eq α] (a : α) : list α → list (list α)
</pre></div>


<p>already exist in mathlib?</p>

<a name="162165896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162165896" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162165896">Scott Morrison (Mar 31 2019 at 09:28)</a>:</h4>
<p>What about</p>
<div class="codehilite"><pre><span></span>def factor {m : Type u → Type v} [monad m] {α : Type u} : list (m α) → m (list α)
| []          := return []
| (a :: rest) := do a ← a, rest ← factor rest, return $ (a :: rest)
</pre></div>

<a name="162165987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162165987" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162165987">Scott Morrison (Mar 31 2019 at 09:31)</a>:</h4>
<p>and finally</p>
<div class="codehilite"><pre><span></span>def min {α : Type u} (l : list α) [has_lt α] [@decidable_rel α has_lt.lt] : option α := ...
</pre></div>

<a name="162166434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162166434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162166434">Mario Carneiro (Mar 31 2019 at 09:45)</a>:</h4>
<ul>
<li><code>split_on</code>: I think not, but you haven't given the definition.</li>
<li><code>factor</code>: This is <code>traverse</code> from the traversable library, as well as <code>monad.sequence</code> in core. </li>
<li><code>min</code>: Not this particular function, but you can build it with <code>fold</code> easily enough. Also I would probably have assumed an <code>le</code> not an <code>lt</code> if it were there</li>
</ul>

<a name="162166628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162166628" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162166628">Scott Morrison (Mar 31 2019 at 09:51)</a>:</h4>
<p>Do we want <code>min</code> and <code>max</code> (with <code>le</code>, I agree) in mathlib? Or should I just stick it at the point of use (needed for a tactic).</p>

<a name="162166681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162166681" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162166681">Scott Morrison (Mar 31 2019 at 09:52)</a>:</h4>
<p><code>split_on</code> was defined as</p>
<div class="codehilite"><pre><span></span>def split_on_aux {α : Type u} [decidable_eq α] (a : α) : list α → list α → list (list α)
| [] l       := [l.reverse]
| (h :: t) l := if h = a then
                  l.reverse :: (split_on_aux t [])
                else
                  split_on_aux t (h :: l)

def split_on {α : Type u} [decidable_eq α] (a : α) : list α → list (list α)
| l := split_on_aux a l []
</pre></div>

<a name="162166682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162166682" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162166682">Mario Carneiro (Mar 31 2019 at 09:52)</a>:</h4>
<p>I think <code>foldl1</code> would be good, and you could get <code>min</code> and <code>max</code> and variations easily from that</p>

<a name="162166693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162166693" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162166693">Scott Morrison (Mar 31 2019 at 09:53)</a>:</h4>
<p>With a few basic properties, can <code>split_on</code> go in the library?</p>

<a name="162166709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162166709" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162166709">Scott Morrison (Mar 31 2019 at 09:54)</a>:</h4>
<p>Sorry, what did you have in mind as <code>foldl1</code>?</p>

<a name="162166984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162166984" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162166984">Mario Carneiro (Mar 31 2019 at 10:00)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">list</span><span class="bp">.</span><span class="n">foldl1</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">option</span> <span class="n">α</span>
<span class="bp">|</span> <span class="o">[]</span>     <span class="o">:=</span> <span class="n">none</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">a</span><span class="bp">::</span><span class="n">l</span><span class="o">)</span> <span class="o">:=</span> <span class="n">some</span> <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">foldl</span> <span class="n">f</span> <span class="n">a</span> <span class="n">l</span><span class="o">)</span>

<span class="n">def</span> <span class="n">list</span><span class="bp">.</span><span class="n">foldr1</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">option</span> <span class="n">α</span>
<span class="bp">|</span> <span class="o">[]</span>     <span class="o">:=</span> <span class="n">none</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">a</span><span class="bp">::</span><span class="n">l</span><span class="o">)</span> <span class="o">:=</span>
  <span class="k">match</span> <span class="n">list</span><span class="bp">.</span><span class="n">foldr1</span> <span class="n">l</span> <span class="k">with</span>
  <span class="bp">|</span> <span class="n">none</span> <span class="o">:=</span> <span class="n">a</span>
  <span class="bp">|</span> <span class="o">(</span><span class="n">some</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">a</span> <span class="n">b</span>
  <span class="kn">end</span>
</pre></div>

<a name="162167129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162167129" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162167129">Scott Morrison (Mar 31 2019 at 10:04)</a>:</h4>
<p>Great. Why that name, though?</p>

<a name="162167130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162167130" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162167130">Mario Carneiro (Mar 31 2019 at 10:04)</a>:</h4>
<p>I think it's the haskell name</p>

<a name="162167131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162167131" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162167131">Mario Carneiro (Mar 31 2019 at 10:04)</a>:</h4>
<p>it means "fold at least one"</p>

<a name="162167152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162167152" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162167152">Mario Carneiro (Mar 31 2019 at 10:05)</a>:</h4>
<p>Here's how you can do <code>split_on</code> without the list postprocessing:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">split_on_aux</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span> <span class="bp">→</span> <span class="o">(</span><span class="n">list</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">list</span> <span class="n">α</span><span class="o">)</span> <span class="bp">→</span> <span class="n">list</span> <span class="o">(</span><span class="n">list</span> <span class="n">α</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="n">f</span>       <span class="o">:=</span> <span class="o">[</span><span class="n">f</span> <span class="o">[]]</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">h</span> <span class="bp">::</span> <span class="n">t</span><span class="o">)</span> <span class="n">f</span> <span class="o">:=</span>
  <span class="k">if</span> <span class="n">h</span> <span class="bp">=</span> <span class="n">a</span> <span class="k">then</span> <span class="n">f</span> <span class="o">[]</span> <span class="bp">::</span> <span class="n">split_on_aux</span> <span class="n">t</span> <span class="n">id</span>
  <span class="k">else</span> <span class="n">split_on_aux</span> <span class="n">t</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">l</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">h</span> <span class="bp">::</span> <span class="n">l</span><span class="o">))</span>

<span class="n">def</span> <span class="n">split_on</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">list</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">split_on_aux</span> <span class="n">a</span> <span class="n">l</span> <span class="n">id</span>
</pre></div>

<a name="162167213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162167213" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162167213">Scott Morrison (Mar 31 2019 at 10:07)</a>:</h4>
<p>ta!</p>

<a name="162167273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162167273" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162167273">Mario Carneiro (Mar 31 2019 at 10:09)</a>:</h4>
<p>It would also be nice to have the inverse operation (<code>splice</code>? <code>riffle</code>?) and prove inverse</p>

<a name="162167521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162167521" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162167521">Scott Morrison (Mar 31 2019 at 10:17)</a>:</h4>
<p>working on it :-)</p>

<a name="162167532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162167532" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162167532">Scott Morrison (Mar 31 2019 at 10:17)</a>:</h4>
<p>we already have <code>intersperse</code> in core for the inverse</p>

<a name="162167537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162167537" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162167537">Scott Morrison (Mar 31 2019 at 10:17)</a>:</h4>
<p>it's only a one sided inverse</p>

<a name="162167663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162167663" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162167663">Scott Morrison (Mar 31 2019 at 10:20)</a>:</h4>
<p>sorry, it's <code>intercalate</code>.</p>

<a name="162167664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162167664" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162167664">Scott Morrison (Mar 31 2019 at 10:20)</a>:</h4>
<div class="codehilite"><pre><span></span>lemma split_on_spec {α : Type u} [decidable_eq α] (a : α) (as : list α) :
  list.intercalate [a] (as.split_on a) = as := sorry
</pre></div>

<a name="162167817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162167817" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162167817">Mario Carneiro (Mar 31 2019 at 10:25)</a>:</h4>
<p>The inverse also holds in the other direction if you assume the intercalants have no <code>a</code></p>

<a name="162167820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162167820" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162167820">Mario Carneiro (Mar 31 2019 at 10:25)</a>:</h4>
<p>I guess there is also a <code>split_on</code> that splits with a list argument</p>

<a name="162167865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162167865" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162167865">Mario Carneiro (Mar 31 2019 at 10:26)</a>:</h4>
<p>although it's more complicated and should probably be a separate function</p>

<a name="162167869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162167869" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162167869">Mario Carneiro (Mar 31 2019 at 10:26)</a>:</h4>
<p>or even a list predicate? ok I'll stop now</p>

<a name="162168494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162168494" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162168494">Scott Morrison (Mar 31 2019 at 10:42)</a>:</h4>
<p>Yeah, proving the spec doesn't seem the easiest thing in the world, in any case.</p>

<a name="162168497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162168497" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162168497">Scott Morrison (Mar 31 2019 at 10:42)</a>:</h4>
<p>Can I PR the def separately? I really only need it for tactics at the moment. :-)</p>

<a name="162171481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162171481" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162171481">Mario Carneiro (Mar 31 2019 at 12:06)</a>:</h4>
<p>yeah, it's going in a different file anyway</p>

<a name="162171486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162171486" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162171486">Mario Carneiro (Mar 31 2019 at 12:07)</a>:</h4>
<p><code>data.list.defs</code></p>

<a name="162197645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162197645" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162197645">Scott Morrison (Mar 31 2019 at 23:40)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span>, I'm curious now --- why do you think the version of <code>split_on_aux</code> that passes a function around it better than the list postprocessing version? Is it really more efficient than call <code>list.reverse</code>? The VM still needs to evaluate all the functions you've stacked up.</p>

<a name="162197658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162197658" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162197658">Scott Morrison (Mar 31 2019 at 23:41)</a>:</h4>
<p>I'm asking because proving properties seems (likely to be?) easier with the post-processing version.</p>

<a name="162197661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162197661" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162197661">Mario Carneiro (Mar 31 2019 at 23:41)</a>:</h4>
<p>they are both linear time. It's hard to say</p>

<a name="162197712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162197712" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162197712">Mario Carneiro (Mar 31 2019 at 23:42)</a>:</h4>
<p>You can also use <code>dlist</code> instead of a <code>list -&gt; list</code> accumulator, which amounts to the same thing but has some additional constraints that are relevant for the proof</p>

<a name="162197772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162197772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162197772">Scott Morrison (Mar 31 2019 at 23:44)</a>:</h4>
<p>I see. For the sake of proofs the easiest implementation is more like: "find the position <code>n</code> of the first <code>a</code>, if there is one, then return <code>(take n) :: split_on (drop (n+1))</code>.</p>

<a name="162197775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162197775" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162197775">Scott Morrison (Mar 31 2019 at 23:44)</a>:</h4>
<p>That's also linear time, I think, although obviously with a worse constant.</p>

<a name="162197793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162197793" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162197793">Mario Carneiro (Mar 31 2019 at 23:45)</a>:</h4>
<p>I would avoid an implementation like that because of the index manipulation</p>

<a name="162197794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162197794" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162197794">Mario Carneiro (Mar 31 2019 at 23:45)</a>:</h4>
<p>(for proving things)</p>

<a name="162197841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162197841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162197841">Scott Morrison (Mar 31 2019 at 23:46)</a>:</h4>
<p>interesting, okay. In any case, I'm not planning on proving anything here; but I was considering offering it to a student.</p>

<a name="162198103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162198103" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162198103">Mario Carneiro (Mar 31 2019 at 23:54)</a>:</h4>
<p>you want to do this proof by induction on the list; you should assume in the proof that the function has the form <code>\lam r, l ++ r</code> for some <code>l</code>, and then use append assoc and stuff to proceed to the subcase in the inductive hypothesis</p>

<a name="162292945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162292945" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162292945">Scott Morrison (Apr 02 2019 at 00:44)</a>:</h4>
<div class="codehilite"><pre><span></span>-- Surely this is in the library?
lemma foo {β : Type} [add_monoid β] (x : β) (h : ∀ y, x + y = y) : x = 0 :=
by simpa using h 0
</pre></div>

<a name="162298533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162298533" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162298533">Scott Morrison (Apr 02 2019 at 02:48)</a>:</h4>
<p>And where do I find these?</p>
<div class="codehilite"><pre><span></span>lemma foo {a b : ℝ} (h : a + b = 0) (wa : a ≥ 0) (wb : b ≥ 0) : a = 0 :=
sorry
lemma turkle {a : ℝ} (h : a * a = 0) : a = 0 :=
sorry
</pre></div>

<a name="162298670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162298670" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162298670">Scott Morrison (Apr 02 2019 at 02:52)</a>:</h4>
<p>... hmm, why didn't <code>library_search</code> find <br>
<code>lemma bar {a : ℝ} : a * a ≥ 0 := mul_self_nonneg a</code></p>

<a name="162298931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162298931" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162298931">Scott Morrison (Apr 02 2019 at 02:59)</a>:</h4>
<p>I'm really struggling finding lemmas today:</p>
<div class="codehilite"><pre><span></span>lemma or.self {P : Prop} (h : P ∨ P) : P :=
by cases h; exact h
</pre></div>


<p>is surely already somewhere?</p>

<a name="162299013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162299013" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162299013">Reid Barton (Apr 02 2019 at 03:01)</a>:</h4>
<p><code>or_self</code></p>

<a name="162299089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/help%20finding%20a%20lemma/near/162299089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/30422helpfindingalemma.html#162299089">Scott Morrison (Apr 02 2019 at 03:03)</a>:</h4>
<p>ah, which you have to use as <code>(or_self _).1</code></p>


{% endraw %}
