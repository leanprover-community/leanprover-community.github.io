---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html">maximal finset in finset of finsets</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="133904539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133904539" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133904539">Bryan Gin-ge Chen (Sep 13 2018 at 18:36)</a>:</h4>
<p>Excuse the weird title. I'm trying to prove that a finset of subsets of a finset must contain an element of largest size, without relying on classical choice:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">not_empty_has_max_size</span> <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="n">finset</span> <span class="o">(</span><span class="n">finset</span> <span class="n">α</span><span class="o">)}</span> <span class="o">:</span>
<span class="n">F</span> <span class="err">⊆</span> <span class="n">powerset</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">F</span> <span class="bp">≠</span> <span class="err">∅</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">F</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">g</span> <span class="err">∈</span> <span class="n">F</span><span class="o">,</span> <span class="n">card</span> <span class="n">g</span> <span class="bp">≤</span> <span class="n">card</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>


<p>Here's my attempt so far, which seems to have taken me down a strange path:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">finset</span>

<span class="kn">variable</span> <span class="n">α</span><span class="o">:</span><span class="kt">Type</span><span class="bp">*</span>
<span class="kn">variable</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span>

<span class="kn">open</span> <span class="n">finset</span>

<span class="kn">lemma</span> <span class="n">finset</span><span class="bp">.</span><span class="n">card_one_eq</span> <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="n">card</span> <span class="n">E</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="n">a</span><span class="o">,</span> <span class="n">E</span> <span class="bp">=</span> <span class="n">finset</span><span class="bp">.</span><span class="n">singleton</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">_</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">multiset</span><span class="bp">.</span><span class="n">card_eq_one</span> <span class="n">α</span> <span class="n">E</span><span class="bp">.</span><span class="n">val</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">card</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">iff_congr</span> <span class="n">h</span><span class="o">,</span> <span class="n">exists_congr</span><span class="o">],</span>
  <span class="n">intro</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">singleton_val</span><span class="o">,</span> <span class="n">val_inj</span><span class="o">],</span>
  <span class="n">refl</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">powerset_empty</span> <span class="o">:</span> <span class="n">powerset</span> <span class="o">(</span><span class="err">∅</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="bp">=</span> <span class="n">finset</span><span class="bp">.</span><span class="n">singleton</span> <span class="err">∅</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="kn">lemma</span> <span class="n">subset_singleton</span> <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="n">finset</span> <span class="o">(</span><span class="n">finset</span> <span class="n">α</span><span class="o">)}</span> <span class="o">:</span>
<span class="n">F</span> <span class="err">⊆</span> <span class="n">finset</span><span class="bp">.</span><span class="n">singleton</span> <span class="o">(</span><span class="err">∅</span><span class="o">:</span><span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="bp">↔</span>
<span class="n">F</span> <span class="bp">=</span> <span class="err">∅</span> <span class="bp">∨</span> <span class="n">F</span> <span class="bp">=</span> <span class="n">finset</span><span class="bp">.</span><span class="n">singleton</span> <span class="err">∅</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">by_cases</span> <span class="n">h1</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">=</span> <span class="err">∅</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span> <span class="n">h1</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">=</span> <span class="n">finset</span><span class="bp">.</span><span class="n">singleton</span> <span class="err">∅</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">sorry</span>
  <span class="kn">end</span><span class="o">,</span>
  <span class="n">sorry</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">or</span><span class="bp">.</span><span class="n">elim</span> <span class="n">h</span> <span class="o">(</span><span class="k">begin</span>
    <span class="n">intro</span> <span class="n">h1</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">h1</span><span class="o">,</span>
    <span class="n">simp</span>
  <span class="kn">end</span><span class="o">)</span> <span class="o">(</span><span class="k">begin</span>
    <span class="n">intro</span> <span class="n">h1</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">h1</span><span class="o">,</span>
    <span class="n">simp</span>
  <span class="kn">end</span><span class="o">)</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">not_empty_has_max_size</span> <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="n">finset</span> <span class="o">(</span><span class="n">finset</span> <span class="n">α</span><span class="o">)}</span> <span class="o">:</span>
<span class="n">F</span> <span class="err">⊆</span> <span class="n">powerset</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">F</span> <span class="bp">≠</span> <span class="err">∅</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">F</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">g</span> <span class="err">∈</span> <span class="n">F</span><span class="o">,</span> <span class="n">card</span> <span class="n">g</span> <span class="bp">≤</span> <span class="n">card</span> <span class="n">x</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">FPE</span> <span class="n">Fne</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">E</span> <span class="kn">using</span> <span class="n">finset</span><span class="bp">.</span><span class="n">induction</span> <span class="k">with</span> <span class="n">a</span> <span class="n">E</span> <span class="n">ha</span> <span class="n">hE</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">powerset_empty</span><span class="o">,</span> <span class="n">subset_singleton</span><span class="o">]</span> <span class="n">at</span> <span class="n">FPE</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">or</span><span class="bp">.</span><span class="n">elim</span> <span class="n">FPE</span> <span class="o">(</span><span class="k">by</span> <span class="n">contradiction</span><span class="o">)</span> <span class="k">begin</span>
    <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">exists</span><span class="bp">.</span><span class="n">intro</span> <span class="err">∅</span> <span class="k">begin</span>
      <span class="n">rw</span> <span class="n">h</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">exists</span><span class="bp">.</span><span class="n">intro</span> <span class="o">(</span><span class="n">mem_singleton_self</span> <span class="err">∅</span><span class="o">)</span> <span class="o">(</span><span class="k">begin</span>
        <span class="n">intros</span> <span class="n">g</span> <span class="n">hg</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">mem_singleton</span> <span class="n">at</span> <span class="n">hg</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">hg</span>
      <span class="kn">end</span><span class="o">)</span>
    <span class="kn">end</span>
  <span class="kn">end</span><span class="o">,</span>
  <span class="n">by_cases</span> <span class="n">hh1</span> <span class="o">:</span> <span class="n">F</span> <span class="err">⊆</span> <span class="n">powerset</span> <span class="n">E</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">hE</span> <span class="n">hh1</span><span class="o">,</span>
  <span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>


<p>I'm hoping someone can point me in a smarter direction. Thanks as always!</p>

<a name="133904686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133904686" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133904686">Reid Barton (Sep 13 2018 at 18:39)</a>:</h4>
<p>Doesn't every finset of finsets contain an element of largest size, regardless of <code>E</code> and the associated condition?</p>

<a name="133904800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133904800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133904800">Bryan Gin-ge Chen (Sep 13 2018 at 18:41)</a>:</h4>
<p>Maybe, I got worried that without having some kind of bound on the size of the finsets I wouldn't be able to prove it without choice.</p>

<a name="133905022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905022">Kevin Buzzard (Sep 13 2018 at 18:44)</a>:</h4>
<p>just use finset.map (I'm assuming this exists!) on finset.card to get a finset of nats and then take the max and work your way back?</p>

<a name="133905060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905060" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905060">Reid Barton (Sep 13 2018 at 18:45)</a>:</h4>
<p>A finset is basically a list, and you could write a program that takes a list of lists and returns one of the maximum length, so there should be no trouble proving it constructively.</p>

<a name="133905178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905178" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905178">Reid Barton (Sep 13 2018 at 18:47)</a>:</h4>
<p>Yeah, I was looking for a function on finset which is max after applying a function, but I guess since nat has decidable equality you can use <code>finset.map</code> in this case.</p>

<a name="133905214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905214" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905214">Reid Barton (Sep 13 2018 at 18:47)</a>:</h4>
<p>Sorry, not <code>finset.map</code> but <code>finset.image</code>.</p>

<a name="133905271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905271" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905271">Chris Hughes (Sep 13 2018 at 18:48)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">not_empty_has_max_size</span> <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="n">finset</span> <span class="o">(</span><span class="n">finset</span> <span class="n">α</span><span class="o">)}</span> <span class="o">:</span>
<span class="n">F</span> <span class="err">⊆</span> <span class="n">powerset</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">F</span> <span class="bp">≠</span> <span class="err">∅</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">F</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">g</span> <span class="err">∈</span> <span class="n">F</span><span class="o">,</span> <span class="n">card</span> <span class="n">g</span> <span class="bp">≤</span> <span class="n">card</span> <span class="n">x</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="bp">_</span> <span class="n">h</span><span class="o">,</span> <span class="k">let</span> <span class="bp">⟨</span><span class="n">n</span><span class="o">,</span> <span class="n">hn</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="o">(</span><span class="n">max_of_ne_empty</span> <span class="o">(</span><span class="n">mt</span> <span class="n">image_eq_empty</span><span class="bp">.</span><span class="mi">1</span> <span class="n">h</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">a</span><span class="o">,</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">finset</span><span class="bp">.</span><span class="n">max</span> <span class="o">(</span><span class="n">F</span><span class="bp">.</span><span class="n">image</span> <span class="n">card</span><span class="o">))</span> <span class="k">in</span>
<span class="k">let</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx₁</span><span class="o">,</span> <span class="n">hx₂</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">mem_image</span><span class="bp">.</span><span class="mi">1</span> <span class="o">(</span><span class="n">mem_of_max</span> <span class="n">hn</span><span class="o">)</span> <span class="k">in</span>
<span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx₁</span><span class="o">,</span> <span class="n">hx₂</span><span class="bp">.</span><span class="n">symm</span> <span class="bp">▸</span> <span class="bp">λ</span> <span class="n">g</span> <span class="n">hg</span><span class="o">,</span> <span class="n">le_max_of_mem</span> <span class="o">(</span><span class="n">mem_image</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">⟨</span><span class="n">g</span><span class="o">,</span> <span class="n">hg</span><span class="o">,</span> <span class="n">rfl</span><span class="bp">⟩</span><span class="o">)</span> <span class="n">hn</span><span class="bp">⟩</span>
</pre></div>

<a name="133905289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905289" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905289">Bryan Gin-ge Chen (Sep 13 2018 at 18:48)</a>:</h4>
<p>Wow, thanks!</p>

<a name="133905350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905350" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905350">Mario Carneiro (Sep 13 2018 at 18:49)</a>:</h4>
<p>That uses decidable_eq, doesn't it?</p>

<a name="133905394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905394">Kevin Buzzard (Sep 13 2018 at 18:50)</a>:</h4>
<p>rofl</p>

<a name="133905407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905407" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905407">Mario Carneiro (Sep 13 2018 at 18:50)</a>:</h4>
<p>My suggestion:</p>
<div class="codehilite"><pre><span></span>import data.finset

section
variables {α : Type*} (r : α → α → Prop) [is_preorder α r]
local infix ` ≼ `:50 := r

theorem list_zorn : ∀ l : list α, l ≠ [] → ∃ a ∈ l, ∀ b, a ≼ b → b ≼ a := sorry
theorem finset_zorn : ∀ s : finset α, s ≠ ∅ → ∃ a ∈ s, ∀ b, a ≼ b → b ≼ a := sorry

end
</pre></div>

<a name="133905415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905415" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905415">Bryan Gin-ge Chen (Sep 13 2018 at 18:50)</a>:</h4>
<p>I would have never thought of using finset.image. And yes, decidable_eq is allowed.</p>

<a name="133905436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905436" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905436">Mario Carneiro (Sep 13 2018 at 18:50)</a>:</h4>
<p>here the relation is <code>card s &lt;= card t</code> on finsets</p>

<a name="133905447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905447" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905447">Kenny Lau (Sep 13 2018 at 18:51)</a>:</h4>
<blockquote>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">not_empty_has_max_size</span> <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="n">finset</span> <span class="o">(</span><span class="n">finset</span> <span class="n">α</span><span class="o">)}</span> <span class="o">:</span>
<span class="n">F</span> <span class="err">⊆</span> <span class="n">powerset</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">F</span> <span class="bp">≠</span> <span class="err">∅</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">F</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">g</span> <span class="err">∈</span> <span class="n">F</span><span class="o">,</span> <span class="n">card</span> <span class="n">g</span> <span class="bp">≤</span> <span class="n">card</span> <span class="n">x</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="bp">_</span> <span class="n">h</span><span class="o">,</span> <span class="k">let</span> <span class="bp">⟨</span><span class="n">n</span><span class="o">,</span> <span class="n">hn</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="o">(</span><span class="n">max_of_ne_empty</span> <span class="o">(</span><span class="n">mt</span> <span class="n">image_eq_empty</span><span class="bp">.</span><span class="mi">1</span> <span class="n">h</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">a</span><span class="o">,</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">finset</span><span class="bp">.</span><span class="n">max</span> <span class="o">(</span><span class="n">F</span><span class="bp">.</span><span class="n">image</span> <span class="n">card</span><span class="o">))</span> <span class="k">in</span>
<span class="k">let</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx₁</span><span class="o">,</span> <span class="n">hx₂</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">mem_image</span><span class="bp">.</span><span class="mi">1</span> <span class="o">(</span><span class="n">mem_of_max</span> <span class="n">hn</span><span class="o">)</span> <span class="k">in</span>
<span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx₁</span><span class="o">,</span> <span class="n">hx₂</span><span class="bp">.</span><span class="n">symm</span> <span class="bp">▸</span> <span class="bp">λ</span> <span class="n">g</span> <span class="n">hg</span><span class="o">,</span> <span class="n">le_max_of_mem</span> <span class="o">(</span><span class="n">mem_image</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">⟨</span><span class="n">g</span><span class="o">,</span> <span class="n">hg</span><span class="o">,</span> <span class="n">rfl</span><span class="bp">⟩</span><span class="o">)</span> <span class="n">hn</span><span class="bp">⟩</span>
</pre></div>


</blockquote>
<p>what is the role of E in your theorem?</p>

<a name="133905450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905450" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905450">Kevin Buzzard (Sep 13 2018 at 18:51)</a>:</h4>
<p>you can just prove this using the zorn in mathlib</p>

<a name="133905467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905467" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905467">Mario Carneiro (Sep 13 2018 at 18:51)</a>:</h4>
<p>of course, but this (1) doesn't use nonconstructive axioms and (2) doesn't need the chain condition</p>

<a name="133905518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905518" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905518">Bryan Gin-ge Chen (Sep 13 2018 at 18:52)</a>:</h4>
<p>If E is unnecessary here all the better. In the "application", it's the ground set of a matroid.</p>

<a name="133905536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905536" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905536">Reid Barton (Sep 13 2018 at 18:52)</a>:</h4>
<p><code>decidable_eq nat</code> doesn't use axioms either</p>

<a name="133905569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905569">Mario Carneiro (Sep 13 2018 at 18:53)</a>:</h4>
<p>yes, but the theorem can be proven constructively without that assumption</p>

<a name="133905579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905579" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905579">Reid Barton (Sep 13 2018 at 18:53)</a>:</h4>
<p>Yeah, the max/min stuff should be on multisets.</p>

<a name="133905596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905596">Mario Carneiro (Sep 13 2018 at 18:54)</a>:</h4>
<p>Unfortunately, here max/min don't work directly since it's not a poset</p>

<a name="133905633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905633" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905633">Kenny Lau (Sep 13 2018 at 18:54)</a>:</h4>
<p>you can have zorn on a set (i.e. type) S as long as you have a choice function on P(P(S))\{{}}, right</p>

<a name="133905662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905662">Mario Carneiro (Sep 13 2018 at 18:54)</a>:</h4>
<p>yes, but we don't have that here and I claim it's still provable</p>

<a name="133905694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905694" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905694">Kenny Lau (Sep 13 2018 at 18:55)</a>:</h4>
<p>sure</p>

<a name="133905726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905726" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905726">Reid Barton (Sep 13 2018 at 18:55)</a>:</h4>
<p>I mean we should just define <code>max</code> for a set in the same style as <code>prod</code>, in terms of <code>max</code> on multiset, and nat is already a decidable linear whatever so there would be no problem there.</p>
<div class="codehilite"><pre><span></span><span class="kn">protected</span> <span class="n">def</span> <span class="n">prod</span> <span class="o">[</span><span class="n">comm_monoid</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">β</span> <span class="o">:=</span> <span class="o">(</span><span class="n">s</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">prod</span>
</pre></div>

<a name="133905781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905781" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905781">Mario Carneiro (Sep 13 2018 at 18:56)</a>:</h4>
<p>what is this about <code>nat</code>? I don't see it in the question</p>

<a name="133905798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905798" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905798">Reid Barton (Sep 13 2018 at 18:56)</a>:</h4>
<p><code>nat</code> is the codomain of <code>finset.card</code> (I assume)</p>

<a name="133905829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905829" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905829">Mario Carneiro (Sep 13 2018 at 18:57)</a>:</h4>
<p>sure but that doesn't really matter; we are doing the choosing on <code>finset A</code> which is not decidable (unless you assume so)</p>

<a name="133905887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905887" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905887">Mario Carneiro (Sep 13 2018 at 18:58)</a>:</h4>
<p>all that decidability of nat gives you is decidability of the relation <code>≼</code> given by <code>s ≼ t ↔ card s ≤ card t</code></p>

<a name="133905902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905902" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905902">Kenny Lau (Sep 13 2018 at 18:58)</a>:</h4>
<p>I guess Kevin ran away from all this decidable nonsense :P</p>

<a name="133905936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133905936" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133905936">Reid Barton (Sep 13 2018 at 18:59)</a>:</h4>
<p>I'm a bit confused.<br>
All I am saying is that the original thing should be a direct conclusion of some lemma about <code>max</code> of a <code>multiset nat</code>, applied to <code>F.1.map finset.card</code>.</p>

<a name="133906034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133906034" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133906034">Reid Barton (Sep 13 2018 at 19:00)</a>:</h4>
<p>That lemma being the analogue for multisets of <code>finset.max_of_ne_empty</code> and <code>finset.le_max_of_mem</code></p>

<a name="133906232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133906232" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133906232">Reid Barton (Sep 13 2018 at 19:03)</a>:</h4>
<p>But I guess maybe <code>decidable_linear_order</code> is stronger than <code>decidable_eq</code> anyways, so it doesn't really matter.</p>

<a name="133906443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133906443" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133906443">Mario Carneiro (Sep 13 2018 at 19:07)</a>:</h4>
<p>the point is this isn't a question about decidable linear orders, but decidable preorders. Lack of uniqueness of the maximum makes it hard to define a function like <code>max</code> directly</p>

<a name="133906534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133906534" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133906534">Reid Barton (Sep 13 2018 at 19:08)</a>:</h4>
<p>You mean something like a "pre-total order"?</p>

<a name="133906805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133906805" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133906805">Mario Carneiro (Sep 13 2018 at 19:13)</a>:</h4>
<p><code>is_total_preorder</code> exists in core btw</p>

<a name="133906808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133906808" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133906808">Mario Carneiro (Sep 13 2018 at 19:13)</a>:</h4>
<p>but totality is not needed</p>

<a name="133906861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133906861" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133906861">Reid Barton (Sep 13 2018 at 19:14)</a>:</h4>
<p>Finding the maximum value of a function on a finite set is a pretty standard thing to do. Of course there might not be a unique element of the set which maximizes the function, but the maximum value of the function is still well-defined. And often you only need some statement about the existence of a maximizing element.<br>
It's not very obvious how you're supposed to get this from only the ability to take the maximum element of a finite set (in a totally ordered type).</p>

<a name="133906917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133906917" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133906917">Mario Carneiro (Sep 13 2018 at 19:15)</a>:</h4>
<p>like kenny and chris have shown, you can take the image of the finset and get the maximum</p>

<a name="133906965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133906965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133906965">Mario Carneiro (Sep 13 2018 at 19:16)</a>:</h4>
<p>unless you care about  constructivity and then you have to prove it from scratch</p>

<a name="133906991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133906991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133906991">Mario Carneiro (Sep 13 2018 at 19:17)</a>:</h4>
<p>that works in any total preorder</p>

<a name="133907005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133907005" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133907005">Mario Carneiro (Sep 13 2018 at 19:17)</a>:</h4>
<p>in a partial order, I don't see any easy way to get it except zorn's lemma</p>

<a name="133907255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133907255" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133907255">Kenny Lau (Sep 13 2018 at 19:22)</a>:</h4>
<blockquote>
<p>like kenny and chris have shown, you can take the image of the finset and get the maximum</p>
</blockquote>
<p>I don't think I did anything</p>

<a name="133907303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133907303" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133907303">Bryan Gin-ge Chen (Sep 13 2018 at 19:23)</a>:</h4>
<p>I care a little bit about constructivity, but maybe I'll see how far I can get with Chris's solution first.</p>

<a name="133909339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/maximal%20finset%20in%20finset%20of%20finsets/near/133909339" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/73892maximalfinsetinfinsetoffinsets.html#133909339">Mario Carneiro (Sep 13 2018 at 19:56)</a>:</h4>
<p>oops, I didn't see that you just quoted chris's solution</p>


{% endraw %}
