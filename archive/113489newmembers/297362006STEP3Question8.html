---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/297362006STEP3Question8.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html">2006 STEP 3 Question 8</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="191428689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191428689" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191428689">Shing Tak Lam (Mar 23 2020 at 02:53)</a>:</h4>
<p>Hello, I was trying to formalise my solution to this question in lean, but I'm getting an error saying the my result contains meta variables.</p>
<p><a href="/user_uploads/3121/NpKPUg0_Ezuhw9BAE65pN-xW/image.png" target="_blank" title="image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/3121/NpKPUg0_Ezuhw9BAE65pN-xW/image.png" target="_blank" title="image.png"><img src="/user_uploads/3121/NpKPUg0_Ezuhw9BAE65pN-xW/image.png"></a></div><p>So far I have</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">polynomial</span>
       <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">open</span> <span class="n">polynomial</span>

<span class="kn">variable</span> <span class="err">Δ</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">polynomial</span> <span class="n">ℝ</span>
<span class="kn">variables</span> <span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">ℝ</span>
<span class="kn">variable</span> <span class="n">k</span> <span class="o">:</span> <span class="n">ℝ</span>

<span class="kn">axiom</span> <span class="err">Δ</span><span class="mi">1</span> <span class="o">:</span> <span class="err">Δ</span> <span class="n">X</span> <span class="bp">=</span> <span class="n">C</span> <span class="mi">1</span>
<span class="kn">axiom</span> <span class="err">Δ</span><span class="mi">2</span> <span class="o">:</span> <span class="err">Δ</span><span class="o">(</span><span class="n">f</span> <span class="bp">+</span> <span class="n">g</span><span class="o">)</span> <span class="bp">=</span> <span class="err">Δ</span> <span class="n">f</span> <span class="bp">+</span> <span class="err">Δ</span> <span class="n">g</span>
<span class="kn">axiom</span> <span class="err">Δ</span><span class="mi">3</span> <span class="o">:</span> <span class="err">Δ</span><span class="o">(</span><span class="n">C</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">f</span><span class="o">)</span> <span class="bp">=</span> <span class="n">C</span> <span class="n">k</span> <span class="bp">*</span> <span class="err">Δ</span> <span class="n">f</span>
<span class="kn">axiom</span> <span class="err">Δ</span><span class="mi">4</span> <span class="o">:</span> <span class="err">Δ</span><span class="o">(</span><span class="n">f</span> <span class="bp">*</span> <span class="n">g</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="bp">*</span> <span class="err">Δ</span> <span class="n">g</span> <span class="bp">+</span> <span class="n">g</span> <span class="bp">*</span> <span class="err">Δ</span> <span class="n">f</span>

<span class="kn">lemma</span> <span class="err">Δ</span><span class="n">Xcubed</span> <span class="o">:</span> <span class="err">Δ</span> <span class="o">(</span><span class="n">X</span><span class="err">^</span><span class="mi">3</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">3</span><span class="bp">*</span><span class="n">X</span><span class="err">^</span><span class="mi">2</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="n">X</span><span class="err">^</span><span class="mi">3</span> <span class="bp">=</span> <span class="n">X</span> <span class="bp">*</span> <span class="n">X</span><span class="err">^</span><span class="mi">2</span> <span class="o">:=</span> <span class="k">begin</span>
        <span class="k">have</span> <span class="n">h11</span> <span class="o">:</span> <span class="mi">3</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">rfl</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">h11</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
    <span class="kn">end</span> <span class="c1">-- Error Here</span>
<span class="kn">end</span>
</pre></div>


<p>I've highlighted where the error is occuring, the error message is</p>
<div class="codehilite"><pre><span></span>tactic failed, result contains meta-variables
state:
no goals
state:
6 goals
Δ : polynomial ℝ → polynomial ℝ
⊢ Δ (X ^ 3) = 3 * X ^ 2

Δ : polynomial ℝ → polynomial ℝ
⊢ Type ?

Δ : polynomial ℝ → polynomial ℝ
⊢ comm_semiring ?m_1

Δ : polynomial ℝ → polynomial ℝ
⊢ has_pow (polynomial ?m_1) ℕ

Δ : polynomial ℝ → polynomial ℝ
⊢ has_mul (polynomial ?m_1)

Δ : polynomial ℝ → polynomial ℝ
⊢ has_pow (polynomial ?m_1) ℕ
</pre></div>


<p>I think I know why the error is occurring, as I didn't specify the type of X, so lean doesn't know that it has <code>pow</code> <code>mul</code>, etc. But I'm not sure how or where I could add the type annotations?</p>
<p>Also, when I use the axioms, <code>rw \Delta4</code> doesn't work, I need to specify <code>rw \Delta4 \Delta</code>. Making <code>\Delta</code> a <code>constant</code> fixes this, but then it still doesn't fix the error message above. In this case, should <code>\Delta</code> be <code>variable</code> or <code>constant</code>? Since I don't care what <code>Delta</code> is, as long as it satisfies those axioms.</p>

<a name="191428856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191428856" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191428856">Mario Carneiro (Mar 23 2020 at 02:59)</a>:</h4>
<p>those <code>axiom</code>s should be <code>variable</code>s. If you make them <code>axiom</code>s then they will implicitly quantify over all Delta, meaning that you are adding an axiom to lean that says that all functions are derivations. Since this is false, the axiom will make lean inconsistent</p>

<a name="191428924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191428924" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191428924">Yury G. Kudryashov (Mar 23 2020 at 03:01)</a>:</h4>
<p>And you probably want to <code>include</code> all these variables so that they will be available in tactic proofs.</p>

<a name="191429984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191429984" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191429984">Shing Tak Lam (Mar 23 2020 at 03:30)</a>:</h4>
<p>Alright thank you, I've edited it with your suggestions. However, I still have an issue with the <code>results contains meta-variables</code>.</p>

<a name="191430060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191430060" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191430060">Yury G. Kudryashov (Mar 23 2020 at 03:33)</a>:</h4>
<p>Can't help without looking at your code...</p>

<a name="191430169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191430169" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191430169">Shing Tak Lam (Mar 23 2020 at 03:36)</a>:</h4>
<p>Apologies. The error message is basically the same after changing the <code>axioms</code> to <code>variables</code>. I've also changed <code>f</code> <code>g</code> and <code>k</code> to be in <code>forall</code>s instead of <code>variables</code>.</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">polynomial</span>
       <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">open</span> <span class="n">polynomial</span>

<span class="kn">variable</span> <span class="err">Δ</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">polynomial</span> <span class="n">ℝ</span>
<span class="n">include</span> <span class="err">Δ</span>

<span class="kn">variable</span> <span class="err">Δ</span><span class="mi">1</span> <span class="o">:</span> <span class="err">Δ</span> <span class="n">X</span> <span class="bp">=</span> <span class="n">C</span> <span class="mi">1</span>
<span class="kn">variable</span> <span class="err">Δ</span><span class="mi">2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">Δ</span><span class="o">(</span><span class="n">f</span> <span class="bp">+</span> <span class="n">g</span><span class="o">)</span> <span class="bp">=</span> <span class="err">Δ</span> <span class="n">f</span> <span class="bp">+</span> <span class="err">Δ</span> <span class="n">g</span>
<span class="kn">variable</span> <span class="err">Δ</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">Δ</span><span class="o">(</span><span class="n">C</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">f</span><span class="o">)</span> <span class="bp">=</span> <span class="n">C</span> <span class="n">k</span> <span class="bp">*</span> <span class="err">Δ</span> <span class="n">f</span>
<span class="kn">variable</span> <span class="err">Δ</span><span class="mi">4</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">Δ</span><span class="o">(</span><span class="n">f</span> <span class="bp">*</span> <span class="n">g</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="bp">*</span> <span class="err">Δ</span> <span class="n">g</span> <span class="bp">+</span> <span class="n">g</span> <span class="bp">*</span> <span class="err">Δ</span> <span class="n">f</span>
<span class="n">include</span> <span class="err">Δ</span><span class="mi">1</span> <span class="err">Δ</span><span class="mi">2</span> <span class="err">Δ</span><span class="mi">3</span> <span class="err">Δ</span><span class="mi">4</span>

<span class="kn">lemma</span> <span class="err">Δ</span><span class="n">Xcubed</span> <span class="o">:</span> <span class="err">Δ</span> <span class="o">(</span><span class="n">X</span><span class="err">^</span><span class="mi">3</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">3</span><span class="bp">*</span><span class="n">X</span><span class="err">^</span><span class="mi">2</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="n">X</span><span class="err">^</span><span class="mi">3</span> <span class="bp">=</span> <span class="n">X</span> <span class="bp">*</span> <span class="n">X</span><span class="err">^</span><span class="mi">2</span> <span class="o">:=</span> <span class="k">begin</span>
        <span class="k">have</span> <span class="n">h11</span> <span class="o">:</span> <span class="mi">3</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">rfl</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">h11</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
    <span class="kn">end</span> <span class="c1">-- ERROR HERE</span>
<span class="kn">end</span>
</pre></div>

<a name="191430235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191430235" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191430235">Shing Tak Lam (Mar 23 2020 at 03:38)</a>:</h4>
<p>Nevermind, I've figured it out. I needed to add the type annotation in the inner <code>have</code> statement, as the <code>X</code> in the inner statement is different to the one in the theorem statement.</p>

<a name="191430314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191430314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191430314">Mario Carneiro (Mar 23 2020 at 03:41)</a>:</h4>
<p>you can prove <code>h1</code> <code>by ring</code></p>

<a name="191430567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191430567" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191430567">Shing Tak Lam (Mar 23 2020 at 03:49)</a>:</h4>
<p>Alright, Thanks!</p>

<a name="191437728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191437728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191437728">Kevin Buzzard (Mar 23 2020 at 07:07)</a>:</h4>
<p>Did you try <code>recover</code>?</p>
<p>This is a great question for Lean!</p>

<a name="191439857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191439857" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191439857">Kevin Buzzard (Mar 23 2020 at 07:45)</a>:</h4>
<p>I think you might be better off proving <code>lemma Δ_one : Δ 1 = 0</code> first, and then <code>lemma ΔX_pow_succ (n : ℕ) : Δ (X ^ (n + 1)) = (n + 1) * X ^ n</code></p>

<a name="191440006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191440006" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191440006">Shing Tak Lam (Mar 23 2020 at 07:47)</a>:</h4>
<p>I'm sorry, but I'm not sure what you mean by using <code>recover</code>.</p>

<a name="191440011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191440011" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191440011">Shing Tak Lam (Mar 23 2020 at 07:47)</a>:</h4>
<p>I've already proved that <code>\Delta c = 0</code> for all <code>c</code>.</p>

<a name="191440016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191440016" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191440016">Shing Tak Lam (Mar 23 2020 at 07:47)</a>:</h4>
<p>I've already proved that <code>\Delta c = 0</code> for all <code>c</code>.</p>

<a name="191440017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191440017" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191440017">Shing Tak Lam (Mar 23 2020 at 07:47)</a>:</h4>
<p>I'm sorry, but I'm not sure what you mean by using <code>recover</code>.</p>

<a name="191440105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191440105" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191440105">Shing Tak Lam (Mar 23 2020 at 07:48)</a>:</h4>
<p>And I did prove the general case of <code>X^n</code>, although I used <code>X^n</code> and not <code>X^(n+1)</code>, which had an interesting base case</p>

<a name="191440120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191440120" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191440120">Kevin Buzzard (Mar 23 2020 at 07:48)</a>:</h4>
<p>Oh, <code>recover</code> was when your goal contained metavariables.</p>

<a name="191440127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191440127" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191440127">Shing Tak Lam (Mar 23 2020 at 07:48)</a>:</h4>
<p>Ah. I see</p>

<a name="191440158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191440158" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191440158">Kevin Buzzard (Mar 23 2020 at 07:49)</a>:</h4>
<p>The problem with <code>X^n</code> directly is that when n=1 the inductive hypothesis involves 0 - 1 so has to be dealt with as a special case.</p>

<a name="191440281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191440281" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191440281">Shing Tak Lam (Mar 23 2020 at 07:50)</a>:</h4>
<p>Yeah, when I was doing this question for STEP prep I thought it would be interesting to do in lean, as the steps revolved around these 4 rules. Now that no one even knows what's gonna happen with A Levels/STEP I had a bit of free time so I thought I'd give it a shot in Lean.</p>

<a name="191440307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191440307" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191440307">Kevin Buzzard (Mar 23 2020 at 07:51)</a>:</h4>
<p>My son is in the same position -- sitting on a Cambridge offer with no idea what's going to happen next.</p>

<a name="191440312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191440312" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191440312">Shing Tak Lam (Mar 23 2020 at 07:51)</a>:</h4>
<p>That makes sense, I did it on paper first and tried a direct translation. In retrospect <code>X^(n+1)</code> makes more sense. I'm gonna refactor it.</p>

<a name="191440393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191440393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191440393">Shing Tak Lam (Mar 23 2020 at 07:52)</a>:</h4>
<p>Yeah, Cambridge sent out an email like hours before the Government announcement, which wasn't that helpful.</p>
<p>(Not that any of my other Universities seem to know what is happening, do you know anything about Imperial?)</p>

<a name="191440417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191440417" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191440417">Kevin Buzzard (Mar 23 2020 at 07:52)</a>:</h4>
<p>No decisions have been made yet.</p>

<a name="191440466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191440466" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191440466">Shing Tak Lam (Mar 23 2020 at 07:53)</a>:</h4>
<p>Alright. Just that they haven't said anything since January, which was slightly worrying.</p>

<a name="191440477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191440477" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191440477">Shing Tak Lam (Mar 23 2020 at 07:53)</a>:</h4>
<p>Thank you very much for all of your help</p>

<a name="191442595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191442595" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191442595">Kevin Buzzard (Mar 23 2020 at 08:17)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="err">Δ</span><span class="bp">_</span><span class="n">one</span> <span class="o">:</span> <span class="err">Δ</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="c1">-- the standard trick</span>
  <span class="n">suffices</span> <span class="n">H</span> <span class="o">:</span> <span class="err">Δ</span> <span class="mi">1</span> <span class="bp">+</span> <span class="err">Δ</span> <span class="mi">1</span> <span class="bp">=</span> <span class="err">Δ</span> <span class="mi">1</span><span class="o">,</span>
    <span class="n">rwa</span> <span class="n">add_left_eq_self</span> <span class="n">at</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">conv</span> <span class="k">begin</span> <span class="n">to_rhs</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">,</span> <span class="k">by</span> <span class="n">ring</span><span class="o">),</span>
  <span class="kn">end</span><span class="o">,</span>
  <span class="n">rw</span> <span class="err">Δ</span><span class="mi">4</span><span class="o">,</span>
  <span class="n">ring</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="err">Δ</span><span class="n">X_pow_succ</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="err">Δ</span> <span class="o">(</span><span class="n">X</span> <span class="err">^</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">X</span> <span class="err">^</span> <span class="n">n</span> <span class="o">:=</span> <span class="k">begin</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">d</span> <span class="n">hd</span><span class="o">,</span>
  <span class="o">{</span> <span class="c1">-- base case</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">pow_one</span><span class="o">,</span> <span class="err">Δ</span><span class="mi">1</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_zero</span><span class="o">],</span>
    <span class="n">ring</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ_eq_add_one</span><span class="o">,</span> <span class="n">pow_succ</span><span class="o">,</span> <span class="err">Δ</span><span class="mi">4</span><span class="o">,</span> <span class="err">Δ</span><span class="mi">1</span><span class="o">,</span> <span class="n">hd</span><span class="o">,</span> <span class="n">pow_succ</span><span class="o">,</span>
    <span class="n">nat</span><span class="bp">.</span><span class="n">cast_add</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_one</span><span class="o">],</span>
  <span class="n">ring</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="191442980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191442980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191442980">Kevin Buzzard (Mar 23 2020 at 08:22)</a>:</h4>
<p>It helps a lot knowing what <code>ring</code> can and cannot do.</p>

<a name="191443660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191443660" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191443660">Shing Tak Lam (Mar 23 2020 at 08:31)</a>:</h4>
<p>Again, thank you very much.</p>
<p>This (once again) reminds me I should probably read TPIL. <code>show</code> is nicer than what I've been doing, which is <code>have</code> then <code>rw</code>, which clutters up my local context a lot, and I end up with a lot of local hypotheses which are only used once.</p>
<p>For the final part of the question, the proof that <code>\Delta f = df/dx</code> for all polynomial <code>f</code>, I did it (on paper) by arguing that it's true for a polynomial of degree 1 (and 0), and then using induction, assuming that it is true for a polynomial of degree <code>n</code> then showing that it's true for a polynomial of degree <code>n+1</code>, therefore it is true for all polynomials. I've tried looking in <code>data.polynomial</code>, but I don't think I've seen this functionality in there. So I might have to do it another way.</p>
<p>I'm gonna look <code>ring</code> (and probably what a ring is first).</p>

<a name="191445632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191445632" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191445632">Mario Carneiro (Mar 23 2020 at 08:54)</a>:</h4>
<p>This is just induction on natural numbers</p>

<a name="191445654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191445654" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191445654">Mario Carneiro (Mar 23 2020 at 08:55)</a>:</h4>
<p>I'm pretty sure there is a <code>degree</code> function on polynomials</p>

<a name="191445784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191445784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191445784">Mario Carneiro (Mar 23 2020 at 08:56)</a>:</h4>
<p>The question I have about this problem is, do we have the definition of the derivative of a polynomial yet? Do we know it is a polynomial? I'm not sure how you intend to write the theorem statement</p>

<a name="191446014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191446014" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191446014">Johan Commelin (Mar 23 2020 at 08:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/tactic.20failed.2C.20result.20contains.20meta-variables/near/191445654" title="#narrow/stream/113489-new-members/topic/tactic.20failed.2C.20result.20contains.20meta-variables/near/191445654">said</a>:</p>
<blockquote>
<p>I'm pretty sure there is a <code>degree</code> function on polynomials</p>
</blockquote>
<p>Yes, and there is also <code>nat_degree</code> which is a natural number. (<code>degree 0</code> is not natural)</p>

<a name="191446029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191446029" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191446029">Shing Tak Lam (Mar 23 2020 at 08:59)</a>:</h4>
<p>So induction on <code>degree p</code> where <code>p</code> is the polynomial? The <code>degree</code> function returns an <code>option nat</code> though, so I'll have to look at that further.</p>
<p>I haven't written it yet, but there is a <code>polynomial.derivative</code> function, so I think it'll just be <code>forall (p : polynomial R), derivative p = \Delta p</code>.</p>

<a name="191446077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191446077" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191446077">Johan Commelin (Mar 23 2020 at 08:59)</a>:</h4>
<p>We have the formal derivative of a polynomial, and also a proof that as a function it coincides with the analytical derivative (if you work over a normed field or something)</p>

<a name="191446104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191446104" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191446104">Mario Carneiro (Mar 23 2020 at 08:59)</a>:</h4>
<p>nice</p>

<a name="191448394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191448394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191448394">Sebastien Gouezel (Mar 23 2020 at 09:26)</a>:</h4>
<p>There is a function <code>polynomial.induction_on</code> that is designed precisely for this kind of induction. You can for instance have a look at <code>analysis/calculus/deriv</code>, line 1116.</p>

<a name="191449291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191449291" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191449291">Shing Tak Lam (Mar 23 2020 at 09:36)</a>:</h4>
<p>Ok. Thank you all very much. I'll give that a shot when I have some more time to look at this.</p>

<a name="191461493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191461493" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191461493">Shing Tak Lam (Mar 23 2020 at 11:43)</a>:</h4>
<p>I've had some free time just then and I tried Kevin's solution from above. However when i pasted it into lean I got a <code>(deterministic) timeout</code>. Seems like the <code>ring</code>s are taking too long. I doubt my laptop is too slow, but that is a possibility.</p>
<p>Any suggestions to how I can fix this?</p>

<a name="191461621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191461621" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191461621">Mario Carneiro (Mar 23 2020 at 11:44)</a>:</h4>
<p><code>ring</code> performs very fast on almost all not-contrived examples, so that's not likely to be the problem</p>

<a name="191461651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191461651" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191461651">Mario Carneiro (Mar 23 2020 at 11:44)</a>:</h4>
<p>it could be typeclass inference or something else</p>

<a name="191461659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191461659" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191461659">Mario Carneiro (Mar 23 2020 at 11:44)</a>:</h4>
<p>code plz</p>

<a name="191461833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191461833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191461833">Shing Tak Lam (Mar 23 2020 at 11:47)</a>:</h4>
<p>Minimum Working Example</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">polynomial</span>
       <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>
       <span class="n">tactic</span>

<span class="kn">open</span> <span class="n">polynomial</span>

<span class="kn">variable</span> <span class="err">Δ</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">polynomial</span> <span class="n">ℝ</span>
<span class="n">include</span> <span class="err">Δ</span>

<span class="kn">variable</span> <span class="err">Δ</span><span class="mi">1</span> <span class="o">:</span> <span class="err">Δ</span> <span class="n">X</span> <span class="bp">=</span> <span class="n">C</span> <span class="mi">1</span>
<span class="kn">variable</span> <span class="err">Δ</span><span class="mi">2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">Δ</span><span class="o">(</span><span class="n">f</span> <span class="bp">+</span> <span class="n">g</span><span class="o">)</span> <span class="bp">=</span> <span class="err">Δ</span> <span class="n">f</span> <span class="bp">+</span> <span class="err">Δ</span> <span class="n">g</span>
<span class="kn">variable</span> <span class="err">Δ</span><span class="mi">3</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">Δ</span><span class="o">(</span><span class="n">C</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">f</span><span class="o">)</span> <span class="bp">=</span> <span class="n">C</span> <span class="n">k</span> <span class="bp">*</span> <span class="err">Δ</span> <span class="n">f</span>
<span class="kn">variable</span> <span class="err">Δ</span><span class="mi">4</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">ℝ</span><span class="o">),</span> <span class="err">Δ</span><span class="o">(</span><span class="n">f</span> <span class="bp">*</span> <span class="n">g</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="bp">*</span> <span class="err">Δ</span> <span class="n">g</span> <span class="bp">+</span> <span class="n">g</span> <span class="bp">*</span> <span class="err">Δ</span> <span class="n">f</span>
<span class="n">include</span> <span class="err">Δ</span><span class="mi">1</span> <span class="err">Δ</span><span class="mi">2</span> <span class="err">Δ</span><span class="mi">3</span> <span class="err">Δ</span><span class="mi">4</span>

<span class="kn">lemma</span> <span class="err">Δ</span><span class="n">Xn</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="err">Δ</span> <span class="o">(</span><span class="n">X</span><span class="err">^</span><span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="n">X</span><span class="err">^</span><span class="n">n</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">d</span> <span class="n">hd</span><span class="o">,</span>
  <span class="o">{</span> <span class="c1">-- base case</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">pow_one</span><span class="o">,</span> <span class="err">Δ</span><span class="mi">1</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_zero</span><span class="o">],</span>
    <span class="n">ring</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ_eq_add_one</span><span class="o">,</span> <span class="n">pow_succ</span><span class="o">,</span> <span class="err">Δ</span><span class="mi">4</span><span class="o">,</span> <span class="err">Δ</span><span class="mi">1</span><span class="o">,</span> <span class="n">hd</span><span class="o">,</span> <span class="n">pow_succ</span><span class="o">,</span>
    <span class="n">nat</span><span class="bp">.</span><span class="n">cast_add</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_one</span><span class="o">],</span>
  <span class="n">ring</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>The lemma is just the one Kevin posted above, so it probably worked on his machine.</p>

<a name="191461960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191461960" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191461960">Shing Tak Lam (Mar 23 2020 at 11:48)</a>:</h4>
<p>It might be of use: <code>#eval lean.version</code> is <code>(3, (6, 1))</code>, <code>mathlib</code> is <code>mathlib = {git = "https://github.com/leanprover-community/mathlib", rev = "093ac77ac9d27ce83ebf4e76ca5bd9b3eaebedaa"}</code></p>

<a name="191462036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191462036" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191462036">Shing Tak Lam (Mar 23 2020 at 11:49)</a>:</h4>
<p>The lemma checks almost immediately if I comment out the <code>ring</code> in the inductive case (the one at the end of the lemma)</p>

<a name="191462672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191462672" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191462672">Mario Carneiro (Mar 23 2020 at 11:57)</a>:</h4>
<p>The goal you gave to <code>ring</code> is</p>
<div class="codehilite"><pre><span></span><span class="err">⊢</span> <span class="n">X</span> <span class="bp">*</span> <span class="o">((</span><span class="err">↑</span><span class="n">d</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">X</span> <span class="err">^</span> <span class="n">d</span><span class="o">)</span> <span class="bp">+</span> <span class="n">X</span> <span class="bp">*</span> <span class="n">X</span> <span class="err">^</span> <span class="n">d</span> <span class="bp">*</span> <span class="n">C</span> <span class="mi">1</span> <span class="bp">=</span> <span class="o">(</span><span class="err">↑</span><span class="n">d</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">X</span> <span class="bp">*</span> <span class="n">X</span> <span class="err">^</span> <span class="n">d</span><span class="o">)</span>
</pre></div>


<p>which is not an equality that is valid from the axioms of rings alone (because of the <code>C 1</code>)</p>

<a name="191462932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191462932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191462932">Mario Carneiro (Mar 23 2020 at 11:59)</a>:</h4>
<p>I think <code>ring</code> is probably taking forever because it does some processing to see if different looking expressions are defeq, and it is unfolding <code>C 1</code></p>

<a name="191463010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191463010" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191463010">Mario Carneiro (Mar 23 2020 at 12:00)</a>:</h4>
<p>IIRC there is an option to disable that, but then it will just fail in this case</p>

<a name="191463078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191463078" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191463078">Mario Carneiro (Mar 23 2020 at 12:01)</a>:</h4>
<p>This works</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="err">Δ</span><span class="n">Xn</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="err">Δ</span> <span class="o">(</span><span class="n">X</span><span class="err">^</span><span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="n">X</span><span class="err">^</span><span class="n">n</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">d</span> <span class="n">hd</span><span class="o">,</span>
  <span class="o">{</span> <span class="c1">-- base case</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">pow_one</span><span class="o">,</span> <span class="err">Δ</span><span class="mi">1</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_zero</span><span class="o">],</span>
    <span class="n">ring</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ_eq_add_one</span><span class="o">,</span> <span class="n">pow_succ</span><span class="o">,</span> <span class="err">Δ</span><span class="mi">4</span><span class="o">,</span> <span class="err">Δ</span><span class="mi">1</span><span class="o">,</span> <span class="n">hd</span><span class="o">,</span> <span class="n">pow_succ</span><span class="o">,</span>
    <span class="n">nat</span><span class="bp">.</span><span class="n">cast_add</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_one</span><span class="o">,</span> <span class="n">C_1</span><span class="o">],</span>
  <span class="n">ring</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="191463083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191463083" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191463083">Shing Tak Lam (Mar 23 2020 at 12:01)</a>:</h4>
<p>Huh... Alright. (I didn't write this). </p>
<p>Adding <code>rw (show C (1:ℝ) = 1, by simp),</code> before <code>ring</code> fixed this.</p>
<p>Thank you very much.</p>

<a name="191463158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191463158" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191463158">Mario Carneiro (Mar 23 2020 at 12:02)</a>:</h4>
<p>Alternatively you can probably use <code>simp</code> instead of <code>rw</code> since half of those equations are simp lemmas</p>

<a name="191463247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191463247" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191463247">Shing Tak Lam (Mar 23 2020 at 12:03)</a>:</h4>
<p>I see. I thought I saw somewhere that it's best to only use <code>simp</code> as the last tactic in a proof. That's why I didn't use it there.</p>

<a name="191463276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191463276" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191463276">Johan Commelin (Mar 23 2020 at 12:04)</a>:</h4>
<p>That's right</p>

<a name="191463319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191463319" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191463319">Johan Commelin (Mar 23 2020 at 12:04)</a>:</h4>
<p>But <code>simp only</code> is fine</p>

<a name="191463331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191463331" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191463331">Johan Commelin (Mar 23 2020 at 12:04)</a>:</h4>
<p>Write <code>squeeze_simp</code> to get some help</p>

<a name="191463340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191463340" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191463340">Mario Carneiro (Mar 23 2020 at 12:04)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="err">Δ</span><span class="n">Xn</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="err">Δ</span> <span class="o">(</span><span class="n">X</span><span class="err">^</span><span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="n">X</span><span class="err">^</span><span class="n">n</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">d</span> <span class="n">hd</span><span class="o">,</span>
  <span class="o">{</span> <span class="c1">-- base case</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">pow_one</span><span class="o">,</span> <span class="err">Δ</span><span class="mi">1</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_zero</span><span class="o">],</span>
    <span class="n">ring</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">pow_succ</span><span class="o">,</span> <span class="err">Δ</span><span class="mi">4</span><span class="o">,</span> <span class="n">hd</span><span class="o">],</span> <span class="n">simp</span> <span class="o">[</span><span class="err">Δ</span><span class="mi">1</span><span class="o">,</span> <span class="n">pow_succ</span><span class="o">],</span>
  <span class="n">ring</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="191463389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191463389" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191463389">Mario Carneiro (Mar 23 2020 at 12:05)</a>:</h4>
<p>using <code>simp</code> before a tactic that doesn't care too much about the shape of the input, like <code>ring</code>, is okay</p>

<a name="191463483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191463483" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191463483">Shing Tak Lam (Mar 23 2020 at 12:06)</a>:</h4>
<p>Ok. Thank you.</p>

<a name="191465258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191465258" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191465258">Shing Tak Lam (Mar 23 2020 at 12:24)</a>:</h4>
<p>Another question, when I try to <code>rw ΔXn</code>, it doesn't work. But <code>rw ΔXn Δ</code> works. But then it puts all of <code>Δ1 Δ2 Δ3 Δ4</code> as new goals. Why? It's easy to solve (<code>repeat {assumption}</code>), but I'd still like to know why this is the case.</p>

<a name="191470949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191470949" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191470949">Kevin Buzzard (Mar 23 2020 at 13:16)</a>:</h4>
<p>Because you used variables</p>

<a name="191471059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191471059" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191471059">Kevin Buzzard (Mar 23 2020 at 13:17)</a>:</h4>
<p>The theorems you're proving are "if Delta satisfies all these axioms then..." and the proofs are hence all functions which demand proofs of all the axioms as input</p>

<a name="191471211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191471211" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191471211">Kevin Buzzard (Mar 23 2020 at 13:18)</a>:</h4>
<p>One way around this would probably be to make some sort of structure to carry the variables around in</p>

<a name="191471417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191471417" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191471417">Mario Carneiro (Mar 23 2020 at 13:20)</a>:</h4>
<p>You can probably also use <code>parameters</code> but it doesn't take much to stumble on places where they don't work very well</p>

<a name="191471600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191471600" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191471600">Kevin Buzzard (Mar 23 2020 at 13:22)</a>:</h4>
<p>If you used parameters you would probably be able to avoid this issue in this one particular lean file, but if someone were to import your file because they wanted to use your work, the extra assumptions would be back by default</p>

<a name="191471674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191471674" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191471674">Kevin Buzzard (Mar 23 2020 at 13:22)</a>:</h4>
<p>And the user could probably try to <code>include</code> them but then they have to remember to <code>exclude</code> them later. This set up happens very little in mathlib</p>

<a name="191471735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191471735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191471735">Mario Carneiro (Mar 23 2020 at 13:23)</a>:</h4>
<p>I think that's what you want in this case though. There are two or three intermediate lemmas and you don't want to refer to the assumptions since they are fixed, but once you reach the goal, you discharge everything and it becomes a regular theorem with a bunch of hypotheses</p>

<a name="191471856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191471856" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191471856">Kevin Buzzard (Mar 23 2020 at 13:24)</a>:</h4>
<p>Here's how it would work with structures. You could define delta-structure on a ring R to be a function called Delta from polynomial R to polynomial R which satisfied the axioms. Just like the definition of a group in the group theory game.</p>

<a name="191471878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191471878" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191471878">Mario Carneiro (Mar 23 2020 at 13:25)</a>:</h4>
<p>I think it has a name, it's called a derivation</p>

<a name="191472032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191472032" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191472032">Kevin Buzzard (Mar 23 2020 at 13:26)</a>:</h4>
<p>And then you want to prove that if Delta is any delta-structure then the underlying map Delta.to_fun must agree with differentiation</p>

<a name="191472177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191472177" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191472177">Kevin Buzzard (Mar 23 2020 at 13:27)</a>:</h4>
<p>A general derivation goes from R to another ring A and there is no Delta 1 axiom</p>

<a name="191472348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191472348" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191472348">Kevin Buzzard (Mar 23 2020 at 13:28)</a>:</h4>
<p>The advantage of the structure approach is that you have easy access to the axioms: Delta.map_add is Delta2 for the function Delta.to_fun for example</p>

<a name="191472384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191472384" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191472384">Kevin Buzzard (Mar 23 2020 at 13:29)</a>:</h4>
<p>Delta4 will be called Delta.map_mul</p>

<a name="191472517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191472517" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191472517">Kevin Buzzard (Mar 23 2020 at 13:30)</a>:</h4>
<p>And someone better at knowing Lean's naming convention can figure out what Delta3 is called</p>

<a name="191472551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191472551" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191472551">Mario Carneiro (Mar 23 2020 at 13:30)</a>:</h4>
<p>something with <code>smul</code>?</p>

<a name="191473023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191473023" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191473023">Kevin Buzzard (Mar 23 2020 at 13:34)</a>:</h4>
<p>Oh is it not in canonical form??</p>

<a name="191473129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191473129" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191473129">Kevin Buzzard (Mar 23 2020 at 13:35)</a>:</h4>
<p>I understand this canonical form/naming convention far worse than I would like to</p>

<a name="191474127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191474127" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191474127">Mario Carneiro (Mar 23 2020 at 13:43)</a>:</h4>
<p>No, I think it's fine to write <code>C k * p</code> instead of <code>k \bu p</code> since it's an algebra</p>

<a name="191474167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191474167" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191474167">Mario Carneiro (Mar 23 2020 at 13:43)</a>:</h4>
<p>I just meant that something like <code>map_smul</code> could be used for the name</p>

<a name="191474189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191474189" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191474189">Mario Carneiro (Mar 23 2020 at 13:43)</a>:</h4>
<p>but since it isn't written with <code>\bu</code> that's a bit of a lie, so perhaps <code>map_C_mul</code> is better</p>

<a name="191475341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191475341" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191475341">Kevin Buzzard (Mar 23 2020 at 13:52)</a>:</h4>
<p>The correct theorem from the point of view of derivations is that if we have a structure satisfying the last three axioms then there exists a unique polynomial g such that Delta (f) = g*f', and that g can be taken to be Delta(X)</p>

<a name="191475374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191475374" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191475374">Kevin Buzzard (Mar 23 2020 at 13:52)</a>:</h4>
<p>This has the original question as a special case</p>

<a name="191475499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191475499" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191475499">Kevin Buzzard (Mar 23 2020 at 13:54)</a>:</h4>
<p>Do we have a theory of derivations in Lean already? <span class="user-mention" data-user-id="112680">@Johan Commelin</span> ?</p>

<a name="191475676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191475676" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191475676">Kevin Buzzard (Mar 23 2020 at 13:55)</a>:</h4>
<p>I think it would be quite fun to prove the universal property of derivations in general.</p>

<a name="191476302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191476302" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191476302">Mario Carneiro (Mar 23 2020 at 13:59)</a>:</h4>
<p>pretty sure we don't</p>

<a name="191476679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191476679" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191476679">Kevin Buzzard (Mar 23 2020 at 14:02)</a>:</h4>
<p><span class="user-mention" data-user-id="266440">@Shing Tak Lam</span> so there's your homework while your teachers go through all the people in your year awarding them A-levels. I wonder if they'll do it anonymously?</p>

<a name="191476701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191476701" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191476701">Kevin Buzzard (Mar 23 2020 at 14:02)</a>:</h4>
<p>Feel free to ask if you need help</p>

<a name="191476740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191476740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191476740">Kevin Buzzard (Mar 23 2020 at 14:03)</a>:</h4>
<p>But let's make a new thread because this one has a silly name. It can go in #maths</p>

<a name="191476978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191476978" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191476978">Shing Tak Lam (Mar 23 2020 at 14:05)</a>:</h4>
<p>I had a meeting with my teachers earlier, and as I'm doing International A Levels, apparently my exams are still going ahead... It's just STEP that's a maybe...</p>
<p>Apparently the exam boards think that it's safe to go ahead (even though IB has cancelled for everyone as well).</p>

<a name="191477020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191477020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191477020">Shing Tak Lam (Mar 23 2020 at 14:05)</a>:</h4>
<p>So I guess I still have to revise...</p>

<a name="191477234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191477234" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191477234">Shing Tak Lam (Mar 23 2020 at 14:06)</a>:</h4>
<p>(deleted)</p>

<a name="191477892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191477892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191477892">Johan Commelin (Mar 23 2020 at 14:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/tactic.20failed.2C.20result.20contains.20meta-variables/near/191475499" title="#narrow/stream/113489-new-members/topic/tactic.20failed.2C.20result.20contains.20meta-variables/near/191475499">said</a>:</p>
<blockquote>
<p>Do we have a theory of derivations in Lean already? <span class="user-mention silent" data-user-id="112680">Johan Commelin</span> ?</p>
</blockquote>
<p>Not yet, but <span class="user-mention" data-user-id="110064">@Kenny Lau</span> looked into it at some point, I htink.</p>

<a name="191478072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191478072" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191478072">Kenny Lau (Mar 23 2020 at 14:12)</a>:</h4>
<p><a href="#narrow/stream/116395-maths/topic/derivation/near/170730598" title="#narrow/stream/116395-maths/topic/derivation/near/170730598">https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/derivation/near/170730598</a></p>

<a name="191478600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191478600" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191478600">Kevin Buzzard (Mar 23 2020 at 14:17)</a>:</h4>
<p>Has enough API been extracted?</p>

<a name="191478634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191478634" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191478634">Johan Commelin (Mar 23 2020 at 14:17)</a>:</h4>
<p>What are you thinking of?</p>

<a name="191478701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191478701" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191478701">Kevin Buzzard (Mar 23 2020 at 14:18)</a>:</h4>
<p>Did we locate the characteristic predicate yet?</p>

<a name="191478765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191478765" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191478765">Kevin Buzzard (Mar 23 2020 at 14:18)</a>:</h4>
<p>I think this has something to do with transfer.</p>

<a name="191478825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191478825" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191478825">Johan Commelin (Mar 23 2020 at 14:19)</a>:</h4>
<p>No, I don't think much happened so far.</p>

<a name="191478857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191478857" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191478857">Johan Commelin (Mar 23 2020 at 14:19)</a>:</h4>
<p>Also, didn't we switch to calling it the "characteristic predicate"?</p>

<a name="191478976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191478976" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191478976">Kevin Buzzard (Mar 23 2020 at 14:20)</a>:</h4>
<p>Somehow the bare minimum API is the universal property, and then there is the problem of isolating the characteristic predicate and proving that a module satisfies the characteristic predicate iff it's the differentials</p>

<a name="191611207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/191611207" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#191611207">Kevin Buzzard (Mar 24 2020 at 13:47)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> </p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">derivation</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">to_fun</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">M</span><span class="o">)</span>
<span class="o">(</span><span class="n">add</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">to_fun</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">to_fun</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">to_fun</span> <span class="n">y</span><span class="o">)</span>
<span class="o">(</span><span class="n">mul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">to_fun</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="err">•</span> <span class="n">to_fun</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">y</span> <span class="err">•</span> <span class="n">to_fun</span> <span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">algebra</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">to_fun</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">A</span> <span class="n">r</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
</pre></div>


<p>Do you think the fields should be <code>to_fun</code>, <code>map_add</code>, <code>map_mul</code> and <code>map_C_mul</code> as above? What do you think of my structure made for this STEP question?</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">polynomial</span>

<span class="kn">open</span> <span class="n">polynomial</span>

<span class="kn">structure</span> <span class="n">delta_structure</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">to_fun</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">polynomial</span> <span class="n">R</span><span class="o">)</span>
<span class="o">(</span><span class="n">map_X&#39;</span> <span class="o">:</span> <span class="n">to_fun</span> <span class="n">X</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span>
<span class="o">(</span><span class="n">map_add&#39;</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">R</span><span class="o">),</span> <span class="n">to_fun</span> <span class="o">(</span><span class="n">f</span> <span class="bp">+</span> <span class="n">g</span><span class="o">)</span> <span class="bp">=</span> <span class="n">to_fun</span> <span class="n">f</span> <span class="bp">+</span> <span class="n">to_fun</span> <span class="n">g</span><span class="o">)</span>
<span class="o">(</span><span class="n">map_C_mul&#39;</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">R</span><span class="o">),</span> <span class="n">to_fun</span> <span class="o">(</span><span class="n">C</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">f</span><span class="o">)</span> <span class="bp">=</span> <span class="n">C</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">to_fun</span> <span class="n">f</span><span class="o">)</span>
<span class="o">(</span><span class="n">map_mul&#39;</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">R</span><span class="o">),</span> <span class="n">to_fun</span> <span class="o">(</span><span class="n">f</span> <span class="bp">*</span> <span class="n">g</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="bp">*</span> <span class="n">to_fun</span> <span class="n">g</span> <span class="bp">+</span> <span class="n">g</span> <span class="bp">*</span> <span class="n">to_fun</span> <span class="n">f</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">delta_structure</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="err">Δ</span> <span class="o">:</span> <span class="n">delta_structure</span> <span class="n">R</span><span class="o">)</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_coe_to_fun</span> <span class="o">(</span><span class="n">delta_structure</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">⟨_</span><span class="o">,</span> <span class="n">to_fun</span><span class="bp">⟩</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">def</span> <span class="n">map_X</span> <span class="o">(</span><span class="err">Δ</span> <span class="o">:</span> <span class="n">delta_structure</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="err">Δ</span> <span class="n">X</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="err">Δ</span><span class="bp">.</span><span class="n">map_X&#39;</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">map_add</span> <span class="o">(</span><span class="err">Δ</span> <span class="o">:</span> <span class="n">delta_structure</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">R</span><span class="o">},</span> <span class="err">Δ</span> <span class="o">(</span><span class="n">f</span> <span class="bp">+</span> <span class="n">g</span><span class="o">)</span> <span class="bp">=</span> <span class="err">Δ</span> <span class="n">f</span> <span class="bp">+</span> <span class="err">Δ</span> <span class="n">g</span> <span class="o">:=</span> <span class="err">Δ</span><span class="bp">.</span><span class="n">map_add&#39;</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">map_C_mul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">R</span><span class="o">),</span> <span class="err">Δ</span> <span class="o">(</span><span class="n">C</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">f</span><span class="o">)</span> <span class="bp">=</span> <span class="n">C</span> <span class="n">k</span> <span class="bp">*</span> <span class="err">Δ</span> <span class="n">f</span> <span class="o">:=</span> <span class="err">Δ</span><span class="bp">.</span><span class="n">map_C_mul&#39;</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">map_mul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">R</span><span class="o">),</span> <span class="err">Δ</span> <span class="o">(</span><span class="n">f</span> <span class="bp">*</span> <span class="n">g</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="bp">*</span> <span class="err">Δ</span> <span class="n">g</span> <span class="bp">+</span> <span class="n">g</span> <span class="bp">*</span> <span class="err">Δ</span> <span class="n">f</span> <span class="o">:=</span> <span class="err">Δ</span><span class="bp">.</span><span class="n">map_mul&#39;</span>
</pre></div>

<a name="192011188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/192011188" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#192011188">Kevin Buzzard (Mar 27 2020 at 12:46)</a>:</h4>
<p><span class="user-mention" data-user-id="266440">@Shing Tak Lam</span> now has a <a href="https://github.com/shingtaklam1324/step3-06-q8-lean" title="https://github.com/shingtaklam1324/step3-06-q8-lean">github repo</a> where this question is solved using derivations on a polynomial ring. <span class="user-mention" data-user-id="110031">@Patrick Massot</span> at the time of writing I see that he only has one branch, which is <code>lean-3.4.2</code>. Is this something to do with the tooling? Shing -- did you use <code>leanproject</code> to make this repo?</p>

<a name="192011475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/192011475" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#192011475">Kevin Buzzard (Mar 27 2020 at 12:50)</a>:</h4>
<p>the linter doesn't like the <code>simp</code>s above but now I have a much better understanding of what is going on there.</p>

<a name="192012279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/192012279" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#192012279">Shing Tak Lam (Mar 27 2020 at 12:58)</a>:</h4>
<p>Yes I did use <code>leanproject</code>. Just to check I made a new project.</p>
<div class="codehilite"><pre><span></span>$ leanproject new test
&gt; mkdir -p test
&gt; cd test
&gt; mkdir src
&gt; git init -q
&gt; git checkout -b lean-3.4.2
Switched to a new branch &#39;lean-3.4.2&#39;
configuring test 0.1
Adding mathlib
</pre></div>


<p>I'm kinda confused now as that shouldn't be happening... </p>
<p>Looking at the repo at <a href="https://github.com/leanprover-community/mathlib-tools/blob/96734b3f6e7b1b6d69f86e18f4fee9c4c3e8bfff/mathlibtools/lib.py#L435" title="https://github.com/leanprover-community/mathlib-tools/blob/96734b3f6e7b1b6d69f86e18f4fee9c4c3e8bfff/mathlibtools/lib.py#L435">https://github.com/leanprover-community/mathlib-tools/blob/96734b3f6e7b1b6d69f86e18f4fee9c4c3e8bfff/mathlibtools/lib.py#L435</a> the branch should be called <code>master</code>.</p>

<a name="192012400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/192012400" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#192012400">Shing Tak Lam (Mar 27 2020 at 12:59)</a>:</h4>
<p>For what it's worth</p>
<div class="codehilite"><pre><span></span>$ pip list | grep mathlibtools
mathlibtools                       0.0.4
</pre></div>

<a name="192012412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/192012412" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#192012412">Kevin Buzzard (Mar 27 2020 at 12:59)</a>:</h4>
<p>The tooling is brand new, much better than what we had before, but still contains a few minor glitches. It has already transformed my workflow though.</p>

<a name="192012429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/192012429" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#192012429">Kevin Buzzard (Mar 27 2020 at 12:59)</a>:</h4>
<p>Yeah, that number is an indication of how new it is :-)</p>

<a name="192017201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/192017201" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#192017201">Patrick Massot (Mar 27 2020 at 13:35)</a>:</h4>
<p><code>leanproject</code> still uses leanpkg to create new projects. And leanpkg uses the default elan toolchain. We should change that, but that requires finding time to do it.</p>

<a name="192017340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/192017340" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#192017340">Patrick Massot (Mar 27 2020 at 13:36)</a>:</h4>
<p>Also note that every complain or feature request about leanproject that is expressed here but not in a GitHub issue currently falls into a black hole.</p>

<a name="192023908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/192023908" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#192023908">Shing Tak Lam (Mar 27 2020 at 14:22)</a>:</h4>
<p>Mhm... I found</p>
<p><a href="https://github.com/leanprover-community/mathlib-tools/issues/26" title="https://github.com/leanprover-community/mathlib-tools/issues/26">https://github.com/leanprover-community/mathlib-tools/issues/26</a></p>
<p>and </p>
<p><a href="https://github.com/leanprover-community/mathlib-tools/commit/5768b8fdf7de059eb8d4d663bd42fc8f9809190c" title="https://github.com/leanprover-community/mathlib-tools/commit/5768b8fdf7de059eb8d4d663bd42fc8f9809190c">https://github.com/leanprover-community/mathlib-tools/commit/5768b8fdf7de059eb8d4d663bd42fc8f9809190c</a></p>
<p>So this should be fixed...</p>

<a name="192025409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/192025409" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#192025409">Patrick Massot (Mar 27 2020 at 14:32)</a>:</h4>
<p>The lean-3.4.2 exists in your repository, but the master branch also exist. Did you need to manually merge one branch into the other?</p>

<a name="192026054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/192026054" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#192026054">Shing Tak Lam (Mar 27 2020 at 14:36)</a>:</h4>
<p>That was me renaming the branch locally from lean-3.4.2 to master then pushing it.</p>

<a name="192026198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/192026198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#192026198">Shing Tak Lam (Mar 27 2020 at 14:37)</a>:</h4>
<p>lean-3.4.2 now only exists on github but not on my local copy. I can probably delete it.</p>

<a name="192028029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/192028029" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#192028029">Patrick Massot (Mar 27 2020 at 14:50)</a>:</h4>
<p>I'm sorry I can't reproduce this locally.</p>
<div class="codehilite"><pre><span></span>$ leanproject new test
$ git a leanpkg.toml
$ git commit
$ git branch
* master
</pre></div>

<a name="192028424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/2006%20STEP%203%20Question%208/near/192028424" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/297362006STEP3Question8.html#192028424">Shing Tak Lam (Mar 27 2020 at 14:52)</a>:</h4>
<p>No problem. I have a few ideas on what may have caused this, I'll give it a go tomorrow. If I find anything then I'll report back.</p>


{% endraw %}

{% include archive_update.html %}