---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/56915Maxelementofaset.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/56915Maxelementofaset.html">Max element of a set</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="166707208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Max%20element%20of%20a%20set/near/166707208" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/56915Maxelementofaset.html#166707208">Joe (May 28 2019 at 11:39)</a>:</h4>
<p>I want to define something like this:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">M</span> <span class="o">(</span><span class="n">N</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="n">max</span> <span class="o">{</span><span class="n">m</span> <span class="bp">≤</span> <span class="n">N</span> <span class="bp">|</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">s</span> <span class="n">m</span><span class="o">}</span>
</pre></div>


<p>I don't know how to say this in Lean. I end up using <code>finset</code>, but it looks really complicated. I don't know if it is the right way. </p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">finset</span>
<span class="n">noncomputable</span> <span class="n">theory</span>
<span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="n">classical</span><span class="bp">.</span><span class="n">prop_decidable</span>

<span class="kn">section</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="bp">ℕ</span>  <span class="bp">→</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span>

<span class="n">def</span> <span class="n">M</span> <span class="o">(</span><span class="n">N</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span>
  <span class="n">finset</span><span class="bp">.</span><span class="n">max&#39;</span>
    <span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">filter</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">m</span><span class="o">,</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">s</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">N</span><span class="bp">+</span><span class="mi">1</span><span class="o">)))</span>
      <span class="o">(</span><span class="n">sorry</span><span class="o">)</span> <span class="c1">-- the set above is nonempty</span>

<span class="kn">end</span>
</pre></div>

<a name="166707543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Max%20element%20of%20a%20set/near/166707543" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/56915Maxelementofaset.html#166707543">Kevin Buzzard (May 28 2019 at 11:44)</a>:</h4>
<p>What do you want the answer to be if no such m exists? I mean -- if the set is empty?</p>

<a name="166707750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Max%20element%20of%20a%20set/near/166707750" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/56915Maxelementofaset.html#166707750">Joe (May 28 2019 at 11:47)</a>:</h4>
<p>I can somehow guarantee it is not empty.</p>

<a name="166707835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Max%20element%20of%20a%20set/near/166707835" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/56915Maxelementofaset.html#166707835">Joe (May 28 2019 at 11:48)</a>:</h4>
<p>But I think let it be 0 will be fine too, because it will not happen anyways.</p>

<a name="166708024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Max%20element%20of%20a%20set/near/166708024" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/56915Maxelementofaset.html#166708024">Joe (May 28 2019 at 11:50)</a>:</h4>
<p>I find this in Isabelle, another theorem prover</p>
<div class="codehilite"><pre><span></span><span class="n">define</span> <span class="n">m</span> <span class="kp">where</span> <span class="o">[</span><span class="n">abs_def</span><span class="o">]:</span> <span class="s">&quot;m N x = Max {m. m ≤ N ∧ x ∈ (⋃n≤N. B m n)}&quot;</span> <span class="kp">for</span> <span class="n">N</span> <span class="n">x</span>
</pre></div>


<p>So I think if I can do this in lean that will be good</p>

<a name="166709045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Max%20element%20of%20a%20set/near/166709045" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/56915Maxelementofaset.html#166709045">Joe (May 28 2019 at 12:04)</a>:</h4>
<p>Said in another way, <br>
if <br>
<code>x ∈ ⋃ (M ≤ N), ⋃ (k ≤ N), A M k</code><br>
then <br>
find the largest <code>M</code> such that <code>x ∈ ⋃ (k ≤ N), A M k</code><br>
and then <br>
find the largest <code>k</code> such that <code>x ∈ A M k</code></p>

<a name="166763588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Max%20element%20of%20a%20set/near/166763588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/56915Maxelementofaset.html#166763588">Kevin Buzzard (May 28 2019 at 21:57)</a>:</h4>
<p>The finset approach looks fine to me. One way to fill in the sorry would be <code>if h : (the hypothesis you need) then finset.max' ... h else 37</code></p>

<a name="166763825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Max%20element%20of%20a%20set/near/166763825" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/56915Maxelementofaset.html#166763825">Mario Carneiro (May 28 2019 at 22:00)</a>:</h4>
<p><span class="user-mention" data-user-id="127148">@Joe</span> In the particular case of the isabelle definition, that max is ranging over natural numbers, and there is a function specifically for that in lean: <code>nat.find_greatest P n</code> is <code>Max {m &lt;= n | P m}</code></p>

<a name="166764227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Max%20element%20of%20a%20set/near/166764227" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/56915Maxelementofaset.html#166764227">Kevin Buzzard (May 28 2019 at 22:06)</a>:</h4>
<p>Aah, I'd forgotten about that. I remembered <code>nat.find</code> but I think that one finds the smallest one :-)</p>


{% endraw %}

{% include archive_update.html %}