---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html">rw only simplifies if piped through my own function</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="133491472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133491472" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133491472">Tobias Grosser (Sep 07 2018 at 05:52)</a>:</h4>
<p>My first beginners question. I tampered with this since a while, but maybe somebody has a quick explanation for this:</p>
<p><a href="https://gist.github.com/tobig/92b17c8cac76fd07e1537c9131a25260" target="_blank" title="https://gist.github.com/tobig/92b17c8cac76fd07e1537c9131a25260">https://gist.github.com/tobig/92b17c8cac76fd07e1537c9131a25260</a></p>

<a name="133491484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133491484" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133491484">Tobias Grosser (Sep 07 2018 at 05:53)</a>:</h4>
<p>Rewriting with my own theorem works well, but if I directly use imp_iff_not_or things break</p>

<a name="133491491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133491491" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133491491">Tobias Grosser (Sep 07 2018 at 05:53)</a>:</h4>
<p>with "function expected at"</p>

<a name="133491541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133491541" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133491541">Tobias Grosser (Sep 07 2018 at 05:54)</a>:</h4>
<p>Probably a beginners mistake. It seems my declaration introduces some additional information which help the proof go through.</p>

<a name="133491641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133491641" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133491641">Simon Hudon (Sep 07 2018 at 05:56)</a>:</h4>
<p>If you check the definition of <code>imp_iff_not_or</code>, (type <code>#check imp_iff_not_or</code> in your Lean buffer), you see that it does not take <em>explicit</em> arguments, only implicit ones</p>

<a name="133491663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133491663" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133491663">Simon Hudon (Sep 07 2018 at 05:57)</a>:</h4>
<p>That means that they are meant to be inferred. But if you want to specify then, you can write <code>@imp_iff_not_or</code> and then you have to provide an argument for the implicit and explicit arguments.</p>

<a name="133491725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133491725" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133491725">Simon Hudon (Sep 07 2018 at 05:59)</a>:</h4>
<p>For reference:</p>
<div class="codehilite"><pre><span></span><span class="bp">#</span><span class="kn">check</span> <span class="n">imp_iff_not_or</span>
<span class="c1">-- imp_iff_not_or : ?M_1 → ?M_2 ↔ ¬?M_1 ∨ ?M_2</span>
<span class="bp">#</span><span class="kn">check</span> <span class="bp">@</span><span class="n">imp_iff_not_or</span>
<span class="c1">-- imp_iff_not_or : ∀ {a b : Prop} [_inst_1 : decidable a], a → b ↔ ¬a ∨ b</span>
</pre></div>


<p>The curly brackets around <code>a</code> and <code>b</code> means that they are implicit arguments. The square brackets around <code>decidable a</code> means that it's a type class instance.</p>

<a name="133491802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133491802" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133491802">Tobias Grosser (Sep 07 2018 at 06:01)</a>:</h4>
<p><a href="https://leanprover.github.io/theorem_proving_in_lean/dependent_type_theory.html#implicit-arguments" target="_blank" title="https://leanprover.github.io/theorem_proving_in_lean/dependent_type_theory.html#implicit-arguments">https://leanprover.github.io/theorem_proving_in_lean/dependent_type_theory.html#implicit-arguments</a></p>

<a name="133491841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133491841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133491841">Tobias Grosser (Sep 07 2018 at 06:02)</a>:</h4>
<p>Works flawless. Need to read a little bit more on this.</p>

<a name="133491845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133491845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133491845">Tobias Grosser (Sep 07 2018 at 06:02)</a>:</h4>
<p>Thanks for the quick help.</p>

<a name="133491851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133491851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133491851">Simon Hudon (Sep 07 2018 at 06:02)</a>:</h4>
<p>No worries :)</p>

<a name="133491931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133491931" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133491931">Tobias Grosser (Sep 07 2018 at 06:05)</a>:</h4>
<p>One last question:</p>

<a name="133491932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133491932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133491932">Tobias Grosser (Sep 07 2018 at 06:05)</a>:</h4>
<p>My proof looks now like this:</p>

<a name="133491934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133491934" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133491934">Tobias Grosser (Sep 07 2018 at 06:05)</a>:</h4>
<div class="codehilite"><pre><span></span>        ((B → C) → (¬(A → C)     ∧ ¬(A ∨ B)))
      = ((B → C) → (¬(¬A ∨ C)    ∧ ¬(A ∨ B)))         : by rw @imp_iff_not_or A C
  ... = ((B → C) → ((¬(¬A) ∧ ¬C) ∧ ¬(A ∨ B)))         : by rw not_or_distrib
  ... = ((B → C) → ((¬(¬A) ∧ ¬C) ∧ (¬A ∧ ¬B)))        : by rw not_or_distrib
  ... = ((B → C) → ((A ∧ ¬C) ∧ (¬A ∧ ¬B)))            : by rw not_not
  ... = ((B → C) → ((A ∧ ¬C) ∧ ¬A ∧ ¬B))              : by rw and_assoc
  ... = ((B → C) → ((¬C ∧ A) ∧ ¬A ∧ ¬B))              : by rw and_comm (A) (¬C)
  ... = ((B → C) → (¬C ∧ A ∧ ¬A ∧ ¬B))                : by rw and_assoc
  ... = ((B → C) → (¬C ∧ (A ∧ ¬A) ∧ ¬B))              : by rw and_assoc
  ... = ((B → C) → (¬C ∧ ¬ B ∧ (A ∧ ¬A)))             : by rw and_comm (¬ B) (A ∧ ¬A)
  ... = ((B → C) → (¬C ∧ ¬ B ∧ false ))               : by rw and_not_self_iff A
  ... = ((B → C) → ((¬C) ∧ false ))                   : by rw and_false
  ... = ((B → C) → (false))                           : by rw and_false
  ... = (¬(B → C) ∨ false)                            : by rw imp_iff_not_or
  ... = ¬(B → C)                                      : by rw or_false
  ... = ¬(¬B ∨ C)                                     : by rw imp_iff_not_or 
  ... = ((¬¬B) ∧ (¬C))                                : by rw not_or_distrib
  ... = (B ∧ ¬C)                                      : by rw not_not
</pre></div>

<a name="133491975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133491975" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133491975">Tobias Grosser (Sep 07 2018 at 06:06)</a>:</h4>
<p>It seems only imp_iff_not_or needs the '@'. All other functions are OK with explicit arguments (if given).</p>

<a name="133491980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133491980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133491980">Tobias Grosser (Sep 07 2018 at 06:06)</a>:</h4>
<p>Is there some schema when theorems take explicit arguments in mathlib?</p>

<a name="133491999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133491999" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133491999">Mario Carneiro (Sep 07 2018 at 06:07)</a>:</h4>
<p>most iff theorems have implicit args</p>

<a name="133492001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492001" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492001">Kenny Lau (Sep 07 2018 at 06:07)</a>:</h4>
<p><code>rw ← imp_iff_not_or</code></p>

<a name="133492009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492009" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492009">Kenny Lau (Sep 07 2018 at 06:07)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">logic</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="n">classical</span><span class="bp">.</span><span class="n">prop_decidable</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span> <span class="bp">_</span> <span class="bp">=</span> <span class="bp">_</span> <span class="o">:=</span>
<span class="k">calc</span>
        <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">¬</span><span class="o">(</span><span class="n">A</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span>     <span class="bp">∧</span> <span class="bp">¬</span><span class="o">(</span><span class="n">A</span> <span class="bp">∨</span> <span class="n">B</span><span class="o">)))</span>
      <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">¬</span><span class="o">(</span><span class="bp">¬</span><span class="n">A</span> <span class="bp">∨</span> <span class="n">C</span><span class="o">)</span>    <span class="bp">∧</span> <span class="bp">¬</span><span class="o">(</span><span class="n">A</span> <span class="bp">∨</span> <span class="n">B</span><span class="o">)))</span>         <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="err">←</span> <span class="n">imp_iff_not_or</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="bp">¬</span><span class="o">(</span><span class="bp">¬</span><span class="n">A</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">C</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="o">(</span><span class="n">A</span> <span class="bp">∨</span> <span class="n">B</span><span class="o">)))</span>         <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">not_or_distrib</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="bp">¬</span><span class="o">(</span><span class="bp">¬</span><span class="n">A</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">C</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">¬</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">B</span><span class="o">)))</span>        <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">not_or_distrib</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">C</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">¬</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">B</span><span class="o">)))</span>            <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">not_not</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">C</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">B</span><span class="o">))</span>              <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">and_assoc</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="bp">¬</span><span class="n">C</span> <span class="bp">∧</span> <span class="n">A</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">B</span><span class="o">))</span>              <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">and_comm</span> <span class="o">(</span><span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="bp">¬</span><span class="n">C</span><span class="o">)</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">¬</span><span class="n">C</span> <span class="bp">∧</span> <span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">B</span><span class="o">))</span>                <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">and_assoc</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">¬</span><span class="n">C</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">A</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">B</span><span class="o">))</span>              <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">and_assoc</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">¬</span><span class="n">C</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">B</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">A</span><span class="o">)))</span>             <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">and_comm</span> <span class="o">(</span><span class="bp">¬</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">A</span><span class="o">)</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">¬</span><span class="n">C</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">B</span> <span class="bp">∧</span> <span class="n">false</span> <span class="o">))</span>               <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">and_not_self_iff</span> <span class="n">A</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="bp">¬</span><span class="n">C</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">false</span> <span class="o">))</span>                   <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">and_false</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">false</span><span class="o">))</span>                           <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">and_false</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">¬</span><span class="o">(</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">∨</span> <span class="n">false</span><span class="o">)</span>                            <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">imp_iff_not_or</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="bp">¬</span><span class="o">(</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span>                                      <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">or_false</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="bp">¬</span><span class="o">(</span><span class="bp">¬</span><span class="n">B</span> <span class="bp">∨</span> <span class="n">C</span><span class="o">)</span>                                     <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">imp_iff_not_or</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="bp">¬¬</span><span class="n">B</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">¬</span><span class="n">C</span><span class="o">))</span>                                <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">not_or_distrib</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">B</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">C</span><span class="o">)</span>                                      <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">not_not</span>
</pre></div>

<a name="133492210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492210" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492210">Tobias Grosser (Sep 07 2018 at 06:12)</a>:</h4>
<p>Is there a specific reason why 'iff' terms have implict  arguments and others not?</p>

<a name="133492230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492230" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492230">Kenny Lau (Sep 07 2018 at 06:14)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">logic</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="n">classical</span><span class="bp">.</span><span class="n">prop_decidable</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span> <span class="bp">_</span> <span class="bp">=</span> <span class="bp">_</span> <span class="o">:=</span>
<span class="k">calc</span>
        <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">¬</span><span class="o">(</span><span class="n">A</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="o">(</span><span class="n">A</span> <span class="bp">∨</span> <span class="n">B</span><span class="o">)))</span>
      <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">C</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="o">(</span><span class="n">A</span> <span class="bp">∨</span> <span class="n">B</span><span class="o">)))</span>  <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">not_imp</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">C</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">B</span><span class="o">))</span>   <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">not_or_distrib</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="bp">¬</span><span class="n">C</span> <span class="bp">∧</span> <span class="n">A</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">B</span><span class="o">))</span>   <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">and_comm</span> <span class="o">(</span><span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="bp">¬</span><span class="n">C</span><span class="o">)</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">¬</span><span class="n">C</span> <span class="bp">∧</span> <span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">B</span><span class="o">))</span>     <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">and_assoc</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">¬</span><span class="n">C</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">A</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">B</span><span class="o">))</span>   <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">and_assoc</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">¬</span><span class="n">C</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">B</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">A</span><span class="o">)))</span>  <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">and_comm</span> <span class="o">(</span><span class="bp">¬</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">A</span><span class="o">)</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">¬</span><span class="n">C</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">B</span> <span class="bp">∧</span> <span class="n">false</span> <span class="o">))</span>    <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">and_not_self_iff</span> <span class="n">A</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="bp">¬</span><span class="n">C</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">false</span> <span class="o">))</span>        <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">and_false</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">false</span><span class="o">))</span>                <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">and_false</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="bp">¬</span><span class="o">(</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span>                           <span class="o">:</span> <span class="n">rfl</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">B</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">C</span><span class="o">)</span>                           <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">not_imp</span>
</pre></div>

<a name="133492326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492326" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492326">Tobias Grosser (Sep 07 2018 at 06:16)</a>:</h4>
<p>Nice</p>

<a name="133492329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492329" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492329">Tobias Grosser (Sep 07 2018 at 06:16)</a>:</h4>
<p>Really helpful.</p>

<a name="133492344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492344" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492344">Tobias Grosser (Sep 07 2018 at 06:17)</a>:</h4>
<p>Thank you!</p>

<a name="133492346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492346" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492346">Kenny Lau (Sep 07 2018 at 06:18)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">logic</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="n">classical</span><span class="bp">.</span><span class="n">prop_decidable</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span> <span class="bp">_</span> <span class="bp">=</span> <span class="bp">_</span> <span class="o">:=</span>
<span class="k">calc</span>
        <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">¬</span><span class="o">(</span><span class="n">A</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="o">(</span><span class="n">A</span> <span class="bp">∨</span> <span class="n">B</span><span class="o">)))</span>
      <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">C</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="o">(</span><span class="n">A</span> <span class="bp">∨</span> <span class="n">B</span><span class="o">)))</span>  <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">not_imp</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">C</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">B</span><span class="o">))</span>   <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">not_or_distrib</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">B</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">C</span><span class="o">))</span>   <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">and</span><span class="bp">.</span><span class="n">right_comm</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(((</span><span class="n">A</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">A</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">B</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">C</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="err">←</span> <span class="n">and_assoc</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="n">false</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">B</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">C</span><span class="o">))</span>    <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">and_not_self_iff</span> <span class="n">A</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">false</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">C</span><span class="o">))</span>           <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">false_and</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">false</span><span class="o">))</span>                <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">false_and</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="bp">¬</span><span class="o">(</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span>                           <span class="o">:</span> <span class="n">rfl</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">B</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">C</span><span class="o">)</span>                           <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">not_imp</span>
</pre></div>

<a name="133492460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492460" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492460">Simon Hudon (Sep 07 2018 at 06:21)</a>:</h4>
<p>I'm a bit vague on the rule for <code>iff</code> and other rewrite rules but in general, if an argument can be inferred from other arguments, it should be implicit. For rewrite rules, I think all the arguments that can be inferred from the lhs of the equation should be implicit.</p>

<a name="133492546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492546" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492546">Tobias Grosser (Sep 07 2018 at 06:23)</a>:</h4>
<p>I see. Thanks <span class="user-mention" data-user-id="110026">@Simon Hudon</span></p>

<a name="133492706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492706" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492706">Mario Carneiro (Sep 07 2018 at 06:28)</a>:</h4>
<div class="codehilite"><pre><span></span>example {A B C : Prop} : ((B → C) → (¬(A → C) ∧ ¬(A ∨ B))) = (B ∧ ¬C) :=
by apply classical.cases_on A;
   apply classical.cases_on B;
   apply classical.cases_on C; simp
</pre></div>


<p>The idea behind the rule for iff is that these are more often used as combined unidirectional rules, and in this case any argument present on both lhs and rhs are inferrable</p>

<a name="133492713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492713">Simon Hudon (Sep 07 2018 at 06:29)</a>:</h4>
<p>Have you tried <code>tauto</code>?</p>

<a name="133492719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492719" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492719">Mario Carneiro (Sep 07 2018 at 06:29)</a>:</h4>
<p>doesn't seem to do anything</p>

<a name="133492758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492758">Mario Carneiro (Sep 07 2018 at 06:30)</a>:</h4>
<p><code>propext $ by tauto</code> works though</p>

<a name="133492768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492768" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492768">Simon Hudon (Sep 07 2018 at 06:30)</a>:</h4>
<p>Right! You need the propositions to be decidable</p>

<a name="133492774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492774" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492774">Kenny Lau (Sep 07 2018 at 06:30)</a>:</h4>
<blockquote>
<p>example {A B C : Prop} : ((B → C) → (¬(A → C) ∧ ¬(A ∨ B))) = (B ∧ ¬C) :=<br>
by apply classical.cases_on A;<br>
   apply classical.cases_on B;<br>
   apply classical.cases_on C; simp</p>
</blockquote>
<p>that's the proof of completeness!</p>

<a name="133492780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492780" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492780">Simon Hudon (Sep 07 2018 at 06:30)</a>:</h4>
<blockquote>
<p><code>propext $ by tauto</code> works though</p>
</blockquote>
<p>Interesting! That should be worth adding to the tactic</p>

<a name="133492790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492790" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492790">Mario Carneiro (Sep 07 2018 at 06:31)</a>:</h4>
<p>mathlib tries to avoid equality of propositions though</p>

<a name="133492794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492794" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492794">Mario Carneiro (Sep 07 2018 at 06:31)</a>:</h4>
<p>it's always stated as an iff</p>

<a name="133492795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492795" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492795">Kenny Lau (Sep 07 2018 at 06:31)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span> <span class="o">((</span><span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">¬</span><span class="o">(</span><span class="n">A</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="o">(</span><span class="n">A</span> <span class="bp">∨</span> <span class="n">B</span><span class="o">)))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">B</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">C</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">by_cases</span> <span class="n">A</span><span class="bp">;</span> <span class="n">by_cases</span> <span class="n">B</span><span class="bp">;</span> <span class="n">by_cases</span> <span class="n">C</span><span class="bp">;</span> <span class="n">simp</span><span class="bp">*</span>
</pre></div>

<a name="133492839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133492839" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133492839">Mario Carneiro (Sep 07 2018 at 06:32)</a>:</h4>
<p>oh, of course - <code>simp</code> will rewrite <code>A</code> to <code>true</code> or <code>false</code> given the <code>by_cases</code> assumption</p>

<a name="133493165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493165" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493165">Tobias Grosser (Sep 07 2018 at 06:42)</a>:</h4>
<p>Nice. I am currently translating some student exercises, so I try to use the 'calc' mode to really show step-by-step how things evolve.</p>

<a name="133493168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493168" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493168">Tobias Grosser (Sep 07 2018 at 06:42)</a>:</h4>
<p>This worked quite well so far. Nice to see that the tactics work so well too.</p>

<a name="133493180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493180" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493180">Mario Carneiro (Sep 07 2018 at 06:43)</a>:</h4>
<p>you should be able to use <code>&lt;-&gt;</code> in those calc blocks</p>

<a name="133493249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493249" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493249">Tobias Grosser (Sep 07 2018 at 06:45)</a>:</h4>
<p>Yes, I can replace = with &lt;-&gt;</p>

<a name="133493250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493250" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493250">Tobias Grosser (Sep 07 2018 at 06:45)</a>:</h4>
<p>Does this have any benefits?</p>

<a name="133493323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493323" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493323">Mario Carneiro (Sep 07 2018 at 06:47)</a>:</h4>
<p>only it's more idiomatic; <code>rw</code> and friends will work either way</p>

<a name="133493366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493366" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493366">Tobias Grosser (Sep 07 2018 at 06:48)</a>:</h4>
<p>Why exactly is it more idiomatic?</p>

<a name="133493378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493378" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493378">Mario Carneiro (Sep 07 2018 at 06:48)</a>:</h4>
<p>because it's easier to work with iff since you can destruct it, and you don't need the propext axiom to prove things about it</p>

<a name="133493381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493381" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493381">Simon Hudon (Sep 07 2018 at 06:48)</a>:</h4>
<p><code>=</code> has stronger precedence than <code>&lt;-&gt;</code> and the other connectives so <code>&lt;-&gt;</code> yields formulas with fewer brackets</p>

<a name="133493395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493395" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493395">Tobias Grosser (Sep 07 2018 at 06:50)</a>:</h4>
<p>Great.</p>

<a name="133493439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493439" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493439">Tobias Grosser (Sep 07 2018 at 06:50)</a>:</h4>
<p>Need to get back to normal life. Thanks for your help.</p>

<a name="133493443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493443" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493443">Mario Carneiro (Sep 07 2018 at 06:50)</a>:</h4>
<p>But "idiomatic" really just means that it is used, like a convention - it doesn't need a reason per se, it's valuable because it is the convention</p>

<a name="133493454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493454" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493454">Mario Carneiro (Sep 07 2018 at 06:51)</a>:</h4>
<p>i.e. it will make it easier to fit with and apply existing theorems</p>

<a name="133493465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493465" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493465">Tobias Grosser (Sep 07 2018 at 06:51)</a>:</h4>
<p>I understand the meaning of idiomatic.</p>

<a name="133493475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493475" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493475">Tobias Grosser (Sep 07 2018 at 06:51)</a>:</h4>
<p>Wanted understand the underlying motivation.</p>

<a name="133493477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493477" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493477">Mario Carneiro (Sep 07 2018 at 06:51)</a>:</h4>
<p>so another answer is "there are two options, we picked one"</p>

<a name="133493517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493517" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493517">Tobias Grosser (Sep 07 2018 at 06:52)</a>:</h4>
<p>If I want my proofs to be understood in the end, it helps to learn the choices you as a community have taken.</p>

<a name="133493522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493522" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493522">Mario Carneiro (Sep 07 2018 at 06:52)</a>:</h4>
<p>I think logic textbooks usually use &lt;-&gt;</p>

<a name="133493526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493526" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493526">Mario Carneiro (Sep 07 2018 at 06:52)</a>:</h4>
<p>or sometimes ≡</p>

<a name="133493527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133493527" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133493527">Tobias Grosser (Sep 07 2018 at 06:52)</a>:</h4>
<p>I can learn them easier if I can get an intuition where things come from.</p>

<a name="133708725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133708725" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133708725">Keeley Hoek (Sep 11 2018 at 04:25)</a>:</h4>
<p>Cool fact: <code>rewrite_search</code> solves this problem instantly:</p>
<div class="codehilite"><pre><span></span>local attribute [search] imp_iff_not_or not_or_distrib not_not and_assoc and_comm and_not_self_iff and_false not_not

example {A B C : Prop} : ((B → C) → (¬(A → C) ∧ ¬(A ∨ B))) = (B ∧ ¬C) :=
  by rewrite_search_using [`search]
</pre></div>

<a name="133712079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133712079" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133712079">Scott Morrison (Sep 11 2018 at 06:12)</a>:</h4>
<p>We really need to think about automatic lemma selection for rewrite_search.</p>

<a name="133712089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133712089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133712089">Scott Morrison (Sep 11 2018 at 06:12)</a>:</h4>
<p>Possible just finer attribute tagging (e.g. [search logic], [search list], [search category_theory]).</p>

<a name="133712100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133712100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133712100">Scott Morrison (Sep 11 2018 at 06:13)</a>:</h4>
<p>Perhaps even teach rewrite_search to automatically select from different bundles of lemmas depending on what it sees in the goal.</p>

<a name="133712505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133712505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133712505">Keeley Hoek (Sep 11 2018 at 06:25)</a>:</h4>
<p>At least for me, just printing out every definition in a modest real-ish maths environment takes 30 seconds, so I think some form of bundling will have to be the way to go. Maybe barring some emergency "show me the way" mode.</p>

<a name="133712553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133712553" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133712553">Keeley Hoek (Sep 11 2018 at 06:26)</a>:</h4>
<p>Though "find me a lemma" mode could be a useful tactic in its own right I suppose</p>

<a name="133712665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133712665" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133712665">Keeley Hoek (Sep 11 2018 at 06:30)</a>:</h4>
<p>I guess that's what I'll try next</p>

<a name="133714529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20only%20simplifies%20if%20piped%20through%20my%20own%20function/near/133714529" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16515rwonlysimplifiesifpipedthroughmyownfunction.html#133714529">Patrick Massot (Sep 11 2018 at 07:27)</a>:</h4>
<blockquote>
<p>We really need to think about automatic lemma selection for rewrite_search.</p>
</blockquote>
<p>This is all very nice, but don't forget that this is a whole research area. So don't expect this to be super easy, and maybe have a look at what already exists. I think the keyword is "relevance filter"</p>


{% endraw %}
