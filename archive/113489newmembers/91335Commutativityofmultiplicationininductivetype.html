---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113489newmembers/91335Commutativityofmultiplicationininductivetype.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/91335Commutativityofmultiplicationininductivetype.html">Commutativity of multiplication in inductive type</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="154475123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Commutativity%20of%20multiplication%20in%20inductive%20type/near/154475123" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/91335Commutativityofmultiplicationininductivetype.html#154475123">Carlesso Diego (Jan 05 2019 at 14:24)</a>:</h4>
<p>Hi! As it is suggested in exercise n1 chapter 7 of "theorem Proving in Lean" I'm trying to define some operations(such as multiplication, predecessor etc.) with the inductive type and then prove some theorem about them as they did with addition. I'm struggling at the moment with trying to prove commutativity of multiplication, in the following code my problems start at the proper comment "HERE".</p>
<div class="codehilite"><pre><span></span><span class="kn">namespace</span> <span class="n">hidden</span>


<span class="kn">inductive</span> <span class="n">nat</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">zero</span> <span class="o">:</span> <span class="n">nat</span>
<span class="bp">|</span> <span class="n">succ</span> <span class="o">:</span> <span class="n">nat</span> <span class="bp">→</span> <span class="n">nat</span>
<span class="kn">namespace</span> <span class="n">nat</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_zero</span> <span class="n">nat</span> <span class="o">:=</span> <span class="n">has_zero</span><span class="bp">.</span><span class="n">mk</span> <span class="n">zero</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_one</span> <span class="n">nat</span> <span class="o">:=</span> <span class="n">has_one</span><span class="bp">.</span><span class="n">mk</span> <span class="o">(</span><span class="n">succ</span> <span class="n">zero</span><span class="o">)</span>

<span class="c1">-- addition</span>
<span class="n">def</span> <span class="n">add</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">nat</span> <span class="o">:=</span>
<span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">n</span> <span class="n">m</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">n</span> <span class="n">add_m_n</span><span class="o">:</span> <span class="n">nat</span> <span class="o">),</span> <span class="n">succ</span> <span class="n">add_m_n</span><span class="o">)</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_add</span> <span class="n">nat</span> <span class="o">:=</span> <span class="n">has_add</span><span class="bp">.</span><span class="n">mk</span> <span class="n">add</span>

<span class="c1">-- properties add</span>
<span class="kn">theorem</span> <span class="n">add_zero</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">+</span> <span class="mi">0</span>  <span class="bp">=</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="kn">theorem</span> <span class="n">add_succ</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">succ</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="kn">theorem</span> <span class="n">zero_add</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">n</span> <span class="o">:=</span>
<span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">n</span>
  <span class="o">(</span><span class="k">show</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">zero</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span> <span class="k">from</span> <span class="n">rfl</span><span class="o">)</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">n</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">ih</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">n</span><span class="o">,</span>
    <span class="k">show</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">succ</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">succ</span> <span class="n">n</span><span class="o">,</span> <span class="k">from</span>
      <span class="k">calc</span>
        <span class="mi">0</span> <span class="bp">+</span> <span class="n">succ</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">+</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">rfl</span>
          <span class="bp">...</span> <span class="bp">=</span> <span class="n">succ</span> <span class="n">n</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">ih</span><span class="o">)</span>

<span class="kn">theorem</span> <span class="n">add_assoc</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="n">k</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">k</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">k</span>
  <span class="o">(</span><span class="k">show</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">),</span> <span class="k">from</span> <span class="n">rfl</span><span class="o">)</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">k</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">ih</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">k</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
    <span class="k">show</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">succ</span> <span class="n">k</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">succ</span> <span class="n">k</span><span class="o">),</span> <span class="k">from</span>
      <span class="k">calc</span>
        <span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">succ</span> <span class="n">k</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="o">:</span> <span class="n">rfl</span>
          <span class="bp">...</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">ih</span>
          <span class="bp">...</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">succ</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="o">:</span> <span class="n">rfl</span>
          <span class="bp">...</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">succ</span> <span class="n">k</span><span class="o">)</span> <span class="o">:</span> <span class="n">rfl</span><span class="o">)</span>

<span class="kn">theorem</span> <span class="n">succ_add</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">succ</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">n</span>
  <span class="o">(</span><span class="k">show</span> <span class="n">succ</span> <span class="n">m</span> <span class="bp">+</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">),</span> <span class="k">from</span> <span class="n">rfl</span><span class="o">)</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">n</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">ih</span> <span class="o">:</span> <span class="n">succ</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">n</span><span class="o">),</span>
    <span class="k">show</span> <span class="n">succ</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">succ</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">succ</span> <span class="n">n</span><span class="o">),</span> <span class="k">from</span>
      <span class="k">calc</span>
        <span class="n">succ</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">succ</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">succ</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">rfl</span>
          <span class="bp">...</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">succ</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">n</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">ih</span>
          <span class="bp">...</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">succ</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">rfl</span><span class="o">)</span>

<span class="kn">theorem</span> <span class="n">add_comm</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span> <span class="o">:=</span>
<span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">n</span>
  <span class="o">(</span><span class="k">show</span> <span class="n">m</span> <span class="bp">+</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">m</span><span class="o">,</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">zero_add</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">add_zero</span><span class="o">])</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">n</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">ih</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">,</span>
    <span class="k">calc</span>
        <span class="n">m</span> <span class="bp">+</span> <span class="n">succ</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">rfl</span>
        <span class="bp">...</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">ih</span>
        <span class="bp">...</span> <span class="bp">=</span> <span class="n">succ</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span> <span class="o">:</span>  <span class="k">by</span> <span class="n">rw</span> <span class="n">succ_add</span> <span class="o">)</span>

<span class="c1">-- multiplication</span>
<span class="n">def</span> <span class="n">mult</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span><span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">nat</span> <span class="o">:=</span>
<span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">n</span> <span class="n">zero</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span> <span class="n">mult_m_n</span><span class="o">,</span> <span class="n">add</span> <span class="n">mult_m_n</span> <span class="n">m</span> <span class="o">)</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_mul</span> <span class="n">nat</span> <span class="o">:=</span> <span class="n">has_mul</span><span class="bp">.</span><span class="n">mk</span> <span class="n">mult</span>

<span class="c1">-- properties mult</span>

<span class="kn">theorem</span> <span class="n">mul_zero</span> <span class="o">(</span><span class="n">m</span><span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">mult</span> <span class="n">m</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">rfl</span>  <span class="c1">-- m * 0 = 0</span>

<span class="kn">theorem</span> <span class="n">zero_mul</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">mult</span> <span class="mi">0</span> <span class="n">m</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>     <span class="c1">-- 0 * m = 0</span>
<span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">m</span>
    <span class="o">(</span><span class="k">show</span>  <span class="mi">0</span> <span class="bp">*</span> <span class="n">zero</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span> <span class="k">from</span> <span class="n">rfl</span><span class="o">)</span>
    <span class="o">(</span><span class="k">assume</span> <span class="n">m</span><span class="o">,</span>
     <span class="k">assume</span> <span class="n">ih</span><span class="o">:</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
     <span class="k">show</span>  <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="n">succ</span> <span class="n">m</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span> <span class="k">from</span>
        <span class="k">calc</span>
             <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="n">succ</span> <span class="n">m</span><span class="o">)</span> <span class="bp">=</span>    <span class="mi">0</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">:</span> <span class="n">rfl</span>
            <span class="bp">...</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">*</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">ih</span>
            <span class="bp">...</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">:</span> <span class="n">rfl</span>
    <span class="o">)</span>

<span class="kn">theorem</span> <span class="n">succ_mul</span> <span class="o">(</span><span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">)</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">=</span> <span class="o">(</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">m</span> <span class="o">)</span> <span class="bp">+</span> <span class="n">m</span> <span class="o">:=</span>  <span class="c1">-- ( n + 1 ) * m = ( n * m ) + m</span>
    <span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">m</span>
        <span class="o">(</span><span class="k">show</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="mi">0</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span> <span class="bp">*</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">,</span> <span class="k">from</span> <span class="n">rfl</span><span class="o">)</span>
        <span class="o">(</span><span class="k">assume</span> <span class="n">m</span><span class="o">,</span>
         <span class="k">assume</span> <span class="n">ih</span><span class="o">:</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">=</span> <span class="o">(</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">m</span> <span class="o">)</span> <span class="bp">+</span> <span class="n">m</span><span class="o">,</span>
         <span class="k">show</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span> <span class="n">n</span> <span class="bp">*</span><span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="k">from</span>
         <span class="k">calc</span>
            <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">m</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">rfl</span>
            <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span> <span class="bp">*</span> <span class="n">m</span><span class="o">)</span> <span class="bp">+</span> <span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">ih</span>
            <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span> <span class="bp">*</span> <span class="n">m</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">add_assoc</span>
            <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span> <span class="bp">*</span> <span class="n">m</span><span class="o">)</span> <span class="bp">+</span> <span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="n">m</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">add_comm</span> <span class="c1">-- HERE</span>
            <span class="bp">...</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ_add_eq_succ_add</span> <span class="c1">-- ((n + 1) + m) = ( n + (m + 1))</span>
            <span class="bp">...</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">+</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">add_assoc</span>
            <span class="bp">...</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">):</span> <span class="n">rfl</span>

        <span class="o">)</span>


<span class="kn">theorem</span> <span class="n">mul_comm</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span>  <span class="n">m</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">m</span> <span class="o">:=</span>        <span class="c1">-- m * n = n * m</span>
<span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">n</span>
    <span class="o">(</span><span class="k">show</span>  <span class="n">m</span> <span class="bp">*</span> <span class="mi">0</span> <span class="bp">=</span>  <span class="mi">0</span> <span class="bp">*</span> <span class="n">m</span> <span class="o">,</span> <span class="k">from</span>  <span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="o">(</span><span class="n">zero_mul</span> <span class="n">m</span><span class="o">)</span> <span class="o">)</span>
    <span class="o">(</span><span class="k">assume</span> <span class="n">n</span> <span class="o">,</span>
     <span class="k">assume</span> <span class="n">ih</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">m</span><span class="o">,</span>
     <span class="k">show</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="o">(</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">m</span><span class="o">,</span> <span class="k">from</span>
        <span class="k">calc</span> <span class="n">m</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>  <span class="n">m</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_add</span><span class="o">,</span>
            <span class="bp">...</span> <span class="bp">=</span>  <span class="o">(</span><span class="n">n</span> <span class="bp">*</span> <span class="n">m</span><span class="o">)</span> <span class="bp">+</span> <span class="n">m</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">ih</span><span class="o">,</span>
            <span class="bp">...</span> <span class="bp">=</span>  <span class="o">(</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">m</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">succ_mul</span>

            <span class="o">)</span>

<span class="kn">end</span> <span class="n">nat</span>
<span class="kn">end</span> <span class="n">hidden</span>
</pre></div>


<p>I think that the proof is correct, or at least I can't see the error, maybe I'm using  <code>rw </code> in<code>calc</code> in a wrong way.<br>
The errors I got are in <code>succ_mul</code> and in <code>mul_comm</code>.<br>
(the <code>instance</code> command I use is something I shouldn't know from the tutorial but as they use it once I adapt it to my needs, maybe I did it in a wrong way, but I don't think that that is the main problem. From what I understand is just a way, for example, to let me use <code>m * n</code>instead of <code>mult m n</code>  ).</p>

<a name="154475186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Commutativity%20of%20multiplication%20in%20inductive%20type/near/154475186" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/91335Commutativityofmultiplicationininductivetype.html#154475186">Chris Hughes (Jan 05 2019 at 14:27)</a>:</h4>
<p><code>rw add_comm m</code> works at <code>HERE</code>. There are two places where it's possible to <code>rw add_comm</code> so you have to give the correct one.</p>

<a name="154475231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Commutativity%20of%20multiplication%20in%20inductive%20type/near/154475231" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/91335Commutativityofmultiplicationininductivetype.html#154475231">Chris Hughes (Jan 05 2019 at 14:29)</a>:</h4>
<p>On the next line you use a lemma about <code>nat</code> in the core library, which doesn't apply to the <code>nat</code> that you defined.</p>

<a name="154510669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Commutativity%20of%20multiplication%20in%20inductive%20type/near/154510669" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/91335Commutativityofmultiplicationininductivetype.html#154510669">Carlesso Diego (Jan 06 2019 at 10:23)</a>:</h4>
<blockquote>
<p><code>rw add_comm m</code> works at <code>HERE</code>. There are two places where it's possible to <code>rw add_comm</code> so you have to give the correct one.</p>
</blockquote>
<p>thank you, you are right! I wasn't considering it. Solved, even the next line I succeeded with an <code>add_assoc</code> and another  <code>add_comm m </code>  in order to avoid the problem with the lemma about <code>nat</code> in the core library  , it was easier than I thought .<br>
 Now I have solved everything simply adding :</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">mul_succ</span> <span class="o">(</span><span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">*</span> <span class="o">(</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">)</span> <span class="bp">=</span> <span class="o">(</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">n</span> <span class="o">)</span> <span class="bp">+</span> <span class="n">m</span> <span class="o">:=</span>
    <span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">m</span>
        <span class="o">(</span><span class="k">show</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">*</span> <span class="n">n</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">,</span> <span class="k">from</span> <span class="n">rfl</span><span class="o">)</span>
        <span class="o">(</span><span class="k">assume</span> <span class="n">m</span><span class="o">,</span>
         <span class="k">assume</span> <span class="n">ih</span><span class="o">:</span> <span class="n">m</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">n</span> <span class="o">)</span> <span class="bp">+</span> <span class="n">m</span><span class="o">,</span>
         <span class="k">show</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span> <span class="n">n</span><span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">n</span> <span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="k">from</span>
         <span class="k">calc</span>
            <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">((</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">n</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">rfl</span>
            <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">m</span> <span class="bp">*</span> <span class="n">n</span><span class="o">)</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">+</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">succ_mul</span>
            <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">n</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="err">←</span><span class="n">succ_mul</span>
</pre></div>


<p>and with <code>mul_comm</code> becoming:</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">mul_comm</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span>  <span class="n">m</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">m</span> <span class="o">:=</span>        <span class="c1">-- m * n = n * m</span>
<span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">n</span>
    <span class="o">(</span><span class="k">show</span>  <span class="n">m</span> <span class="bp">*</span> <span class="mi">0</span> <span class="bp">=</span>  <span class="mi">0</span> <span class="bp">*</span> <span class="n">m</span> <span class="o">,</span> <span class="k">from</span>  <span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="o">(</span><span class="n">zero_mul</span> <span class="n">m</span><span class="o">)</span> <span class="o">)</span>
    <span class="o">(</span><span class="k">assume</span> <span class="n">n</span><span class="o">,</span>
     <span class="k">assume</span> <span class="n">ih</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">m</span><span class="o">,</span>
     <span class="k">show</span> <span class="n">m</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">)</span> <span class="bp">*</span> <span class="n">m</span><span class="o">,</span> <span class="k">from</span>
        <span class="k">calc</span> <span class="n">m</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span>  <span class="o">(</span><span class="n">m</span> <span class="bp">*</span> <span class="n">n</span><span class="o">)</span> <span class="bp">+</span> <span class="n">m</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_succ</span>
            <span class="bp">...</span> <span class="bp">=</span>  <span class="o">(</span><span class="n">n</span> <span class="bp">*</span> <span class="n">m</span><span class="o">)</span> <span class="bp">+</span> <span class="n">m</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">ih</span>
            <span class="bp">...</span> <span class="bp">=</span>  <span class="o">(</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">m</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">succ_mul</span>

            <span class="o">)</span>
</pre></div>


<p>Thanks again!</p>


{% endraw %}
