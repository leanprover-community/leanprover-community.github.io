---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113489newmembers/31111Coercingtooption.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html">Coercing to option</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="155204948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155204948" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155204948">Abhimanyu Pallavi Sudhir (Jan 16 2019 at 08:14)</a>:</h4>
<p>Where can I find lemmas about coercing to option (e.g. <code>ℕ</code> to <code>option ℕ</code>)? I want basic things like <code>↑(n - m) = ↑n - ↑m</code>.</p>

<a name="155204961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155204961" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155204961">Mario Carneiro (Jan 16 2019 at 08:15)</a>:</h4>
<p>what does subtraction mean?</p>

<a name="155204982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155204982" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155204982">Mario Carneiro (Jan 16 2019 at 08:15)</a>:</h4>
<p>I don't think option has a <code>has_sub</code> instance</p>

<a name="155205154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205154" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205154">Abhimanyu Pallavi Sudhir (Jan 16 2019 at 08:17)</a>:</h4>
<p>But option N does.</p>

<a name="155205221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205221" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205221">Abhimanyu Pallavi Sudhir (Jan 16 2019 at 08:18)</a>:</h4>
<p>Oh wait, you mean <code>↑n - ↑m</code> won't be defined at all.</p>

<a name="155205251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205251" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205251">Abhimanyu Pallavi Sudhir (Jan 16 2019 at 08:18)</a>:</h4>
<p>What about something like <code>1 + ↑(n - 1) = ↑n</code>? That's what I actually need to prove.</p>

<a name="155205270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205270" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205270">Mario Carneiro (Jan 16 2019 at 08:18)</a>:</h4>
<p>option doesn't have an add or 1 either</p>

<a name="155205286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205286" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205286">Mario Carneiro (Jan 16 2019 at 08:18)</a>:</h4>
<p>what are you doing?</p>

<a name="155205303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205303" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205303">Abhimanyu Pallavi Sudhir (Jan 16 2019 at 08:19)</a>:</h4>
<p>Degrees of polynomials.</p>

<a name="155205315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205315" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205315">Abhimanyu Pallavi Sudhir (Jan 16 2019 at 08:19)</a>:</h4>
<p>You can add degrees of polynomials, but they're defined via option.</p>

<a name="155205329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205329" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205329">Mario Carneiro (Jan 16 2019 at 08:19)</a>:</h4>
<p>Isn't it <code>with_bot N</code> or something?</p>

<a name="155205336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205336" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205336">Abhimanyu Pallavi Sudhir (Jan 16 2019 at 08:19)</a>:</h4>
<p>Yeah.</p>

<a name="155205346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205346" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205346">Mario Carneiro (Jan 16 2019 at 08:19)</a>:</h4>
<p>that's a different thing</p>

<a name="155205412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205412" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205412">Abhimanyu Pallavi Sudhir (Jan 16 2019 at 08:20)</a>:</h4>
<p>Ok, because <code>with_bot</code> has additional structure.</p>

<a name="155205415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205415" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205415">Mario Carneiro (Jan 16 2019 at 08:20)</a>:</h4>
<p><code>with_bot</code> has an addition, <code>option</code> doesn't</p>

<a name="155205416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205416" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205416">Abhimanyu Pallavi Sudhir (Jan 16 2019 at 08:20)</a>:</h4>
<p>But how do I coerce to <code>with_bot</code>?</p>

<a name="155205423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205423" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205423">Abhimanyu Pallavi Sudhir (Jan 16 2019 at 08:20)</a>:</h4>
<p>I mean, are there lemmas about it in mathlib?</p>

<a name="155205548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205548" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205548">Mario Carneiro (Jan 16 2019 at 08:22)</a>:</h4>
<p>I think you want <code>with_bot.coe_add</code></p>

<a name="155205551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205551" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205551">Abhimanyu Pallavi Sudhir (Jan 16 2019 at 08:22)</a>:</h4>
<p>Ah, I see.</p>

<a name="155205560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205560" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205560">Mario Carneiro (Jan 16 2019 at 08:22)</a>:</h4>
<p>the lemmas are in <code>algebra.ordered_group</code></p>

<a name="155205587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205587" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205587">Mario Carneiro (Jan 16 2019 at 08:22)</a>:</h4>
<p>but if <code>n : nat</code> then <code>1 + \u(n - 1) = \u n</code> is false at 0</p>

<a name="155205616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205616" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205616">Abhimanyu Pallavi Sudhir (Jan 16 2019 at 08:23)</a>:</h4>
<p>Yeah, I have an <code>n &gt; 1</code> hypothesis, that's alright.</p>

<a name="155205634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205634" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205634">Mario Carneiro (Jan 16 2019 at 08:23)</a>:</h4>
<p>if you cases on <code>n</code> then the zero case is impossible and the succ case is by refl</p>

<a name="155205704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155205704" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155205704">Mario Carneiro (Jan 16 2019 at 08:24)</a>:</h4>
<p>oh wait, not refl, you have to commute the 1+ first</p>

<a name="155206605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Coercing%20to%20option/near/155206605" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/31111Coercingtooption.html#155206605">Kevin Buzzard (Jan 16 2019 at 08:36)</a>:</h4>
<blockquote>
<p>that's a different thing</p>
</blockquote>
<p>It's a definitionally equal thing. Definitional equality is a subtle beast. At times you should just treat definitionally equal things as the same, but at other times you shouldn't, and this is one of those times. This came up today in my M1P1 talk. We tried <code>linarith</code> to finish the proof that any two limits of a sequence were equal, and it failed, because we had hypotheses of the form <code>l &lt; m -&gt; false</code>. When we changed them to the definitionally equal <code>\not (l &lt; m)</code> linarith suddenly worked! What is going on, I guess, is that linarith is looking at what "kind" of an expression it can see, and <code>l &lt; m -&gt; false</code> is "just some function" to linarith, whereas <code>\not (l &lt; m)</code> is "a linear inequality that I can use". Similarly type class inference for + is going to trigger on <code>with_bot nat</code> but perhaps not on <code>option nat</code> even though they're definitionally equal. I hope I've got this mostly right. These things might be definitionally equal, but they are different expressions so tactics or other bits of Lean might treat them in different ways. For unification they will be the same but for rewrites they won't. etc etc.</p>


{% endraw %}
