---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/25823Provingn2notequal2.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html">Proving n^2 not equal 2</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="133132228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133132228" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133132228">Yuhan Du (Aug 31 2018 at 16:01)</a>:</h4>
<p>I am trying to prove the statement that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>n</mi><mn>2</mn></msup><mo>≠</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">n^2 \neq 2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:1.029108em;vertical-align:-0.215em;"></span><span class="base"><span class="mord"><span class="mord mathit">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">2</span></span></span></span></span></span></span></span><span class="mrel">≠</span><span class="mord mathrm">2</span></span></span></span></p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group_power</span>
<span class="kn">theorem</span> <span class="n">what_i_need</span><span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="o">,</span> <span class="n">n</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>


<p>Could someone possibly help me?</p>

<a name="133132637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133132637" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133132637">Kevin Buzzard (Aug 31 2018 at 16:08)</a>:</h4>
<p>Yesterday there was some chat about proving integer squares were 0 or 1 or 4 mod 8. It just occurs to me that an analogous approach mod 4 would do this (or mod 3)</p>

<a name="133132650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133132650" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133132650">Kevin Buzzard (Aug 31 2018 at 16:08)</a>:</h4>
<p><a href="#narrow/stream/116395-maths/topic/0.3C.3Dd.3C3.20implies.20d.3D0.2C1.2C2" title="#narrow/stream/116395-maths/topic/0.3C.3Dd.3C3.20implies.20d.3D0.2C1.2C2">https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/0.3C.3Dd.3C3.20implies.20d.3D0.2C1.2C2</a></p>

<a name="133132662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133132662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133132662">Patrick Massot (Aug 31 2018 at 16:09)</a>:</h4>
<p>have you looked at <a href="https://github.com/leanprover/mathlib/blob/master/data/nat/prime.lean" target="_blank" title="https://github.com/leanprover/mathlib/blob/master/data/nat/prime.lean">https://github.com/leanprover/mathlib/blob/master/data/nat/prime.lean</a>?</p>

<a name="133133995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133133995" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133133995">Mario Carneiro (Aug 31 2018 at 16:36)</a>:</h4>
<p>Well, this is quite a bit easier than proving that sqrt 2 is irrational</p>

<a name="133134009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133134009" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133134009">Mario Carneiro (Aug 31 2018 at 16:36)</a>:</h4>
<p>You can do it by cases on <code>n.nat_abs</code></p>

<a name="133134023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133134023" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133134023">Mario Carneiro (Aug 31 2018 at 16:37)</a>:</h4>
<p>too small when it is 0 or 1, too big when it is &gt;= 2</p>

<a name="133134030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133134030" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133134030">Chris Hughes (Aug 31 2018 at 16:37)</a>:</h4>
<p>This is one method.</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">zmod</span>

<span class="kn">example</span> <span class="o">:</span> <span class="bp">¬</span> <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">,</span> <span class="n">n</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="bp">⟨</span><span class="n">n</span><span class="o">,</span> <span class="n">hn</span><span class="bp">⟩</span><span class="o">,</span> <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">3</span><span class="o">,</span> <span class="n">n</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">≠</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">),</span> <span class="k">from</span> <span class="n">dec_trivial</span><span class="o">,</span>
<span class="k">by</span> <span class="k">have</span> <span class="o">:=</span> <span class="n">h</span> <span class="n">n</span><span class="bp">;</span> <span class="n">rw</span> <span class="err">←</span> <span class="n">hn</span> <span class="n">at</span> <span class="n">this</span><span class="bp">;</span> <span class="n">simpa</span>
</pre></div>

<a name="133134087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133134087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133134087">Kevin Buzzard (Aug 31 2018 at 16:38)</a>:</h4>
<p>The congruence trick is somehow better -- if a positive integer is not a square then it's not a square mod p for infinitely many p, and so you can just work in zmod p for the smallest such p :-)</p>

<a name="133134103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133134103" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133134103">Chris Hughes (Aug 31 2018 at 16:38)</a>:</h4>
<p>It's also not very easy to come up with.</p>

<a name="133134107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133134107" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133134107">Mario Carneiro (Aug 31 2018 at 16:38)</a>:</h4>
<p>Even easier, you can square the square root and see if it matches</p>

<a name="133134115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133134115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133134115">Mario Carneiro (Aug 31 2018 at 16:39)</a>:</h4>
<p>that should make it an easy dec_trivial proof</p>

<a name="133134185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133134185" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133134185">Kevin Buzzard (Aug 31 2018 at 16:40)</a>:</h4>
<p>Oh that's a good idea -- prove that n is a square iff (sqrt n)^2=n</p>

<a name="133134869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133134869" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133134869">Chris Hughes (Aug 31 2018 at 16:53)</a>:</h4>
<p>Not quite sure why this doesn't work</p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">h</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">,</span> <span class="n">n</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="n">m</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">decidable_of_iff</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="n">m</span> <span class="bp">∧</span> <span class="n">m</span><span class="bp">.</span><span class="n">nat_abs</span><span class="bp">.</span><span class="n">sqrt</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="n">m</span><span class="bp">.</span><span class="n">nat_abs</span><span class="o">)</span>
<span class="bp">⟨λ</span> <span class="n">h</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">nat</span><span class="bp">.</span><span class="n">sqrt</span> <span class="n">m</span><span class="bp">.</span><span class="n">nat_abs</span><span class="o">,</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_pow</span><span class="o">,</span> <span class="n">h</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs_of_nonneg</span> <span class="n">h</span><span class="bp">.</span><span class="mi">1</span><span class="o">]</span><span class="bp">⟩</span><span class="o">,</span>
 <span class="bp">λ</span> <span class="bp">⟨</span><span class="n">s</span><span class="o">,</span> <span class="n">hs</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">hs</span> <span class="bp">▸</span> <span class="o">(</span><span class="n">pow_two_nonneg</span> <span class="bp">_</span><span class="o">),</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">hs</span><span class="o">,</span> <span class="n">pow_two</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs_mul</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">sqrt_eq</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">pow_two</span><span class="o">]</span><span class="bp">⟩⟩</span>

<span class="bp">#</span><span class="kn">eval</span> <span class="o">(</span><span class="bp">¬</span> <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">,</span> <span class="n">n</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:</span> <span class="n">bool</span><span class="o">)</span>

<span class="kn">lemma</span> <span class="n">two_not_square</span> <span class="o">:</span> <span class="bp">¬</span> <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">,</span> <span class="n">n</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
</pre></div>

<a name="133134933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133134933" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133134933">Mario Carneiro (Aug 31 2018 at 16:54)</a>:</h4>
<p><code>nat.sqrt</code> is defined through well founded recursion, which may cause a problem on all but the simplest problems. A similar issue came up with <code>nat.prime</code></p>

<a name="133134946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133134946" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133134946">Mario Carneiro (Aug 31 2018 at 16:55)</a>:</h4>
<p>I assume the <code>#eval</code> worked</p>

<a name="133134958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133134958" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133134958">Chris Hughes (Aug 31 2018 at 16:55)</a>:</h4>
<p>The eval did work. So the issue is that it's just too slow?</p>

<a name="133135006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133135006" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133135006">Mario Carneiro (Aug 31 2018 at 16:56)</a>:</h4>
<p>I think it won't reduce well founded proofs because it requires evaluating theorems</p>

<a name="133135016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133135016" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133135016">Mario Carneiro (Aug 31 2018 at 16:56)</a>:</h4>
<p>you can probably get <code>#reduce</code> to do it but that's not so helpful</p>

<a name="133135036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133135036" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133135036">Mario Carneiro (Aug 31 2018 at 16:57)</a>:</h4>
<p>We need another <code>norm_num</code> extension for this</p>

<a name="133135213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133135213" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133135213">Chris Hughes (Aug 31 2018 at 17:00)</a>:</h4>
<p>Why can I prove <code>example : nat.gcd 4 5 = 1 := rfl</code>? That uses well founded recursion I take it.</p>

<a name="133135479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133135479" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133135479">Mario Carneiro (Aug 31 2018 at 17:05)</a>:</h4>
<p>I think it is just a complexity problem. The <code>#reduce</code> times out for the sqrt example but not gcd</p>

<a name="133171042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133171042" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133171042">Patrick Massot (Sep 01 2018 at 09:43)</a>:</h4>
<p>This thread is really depressing. Sometimes I feel like we are going somewhere (like when we make progress on topological groups or noetherian modules) but then some super elementary problem is raised and we abruptly come back to reality: trivial things are not trivial at all in Lean.</p>

<a name="133171440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133171440" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133171440">Kevin Buzzard (Sep 01 2018 at 09:56)</a>:</h4>
<p>The proof that there's no integer whose square is 2 is "it doesn't work for small n, and big n are too big". Formalising this is a bore. Automating it is possible, but it hasn't been done yet. That's not depressing, it just means things need to be done. Chris made an attempt. In 1 year's time there might be 10 Chris's at Imperial (here's hoping).</p>

<a name="133175553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133175553" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133175553">Ali Sever (Sep 01 2018 at 12:09)</a>:</h4>
<p>I aspire to be a Chris one day</p>

<a name="133175779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133175779" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133175779">Kevin Buzzard (Sep 01 2018 at 12:17)</a>:</h4>
<p>That would be great Ali :-) come along on Thursday evenings in Oct and help me deal with the inevitable pile of freshers!</p>

<a name="133177505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133177505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133177505">Kenny Lau (Sep 01 2018 at 13:18)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">basic</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group_power</span>

<span class="kn">instance</span> <span class="n">nat</span><span class="bp">.</span><span class="n">decidable_bex_lt</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">,</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="o">[</span><span class="n">H</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span> <span class="n">h</span><span class="o">,</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">P</span> <span class="n">n</span> <span class="n">h</span><span class="o">)],</span> <span class="n">decidable</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">k</span> <span class="n">h</span><span class="o">,</span> <span class="n">P</span> <span class="n">k</span> <span class="n">h</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">IH</span><span class="bp">;</span> <span class="n">intro</span><span class="bp">;</span> <span class="n">resetI</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">is_false</span> <span class="o">(</span><span class="bp">λ</span> <span class="bp">⟨_</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="bp">_⟩</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">not_lt_zero</span> <span class="bp">_</span> <span class="n">h</span><span class="o">)</span> <span class="o">},</span>
  <span class="n">cases</span> <span class="n">IH</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">k</span> <span class="n">h</span><span class="o">,</span> <span class="n">P</span> <span class="n">k</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">lt_succ_of_lt</span> <span class="n">h</span><span class="o">))</span> <span class="k">with</span> <span class="n">h</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">by_cases</span> <span class="n">p</span> <span class="o">:</span> <span class="n">P</span> <span class="n">n</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">lt_succ_self</span> <span class="n">n</span><span class="o">),</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="n">is_true</span> <span class="bp">⟨</span><span class="n">n</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">lt_succ_self</span> <span class="n">n</span><span class="o">,</span> <span class="n">p</span><span class="bp">⟩</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">apply</span> <span class="n">is_false</span><span class="o">,</span>
      <span class="n">intro</span> <span class="n">hk</span><span class="o">,</span>
      <span class="n">rcases</span> <span class="n">hk</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">hk1</span><span class="o">,</span> <span class="n">hk2</span><span class="bp">⟩</span><span class="o">,</span>
      <span class="n">cases</span> <span class="n">nat</span><span class="bp">.</span><span class="n">lt_succ_iff_lt_or_eq</span><span class="bp">.</span><span class="mi">1</span> <span class="n">hk1</span> <span class="k">with</span> <span class="n">hk</span> <span class="n">hk</span><span class="o">,</span>
      <span class="o">{</span> <span class="n">exact</span> <span class="n">h</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">hk</span><span class="o">,</span> <span class="n">hk2</span><span class="bp">⟩</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">subst</span> <span class="n">hk</span><span class="o">,</span> <span class="n">exact</span> <span class="n">p</span> <span class="n">hk2</span> <span class="o">}</span> <span class="o">}</span> <span class="o">},</span>
  <span class="n">apply</span> <span class="n">is_true</span><span class="o">,</span>
  <span class="n">rcases</span> <span class="n">h</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">hk1</span><span class="o">,</span> <span class="n">hk2</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="n">exact</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">lt_succ_of_lt</span> <span class="n">hk1</span><span class="o">,</span> <span class="n">hk2</span><span class="bp">⟩</span>
<span class="kn">end</span>

<span class="kn">instance</span> <span class="n">nat</span><span class="bp">.</span><span class="n">decidable_bex_le</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">k</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">,</span> <span class="kt">Prop</span><span class="o">)</span>
  <span class="o">[</span><span class="bp">Π</span> <span class="n">n</span> <span class="n">h</span><span class="o">,</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">P</span> <span class="n">n</span> <span class="n">h</span><span class="o">)]</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">k</span> <span class="n">h</span><span class="o">,</span> <span class="n">P</span> <span class="n">k</span> <span class="n">h</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">decidable_of_iff</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">k</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">P</span> <span class="n">k</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">le_of_lt_succ</span> <span class="n">H</span><span class="o">))</span>
<span class="bp">⟨λ</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">le_of_lt_succ</span> <span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="bp">⟩</span><span class="o">,</span>
<span class="bp">λ</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">lt_succ_of_le</span> <span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="bp">⟩⟩</span>

<span class="kn">instance</span> <span class="n">decidable_mul_self_nat</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">k</span><span class="o">,</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">k</span> <span class="bp">=</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">decidable_of_iff</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">k</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">,</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">k</span> <span class="bp">=</span> <span class="n">n</span><span class="o">)</span>
<span class="bp">⟨λ</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">h2</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">λ</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">h1</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">h1</span> <span class="bp">▸</span> <span class="n">nat</span><span class="bp">.</span><span class="n">le_mul_self</span> <span class="n">k</span><span class="o">,</span> <span class="n">h1</span><span class="bp">⟩⟩</span>

<span class="kn">instance</span> <span class="n">decidable_sqr_nat</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">k</span><span class="o">,</span> <span class="n">k</span><span class="err">^</span><span class="mi">2</span> <span class="bp">=</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">decidable_of_iff</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">k</span><span class="o">,</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">k</span> <span class="bp">=</span> <span class="n">n</span><span class="o">)</span>
<span class="bp">⟨λ</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="k">by</span> <span class="n">rwa</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">pow_two</span><span class="o">]</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">λ</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="k">by</span> <span class="n">rwa</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">pow_two</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="bp">⟩⟩</span>

<span class="kn">instance</span> <span class="n">decidable_mul_self_int</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">),</span> <span class="n">decidable</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">k</span><span class="o">,</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">k</span> <span class="bp">=</span> <span class="n">n</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="n">decidable_of_iff</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">k</span><span class="o">,</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">k</span> <span class="bp">=</span> <span class="n">n</span><span class="o">)</span>
    <span class="bp">⟨λ</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">hk</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_mul</span><span class="o">,</span> <span class="n">hk</span><span class="o">]</span><span class="bp">;</span> <span class="n">refl</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="bp">λ</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">hk</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">int</span><span class="bp">.</span><span class="n">nat_abs</span> <span class="n">k</span><span class="o">,</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">int</span><span class="bp">.</span><span class="n">nat_abs_mul</span><span class="o">,</span> <span class="n">hk</span><span class="o">]</span><span class="bp">;</span> <span class="n">refl</span><span class="bp">⟩⟩</span>
<span class="bp">|</span> <span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="n">n</span><span class="o">]</span> <span class="o">:=</span> <span class="n">is_false</span> <span class="err">$</span> <span class="bp">λ</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">h1</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">not_lt_of_ge</span> <span class="o">(</span><span class="n">mul_self_nonneg</span> <span class="n">k</span><span class="o">)</span> <span class="err">$</span>
    <span class="n">h1</span><span class="bp">.</span><span class="n">symm</span> <span class="bp">▸</span> <span class="n">int</span><span class="bp">.</span><span class="n">neg_succ_of_nat_lt_zero</span> <span class="n">n</span>

<span class="kn">instance</span> <span class="n">decidable_sqr_int</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">k</span><span class="o">,</span> <span class="n">k</span><span class="err">^</span><span class="mi">2</span> <span class="bp">=</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">decidable_of_iff</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">k</span><span class="o">,</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">k</span> <span class="bp">=</span> <span class="n">n</span><span class="o">)</span>
<span class="bp">⟨λ</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="k">by</span> <span class="n">rwa</span> <span class="o">[</span><span class="n">pow_two</span><span class="o">]</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">λ</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">k</span><span class="o">,</span> <span class="k">by</span> <span class="n">rwa</span> <span class="o">[</span><span class="n">pow_two</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="bp">⟩⟩</span>

<span class="kn">theorem</span> <span class="n">what_i_need</span><span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="o">,</span> <span class="n">n</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">)</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
</pre></div>

<a name="133177509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133177509" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133177509">Kenny Lau (Sep 01 2018 at 13:18)</a>:</h4>
<p>btw the first part of my code is from <a href="#narrow/stream/113488-general/subject/bounded.20exists.20decidable/near/125567139" title="#narrow/stream/113488-general/subject/bounded.20exists.20decidable/near/125567139">this discussion</a> four months ago</p>

<a name="133177515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133177515" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133177515">Kenny Lau (Sep 01 2018 at 13:19)</a>:</h4>
<p>(and mathlib still doesn't know it's true :P)</p>

<a name="133177567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133177567" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133177567">Kenny Lau (Sep 01 2018 at 13:20)</a>:</h4>
<blockquote>
<p>This thread is really depressing. Sometimes I feel like we are going somewhere (like when we make progress on topological groups or noetherian modules) but then some super elementary problem is raised and we abruptly come back to reality: trivial things are not trivial at all in Lean.</p>
</blockquote>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> Well this is just a puzzle that cannot be generalized to more useful maths...</p>

<a name="133177980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133177980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133177980">Mario Carneiro (Sep 01 2018 at 13:35)</a>:</h4>
<p>Yes, of course this is the other option - to check n is a square, just look at all the squares and see if n is in the list. It is much slower than squaring the square root, but it works better in small cases in the kernel since there are no wf definitions involved</p>

<a name="133178989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133178989" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133178989">Patrick Massot (Sep 01 2018 at 14:05)</a>:</h4>
<p>Kenny, why don't you PR the general stuff above? That could be useful in lots of small annoying situations</p>

<a name="133178993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133178993" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133178993">Bryan Gin-ge Chen (Sep 01 2018 at 14:06)</a>:</h4>
<p>Following Patrick Massot's suggestion to look at <code>data.nat.prime</code>, I started trying to prove it using <code>nat.not_prime_mul</code>but I got stuck.</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group_power</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">prime</span>

<span class="kn">theorem</span> <span class="n">what_i_need</span><span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="o">,</span> <span class="n">n</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">)</span> <span class="o">:=</span>
<span class="k">have</span> <span class="n">p2</span><span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">prime</span> <span class="mi">2</span><span class="o">,</span> <span class="k">from</span> <span class="n">nat</span><span class="bp">.</span><span class="n">prime_two</span><span class="o">,</span>
<span class="k">begin</span>
<span class="n">unfold</span> <span class="n">pow</span><span class="o">,</span> <span class="n">unfold</span> <span class="n">monoid</span><span class="bp">.</span><span class="n">pow</span><span class="o">,</span>
<span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
<span class="n">exact</span> <span class="n">exists</span><span class="bp">.</span><span class="n">elim</span> <span class="n">h</span> <span class="o">(</span><span class="k">assume</span> <span class="n">n</span><span class="o">,</span>
<span class="k">begin</span>
<span class="n">clear</span> <span class="n">h</span><span class="o">,</span>
<span class="n">rw</span> <span class="o">[</span><span class="n">mul_one</span><span class="o">],</span>
<span class="k">assume</span> <span class="n">h1</span><span class="o">,</span>
<span class="bp">_</span>
<span class="c1">--have pnn : nat.prime (n*n), by sorry,</span>
<span class="c1">--exact false.elim ((nat.not_prime_mul (sorry) (sorry)) h1)</span>
<span class="kn">end</span>
<span class="o">)</span>
<span class="kn">end</span>
</pre></div>


<p>I think the main thing I'm missing how to do is showing that proving it for <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo>&lt;</mo><mi>n</mi><mo>∈</mo><mrow><mi mathvariant="double-struck">N</mi></mrow></mrow><annotation encoding="application/x-tex">1&lt;n \in \mathbb{N}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68889em;"></span><span class="strut bottom" style="height:0.72799em;vertical-align:-0.0391em;"></span><span class="base"><span class="mord mathrm">1</span><span class="mrel">&lt;</span><span class="mord mathit">n</span><span class="mrel">∈</span><span class="mord"><span class="mord mathbb">N</span></span></span></span></span> suffices to show it for all <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>∈</mo><mrow><mi mathvariant="double-struck">Z</mi></mrow></mrow><annotation encoding="application/x-tex">n\in\mathbb{Z}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68889em;"></span><span class="strut bottom" style="height:0.72799em;vertical-align:-0.0391em;"></span><span class="base"><span class="mord mathit">n</span><span class="mrel">∈</span><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span>.</p>

<a name="133179095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133179095" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133179095">Mario Carneiro (Sep 01 2018 at 14:09)</a>:</h4>
<p>In this direction, I suggest proving <code>¬ nat.prime (n*n)</code>. It has no assumptions, but you have to special case 0 and 1</p>

<a name="133179096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133179096" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133179096">Patrick Massot (Sep 01 2018 at 14:09)</a>:</h4>
<p>yes, this is what I had in mind</p>

<a name="133179135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133179135" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133179135">Patrick Massot (Sep 01 2018 at 14:10)</a>:</h4>
<p>I hoped that proving that from prime.lean wouldn't be too hard</p>

<a name="133179143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133179143" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133179143">Mario Carneiro (Sep 01 2018 at 14:10)</a>:</h4>
<p>I thought it was a theorem already but I could be mistaken</p>

<a name="133179146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133179146" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133179146">Mario Carneiro (Sep 01 2018 at 14:10)</a>:</h4>
<p>there is <code>not_prime_mul</code> which takes care of the large n case</p>

<a name="133179308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133179308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133179308">Patrick Massot (Sep 01 2018 at 14:17)</a>:</h4>
<p>Even without trying to go to the heart of the matter, natural number hell strikes:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group_power</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">prime</span>

<span class="kn">lemma</span> <span class="n">aux</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">nat</span><span class="bp">.</span><span class="n">prime</span> <span class="o">(</span><span class="n">n</span><span class="bp">*</span><span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kn">theorem</span> <span class="n">what_i_need</span><span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">,</span> <span class="n">n</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rintro</span> <span class="bp">⟨</span><span class="n">n</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">aux</span> <span class="n">n</span><span class="o">,</span>
  <span class="n">rw</span> <span class="err">←</span><span class="n">pow_two</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">nat</span><span class="bp">.</span><span class="n">prime_two</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>The <code>rw h</code> doesn't work. <code>simp [h]</code> does work, but these kind of things is really the worse of Lean</p>

<a name="133179314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133179314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133179314">Patrick Massot (Sep 01 2018 at 14:17)</a>:</h4>
<p>And I'm not even talking about trying to deduce the result with integers instead of natural numbers</p>

<a name="133179481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133179481" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133179481">Mario Carneiro (Sep 01 2018 at 14:22)</a>:</h4>
<p>you have to use <code>rw ← nat.pow_two</code></p>

<a name="133179740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133179740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133179740">Patrick Massot (Sep 01 2018 at 14:30)</a>:</h4>
<p>I'm sure there is a solution, but having to know all that is really painful</p>

<a name="133179820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133179820" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133179820">Mario Carneiro (Sep 01 2018 at 14:33)</a>:</h4>
<p>most of this "ambient knowledge" is encoded in the simp lemmas, which is why <code>simp [h]</code> worked. If you look at the rewrites used you will see normalization of the group_power instance on nat to <code>nat.pow</code></p>

<a name="133179863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133179863" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133179863">Mario Carneiro (Sep 01 2018 at 14:34)</a>:</h4>
<p>the problem is that <code>nat</code> has two power notations, one elementary from <code>nat.pow</code> and another from the group power instance</p>

<a name="133179866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133179866" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133179866">Mario Carneiro (Sep 01 2018 at 14:34)</a>:</h4>
<p><code>nat.pow</code> is the canonical one, at least until it is removed (it's in core)</p>

<a name="133180082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133180082" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133180082">Patrick Massot (Sep 01 2018 at 14:40)</a>:</h4>
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> </p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group_power</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">prime</span>

<span class="kn">open</span> <span class="n">nat</span>

<span class="kn">lemma</span> <span class="n">aux</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">nat</span><span class="bp">.</span><span class="n">prime</span> <span class="o">(</span><span class="n">n</span><span class="bp">*</span><span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">n</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">not_prime_zero</span><span class="o">]</span> <span class="kn">using</span> <span class="n">h</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">cases</span> <span class="n">n</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">not_prime_one</span><span class="o">]</span> <span class="kn">using</span> <span class="n">h</span> <span class="o">},</span>
    <span class="o">{</span> <span class="k">have</span> <span class="o">:</span> <span class="n">succ</span> <span class="o">(</span><span class="n">succ</span> <span class="n">n</span><span class="o">)</span> <span class="bp">&gt;</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">dec_trivial</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">not_prime_mul</span> <span class="n">this</span> <span class="n">this</span> <span class="n">h</span> <span class="o">}</span> <span class="o">}</span>
<span class="kn">end</span>

<span class="kn">theorem</span> <span class="n">what_i_need</span><span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">,</span> <span class="n">n</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rintro</span> <span class="bp">⟨</span><span class="n">n</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">aux</span> <span class="n">n</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">nat</span><span class="bp">.</span><span class="n">pow_two</span><span class="o">,</span> <span class="n">h</span><span class="o">],</span>
  <span class="n">exact</span> <span class="n">nat</span><span class="bp">.</span><span class="n">prime_two</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="133180087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133180087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133180087">Patrick Massot (Sep 01 2018 at 14:41)</a>:</h4>
<p>This is still cheating because there is nothing about negative integers</p>

<a name="133288582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133288582" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133288582">Bryan Gin-ge Chen (Sep 04 2018 at 03:07)</a>:</h4>
<p>A few days late and not very pretty, but I managed to complete your proof <span class="user-mention" data-user-id="110031">@Patrick Massot</span> </p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group_power</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">prime</span>

<span class="kn">open</span> <span class="n">nat</span>

<span class="kn">lemma</span> <span class="n">aux</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">prime</span> <span class="o">(</span><span class="n">n</span><span class="bp">*</span><span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">n</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">not_prime_zero</span><span class="o">]</span> <span class="kn">using</span> <span class="n">h</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">cases</span> <span class="n">n</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">not_prime_one</span><span class="o">]</span> <span class="kn">using</span> <span class="n">h</span> <span class="o">},</span>
    <span class="o">{</span> <span class="k">have</span> <span class="o">:</span> <span class="n">succ</span> <span class="o">(</span><span class="n">succ</span> <span class="n">n</span><span class="o">)</span> <span class="bp">&gt;</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">dec_trivial</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">not_prime_mul</span> <span class="n">this</span> <span class="n">this</span> <span class="n">h</span> <span class="o">}</span> <span class="o">}</span>
<span class="kn">end</span>

<span class="kn">theorem</span> <span class="n">what_i_need_N</span><span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">,</span> <span class="n">n</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rintro</span> <span class="bp">⟨</span><span class="n">n</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">aux</span> <span class="n">n</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">nat</span><span class="bp">.</span><span class="n">pow_two</span><span class="o">,</span> <span class="n">h</span><span class="o">],</span>
  <span class="n">exact</span> <span class="n">prime_two</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">open</span> <span class="n">int</span>

<span class="kn">lemma</span> <span class="n">sq_eq_nat_abs_sq</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">}</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">n</span><span class="err">^</span><span class="mi">2</span> <span class="bp">=</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="n">n</span><span class="err">^</span><span class="mi">2</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">_</span><span class="n">root_</span><span class="bp">.</span><span class="n">pow_two</span><span class="o">,</span> <span class="bp">_</span><span class="n">root_</span><span class="bp">.</span><span class="n">pow_two</span><span class="o">,</span>
<span class="err">←</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_mul</span><span class="o">,</span> <span class="n">nat_abs_mul_self</span><span class="o">]</span>

<span class="kn">lemma</span> <span class="n">nat_sq_of_int_sq</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">}</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">n</span><span class="err">^</span><span class="mi">2</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">nn</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">nn</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="n">m</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="o">(</span><span class="n">nat_abs</span> <span class="n">n</span><span class="o">),</span>
    <span class="n">apply</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_inj</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">pow_two</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_mul</span><span class="o">,</span> <span class="err">←</span> <span class="bp">_</span><span class="n">root_</span><span class="bp">.</span><span class="n">pow_two</span><span class="o">,</span>
    <span class="err">←</span> <span class="n">sq_eq_nat_abs_sq</span><span class="o">],</span>
  <span class="n">exact</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">m</span>
<span class="kn">end</span>

<span class="kn">theorem</span> <span class="n">what_i_need</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">,</span> <span class="n">n</span><span class="err">^</span><span class="mi">2</span> <span class="bp">=</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rintro</span> <span class="bp">⟨</span><span class="n">n</span><span class="o">,</span><span class="n">h</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">false</span><span class="bp">.</span><span class="n">elim</span> <span class="o">(</span><span class="n">what_i_need_N</span> <span class="o">(</span><span class="n">nat_sq_of_int_sq</span> <span class="n">h</span><span class="o">))</span>
<span class="kn">end</span>
</pre></div>


<p>I think I learned a few things along the way, though it still feels like I've got a long way to go before I can do anything useful...</p>

<a name="133295018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proving%20n%5E2%20not%20equal%202/near/133295018" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/25823Provingn2notequal2.html#133295018">Kevin Buzzard (Sep 04 2018 at 06:50)</a>:</h4>
<p>of course anyone reading this thread and seeing several very long proofs that 2 isn't a square might argue that we all have a long way to go before we can do anything useful...</p>


{% endraw %}

{% include archive_update.html %}