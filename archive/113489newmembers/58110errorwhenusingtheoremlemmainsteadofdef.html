---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/58110errorwhenusingtheoremlemmainsteadofdef.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/58110errorwhenusingtheoremlemmainsteadofdef.html">error when using theorem/lemma instead of def</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="183772819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/error%20when%20using%20theorem/lemma%20instead%20of%20def/near/183772819" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58110errorwhenusingtheoremlemmainsteadofdef.html#183772819">Mikołaj Gradowski (Dec 18 2019 at 17:48)</a>:</h4>
<p>Hello, I have a problem with the following snippet of code: </p>
<div class="codehilite"><pre><span></span><span class="kn">axiom</span> <span class="n">a1</span>  <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span> <span class="n">p</span> <span class="n">q</span>   <span class="o">:</span> <span class="kt">Prop</span> <span class="o">},</span>  <span class="n">p</span> <span class="bp">→</span> <span class="o">(</span><span class="n">q</span> <span class="bp">→</span> <span class="n">p</span><span class="o">)</span>
<span class="kn">axiom</span> <span class="n">a2</span>  <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span> <span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">},</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="o">(</span><span class="n">q</span> <span class="bp">→</span> <span class="n">r</span><span class="o">))</span> <span class="bp">→</span> <span class="o">((</span><span class="n">p</span> <span class="bp">→</span> <span class="n">q</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="n">r</span><span class="o">))</span>
<span class="kn">axiom</span> <span class="n">a3</span>  <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span> <span class="n">p</span> <span class="n">q</span>   <span class="o">:</span> <span class="kt">Prop</span> <span class="o">},</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="n">q</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">¬</span><span class="n">q</span> <span class="bp">→</span> <span class="bp">¬</span><span class="n">p</span><span class="o">)</span>
<span class="kn">axiom</span> <span class="n">a4</span>  <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span> <span class="n">p</span>     <span class="o">:</span> <span class="kt">Prop</span> <span class="o">},</span>  <span class="bp">¬¬</span><span class="n">p</span> <span class="bp">→</span> <span class="n">p</span>
<span class="kn">axiom</span> <span class="n">a5</span>  <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span> <span class="n">p</span>     <span class="o">:</span> <span class="kt">Prop</span> <span class="o">},</span>  <span class="n">p</span> <span class="bp">→</span> <span class="bp">¬¬</span><span class="n">p</span>
<span class="kn">axiom</span> <span class="n">a6</span>  <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span> <span class="n">p</span> <span class="n">q</span>   <span class="o">:</span> <span class="kt">Prop</span> <span class="o">},</span>  <span class="n">p</span> <span class="bp">∧</span> <span class="n">q</span> <span class="bp">→</span> <span class="n">p</span>
<span class="kn">axiom</span> <span class="n">a7</span>  <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span> <span class="n">p</span> <span class="n">q</span>   <span class="o">:</span> <span class="kt">Prop</span> <span class="o">},</span>  <span class="n">p</span> <span class="bp">∧</span> <span class="n">q</span> <span class="bp">→</span> <span class="n">q</span>
<span class="kn">axiom</span> <span class="n">a8</span>  <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span> <span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">},</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="n">q</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="n">p</span> <span class="bp">→</span> <span class="n">r</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="n">q</span> <span class="bp">∧</span> <span class="n">r</span><span class="o">))</span>
<span class="kn">axiom</span> <span class="n">a9</span>  <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span> <span class="n">p</span> <span class="n">q</span>   <span class="o">:</span> <span class="kt">Prop</span> <span class="o">},</span>  <span class="n">p</span> <span class="bp">→</span> <span class="n">p</span> <span class="bp">∨</span> <span class="n">q</span>
<span class="kn">axiom</span> <span class="n">a10</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span> <span class="n">p</span> <span class="n">q</span>   <span class="o">:</span> <span class="kt">Prop</span> <span class="o">},</span>  <span class="n">q</span> <span class="bp">→</span> <span class="n">p</span> <span class="bp">∨</span> <span class="n">q</span>
<span class="kn">axiom</span> <span class="n">a11</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span> <span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">},</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="n">r</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="n">q</span> <span class="bp">→</span> <span class="n">r</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">p</span> <span class="bp">∨</span> <span class="n">q</span> <span class="bp">→</span> <span class="n">r</span><span class="o">))</span>
<span class="kn">axiom</span> <span class="n">a12</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span> <span class="n">p</span> <span class="n">q</span>   <span class="o">:</span> <span class="kt">Prop</span> <span class="o">},</span> <span class="o">(</span><span class="n">p</span> <span class="bp">↔</span> <span class="n">q</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="n">q</span><span class="o">)</span>
<span class="kn">axiom</span> <span class="n">a13</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span> <span class="n">p</span> <span class="n">q</span>   <span class="o">:</span> <span class="kt">Prop</span> <span class="o">},</span> <span class="o">(</span><span class="n">p</span> <span class="bp">↔</span> <span class="n">q</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">q</span> <span class="bp">→</span> <span class="n">p</span><span class="o">)</span>
<span class="kn">axiom</span> <span class="n">a14</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span> <span class="n">p</span> <span class="n">q</span>   <span class="o">:</span> <span class="kt">Prop</span> <span class="o">},</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="n">q</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">q</span> <span class="bp">→</span> <span class="n">p</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">p</span> <span class="bp">↔</span> <span class="n">q</span><span class="o">)</span>


<span class="n">def</span> <span class="n">l1</span> <span class="o">{</span> <span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:=</span>
    <span class="bp">@</span><span class="n">a1</span> <span class="o">((</span><span class="n">p</span> <span class="bp">→</span> <span class="o">(</span><span class="n">q</span> <span class="bp">→</span> <span class="n">r</span><span class="o">))</span> <span class="bp">→</span> <span class="o">((</span><span class="n">p</span> <span class="bp">→</span> <span class="n">q</span><span class="o">)</span> <span class="bp">-&gt;</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="n">r</span><span class="o">)))</span> <span class="c1">-- sub p</span>
        <span class="o">(</span><span class="n">q</span> <span class="bp">→</span> <span class="n">r</span><span class="o">)</span>                                <span class="c1">-- sub q</span>

<span class="n">def</span> <span class="n">l2</span> <span class="o">{</span> <span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:=</span>
    <span class="n">l1</span> <span class="o">(</span><span class="bp">@</span><span class="n">a2</span> <span class="n">p</span> <span class="n">q</span> <span class="n">r</span><span class="o">)</span> <span class="c1">-- MP</span>

<span class="n">def</span> <span class="n">l3</span> <span class="o">{</span> <span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:=</span>
    <span class="bp">@</span><span class="n">a1</span>
        <span class="o">(</span><span class="n">q</span> <span class="bp">→</span> <span class="n">r</span><span class="o">)</span> <span class="c1">-- sub p</span>
        <span class="n">p</span>       <span class="c1">-- sub q</span>

<span class="n">def</span> <span class="n">l4</span> <span class="o">{</span> <span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:=</span>
    <span class="bp">@</span><span class="n">a2</span>
        <span class="o">(</span><span class="n">q</span> <span class="bp">→</span> <span class="n">r</span><span class="o">)</span>             <span class="c1">-- sub p</span>
        <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="o">(</span><span class="n">q</span> <span class="bp">→</span> <span class="n">r</span><span class="o">))</span>       <span class="c1">-- sub q</span>
        <span class="o">((</span><span class="n">p</span> <span class="bp">→</span> <span class="n">q</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="n">r</span><span class="o">))</span> <span class="c1">-- sub r</span>

<span class="n">def</span> <span class="n">l5</span> <span class="o">{</span> <span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:=</span>
    <span class="n">l4</span> <span class="o">(</span><span class="bp">@</span><span class="n">l2</span> <span class="n">p</span> <span class="n">q</span> <span class="n">r</span><span class="o">)</span> <span class="c1">-- MP</span>

<span class="n">def</span> <span class="n">e1</span>  <span class="o">{</span> <span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">q</span> <span class="bp">-&gt;</span> <span class="n">r</span><span class="o">)</span> <span class="bp">-&gt;</span> <span class="o">((</span><span class="n">p</span> <span class="bp">-&gt;</span> <span class="n">q</span><span class="o">)</span> <span class="bp">-&gt;</span> <span class="o">(</span><span class="n">p</span> <span class="bp">-&gt;</span> <span class="n">r</span><span class="o">))</span> <span class="o">:=</span>
    <span class="n">l5</span> <span class="o">(</span><span class="bp">@</span><span class="n">l3</span> <span class="n">p</span> <span class="n">q</span> <span class="n">r</span><span class="o">)</span> <span class="c1">-- MP</span>
</pre></div>


<p>I need to prove some theorems for my logic assignment using the Hilbert system above. The code works normally as it is, but when I change the <em>defs</em> to <em>lemmas</em> and <em>theorems</em>, Lean says that it cannot infer the type of the theorem/lemma, even though there is clearly enough information to do so, which deeply puzzles me.</p>
<p>I would be very grateful for an explanation and any general suggestions regarding my code, since I'm only making my baby steps with Lean.</p>
<p>Thanks!</p>

<a name="183773026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/error%20when%20using%20theorem/lemma%20instead%20of%20def/near/183773026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58110errorwhenusingtheoremlemmainsteadofdef.html#183773026">Patrick Massot (Dec 18 2019 at 17:51)</a>:</h4>
<p>I don't think you can have lemmas without explicitly giving the statement. At least that would look very weird</p>

<a name="183773192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/error%20when%20using%20theorem/lemma%20instead%20of%20def/near/183773192" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58110errorwhenusingtheoremlemmainsteadofdef.html#183773192">Patrick Massot (Dec 18 2019 at 17:53)</a>:</h4>
<p>Since you are redoing such basic logic, it's probably dangerous to use the built in logic connectors. You could very well end up implicitly using what you are meant to prove.</p>

<a name="183773207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/error%20when%20using%20theorem/lemma%20instead%20of%20def/near/183773207" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58110errorwhenusingtheoremlemmainsteadofdef.html#183773207">Kevin Buzzard (Dec 18 2019 at 17:53)</a>:</h4>
<p>If the definitions are compiling fine, then use <code>#check</code> to see the types of the lemmas and then when you switch to lemma/theorem, explicitly put the type in. I guess in theory Lean should be able to work out the type from the proof but on the other hand it's not something I've seen before.</p>

<a name="183773246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/error%20when%20using%20theorem/lemma%20instead%20of%20def/near/183773246" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58110errorwhenusingtheoremlemmainsteadofdef.html#183773246">Patrick Massot (Dec 18 2019 at 17:53)</a>:</h4>
<p>You also have weird choices of implicit arguments if you need to use <code>@</code> evreywhere.</p>

<a name="183773322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/error%20when%20using%20theorem/lemma%20instead%20of%20def/near/183773322" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58110errorwhenusingtheoremlemmainsteadofdef.html#183773322">Bhavik Mehta (Dec 18 2019 at 17:54)</a>:</h4>
<p>Even if Lean could work out the type, it's still good practice to give the types of the things you've proved: it makes it easier to see what lemmas we've proved when reading code</p>

<a name="183773370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/error%20when%20using%20theorem/lemma%20instead%20of%20def/near/183773370" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58110errorwhenusingtheoremlemmainsteadofdef.html#183773370">Rob Lewis (Dec 18 2019 at 17:55)</a>:</h4>
<blockquote>
<p>I don't think you can have lemmas without explicitly giving the statement. At least that would look very weird</p>
</blockquote>
<p>You can't, for more technical reasons than just "looking weird." Lean processes lemmas in parallel. Lemma <code>b</code> may reference lemma <code>a</code>, but get type checked before. This is fine, as long as it knows the type of <code>a</code>, since proofs are irrelevant. But if you don't give the type of <code>a</code>, it would have to process <code>a</code> first.</p>

<a name="183773398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/error%20when%20using%20theorem/lemma%20instead%20of%20def/near/183773398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58110errorwhenusingtheoremlemmainsteadofdef.html#183773398">Kevin Buzzard (Dec 18 2019 at 17:55)</a>:</h4>
<p>If you are trying to develop a theory of <code>-&gt;</code> from first principles then you could use a different arrow to the one Lean already uses -- e.g. the one coming from <code>\hom</code> (assuming you're not going to be importing any category theory libraries...)</p>

<a name="183773569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/error%20when%20using%20theorem/lemma%20instead%20of%20def/near/183773569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58110errorwhenusingtheoremlemmainsteadofdef.html#183773569">Mikołaj Gradowski (Dec 18 2019 at 17:57)</a>:</h4>
<p>Wow, I didn't expect such quick and insightful feedback. It all seems reasonable to me now. Thanks for all the answers!</p>

<a name="183773661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/error%20when%20using%20theorem/lemma%20instead%20of%20def/near/183773661" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58110errorwhenusingtheoremlemmainsteadofdef.html#183773661">Kevin Buzzard (Dec 18 2019 at 17:58)</a>:</h4>
<p>What Patrick is saying with the implicits is that if you write <code>axiom a1  : Π ( p q   : Prop ),  p → (q → p)</code> with <code>(</code> not <code>{</code> then you don't have to use <code>@</code> later on.</p>

<a name="183773760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/error%20when%20using%20theorem/lemma%20instead%20of%20def/near/183773760" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58110errorwhenusingtheoremlemmainsteadofdef.html#183773760">Mikołaj Gradowski (Dec 18 2019 at 17:59)</a>:</h4>
<p>But then I'll have to explicitly instantiate each axiom every time, right?</p>

<a name="183774938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/error%20when%20using%20theorem/lemma%20instead%20of%20def/near/183774938" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58110errorwhenusingtheoremlemmainsteadofdef.html#183774938">Kevin Buzzard (Dec 18 2019 at 18:11)</a>:</h4>
<p>I don't really know what that means (sorry, I'm a mathematician). All I know is that if you change <code>{</code> to <code>(</code> then you don't have to write <code>@</code>. People tend not to use axioms in Lean. You could just be proving all of these things</p>


{% endraw %}

{% include archive_update.html %}