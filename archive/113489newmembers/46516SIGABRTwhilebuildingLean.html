---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113489newmembers/46516SIGABRTwhilebuildingLean.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html">SIGABRT while building Lean</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="168793978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168793978" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168793978">Jean Lo (Jun 23 2019 at 13:18)</a>:</h4>
<p>Attempting and failing to build lean from source on a new system. The last few lines from the <code>make</code> output were</p>
<div class="codehilite"><pre><span></span><span class="o">[</span><span class="mi">68</span><span class="err">%</span><span class="o">]</span> <span class="n">built</span> <span class="n">target</span> <span class="n">lean</span>
<span class="o">[</span><span class="mi">68</span><span class="err">%</span><span class="o">]</span> <span class="n">built</span> <span class="n">target</span> <span class="n">bin_lean</span>
</pre></div>


<p>Before the process stops with a <code>Signal 6</code> / <code>Error code 1</code>. Not sure what's happening, nor where to begin trying to find out.</p>
<p>The process also issued a <em>lot</em> of warnings complaining about <code>'operator delete' has a non-throwing exception specification but can still throw</code>, and though I thiiink it isn't something that I should be worried about, I don't remember this happening on previous builds.</p>

<a name="168794090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168794090" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168794090">Kenny Lau (Jun 23 2019 at 13:22)</a>:</h4>
<p>OS?</p>

<a name="168794480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168794480" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168794480">Jean Lo (Jun 23 2019 at 13:36)</a>:</h4>
<p><code>FreeBSD 12.0-RELEASE</code></p>

<a name="168794639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168794639" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168794639">Jean Lo (Jun 23 2019 at 13:40)</a>:</h4>
<p>At this point <code>lean</code> and <code>leanpkg</code> already exist in <code>bin</code>, but trying to run either of those just gets me a <code>Abort trap (core dumped)</code>.</p>

<a name="168794692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168794692" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168794692">Kenny Lau (Jun 23 2019 at 13:42)</a>:</h4>
<p>download a windows emulator and then use vscode and elan</p>

<a name="168794704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168794704" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168794704">Jean Lo (Jun 23 2019 at 13:43)</a>:</h4>
<p>How about I <em>go onto my windows computer</em> then use vscode and elan</p>

<a name="168794707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168794707" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168794707">Kenny Lau (Jun 23 2019 at 13:43)</a>:</h4>
<p>that would be better</p>

<a name="168794753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168794753" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168794753">Jean Lo (Jun 23 2019 at 13:45)</a>:</h4>
<p>but yeah i realise i was probably being a stupid by assuming everything would just work the same as when it was on linux D:</p>

<a name="168794761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168794761" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168794761">Mario Carneiro (Jun 23 2019 at 13:45)</a>:</h4>
<p>For the most part lean works better on linux</p>

<a name="168794762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168794762" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168794762">Mario Carneiro (Jun 23 2019 at 13:45)</a>:</h4>
<p>not sure if FreeBSD has an issue</p>

<a name="168794806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168794806" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168794806">Kenny Lau (Jun 23 2019 at 13:46)</a>:</h4>
<p>so you can download a linux emulator in the windows emulator and build lean in the linux inside windows inside FreeBSD, but use VSCode in the windows inside FreeBSD</p>

<a name="168794807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168794807" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168794807">Jean Lo (Jun 23 2019 at 13:46)</a>:</h4>
<p>I was hoping it'd happen to all just work out if i compiled the source within FreeBSD</p>

<a name="168794809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168794809" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168794809">Jean Lo (Jun 23 2019 at 13:46)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> : no.</p>

<a name="168795549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168795549" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168795549">Bryan Gin-ge Chen (Jun 23 2019 at 14:14)</a>:</h4>
<p>If <code>bin_lean</code> has been built, then usually the next thing <code>cmake</code> tries to do is to build the standard library (check the <code>standard_lib</code> target in <code>src/CMakeLists.txt</code>), which involves running the <code>lean</code> executable (you should be able to find it in <code>your_build_directory/shell/lean</code> and <code>bin/lean</code>). I suspect that that is what is crashing, so if you want to dig into this, you can try running <code>lean --make</code> (inside the <code>library</code> directory) from <code>gdb</code> or some other debugger and then looking at the stack trace when it crashes.</p>
<p>I'm a little surprised that <code>lean</code> and <code>bin_lean</code> are being built at 68% though, usually they're among the last things being built. Out of curiosity, could you share a link to your full build log?</p>

<a name="168795608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168795608" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168795608">Mario Carneiro (Jun 23 2019 at 14:16)</a>:</h4>
<p>I think if the test suite is getting built that would come after</p>

<a name="168795611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168795611" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168795611">Mario Carneiro (Jun 23 2019 at 14:16)</a>:</h4>
<p>which is the default IIRC</p>

<a name="168795624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168795624" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168795624">Bryan Gin-ge Chen (Jun 23 2019 at 14:17)</a>:</h4>
<p>That makes sense. I'm more used to seeing logs that look like <a href="https://travis-ci.org/leanprover/lean/jobs/517045222#L1158" target="_blank" title="https://travis-ci.org/leanprover/lean/jobs/517045222#L1158">this</a> though.</p>

<a name="168796406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168796406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168796406">Bryan Gin-ge Chen (Jun 23 2019 at 14:44)</a>:</h4>
<p>Ah, the difference is probably whether you run <code>make -j2</code> or just <code>make</code>.</p>

<a name="168796722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168796722" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168796722">Jean Lo (Jun 23 2019 at 14:53)</a>:</h4>
<p>why would <code>make -j2</code> help in this case?</p>
<p>also, sorry, was mucking around &amp; didn't have the logs anymore. Here's they are : <a href="https://pastebin.com/raw/DJLHdXCN" target="_blank" title="https://pastebin.com/raw/DJLHdXCN">https://pastebin.com/raw/DJLHdXCN</a> <a href="https://pastebin.com/raw/Nzts85BG" target="_blank" title="https://pastebin.com/raw/Nzts85BG">https://pastebin.com/raw/Nzts85BG</a> . The <code>stderr</code> is stupid huge but appears to just be warnings about the same thing every time it crops up?</p>

<a name="168796987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168796987" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168796987">Jean Lo (Jun 23 2019 at 15:02)</a>:</h4>
<p>tried <code>make -j2</code>, it moved the errors down some. Now it's the linker that's dying instead: <a href="https://pastebin.com/raw/dawrJe76" target="_blank" title="https://pastebin.com/raw/dawrJe76">https://pastebin.com/raw/dawrJe76</a></p>

<a name="168797794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168797794" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168797794">Bryan Gin-ge Chen (Jun 23 2019 at 15:30)</a>:</h4>
<p>Sorry, I didn't mean that <code>make -j2</code> would help with your problem. It would just explain the difference in build order.</p>

<a name="168797917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168797917" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168797917">Bryan Gin-ge Chen (Jun 23 2019 at 15:35)</a>:</h4>
<p>Hmm, the final error log suggests that <code>-fPIC</code> is missing from the build flags. The culprit might be <a href="https://github.com/leanprover/lean/blob/master/src/CMakeLists.txt#L218" target="_blank" title="https://github.com/leanprover/lean/blob/master/src/CMakeLists.txt#L218">this overly-specific test</a>. You might want to go through that file and change some of the Linux conditionals to allow for FreeBSD and see if that helps.</p>

<a name="168798110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168798110" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168798110">Jean Lo (Jun 23 2019 at 15:42)</a>:</h4>
<p>ah, okay.</p>
<p>I just naively tried getting cmake to <code>-fPIC</code> <em>everything</em> by adding a line in the <code>CMakeLists.txt</code> because I didn't see your message yet &amp; didn't know about the test. The build process on that try has just concluded - it died at the very end with <code>Abort trap (core dumped)</code> after building <code>lean</code> and <code>bin_lean</code>.</p>

<a name="168798345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168798345" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168798345">Bryan Gin-ge Chen (Jun 23 2019 at 15:50)</a>:</h4>
<p>Yeah, as above, that looks like <code>lean</code> is crashing when trying to build the standard library.</p>

<a name="168799660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168799660" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168799660">Jean Lo (Jun 23 2019 at 16:34)</a>:</h4>
<p>right.</p>
<p>I didn't have <code>gdb</code> on this system when I set it up, so that took a while. And in honesty this is more digging than I'm really used to doing, especially that I don't really know how Lean works, so sorry for this being me getting confused and asking many silly questions.</p>
<p>Anyways - here's the <code>bt</code> from the crash. (Would rebuilding with the <code>CMAKE_BUILD_TYPE</code> flag set to debug make this more informative?)</p>
<div class="codehilite"><pre><span></span>#0  0x0000000800f1d45a in thr_kill () from /lib/libc.so.7
#1  0x0000000800f1b844 in raise () from /lib/libc.so.7
#2  0x0000000800e8e079 in abort () from /lib/libc.so.7
#3  0x0000000800cea8ba in ?? () from /lib/libcxxrt.so.1
#4  0x00000000004c876e in lean::get_exe_location() ()
#5  0x00000000004cba6d in lean::get_builtin_search_path() ()
#6  0x00000000004cc5a2 in lean::standard_search_path::standard_search_path() ()
#7  0x000000000049807d in main ()
</pre></div>

<a name="168799728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168799728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168799728">Reid Barton (Jun 23 2019 at 16:37)</a>:</h4>
<p>It's trying to use <code>snprintf(path, PATH_MAX, "/proc/%d/exe", pid);</code>--I assume BSD doesn't have <code>/proc</code></p>

<a name="168799842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168799842" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168799842">Bryan Gin-ge Chen (Jun 23 2019 at 16:41)</a>:</h4>
<p>Wow, nice catch! That line is in <a href="https://github.com/leanprover/lean/blob/master/src/util/path.cpp#L85" target="_blank" title="https://github.com/leanprover/lean/blob/master/src/util/path.cpp#L85"><code>src/util/path.cpp</code></a>. So it looks like you'll need to write an <code>#elif</code> there with an appropriate path for FreeBSD.</p>

<a name="168799888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168799888" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168799888">Bryan Gin-ge Chen (Jun 23 2019 at 16:42)</a>:</h4>
<p>Maybe something using <a href="https://www.freebsd.org/cgi/man.cgi?linprocfs(5)" target="_blank" title="https://www.freebsd.org/cgi/man.cgi?linprocfs(5)">linprocfs</a>? (This is just random googling on my part.)</p>

<a name="168799920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168799920" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168799920">Bryan Gin-ge Chen (Jun 23 2019 at 16:44)</a>:</h4>
<p>(deleted)</p>

<a name="168800320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168800320" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168800320">Bryan Gin-ge Chen (Jun 23 2019 at 16:57)</a>:</h4>
<p>There are two suggestions for getting the current executable path in FreeBSD in <a href="https://stackoverflow.com/a/1024937" target="_blank" title="https://stackoverflow.com/a/1024937">this SO answer</a>: the first one links to a question with some C code that might work, the second one suggests that you might be able to just mount procfs to /proc before running lean (<a href="http://www.softwareprojects.com/resources/programming/t-how-to-mount-proc-on-freebsd-2006.html" target="_blank" title="http://www.softwareprojects.com/resources/programming/t-how-to-mount-proc-on-freebsd-2006.html">maybe this works?</a>)</p>

<a name="168800363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168800363" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168800363">Jean Lo (Jun 23 2019 at 16:58)</a>:</h4>
<p>eh, I'm very very new to BSD as well. but did some random googling. Yeah, I suspect reading <code>/proc/curproc/file</code>would work if I have <code>procfs</code> mounted.</p>

<a name="168800440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168800440" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168800440">Jean Lo (Jun 23 2019 at 17:00)</a>:</h4>
<p>I'll go and put in the <code>#elif</code>s, recompile, see what happens maybe?</p>

<a name="168800505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168800505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168800505">Bryan Gin-ge Chen (Jun 23 2019 at 17:02)</a>:</h4>
<p><del>You might not even have to put in the <code>#elif</code> if you mount <code>procfs</code> to <code>/proc</code>.</del> nevermind, I missed you need <code>/file</code> and not <code>/exe</code> at the end.</p>

<a name="168800564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168800564" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168800564">Bryan Gin-ge Chen (Jun 23 2019 at 17:04)</a>:</h4>
<p>There's also another reference to /proc in <a href="https://github.com/leanprover/lean/blob/master/src/util/memory.cpp#L97" target="_blank" title="https://github.com/leanprover/lean/blob/master/src/util/memory.cpp#L97">src/util/memory.cpp</a>.</p>

<a name="168800625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168800625" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168800625">Jean Lo (Jun 23 2019 at 17:06)</a>:</h4>
<p>oh, thanks for the catch. would've hated to be hit by that after waiting for it to compile another time</p>

<a name="168803860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168803860" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168803860">Jean Lo (Jun 23 2019 at 18:43)</a>:</h4>
<p>aaand it worked. sort of.</p>
<p>I edited in the <code>/proc/exec</code>thing, but wasn't sure what the proper way was to do what <code>statm</code> does on Linux, but since the process just defaults to returning 0 if it can't read the file, I thought it'd be worth trying just compiling the thing anyway while I figure that out. And the <code>make install</code> terminated without incident!</p>
<p>So I now have a functional installation of Lean that doesn't know how much memory it's using, at least not for now. Not sure what sort of other consequences that'd have, or if there's anything else that's going to break but hasn't yet. I'm still unsure about the <code>statm</code> thing; but random googling suggests there's a way of doing both that and the <code>pid/exe</code> thing from earlier without asking the user to mount procfs, so I might spend some time later and properly put some code in for both of those.</p>

<a name="168806728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168806728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168806728">Chris Hughes (Jun 23 2019 at 20:17)</a>:</h4>
<p>You could always use elan.</p>

<a name="168810329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168810329" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168810329">Reid Barton (Jun 23 2019 at 22:16)</a>:</h4>
<p>but does elan have BSD binaries?</p>

<a name="168840804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168840804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168840804">Keeley Hoek (Jun 24 2019 at 11:23)</a>:</h4>
<p>No</p>

<a name="168843537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGABRT%20while%20building%20Lean/near/168843537" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/46516SIGABRTwhilebuildingLean.html#168843537">Wojciech Nawrocki (Jun 24 2019 at 12:08)</a>:</h4>
<p><span class="user-mention" data-user-id="132889">@Jean Lo</span> If you do get Lean building &amp; running on FreeBSD, you could submit a PR to <a href="https://github.com/leanprover-community/lean/" target="_blank" title="https://github.com/leanprover-community/lean/">leanprover-community/lean/</a> :)</p>


{% endraw %}
