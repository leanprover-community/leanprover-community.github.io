---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/13947nonightlyarchivefound.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html">no nightly archive found</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="180974655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/180974655" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#180974655">Luis O'Shea (Nov 17 2019 at 22:01)</a>:</h4>
<p>Downloading a local copy of KB's <a href="https://github.com/ImperialCollegeLondon/M1F_example_sheets" target="_blank" title="https://github.com/ImperialCollegeLondon/M1F_example_sheets">M1F Example Sheets</a> repo I ran into a small problem when running <code>update-mathlib</code> which errored out saying "Error: no nightly archive found". I believe this is benign; at any rate I was able to run <code>leanpkg build</code> successfully, and the lean files seemed to open in VS Code without errors. Assuming this is as expected, I'm mostly reporting this for other beginners (like me).</p>
<p>Below is what I did and its output:</p>
<div class="codehilite"><pre><span></span>$ git clone https://github.com/ImperialCollegeLondon/M1F_example_sheets.git
Cloning into <span class="s1">&#39;M1F_example_sheets&#39;</span>...
remote: Enumerating objects: <span class="m">12</span>, <span class="k">done</span>.
remote: Counting objects: <span class="m">100</span>% <span class="o">(</span><span class="m">12</span>/12<span class="o">)</span>, <span class="k">done</span>.
remote: Compressing objects: <span class="m">100</span>% <span class="o">(</span><span class="m">12</span>/12<span class="o">)</span>, <span class="k">done</span>.
remote: Total <span class="m">942</span> <span class="o">(</span>delta <span class="m">4</span><span class="o">)</span>, reused <span class="m">0</span> <span class="o">(</span>delta <span class="m">0</span><span class="o">)</span>, pack-reused <span class="m">930</span>
Receiving objects: <span class="m">100</span>% <span class="o">(</span><span class="m">942</span>/942<span class="o">)</span>, <span class="m">1</span>.30 MiB <span class="p">|</span> <span class="m">7</span>.42 MiB/s, <span class="k">done</span>.
Resolving deltas: <span class="m">100</span>% <span class="o">(</span><span class="m">514</span>/514<span class="o">)</span>, <span class="k">done</span>.

$ <span class="nb">cd</span> M1F_example_sheets/

$ leanpkg configure
info: downloading component <span class="s1">&#39;lean&#39;</span>
info: installing component <span class="s1">&#39;lean&#39;</span>
configuring M1F_2018-19 <span class="m">0</span>.1
mathlib: cloning https://github.com/leanprover/mathlib to _target/deps/mathlib
&gt; mkdir -p _target/deps/mathlib
&gt; git clone https://github.com/leanprover/mathlib _target/deps/mathlib
Cloning into <span class="s1">&#39;_target/deps/mathlib&#39;</span>...
remote: Enumerating objects: <span class="m">13</span>, <span class="k">done</span>.
remote: Counting objects: <span class="m">100</span>% <span class="o">(</span><span class="m">13</span>/13<span class="o">)</span>, <span class="k">done</span>.
remote: Compressing objects: <span class="m">100</span>% <span class="o">(</span><span class="m">13</span>/13<span class="o">)</span>, <span class="k">done</span>.
remote: Total <span class="m">27510</span> <span class="o">(</span>delta <span class="m">3</span><span class="o">)</span>, reused <span class="m">1</span> <span class="o">(</span>delta <span class="m">0</span><span class="o">)</span>, pack-reused <span class="m">27497</span>
Receiving objects: <span class="m">100</span>% <span class="o">(</span><span class="m">27510</span>/27510<span class="o">)</span>, <span class="m">13</span>.64 MiB <span class="p">|</span> <span class="m">11</span>.51 MiB/s, <span class="k">done</span>.
Resolving deltas: <span class="m">100</span>% <span class="o">(</span><span class="m">20453</span>/20453<span class="o">)</span>, <span class="k">done</span>.
&gt; git checkout --detach 2a86b06b1853493ab4fb381514e7d1a3f4dfc54b    <span class="c1"># in directory _target/deps/mathlib</span>
HEAD is now at 2a86b06b fix<span class="o">(</span>order/filter<span class="o">)</span>: tendsto_at_top only requires preorder not partial_order

$ update-mathlib
Info: No github section found in <span class="s1">&#39;git config&#39;</span>, we will use GitHub with no authentication
Querying GitHub...
Error: no nightly archive found

$ leanpkg build
configuring M1F_2018-19 <span class="m">0</span>.1
mathlib: trying to update _target/deps/mathlib to revision 2a86b06b1853493ab4fb381514e7d1a3f4dfc54b
&gt; git checkout --detach 2a86b06b1853493ab4fb381514e7d1a3f4dfc54b    <span class="c1"># in directory _target/deps/mathlib</span>
HEAD is now at 2a86b06b fix<span class="o">(</span>order/filter<span class="o">)</span>: tendsto_at_top only requires preorder not partial_order
&gt; lean --make src
<span class="c1"># Lots of warnings from files in src/ about declarations that use sorry.  No errors.</span>
</pre></div>

<a name="180976538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/180976538" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#180976538">Kevin Buzzard (Nov 17 2019 at 22:58)</a>:</h4>
<p>I can quite believe that that repo is older than the update-mathlib set-up.</p>

<a name="180976551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/180976551" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#180976551">Kevin Buzzard (Nov 17 2019 at 22:59)</a>:</h4>
<p>Just do leanpkg upgrade or update or whatever it is that gets new mathlib. Then it might work</p>

<a name="180987399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/180987399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#180987399">Luis O'Shea (Nov 18 2019 at 04:27)</a>:</h4>
<p>I did a <code>leanpkg upgrade</code> (with no problems) and among other things it generated the following diff to  <code>leanpkg.toml</code>:</p>
<div class="codehilite"><pre><span></span><span class="gd">-mathlib = {git = &quot;https://github.com/leanprover/mathlib&quot;, rev = &quot;2a86b06b1853493ab4fb381514e7d1a3f4dfc54b&quot;}</span>
<span class="gi">+mathlib = {git = &quot;https://github.com/leanprover/mathlib&quot;, rev = &quot;7c5f282dcfe1e0f20050f4aae3b6bdf77a652a13&quot;}</span>
</pre></div>


<p>However <code>update-mathlib</code> continued to complain about "Error: no nightly archive found". Also <code>leanpkg build</code> errored out. So I think the right recipe for this repo is to do as I did the first time (which at the end of the day seems to work).</p>

<a name="180989743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/180989743" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#180989743">Simon Hudon (Nov 18 2019 at 05:33)</a>:</h4>
<p>What is the rest of your <code>leanpkg.toml</code> file?</p>

<a name="181072536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/181072536" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#181072536">Luis O'Shea (Nov 19 2019 at 00:55)</a>:</h4>
<p>My <code>leanpkg.toml</code> is</p>
<div class="codehilite"><pre><span></span>[package]
name = &quot;M1F_2018-19&quot;
version = &quot;0.1&quot;
lean_version = &quot;nightly-2018-06-21&quot;
path = &quot;src&quot;

[dependencies]
mathlib = {git = &quot;https://github.com/leanprover/mathlib&quot;, rev = &quot;7c5f282dcfe1e0f20050f4aae3b6bdf77a652a13&quot;}
</pre></div>

<a name="181072823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/181072823" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#181072823">Bryan Gin-ge Chen (Nov 19 2019 at 01:01)</a>:</h4>
<p>This is probably the offending line:</p>
<blockquote>
<p><code>lean_version = "nightly-2018-06-21"</code></p>
</blockquote>
<p>This is a really old version of Lean. Currently <code>update-mathlib</code> can only supply Lean binaries for Lean 3.4.2.</p>

<a name="181073018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/181073018" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#181073018">Bryan Gin-ge Chen (Nov 19 2019 at 01:05)</a>:</h4>
<p>Furthermore, the reason that <code>leanpkg build</code> errored out after <code>leanpkg upgrade</code> is that recent versions of mathlib are not compatible with versions of Lean before 3.4.2. So, if you change that line to this:</p>
<blockquote>
<p><code>lean_version = "3.4.2"</code></p>
</blockquote>
<p>Then both <code>leanpkg build</code> and <code>update-mathlib</code> should both work again.</p>

<a name="181087994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/181087994" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#181087994">Kevin Buzzard (Nov 19 2019 at 07:25)</a>:</h4>
<p>So it's just the fact that it's a very old repo. I'll try and remember to update the toml on github</p>

<a name="181093714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/181093714" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#181093714">Kevin Buzzard (Nov 19 2019 at 09:15)</a>:</h4>
<p>That repo is really old. Loads of the imports don't work any more.</p>

<a name="181205584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/181205584" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#181205584">Kevin Buzzard (Nov 20 2019 at 13:13)</a>:</h4>
<p>OK so I am hoping that if you pull the updated repo, this is fixed. Thanks for pointing this out. Some of the proofs had broken but I just fixed them all.</p>

<a name="181267661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/181267661" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#181267661">Luis O'Shea (Nov 21 2019 at 01:20)</a>:</h4>
<p>Yes, thank you! I think this is now fixed. See below for output, in case anyone is curious. (All the output from <code>leanpkg build</code> is warnings, mostly about <code>sorry</code> and a few uses of <code>#exit</code> which can all be traced to KB's commit <a href="https://github.com/ImperialCollegeLondon/M1F_example_sheets/commit/1f794ff03f99d803c383e520c0809e03c17da9bd" target="_blank" title="https://github.com/ImperialCollegeLondon/M1F_example_sheets/commit/1f794ff03f99d803c383e520c0809e03c17da9bd">mathlib broke my 2017 soln</a>; in other words, it all seems good.)</p>
<div class="codehilite"><pre><span></span><span class="gp">$</span> git clone https://github.com/ImperialCollegeLondon/M1F_example_sheets.git M1F_example_sheets3
<span class="go">Cloning into &#39;M1F_example_sheets3&#39;...</span>
<span class="go">remote: Enumerating objects: 56, done.</span>
<span class="go">remote: Counting objects: 100% (56/56), done.</span>
<span class="go">remote: Compressing objects: 100% (51/51), done.</span>
<span class="go">remote: Total 986 (delta 11), reused 24 (delta 4), pack-reused 930</span>
<span class="go">Receiving objects: 100% (986/986), 1.32 MiB | 6.99 MiB/s, done.</span>
<span class="go">Resolving deltas: 100% (521/521), done.</span>

<span class="gp">$</span> <span class="nb">cd</span> M1F_example_sheets3/

<span class="gp">$</span> leanpkg configure
<span class="go">configuring M1F_2018-19 0.1</span>
<span class="go">mathlib: cloning https://github.com/leanprover/mathlib to _target/deps/mathlib</span>
<span class="gp">&gt;</span> mkdir -p _target/deps/mathlib
<span class="gp">&gt;</span> git clone https://github.com/leanprover/mathlib _target/deps/mathlib
<span class="go">Cloning into &#39;_target/deps/mathlib&#39;...</span>
<span class="go">remote: Enumerating objects: 45, done.</span>
<span class="go">remote: Counting objects: 100% (45/45), done.</span>
<span class="go">remote: Compressing objects: 100% (35/35), done.</span>
<span class="go">remote: Total 27548 (delta 18), reused 18 (delta 10), pack-reused 27503</span>
<span class="go">Receiving objects: 100% (27548/27548), 13.69 MiB | 10.56 MiB/s, done.</span>
<span class="go">Resolving deltas: 100% (20473/20473), done.</span>
<span class="gp">&gt;</span> git checkout --detach d67e527adc99837b731799190fdc7cbeb596254f    <span class="c1"># in directory _target/deps/mathlib</span>
<span class="go">HEAD is now at d67e527a feat(algebra/group_power): prove Bernoulli&#39;s inequality for `a ≥ -2` (#1709)</span>

<span class="gp">$</span> update-mathlib
<span class="go">Info: No github section found in &#39;git config&#39;, we will use GitHub with no authentication</span>
<span class="go">Querying GitHub...</span>
<span class="go">Downloading nightly...</span>
<span class="go">Extracting nightly...</span>

<span class="gp">$</span> leanpkg build
<span class="go">configuring M1F_2018-19 0.1</span>
<span class="go">mathlib: trying to update _target/deps/mathlib to revision d67e527adc99837b731799190fdc7cbeb596254f</span>
<span class="gp">&gt;</span> git checkout --detach d67e527adc99837b731799190fdc7cbeb596254f    <span class="c1"># in directory _target/deps/mathlib</span>
<span class="go">HEAD is now at d67e527a feat(algebra/group_power): prove Bernoulli&#39;s inequality for `a ≥ -2` (#1709)</span>
<span class="gp">&gt;</span> lean --make src
<span class="gp">#</span> several dozen warnings
</pre></div>


{% endraw %}

{% include archive_update.html %}