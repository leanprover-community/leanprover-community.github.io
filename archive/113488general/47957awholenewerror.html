---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/47957awholenewerror.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/47957awholenewerror.html">a whole new error</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="125483415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20whole%20new%20error/near/125483415" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47957awholenewerror.html#125483415">Kenny Lau (Apr 21 2018 at 06:25)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">invalid</span> <span class="n">pattern</span><span class="o">,</span> <span class="err">&#39;</span><span class="n">choice</span> <span class="o">(</span><span class="n">frozen_name</span> <span class="n">multiset</span><span class="bp">.</span><span class="n">cons</span><span class="o">)</span> <span class="o">(</span><span class="n">frozen_name</span> <span class="n">list</span><span class="bp">.</span><span class="n">cons</span><span class="o">)</span><span class="err">&#39;</span> <span class="n">is</span> <span class="n">overloaded</span><span class="o">,</span> <span class="n">and</span> <span class="n">this</span> <span class="n">kind</span> <span class="n">of</span> <span class="n">overloading</span> <span class="n">is</span> <span class="n">not</span> <span class="n">currently</span> <span class="n">supported</span> <span class="k">in</span> <span class="n">patterns</span>
</pre></div>

<a name="125483454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20whole%20new%20error/near/125483454" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47957awholenewerror.html#125483454">Mario Carneiro (Apr 21 2018 at 06:26)</a>:</h4>
<p>use a local notation</p>

<a name="125483456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20whole%20new%20error/near/125483456" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47957awholenewerror.html#125483456">Mario Carneiro (Apr 21 2018 at 06:26)</a>:</h4>
<p>what did you write to get that?</p>

<a name="125483501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20whole%20new%20error/near/125483501" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47957awholenewerror.html#125483501">Kenny Lau (Apr 21 2018 at 06:28)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">reduce</span><span class="bp">.</span><span class="n">not</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">L₁</span> <span class="n">L₂</span> <span class="n">L₃</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)}</span> <span class="o">(</span><span class="n">x</span> <span class="n">b</span><span class="o">),</span> <span class="n">reduce</span> <span class="n">L₁</span> <span class="bp">=</span> <span class="n">L₂</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L₃</span> <span class="bp">→</span> <span class="n">false</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="o">[]</span> <span class="n">L3</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">H</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">injections</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="o">[</span><span class="n">hd</span><span class="o">]</span> <span class="n">L3</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">H</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">injections</span>
<span class="bp">|</span> <span class="o">((</span><span class="n">x</span><span class="o">,</span><span class="n">b</span><span class="o">)</span><span class="bp">::</span><span class="n">hd1</span><span class="o">)</span> <span class="n">L2</span> <span class="n">L3</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">H</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">dsimp</span> <span class="n">at</span> <span class="n">H</span><span class="bp">;</span>
  <span class="n">exact</span> <span class="k">match</span> <span class="n">reduce</span> <span class="n">hd1</span> <span class="k">with</span>
  <span class="bp">|</span> <span class="o">[]</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">dsimp</span> <span class="n">at</span> <span class="n">H</span>
  <span class="bp">|</span> <span class="o">(</span><span class="n">x2</span><span class="o">,</span><span class="n">b2</span><span class="o">)</span><span class="bp">::</span><span class="n">hd2</span> <span class="o">:=</span> <span class="bp">_</span>
  <span class="kn">end</span>
</pre></div>

<a name="125483556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20whole%20new%20error/near/125483556" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47957awholenewerror.html#125483556">Mario Carneiro (Apr 21 2018 at 06:30)</a>:</h4>
<p>does it help to use <code>((x2,b2)::hd2 : list _)</code> instead?</p>

<a name="125483605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20whole%20new%20error/near/125483605" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47957awholenewerror.html#125483605">Kenny Lau (Apr 21 2018 at 06:32)</a>:</h4>
<p>well, it doesn't, but list.cons worked</p>

<a name="125484552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20whole%20new%20error/near/125484552" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47957awholenewerror.html#125484552">Mario Carneiro (Apr 21 2018 at 07:08)</a>:</h4>
<div class="codehilite"><pre><span></span>theorem reduce.not : ∀ (L₁ L₂ L₃ : list (α × bool)) (x b), reduce L₁ ≠ L₂ ++ (x, b) :: (x, bnot b) :: L₃
| [] L2 L3 _ _ := λ h, by simpa using (list.append_eq_nil.1 h.symm).2
| ((x,b)::L1) L2 L3 x&#39; b&#39; := begin
  dsimp [reduce],
  cases r : reduce L1,
  { dsimp [reduce], intro h,
    have := congr_arg list.length h,
    simp [-add_comm] at this,
    exact absurd this dec_trivial },
  cases hd with y c,
  by_cases x = y ∧ ¬b = c; simp [reduce, h]; intro H,
  { rw H at r,
    exact reduce.not L1 ((y,c)::L2) L3 x&#39; b&#39; r },
  rcases L2 with _|⟨a, L2⟩,
  { injections, substs x&#39; y c b&#39;,
    refine h ⟨rfl, _⟩,
    cases b; exact dec_trivial },
  { refine reduce.not L1 L2 L3 x&#39; b&#39; _,
    injection H with _ H,
    rw [r, H], refl }
end
</pre></div>


<p>ah, I couldn't help myself</p>

<a name="125484554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20whole%20new%20error/near/125484554" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47957awholenewerror.html#125484554">Kenny Lau (Apr 21 2018 at 07:08)</a>:</h4>
<p>thanksssss</p>

<a name="125484611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20whole%20new%20error/near/125484611" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47957awholenewerror.html#125484611">Kenny Lau (Apr 21 2018 at 07:11)</a>:</h4>
<p>and I just realized that I only have two interface theorems</p>

<a name="125484612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20whole%20new%20error/near/125484612" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47957awholenewerror.html#125484612">Kenny Lau (Apr 21 2018 at 07:11)</a>:</h4>
<p>and I don't have to change the rest</p>

<a name="125484613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20whole%20new%20error/near/125484613" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47957awholenewerror.html#125484613">Kenny Lau (Apr 21 2018 at 07:11)</a>:</h4>
<p>which is again a testimony of the theory of interface</p>


{% endraw %}

{% include archive_update.html %}