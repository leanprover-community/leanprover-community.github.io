---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/28385changingtype.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html">`@` changing type?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="129193790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129193790" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129193790">Kevin Buzzard (Jul 06 2018 at 12:35)</a>:</h4>
<p>What's going on here?</p>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">Nat</span> <span class="o">:=</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">},</span> <span class="o">(</span><span class="n">X</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="bp">→</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span>

<span class="kn">definition</span> <span class="n">Zero</span> <span class="o">:</span> <span class="n">Nat</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">i</span>

<span class="bp">#</span><span class="kn">check</span> <span class="o">(</span><span class="n">Zero</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="c1">-- fails</span>

<span class="bp">#</span><span class="kn">check</span> <span class="o">(</span><span class="bp">@</span><span class="n">Zero</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="c1">-- works</span>
</pre></div>

<a name="129193835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129193835" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129193835">Kenny Lau (Jul 06 2018 at 12:36)</a>:</h4>
<p>change λ (X : Type) to λ {X : Type}?</p>

<a name="129193846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129193846" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129193846">Kevin Buzzard (Jul 06 2018 at 12:37)</a>:</h4>
<p>What does that change mean?</p>

<a name="129193849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129193849" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129193849">Kevin Buzzard (Jul 06 2018 at 12:37)</a>:</h4>
<p>It doesn't fix the problem</p>

<a name="129193852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129193852" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129193852">Kenny Lau (Jul 06 2018 at 12:37)</a>:</h4>
<p>never mind then</p>

<a name="129193853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129193853" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129193853">Kevin Buzzard (Jul 06 2018 at 12:37)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">definition</span> <span class="n">Nat</span> <span class="o">:=</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">},</span> <span class="o">(</span><span class="n">X</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="bp">→</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span>

<span class="kn">definition</span> <span class="n">Zero</span> <span class="o">:</span> <span class="n">Nat</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">i</span>

<span class="bp">#</span><span class="kn">check</span> <span class="o">(</span><span class="n">Zero</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="c1">-- fails</span>

<span class="bp">#</span><span class="kn">check</span> <span class="o">(</span><span class="bp">@</span><span class="n">Zero</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="c1">-- works</span>
</pre></div>

<a name="129193856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129193856" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129193856">Kevin Buzzard (Jul 06 2018 at 12:37)</a>:</h4>
<div class="codehilite"><pre><span></span>invalid type ascription, term has type
  (?m_1 → ?m_1) → ?m_1 → ?m_1 : Type
but is expected to have type
  Nat : Type 1
</pre></div>

<a name="129193858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129193858" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129193858">Kevin Buzzard (Jul 06 2018 at 12:37)</a>:</h4>
<p>It's a universe issue?</p>

<a name="129193861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129193861" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129193861">Chris Hughes (Jul 06 2018 at 12:37)</a>:</h4>
<p>change the pi</p>

<a name="129193864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129193864" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129193864">Chris Hughes (Jul 06 2018 at 12:37)</a>:</h4>
<p>brackets</p>

<a name="129193918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129193918" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129193918">Chris Hughes (Jul 06 2018 at 12:38)</a>:</h4>
<p>Zero has type <code>(? -&gt; ?) -&gt; ? -&gt; ?</code> or something</p>

<a name="129193934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129193934" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129193934">Chris Hughes (Jul 06 2018 at 12:39)</a>:</h4>
<p>or use <code>⦃</code></p>

<a name="129193940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129193940" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129193940">Chris Hughes (Jul 06 2018 at 12:39)</a>:</h4>
<p>for weakly implicit</p>

<a name="129194314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129194314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129194314">Kevin Buzzard (Jul 06 2018 at 12:49)</a>:</h4>
<blockquote>
<p>change λ (X : Type) to λ {X : Type}?</p>
</blockquote>
<p>This is syntactically valid but does it change anything?</p>

<a name="129194378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129194378" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129194378">Chris Hughes (Jul 06 2018 at 12:51)</a>:</h4>
<p>my guess is that if you don't state the type the inferred type will be <code>Pi {X}, ...</code> for one of them and <code>Pi (X), ...</code> for the other one.</p>

<a name="129194534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129194534" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129194534">Mario Carneiro (Jul 06 2018 at 12:54)</a>:</h4>
<p>In this case the binder on the lambda doesn't matter, since it is explicitly given the type <code>Nat</code></p>

<a name="129194551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129194551" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129194551">Mario Carneiro (Jul 06 2018 at 12:55)</a>:</h4>
<p>All that matters for elaboration purposes is whether <code>Nat</code> is defined as <code>Pi {X : Type}, ...</code> or <code>Pi (X : Type), ...</code></p>

<a name="129194690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129194690" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129194690">Johan Commelin (Jul 06 2018 at 12:59)</a>:</h4>
<p>Do I correctly infer from Kevin's example that Lean does not remember that <code>Zero</code> has type <code>Nat</code>, even if it is explicitly told so during the <code>definition</code>? So it uses that fact while type checking the definition, but afterwards throws it away and only stores the term (or something)?</p>

<a name="129194746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129194746" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129194746">Kevin Buzzard (Jul 06 2018 at 13:00)</a>:</h4>
<p>I think the problem is that when Lean sees <code>Zero</code> with <code>{}</code> it immediately tries to fill in the <code>{}</code> variable, so <code>Zero</code> is the same as <code>@Zero _</code> which is not the same as <code>@Zero</code></p>

<a name="129194750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129194750" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129194750">Kevin Buzzard (Jul 06 2018 at 13:00)</a>:</h4>
<p>If you use <code>{{}}</code> then Lean decides to wait until later before guessing what goes in the brackets</p>

<a name="129194801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129194801" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129194801">Kevin Buzzard (Jul 06 2018 at 13:02)</a>:</h4>
<p>The easiest fix is just to use <code>(X : Type)</code> I guess</p>

<a name="129194807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129194807" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129194807">Mario Carneiro (Jul 06 2018 at 13:03)</a>:</h4>
<p>When defining a type as a pi like this, you almost never want to use <code>Pi {X}</code> because of "surprises" like this</p>

<a name="129194818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129194818" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129194818">Mario Carneiro (Jul 06 2018 at 13:03)</a>:</h4>
<p>This is one of the main use cases for <code>Pi {{X}}</code></p>

<a name="129194820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60%40%60%20changing%20type%3F/near/129194820" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28385changingtype.html#129194820">Mario Carneiro (Jul 06 2018 at 13:03)</a>:</h4>
<p>like in the definition of <code>set.subset</code></p>


{% endraw %}
