---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/28164silentoverflow.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html">silent overflow</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="124842273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124842273" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124842273">Kevin Buzzard (Apr 09 2018 at 16:00)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">#</span><span class="kn">check</span> <span class="n">id</span> <span class="c1">-- all seems fine</span>

<span class="kn">example</span> <span class="o">:</span> <span class="mi">1000</span> <span class="bp">*</span> <span class="mi">1000</span> <span class="bp">=</span> <span class="mi">123456</span> <span class="o">:=</span> <span class="n">rfl</span> <span class="c1">-- no error reported</span>

<span class="bp">#</span><span class="kn">check</span> <span class="n">id</span> <span class="c1">-- all still seems fine</span>
</pre></div>

<a name="124842287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124842287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124842287">Kevin Buzzard (Apr 09 2018 at 16:00)</a>:</h4>
<p>changing <code>example</code> to <code>theorem X</code> shows that there is a problem</p>

<a name="124842294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124842294" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124842294">Kevin Buzzard (Apr 09 2018 at 16:00)</a>:</h4>
<p><code> deep recursion was detected at 'replace' (potential solution: increase stack space in your system) </code></p>

<a name="124842302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124842302" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124842302">Kevin Buzzard (Apr 09 2018 at 16:01)</a>:</h4>
<p>but the error is not triggered if we use <code>example</code></p>

<a name="124842353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124842353" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124842353">Kenny Lau (Apr 09 2018 at 16:02)</a>:</h4>
<p>no error reported!</p>

<a name="124842357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124842357" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124842357">Kevin Buzzard (Apr 09 2018 at 16:02)</a>:</h4>
<p>Changing example to theorem also gives us the <code> not a rfl-lemma, even though marked as rfl </code> error</p>

<a name="124842368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124842368" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124842368">Kevin Buzzard (Apr 09 2018 at 16:02)</a>:</h4>
<p>and perhaps this is relevant</p>

<a name="124842378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124842378" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124842378">Kevin Buzzard (Apr 09 2018 at 16:02)</a>:</h4>
<p>because <code>example : 1000  *  1000  =  123456  :=  by refl</code> gives the recursion error</p>

<a name="124842389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124842389" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124842389">Kevin Buzzard (Apr 09 2018 at 16:03)</a>:</h4>
<p>no error reported! So maybe we can prove 0=1</p>

<a name="124842394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124842394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124842394">Kevin Buzzard (Apr 09 2018 at 16:03)</a>:</h4>
<p>but it's hard to work with</p>

<a name="124842396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124842396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124842396">Kevin Buzzard (Apr 09 2018 at 16:03)</a>:</h4>
<p>I guess proving 1000000 = 123456 is just as good</p>

<a name="124842398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124842398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124842398">Kevin Buzzard (Apr 09 2018 at 16:03)</a>:</h4>
<p>Do you know how to run this through Lean with max paranoia options on?</p>

<a name="124842637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124842637" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124842637">Kevin Buzzard (Apr 09 2018 at 16:09)</a>:</h4>
<div class="codehilite"><pre><span></span>buzzard@bob:~$ more wrong.lean
example : 1000 * 1000 = 123456 := rfl -- no error reported
buzzard@bob:~$ lean --trust=0 wrong.lean
buzzard@bob:~$
</pre></div>

<a name="124842681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124842681" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124842681">Kevin Buzzard (Apr 09 2018 at 16:10)</a>:</h4>
<p>looks good to me</p>

<a name="124842908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124842908" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124842908">Kevin Buzzard (Apr 09 2018 at 16:16)</a>:</h4>
<p>dammit <code>example : 0 = 1 := @nat.add_left_cancel (1000 * 1000) 0 1 rfl
</code> doesn't work :-(</p>

<a name="124842921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124842921" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124842921">Kevin Buzzard (Apr 09 2018 at 16:16)</a>:</h4>
<p>you get the recursion error</p>

<a name="124843274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124843274" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124843274">Kevin Buzzard (Apr 09 2018 at 16:26)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">W</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">→</span> <span class="n">false</span> <span class="o">:=</span> <span class="n">dec_trivial</span>

<span class="kn">theorem</span> <span class="n">X</span> <span class="o">:</span> <span class="mi">1000</span> <span class="bp">*</span> <span class="mi">1000</span> <span class="bp">+</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">1000</span> <span class="bp">*</span> <span class="mi">1000</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">→</span> <span class="n">false</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">H</span><span class="o">,</span> <span class="n">W</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">add_left_cancel</span> <span class="n">H</span><span class="o">)</span>

<span class="kn">example</span> <span class="o">:</span> <span class="mi">1000</span> <span class="bp">*</span> <span class="mi">1000</span> <span class="bp">+</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">1000</span> <span class="bp">*</span> <span class="mi">1000</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">rfl</span> <span class="c1">-- no problem</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">false</span> <span class="o">:=</span> <span class="n">X</span> <span class="n">rfl</span> <span class="c1">-- recursion error</span>
</pre></div>

<a name="124843311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124843311" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124843311">Kevin Buzzard (Apr 09 2018 at 16:26)</a>:</h4>
<p>so near and yet so far</p>

<a name="124843350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124843350" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124843350">Kevin Buzzard (Apr 09 2018 at 16:27)</a>:</h4>
<p>" As far as we know, no proof of <code>false</code> has ever been accepted by Lean when using <code>-t0</code>. " (from the FAQ)</p>

<a name="124843354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124843354" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124843354">Kenny Lau (Apr 09 2018 at 16:27)</a>:</h4>
<p>who is <code>-t0</code>?</p>

<a name="124843359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124843359" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124843359">Kevin Buzzard (Apr 09 2018 at 16:27)</a>:</h4>
<p>same as <code>--trust 0</code></p>

<a name="124843363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124843363" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124843363">Kevin Buzzard (Apr 09 2018 at 16:27)</a>:</h4>
<p>"trust no-one"</p>

<a name="124843411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124843411" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124843411">Kevin Buzzard (Apr 09 2018 at 16:28)</a>:</h4>
<p><code>0 means do not trust any macro, and type check all imported modules</code></p>

<a name="124843433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124843433" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124843433">Kevin Buzzard (Apr 09 2018 at 16:29)</a>:</h4>
<p>My session earlier had Lean accepting wrong.lean even at <code>-t0</code> but it's not a proof of false, it's just a proof of something which is false :-)</p>

<a name="124843442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124843442" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124843442">Kevin Buzzard (Apr 09 2018 at 16:29)</a>:</h4>
<p>well, AFAIK it's false</p>

<a name="124843924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124843924" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124843924">Gabriel Ebner (Apr 09 2018 at 16:41)</a>:</h4>
<p>This would be really awesome, but I get an error:</p>
<div class="codehilite"><pre><span></span>type mismatch, term
  rfl
has type
  ?m_2 = ?m_2
but is expected to have type
  1000 * 1000 + 0 = 1000 * 1000 + 1
</pre></div>

<a name="124843933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124843933" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124843933">Kevin Buzzard (Apr 09 2018 at 16:42)</a>:</h4>
<p>ooh</p>

<a name="124843973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124843973" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124843973">Kevin Buzzard (Apr 09 2018 at 16:42)</a>:</h4>
<p>so maybe there's a problem with my set-up</p>

<a name="124843980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124843980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124843980">Kevin Buzzard (Apr 09 2018 at 16:42)</a>:</h4>
<div class="codehilite"><pre><span></span>$ lean --version
Lean (version 3.3.1, nightly-2018-04-06, commit 8f55ec4c5037, Release)
</pre></div>

<a name="124843982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124843982" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124843982">Kevin Buzzard (Apr 09 2018 at 16:42)</a>:</h4>
<p>Ubuntu 16.04</p>

<a name="124843985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124843985" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124843985">Kevin Buzzard (Apr 09 2018 at 16:42)</a>:</h4>
<p>mathlib HEAD</p>

<a name="124843992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124843992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124843992">Kevin Buzzard (Apr 09 2018 at 16:42)</a>:</h4>
<p>Nothing to do with VS Code because I can reproduce on the command line</p>

<a name="124844000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124844000" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124844000">Sebastian Ullrich (Apr 09 2018 at 16:43)</a>:</h4>
<p>I can reproduce the issue</p>

<a name="124844011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124844011" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124844011">Gabriel Ebner (Apr 09 2018 at 16:43)</a>:</h4>
<p>I now see it with the nightly as well, but not with my git build from master..</p>

<a name="124844059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124844059" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124844059">Sebastian Ullrich (Apr 09 2018 at 16:44)</a>:</h4>
<p>...using my git build :)</p>

<a name="124844068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124844068" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124844068">Kevin Buzzard (Apr 09 2018 at 16:44)</a>:</h4>
<p>Let me know if you want me to open an issue</p>

<a name="124844077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124844077" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124844077">Sebastian Ullrich (Apr 09 2018 at 16:45)</a>:</h4>
<p>...in release mode, could be relevant</p>

<a name="124844096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124844096" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124844096">Gabriel Ebner (Apr 09 2018 at 16:45)</a>:</h4>
<p>I'm always running relwithdebinfo.</p>

<a name="124845066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124845066" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124845066">Sebastian Ullrich (Apr 09 2018 at 17:08)</a>:</h4>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> Some initial observations:<br>
1) the exception is not reported by <a href="https://github.com/leanprover/lean/blob/bdea7d420dbcdb7cce700eb62c129387707016fc/src/frontends/lean/definition_cmds.cpp#L711" target="_blank" title="https://github.com/leanprover/lean/blob/bdea7d420dbcdb7cce700eb62c129387707016fc/src/frontends/lean/definition_cmds.cpp#L711">check_example</a> because <code>stack_space_exception</code> is not a <code>lean::exception</code><br>
2) It's then caught by <a href="https://github.com/leanprover/lean/blob/69322cd523e4087530af7cefe3198a1315f6379d/src/util/task.cpp#L60" target="_blank" title="https://github.com/leanprover/lean/blob/69322cd523e4087530af7cefe3198a1315f6379d/src/util/task.cpp#L60">task_queue::execute</a> but never reported, apparently</p>

<a name="124845166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124845166" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124845166">Gabriel Ebner (Apr 09 2018 at 17:10)</a>:</h4>
<p>Yeah, <code>task_queue::execute</code> doesn't report errors.</p>

<a name="124845241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124845241" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124845241">Gabriel Ebner (Apr 09 2018 at 17:12)</a>:</h4>
<p>I guess we should catch all exceptions in <code>check_example</code> to be consistent with <code>add</code> in <code>module.cpp</code>.</p>

<a name="124845319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124845319" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124845319">Gabriel Ebner (Apr 09 2018 at 17:14)</a>:</h4>
<p>I can now reproduce the error as well.  It just takes a slightly larger number:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="mi">1000</span><span class="bp">*</span><span class="mi">1000</span><span class="bp">*</span><span class="mi">100</span> <span class="bp">+</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">1000</span><span class="bp">*</span><span class="mi">1000</span><span class="bp">*</span><span class="mi">100</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">rfl</span> <span class="c1">-- no problem</span>
</pre></div>

<a name="124845399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124845399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124845399">Sebastian Ullrich (Apr 09 2018 at 17:16)</a>:</h4>
<p>Surely we should try and report the caught exception at some point...?</p>

<a name="124845410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124845410" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124845410">Gabriel Ebner (Apr 09 2018 at 17:16)</a>:</h4>
<p>Yes, in <code>check_example</code>.  We just need to add <code>std::</code> in front of the exception, and add a second catch-all <code>...</code> case like in <code>add</code>.</p>

<a name="124845431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124845431" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124845431">Sebastian Ullrich (Apr 09 2018 at 17:17)</a>:</h4>
<p>That too, but the task_queue shouldn't just swallow exceptions silently</p>

<a name="124845501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124845501" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124845501">Gabriel Ebner (Apr 09 2018 at 17:19)</a>:</h4>
<p><del>Mmh, good point.  At least some debugging output on stderr would be good.  For exceptions inheriting <code>std::exception</code> we can even print the error message.</del></p>

<a name="124845565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124845565" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124845565">Gabriel Ebner (Apr 09 2018 at 17:20)</a>:</h4>
<p>That won't work, many tasks end in an exceptional state.  And these exceptions are eventually reported.  We wouldn't want to print something to stderr for every red squiggle the user sees.</p>

<a name="124845579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124845579" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124845579">Gabriel Ebner (Apr 09 2018 at 17:21)</a>:</h4>
<p>This is similar to the failed promise issue in javascript.  There, a promise can also fail without throwing an exception or printing anything, you only get notified of the error if you listen to it.</p>

<a name="124845952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124845952" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124845952">Sebastian Ullrich (Apr 09 2018 at 17:30)</a>:</h4>
<p>In the sane promise APIs I know, not extracting the exception will make the promise throw it in its destructor. Which may kill the process if the exception is not caught in a background thread.</p>

<a name="124845954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/silent%20overflow/near/124845954" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/28164silentoverflow.html#124845954">Sebastian Ullrich (Apr 09 2018 at 17:30)</a>:</h4>
<p>We could do the same</p>


{% endraw %}

{% include archive_update.html %}