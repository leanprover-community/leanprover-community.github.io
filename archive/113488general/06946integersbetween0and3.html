---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/06946integersbetween0and3.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html">integers between 0 and 3</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="136162002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136162002" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136162002">Kevin Buzzard (Oct 20 2018 at 09:30)</a>:</h4>
<p><code>example : ∀ (r : ℤ), r ≥ 0 → r &lt; 3 → r = 0 ∨ r = 1 ∨ r = 2 := dec_trivial</code> doesn't work for me. Is there any easy way of getting from <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn><mo>≤</mo><mi>r</mi><mo>&lt;</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">0\leq r&lt;3</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="base"><span class="mord mathrm">0</span><span class="mrel">≤</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mrel">&lt;</span><span class="mord mathrm">3</span></span></span></span> (with <code>r : int</code>) to the three cases?</p>

<a name="136162014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136162014" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136162014">Kevin Buzzard (Oct 20 2018 at 09:31)</a>:</h4>
<p>(with <code>nat</code> it works fine so there's a slightly painful way)</p>

<a name="136162377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136162377" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136162377">Kenny Lau (Oct 20 2018 at 09:44)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">),</span> <span class="n">r</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">r</span> <span class="bp">&lt;</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">r</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">r</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">r</span> <span class="bp">=</span> <span class="mi">2</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
</pre></div>

<a name="136162649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136162649" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136162649">Kevin Buzzard (Oct 20 2018 at 09:55)</a>:</h4>
<p>So what is the equation compiler doing that <code>dec_trivial</code> can't do? It knows things which aren't decidable?</p>

<a name="136162650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136162650" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136162650">Kevin Buzzard (Oct 20 2018 at 09:55)</a>:</h4>
<p>PS thanks</p>

<a name="136162733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136162733" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136162733">Kevin Buzzard (Oct 20 2018 at 09:58)</a>:</h4>
<p>eew how do I sent this into the middle of a tactic proof?</p>

<a name="136162829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136162829" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136162829">Kevin Buzzard (Oct 20 2018 at 10:01)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">H0</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">≥</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">H3</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">&lt;</span> <span class="mi">3</span><span class="o">)</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">r</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">r</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">exact</span> <span class="k">match</span> <span class="n">r</span><span class="o">,</span> <span class="n">H0</span><span class="o">,</span> <span class="n">H3</span> <span class="k">with</span>
  <span class="bp">|</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">),</span> <span class="bp">_</span><span class="o">,</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
  <span class="bp">|</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">),</span> <span class="bp">_</span><span class="o">,</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
  <span class="bp">|</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">2</span><span class="o">),</span> <span class="bp">_</span><span class="o">,</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
  <span class="kn">end</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="136162916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136162916" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136162916">Kevin Buzzard (Oct 20 2018 at 10:04)</a>:</h4>
<p>got it</p>

<a name="136162917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136162917" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136162917">Mario Carneiro (Oct 20 2018 at 10:04)</a>:</h4>
<p>We need a decidable instance for bounded integer ranges</p>

<a name="136162930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136162930" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136162930">Kevin Buzzard (Oct 20 2018 at 10:05)</a>:</h4>
<p>that too. I was just tripped over by commas by the way. They're sometimes there and sometimes not.</p>

<a name="136162975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136162975" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136162975">Mario Carneiro (Oct 20 2018 at 10:06)</a>:</h4>
<p>they are there in <code>match</code>, not in <code>def</code> patterns</p>

<a name="136162980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136162980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136162980">Mario Carneiro (Oct 20 2018 at 10:07)</a>:</h4>
<p>I agree that this is an annoying inconsistency, but it also makes sense locally, if you change it then it doesn't fit something else</p>

<a name="136163123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136163123" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136163123">Kenny Lau (Oct 20 2018 at 10:12)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">finset</span>

<span class="n">def</span> <span class="n">int</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">finset</span> <span class="bp">ℤ</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">to_nat</span> <span class="o">(</span><span class="n">n</span><span class="bp">-</span><span class="n">m</span><span class="o">)))</span><span class="bp">.</span><span class="n">map</span>
  <span class="bp">⟨λ</span> <span class="n">r</span><span class="o">,</span> <span class="n">m</span><span class="bp">+</span><span class="n">r</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">r</span> <span class="n">s</span> <span class="n">H</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_inj</span> <span class="err">$</span> <span class="n">add_left_cancel</span> <span class="n">H</span><span class="bp">⟩</span>

<span class="kn">theorem</span> <span class="n">int</span><span class="bp">.</span><span class="n">mem_range_iff</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">}</span> <span class="o">:</span> <span class="n">r</span> <span class="err">∈</span> <span class="n">int</span><span class="bp">.</span><span class="n">range</span> <span class="n">m</span> <span class="n">n</span> <span class="bp">↔</span> <span class="n">m</span> <span class="bp">≤</span> <span class="n">r</span> <span class="bp">∧</span> <span class="n">r</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="o">:=</span>
<span class="bp">⟨λ</span> <span class="n">H</span><span class="o">,</span> <span class="k">let</span> <span class="bp">⟨</span><span class="n">s</span><span class="o">,</span> <span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">finset</span><span class="bp">.</span><span class="n">mem_map</span><span class="bp">.</span><span class="mi">1</span> <span class="n">H</span> <span class="k">in</span> <span class="n">h2</span> <span class="bp">▸</span>
  <span class="bp">⟨</span><span class="n">le_add_of_nonneg_right</span> <span class="n">trivial</span><span class="o">,</span>
  <span class="n">add_lt_of_lt_sub_left</span> <span class="err">$</span> <span class="k">match</span> <span class="n">n</span><span class="bp">-</span><span class="n">m</span><span class="o">,</span> <span class="n">h1</span> <span class="k">with</span>
    <span class="bp">|</span> <span class="o">(</span><span class="n">k</span><span class="o">:</span><span class="bp">ℕ</span><span class="o">),</span> <span class="n">h1</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">rwa</span> <span class="o">[</span><span class="n">finset</span><span class="bp">.</span><span class="n">mem_range</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">to_nat_coe_nat</span><span class="o">,</span> <span class="err">←</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_lt</span><span class="o">]</span> <span class="n">at</span> <span class="n">h1</span>
    <span class="kn">end</span><span class="bp">⟩</span><span class="o">,</span>
<span class="bp">λ</span> <span class="bp">⟨</span><span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">mem_map</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">⟨</span><span class="n">int</span><span class="bp">.</span><span class="n">to_nat</span> <span class="o">(</span><span class="n">r</span><span class="bp">-</span><span class="n">m</span><span class="o">),</span>
  <span class="n">finset</span><span class="bp">.</span><span class="n">mem_range</span><span class="bp">.</span><span class="mi">2</span> <span class="err">$</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_lt</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">to_nat_of_nonneg</span> <span class="o">(</span><span class="n">sub_nonneg_of_le</span> <span class="n">h1</span><span class="o">),</span>
      <span class="n">int</span><span class="bp">.</span><span class="n">to_nat_of_nonneg</span> <span class="o">(</span><span class="n">sub_nonneg_of_le</span> <span class="o">(</span><span class="n">le_of_lt</span> <span class="o">(</span><span class="n">lt_of_le_of_lt</span> <span class="n">h1</span> <span class="n">h2</span><span class="o">)))]</span><span class="bp">;</span>
    <span class="n">exact</span> <span class="n">sub_lt_sub_right</span> <span class="n">h2</span> <span class="bp">_</span><span class="o">,</span>
  <span class="k">show</span> <span class="n">m</span> <span class="bp">+</span> <span class="bp">_</span> <span class="bp">=</span> <span class="bp">_</span><span class="o">,</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">to_nat_of_nonneg</span> <span class="o">(</span><span class="n">sub_nonneg_of_le</span> <span class="n">h1</span><span class="o">),</span> <span class="n">add_sub_cancel&#39;_right</span><span class="o">]</span><span class="bp">⟩⟩</span>

<span class="kn">instance</span> <span class="n">int</span><span class="bp">.</span><span class="n">decidable_bounded</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">int</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable_pred</span> <span class="n">P</span><span class="o">]</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">r</span><span class="o">,</span> <span class="n">m</span> <span class="bp">≤</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">r</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">P</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">decidable_of_iff</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">r</span> <span class="err">∈</span> <span class="n">int</span><span class="bp">.</span><span class="n">range</span> <span class="n">m</span> <span class="n">n</span><span class="o">,</span> <span class="n">P</span> <span class="n">r</span><span class="o">)</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">mem_range_iff</span><span class="o">,</span> <span class="n">and_imp</span><span class="o">]</span>
</pre></div>

<a name="136164321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136164321" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136164321">Kevin Buzzard (Oct 20 2018 at 10:57)</a>:</h4>
<p>Will this trigger if I have <code>1&lt;= r &lt;= 5</code>?</p>

<a name="136167268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136167268" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136167268">Kenny Lau (Oct 20 2018 at 12:44)</a>:</h4>
<p>you're welcome to write 3 more instances</p>

<a name="136167269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136167269" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136167269">Kenny Lau (Oct 20 2018 at 12:44)</a>:</h4>
<p>but the answer is no</p>

<a name="136167496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136167496" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136167496">Kevin Buzzard (Oct 20 2018 at 12:53)</a>:</h4>
<p>You should PR all four</p>

<a name="136167500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136167500" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136167500">Kenny Lau (Oct 20 2018 at 12:53)</a>:</h4>
<p>nah I'll wait till they accept my current PR</p>

<a name="136167501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136167501" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136167501">Kenny Lau (Oct 20 2018 at 12:53)</a>:</h4>
<p>you can PR all four</p>

<a name="136168035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136168035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136168035">Kenny Lau (Oct 20 2018 at 13:11)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">finset</span>

<span class="n">def</span> <span class="n">int</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">finset</span> <span class="bp">ℤ</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">to_nat</span> <span class="o">(</span><span class="n">n</span><span class="bp">-</span><span class="n">m</span><span class="o">)))</span><span class="bp">.</span><span class="n">map</span>
  <span class="bp">⟨λ</span> <span class="n">r</span><span class="o">,</span> <span class="n">m</span><span class="bp">+</span><span class="n">r</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">r</span> <span class="n">s</span> <span class="n">H</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_inj</span> <span class="err">$</span> <span class="n">add_left_cancel</span> <span class="n">H</span><span class="bp">⟩</span>

<span class="kn">theorem</span> <span class="n">int</span><span class="bp">.</span><span class="n">mem_range_iff</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span> <span class="n">r</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">}</span> <span class="o">:</span> <span class="n">r</span> <span class="err">∈</span> <span class="n">int</span><span class="bp">.</span><span class="n">range</span> <span class="n">m</span> <span class="n">n</span> <span class="bp">↔</span> <span class="n">m</span> <span class="bp">≤</span> <span class="n">r</span> <span class="bp">∧</span> <span class="n">r</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="o">:=</span>
<span class="bp">⟨λ</span> <span class="n">H</span><span class="o">,</span> <span class="k">let</span> <span class="bp">⟨</span><span class="n">s</span><span class="o">,</span> <span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">finset</span><span class="bp">.</span><span class="n">mem_map</span><span class="bp">.</span><span class="mi">1</span> <span class="n">H</span> <span class="k">in</span> <span class="n">h2</span> <span class="bp">▸</span>
  <span class="bp">⟨</span><span class="n">le_add_of_nonneg_right</span> <span class="n">trivial</span><span class="o">,</span>
  <span class="n">add_lt_of_lt_sub_left</span> <span class="err">$</span> <span class="k">match</span> <span class="n">n</span><span class="bp">-</span><span class="n">m</span><span class="o">,</span> <span class="n">h1</span> <span class="k">with</span>
    <span class="bp">|</span> <span class="o">(</span><span class="n">k</span><span class="o">:</span><span class="bp">ℕ</span><span class="o">),</span> <span class="n">h1</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">rwa</span> <span class="o">[</span><span class="n">finset</span><span class="bp">.</span><span class="n">mem_range</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">to_nat_coe_nat</span><span class="o">,</span> <span class="err">←</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_lt</span><span class="o">]</span> <span class="n">at</span> <span class="n">h1</span>
    <span class="kn">end</span><span class="bp">⟩</span><span class="o">,</span>
<span class="bp">λ</span> <span class="bp">⟨</span><span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">mem_map</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">⟨</span><span class="n">int</span><span class="bp">.</span><span class="n">to_nat</span> <span class="o">(</span><span class="n">r</span><span class="bp">-</span><span class="n">m</span><span class="o">),</span>
  <span class="n">finset</span><span class="bp">.</span><span class="n">mem_range</span><span class="bp">.</span><span class="mi">2</span> <span class="err">$</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_lt</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">to_nat_of_nonneg</span> <span class="o">(</span><span class="n">sub_nonneg_of_le</span> <span class="n">h1</span><span class="o">),</span>
      <span class="n">int</span><span class="bp">.</span><span class="n">to_nat_of_nonneg</span> <span class="o">(</span><span class="n">sub_nonneg_of_le</span> <span class="o">(</span><span class="n">le_of_lt</span> <span class="o">(</span><span class="n">lt_of_le_of_lt</span> <span class="n">h1</span> <span class="n">h2</span><span class="o">)))]</span><span class="bp">;</span>
    <span class="n">exact</span> <span class="n">sub_lt_sub_right</span> <span class="n">h2</span> <span class="bp">_</span><span class="o">,</span>
  <span class="k">show</span> <span class="n">m</span> <span class="bp">+</span> <span class="bp">_</span> <span class="bp">=</span> <span class="bp">_</span><span class="o">,</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">to_nat_of_nonneg</span> <span class="o">(</span><span class="n">sub_nonneg_of_le</span> <span class="n">h1</span><span class="o">),</span> <span class="n">add_sub_cancel&#39;_right</span><span class="o">]</span><span class="bp">⟩⟩</span>

<span class="kn">instance</span> <span class="n">int</span><span class="bp">.</span><span class="n">decidable_le_lt</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">int</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable_pred</span> <span class="n">P</span><span class="o">]</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">r</span><span class="o">,</span> <span class="n">m</span> <span class="bp">≤</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">r</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">P</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">decidable_of_iff</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">r</span> <span class="err">∈</span> <span class="n">int</span><span class="bp">.</span><span class="n">range</span> <span class="n">m</span> <span class="n">n</span><span class="o">,</span> <span class="n">P</span> <span class="n">r</span><span class="o">)</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">mem_range_iff</span><span class="o">,</span> <span class="n">and_imp</span><span class="o">]</span>

<span class="kn">instance</span> <span class="n">int</span><span class="bp">.</span><span class="n">decidable_le_le</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">int</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable_pred</span> <span class="n">P</span><span class="o">]</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">r</span><span class="o">,</span> <span class="n">m</span> <span class="bp">≤</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">P</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">decidable_of_iff</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">r</span> <span class="err">∈</span> <span class="n">int</span><span class="bp">.</span><span class="n">range</span> <span class="n">m</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span> <span class="n">P</span> <span class="n">r</span><span class="o">)</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">mem_range_iff</span><span class="o">,</span> <span class="n">and_imp</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">lt_add_one_iff</span><span class="o">]</span>

<span class="kn">instance</span> <span class="n">int</span><span class="bp">.</span><span class="n">decidable_lt_lt</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">int</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable_pred</span> <span class="n">P</span><span class="o">]</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">r</span><span class="o">,</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">r</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">P</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">int</span><span class="bp">.</span><span class="n">decidable_le_lt</span> <span class="n">P</span> <span class="bp">_</span> <span class="bp">_</span>

<span class="kn">instance</span> <span class="n">int</span><span class="bp">.</span><span class="n">decidable_lt_le</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">int</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable_pred</span> <span class="n">P</span><span class="o">]</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">r</span><span class="o">,</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">r</span> <span class="bp">→</span> <span class="n">r</span> <span class="bp">≤</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">P</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">int</span><span class="bp">.</span><span class="n">decidable_le_le</span> <span class="n">P</span> <span class="bp">_</span> <span class="bp">_</span>
</pre></div>

<a name="136655155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136655155" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136655155">Kenny Lau (Oct 28 2018 at 14:56)</a>:</h4>
<p><a href="https://github.com/leanprover/mathlib/pull/445" target="_blank" title="https://github.com/leanprover/mathlib/pull/445">https://github.com/leanprover/mathlib/pull/445</a> <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span></p>

<a name="136655417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136655417" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136655417">Kevin Buzzard (Oct 28 2018 at 15:03)</a>:</h4>
<p>Thank you Kenny</p>

<a name="136795548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136795548" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136795548">Kenny Lau (Oct 30 2018 at 18:14)</a>:</h4>
<p>Merged <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span></p>

<a name="136801131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/integers%20between%200%20and%203/near/136801131" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06946integersbetween0and3.html#136801131">Tobias Grosser (Oct 30 2018 at 19:34)</a>:</h4>
<p>(deleted)</p>


{% endraw %}

{% include archive_update.html %}