---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/25467Figureouttherestbycc.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html">Figure out the rest by cc</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="130779658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Figure%20out%20the%20rest%20by%20cc/near/130779658" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html#130779658">Johan Commelin (Aug 02 2018 at 14:00)</a>:</h4>
<p>Can I tell Lean to work out the rest <code>by cc</code>:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">module</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">ring</span> <span class="n">R</span><span class="o">]</span>

<span class="kn">open</span> <span class="n">punit</span>

<span class="n">def</span> <span class="n">zero_module</span> <span class="o">:</span> <span class="n">module</span> <span class="n">R</span> <span class="n">punit</span> <span class="o">:=</span>
  <span class="o">{</span> <span class="n">smul</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span> <span class="n">star</span><span class="o">,</span>
    <span class="n">zero</span> <span class="o">:=</span> <span class="n">star</span><span class="o">,</span>
    <span class="n">add</span>  <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span> <span class="n">star</span><span class="o">,</span>
    <span class="n">neg</span>  <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">_</span><span class="o">,</span> <span class="n">star</span><span class="o">,</span>
    <span class="n">add_zero</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">cc</span><span class="o">,</span>
    <span class="n">zero_add</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">cc</span><span class="o">,</span>
    <span class="n">add_comm</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">cc</span><span class="o">,</span>
    <span class="n">add_left_neg</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">cc</span><span class="o">,</span>
    <span class="n">one_smul</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">cc</span><span class="o">,</span>
    <span class="n">mul_smul</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">cc</span><span class="o">,</span>
    <span class="n">add_smul</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">cc</span><span class="o">,</span>
    <span class="n">smul_add</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">cc</span><span class="o">,</span>
    <span class="n">add_assoc</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">cc</span> <span class="o">}</span>
</pre></div>

<a name="130779703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Figure%20out%20the%20rest%20by%20cc/near/130779703" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html#130779703">Johan Commelin (Aug 02 2018 at 14:01)</a>:</h4>
<p>I found that I was repeating myself, while trying to make a point to Lean.</p>

<a name="130779783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Figure%20out%20the%20rest%20by%20cc/near/130779783" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html#130779783">Scott Morrison (Aug 02 2018 at 14:02)</a>:</h4>
<p>sure, something like: </p>
<div class="codehilite"><pre><span></span>begin
  refine
  { smul := λ _ _, star,
    zero := star,
    add  := λ _ _, star,
    neg  := λ _, star,
    .. } ; cc
end
</pre></div>

<a name="130779915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Figure%20out%20the%20rest%20by%20cc/near/130779915" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html#130779915">Johan Commelin (Aug 02 2018 at 14:04)</a>:</h4>
<p>Aaah, I need to understand <code>refine</code>.</p>

<a name="130780063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Figure%20out%20the%20rest%20by%20cc/near/130780063" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html#130780063">Scott Morrison (Aug 02 2018 at 14:06)</a>:</h4>
<p>Curiously that doesn't actually work...</p>

<a name="130780069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Figure%20out%20the%20rest%20by%20cc/near/130780069" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html#130780069">Scott Morrison (Aug 02 2018 at 14:06)</a>:</h4>
<p>Of course, replacing <code>cc</code> with <code>obviously</code> does it. :-)</p>

<a name="130780103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Figure%20out%20the%20rest%20by%20cc/near/130780103" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html#130780103">Scott Morrison (Aug 02 2018 at 14:07)</a>:</h4>
<p>In fact just <code>by obviously</code> should work, except for some reason <code>split</code> doesn't work on modules, for some reason I can't see at the moment (type class inference throws an error?)</p>

<a name="130780108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Figure%20out%20the%20rest%20by%20cc/near/130780108" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html#130780108">Johan Commelin (Aug 02 2018 at 14:07)</a>:</h4>
<p><code>finish</code> works instead of <code>cc</code>.</p>

<a name="130780164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Figure%20out%20the%20rest%20by%20cc/near/130780164" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html#130780164">Kenny Lau (Aug 02 2018 at 14:08)</a>:</h4>
<p>what is <code>obviously</code>? is it in mathlib?</p>

<a name="130780199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Figure%20out%20the%20rest%20by%20cc/near/130780199" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html#130780199">Johan Commelin (Aug 02 2018 at 14:09)</a>:</h4>
<p>No, it is Scott's Hammer.</p>

<a name="130780206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Figure%20out%20the%20rest%20by%20cc/near/130780206" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html#130780206">Johan Commelin (Aug 02 2018 at 14:09)</a>:</h4>
<p>Well, maybe <code>tidy</code> is his hammer.</p>

<a name="130780270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Figure%20out%20the%20rest%20by%20cc/near/130780270" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html#130780270">Sean Leather (Aug 02 2018 at 14:10)</a>:</h4>
<p><a href="https://github.com/semorrison/lean-tidy/blob/master/src/tidy/tidy.lean#L81" target="_blank" title="https://github.com/semorrison/lean-tidy/blob/master/src/tidy/tidy.lean#L81"><code>obviously</code></a></p>

<a name="130780292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Figure%20out%20the%20rest%20by%20cc/near/130780292" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html#130780292">Johan Commelin (Aug 02 2018 at 14:11)</a>:</h4>
<p>So, the current golf record is:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">zero_module&#39;</span> <span class="o">:</span> <span class="n">module</span> <span class="n">R</span> <span class="n">punit</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">refine</span>
<span class="o">{</span> <span class="n">add</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">punit</span><span class="bp">.</span><span class="n">star</span><span class="o">,</span>
  <span class="n">zero</span> <span class="o">:=</span> <span class="n">punit</span><span class="bp">.</span><span class="n">star</span><span class="o">,</span>
  <span class="n">neg</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">punit</span><span class="bp">.</span><span class="n">star</span><span class="o">,</span>
  <span class="n">smul</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">c</span> <span class="n">x</span><span class="o">,</span> <span class="n">punit</span><span class="bp">.</span><span class="n">star</span><span class="o">,</span>
  <span class="bp">..</span> <span class="o">}</span><span class="bp">;</span> <span class="n">finish</span>
</pre></div>

<a name="130780309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Figure%20out%20the%20rest%20by%20cc/near/130780309" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html#130780309">Kenny Lau (Aug 02 2018 at 14:11)</a>:</h4>
<p>gadvardammt finish</p>

<a name="130780310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Figure%20out%20the%20rest%20by%20cc/near/130780310" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html#130780310">Johan Commelin (Aug 02 2018 at 14:11)</a>:</h4>
<p>Let's assume we open <code>punit</code>.</p>

<a name="130780403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Figure%20out%20the%20rest%20by%20cc/near/130780403" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html#130780403">Scott Morrison (Aug 02 2018 at 14:12)</a>:</h4>
<p>If someone can explain to me why you can't <code>split</code> when the goal is a module, maybe I can golf the entire proof to <code>by tidy</code>.</p>

<a name="130780415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Figure%20out%20the%20rest%20by%20cc/near/130780415" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html#130780415">Kenny Lau (Aug 02 2018 at 14:12)</a>:</h4>
<p>isn't the right command <code>constructor</code></p>

<a name="130780432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Figure%20out%20the%20rest%20by%20cc/near/130780432" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html#130780432">Kenny Lau (Aug 02 2018 at 14:13)</a>:</h4>
<p><code>split</code> is for inductive types I think</p>

<a name="130780438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Figure%20out%20the%20rest%20by%20cc/near/130780438" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/25467Figureouttherestbycc.html#130780438">Johan Commelin (Aug 02 2018 at 14:13)</a>:</h4>
<p><code>constructor</code> also fails...</p>


{% endraw %}
