---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/42489metaprogrammingandstructureinheritance.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/42489metaprogrammingandstructureinheritance.html">metaprogramming and structure inheritance</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="123582486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/metaprogramming%20and%20structure%20inheritance/near/123582486" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/42489metaprogrammingandstructureinheritance.html#123582486">Simon Hudon (Mar 12 2018 at 08:43)</a>:</h4>
<p>I'm trying to write a tactic that explores the inheritance structure. Given the name of a structure type, can I discover what are its ancestors?</p>

<a name="123583537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/metaprogramming%20and%20structure%20inheritance/near/123583537" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/42489metaprogrammingandstructureinheritance.html#123583537">Sebastian Ullrich (Mar 12 2018 at 09:20)</a>:</h4>
<p>Only for the new structure command. You need to reimplement <a href="https://github.com/leanprover/lean/blob/bdea7d420dbcdb7cce700eb62c129387707016fc/src/frontends/lean/structure_cmd.cpp#L139" target="_blank" title="https://github.com/leanprover/lean/blob/bdea7d420dbcdb7cce700eb62c129387707016fc/src/frontends/lean/structure_cmd.cpp#L139">get_parent_structures</a>, but that shouldn't be too hard.</p>

<a name="123583547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/metaprogramming%20and%20structure%20inheritance/near/123583547" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/42489metaprogrammingandstructureinheritance.html#123583547">Sebastian Ullrich (Mar 12 2018 at 09:21)</a>:</h4>
<p>tl;dr: subobject fields start with "_"</p>

<a name="123583803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/metaprogramming%20and%20structure%20inheritance/near/123583803" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/42489metaprogrammingandstructureinheritance.html#123583803">Simon Hudon (Mar 12 2018 at 09:31)</a>:</h4>
<p>How does one use the new structure command? Also, is <code>get_parent_structures</code> exposed to Lean?</p>

<a name="123583950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/metaprogramming%20and%20structure%20inheritance/near/123583950" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/42489metaprogrammingandstructureinheritance.html#123583950">Andrew Ashworth (Mar 12 2018 at 09:36)</a>:</h4>
<p>you're using the new structure command by default, I think</p>

<a name="123583951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/metaprogramming%20and%20structure%20inheritance/near/123583951" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/42489metaprogrammingandstructureinheritance.html#123583951">Andrew Ashworth (Mar 12 2018 at 09:36)</a>:</h4>
<p>as opposed to the old structure command which is accessed with <code>set option</code></p>

<a name="123583953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/metaprogramming%20and%20structure%20inheritance/near/123583953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/42489metaprogrammingandstructureinheritance.html#123583953">Sebastian Ullrich (Mar 12 2018 at 09:36)</a>:</h4>
<p>yep</p>

<a name="123584118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/metaprogramming%20and%20structure%20inheritance/near/123584118" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/42489metaprogrammingandstructureinheritance.html#123584118">Simon Hudon (Mar 12 2018 at 09:42)</a>:</h4>
<p>Thanks! And is it possible that <code>structure_fields</code> by default does not list those symbols starting with <code>_</code>?</p>

<a name="123584218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/metaprogramming%20and%20structure%20inheritance/near/123584218" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/42489metaprogrammingandstructureinheritance.html#123584218">Sebastian Ullrich (Mar 12 2018 at 09:46)</a>:</h4>
<p>Sorry, that was ambiguous. It's only in the inductive constructor parameters that they are encoded with <code>_</code></p>

<a name="123584227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/metaprogramming%20and%20structure%20inheritance/near/123584227" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/42489metaprogrammingandstructureinheritance.html#123584227">Sebastian Ullrich (Mar 12 2018 at 09:47)</a>:</h4>
<p>All <code>structure_fields</code> does is get the parameter names and strip any leading <code>_</code></p>

<a name="123584544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/metaprogramming%20and%20structure%20inheritance/near/123584544" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/42489metaprogrammingandstructureinheritance.html#123584544">Simon Hudon (Mar 12 2018 at 09:58)</a>:</h4>
<p>Let's say that I'm constructing an instance of <code>group</code> (but I don't know in the tactic that it is specifically group). I'd like to know that <code>monoid</code> is a direct parent so that I can use <code>mk_instance</code> and use the result as a source in <code>pexpr.mk_structure_instance</code>. How would you do it?</p>


{% endraw %}
