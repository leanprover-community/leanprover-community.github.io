---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/19443proofofthefivelemma.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html">proof of the five lemma</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="125618074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125618074" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125618074">Johan Commelin (Apr 24 2018 at 12:30)</a>:</h4>
<p>Yoohoo, I'm done.<br>
<a href="https://gist.github.com/jcommelin/9ea76f7a1356ed8dd9499e765f580ef8" target="_blank" title="https://gist.github.com/jcommelin/9ea76f7a1356ed8dd9499e765f580ef8">https://gist.github.com/jcommelin/9ea76f7a1356ed8dd9499e765f580ef8</a><br>
It's pretty long and ugly.</p>

<a name="125618084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125618084" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125618084">Johan Commelin (Apr 24 2018 at 12:31)</a>:</h4>
<p>Feel free to start golfing on this one (-;</p>

<a name="125618094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125618094" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125618094">Johan Commelin (Apr 24 2018 at 12:31)</a>:</h4>
<p>I feel that a computer should almost be able to find the proof alone</p>

<a name="125618132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125618132" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125618132">Johan Commelin (Apr 24 2018 at 12:32)</a>:</h4>
<p>But my tactic-fu is small and my tactic-writing-fu is nonexistent</p>

<a name="125618139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125618139" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125618139">Sean Leather (Apr 24 2018 at 12:32)</a>:</h4>
<p>But how would the computer know how many times to <code>apply_assumption</code>? <span class="emoji emoji-1f635" title="dizzy face">:dizzy_face:</span> <span class="emoji emoji-1f606" title="laughing">:laughing:</span></p>

<a name="125618157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125618157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125618157">Johan Commelin (Apr 24 2018 at 12:33)</a>:</h4>
<p>Yeah, agreed... but still... every line I really just follow my nose...</p>

<a name="125618160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125618160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125618160">Sean Leather (Apr 24 2018 at 12:33)</a>:</h4>
<p>The nice thing about your proof is that it is clearly step-by-step.</p>

<a name="125618162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125618162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125618162">Johan Commelin (Apr 24 2018 at 12:33)</a>:</h4>
<p>And I guess already with the existing tactics I think it can be reasonably shortened</p>

<a name="125618203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125618203" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125618203">Johan Commelin (Apr 24 2018 at 12:34)</a>:</h4>
<p>Because using commutativity or computations in a group takes pretty long atm</p>

<a name="125618223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125618223" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125618223">Johan Commelin (Apr 24 2018 at 12:35)</a>:</h4>
<p>I feel like the lines with <code>\ex bla : Group, condition</code> are the only place that Lean should get my help.</p>

<a name="125618224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125618224" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125618224">Johan Commelin (Apr 24 2018 at 12:35)</a>:</h4>
<p>The rest it should figure out alone...</p>

<a name="125622862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125622862" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125622862">Johan Commelin (Apr 24 2018 at 14:34)</a>:</h4>
<p>/me updated the proof of the five lemma: <a href="https://gist.github.com/jcommelin/9ea76f7a1356ed8dd9499e765f580ef8" target="_blank" title="https://gist.github.com/jcommelin/9ea76f7a1356ed8dd9499e765f580ef8">https://gist.github.com/jcommelin/9ea76f7a1356ed8dd9499e765f580ef8</a></p>

<a name="125622867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125622867" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125622867">Johan Commelin (Apr 24 2018 at 14:34)</a>:</h4>
<p>It is now refactored to first prove two four-lemmas</p>

<a name="125622871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125622871" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125622871">Johan Commelin (Apr 24 2018 at 14:34)</a>:</h4>
<p>These then combine to prove the five lemma</p>

<a name="125622956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125622956" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125622956">Kenny Lau (Apr 24 2018 at 14:36)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="k">begin</span>
 <span class="n">split</span><span class="o">,</span>
 <span class="n">apply</span> <span class="n">four_lemma₁</span> <span class="n">com₁</span> <span class="n">com₂</span> <span class="n">com₃</span> <span class="n">eB₁</span> <span class="n">eC₁</span> <span class="n">eB₂</span> <span class="n">eC₂</span> <span class="n">hj</span> <span class="n">hk</span><span class="bp">.</span><span class="mi">1</span> <span class="n">hm</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span>
 <span class="n">apply</span> <span class="n">four_lemma₂</span> <span class="n">com₂</span> <span class="n">com₃</span> <span class="n">com₄</span> <span class="n">eC₁</span> <span class="n">eD₁</span> <span class="n">eC₂</span> <span class="n">eD₂</span> <span class="n">hk</span><span class="bp">.</span><span class="mi">2</span> <span class="n">hm</span><span class="bp">.</span><span class="mi">2</span> <span class="n">hn</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="125622957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125622957" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125622957">Kenny Lau (Apr 24 2018 at 14:36)</a>:</h4>
<p>now I would write this in term mode lol</p>

<a name="125622973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125622973" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125622973">Kenny Lau (Apr 24 2018 at 14:37)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">⟨</span><span class="n">four_lemma₁</span> <span class="n">com₁</span> <span class="n">com₂</span> <span class="n">com₃</span> <span class="n">eB₁</span> <span class="n">eC₁</span> <span class="n">eB₂</span> <span class="n">eC₂</span> <span class="n">hj</span> <span class="n">hk</span><span class="bp">.</span><span class="mi">1</span> <span class="n">hm</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">four_lemma₂</span> <span class="n">com₂</span> <span class="n">com₃</span> <span class="n">com₄</span> <span class="n">eC₁</span> <span class="n">eD₁</span> <span class="n">eC₂</span> <span class="n">eD₂</span> <span class="n">hk</span><span class="bp">.</span><span class="mi">2</span> <span class="n">hm</span><span class="bp">.</span><span class="mi">2</span> <span class="n">hn</span><span class="bp">⟩</span>
</pre></div>

<a name="125622974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125622974" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125622974">Johan Commelin (Apr 24 2018 at 14:37)</a>:</h4>
<p>Aah, yes. I should have done that</p>

<a name="125623014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623014" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623014">Johan Commelin (Apr 24 2018 at 14:38)</a>:</h4>
<p>Also, can I use some <code>_</code> business to let it figure out the hypotheses itself?</p>

<a name="125623020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623020">Kenny Lau (Apr 24 2018 at 14:38)</a>:</h4>
<p>yes</p>

<a name="125623026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623026">Johan Commelin (Apr 24 2018 at 14:38)</a>:</h4>
<p>I tried... and failed <span class="emoji emoji-1f61e" title="disappointed">:disappointed:</span></p>

<a name="125623032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623032" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623032">Kenny Lau (Apr 24 2018 at 14:38)</a>:</h4>
<p>you removed the wrong things :P</p>

<a name="125623035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623035">Kenny Lau (Apr 24 2018 at 14:38)</a>:</h4>
<p><code>_</code> does not find the value from assumptions</p>

<a name="125623036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623036" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623036">Kenny Lau (Apr 24 2018 at 14:38)</a>:</h4>
<p><code>_</code> only does unification</p>

<a name="125623044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623044" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623044">Kenny Lau (Apr 24 2018 at 14:39)</a>:</h4>
<p>and only first order (and zeroth order) unification</p>

<a name="125623109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623109" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623109">Johan Commelin (Apr 24 2018 at 14:40)</a>:</h4>
<p>Hmm, ok... But it should be able to figure out everything alone</p>

<a name="125623111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623111">Johan Commelin (Apr 24 2018 at 14:40)</a>:</h4>
<p>I will need to learn at some point how to do that</p>

<a name="125623112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623112" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623112">Kenny Lau (Apr 24 2018 at 14:40)</a>:</h4>
<p>it does <strong>not</strong> find the appropriate proofs from the asumptions</p>

<a name="125623116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623116">Johan Commelin (Apr 24 2018 at 14:40)</a>:</h4>
<p>No, but I mean the <code>com₁ com₂ com₃ eB₁ eC₁ eB₂ eC₂ hj hk.1 hm.1</code> stuff</p>

<a name="125623127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623127" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623127">Kenny Lau (Apr 24 2018 at 14:41)</a>:</h4>
<p>why would it be able to figure them out?</p>

<a name="125623130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623130" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623130">Kenny Lau (Apr 24 2018 at 14:41)</a>:</h4>
<p>the goal is <code>bijective l</code></p>

<a name="125623131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623131" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623131">Kenny Lau (Apr 24 2018 at 14:41)</a>:</h4>
<p>it does not contain any of those things you mentioned</p>

<a name="125623137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623137" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623137">Kenny Lau (Apr 24 2018 at 14:41)</a>:</h4>
<p>they have to be found from the assumption list</p>

<a name="125623139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623139" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623139">Kenny Lau (Apr 24 2018 at 14:41)</a>:</h4>
<p>which <code>_</code> does not do</p>

<a name="125623142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623142" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623142">Kenny Lau (Apr 24 2018 at 14:41)</a>:</h4>
<p><code>_</code> only unifies types</p>

<a name="125623144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623144" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623144">Johan Commelin (Apr 24 2018 at 14:41)</a>:</h4>
<p>Yes, and the type of <code>l</code> is <code>C_1 \to C_2</code></p>

<a name="125623187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623187" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623187">Johan Commelin (Apr 24 2018 at 14:42)</a>:</h4>
<p>and those are mentioned in the statement, and there are requirements (e.g. a group <code>B_1</code> with a map to <code>C_1</code></p>

<a name="125623188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623188" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623188">Kenny Lau (Apr 24 2018 at 14:42)</a>:</h4>
<p>but if you replace <code>com₁</code> with <code>_</code>, the compiler would have to find <code>com₁</code> from the assumptions</p>

<a name="125623197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623197" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623197">Johan Commelin (Apr 24 2018 at 14:42)</a>:</h4>
<p>...), and those are also in the context, etcc...</p>

<a name="125623204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623204" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623204">Kenny Lau (Apr 24 2018 at 14:42)</a>:</h4>
<p>it is not in the type of the goal</p>

<a name="125623205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623205" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623205">Kenny Lau (Apr 24 2018 at 14:42)</a>:</h4>
<p>it is not in the type of any component of the goal</p>

<a name="125623209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623209" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623209">Kenny Lau (Apr 24 2018 at 14:42)</a>:</h4>
<p><code>_</code> does not find things from the local context</p>

<a name="125623211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623211" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623211">Kenny Lau (Apr 24 2018 at 14:43)</a>:</h4>
<p>(that is what I meant by assumption)</p>

<a name="125623221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623221" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623221">Kenny Lau (Apr 24 2018 at 14:43)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">H1</span> <span class="o">:</span> <span class="n">something</span>
<span class="n">H2</span> <span class="o">:</span> <span class="n">something</span>
<span class="bp">|-</span> <span class="n">goal</span>
</pre></div>

<a name="125623222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623222" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623222">Kenny Lau (Apr 24 2018 at 14:43)</a>:</h4>
<p><code>_</code> does not match against <code>H1</code> and <code>H2</code></p>

<a name="125623223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623223" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623223">Kenny Lau (Apr 24 2018 at 14:43)</a>:</h4>
<p>unless the <code>goal</code> contains them</p>

<a name="125623228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623228" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623228">Johan Commelin (Apr 24 2018 at 14:43)</a>:</h4>
<p>I see</p>

<a name="125623235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623235" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623235">Johan Commelin (Apr 24 2018 at 14:43)</a>:</h4>
<p>So, maybe I should not have done <code>apply ...</code>, but <code>simp [four_lemma_1]</code></p>

<a name="125623238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623238" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623238">Johan Commelin (Apr 24 2018 at 14:44)</a>:</h4>
<p>or something like that?</p>

<a name="125623278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623278" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623278">Kenny Lau (Apr 24 2018 at 14:44)</a>:</h4>
<p>does that work?</p>

<a name="125623282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623282" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623282">Kenny Lau (Apr 24 2018 at 14:44)</a>:</h4>
<p>I doubt that works</p>

<a name="125623284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623284" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623284">Kenny Lau (Apr 24 2018 at 14:44)</a>:</h4>
<p>try <code>apply four_lemma₁, repeat { assumption }</code></p>

<a name="125623306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623306" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623306">Kenny Lau (Apr 24 2018 at 14:45)</a>:</h4>
<p>alternatively <code>apply four_lemma₁; try { assumption }</code></p>

<a name="125623366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623366" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623366">Johan Commelin (Apr 24 2018 at 14:46)</a>:</h4>
<p>hmm, doesn't make it shorter... because it can't figure out <code>hk.1</code> on it's own...</p>

<a name="125623369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623369" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623369">Kenny Lau (Apr 24 2018 at 14:46)</a>:</h4>
<p>right</p>

<a name="125623373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623373" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623373">Johan Commelin (Apr 24 2018 at 14:46)</a>:</h4>
<p>never mind, I learned something (-;</p>

<a name="125623377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623377" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623377">Kenny Lau (Apr 24 2018 at 14:47)</a>:</h4>
<p>:)</p>

<a name="125623394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623394">Johan Commelin (Apr 24 2018 at 14:47)</a>:</h4>
<p>Next up: the snake lemma ???</p>

<a name="125623399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623399">Kenny Lau (Apr 24 2018 at 14:48)</a>:</h4>
<p>I heard one of them follows from the other</p>

<a name="125623443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623443" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623443">Johan Commelin (Apr 24 2018 at 14:48)</a>:</h4>
<p>I guess the snake lemma is stronger</p>

<a name="125623451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623451" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623451">Kenny Lau (Apr 24 2018 at 14:48)</a>:</h4>
<p>maybe we should have proved the snake lemma first :P</p>

<a name="125623455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623455" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623455">Johan Commelin (Apr 24 2018 at 14:48)</a>:</h4>
<p>lol</p>

<a name="125623461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623461" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623461">Johan Commelin (Apr 24 2018 at 14:48)</a>:</h4>
<p>There is also the salamander lemma</p>

<a name="125623470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623470" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623470">Johan Commelin (Apr 24 2018 at 14:49)</a>:</h4>
<p>And you can apply it 4 times to get the snake lemma</p>

<a name="125623475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623475" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623475">Kenny Lau (Apr 24 2018 at 14:49)</a>:</h4>
<p>then perhaps we should prove that first</p>

<a name="125623485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623485" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623485">Johan Commelin (Apr 24 2018 at 14:49)</a>:</h4>
<p><a href="https://ncatlab.org/nlab/show/salamander+lemma" target="_blank" title="https://ncatlab.org/nlab/show/salamander+lemma">https://ncatlab.org/nlab/show/salamander+lemma</a></p>

<a name="125623491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623491" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623491">Johan Commelin (Apr 24 2018 at 14:49)</a>:</h4>
<p>My eyes always glaze over when I read that page</p>

<a name="125623536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623536" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623536">Kenny Lau (Apr 24 2018 at 14:50)</a>:</h4>
<p>:P</p>

<a name="125623572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125623572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125623572">Kenny Lau (Apr 24 2018 at 14:51)</a>:</h4>
<p>really, prove the strongest theorem, and your work will be minimized</p>

<a name="125762769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762769" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762769">Kevin Buzzard (Apr 27 2018 at 07:37)</a>:</h4>
<p>I need the three lemma</p>

<a name="125762772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762772">Kevin Buzzard (Apr 27 2018 at 07:37)</a>:</h4>
<p>I need that if A,B,C,A',B',C' are abelian groups</p>

<a name="125762773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762773" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762773">Kevin Buzzard (Apr 27 2018 at 07:37)</a>:</h4>
<p>and A -&gt; B -&gt; C is exact</p>

<a name="125762776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762776" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762776">Kevin Buzzard (Apr 27 2018 at 07:37)</a>:</h4>
<p>and A is isomorphic to A'</p>

<a name="125762777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762777" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762777">Kevin Buzzard (Apr 27 2018 at 07:37)</a>:</h4>
<p>and B to B'</p>

<a name="125762778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762778" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762778">Kevin Buzzard (Apr 27 2018 at 07:37)</a>:</h4>
<p>and C to C'</p>

<a name="125762780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762780" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762780">Kevin Buzzard (Apr 27 2018 at 07:37)</a>:</h4>
<p>and we have maps A' -&gt; B' -&gt; C'</p>

<a name="125762782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762782" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762782">Kevin Buzzard (Apr 27 2018 at 07:38)</a>:</h4>
<p>with both squares commuting</p>

<a name="125762821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762821" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762821">Kevin Buzzard (Apr 27 2018 at 07:38)</a>:</h4>
<p>then A' -&gt; B' -&gt; C' is exact</p>

<a name="125762824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762824">Kevin Buzzard (Apr 27 2018 at 07:38)</a>:</h4>
<p>As a mathematician my instinct is to do surgery on the first sequence</p>

<a name="125762825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762825" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762825">Kevin Buzzard (Apr 27 2018 at 07:38)</a>:</h4>
<p>i.e. simply replace A with A', B with B' and C with C' and then say we're done</p>

<a name="125762832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762832" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762832">Kevin Buzzard (Apr 27 2018 at 07:39)</a>:</h4>
<p>I am trying to work out if there is a general principle here</p>

<a name="125762873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762873" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762873">Kevin Buzzard (Apr 27 2018 at 07:40)</a>:</h4>
<p>but if there is, I don't think I can formulate it well in Lean yet.</p>

<a name="125762884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762884" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762884">Kevin Buzzard (Apr 27 2018 at 07:40)</a>:</h4>
<p>It says something like "if there is a commutative diagram, and you do some computation like image of this over kernel of this"</p>

<a name="125762891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762891" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762891">Kevin Buzzard (Apr 27 2018 at 07:40)</a>:</h4>
<p>"and then you take a term in the commutative diagram and replace it with an isomorphic term such that all the diagrams commute"</p>

<a name="125762893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762893" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762893">Kevin Buzzard (Apr 27 2018 at 07:41)</a>:</h4>
<p>"then the computation changes in the same way"</p>

<a name="125762899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762899" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762899">Kevin Buzzard (Apr 27 2018 at 07:41)</a>:</h4>
<p>but I fear that I am going to have to use three lemmas to prove the three lemma</p>

<a name="125762900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762900" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762900">Kevin Buzzard (Apr 27 2018 at 07:41)</a>:</h4>
<p>one for replacing A</p>

<a name="125762901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762901" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762901">Kevin Buzzard (Apr 27 2018 at 07:41)</a>:</h4>
<p>one for B</p>

<a name="125762902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762902" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762902">Kevin Buzzard (Apr 27 2018 at 07:41)</a>:</h4>
<p>and one for C</p>

<a name="125762955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762955" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762955">Kevin Buzzard (Apr 27 2018 at 07:43)</a>:</h4>
<p>or just prove it by brute force in one go</p>

<a name="125762956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762956" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762956">Kevin Buzzard (Apr 27 2018 at 07:43)</a>:</h4>
<p>and then deal with the fact that I'll need another trivial lemma of this form tomorrow, tomorrow</p>

<a name="125762958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762958" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762958">Kevin Buzzard (Apr 27 2018 at 07:43)</a>:</h4>
<p>I want more of this abstract nonsense in Lean</p>

<a name="125762959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762959" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762959">Kevin Buzzard (Apr 27 2018 at 07:44)</a>:</h4>
<p>either for abelian groups</p>

<a name="125762999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125762999" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125762999">Kevin Buzzard (Apr 27 2018 at 07:44)</a>:</h4>
<p>or for abelian categories</p>

<a name="125763020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125763020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125763020">Johan Commelin (Apr 27 2018 at 07:45)</a>:</h4>
<p>Hmm, I'm sorry that my five lemma doesn't help <span class="emoji emoji-1f641" title="slightly frowning face">:slightly_frowning_face:</span></p>

<a name="125763021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125763021" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125763021">Kevin Buzzard (Apr 27 2018 at 07:45)</a>:</h4>
<p>yes, it's too strong :-)</p>

<a name="125763023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125763023" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125763023">Kevin Buzzard (Apr 27 2018 at 07:45)</a>:</h4>
<p>it proves something non-trivial</p>

<a name="125763028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125763028" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125763028">Johan Commelin (Apr 27 2018 at 07:45)</a>:</h4>
<p>Haha</p>

<a name="125763070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125763070" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125763070">Johan Commelin (Apr 27 2018 at 07:46)</a>:</h4>
<p>We need a very good way of substituting isomorphic things</p>

<a name="125763071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125763071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125763071">Kevin Buzzard (Apr 27 2018 at 07:46)</a>:</h4>
<p><code>rw</code> :-)</p>

<a name="125763072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125763072" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125763072">Johan Commelin (Apr 27 2018 at 07:46)</a>:</h4>
<p>I don't know much about HoTT, but I think this is what Voevodsky was after as well</p>

<a name="125763073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125763073" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125763073">Kevin Buzzard (Apr 27 2018 at 07:46)</a>:</h4>
<p>yes</p>

<a name="125763074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125763074" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125763074">Kevin Buzzard (Apr 27 2018 at 07:46)</a>:</h4>
<p>I wrote some vague mumblings about that in some other thread a week or so ago</p>

<a name="125763075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125763075" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125763075">Kevin Buzzard (Apr 27 2018 at 07:46)</a>:</h4>
<p>after reading some of his work</p>

<a name="125763081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125763081" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125763081">Kevin Buzzard (Apr 27 2018 at 07:47)</a>:</h4>
<p>but he redefined =</p>

<a name="125763085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125763085" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125763085">Johan Commelin (Apr 27 2018 at 07:47)</a>:</h4>
<p>Well, if you're changing from ZFC to type theory, might as well change '='</p>

<a name="125763124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125763124" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125763124">Johan Commelin (Apr 27 2018 at 07:48)</a>:</h4>
<p>Anyway, I guess that you are not saved by 5 <code>rw</code>s</p>

<a name="125763137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125763137" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125763137">Johan Commelin (Apr 27 2018 at 07:48)</a>:</h4>
<p>So we need <span class="user-mention" data-user-id="110524">@Scott Morrison</span> 's category theory, and then some strong tactics that know about commutative diagrams</p>

<a name="125763339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125763339" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125763339">Johan Commelin (Apr 27 2018 at 07:57)</a>:</h4>
<p>Or are you just going for a temporary brute force approach?</p>

<a name="125767661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125767661" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125767661">Kenny Lau (Apr 27 2018 at 10:13)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span> <span class="n">data</span><span class="bp">.</span><span class="n">equiv</span>

<span class="n">def</span> <span class="n">is_add_group_hom</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_group</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">add_group</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">is_group_hom</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">β</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">f</span>

<span class="n">attribute</span> <span class="o">[</span><span class="n">class</span><span class="o">]</span> <span class="n">is_add_group_hom</span>

<span class="kn">namespace</span> <span class="n">is_add_group_hom</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_group</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">add_group</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">[</span><span class="n">hf</span> <span class="o">:</span> <span class="n">is_add_group_hom</span> <span class="n">f</span><span class="o">]</span>

<span class="kn">theorem</span> <span class="n">mk</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_add_group_hom</span> <span class="n">f</span> <span class="o">:=</span>
<span class="bp">⟨</span><span class="n">H</span><span class="bp">⟩</span>

<span class="kn">theorem</span> <span class="n">add</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">f</span> <span class="n">y</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">is_group_hom</span><span class="bp">.</span><span class="n">mul</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">β</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">f</span> <span class="n">hf</span> <span class="n">x</span> <span class="n">y</span>

<span class="kn">theorem</span> <span class="n">zero</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">is_group_hom</span><span class="bp">.</span><span class="n">one</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">β</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">f</span> <span class="n">hf</span>

<span class="kn">theorem</span> <span class="n">neg</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">f</span> <span class="n">x</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">is_group_hom</span><span class="bp">.</span><span class="n">inv</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">β</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">f</span> <span class="n">hf</span> <span class="n">x</span>

<span class="n">def</span> <span class="n">ker</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">x</span> <span class="bp">|</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">}</span>

<span class="kn">end</span> <span class="n">is_add_group_hom</span>

<span class="kn">theorem</span> <span class="n">three</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">A&#39;</span> <span class="n">B&#39;</span> <span class="n">C&#39;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
  <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">A&#39;</span><span class="o">]</span>
  <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">B</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">B&#39;</span><span class="o">]</span>
  <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">C</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">C&#39;</span><span class="o">]</span>
  <span class="o">(</span><span class="n">ab</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">[</span><span class="n">is_add_group_hom</span> <span class="n">ab</span><span class="o">]</span>
  <span class="o">(</span><span class="n">bc</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="o">[</span><span class="n">is_add_group_hom</span> <span class="n">bc</span><span class="o">]</span>
  <span class="o">(</span><span class="n">Habc</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="n">ab</span> <span class="bp">=</span> <span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">ker</span> <span class="n">bc</span><span class="o">)</span>
  <span class="o">(</span><span class="n">fa</span> <span class="o">:</span> <span class="n">A</span> <span class="err">≃</span> <span class="n">A&#39;</span><span class="o">)</span> <span class="o">[</span><span class="n">is_add_group_hom</span> <span class="n">fa</span><span class="o">]</span>
  <span class="o">(</span><span class="n">fb</span> <span class="o">:</span> <span class="n">B</span> <span class="err">≃</span> <span class="n">B&#39;</span><span class="o">)</span> <span class="o">[</span><span class="n">is_add_group_hom</span> <span class="n">fb</span><span class="o">]</span>
  <span class="o">(</span><span class="n">fc</span> <span class="o">:</span> <span class="n">C</span> <span class="err">≃</span> <span class="n">C&#39;</span><span class="o">)</span> <span class="o">[</span><span class="n">is_add_group_hom</span> <span class="n">fc</span><span class="o">]</span>

  <span class="o">(</span><span class="n">ab&#39;</span> <span class="o">:</span> <span class="n">A&#39;</span> <span class="bp">→</span> <span class="n">B&#39;</span><span class="o">)</span> <span class="o">[</span><span class="n">is_add_group_hom</span> <span class="n">ab&#39;</span><span class="o">]</span>
  <span class="o">(</span><span class="n">bc&#39;</span> <span class="o">:</span> <span class="n">B&#39;</span> <span class="bp">→</span> <span class="n">C&#39;</span><span class="o">)</span> <span class="o">[</span><span class="n">is_add_group_hom</span> <span class="n">bc&#39;</span><span class="o">]</span>
  <span class="o">(</span><span class="n">H1</span> <span class="o">:</span> <span class="n">fb</span> <span class="err">∘</span> <span class="n">ab</span> <span class="bp">=</span> <span class="n">ab&#39;</span> <span class="err">∘</span> <span class="n">fa</span><span class="o">)</span>
  <span class="o">(</span><span class="n">H2</span> <span class="o">:</span> <span class="n">fc</span> <span class="err">∘</span> <span class="n">bc</span> <span class="bp">=</span> <span class="n">bc&#39;</span> <span class="err">∘</span> <span class="n">fb</span><span class="o">)</span> <span class="o">:</span>

  <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="n">ab&#39;</span> <span class="bp">=</span> <span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">ker</span> <span class="n">bc&#39;</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">apply</span> <span class="n">set</span><span class="bp">.</span><span class="n">ext</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">b&#39;</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">hb&#39;</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">hb&#39;</span> <span class="k">with</span> <span class="n">a&#39;</span> <span class="n">ha&#39;</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">ker</span><span class="o">],</span>
    <span class="k">let</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">fa</span><span class="bp">.</span><span class="n">symm</span> <span class="n">a&#39;</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">ha</span> <span class="o">:</span> <span class="n">fa</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a&#39;</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">simp</span> <span class="o">[</span><span class="n">a</span><span class="o">]</span> <span class="o">},</span>
    <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">ha&#39;</span><span class="o">,</span> <span class="err">←</span> <span class="n">ha</span><span class="o">],</span>
    <span class="n">change</span> <span class="n">bc&#39;</span> <span class="o">((</span><span class="n">ab&#39;</span> <span class="err">∘</span> <span class="n">fa</span><span class="o">)</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="n">H1</span><span class="o">,</span>
    <span class="n">change</span> <span class="o">(</span><span class="n">bc&#39;</span> <span class="err">∘</span> <span class="n">fb</span><span class="o">)</span> <span class="o">(</span><span class="n">ab</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="n">H2</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">H3</span> <span class="o">:</span> <span class="n">ab</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">ker</span> <span class="n">bc</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="err">←</span> <span class="n">Habc</span><span class="o">,</span> <span class="n">existsi</span> <span class="n">a</span><span class="o">,</span> <span class="n">simp</span> <span class="o">},</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">ker</span><span class="o">]</span> <span class="n">at</span> <span class="n">H3</span> <span class="err">⊢</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">H3</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">zero</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">hb&#39;</span><span class="o">,</span>
    <span class="k">let</span> <span class="n">b</span> <span class="o">:=</span> <span class="n">fb</span><span class="bp">.</span><span class="n">symm</span> <span class="n">b&#39;</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">hb</span> <span class="o">:</span> <span class="n">fb</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b&#39;</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">simp</span> <span class="o">[</span><span class="n">b</span><span class="o">]</span> <span class="o">},</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">ker</span><span class="o">]</span> <span class="n">at</span> <span class="n">hb&#39;</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="n">hb</span> <span class="n">at</span> <span class="n">hb&#39;</span><span class="o">,</span>
    <span class="n">change</span> <span class="o">(</span><span class="n">bc&#39;</span> <span class="err">∘</span> <span class="n">fb</span><span class="o">)</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">0</span> <span class="n">at</span> <span class="n">hb&#39;</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="n">H2</span> <span class="n">at</span> <span class="n">hb&#39;</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">zero</span> <span class="n">fc</span> <span class="n">at</span> <span class="n">hb&#39;</span><span class="o">,</span>
    <span class="n">replace</span> <span class="n">hb&#39;</span> <span class="o">:=</span> <span class="n">congr_arg</span> <span class="n">fc</span><span class="bp">.</span><span class="n">symm</span> <span class="n">hb&#39;</span><span class="o">,</span>
    <span class="n">simp</span> <span class="n">at</span> <span class="n">hb&#39;</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">H3</span> <span class="o">:</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="n">ab</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">rwa</span> <span class="n">Habc</span> <span class="o">},</span>
    <span class="n">cases</span> <span class="n">H3</span> <span class="k">with</span> <span class="n">a</span> <span class="n">ha</span><span class="o">,</span>
    <span class="n">existsi</span> <span class="n">fa</span> <span class="n">a</span><span class="o">,</span>
    <span class="n">change</span> <span class="o">(</span><span class="n">ab&#39;</span> <span class="err">∘</span> <span class="n">fa</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b&#39;</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="n">H1</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">ha</span><span class="o">]</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>

<a name="125767698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125767698" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125767698">Kenny Lau (Apr 27 2018 at 10:14)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span></p>

<a name="125768067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125768067" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125768067">Kenny Lau (Apr 27 2018 at 10:25)</a>:</h4>
<p>that's why I don't like stating equality with function composition</p>

<a name="125768238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125768238" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125768238">Kenny Lau (Apr 27 2018 at 10:29)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span> <span class="n">data</span><span class="bp">.</span><span class="n">equiv</span>

<span class="n">def</span> <span class="n">is_add_group_hom</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_group</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">add_group</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">is_group_hom</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">β</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">f</span>

<span class="n">attribute</span> <span class="o">[</span><span class="n">class</span><span class="o">]</span> <span class="n">is_add_group_hom</span>

<span class="kn">namespace</span> <span class="n">is_add_group_hom</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_group</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">add_group</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">[</span><span class="n">hf</span> <span class="o">:</span> <span class="n">is_add_group_hom</span> <span class="n">f</span><span class="o">]</span>

<span class="kn">theorem</span> <span class="n">mk</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_add_group_hom</span> <span class="n">f</span> <span class="o">:=</span>
<span class="bp">⟨</span><span class="n">H</span><span class="bp">⟩</span>

<span class="kn">theorem</span> <span class="n">add</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">f</span> <span class="n">y</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">is_group_hom</span><span class="bp">.</span><span class="n">mul</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">β</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">f</span> <span class="n">hf</span> <span class="n">x</span> <span class="n">y</span>

<span class="kn">theorem</span> <span class="n">zero</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">is_group_hom</span><span class="bp">.</span><span class="n">one</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">β</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">f</span> <span class="n">hf</span>

<span class="kn">theorem</span> <span class="n">neg</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">f</span> <span class="n">x</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">is_group_hom</span><span class="bp">.</span><span class="n">inv</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">β</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">f</span> <span class="n">hf</span> <span class="n">x</span>

<span class="n">def</span> <span class="n">ker</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">x</span> <span class="bp">|</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">}</span>

<span class="kn">end</span> <span class="n">is_add_group_hom</span>

<span class="kn">theorem</span> <span class="n">three</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">A&#39;</span> <span class="n">B&#39;</span> <span class="n">C&#39;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
  <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">A&#39;</span><span class="o">]</span>
  <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">B</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">B&#39;</span><span class="o">]</span>
  <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">C</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">C&#39;</span><span class="o">]</span>
  <span class="o">(</span><span class="n">ab</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">[</span><span class="n">is_add_group_hom</span> <span class="n">ab</span><span class="o">]</span>
  <span class="o">(</span><span class="n">bc</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="o">[</span><span class="n">is_add_group_hom</span> <span class="n">bc</span><span class="o">]</span>
  <span class="o">(</span><span class="n">Habc</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="n">ab</span> <span class="bp">=</span> <span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">ker</span> <span class="n">bc</span><span class="o">)</span>
  <span class="o">(</span><span class="n">fa</span> <span class="o">:</span> <span class="n">A</span> <span class="err">≃</span> <span class="n">A&#39;</span><span class="o">)</span> <span class="o">[</span><span class="n">is_add_group_hom</span> <span class="n">fa</span><span class="o">]</span>
  <span class="o">(</span><span class="n">fb</span> <span class="o">:</span> <span class="n">B</span> <span class="err">≃</span> <span class="n">B&#39;</span><span class="o">)</span> <span class="o">[</span><span class="n">is_add_group_hom</span> <span class="n">fb</span><span class="o">]</span>
  <span class="o">(</span><span class="n">fc</span> <span class="o">:</span> <span class="n">C</span> <span class="err">≃</span> <span class="n">C&#39;</span><span class="o">)</span> <span class="o">[</span><span class="n">is_add_group_hom</span> <span class="n">fc</span><span class="o">]</span>

  <span class="o">(</span><span class="n">ab&#39;</span> <span class="o">:</span> <span class="n">A&#39;</span> <span class="bp">→</span> <span class="n">B&#39;</span><span class="o">)</span> <span class="o">[</span><span class="n">is_add_group_hom</span> <span class="n">ab&#39;</span><span class="o">]</span>
  <span class="o">(</span><span class="n">bc&#39;</span> <span class="o">:</span> <span class="n">B&#39;</span> <span class="bp">→</span> <span class="n">C&#39;</span><span class="o">)</span> <span class="o">[</span><span class="n">is_add_group_hom</span> <span class="n">bc&#39;</span><span class="o">]</span>
  <span class="o">(</span><span class="n">H1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span><span class="o">,</span> <span class="n">fb</span> <span class="o">(</span><span class="n">ab</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="n">ab&#39;</span> <span class="o">(</span><span class="n">fa</span> <span class="n">a</span><span class="o">))</span>
  <span class="o">(</span><span class="n">H2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">b</span><span class="o">,</span> <span class="n">fc</span> <span class="o">(</span><span class="n">bc</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">bc&#39;</span> <span class="o">(</span><span class="n">fb</span> <span class="n">b</span><span class="o">))</span> <span class="o">:</span>

  <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="n">ab&#39;</span> <span class="bp">=</span> <span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">ker</span> <span class="n">bc&#39;</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">apply</span> <span class="n">set</span><span class="bp">.</span><span class="n">ext</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">b&#39;</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">hb&#39;</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">hb&#39;</span> <span class="k">with</span> <span class="n">a&#39;</span> <span class="n">ha&#39;</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">ker</span><span class="o">],</span>
    <span class="k">let</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">fa</span><span class="bp">.</span><span class="n">symm</span> <span class="n">a&#39;</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">ha</span> <span class="o">:</span> <span class="n">fa</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a&#39;</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">simp</span> <span class="o">[</span><span class="n">a</span><span class="o">]</span> <span class="o">},</span>
    <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">ha&#39;</span><span class="o">,</span> <span class="err">←</span> <span class="n">ha</span><span class="o">,</span> <span class="err">←</span> <span class="n">H1</span><span class="o">,</span> <span class="err">←</span> <span class="n">H2</span><span class="o">],</span>
    <span class="k">have</span> <span class="n">H3</span> <span class="o">:</span> <span class="n">ab</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">ker</span> <span class="n">bc</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="err">←</span> <span class="n">Habc</span><span class="o">,</span> <span class="n">existsi</span> <span class="n">a</span><span class="o">,</span> <span class="n">simp</span> <span class="o">},</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">ker</span><span class="o">]</span> <span class="n">at</span> <span class="n">H3</span> <span class="err">⊢</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">H3</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">zero</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">hb&#39;</span><span class="o">,</span>
    <span class="k">let</span> <span class="n">b</span> <span class="o">:=</span> <span class="n">fb</span><span class="bp">.</span><span class="n">symm</span> <span class="n">b&#39;</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">hb</span> <span class="o">:</span> <span class="n">fb</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b&#39;</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">simp</span> <span class="o">[</span><span class="n">b</span><span class="o">]</span> <span class="o">},</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">ker</span><span class="o">]</span> <span class="n">at</span> <span class="n">hb&#39;</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">hb</span><span class="o">,</span> <span class="err">←</span> <span class="n">H2</span><span class="o">,</span> <span class="err">←</span> <span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">zero</span> <span class="n">fc</span><span class="o">]</span> <span class="n">at</span> <span class="n">hb&#39;</span><span class="o">,</span>
    <span class="n">replace</span> <span class="n">hb&#39;</span> <span class="o">:=</span> <span class="n">congr_arg</span> <span class="n">fc</span><span class="bp">.</span><span class="n">symm</span> <span class="n">hb&#39;</span><span class="o">,</span>
    <span class="n">simp</span> <span class="n">at</span> <span class="n">hb&#39;</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">H3</span> <span class="o">:</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="n">ab</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">rwa</span> <span class="n">Habc</span> <span class="o">},</span>
    <span class="n">cases</span> <span class="n">H3</span> <span class="k">with</span> <span class="n">a</span> <span class="n">ha</span><span class="o">,</span>
    <span class="n">existsi</span> <span class="n">fa</span> <span class="n">a</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="n">H1</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">ha</span><span class="o">]</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>

<a name="125768242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125768242" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125768242">Kenny Lau (Apr 27 2018 at 10:30)</a>:</h4>
<p>this is much better</p>

<a name="125785178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125785178" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125785178">Reid Barton (Apr 27 2018 at 17:56)</a>:</h4>
<p>How about proving some lemmas like this one, and combining them into what you want.</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">equiv</span>

<span class="kn">open</span> <span class="n">set</span>

<span class="kn">lemma</span> <span class="n">equiv_range</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">{</span><span class="n">α&#39;</span> <span class="n">β&#39;</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">f&#39;</span> <span class="o">:</span> <span class="n">α&#39;</span> <span class="bp">→</span> <span class="n">β&#39;</span><span class="o">)</span>
  <span class="o">(</span><span class="n">eα</span> <span class="o">:</span> <span class="n">α</span> <span class="err">≃</span> <span class="n">α&#39;</span><span class="o">)</span> <span class="o">(</span><span class="n">eβ</span> <span class="o">:</span> <span class="n">β</span> <span class="err">≃</span> <span class="n">β&#39;</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">f&#39;</span> <span class="err">∘</span> <span class="n">eα</span> <span class="bp">=</span> <span class="n">eβ</span> <span class="err">∘</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">range</span> <span class="n">f&#39;</span> <span class="bp">=</span> <span class="n">eβ</span> <span class="err">&#39;&#39;</span> <span class="n">range</span> <span class="n">f</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">range</span> <span class="n">f&#39;</span> <span class="bp">=</span> <span class="n">f&#39;</span> <span class="err">&#39;&#39;</span> <span class="n">univ</span>         <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">image_univ</span>
     <span class="bp">...</span>      <span class="bp">=</span> <span class="n">f&#39;</span> <span class="err">&#39;&#39;</span> <span class="o">(</span><span class="n">range</span> <span class="n">eα</span><span class="o">)</span>   <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">range_iff_surjective</span><span class="bp">.</span><span class="n">mpr</span> <span class="n">eα</span><span class="bp">.</span><span class="n">bijective</span><span class="bp">.</span><span class="mi">2</span>
     <span class="bp">...</span>      <span class="bp">=</span> <span class="n">f&#39;</span> <span class="err">&#39;&#39;</span> <span class="o">(</span><span class="n">eα</span> <span class="err">&#39;&#39;</span> <span class="n">univ</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">image_univ</span>
     <span class="bp">...</span>      <span class="bp">=</span> <span class="o">(</span><span class="n">f&#39;</span> <span class="err">∘</span> <span class="n">eα</span><span class="o">)</span> <span class="err">&#39;&#39;</span> <span class="n">univ</span>  <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="err">←</span><span class="n">image_comp</span>
     <span class="bp">...</span>      <span class="bp">=</span> <span class="o">(</span><span class="n">eβ</span> <span class="err">∘</span> <span class="n">f</span><span class="o">)</span> <span class="err">&#39;&#39;</span> <span class="n">univ</span>   <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">h</span>
     <span class="bp">...</span>      <span class="bp">=</span> <span class="n">eβ</span> <span class="err">&#39;&#39;</span> <span class="o">(</span><span class="n">f</span> <span class="err">&#39;&#39;</span> <span class="n">univ</span><span class="o">)</span>  <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">image_comp</span>
     <span class="bp">...</span>      <span class="bp">=</span> <span class="n">eβ</span> <span class="err">&#39;&#39;</span> <span class="n">range</span> <span class="n">f</span>      <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">image_univ</span>
</pre></div>

<a name="125786306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125786306" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125786306">Reid Barton (Apr 27 2018 at 18:23)</a>:</h4>
<p>(Now I see that Patrick said much the same thing about a half hour earlier.)</p>

<a name="125788582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125788582" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125788582">Johan Commelin (Apr 27 2018 at 19:20)</a>:</h4>
<p>I should have used <code>calc</code> in my proof of the five lemma...</p>

<a name="125791112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125791112" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125791112">Kevin Buzzard (Apr 27 2018 at 20:22)</a>:</h4>
<p>You live and learn in this game</p>

<a name="125791117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125791117" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125791117">Kevin Buzzard (Apr 27 2018 at 20:23)</a>:</h4>
<p>Your levels were really helpful for me today. Do you know some abstract type theory?</p>

<a name="125791127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20of%20the%20five%20lemma/near/125791127" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/19443proofofthefivelemma.html#125791127">Kevin Buzzard (Apr 27 2018 at 20:23)</a>:</h4>
<p>You understood what Scott was saying</p>


{% endraw %}
