---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/75896syntaxsurprises.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html">syntax surprises</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="128299157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128299157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128299157">Sebastian Ullrich (Jun 19 2018 at 11:10)</a>:</h4>
<p>The Lean 4 parser only understands <code>prelude</code>, <code>import</code>, and <code>theory</code> so far, but I've already learned something surprising: <code>noncomputable theory</code> can be used anywhere in a file (also, multiple times)</p>

<a name="128299364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128299364" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128299364">Sean Leather (Jun 19 2018 at 11:16)</a>:</h4>
<p>Can you elucidate on what is surprising about that?</p>

<a name="128299761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128299761" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128299761">Sebastian Ullrich (Jun 19 2018 at 11:28)</a>:</h4>
<p>I assumed it only worked on the top of a file, since we usually use "theory" synonymously to "file".</p>

<a name="128300248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128300248" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128300248">Sean Leather (Jun 19 2018 at 11:43)</a>:</h4>
<p>Ah, <code>theory</code>, not <code>theorem</code>: I missed that. I also didn't know <code>theory</code> was a keyword.</p>

<a name="128300366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128300366" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128300366">Sean Leather (Jun 19 2018 at 11:46)</a>:</h4>
<p>I've only worked on computable theorems. Looking in the Lean 3 core library and mathlib, I see only <code>noncomputable theory</code> used. I don't see <code>theory</code> mentioned in the reference manual or TPIL. What purpose does <code>theory</code> serve?</p>

<a name="128300531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128300531" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128300531">Sebastian Ullrich (Jun 19 2018 at 11:50)</a>:</h4>
<p><code>theory</code> is a command, like <code>theorem</code>. <code>noncomputable</code> is a modifier you can apply to either of them. The distinction doesn't really matter in Lean 3 since <code>theory</code> can only be used together with<code>noncomputable</code>, which marks the remainder of the file as noncomputable.</p>

<a name="128300541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128300541" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128300541">Kenny Lau (Jun 19 2018 at 11:51)</a>:</h4>
<p>which marks the <em>appropriate</em> remainder of the file as noncomputable</p>

<a name="128300547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128300547" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128300547">Sebastian Ullrich (Jun 19 2018 at 11:51)</a>:</h4>
<p>yes</p>

<a name="128300549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128300549" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128300549">Kenny Lau (Jun 19 2018 at 11:51)</a>:</h4>
<p>computable functions remain computable</p>

<a name="128300685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128300685" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128300685">Sebastian Ullrich (Jun 19 2018 at 11:55)</a>:</h4>
<p>Perhaps we'll want to generalize <code>theory</code> in Lean 4, though I'm not sure whether there are many sensible combinations. Say, using <code>private theory</code>, then negating it using a new keyword <code>public</code> on a few declarations.</p>

<a name="128300690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128300690" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128300690">Kenny Lau (Jun 19 2018 at 11:55)</a>:</h4>
<p>lean -- java remade</p>

<a name="128304668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128304668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128304668">Reid Barton (Jun 19 2018 at 13:32)</a>:</h4>
<p>Oh funny, I've used <code>noncomputable theory</code> inside a section before and sort of expected it to be scoped, though there's no way I'd ever notice if it wasn't.</p>

<a name="128308056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128308056" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128308056">Johannes Hölzl (Jun 19 2018 at 14:40)</a>:</h4>
<p>wasn't there a Github issue the idea of introducing also <code>meta theory</code>?</p>

<a name="128308151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128308151" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128308151">Johannes Hölzl (Jun 19 2018 at 14:42)</a>:</h4>
<p><span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> what about changing <code>theory</code> to be only allowed at the file header, but extend <code>section</code> and <code>namespace</code> to take <code>meta</code>, <code>noncomputable</code>, <code>private</code>, <code>protected</code>, <code>public</code> modifiers?</p>

<a name="128308168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128308168" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128308168">Kenny Lau (Jun 19 2018 at 14:43)</a>:</h4>
<p>how do you define file header?</p>

<a name="128308172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128308172" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128308172">Kenny Lau (Jun 19 2018 at 14:43)</a>:</h4>
<p>currently <code>import</code> must be at the beginning</p>

<a name="128308179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128308179" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128308179">Sebastian Ullrich (Jun 19 2018 at 14:43)</a>:</h4>
<p><span class="user-mention" data-user-id="110294">@Johannes Hölzl</span>  Yes, that's my plan right now :)</p>

<a name="128308183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128308183" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128308183">Sebastian Ullrich (Jun 19 2018 at 14:43)</a>:</h4>
<p>Also, attributes on sections</p>

<a name="128308187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128308187" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128308187">Johannes Hölzl (Jun 19 2018 at 14:43)</a>:</h4>
<p>Nice!</p>

<a name="128308276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128308276" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128308276">Sebastian Ullrich (Jun 19 2018 at 14:45)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> Right now I've defined it as <code>prelude? (import ...)* (noncomputable theory)?</code></p>

<a name="128308342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128308342" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128308342">Kenny Lau (Jun 19 2018 at 14:46)</a>:</h4>
<p>are you going to regex the whole file</p>

<a name="128308362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128308362" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128308362">Sebastian Ullrich (Jun 19 2018 at 14:46)</a>:</h4>
<p>Of course, everyone knows you solve all problems with regexes</p>

<a name="128308375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128308375" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128308375">Kenny Lau (Jun 19 2018 at 14:47)</a>:</h4>
<p>now you have 2...</p>

<a name="128308434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128308434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128308434">Johannes Hölzl (Jun 19 2018 at 14:48)</a>:</h4>
<p>modulo whitespace / comments</p>

<a name="128308458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128308458" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128308458">Sebastian Ullrich (Jun 19 2018 at 14:48)</a>:</h4>
<p><code>repeat { all_goals { apply_regex } }</code></p>

<a name="128308841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128308841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128308841">Johannes Hölzl (Jun 19 2018 at 14:55)</a>:</h4>
<p>another purpose of theory could be to set parameters, or execute an imported command, like <code>mathlib theory</code>. This would setup certain notation, options, namespaces, version checks etc. I guess this could be also solved using <code>run_cmd</code>, but <code>theory</code> is a nice syntax. Also, what about moving <code>prelude</code> to <code>prelude theory</code>?</p>

<a name="128309035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128309035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128309035">Sebastian Ullrich (Jun 19 2018 at 14:59)</a>:</h4>
<p><code>prelude</code> should logically come before <code>import</code> since it suppreses the default imports. We could move <code>theory</code> to the front instead, I'm not sure.</p>

<a name="128309284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128309284" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128309284">Johannes Hölzl (Jun 19 2018 at 15:02)</a>:</h4>
<p>Okay, this makes sense.</p>

<a name="128309423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128309423" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128309423">Sebastian Ullrich (Jun 19 2018 at 15:04)</a>:</h4>
<p>There shouldn't be any reason to restrict the modifiers applicable to <code>theory</code> in Lean 4, no. Though, in the examples so far, it sounded like applying something to <code>theory</code> or <code>section</code> simply distributes it to all contained declarations (even if, as Kenny pointed out, it will behave differently from e.g. an explicit <code>noncomputable</code>). Your <code>mathlib</code> example doesn't quite fit in that scheme.</p>

<a name="128311123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128311123" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128311123">Mario Carneiro (Jun 19 2018 at 15:37)</a>:</h4>
<p>Will lean 4 allow for gathering the global file structure? For example: find the open section and namespace names; currently declared variables and parameters, notations and other <code>local</code> declarations; finding the "outline" of a given file, i.e. the tree of namespace and section blocks and the definitions in them</p>

<a name="128311421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/syntax%20surprises/near/128311421" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/75896syntaxsurprises.html#128311421">Sebastian Ullrich (Jun 19 2018 at 15:43)</a>:</h4>
<p>You'll definitely get access to a concrete syntax tree of the entire file. You should also get access to more "dynamic" information like open namespaces (which could be influenced by a <code>run_cmd</code>), though it's less clear what that could look like</p>


{% endraw %}

{% include archive_update.html %}