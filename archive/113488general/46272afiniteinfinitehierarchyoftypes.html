---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/46272afiniteinfinitehierarchyoftypes.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/46272afiniteinfinitehierarchyoftypes.html">a finite infinite hierarchy of types</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="173908297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20finite%20infinite%20hierarchy%20of%20types/near/173908297" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/46272afiniteinfinitehierarchyoftypes.html#173908297">Luca Seemungal (Aug 22 2019 at 18:24)</a>:</h4>
<p>Hi, I'm very new. "Theorem Proving in Lean" has the statement "Leanâ€™s underlying foundation has an infinite hierarchy of types", but if I type </p>
<div class="codehilite"><pre><span></span>#check Type 87172
</pre></div>


<p>my Lean server crashes. Why is this? My computer says it's a segfault (SIGSEGV)</p>

<a name="173909418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20finite%20infinite%20hierarchy%20of%20types/near/173909418" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/46272afiniteinfinitehierarchyoftypes.html#173909418">Floris van Doorn (Aug 22 2019 at 18:37)</a>:</h4>
<p>Interesting. I need to make the number a couple of orders of maginute larger for my Lean server to crash.</p>
<p>Of course, in practice this never matters, because you rarely work in a specific type universe higher than, say, <code>Type 3</code>.</p>

<a name="173909773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20finite%20infinite%20hierarchy%20of%20types/near/173909773" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/46272afiniteinfinitehierarchyoftypes.html#173909773">Luca Seemungal (Aug 22 2019 at 18:40)</a>:</h4>
<p>I'm going to go ahead and assume this is some sort of hardware (RAM?) limitation. My machine is an old laptop from 2009 and I don't have anything else to test this on at the moment.</p>

<a name="173910348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20finite%20infinite%20hierarchy%20of%20types/near/173910348" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/46272afiniteinfinitehierarchyoftypes.html#173910348">Simon Hudon (Aug 22 2019 at 18:47)</a>:</h4>
<p>I think you're right. I'm under the impression that the specific universes are encoded using unary numerals</p>

<a name="173910403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20finite%20infinite%20hierarchy%20of%20types/near/173910403" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/46272afiniteinfinitehierarchyoftypes.html#173910403">Simon Hudon (Aug 22 2019 at 18:48)</a>:</h4>
<p>That would be why your memory runs out</p>

<a name="173914294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20finite%20infinite%20hierarchy%20of%20types/near/173914294" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/46272afiniteinfinitehierarchyoftypes.html#173914294">Wojciech Nawrocki (Aug 22 2019 at 19:35)</a>:</h4>
<p>Yes, they are something like a linked list (with 87172 nodes in this case) iirc</p>

<a name="173924473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20finite%20infinite%20hierarchy%20of%20types/near/173924473" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/46272afiniteinfinitehierarchyoftypes.html#173924473">Mario Carneiro (Aug 22 2019 at 21:51)</a>:</h4>
<p>A linked list with 87172 nodes in it isn't that large... There must be hundreds or thousands of them to exhaust memory, and even so a segfault is not the best way to indicate this</p>

<a name="173966218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20finite%20infinite%20hierarchy%20of%20types/near/173966218" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/46272afiniteinfinitehierarchyoftypes.html#173966218">Wojciech Nawrocki (Aug 23 2019 at 12:52)</a>:</h4>
<p>You're right Mario, even with 16-byte nodes (pointer + some data) it would only be about 1Mib, so it shouldn't crash (but would be slow, since that's still a long list). Some of the code is <a href="https://github.com/leanprover/lean/blob/master/src/kernel/level.h#L42" target="_blank" title="https://github.com/leanprover/lean/blob/master/src/kernel/level.h#L42">here</a>.</p>

<a name="174016669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20finite%20infinite%20hierarchy%20of%20types/near/174016669" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/46272afiniteinfinitehierarchyoftypes.html#174016669">Keeley Hoek (Aug 24 2019 at 01:23)</a>:</h4>
<p>I don't know anything about how it works, but at some point there was some custom allocation going on for various objects in lean, and if that's still happening it could just be that the custom allocator ran out of memory pages and just tried to keep going.</p>


{% endraw %}

{% include archive_update.html %}