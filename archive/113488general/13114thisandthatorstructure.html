---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/13114thisandthatorstructure.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html">this and that, or structure?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="125377318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125377318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125377318">Kevin Buzzard (Apr 20 2018 at 08:02)</a>:</h4>
<p>I notice that in our schemes work, Kenny and I independently defined the concept of an open immersion between topological spaces.</p>

<a name="125377327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125377327" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125377327">Kevin Buzzard (Apr 20 2018 at 08:02)</a>:</h4>
<p>I wrote</p>

<a name="125377411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125377411" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125377411">Kevin Buzzard (Apr 20 2018 at 08:02)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">open_immersion</span>
  <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">Tα</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">Tβ</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">fcont</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">)</span>
<span class="o">(</span><span class="n">finj</span> <span class="o">:</span> <span class="n">function</span><span class="bp">.</span><span class="n">injective</span> <span class="n">f</span><span class="o">)</span>
<span class="o">(</span><span class="n">fopens</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">,</span> <span class="n">is_open</span> <span class="n">U</span> <span class="bp">↔</span> <span class="n">is_open</span> <span class="o">(</span><span class="n">f</span> <span class="err">&#39;&#39;</span> <span class="n">U</span><span class="o">))</span>
</pre></div>

<a name="125377452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125377452" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125377452">Kevin Buzzard (Apr 20 2018 at 08:02)</a>:</h4>
<p>Kenny wrote</p>

<a name="125377475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125377475" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125377475">Kevin Buzzard (Apr 20 2018 at 08:02)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">topological_space</span><span class="bp">.</span><span class="n">open_immersion</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">tX</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">tY</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">Y</span><span class="o">]</span> <span class="o">(</span><span class="n">φ</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
  <span class="n">continuous</span> <span class="n">φ</span> <span class="bp">∧</span>
  <span class="n">function</span><span class="bp">.</span><span class="n">injective</span> <span class="n">φ</span> <span class="bp">∧</span>
  <span class="bp">∀</span> <span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">,</span> <span class="n">tX</span><span class="bp">.</span><span class="n">is_open</span> <span class="n">U</span> <span class="bp">→</span> <span class="n">tY</span><span class="bp">.</span><span class="n">is_open</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">image</span> <span class="n">φ</span> <span class="n">U</span><span class="o">)</span>
</pre></div>

<a name="125377929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125377929" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125377929">Kevin Buzzard (Apr 20 2018 at 08:04)</a>:</h4>
<p>I don't think it would be too taxing to check that these two props were equivalent.</p>

<a name="125378082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125378082" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125378082">Kevin Buzzard (Apr 20 2018 at 08:04)</a>:</h4>
<p>But I think there's an argument for putting this basic notion into mathlib</p>

<a name="125378100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125378100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125378100">Kevin Buzzard (Apr 20 2018 at 08:04)</a>:</h4>
<p>and before I wrote the PR</p>

<a name="125378262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125378262" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125378262">Kevin Buzzard (Apr 20 2018 at 08:04)</a>:</h4>
<p>I realised I was going to have to understand better</p>

<a name="125378523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125378523" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125378523">Kevin Buzzard (Apr 20 2018 at 08:05)</a>:</h4>
<p>about the relative advantages / disadvantages between chaining "and" vs making a structure</p>

<a name="125379302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125379302" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125379302">Kenny Lau (Apr 20 2018 at 08:07)</a>:</h4>
<p><a href="https://github.com/kbuzzard/lean-stacks-project/commit/a3e4acc5b443f02c1decf3db32260ff28e4dd855#diff-ad019596efa140984bbb88e365b57df7" target="_blank" title="https://github.com/kbuzzard/lean-stacks-project/commit/a3e4acc5b443f02c1decf3db32260ff28e4dd855#diff-ad019596efa140984bbb88e365b57df7">https://github.com/kbuzzard/lean-stacks-project/commit/a3e4acc5b443f02c1decf3db32260ff28e4dd855#diff-ad019596efa140984bbb88e365b57df7</a></p>

<a name="125379303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125379303" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125379303">Kevin Buzzard (Apr 20 2018 at 08:07)</a>:</h4>
<p>They're both props, the structure version has the feature that it demands that you spell out which term is doing which of the three jobs that need doing, which may or may not be a good thing, and the "and" approach lets you write more compact code, constructing instances with pointy brackets, which may or may not be a good thing</p>

<a name="125379310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125379310" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125379310">Kenny Lau (Apr 20 2018 at 08:07)</a>:</h4>
<p>you wrote both definitions</p>

<a name="125379590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125379590" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125379590">Mario Carneiro (Apr 20 2018 at 08:08)</a>:</h4>
<p>You can use pointy brackets with either definition</p>

<a name="125379698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125379698" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125379698">Kevin Buzzard (Apr 20 2018 at 08:08)</a>:</h4>
<p>You're right Kenny, thanks.</p>

<a name="125379812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125379812" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125379812">Mario Carneiro (Apr 20 2018 at 08:09)</a>:</h4>
<p>All structure instances, in fact, can be written with pointy brackets instead of structure notation</p>

<a name="125380086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125380086" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125380086">Mario Carneiro (Apr 20 2018 at 08:09)</a>:</h4>
<p>it's just that this is harder to read when there are many properties since order matters</p>

<a name="125380341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125380341" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125380341">Kevin Buzzard (Apr 20 2018 at 08:10)</a>:</h4>
<p>Were you to be getting a mathlib PR with a definition of an open immersion</p>

<a name="125380367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125380367" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125380367">Kevin Buzzard (Apr 20 2018 at 08:10)</a>:</h4>
<p>which would you prefer?</p>

<a name="125380414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125380414" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125380414">Mario Carneiro (Apr 20 2018 at 08:10)</a>:</h4>
<p>the structure, I think</p>

<a name="125380548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125380548" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125380548">Kevin Buzzard (Apr 20 2018 at 08:10)</a>:</h4>
<p>OK thanks</p>

<a name="125381058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125381058" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125381058">Kevin Buzzard (Apr 20 2018 at 08:11)</a>:</h4>
<p>Sorry Kenny, I could see that you had done the hard work in that tag (supplying the proof of the result below) so just assumed you'd written the definition.</p>

<a name="125382019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125382019" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125382019">Patrick Massot (Apr 20 2018 at 08:13)</a>:</h4>
<blockquote>
<p>you wrote both definitions</p>
</blockquote>
<p>Ooohh, I never realized Kenny is only one schizophrenic identity of Kevin. That explains soo much...</p>

<a name="125382178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125382178" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125382178">Kevin Buzzard (Apr 20 2018 at 08:14)</a>:</h4>
<p>Our secret is out Kenny! Or should I say, Mr Hyde...</p>

<a name="125382277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125382277" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125382277">Kevin Buzzard (Apr 20 2018 at 08:14)</a>:</h4>
<p>In fact the far more mundane truth is that I write code, forget, and then write code again.</p>

<a name="125382278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125382278" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125382278">Kenny Lau (Apr 20 2018 at 08:14)</a>:</h4>
<p>right, I'm the constructivist version of Kevin</p>

<a name="125382304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125382304" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125382304">Kevin Buzzard (Apr 20 2018 at 08:14)</a>:</h4>
<p>ha ha</p>

<a name="125383630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125383630" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125383630">Patrick Massot (Apr 20 2018 at 08:18)</a>:</h4>
<p>Yeah, the story of a first year working in scheme theory was sort of believable, but the constructivism stuff I should have realize this was completely impossible</p>

<a name="125384461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125384461" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125384461">Gabriel Ebner (Apr 20 2018 at 08:21)</a>:</h4>
<blockquote>
<p>You can use pointy brackets with either definition</p>
</blockquote>
<p>OTOH, curly braces work much more nicely with the structure.  That is, you can write <code>{fcont := _, finj := _, fopens := _}</code>.  While with <code>∧</code>, you'd need <code>{left := _, right := {left := _, right := _}}</code>.</p>

<a name="125391137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/this%20and%20that%2C%20or%20structure%3F/near/125391137" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/13114thisandthatorstructure.html#125391137">Kevin Buzzard (Apr 20 2018 at 08:39)</a>:</h4>
<p>so <code>\and</code> is redundant in Lean ;-)</p>


{% endraw %}
