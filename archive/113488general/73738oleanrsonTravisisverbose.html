---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/73738oleanrsonTravisisverbose.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html">olean-rs on Travis is verbose</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="164688779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164688779" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164688779">Johan Commelin (May 02 2019 at 08:13)</a>:</h4>
<p>Currently the Travis log is very verbose when it starts checking that dependencies are minimal: <a href="https://travis-ci.org/leanprover-community/mathlib/jobs/527147591" target="_blank" title="https://travis-ci.org/leanprover-community/mathlib/jobs/527147591">https://travis-ci.org/leanprover-community/mathlib/jobs/527147591</a><br>
Do we want this, or should we instruct the Makefile to be a bit more silent?</p>

<a name="164702772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164702772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164702772">Simon Hudon (May 02 2019 at 12:23)</a>:</h4>
<p>Does it matter?</p>

<a name="164703026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164703026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164703026">Johan Commelin (May 02 2019 at 12:26)</a>:</h4>
<p>Well... it means you have to scroll down a long time before you see the error. But I guess that's why there is an <code>End</code> key on my keyboard <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>

<a name="164703155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164703155" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164703155">Johan Commelin (May 02 2019 at 12:28)</a>:</h4>
<p>Same topic, different question: <span class="user-mention" data-user-id="110026">@Simon Hudon</span> can we make the output more helpful? <a href="https://travis-ci.org/leanprover-community/mathlib/jobs/527258584" target="_blank" title="https://travis-ci.org/leanprover-community/mathlib/jobs/527258584">https://travis-ci.org/leanprover-community/mathlib/jobs/527258584</a></p>

<a name="164703185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164703185" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164703185">Johan Commelin (May 02 2019 at 12:29)</a>:</h4>
<p>Travis is complaining that the import is unused. But it is the only import, so I surely can't just remove it. Can the script explain what is the "correct" set of imports?</p>

<a name="164703215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164703215" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164703215">Johan Commelin (May 02 2019 at 12:30)</a>:</h4>
<p>I feel like a lot of PRs are going to stumble over this new check, unless we provide people with the tools to quickly fix their imports to the required minimum.</p>

<a name="164703315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164703315" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164703315">Simon Hudon (May 02 2019 at 12:30)</a>:</h4>
<p>I have that feature, it's not released yet but I can release it</p>

<a name="164704636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164704636" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164704636">Johan Commelin (May 02 2019 at 12:49)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> Does releasing it mean that Travis automatically picks it up?</p>

<a name="164704734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164704734" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164704734">Simon Hudon (May 02 2019 at 12:50)</a>:</h4>
<p>It does but I haven't tested it yet so I have to do that first</p>

<a name="164728340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164728340" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164728340">Simon Hudon (May 02 2019 at 17:39)</a>:</h4>
<p>Check out <a href="https://travis-ci.org/leanprover-community/mathlib/jobs/527258584" target="_blank" title="https://travis-ci.org/leanprover-community/mathlib/jobs/527258584">https://travis-ci.org/leanprover-community/mathlib/jobs/527258584</a></p>

<a name="164728448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164728448" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164728448">Simon Hudon (May 02 2019 at 17:40)</a>:</h4>
<p>If you install <code>olean-rs</code> locally, you can run the test before committing. I set it up to make it easier to check and recheck if you fix anything</p>

<a name="164782708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164782708" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164782708">Scott Morrison (May 03 2019 at 10:15)</a>:</h4>
<p>I can confirm this works nicely now!</p>

<a name="164784907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164784907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164784907">Scott Morrison (May 03 2019 at 11:00)</a>:</h4>
<p>Actually, sometimes it suggests too much. e.g. <a href="https://travis-ci.org/leanprover-community/mathlib/jobs/527683532" target="_blank" title="https://travis-ci.org/leanprover-community/mathlib/jobs/527683532">https://travis-ci.org/leanprover-community/mathlib/jobs/527683532</a> told me</p>
<div class="codehilite"><pre><span></span>* unused imports for algebraic_geometry.presheaf
category_theory.natural_isomorphism
  - replace with
       import category_theory.functor_category
              category_theory.isomorphism
              tactic.simpa
</pre></div>


<p>but in fact none of those three was necessary (presumably because they are already implied by other existing imports)</p>

<a name="164785066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164785066" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164785066">Scott Morrison (May 03 2019 at 11:02)</a>:</h4>
<p>I think overall I <em>don't</em> like this as a travis test.</p>

<a name="164785074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164785074" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164785074">Scott Morrison (May 03 2019 at 11:02)</a>:</h4>
<p>The PR process is already soul-crushing, and having yet another potential hiccup in the hours long process of waiting until travis is happy is just unbearable.</p>

<a name="164785095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164785095" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164785095">Scott Morrison (May 03 2019 at 11:03)</a>:</h4>
<p>I would prefer that we just run <code>olean-rs</code> every couple of months and make a single PR with lots of import fixing.</p>

<a name="164785100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164785100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164785100">Johan Commelin (May 03 2019 at 11:03)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> I think this one at least needs more testing. Can we disable it?</p>

<a name="164785155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164785155" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164785155">Johan Commelin (May 03 2019 at 11:04)</a>:</h4>
<blockquote>
<p>I would prefer that we just run <code>olean-rs</code> every couple of months and make a single PR with lots of import fixing.</p>
</blockquote>
<p>This PR could potentially even be scriptable, right? <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>

<a name="164786058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786058" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786058">Scott Morrison (May 03 2019 at 11:22)</a>:</h4>
<p>Yeah... I've just sat through a 45 minute build in order to see a second error message from olean-rs. This step in the PR process basically makes it compulsory for all PR authors to install a local copy of olean-rs, which is not okay.</p>

<a name="164786444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786444" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786444">Mario Carneiro (May 03 2019 at 11:31)</a>:</h4>
<p>import optimization on every commit is silly</p>

<a name="164786514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786514" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786514">Patrick Massot (May 03 2019 at 11:32)</a>:</h4>
<p>I wouldn't write "silly", but it certainly sounds like an unconvenient overkill</p>

<a name="164786529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786529" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786529">Mario Carneiro (May 03 2019 at 11:33)</a>:</h4>
<p>Maybe it would be okay if it was an automatic cleanup, but travis just saying "you weren't optimal, so you lose" is a recipe for stress</p>

<a name="164786622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786622" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786622">Johan Commelin (May 03 2019 at 11:34)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Do you know how to disable the test?</p>

<a name="164786658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786658" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786658">Mario Carneiro (May 03 2019 at 11:35)</a>:</h4>
<p>just restore the travis.yml to what it was before Simon added the test?</p>

<a name="164786668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786668">Johan Commelin (May 03 2019 at 11:35)</a>:</h4>
<p>Should I try to do that?</p>

<a name="164786671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786671" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786671">Mario Carneiro (May 03 2019 at 11:36)</a>:</h4>
<p>There are other linter warnings we might want to run, but the import test is the only one that's implemented so far</p>

<a name="164786729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786729" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786729">Mario Carneiro (May 03 2019 at 11:36)</a>:</h4>
<p>and it's not worth interrupting someone's workflow for that</p>

<a name="164786735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786735">Mario Carneiro (May 03 2019 at 11:36)</a>:</h4>
<p>stuff like indentation would be a better test</p>

<a name="164786747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786747" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786747">Johan Commelin (May 03 2019 at 11:37)</a>:</h4>
<p>I guess we need to remove these 4 lines <a href="https://github.com/leanprover-community/mathlib/blob/master/.travis.yml#L57-L60" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/.travis.yml#L57-L60">https://github.com/leanprover-community/mathlib/blob/master/.travis.yml#L57-L60</a></p>

<a name="164786839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786839" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786839">Johan Commelin (May 03 2019 at 11:38)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/973" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/973">#973</a></p>

<a name="164786848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786848" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786848">Johan Commelin (May 03 2019 at 11:38)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> should we just merge this? Or should this go through Travis + Mergify?</p>

<a name="164786876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786876" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786876">Mario Carneiro (May 03 2019 at 11:39)</a>:</h4>
<p>you should usually test travis changes first, let it run</p>

<a name="164786880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786880" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786880">Patrick Massot (May 03 2019 at 11:39)</a>:</h4>
<p>I would even had instructed Travis to keep away from this commit (using <code>[ci skip]</code> in the commit message)</p>

<a name="164786931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786931" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786931">Patrick Massot (May 03 2019 at 11:40)</a>:</h4>
<p>Travis could feel we are rebelling, and reject the commit</p>

<a name="164786932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786932">Mario Carneiro (May 03 2019 at 11:40)</a>:</h4>
<p>isn't it <code>[ci-skip]</code>?</p>

<a name="164786947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786947">Johan Commelin (May 03 2019 at 11:40)</a>:</h4>
<p>Next time I'll add both (-;</p>

<a name="164786966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786966" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786966">Patrick Massot (May 03 2019 at 11:41)</a>:</h4>
<p><a href="https://docs.travis-ci.com/user/customizing-the-build/#skipping-a-build" target="_blank" title="https://docs.travis-ci.com/user/customizing-the-build/#skipping-a-build">https://docs.travis-ci.com/user/customizing-the-build/#skipping-a-build</a></p>

<a name="164786967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164786967" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164786967">Patrick Massot (May 03 2019 at 11:41)</a>:</h4>
<p>no dash</p>

<a name="164787032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164787032" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164787032">Patrick Massot (May 03 2019 at 11:42)</a>:</h4>
<p>Maybe you are confused because <code>[travis-ci skip]</code> is a thing</p>

<a name="164787323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164787323" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164787323">Scott Morrison (May 03 2019 at 11:47)</a>:</h4>
<p>I also just got an error message that <code>make unused</code> took longer than 10 minutes: <a href="https://travis-ci.org/leanprover-community/mathlib/jobs/527719987" target="_blank" title="https://travis-ci.org/leanprover-community/mathlib/jobs/527719987">https://travis-ci.org/leanprover-community/mathlib/jobs/527719987</a></p>

<a name="164788845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164788845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164788845">Johan Commelin (May 03 2019 at 12:15)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Does Travis use the <code>.travis.yml</code> of the branch or of master?</p>

<a name="164788963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164788963" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164788963">Johan Commelin (May 03 2019 at 12:17)</a>:</h4>
<p>It would be quite unsafe to use the config from the PR branch...</p>

<a name="164793358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164793358" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164793358">Johan Commelin (May 03 2019 at 13:25)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> Your life should now be a bit easier again. I've disabled those checks on Travis.</p>

<a name="164808270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164808270" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164808270">Simon Hudon (May 03 2019 at 16:29)</a>:</h4>
<p>I'm not happy about disabling this check</p>

<a name="164808377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164808377" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164808377">Simon Hudon (May 03 2019 at 16:30)</a>:</h4>
<p>If you run <code>olean-rs</code> on your machine, you can catch those problems. If you don't run it, the back and forth with Travis should catch those issues.</p>

<a name="164808393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164808393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164808393">Simon Hudon (May 03 2019 at 16:30)</a>:</h4>
<p>Otherwise, it becomes someone's job to fix your messes</p>

<a name="164810253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164810253" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164810253">Simon Hudon (May 03 2019 at 16:53)</a>:</h4>
<p>It's easy to fix the timeout issue. <span class="user-mention" data-user-id="110087">@Scott Morrison</span> Would it make things better if the problem was reported as soon as the file was built? That's easy to do.</p>

<a name="164811442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164811442" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164811442">Johan Commelin (May 03 2019 at 17:06)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> We will need better instructions for PR authors. Most of them haven't even heard of <code>olean-rs</code>. Also... Scott reported false positives by <code>olean-rs</code>. I think that justifies disabling the checks for now. Moreover, if <code>olean-rs</code> could output a <code>sed</code>-script that will automatically fix all my imports, than it's really easy to use. The manual-iterative process is not a good thing.</p>

<a name="164811491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164811491" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164811491">Johan Commelin (May 03 2019 at 17:07)</a>:</h4>
<p>The back-and-forth with Travis takes &gt;40 minutes per cycle. That isn't realistically workable.</p>

<a name="164812543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164812543" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164812543">Simon Hudon (May 03 2019 at 17:20)</a>:</h4>
<p>I could get <code>script/setup-dev-scripts.py</code> to install <code>olean-rs</code> (and maybe we could rename it to <code>leant</code>)</p>

<a name="164812570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164812570" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164812570">Simon Hudon (May 03 2019 at 17:20)</a>:</h4>
<p>As for automatically applying the changes, we're not there yet. It would be an improvement but it is not necessary</p>

<a name="164812719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164812719" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164812719">Simon Hudon (May 03 2019 at 17:22)</a>:</h4>
<p>What we can do is get the errors to reported earlier in the build. With travis caching the build, the first file it compiles should be one you changed and we should check it right away so that the build fails quickly if you messed up</p>

<a name="164812774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164812774" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164812774">Simon Hudon (May 03 2019 at 17:23)</a>:</h4>
<p>If you don't want to wait for travis to do it, you can do it on your own machine and we can make it easy to install</p>

<a name="164813059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164813059" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164813059">Johan Commelin (May 03 2019 at 17:27)</a>:</h4>
<p>We first need to make it easy to install and use. And we need Travis to fail fast. After that, we can enable the check. Currently the community wasn't ready for this check yet.</p>

<a name="164813444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164813444" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164813444">Simon Hudon (May 03 2019 at 17:31)</a>:</h4>
<p>Ok, I'll work on that</p>

<a name="164813475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164813475" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164813475">Johan Commelin (May 03 2019 at 17:31)</a>:</h4>
<p>Thank you so much!</p>

<a name="164814021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164814021" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164814021">Simon Hudon (May 03 2019 at 17:38)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>

<a name="164831426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164831426" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164831426">Simon Hudon (May 03 2019 at 21:20)</a>:</h4>
<p>How do you guys feel about having <code>olean-rs</code> identify unused lemmas? I'm thinking of having options to declare that some theorems or lemmas are necessary or even whole files</p>

<a name="164831741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164831741" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164831741">Mario Carneiro (May 03 2019 at 21:26)</a>:</h4>
<p>what about endpoint theorems? What is necessary by fiat?</p>

<a name="164831798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164831798" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164831798">Mario Carneiro (May 03 2019 at 21:26)</a>:</h4>
<p>mathlib has a lot of endpoint theorems because it's a library</p>

<a name="164832544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164832544" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164832544">Simon Hudon (May 03 2019 at 21:39)</a>:</h4>
<p>For sure. And there may be a concise way of specifying them</p>

<a name="164832839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164832839" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164832839">Mario Carneiro (May 03 2019 at 21:44)</a>:</h4>
<p>that sounds like a lot of labeling. Almost all theorems in mathlib are endpoint theorems, to the extent that you will end up transferring the work to management of the annotations</p>

<a name="164833076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164833076" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164833076">Simon Hudon (May 03 2019 at 21:49)</a>:</h4>
<p>Are you sure? When you set off to prove a theorem, do you mostly use the other big theorems that you or other people proved before or the tiny lemmas that surround the definitions that you're using? I feel like the latter is the case</p>

<a name="164833145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164833145" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164833145">Mario Carneiro (May 03 2019 at 21:50)</a>:</h4>
<p>right, that's my point</p>

<a name="164833163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164833163" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164833163">Mario Carneiro (May 03 2019 at 21:50)</a>:</h4>
<p>the tiny lemmas are just as important if not moreso than the big theorems</p>

<a name="164833281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164833281" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164833281">Mario Carneiro (May 03 2019 at 21:52)</a>:</h4>
<p>It might be good to have a list of theorems that are never referenced, but I don't think we will need to do anything about most of them</p>

<a name="164833305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164833305" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164833305">Simon Hudon (May 03 2019 at 21:52)</a>:</h4>
<p>What information would you get from that list?</p>

<a name="164833357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164833357" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164833357">Mario Carneiro (May 03 2019 at 21:53)</a>:</h4>
<p>you could look at the list and find things that really are internal lemmas, but they don't stick out in any particular way</p>

<a name="164833453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164833453" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164833453">Mario Carneiro (May 03 2019 at 21:54)</a>:</h4>
<p>Way back at the start of mathlib I tried to institute the convention that all theorems are called theorems, but then all the mathematicians got involved and want to call these tiny theorems lemmas instead</p>

<a name="164833494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164833494" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164833494">Simon Hudon (May 03 2019 at 21:55)</a>:</h4>
<p>What difference did it make?</p>

<a name="164833546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164833546" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164833546">Mario Carneiro (May 03 2019 at 21:56)</a>:</h4>
<p>Huh? No difference, lean doesn't care</p>

<a name="164833563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164833563" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164833563">Mario Carneiro (May 03 2019 at 21:56)</a>:</h4>
<p>but I don't like meaningless distinctions and there is a bit of information there that is going to waste</p>

<a name="164833564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164833564" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164833564">Simon Hudon (May 03 2019 at 21:56)</a>:</h4>
<p>But presumably, you had a reason to want to adopt that convention</p>

<a name="164833573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164833573" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164833573">Mario Carneiro (May 03 2019 at 21:57)</a>:</h4>
<p>The rule was that everything is a theorem, unless it is private then it is a lemma</p>

<a name="164833586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164833586" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164833586">Simon Hudon (May 03 2019 at 21:57)</a>:</h4>
<p>Ah ok</p>

<a name="164833604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164833604" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164833604">Mario Carneiro (May 03 2019 at 21:57)</a>:</h4>
<p>It was my attempt at labeling endpoint theorems, like I said, everything is an endpoint theorem in mathlib</p>

<a name="164833658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164833658" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164833658">Mario Carneiro (May 03 2019 at 21:58)</a>:</h4>
<p>we could pick that convention up again</p>

<a name="164833679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164833679" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164833679">Simon Hudon (May 03 2019 at 21:58)</a>:</h4>
<p>Would you go so far as to say that there's no such thing as dead code in mathlib?</p>

<a name="164833776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164833776" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164833776">Mario Carneiro (May 03 2019 at 21:59)</a>:</h4>
<p>Since lean does not provide any facilities to hide stuff, anything in mathlib is observable</p>

<a name="164833790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164833790" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164833790">Mario Carneiro (May 03 2019 at 21:59)</a>:</h4>
<p>But mathlib changes often and some things are more stable than others</p>

<a name="164833916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164833916" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164833916">Mario Carneiro (May 03 2019 at 22:01)</a>:</h4>
<p>I try to reliably name my actual lemmas <code>*_aux</code></p>

<a name="164834010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834010" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834010">Mario Carneiro (May 03 2019 at 22:02)</a>:</h4>
<p>In principle I should mark them <code>private</code> too but because lean kernel has no built in support for privacy lean elaborator has to do tricks with namespaces that sometimes leak</p>

<a name="164834106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834106">Simon Hudon (May 03 2019 at 22:04)</a>:</h4>
<p>I don't suppose finding unused <code>_aux</code> definitions / lemmas is that useful for code review</p>

<a name="164834123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834123" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834123">Mario Carneiro (May 03 2019 at 22:04)</a>:</h4>
<p>However, marking a theorem or def <code>private</code> is a drastic measure, and many times I have found that I want to access that private thing later, so I tend to err on the side of making everything public these days</p>

<a name="164834149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834149" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834149">Simon Hudon (May 03 2019 at 22:05)</a>:</h4>
<p>I'm in the same boat.</p>

<a name="164834156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834156">Simon Hudon (May 03 2019 at 22:05)</a>:</h4>
<p>I never find that something should be private and often find that they shouldn't be</p>

<a name="164834236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834236" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834236">Simon Hudon (May 03 2019 at 22:06)</a>:</h4>
<p>Actually, I'd be perfectly fine if Lean didn't have a <code>private</code> mechanism</p>

<a name="164834258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834258" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834258">Mario Carneiro (May 03 2019 at 22:07)</a>:</h4>
<p>I don't think it really does</p>

<a name="164834317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834317" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834317">Simon Hudon (May 03 2019 at 22:08)</a>:</h4>
<p>It does not hide things completely but it does end up that we don't use private stuff from other modules.</p>

<a name="164834339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834339" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834339">Mario Carneiro (May 03 2019 at 22:09)</a>:</h4>
<p>How about this: marking something as <code>lemma</code> means it is eligible for cleanup if nothing references it</p>

<a name="164834355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834355" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834355">Mario Carneiro (May 03 2019 at 22:09)</a>:</h4>
<p>forget <code>private</code></p>

<a name="164834358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834358" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834358">Simon Hudon (May 03 2019 at 22:09)</a>:</h4>
<p>That's reasonable</p>

<a name="164834431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834431" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834431">Simon Hudon (May 03 2019 at 22:10)</a>:</h4>
<p>The problem for automation is that lemma vs theorem does not make it to <code>olean</code> files. I think I have to start looking at the <code>lean</code> files to find issues with PRs</p>

<a name="164834448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834448" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834448">Mario Carneiro (May 03 2019 at 22:10)</a>:</h4>
<p><code>olean-rs</code> should be able to do this much</p>

<a name="164834450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834450" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834450">Simon Hudon (May 03 2019 at 22:10)</a>:</h4>
<p>Actually, maybe I can use the <code>olean</code> files to enforce naming policies</p>

<a name="164834463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834463" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834463">Simon Hudon (May 03 2019 at 22:11)</a>:</h4>
<p>To do how much?</p>

<a name="164834474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834474" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834474">Mario Carneiro (May 03 2019 at 22:11)</a>:</h4>
<p>the experimental lean parser doesn't know that much but it knows command keywords so it can tell what the lemmas are</p>

<a name="164834545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834545" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834545">Mario Carneiro (May 03 2019 at 22:12)</a>:</h4>
<p>But this also has to be paired with some community norm changes re: random use of <code>lemma</code> vs <code>theorem</code></p>

<a name="164834593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834593" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834593">Simon Hudon (May 03 2019 at 22:13)</a>:</h4>
<p>That makes sense. We can also couple this kind of check with looking for definitions that are not referenced by other definitions or theorems / lemmas</p>

<a name="164834710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834710" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834710">Mario Carneiro (May 03 2019 at 22:15)</a>:</h4>
<p>Definitions are harder to clean up. Again, almost every <code>def</code> is expected to be used possibly outside mathlib</p>

<a name="164834719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834719" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834719">Mario Carneiro (May 03 2019 at 22:15)</a>:</h4>
<p>I don't think there is a better option than checking for use of <code>*_aux</code></p>

<a name="164834800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164834800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164834800">Simon Hudon (May 03 2019 at 22:17)</a>:</h4>
<p>How does that make things better?</p>

<a name="164835173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/olean-rs%20on%20Travis%20is%20verbose/near/164835173" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/73738oleanrsonTravisisverbose.html#164835173">Simon Hudon (May 03 2019 at 22:23)</a>:</h4>
<p>We could consider definitions to be end-points and report errors if they don't have specifications</p>


{% endraw %}
