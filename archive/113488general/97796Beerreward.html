---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/97796Beerreward.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html">Beer reward</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="184316990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184316990" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184316990">Patrick Massot (Dec 27 2019 at 11:46)</a>:</h4>
<p>Starting on January 14th, I'll be teaching my <a href="https://www.math.u-psud.fr/~pmassot/enseignement/math114/" target="_blank" title="https://www.math.u-psud.fr/~pmassot/enseignement/math114/">Lean-powered undergraduate course</a> again. Last year I was so afraid of the installation procedure on Windows that I didn't tell my students to try to install Lean at home. But this turned out to be a huge issue. So I'm offering <strong>as much beer as you can drink</strong> during <a href="http://www.andrew.cmu.edu/user/avigad/meetings/fomm2020/index.html" target="_blank" title="http://www.andrew.cmu.edu/user/avigad/meetings/fomm2020/index.html">Fomm2020</a> to anyone contributing to a download-and-click-only install of Lean+VScode+plugin+update-mathlib on Windows which then allows to download and unzip a project containing a compiled mathlib and use it without recompiling or typing any command in a shell. Ideally this should work on any version of Windows that my students could have, but having the main current version covered would already be nice. Useful starting points could include: <a href="https://github.com/NeilStrickland/lean_installer" target="_blank" title="https://github.com/NeilStrickland/lean_installer">https://github.com/NeilStrickland/lean_installer</a> and <a href="https://dzone.com/articles/making-a-stand-alone-executable-from-a-python-scri" target="_blank" title="https://dzone.com/articles/making-a-stand-alone-executable-from-a-python-scri">https://dzone.com/articles/making-a-stand-alone-executable-from-a-python-scri</a> or similar (one can only assume students will have an installation of python fighting Lean, not helping it). Let me ping potential windows users: <span class="user-mention" data-user-id="110596">@Rob Lewis</span>, <span class="user-mention" data-user-id="110049">@Mario Carneiro</span>, <span class="user-mention" data-user-id="111080">@Floris van Doorn</span>, <span class="user-mention" data-user-id="130308">@Neil Strickland</span></p>

<a name="184336618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184336618" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184336618">Andrew Ashworth (Dec 27 2019 at 18:38)</a>:</h4>
<p>Would an installer be necessary? It seems to me you could just make a zip file. Some combination of VSCode portable mode <a href="https://code.visualstudio.com/docs/editor/portable" target="_blank" title="https://code.visualstudio.com/docs/editor/portable">https://code.visualstudio.com/docs/editor/portable</a>, configuring the VSCode settings file, and bundling Lean and Mathlib.</p>

<a name="184338231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184338231" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184338231">Patrick Massot (Dec 27 2019 at 19:12)</a>:</h4>
<p>I don't know about installer. I only know students are not able to follow a list of instructions if is has more than two items or if one of the item is not "download" or "click".</p>

<a name="184338245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184338245" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184338245">Patrick Massot (Dec 27 2019 at 19:13)</a>:</h4>
<p>And also I have no access to Windows so I can't try anything.</p>

<a name="184339858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184339858" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184339858">Andrew Ashworth (Dec 27 2019 at 19:46)</a>:</h4>
<p>Ahh. Windows 10 has unlimited trial versions for development, in case you end up needing to do your own troubleshooting: <a href="https://developer.microsoft.com/en-us/windows/downloads/virtual-machines" target="_blank" title="https://developer.microsoft.com/en-us/windows/downloads/virtual-machines">https://developer.microsoft.com/en-us/windows/downloads/virtual-machines</a></p>

<a name="184340019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184340019" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184340019">Rob Lewis (Dec 27 2019 at 19:49)</a>:</h4>
<p>If you really want them to just download and unzip a project containing compiled mathlib, then installing <code>update-mathlib</code> should be unnecessary, right?</p>

<a name="184340065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184340065" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184340065">Rob Lewis (Dec 27 2019 at 19:50)</a>:</h4>
<p>That should let you skip all the Python nonsense.</p>

<a name="184340236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184340236" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184340236">Rob Lewis (Dec 27 2019 at 19:53)</a>:</h4>
<p>If that's the case, I agree with Andrew, throw everything in one zip with a configured portable VSCode. Maybe wrap it in a script that adds a shortcut or executable or something to open the right directory in VSCode.</p>

<a name="184342308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184342308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184342308">Patrick Massot (Dec 27 2019 at 20:35)</a>:</h4>
<p>I cheated a bit by mixing my lecture requirements with the general case. But I shouldn't have done that. What is urgent indeed doesn't need update-mathlib.</p>

<a name="184342357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184342357" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184342357">Patrick Massot (Dec 27 2019 at 20:36)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> Will your current IO api work allow to code update-mathlib in Lean?</p>

<a name="184342367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184342367" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184342367">Patrick Massot (Dec 27 2019 at 20:36)</a>:</h4>
<p>But I still don't know how the portable VScode thing will find Lean.</p>

<a name="184342626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184342626" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184342626">Simon Hudon (Dec 27 2019 at 20:42)</a>:</h4>
<p>I still donâ€™t have support for processes but once I have that it should be doable and more portable than a Lean 3 solution</p>

<a name="184342722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184342722" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184342722">Bryan Gin-ge Chen (Dec 27 2019 at 20:44)</a>:</h4>
<blockquote>
<p>But I still don't know how the portable VScode thing will find Lean.</p>
</blockquote>
<p>You might be able to include in your bundle a settings.json with a line that sets <a href="https://github.com/leanprover/vscode-lean#extension-settings" target="_blank" title="https://github.com/leanprover/vscode-lean#extension-settings"><code>lean.executablePath</code></a> to an appropriate relative path.</p>

<a name="184342778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184342778" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184342778">Patrick Massot (Dec 27 2019 at 20:45)</a>:</h4>
<p>I will probably try such hacks since nobody seems interested by beer. But it would be nice to offer a full solution.</p>

<a name="184346781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184346781" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184346781">Andrew Ashworth (Dec 27 2019 at 22:15)</a>:</h4>
<p>The latest versions of CMake allow easier installer creation. When Lean4 rolls around I will investigate it if I have time, I recently had to do a lot of this kind of thing for work so I have some familiarity with it. It's a little arcane.</p>

<a name="184348406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184348406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184348406">Kevin Buzzard (Dec 27 2019 at 22:56)</a>:</h4>
<p>I was thinking about this (for the same sort of reasons) a month or two ago, and it seemed to me to be reasonable to say to the students "download VS Code by clicking here" but then I decided that the holy grail would be for them never to have to type a command into a command line, so ideally one would want one click which says "tell me a directory where you want to put your Lean stuff" and then installs lean (somewhere) + a tutorial repo with compiled mathlib (in the directory they chose) and also, ideally, installs the Lean extension for VS Code.</p>

<a name="184348679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184348679" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184348679">Simon Hudon (Dec 27 2019 at 23:03)</a>:</h4>
<p><span class="user-mention" data-user-id="110025">@Andrew Ashworth</span> What do you mean by "rolls around"? The source code is available and it can be built so you can already use it</p>

<a name="184352002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184352002" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184352002">Andrew Ashworth (Dec 28 2019 at 00:42)</a>:</h4>
<p>I tried to build Lean 4 in... November? The CMake build on Windows with Clang + Mingw wasn't working for me. There was some issue with the bootstrap procedure (I don't really remember what it was, because I only spent ~30 minutes investigating). Perhaps the Windows build works now? I have not tested it since then.</p>

<a name="184352125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184352125" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184352125">Simon Hudon (Dec 28 2019 at 00:46)</a>:</h4>
<p>The CI system builds a Windows version, maybe you should look at it</p>

<a name="184352207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184352207" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184352207">Andrew Ashworth (Dec 28 2019 at 00:50)</a>:</h4>
<p>Yeah. I knew going in it was going to be a semi-pain, since Nix doesn't run on Windows at all. Maybe I will try again this weekend.</p>

<a name="184392630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184392630" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184392630">Patrick Massot (Dec 28 2019 at 21:55)</a>:</h4>
<p>I <em>think</em> I just managed to boot the Windows VM pointed out by Andrew!</p>

<a name="184393374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184393374" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184393374">Patrick Massot (Dec 28 2019 at 22:18)</a>:</h4>
<p>So I'm now exploring that portable mode in VScode. I manage to "install" VScode + lean plugin in user space. Now I can download lean and put it in the same folder. But I need to choose the right Lean executable path. <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> or <span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> do you have any idea how I could use a path relative to the VScode executable here?</p>

<a name="184393380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184393380" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184393380">Patrick Massot (Dec 28 2019 at 22:18)</a>:</h4>
<p>I don't even know whether I should use Windows backward path separator here.</p>

<a name="184393558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184393558" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184393558">Patrick Massot (Dec 28 2019 at 22:24)</a>:</h4>
<p>It seems that giving a full absolute path with backward separators works in the sense that it doesn't complain about lauching Lean. But then <code>#check nat</code> takes forever. I'll continue investigating tomorrow. But this is pointless if we can't solve that relative path issue.</p>

<a name="184399644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184399644" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184399644">Bryan Gin-ge Chen (Dec 29 2019 at 01:45)</a>:</h4>
<p>Just now I set up a portable vscode on my Mac, but I couldn't get the extension to find Lean whenever I used any relative path (even <code>~/path/to/lean</code> didn't work). There's a semi-related issue <a href="https://github.com/microsoft/vscode/issues/2809" target="_blank" title="https://github.com/microsoft/vscode/issues/2809">here</a> that I found after googling for "VS Code relative paths" (long story short, a keyword to use in settings paths that would stand for the location of the executable doesn't exist yet). </p>
<p>Maybe we could hack something in vscode-lean (or a fork?). <a href="https://stackoverflow.com/questions/38955116/how-does-an-extension-for-vs-code-get-the-install-path-of-vs-code" target="_blank" title="https://stackoverflow.com/questions/38955116/how-does-an-extension-for-vs-code-get-the-install-path-of-vs-code">Apparently</a>, we can get the absolute path to the vscode-lean extension with <code>vscode.extensions.getExtension ("jroesch.lean").extensionPath</code>. Since the folder structure for the portable VS Code that you provide should be predictable, we should be able to use this method to give an absolute path to Lean?</p>
<p>I'll experiment with this a little bit more tonight, but no promises.</p>

<a name="184402035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184402035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184402035">Bryan Gin-ge Chen (Dec 29 2019 at 03:07)</a>:</h4>
<p>OK, <a href="https://github.com/bryangingechen/vscode-lean/tree/pmassot" target="_blank" title="https://github.com/bryangingechen/vscode-lean/tree/pmassot">here's</a> a fork of vscode-lean which allows you to use <code>%extensionPath%</code> in the <code>lean.executablePath</code> and <code>lean.leanpkgPath</code> settings as a placeholder for the absolute path to the extension. You then can specify a relative path on top of that and hopefully that's enough for your needs. To test it out:</p>
<ul>
<li>Clone the repo and then <a href="https://code.visualstudio.com/api/working-with-extensions/publishing-extension#packaging-extensions" target="_blank" title="https://code.visualstudio.com/api/working-with-extensions/publishing-extension#packaging-extensions">bundle it with <code>vsce package</code> to get a <code>.vsix</code> file</a>. Or if you trust me, you can download the attached file: <a href="/user_uploads/3121/0UiIdOqEwS-u0amZcBSOph_N/lean-0.14.8.vsix" target="_blank" title="lean-0.14.8.vsix">lean-0.14.8.vsix</a>. </li>
<li>Open the extensions tab in your portable version of VS Code and then click the three dots at the top right to "Install from VSIX".</li>
<li>Now open the settings and edit <code>lean.executablePath</code> and <code>lean.leanpkgPath</code> (the 2nd most likely doesn't matter since your students are not likely to use the leanpkg integration). The string should begin with <code>%extensionPath%</code> and then include a relative path from the extension folder inside <a href="https://code.visualstudio.com/docs/editor/portable" target="_blank" title="https://code.visualstudio.com/docs/editor/portable">the "portable data" folder</a> to the Lean executable you want to use. E.g. I think <code>%extensionPath%/../../../lean</code> will point to <code>lean</code> in the same directory as the Visual Studio Code executable.</li>
</ul>
<p>I only did some minimal testing, so I'm not sure if you need to use forward slashes or back slashes on Windows.</p>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> If you think this would be valuable for the main extension I can add some more documentation and PR this.</p>

<a name="184412616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184412616" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184412616">Gabriel Ebner (Dec 29 2019 at 09:01)</a>:</h4>
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> The <code>%</code> variable interpolation syntax looks very much like 90s Windows. <span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span>  But lexical syntax aside, please submit a PR!</p>

<a name="184413718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beer%20reward/near/184413718" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97796Beerreward.html#184413718">Patrick Massot (Dec 29 2019 at 09:40)</a>:</h4>
<p>Thank you very much Bryan! I'll try that.</p>


{% endraw %}

{% include archive_update.html %}