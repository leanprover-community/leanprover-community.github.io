---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/95622proofbyinductiononZ.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html">proof by induction on Z</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="151232278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232278" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232278">Johan Commelin (Dec 09 2018 at 19:01)</a>:</h4>
<p>Why is a thing like this not possible?</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group_power</span>

<span class="kn">theorem</span> <span class="n">map_gsmul</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span><span class="o">}</span> <span class="o">[</span><span class="n">add_group</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">add_group</span> <span class="n">B</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">[</span><span class="n">is_add_group_hom</span> <span class="n">f</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span>
<span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">gsmul</span> <span class="n">n</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="n">gsmul</span> <span class="n">n</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">gsmul_of_nat</span><span class="o">,</span> <span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">zero</span> <span class="n">f</span><span class="o">]</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">gsmul_of_nat</span><span class="o">,</span> <span class="n">succ_smul</span><span class="o">,</span> <span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">add</span> <span class="n">f</span><span class="o">]</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">map_gsmul</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="n">n</span><span class="o">)</span>
<span class="bp">|</span> <span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span><span class="n">n</span><span class="o">]</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">gsmul_neg</span><span class="o">,</span> <span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">neg</span> <span class="n">f</span><span class="o">],</span>
  <span class="n">exact</span> <span class="n">map_gsmul</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span>
<span class="kn">end</span>
</pre></div>

<a name="151232459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232459" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232459">Chris Hughes (Dec 09 2018 at 19:05)</a>:</h4>
<p>That's a funny well founded relation.</p>

<a name="151232508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232508" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232508">Johan Commelin (Dec 09 2018 at 19:06)</a>:</h4>
<p>I wouldn't say it's funny. I think it's very natural.</p>

<a name="151232522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232522" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232522">Johan Commelin (Dec 09 2018 at 19:06)</a>:</h4>
<p>I'm just nesting the inductive property of <code>int</code> and <code>nat</code>.</p>

<a name="151232523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232523" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232523">Chris Hughes (Dec 09 2018 at 19:06)</a>:</h4>
<p>But you haven't told lean what it is. I would just prove <code>map_smul</code> first for naturals</p>

<a name="151232531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232531" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232531">Mario Carneiro (Dec 09 2018 at 19:07)</a>:</h4>
<p>I think you need to be more explicit about the well founded relation</p>

<a name="151232532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232532" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232532">Mario Carneiro (Dec 09 2018 at 19:07)</a>:</h4>
<p>or use lemmas like chris says</p>

<a name="151232534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232534" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232534">Chris Hughes (Dec 09 2018 at 19:07)</a>:</h4>
<p>You could do <code>using_well_founded</code> but proving <code>map_smul</code> first is more sensible</p>

<a name="151232535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232535" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232535">Johan Commelin (Dec 09 2018 at 19:07)</a>:</h4>
<p>But why can't I just nest inductive properties?</p>

<a name="151232537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232537" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232537">Mario Carneiro (Dec 09 2018 at 19:07)</a>:</h4>
<p>because that's not what you did</p>

<a name="151232579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232579" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232579">Johan Commelin (Dec 09 2018 at 19:08)</a>:</h4>
<p>Hmm, so what did I do?</p>

<a name="151232580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232580" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232580">Mario Carneiro (Dec 09 2018 at 19:08)</a>:</h4>
<p>you call <code>(n+1)</code> case from <code>-[1+n]</code> case</p>

<a name="151232584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232584" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232584">Mario Carneiro (Dec 09 2018 at 19:08)</a>:</h4>
<p>that's not structurally well founded</p>

<a name="151232587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232587" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232587">Johan Commelin (Dec 09 2018 at 19:08)</a>:</h4>
<p>Sure, but <code>n+1</code> is an <code>of_nat</code>, and I had proven those already.</p>

<a name="151232588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232588">Mario Carneiro (Dec 09 2018 at 19:08)</a>:</h4>
<p>that's called a lemma</p>

<a name="151232591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232591" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232591">Johan Commelin (Dec 09 2018 at 19:09)</a>:</h4>
<p>/me sighs...</p>

<a name="151232598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232598" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232598">Mario Carneiro (Dec 09 2018 at 19:09)</a>:</h4>
<p>when you write it all in one big induction lean has no choice but to assume everything depends on everything else</p>

<a name="151232655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232655" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232655">Johan Commelin (Dec 09 2018 at 19:10)</a>:</h4>
<p>But don't you think this is a typical strategy for proving things about Z? Does this deserve special support?</p>

<a name="151232663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232663" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232663">Johan Commelin (Dec 09 2018 at 19:11)</a>:</h4>
<p>Or should I prove <code>map_smul</code> for add_monoid homs? (Btw, I think there is no instance from <code>add_group_hom</code>s to <code>add_monoid_hom</code>s).</p>

<a name="151232711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151232711" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151232711">Kenny Lau (Dec 09 2018 at 19:12)</a>:</h4>
<blockquote>
<p>But don't you think this is a typical strategy for proving things about Z? Does this deserve special support?</p>
</blockquote>
<p>I think the typical strategy is to use <code>int.induction_on</code></p>

<a name="151233000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151233000" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151233000">Chris Hughes (Dec 09 2018 at 19:21)</a>:</h4>
<p>Here's a horrible proof using <code>using_well_founded</code></p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">map_gsmul</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span><span class="o">}</span> <span class="o">[</span><span class="n">add_group</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">add_group</span> <span class="n">B</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">[</span><span class="n">is_add_group_hom</span> <span class="n">f</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span>
<span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">),</span> <span class="n">f</span> <span class="o">(</span><span class="n">gsmul</span> <span class="n">n</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="n">gsmul</span> <span class="n">n</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">gsmul_of_nat</span><span class="o">,</span> <span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">zero</span> <span class="n">f</span><span class="o">]</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">:=</span>
  <span class="k">have</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">with_top</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="k">from</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">coe_lt_coe</span><span class="bp">.</span><span class="mi">2</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">lt_succ_self</span> <span class="bp">_</span><span class="o">),</span>
  <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">gsmul_of_nat</span><span class="o">,</span> <span class="n">succ_smul</span><span class="o">,</span> <span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">add</span> <span class="n">f</span><span class="o">]</span><span class="bp">;</span>
  <span class="n">exact</span> <span class="n">map_gsmul</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="n">n</span><span class="o">)</span>
<span class="bp">|</span> <span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span><span class="n">n</span><span class="o">]</span> <span class="o">:=</span>
<span class="k">have</span> <span class="o">((</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">with_top</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="err">⊤</span><span class="o">,</span> <span class="k">from</span> <span class="n">dec_trivial</span><span class="o">,</span>
<span class="k">begin</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">gsmul_neg</span><span class="o">,</span> <span class="n">is_add_group_hom</span><span class="bp">.</span><span class="n">neg</span> <span class="n">f</span><span class="o">],</span>
  <span class="n">exact</span> <span class="n">map_gsmul</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span>
<span class="kn">end</span>
<span class="n">using_well_founded</span>
  <span class="o">{</span><span class="n">rel_tac</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span> <span class="bp">`</span><span class="o">[</span><span class="n">exact</span> <span class="bp">⟨_</span><span class="o">,</span> <span class="bp">@</span><span class="n">inv_image</span><span class="bp">.</span><span class="n">wf</span> <span class="bp">ℤ</span> <span class="o">(</span><span class="n">with_top</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">_</span>
    <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">i</span> <span class="n">coe</span> <span class="o">(</span><span class="bp">λ</span> <span class="bp">_</span><span class="o">,</span> <span class="err">⊤</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="n">with_top</span> <span class="bp">ℕ</span><span class="o">)</span>
      <span class="o">(</span><span class="n">with_top</span><span class="bp">.</span><span class="n">well_founded_lt</span> <span class="n">nat</span><span class="bp">.</span><span class="n">lt_wf</span><span class="o">)</span><span class="bp">⟩</span><span class="o">],</span>
  <span class="n">dec_tac</span> <span class="o">:=</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">assumption</span> <span class="o">}</span>
</pre></div>

<a name="151233113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/proof%20by%20induction%20on%20Z/near/151233113" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/95622proofbyinductiononZ.html#151233113">Johan Commelin (Dec 09 2018 at 19:24)</a>:</h4>
<p>I understand why you suggest the other strategy...</p>


{% endraw %}
