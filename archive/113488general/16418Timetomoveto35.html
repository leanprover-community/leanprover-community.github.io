---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/16418Timetomoveto35.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html">Time to move to 3.5?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="179097843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179097843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179097843">Scott Morrison (Oct 25 2019 at 23:34)</a>:</h4>
<p>I'm wondering what everyone thinks about moving mathlib to 3.5? It seems we've accumulated a fair few small fixes there by now, and it would be nice to have them. (As an example, earlier today someone wanted <code>symmetry at h</code> but had to learn about <code>symmetry' at h</code>.)</p>

<a name="179097872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179097872" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179097872">Scott Morrison (Oct 25 2019 at 23:34)</a>:</h4>
<p>There's of course some hassle to move the community to a new default version. But I don't see any reason at this point that we should be fearful of switching to a "community" version; that is, it should be no more intimidating that switching from 3.4.1 to 3.4.2.</p>

<a name="179097911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179097911" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179097911">Scott Morrison (Oct 25 2019 at 23:35)</a>:</h4>
<p>I'm guessing that when it becomes time to start thinking about migration plans to Lean 4, it's also going to be useful to have some flexibility on the Lean 3 side.</p>

<a name="179098225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179098225" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179098225">Mario Carneiro (Oct 25 2019 at 23:42)</a>:</h4>
<p>We talked about this a bit in portland. One thing we have to get right is the lean update pipeline; everyone has forgotten how to do that and unless it's really painless no one will be incentivized to do it and bad things will happen</p>

<a name="179098303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179098303" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179098303">Alex J. Best (Oct 25 2019 at 23:44)</a>:</h4>
<p>Are there any backwards incompatible changes that need to be made to mathlib in this instance, I seem to remember mathlib compiling fine with community? The only issue I had was that as olean files are linked to the lean version update-mathlib became useless. It would be good as a first step to compile oleans for community too and make update-mathlib use the ones depending on the lean version.</p>

<a name="179098312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179098312" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179098312">Mario Carneiro (Oct 25 2019 at 23:44)</a>:</h4>
<p>In the upgrade to 3.5, there should be no backward incompatibilities</p>

<a name="179098373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179098373" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179098373">Mario Carneiro (Oct 25 2019 at 23:46)</a>:</h4>
<p>but I want to restart an update schedule if we start moving ahead with 3.5, and we can't be backward compatible forever (indeed, a lot of the things we want to change are blocked precisely because of backward compatibility)</p>

<a name="179100448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179100448" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179100448">Bryan Gin-ge Chen (Oct 26 2019 at 00:26)</a>:</h4>
<blockquote>
<p>One thing we have to get right is the lean update pipeline</p>
</blockquote>
<p>Related question: Is there any way to get <code>elan update</code> to check and update to the latest commit of 3.5? Running <code>elan toolchain install leanprover-community/lean:nightly</code> each time works well enough, but is less convenient (mainly because I can never remember the precise command).</p>

<a name="179100595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179100595" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179100595">Bryan Gin-ge Chen (Oct 26 2019 at 00:30)</a>:</h4>
<blockquote>
<p>The only issue I had was that as olean files are linked to the lean version update-mathlib became useless. It would be good as a first step to compile oleans for community too and make update-mathlib use the ones depending on the lean version.</p>
</blockquote>
<p>I think at one point Mario suggested that we remove the version / commit check for olean files from Lean 3.5.0c. It's a tiny change, I could PR it this weekend.</p>

<a name="179100831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179100831" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179100831">Alex J. Best (Oct 26 2019 at 00:36)</a>:</h4>
<p>wow yeah if that is possible  that would be great. I guess that would restrict us from every changing the olean format in community, but that seems really unlikely anyway right?</p>

<a name="179100898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179100898" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179100898">Bryan Gin-ge Chen (Oct 26 2019 at 00:38)</a>:</h4>
<p>Yep, <a href="#narrow/stream/113488-general/topic/online.20leanprover/near/169492357" title="#narrow/stream/113488-general/topic/online.20leanprover/near/169492357">here's</a> the previous discussion.</p>

<a name="179103151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179103151" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179103151">Simon Hudon (Oct 26 2019 at 01:37)</a>:</h4>
<p>I'm not too hot on the idea of removing that check. The tactics API changes in Lean 3.5.0 so the olean files for 3.5.0 refer to symbols that don't make sense in 3.4.2</p>

<a name="179103206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179103206" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179103206">Simon Hudon (Oct 26 2019 at 01:38)</a>:</h4>
<p>Also, right now, we don't have a 3.5 release. I'm thinking of getting one more feature in and making a release on November 1.</p>

<a name="179103743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179103743" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179103743">Mario Carneiro (Oct 26 2019 at 01:55)</a>:</h4>
<p>I don't want it breaking on <em>every commit</em> though</p>

<a name="179104078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179104078" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179104078">Simon Hudon (Oct 26 2019 at 02:04)</a>:</h4>
<p>How about we only break it when the lean core library changes? We could hash all the Lean files in <code>library</code> and make the version string something like <code>3.5-&lt;library-hash&gt;</code></p>

<a name="179106132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179106132" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179106132">Mario Carneiro (Oct 26 2019 at 03:08)</a>:</h4>
<p>I don't see why we need to deliberately break it at all. Let it break itself</p>

<a name="179106151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179106151" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179106151">Mario Carneiro (Oct 26 2019 at 03:09)</a>:</h4>
<p>The olean file refers to things by their names, so it's not any more brittle than a lean file would be</p>

<a name="179106308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179106308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179106308">Simon Hudon (Oct 26 2019 at 03:13)</a>:</h4>
<p>I just think it will be no fun to debug if you run into trouble</p>

<a name="179107496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179107496" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179107496">Mario Carneiro (Oct 26 2019 at 03:50)</a>:</h4>
<p>I think you will cause trouble much more frequently by doing this. Is there any chance of noting the version difference and reporting it if anything goes wrong in the import?</p>

<a name="179107627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179107627" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179107627">Simon Hudon (Oct 26 2019 at 03:55)</a>:</h4>
<p>The kind of issue that I expect is tactics and definitions crashing when running them if the api they rely on has changed. This is not something that will happen necessarily when processing imports</p>

<a name="179115618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179115618" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179115618">Kevin Buzzard (Oct 26 2019 at 08:17)</a>:</h4>
<p>Would there be a "release 3.5.0" or would you expect users to keep upgrading Lean like they upgrade mathlib?</p>

<a name="179115719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179115719" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179115719">Mario Carneiro (Oct 26 2019 at 08:20)</a>:</h4>
<p>there would be a release 3.5, but there would also be 3.5.1 and the wait would be a lot less than 3.4.2 -&gt; 3.5.0</p>

<a name="179115728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Time%20to%20move%20to%203.5%3F/near/179115728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16418Timetomoveto35.html#179115728">Scott Morrison (Oct 26 2019 at 08:20)</a>:</h4>
<p>It depends a bit on how fast 3.5 starts moving once people are actually using it. But hopefully every month or two we would bump to <code>3.5.(n+1)</code>.</p>


{% endraw %}

{% include archive_update.html %}