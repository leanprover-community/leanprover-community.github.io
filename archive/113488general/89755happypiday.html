---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/89755happypiday.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html">happy pi day!</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="160773106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160773106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160773106">Kenny Lau (Mar 14 2019 at 11:59)</a>:</h4>
<p>happy pi day!</p>

<a name="160775662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160775662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160775662">Kevin Buzzard (Mar 14 2019 at 12:41)</a>:</h4>
<p><a href="https://www.bbc.co.uk/news/technology-47524760" target="_blank" title="https://www.bbc.co.uk/news/technology-47524760">https://www.bbc.co.uk/news/technology-47524760</a></p>

<a name="160776633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160776633" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160776633">Kevin Buzzard (Mar 14 2019 at 12:54)</a>:</h4>
<p>But did they formally verify it? And if not, should we believe the calculations? They should be reproduced using a completely different system.</p>

<a name="160779334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160779334" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160779334">Moses Schönfinkel (Mar 14 2019 at 13:27)</a>:</h4>
<p>They use <a href="https://en.wikipedia.org/wiki/Bellard%27s_formula" target="_blank" title="https://en.wikipedia.org/wiki/Bellard%27s_formula">https://en.wikipedia.org/wiki/Bellard%27s_formula</a> to verify digits they compute with <a href="https://en.wikipedia.org/wiki/Chudnovsky_algorithm" target="_blank" title="https://en.wikipedia.org/wiki/Chudnovsky_algorithm">https://en.wikipedia.org/wiki/Chudnovsky_algorithm</a></p>

<a name="160779596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160779596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160779596">Moses Schönfinkel (Mar 14 2019 at 13:30)</a>:</h4>
<p>Also it would appear that they are simply using Alexander Yee's pi cruncher to simply run their computation, this is its homepage: <a href="http://www.numberworld.org/y-cruncher/" target="_blank" title="http://www.numberworld.org/y-cruncher/">http://www.numberworld.org/y-cruncher/</a></p>

<a name="160779714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160779714" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160779714">Koundinya Vajjha (Mar 14 2019 at 13:32)</a>:</h4>
<blockquote>
<p>But did they formally verify it? And if not, should we believe the calculations? They should be reproduced using a completely different system.</p>
</blockquote>
<p><a href="https://arxiv.org/abs/1709.01743" target="_blank" title="https://arxiv.org/abs/1709.01743">https://arxiv.org/abs/1709.01743</a></p>

<a name="160780155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160780155" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160780155">Moses Schönfinkel (Mar 14 2019 at 13:38)</a>:</h4>
<p>There's also an extra verification algorithm they employ it seems, so you can trust it about as much as you can trust the (un-verified C++) implementation of Lean that runs on un-verified hardware.</p>

<a name="160780322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160780322" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160780322">Kenny Lau (Mar 14 2019 at 13:40)</a>:</h4>
<p>Can we prove that pi starts with 3.14? i.e. 3.14 &lt;= pi &lt; 3.15?</p>

<a name="160780354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160780354" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160780354">Kenny Lau (Mar 14 2019 at 13:40)</a>:</h4>
<p>I think a Chinese mathematician 1000 years ago used 3•2^n-gons to estimate pi up to 7 digits?</p>

<a name="160782787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160782787" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160782787">Chris Hughes (Mar 14 2019 at 14:04)</a>:</h4>
<p>The easiest way using current mathlib, is to just use some lemma I proved about approximating e^x for x le 1, as the first n terms of the power series. I think tactics to do this stuff would be good.</p>

<a name="160784579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160784579" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160784579">Kevin Buzzard (Mar 14 2019 at 14:23)</a>:</h4>
<blockquote>
<p>Can we prove that pi starts with 3.14? i.e. 3.14 &lt;= pi &lt; 3.15?</p>
</blockquote>
<p>Do we have any theorem of the form "pi is the following infinite sum" or "pi is the limit of the following sequence"?</p>

<a name="160784877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160784877" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160784877">Kevin Buzzard (Mar 14 2019 at 14:26)</a>:</h4>
<p>Maybe today is a good day to talk about pi. We know cos(pi/2)=0 so we can probably deduce any reasonable trig assertion about pi. Now the derivative of arctan is 1/(1+x^2) and...oh dear now I want to integrate term by term to deduce the power series for arctan, and then evaluate at 1 to deduce pi/4=1-1/3+1/5-1/7+..., for which one can get some reasonable approximations to pi. But we still need derivative of a power series :-/</p>

<a name="160786648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160786648" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160786648">Kenny Lau (Mar 14 2019 at 14:43)</a>:</h4>
<p>that power series is notoriously slow to converge</p>

<a name="160786790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160786790" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160786790">Kevin Buzzard (Mar 14 2019 at 14:44)</a>:</h4>
<p>I'm well aware of that. Conversely it's an alternating series so it provides us with a rigorous proof that, for example, pi&gt;1-1/3+1/5-1/7+1/9-1/11 and pi&lt;1-1/3+1/5-1/7+1/9-1/11+1/13.</p>

<a name="160786890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160786890" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160786890">Kevin Buzzard (Mar 14 2019 at 14:45)</a>:</h4>
<p>Which is more than we know currently in mathlib.</p>

<a name="160787018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787018" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787018">Kevin Buzzard (Mar 14 2019 at 14:47)</a>:</h4>
<p>The 2^n-gon trick converges much more quickly and we have the trig in place, but it relies on the fact that pi = circumference over diameter, which we can't formalise yet.</p>

<a name="160787049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787049" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787049">Kevin Buzzard (Mar 14 2019 at 14:47)</a>:</h4>
<p>Claim: pi &gt; 3. Proof: draw a regular hexagon and chop it into 6 triangles. Then draw a circle round the hexagon.</p>

<a name="160787142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787142" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787142">Kevin Buzzard (Mar 14 2019 at 14:48)</a>:</h4>
<p>Circumference of circle &gt; circumference of hexagon = 6, diameter = 2.</p>

<a name="160787175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787175" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787175">Kevin Buzzard (Mar 14 2019 at 14:48)</a>:</h4>
<p>Can we turn this idea into a mathlib proof that pi &gt; 3? If so then the polygon trick starts to kick in.</p>

<a name="160787213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787213" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787213">Abhimanyu Pallavi Sudhir (Mar 14 2019 at 14:48)</a>:</h4>
<p>You'll need pi as an integral, correct?</p>

<a name="160787266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787266" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787266">Kevin Buzzard (Mar 14 2019 at 14:49)</a>:</h4>
<p>I don't know. We've defined pi "in terms of trig", and we're "doing trig" in some vague way above -- but it looks to me like we're somehow doing a different trig.</p>

<a name="160787281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787281" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787281">Kenny Lau (Mar 14 2019 at 14:49)</a>:</h4>
<p>just define it as the limit of the 3*2^n-gons</p>

<a name="160787426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787426" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787426">Abhimanyu Pallavi Sudhir (Mar 14 2019 at 14:50)</a>:</h4>
<p>I think the easiest way to prove the circumference of that limit is pi still uses Riemann sums, though.</p>

<a name="160787429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787429" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787429">Kevin Buzzard (Mar 14 2019 at 14:50)</a>:</h4>
<p>ha ha</p>

<a name="160787439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787439" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787439">Kevin Buzzard (Mar 14 2019 at 14:50)</a>:</h4>
<p>there's a problem with the polygon approach</p>

<a name="160787480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787480" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787480">Kevin Buzzard (Mar 14 2019 at 14:51)</a>:</h4>
<p>you end up defining 2pi as the limit, as n tends to infinity, of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>sin</mi><mo>(</mo><mn>2</mn><mi>π</mi><mi mathvariant="normal">/</mi><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">n\sin(2\pi/n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">n</span><span class="mop">sin</span><span class="mopen">(</span><span class="mord mathrm">2</span><span class="mord mathit" style="margin-right:0.03588em;">π</span><span class="mord mathrm">/</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span></p>

<a name="160787579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787579" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787579">Kevin Buzzard (Mar 14 2019 at 14:52)</a>:</h4>
<p>(that's using n-gons; using 2^n-gons just change n to 2^n)</p>

<a name="160787639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787639" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787639">Kevin Buzzard (Mar 14 2019 at 14:52)</a>:</h4>
<p>OTOH if one could prove that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>sin</mi><mo>(</mo><mn>2</mn><mi>π</mi><mi mathvariant="normal">/</mi><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">n\sin(2\pi/n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit">n</span><span class="mop">sin</span><span class="mopen">(</span><span class="mord mathrm">2</span><span class="mord mathit" style="margin-right:0.03588em;">π</span><span class="mord mathrm">/</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span> was increasing</p>

<a name="160787662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787662">Kevin Buzzard (Mar 14 2019 at 14:53)</a>:</h4>
<p>and that the derivative of sin was cos</p>

<a name="160787683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787683" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787683">Kevin Buzzard (Mar 14 2019 at 14:53)</a>:</h4>
<p>then setting n=6 you get pi&gt;3</p>

<a name="160787715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787715" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787715">Reid Barton (Mar 14 2019 at 14:53)</a>:</h4>
<p>For lower bounds, I guess you just need to prove <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>sin</mi><mi>x</mi><mo>&lt;</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">\sin x &lt; x</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.66786em;"></span><span class="strut bottom" style="height:0.70696em;vertical-align:-0.0391em;"></span><span class="base"><span class="mop">sin</span><span class="mord mathit">x</span><span class="mrel">&lt;</span><span class="mord mathit">x</span></span></span></span> for <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">x &gt; 0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="base"><span class="mord mathit">x</span><span class="mrel">&gt;</span><span class="mord mathrm">0</span></span></span></span> which seems feasible</p>

<a name="160787727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787727" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787727">Kevin Buzzard (Mar 14 2019 at 14:54)</a>:</h4>
<p>aah so this is the point; we can compute sin(2 pi / (3*2^m)) as a solution to a quadratic</p>

<a name="160787813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787813">Kevin Buzzard (Mar 14 2019 at 14:54)</a>:</h4>
<blockquote>
<p>For lower bounds, I guess you just need to prove $\sin x &lt; x$ for $x &gt; 0$ which seems feasible</p>
</blockquote>
<p>yeah, just draw the graph :P</p>

<a name="160787837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787837" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787837">Kevin Buzzard (Mar 14 2019 at 14:54)</a>:</h4>
<p>that crazy quote bug again</p>

<a name="160787879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787879" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787879">Kevin Buzzard (Mar 14 2019 at 14:55)</a>:</h4>
<p>sin(x)&lt;x should be easy by that alternating series thing</p>

<a name="160787915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160787915" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160787915">Kevin Buzzard (Mar 14 2019 at 14:55)</a>:</h4>
<p>Maybe Chris even proved sin(x)&gt;x-x^3/3 which might even have been used to prove the current known bounds for pi, which are something like 2&lt;pi&lt;4</p>

<a name="160788006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160788006" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160788006">Kevin Buzzard (Mar 14 2019 at 14:56)</a>:</h4>
<p>good to see that google are on 33 trillion digits and we're still working on the 0th one :-)</p>

<a name="160788044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160788044" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160788044">Kevin Buzzard (Mar 14 2019 at 14:56)</a>:</h4>
<p>the thing is, when we get it, we'll have a <em>proof</em></p>

<a name="160788198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160788198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160788198">Kevin Buzzard (Mar 14 2019 at 14:56)</a>:</h4>
<p>not just some blather about cloud computing</p>

<a name="160788245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160788245" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160788245">Kevin Buzzard (Mar 14 2019 at 14:57)</a>:</h4>
<p>It's Xena tonight, maybe we should have a pi day celebration and try to prove pi &gt; 3</p>

<a name="160788766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160788766" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160788766">Kenny Lau (Mar 14 2019 at 15:01)</a>:</h4>
<p>firstly how do you define pi</p>

<a name="160788837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160788837" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160788837">Kevin Buzzard (Mar 14 2019 at 15:02)</a>:</h4>
<p>it's in mathlib</p>

<a name="160788855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160788855" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160788855">Kevin Buzzard (Mar 14 2019 at 15:02)</a>:</h4>
<p>so it is defined by official decree already</p>

<a name="160788872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160788872" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160788872">Kevin Buzzard (Mar 14 2019 at 15:02)</a>:</h4>
<p>I think they went for 22/7 but I can't remember</p>

<a name="160788896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160788896" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160788896">Kenny Lau (Mar 14 2019 at 15:03)</a>:</h4>
<p>it's in mathlib?</p>

<a name="160788912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160788912" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160788912">Kevin Buzzard (Mar 14 2019 at 15:03)</a>:</h4>
<p>no wait, that was something else.</p>

<a name="160788919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160788919" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160788919">Kevin Buzzard (Mar 14 2019 at 15:03)</a>:</h4>
<p>Isn't it in mathlib??</p>

<a name="160788976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160788976" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160788976">Kevin Buzzard (Mar 14 2019 at 15:04)</a>:</h4>
<p>yes it's there</p>

<a name="160789044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789044" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789044">Kevin Buzzard (Mar 14 2019 at 15:04)</a>:</h4>
<p>It's in analysis.exponential</p>

<a name="160789051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789051">Kevin Buzzard (Mar 14 2019 at 15:04)</a>:</h4>
<p><code>local notation </code>π<code> := 22 / 7</code></p>

<a name="160789065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789065" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789065">Kevin Buzzard (Mar 14 2019 at 15:04)</a>:</h4>
<p>no wait</p>

<a name="160789077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789077" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789077">Kenny Lau (Mar 14 2019 at 15:05)</a>:</h4>
<p>oh right they proved sin(pi) = 0 right</p>

<a name="160789078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789078" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789078">Kevin Buzzard (Mar 14 2019 at 15:05)</a>:</h4>
<p><code>local notation </code>π<code> := real.pi</code></p>

<a name="160789091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789091" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789091">Kenny Lau (Mar 14 2019 at 15:05)</a>:</h4>
<p>oh</p>

<a name="160789099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789099" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789099">Kenny Lau (Mar 14 2019 at 15:05)</a>:</h4>
<p>what's the definition?</p>

<a name="160789110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789110" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789110">Abhimanyu Pallavi Sudhir (Mar 14 2019 at 15:05)</a>:</h4>
<p>Two times the zero of cos x between 0 and 2. I don't see why they didn't just prove exp periodic and define it as the half-period. Maybe that's hard without knowing what pi is, but it feels more natural.</p>

<a name="160789256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789256" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789256">Kevin Buzzard (Mar 14 2019 at 15:06)</a>:</h4>
<p>I think they were pressed for time and wanted to get it out for my birthday :-)</p>

<a name="160789308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789308">Kevin Buzzard (Mar 14 2019 at 15:07)</a>:</h4>
<p>I gave a talk yesterday to 100 people at my university interested in teaching, and told them the story of how I got pi for my birthday, and it got the biggest laugh of the talk.</p>

<a name="160789349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789349" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789349">Kevin Buzzard (Mar 14 2019 at 15:07)</a>:</h4>
<p>You weren't around at that point Abhi, so you couldn't keep them in order :-)</p>

<a name="160789401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789401" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789401">Kevin Buzzard (Mar 14 2019 at 15:08)</a>:</h4>
<p><code>noncomputable def pi : ℝ := 2 * classical.some exists_cos_eq_zero</code></p>

<a name="160789468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789468" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789468">Kevin Buzzard (Mar 14 2019 at 15:08)</a>:</h4>
<p>holy crap, it could be twice any zero at all!</p>

<a name="160789481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789481" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789481">Kevin Buzzard (Mar 14 2019 at 15:08)</a>:</h4>
<p>Maybe it's not less than 4 after all!</p>

<a name="160789488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789488" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789488">Kevin Buzzard (Mar 14 2019 at 15:08)</a>:</h4>
<p>pesky axiom of choice</p>

<a name="160789651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789651" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789651">Kevin Buzzard (Mar 14 2019 at 15:10)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">exists_cos_eq_zero</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">x</span><span class="o">,</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="mi">2</span> <span class="bp">∧</span> <span class="n">cos</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
</pre></div>

<a name="160789684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789684" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789684">Kevin Buzzard (Mar 14 2019 at 15:10)</a>:</h4>
<p>Proof uses <code>cos_one_pos</code> and <code>cos_two_neg</code> and IVT</p>

<a name="160789710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789710" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789710">Kevin Buzzard (Mar 14 2019 at 15:10)</a>:</h4>
<p>so indeed currently we should be able to prove that pi is between 2 and 4</p>

<a name="160789760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789760" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789760">Kevin Buzzard (Mar 14 2019 at 15:11)</a>:</h4>
<p>but for proving it's bigger than 3 it does not suffice to prove that cos(1.5) is positive, because there might be some other zero of cos in the range (1,1.5).</p>

<a name="160789834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789834" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789834">Kevin Buzzard (Mar 14 2019 at 15:12)</a>:</h4>
<p>It would be good to know that cos was decreasing. That would follow from MVT perhaps, if we knew the derivative of cos was sin, but we might be a long way from that.</p>

<a name="160789848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160789848" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160789848">Kevin Buzzard (Mar 14 2019 at 15:12)</a>:</h4>
<p>Do we know the derivative of exp is exp yet?</p>

<a name="160790047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160790047" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160790047">Abhimanyu Pallavi Sudhir (Mar 14 2019 at 15:14)</a>:</h4>
<p>I don't. Maybe Jeremy Avigad does (if he's specialised his derivative for basic functions).</p>

<a name="160790070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160790070" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160790070">Reid Barton (Mar 14 2019 at 15:14)</a>:</h4>
<p>I think we do know cos is decreasing, or at least I saw something similar when looking through the file for <code>sin x &lt; x</code></p>

<a name="160790108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160790108" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160790108">Reid Barton (Mar 14 2019 at 15:15)</a>:</h4>
<p><code>cos_lt_cos_of_nonneg_of_le_pi_div_two</code></p>

<a name="160790127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160790127" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160790127">Reid Barton (Mar 14 2019 at 15:15)</a>:</h4>
<p>or actually <code>cos_lt_cos_of_nonneg_of_le_pi</code></p>

<a name="160790234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160790234" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160790234">Reid Barton (Mar 14 2019 at 15:16)</a>:</h4>
<p>It's proved using angle addition formulas</p>

<a name="160793854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160793854" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160793854">Floris van Doorn (Mar 14 2019 at 15:49)</a>:</h4>
<p>If we know that <code>sin x &lt; x</code> here is a proof sketch to show that <code>pi &gt; 3</code>:</p>
<p>The doubling formula <code>cos(2*x) = 2*cos^2(x) - 1</code> has been formalized, so we can compute <code>cos^2(pi/4)</code> and <code>cos^2(pi/8)</code>. Now we can also compute <code>sin^2(pi/8)</code>. This turns out to be <code>1/2 - 1/sqrt(8)</code>. Now we know that <code>pi &gt; 8sin(pi/8) = 8sqrt(1/2-1/sqrt(8)) &gt; 3</code>.</p>

<a name="160794600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160794600" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160794600">Kenny Lau (Mar 14 2019 at 15:56)</a>:</h4>
<p>nice!</p>

<a name="160794688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160794688" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160794688">Chris Hughes (Mar 14 2019 at 15:57)</a>:</h4>
<p>I can imagine this being a long annoying proof.</p>

<a name="160794709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160794709" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160794709">Reid Barton (Mar 14 2019 at 15:57)</a>:</h4>
<p><code>sin_bound</code> should be enough to prove <code>sin x &lt; x</code> as well</p>

<a name="160794817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160794817" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160794817">Floris van Doorn (Mar 14 2019 at 15:58)</a>:</h4>
<p>I'm starting now to compute <code>sin(pi/8)</code>.</p>

<a name="160795287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160795287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160795287">Kevin Buzzard (Mar 14 2019 at 16:02)</a>:</h4>
<p>Happy pi day :-)</p>

<a name="160795347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160795347" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160795347">Kevin Buzzard (Mar 14 2019 at 16:03)</a>:</h4>
<p>Chris this proof doesn't look too bad to me at all. I was manipulating 1+sqrt(5)/2 without too much trouble last week when we were doing some analysis example sheet question.</p>

<a name="160795356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160795356" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160795356">Kevin Buzzard (Mar 14 2019 at 16:03)</a>:</h4>
<p>Or is there something else you're worried about?</p>

<a name="160795365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160795365" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160795365">Floris van Doorn (Mar 14 2019 at 16:03)</a>:</h4>
<p>How do I prove <code>(2 : ℂ) ≠ 0</code>?</p>

<a name="160795368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160795368" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160795368">Kevin Buzzard (Mar 14 2019 at 16:03)</a>:</h4>
<p>These things should go in pi.lean</p>

<a name="160795374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160795374" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160795374">Kevin Buzzard (Mar 14 2019 at 16:03)</a>:</h4>
<p><code>norm_num</code> proves 2 ne 0</p>

<a name="160795389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160795389" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160795389">Kevin Buzzard (Mar 14 2019 at 16:03)</a>:</h4>
<p>or if it doesn't then take real parts</p>

<a name="160795402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160795402" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160795402">Kevin Buzzard (Mar 14 2019 at 16:03)</a>:</h4>
<p>because it will definitely prove (2 : real) \ne 0</p>

<a name="160795413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160795413" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160795413">Chris Hughes (Mar 14 2019 at 16:03)</a>:</h4>
<p><code>two_ne_zero'</code></p>

<a name="160795417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160795417" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160795417">Kevin Buzzard (Mar 14 2019 at 16:04)</a>:</h4>
<p>rofl</p>

<a name="160795484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160795484" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160795484">Chris Hughes (Mar 14 2019 at 16:04)</a>:</h4>
<p>It needs the prime, because I think the other version is for linear ordered things.</p>

<a name="160795498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160795498" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160795498">Floris van Doorn (Mar 14 2019 at 16:04)</a>:</h4>
<p>yes, I found the other one. Thanks</p>

<a name="160795503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160795503" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160795503">Kevin Buzzard (Mar 14 2019 at 16:04)</a>:</h4>
<p>linear ordered -&gt; char 0</p>

<a name="160795550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160795550" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160795550">Chris Hughes (Mar 14 2019 at 16:05)</a>:</h4>
<p>The linear order version is in core I think.</p>

<a name="160795728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160795728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160795728">Kevin Buzzard (Mar 14 2019 at 16:07)</a>:</h4>
<p><a href="#narrow/stream/116395-maths/topic/golden.20ratio.20calculation" title="#narrow/stream/116395-maths/topic/golden.20ratio.20calculation">https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/golden.20ratio.20calculation</a></p>

<a name="160795738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160795738" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160795738">Kevin Buzzard (Mar 14 2019 at 16:07)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> there's an example of basic manipulations with sqrt(5)</p>

<a name="160811617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160811617" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160811617">Floris van Doorn (Mar 14 2019 at 19:06)</a>:</h4>
<div class="codehilite"><pre><span></span>import analysis.exponential

namespace real
variable (x : ℝ)

lemma sqrt_le_left {x y : ℝ} (hy : 0 ≤ y) : sqrt x ≤ y ↔ x ≤ y ^ 2 :=
begin
  rw [mul_self_le_mul_self_iff (sqrt_nonneg _) hy, pow_two],
  cases le_total 0 x with hx hx,
  { rw [mul_self_sqrt hx] },
  { have h1 : 0 ≤ y * y := mul_nonneg hy hy,
    have h2 : x ≤ y * y := le_trans hx h1,
    simp [sqrt_eq_zero_of_nonpos, hx, h1, h2] }
end

lemma le_sqrt {x y : ℝ} (hx : 0 ≤ x) (hy : 0 ≤ y) : x ≤ sqrt y ↔ x ^ 2 ≤ y :=
by rw [mul_self_le_mul_self_iff hx (sqrt_nonneg _), pow_two, mul_self_sqrt hy]

lemma div_lt_self {x y : ℝ} (hx : x &gt; 0) (hy : y &gt; 1) : x / y &lt; x :=
by simpa using div_lt_div&#39; (le_refl x) hy hx zero_lt_one

lemma cos_square : cos x ^ 2 = (1 + cos (2 * x)) / 2 :=
by simp [cos_two_mul, mul_div_cancel_left, two_ne_zero]

lemma sin_square : sin x ^ 2 = 1 - cos x ^ 2 :=
by { rw [←sin_pow_two_add_cos_pow_two x], simp }

lemma cos_square_pi_div_four : cos (pi / 4) ^ 2 = 1 / 2 :=
by { have : 2 * (pi / 4) = pi / 2, ring, simp [cos_square, this] }

lemma cos_pi_div_four : cos (pi / 4) = sqrt (1 / 2) :=
begin
  symmetry, rw [sqrt_eq_iff_sqr_eq, cos_square_pi_div_four], norm_num,
  apply le_of_lt, apply cos_pos_of_neg_pi_div_two_lt_of_lt_pi_div_two,
  { transitivity (0 : ℝ), rw neg_lt_zero, apply pi_div_two_pos,
    exact div_pos pi_pos (by norm_num) },
  apply div_lt_div&#39; (le_refl pi) _ pi_pos _,
  norm_num, norm_num
end

/- why is division_ring.inv_inj in the file &quot;field&quot;?-/
lemma cos_square_pi_div_eight : cos (pi / 8) ^ 2 = 1 / 2 + sqrt (1 / 8) :=
begin
  have h1 : 2 * (pi / 8) = pi / 4, ring,
  have h2 : sqrt 4 = 2, rw [sqrt_eq_iff_sqr_eq]; norm_num,
  have h3 : 2 * sqrt 2 ≠ 0, norm_num,
  have h4 : sqrt 8 ≠ 0, norm_num,
  simp [cos_square, h1, cos_pi_div_four],
  rw [←div_add_div_same], simp [div_eq_mul_inv, (mul_inv&#39; _ _).symm, division_ring.inv_inj, h3, h4],
  transitivity sqrt 4 * sqrt 2, rw [h2],
  rw [←sqrt_mul]; norm_num
end

lemma cos_pi_div_eight : cos (pi / 8) = sqrt (1 / 2 + sqrt (1 / 8)) :=
begin
  symmetry, rw [sqrt_eq_iff_sqr_eq, cos_square_pi_div_eight],
  apply add_nonneg, norm_num, apply sqrt_nonneg,
  apply le_of_lt, apply cos_pos_of_neg_pi_div_two_lt_of_lt_pi_div_two,
  { transitivity (0 : ℝ), rw neg_lt_zero, apply pi_div_two_pos,
    exact div_pos pi_pos (by norm_num) },
  apply div_lt_div&#39; (le_refl pi) _ pi_pos _,
  norm_num, norm_num
end

lemma sin_square_pi_div_eight : sin (pi / 8) ^ 2 = 1 / 2 - sqrt (1 / 8) :=
by { simp [sin_square, cos_square_pi_div_eight], rw [←add_assoc], congr&#39; 1, norm_num }

lemma sin_pi_div_eight : sin (pi / 8) = sqrt (1 / 2 - sqrt (1 / 8)) :=
begin
  symmetry, rw [sqrt_eq_iff_sqr_eq, sin_square_pi_div_eight],
  { rw [sub_nonneg, sqrt_le_left], norm_num, norm_num },
  apply le_of_lt, apply sin_pos_of_pos_of_lt_pi,
  { exact div_pos pi_pos (by norm_num) },
  exact div_lt_self pi_pos (by norm_num)
end

lemma sin_lt {x : ℝ} (h : 0 &lt; x) : sin x &lt; x :=
begin
  cases le_or_gt x 1 with h&#39; h&#39;,
  { have hx : abs x = x := abs_of_nonneg (le_of_lt h),
    have : abs x ≤ 1, rwa [hx],
    have := sin_bound this, rw [abs_le] at this,
    have := this.2, rw [sub_le_iff_le_add&#39;, hx] at this,
    apply lt_of_le_of_lt this, rw [sub_add], apply lt_of_lt_of_le _ (le_of_eq (sub_zero x)),
    apply sub_lt_sub_left, rw sub_pos, apply mul_lt_mul&#39;,
    { rw [pow_succ x 3], refine le_trans _ (le_of_eq (one_mul _)),
      rw mul_le_mul_right, exact h&#39;, apply pow_pos h },
    norm_num, norm_num, apply pow_pos h },
  exact lt_of_le_of_lt (sin_le_one x) h&#39;
end

lemma pt_gt_three : pi &gt; 3 :=
begin
  have : pi &gt; sin (pi / 8) * 8,
  { apply mul_lt_of_lt_div, norm_num, apply sin_lt, apply div_pos pi_pos, norm_num },
  apply lt_of_le_of_lt _ this, rw [sin_pi_div_eight],
  apply le_mul_of_div_le, norm_num,
  rw [le_sqrt, le_sub_iff_add_le, ←le_sub_iff_add_le&#39;, sqrt_le_left],
  norm_num, norm_num, norm_num,
  rw [sub_nonneg, sqrt_le_left], norm_num, norm_num
end

end real
</pre></div>

<a name="160811887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160811887" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160811887">Kevin Buzzard (Mar 14 2019 at 19:08)</a>:</h4>
<p>This doesn't compile for me</p>

<a name="160811892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160811892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160811892">Kevin Buzzard (Mar 14 2019 at 19:08)</a>:</h4>
<div class="codehilite"><pre><span></span>solve1 tactic failed, focused goal has not been solved
state:
⊢ pi / 8 ≤ 1
</pre></div>

<a name="160811899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160811899" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160811899">Kevin Buzzard (Mar 14 2019 at 19:08)</a>:</h4>
<p>We need pi &lt;= 8</p>

<a name="160811969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160811969" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160811969">Kevin Buzzard (Mar 14 2019 at 19:09)</a>:</h4>
<div class="codehilite"><pre><span></span>lemma pt_gt_three : pi &gt; 3 :=
begin
  have : pi &gt; sin (pi / 8) * 8,
  { apply mul_lt_of_lt_div, norm_num, apply sin_lt, apply div_pos pi_pos, norm_num,
  -- ⊢ pi / 8 ≤ 1
    sorry
  },
  apply lt_of_le_of_lt _ this, rw [sin_pi_div_eight],
  apply le_mul_of_div_le, norm_num,
  rw [le_sqrt, le_sub_iff_add_le, ←le_sub_iff_add_le&#39;, sqrt_le_left],
  norm_num, norm_num, norm_num,
  rw [sub_nonneg, sqrt_le_left], norm_num, norm_num
end
</pre></div>

<a name="160811971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160811971" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160811971">Floris van Doorn (Mar 14 2019 at 19:09)</a>:</h4>
<p>oops, I missed that. One minute</p>

<a name="160812122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160812122" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160812122">Floris van Doorn (Mar 14 2019 at 19:11)</a>:</h4>
<p>I updated the previous post, it should compile now.</p>

<a name="160812143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160812143" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160812143">Reid Barton (Mar 14 2019 at 19:11)</a>:</h4>
<p>You can also prove <code>sin x &lt; x</code> for all <code>x &gt; 0</code> by handling the case <code>x &gt; 1</code> by <code>sin x &lt;= 1 &lt; x</code></p>

<a name="160812469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160812469" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160812469">Floris van Doorn (Mar 14 2019 at 19:14)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> That is indeed the nicer solution. I was planning to do that, but I was a bit too eager to post it here and forgot :)</p>

<a name="160812540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160812540" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160812540">Floris van Doorn (Mar 14 2019 at 19:15)</a>:</h4>
<p>I updated the code once more.</p>

<a name="160813974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160813974" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160813974">Kevin Buzzard (Mar 14 2019 at 19:29)</a>:</h4>
<p>This should all go in <code>pi.lean</code>, right?</p>

<a name="160814047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160814047" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160814047">Kevin Buzzard (Mar 14 2019 at 19:30)</a>:</h4>
<p>So now we can prove that floor(pi) = 3</p>

<a name="160814068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160814068" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160814068">Kevin Buzzard (Mar 14 2019 at 19:30)</a>:</h4>
<p>So the next question is whether we can prove digit 10 pi 0 = 1</p>

<a name="160814132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160814132" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160814132">Kevin Buzzard (Mar 14 2019 at 19:31)</a>:</h4>
<p>ie floor(pi*10)%10=1</p>

<a name="160814182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160814182" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160814182">Johan Commelin (Mar 14 2019 at 19:31)</a>:</h4>
<blockquote>
<p>This should all go in <code>pi.lean</code>, right?</p>
</blockquote>
<p>Isn't that about pi types <span aria-label="rolling on the floor laughing" class="emoji emoji-1f923" role="img" title="rolling on the floor laughing">:rolling_on_the_floor_laughing:</span> <span aria-label="cake" class="emoji emoji-1f370" role="img" title="cake">:cake:</span></p>

<a name="160814815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160814815" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160814815">Floris van Doorn (Mar 14 2019 at 19:37)</a>:</h4>
<p>Computing <code>sin(pi/16)</code> we can conclude that <code>pi &gt; 3.1</code>, computing <code>sin(pi/64)</code> we can conclude that <code>pi&gt;3.14</code>. Using the other side of <code>sin_bound</code> we can probably also get upper bounds.</p>

<a name="160815604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160815604" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160815604">Kevin Buzzard (Mar 14 2019 at 19:45)</a>:</h4>
<p>Can you get to 32 trillion by the end of pi day?</p>

<a name="160816007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160816007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160816007">Floris van Doorn (Mar 14 2019 at 19:49)</a>:</h4>
<p>probably not</p>

<a name="160833013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160833013" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160833013">Floris van Doorn (Mar 14 2019 at 23:35)</a>:</h4>
<p>Is there a better way than <code>norm_num</code> to prove the following?</p>
<div class="codehilite"><pre><span></span>(2 : ℝ) ≤ ((((2 - (157 / 50 / 2 ^ (4 + 1)) ^ 2) ^ 2 - 2) ^ 2 - 2) ^ 2 - 2) ^ 2
</pre></div>


<p>(the RHS is approx <code>2.00033</code>). <code>norm_num</code> is struggling on this one, and gets a deterministic timeout.</p>

<a name="160833558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160833558" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160833558">Floris van Doorn (Mar 14 2019 at 23:45)</a>:</h4>
<p>If I can prove inequalities like that, I can approximate <code>pi</code> for a few decimal places, at least from below (I need to still work on approximation from above). The approximation I have of <code>pi</code> is of the form</p>
<div class="codehilite"><pre><span></span>π ≈ 2 ^ 7 * sqrt (2 - sqrt (2 + sqrt (2 + sqrt (2 + sqrt (2 + sqrt (2 + sqrt 2))))))
</pre></div>


<p>This seems to converge at an okay rate: the number of correct digits seems to be linear in the number of square roots.</p>
<p>In particular, I formalized</p>
<div class="codehilite"><pre><span></span>lemma pt_gt_314 : (2 : ℝ) ≤ ((((2 - (157 / 50 / 2 ^ (4 + 1)) ^ 2) ^ 2 - 2) ^ 2 - 2) ^ 2 - 2) ^ 2 → pi &gt; 3.14
</pre></div>

<a name="160834224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160834224" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160834224">Kevin Buzzard (Mar 14 2019 at 23:57)</a>:</h4>
<p>I can reduce your time-out goal to <code>⊢ 0 &lt; 3402823669209384634633746074317682114560000000000000000000000000000000000000000000000000000000000000000</code></p>

<a name="160834227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160834227" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160834227">Kevin Buzzard (Mar 14 2019 at 23:57)</a>:</h4>
<p>It's not even close</p>

<a name="160834277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160834277" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160834277">Kevin Buzzard (Mar 14 2019 at 23:58)</a>:</h4>
<p>but I'm struggling with the last bit.</p>

<a name="160834279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160834279" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160834279">Kevin Buzzard (Mar 14 2019 at 23:58)</a>:</h4>
<p>oh -- these are reals</p>

<a name="160834318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160834318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160834318">Kevin Buzzard (Mar 14 2019 at 23:59)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nc">data.real.basic</span><span class="w"></span>

<span class="n">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">ℝ</span><span class="p">)</span><span class="w"> </span><span class="err">≤</span><span class="w"> </span><span class="p">((((</span><span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="mi">157</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="p">(</span><span class="mi">4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">:=</span><span class="w"></span>
<span class="n">begin</span><span class="w"></span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="p">(</span><span class="n">show</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">rfl</span><span class="p">),</span><span class="w"></span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="p">(</span><span class="n">show</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">ℝ</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">norm_num</span><span class="p">),</span><span class="w"></span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="p">(</span><span class="n">show</span><span class="w"> </span><span class="p">(</span><span class="mi">157</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">ℝ</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">157</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1600</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">norm_num</span><span class="p">),</span><span class="w"></span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="p">(</span><span class="n">show</span><span class="w"> </span><span class="p">((</span><span class="mi">157</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">ℝ</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1600</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">24649</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2560000</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">norm_num</span><span class="p">),</span><span class="w"></span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="p">(</span><span class="n">show</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">ℝ</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">24649</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2560000</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5095351</span><span class="o">/</span><span class="mi">2560000</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">norm_num</span><span class="p">),</span><span class="w"></span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="p">(</span><span class="n">show</span><span class="w"> </span><span class="p">((</span><span class="mi">5095351</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">ℝ</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="mi">2560000</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">25962601813201</span><span class="o">/</span><span class="mi">6553600000000</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">norm_num</span><span class="p">),</span><span class="w"></span>
<span class="w">  </span><span class="o">--</span><span class="w"> </span><span class="k">let</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">try</span><span class="w"> </span><span class="n">skipping</span><span class="w"> </span><span class="n">steps</span><span class="w"></span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="p">(</span><span class="n">show</span><span class="w"> </span><span class="p">((((</span><span class="mi">25962601813201</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">ℝ</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">6553600000000</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="mi">6806775565993596917798714352237438749189222725565123913061124308255143227446400872965401873904861225601</span><span class="o">/</span><span class="mi">3402823669209384634633746074317682114560000000000000000000000000000000000000000000000000000000000000000</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">by</span><span class="w"> </span><span class="n">norm_num</span><span class="p">),</span><span class="w"></span>
<span class="w">  </span><span class="o">--</span><span class="w"> </span><span class="n">worked</span><span class="o">!</span><span class="w"></span>
<span class="w">  </span><span class="o">--</span><span class="w"> </span><span class="err">⊢</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">≤</span><span class="w"></span>
<span class="w">  </span><span class="o">--</span><span class="w">  </span><span class="mi">6806775565993596917798714352237438749189222725565123913061124308255143227446400872965401873904861225601</span><span class="w"> </span><span class="o">/</span><span class="w"></span>
<span class="w">  </span><span class="o">--</span><span class="w">    </span><span class="mi">3402823669209384634633746074317682114560000000000000000000000000000000000000000000000000000000000000000</span><span class="w"></span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="n">le_div_iff</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">norm_num</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="o">--</span><span class="w"> </span><span class="err">⊢</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3402823669209384634633746074317682114560000000000000000000000000000000000000000000000000000000000000000</span><span class="w"></span>
<span class="w">  </span><span class="n">sorry</span><span class="w"></span>
<span class="n">end</span><span class="w"></span>
</pre></div>

<a name="160834677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160834677" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160834677">Chris Hughes (Mar 15 2019 at 00:05)</a>:</h4>
<p><code>norm_num</code> just works for that last goal for me.</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">((((</span><span class="mi">2</span> <span class="bp">-</span> <span class="o">(</span><span class="mi">157</span> <span class="bp">/</span> <span class="mi">50</span> <span class="bp">/</span> <span class="mi">2</span> <span class="err">^</span> <span class="o">(</span><span class="mi">4</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="err">^</span> <span class="mi">2</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">2</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">2</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">2</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="mi">4</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">5</span><span class="o">,</span> <span class="k">from</span> <span class="n">rfl</span><span class="o">),</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="err">^</span> <span class="mi">5</span> <span class="bp">=</span> <span class="mi">32</span><span class="o">,</span> <span class="k">by</span> <span class="n">norm_num</span><span class="o">),</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="o">(</span><span class="mi">157</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">50</span> <span class="bp">/</span> <span class="mi">32</span> <span class="bp">=</span> <span class="mi">157</span> <span class="bp">/</span> <span class="mi">1600</span><span class="o">,</span> <span class="k">by</span> <span class="n">norm_num</span><span class="o">),</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="o">((</span><span class="mi">157</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">1600</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">24649</span> <span class="bp">/</span> <span class="mi">2560000</span><span class="o">,</span> <span class="k">by</span> <span class="n">norm_num</span><span class="o">),</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">-</span> <span class="mi">24649</span> <span class="bp">/</span> <span class="mi">2560000</span> <span class="bp">=</span> <span class="mi">5095351</span><span class="bp">/</span><span class="mi">2560000</span><span class="o">,</span> <span class="k">by</span> <span class="n">norm_num</span><span class="o">),</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="o">((</span><span class="mi">5095351</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">/</span><span class="mi">2560000</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">25962601813201</span><span class="bp">/</span><span class="mi">6553600000000</span><span class="o">,</span> <span class="k">by</span> <span class="n">norm_num</span><span class="o">),</span>
  <span class="c1">-- let&#39;s try skipping steps</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="o">((((</span><span class="mi">25962601813201</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">6553600000000</span> <span class="bp">-</span> <span class="mi">2</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">2</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">2</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span>
    <span class="mi">6806775565993596917798714352237438749189222725565123913061124308255143227446400872965401873904861225601</span><span class="bp">/</span><span class="mi">3402823669209384634633746074317682114560000000000000000000000000000000000000000000000000000000000000000</span><span class="o">,</span>
    <span class="k">by</span> <span class="n">norm_num</span><span class="o">),</span>
  <span class="c1">-- worked!</span>
  <span class="c1">-- ⊢ 2 ≤</span>
  <span class="c1">--  6806775565993596917798714352237438749189222725565123913061124308255143227446400872965401873904861225601 /</span>
  <span class="c1">--    3402823669209384634633746074317682114560000000000000000000000000000000000000000000000000000000000000000</span>
  <span class="n">rw</span> <span class="n">le_div_iff</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">norm_num</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">norm_num</span> <span class="o">}</span>
  <span class="c1">-- ⊢ 0 &lt; 3402823669209384634633746074317682114560000000000000000000000000000000000000000000000000000000000000000</span>

<span class="kn">end</span>
</pre></div>

<a name="160834847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160834847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160834847">Kevin Buzzard (Mar 15 2019 at 00:08)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>

<span class="c1">--set_option pp.all true</span>
<span class="kn">example</span> <span class="o">:</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">((((</span><span class="mi">2</span> <span class="bp">-</span> <span class="o">(</span><span class="mi">157</span> <span class="bp">/</span> <span class="mi">50</span> <span class="bp">/</span> <span class="mi">2</span> <span class="err">^</span> <span class="o">(</span><span class="mi">4</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="err">^</span> <span class="mi">2</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">2</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">2</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">2</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="mi">4</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">5</span><span class="o">,</span> <span class="k">from</span> <span class="n">rfl</span><span class="o">),</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="err">^</span> <span class="mi">5</span> <span class="bp">=</span> <span class="mi">32</span><span class="o">,</span> <span class="k">by</span> <span class="n">norm_num</span><span class="o">),</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="o">(</span><span class="mi">157</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">50</span> <span class="bp">/</span> <span class="mi">32</span> <span class="bp">=</span> <span class="mi">157</span> <span class="bp">/</span> <span class="mi">1600</span><span class="o">,</span> <span class="k">by</span> <span class="n">norm_num</span><span class="o">),</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="o">((</span><span class="mi">157</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">1600</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">24649</span> <span class="bp">/</span> <span class="mi">2560000</span><span class="o">,</span> <span class="k">by</span> <span class="n">norm_num</span><span class="o">),</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">-</span> <span class="mi">24649</span> <span class="bp">/</span> <span class="mi">2560000</span> <span class="bp">=</span> <span class="mi">5095351</span><span class="bp">/</span><span class="mi">2560000</span><span class="o">,</span> <span class="k">by</span> <span class="n">norm_num</span><span class="o">),</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="o">((</span><span class="mi">5095351</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">/</span><span class="mi">2560000</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">25962601813201</span><span class="bp">/</span><span class="mi">6553600000000</span><span class="o">,</span> <span class="k">by</span> <span class="n">norm_num</span><span class="o">),</span>
  <span class="c1">-- let&#39;s try skipping steps</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="o">((((</span><span class="mi">25962601813201</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">6553600000000</span> <span class="bp">-</span> <span class="mi">2</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">2</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">2</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span>
    <span class="mi">6806775565993596917798714352237438749189222725565123913061124308255143227446400872965401873904861225601</span><span class="bp">/</span><span class="mi">3402823669209384634633746074317682114560000000000000000000000000000000000000000000000000000000000000000</span><span class="o">,</span>
    <span class="k">by</span> <span class="n">norm_num</span><span class="o">),</span>
  <span class="c1">-- worked!</span>
  <span class="c1">-- ⊢ 2 ≤</span>
  <span class="c1">--  6806775565993596917798714352237438749189222725565123913061124308255143227446400872965401873904861225601 /</span>
  <span class="c1">--    3402823669209384634633746074317682114560000000000000000000000000000000000000000000000000000000000000000</span>
  <span class="n">rw</span> <span class="n">le_div_iff</span><span class="o">,</span>
    <span class="n">norm_num</span><span class="o">,</span>
  <span class="c1">-- ⊢ 0 &lt; 3402823669209384634633746074317682114560000000000000000000000000000000000000000000000000000000000000000</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="o">(</span><span class="mi">3402823669209384634633746074317682114560000000000000000000000000000000000000000000000000000000000000000</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
           <span class="bp">=</span> <span class="mi">40</span> <span class="err">^</span> <span class="mi">64</span><span class="o">,</span> <span class="k">by</span> <span class="n">norm_num</span><span class="o">),</span>
  <span class="n">apply</span> <span class="n">pow_pos</span><span class="o">,</span>
  <span class="n">norm_num</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>This worked for me.</p>

<a name="160834852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160834852" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160834852">Kevin Buzzard (Mar 15 2019 at 00:08)</a>:</h4>
<p>Oh, I think that I upset Lean with some overflow and then failed to restart, and had problems.</p>

<a name="160835429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160835429" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160835429">Kevin Buzzard (Mar 15 2019 at 00:20)</a>:</h4>
<p>Only 31999999999998 digits to go and we have the record!</p>

<a name="160835991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160835991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160835991">Kenny Lau (Mar 15 2019 at 00:31)</a>:</h4>
<p>oh boy</p>

<a name="160839840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160839840" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160839840">Floris van Doorn (Mar 15 2019 at 01:49)</a>:</h4>
<p>I have proven</p>
<div class="codehilite"><pre><span></span>lemma pi_gt_314 : pi &gt; 3.14
lemma pi_lt_315 : pi &lt; 3.15
</pre></div>


<p>assuming the following 12 inequalities:</p>
<div class="codehilite"><pre><span></span>⊢ 2 ≤ ((((2 - (157 / 50 / 2 ^ (4 + 1)) ^ 2) ^ 2 - 2) ^ 2 - 2) ^ 2 - 2) ^ 2
⊢ 0 ≤ (((2 - (157 / 50 / 2 ^ (4 + 1)) ^ 2) ^ 2 - 2) ^ 2 - 2) ^ 2 - 2
⊢ 0 ≤ ((2 - (157 / 50 / 2 ^ (4 + 1)) ^ 2) ^ 2 - 2) ^ 2 - 2
⊢ 0 ≤ (2 - (157 / 50 / 2 ^ (4 + 1)) ^ 2) ^ 2 - 2
⊢ 0 ≤ 2 - (157 / 50 / 2 ^ (4 + 1)) ^ 2
⊢ 0 &lt; 157 / 50 / 2 ^ (4 + 1)
⊢ ((((2 - ((63 / 20 - 1 / 4 ^ 4) / 2 ^ (4 + 1)) ^ 2) ^ 2 - 2) ^ 2 - 2) ^ 2 - 2) ^ 2 ≤ 2
⊢ 0 &lt; (((2 - ((63 / 20 - 1 / 4 ^ 4) / 2 ^ (4 + 1)) ^ 2) ^ 2 - 2) ^ 2 - 2) ^ 2 - 2
⊢ 0 &lt; ((2 - ((63 / 20 - 1 / 4 ^ 4) / 2 ^ (4 + 1)) ^ 2) ^ 2 - 2) ^ 2 - 2
⊢ 0 &lt; (2 - ((63 / 20 - 1 / 4 ^ 4) / 2 ^ (4 + 1)) ^ 2) ^ 2 - 2
⊢ 0 &lt; 2 - ((63 / 20 - 1 / 4 ^ 4) / 2 ^ (4 + 1)) ^ 2
⊢ 0 ≤ (63 / 20 - 1 / 4 ^ 4) / 2 ^ (4 + 1)
</pre></div>

<a name="160840047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840047" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840047">Kenny Lau (Mar 15 2019 at 01:54)</a>:</h4>
<p>I've verified all of your inequalities on WolframAlpha</p>

<a name="160840150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840150" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840150">Mario Carneiro (Mar 15 2019 at 01:56)</a>:</h4>
<p>Oh boy I've missed a lot</p>

<a name="160840168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840168" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840168">Mario Carneiro (Mar 15 2019 at 01:57)</a>:</h4>
<p>For these kinds of numeric calculations you can simplify a lot by decreasing the precision in the middle of the calculation</p>

<a name="160840177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840177" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840177">Mario Carneiro (Mar 15 2019 at 01:58)</a>:</h4>
<p>Are all the inequalities implied by one of them?</p>

<a name="160840226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840226" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840226">Kenny Lau (Mar 15 2019 at 01:58)</a>:</h4>
<p>the first one is exceptionally tight</p>

<a name="160840232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840232" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840232">Kenny Lau (Mar 15 2019 at 01:58)</a>:</h4>
<p>the 2nd to 5th looks like a more general theorem?</p>

<a name="160840236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840236" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840236">Kenny Lau (Mar 15 2019 at 01:58)</a>:</h4>
<p>wait are those approximations to sqrt(2)?</p>

<a name="160840246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840246" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840246">Kenny Lau (Mar 15 2019 at 01:59)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> I think it would be better if you tell us more about what's actually going on</p>

<a name="160840251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840251" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840251">Kenny Lau (Mar 15 2019 at 01:59)</a>:</h4>
<p>if we want approximations to sqrt(2) maybe we should turn to Pell theory</p>

<a name="160840253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840253" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840253">Mario Carneiro (Mar 15 2019 at 01:59)</a>:</h4>
<p>I think they are approximations to 2</p>

<a name="160840256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840256" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840256">Mario Carneiro (Mar 15 2019 at 01:59)</a>:</h4>
<p>fixed points of x |-&gt; x^2-2</p>

<a name="160840309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840309" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840309">Kenny Lau (Mar 15 2019 at 02:00)</a>:</h4>
<p>interesting...?</p>

<a name="160840335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840335" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840335">Mario Carneiro (Mar 15 2019 at 02:01)</a>:</h4>
<p>The first one isn't that tight: it is saying that</p>
<div class="codehilite"><pre><span></span>   1128227574827648531222203602074520069222725565123913061124308255143227446400872965401873904861225601 /
3402823669209384634633746074317682114560000000000000000000000000000000000000000000000000000000000000000
&gt;=0
</pre></div>

<a name="160840340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840340" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840340">Mario Carneiro (Mar 15 2019 at 02:01)</a>:</h4>
<p>Notice that there are like 60 digits of precision there and only 4 of them matter</p>

<a name="160840392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840392" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840392">Mario Carneiro (Mar 15 2019 at 02:02)</a>:</h4>
<p>so you can vastly simplify the calculation by precision reduction in the middle</p>

<a name="160840397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840397" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840397">Kenny Lau (Mar 15 2019 at 02:02)</a>:</h4>
<p>aha</p>

<a name="160840506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840506" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840506">Mario Carneiro (Mar 15 2019 at 02:05)</a>:</h4>
<blockquote>
<p>π ≈ 2 ^ 7 * sqrt (2 - sqrt (2 + sqrt (2 + sqrt (2 + sqrt (2 + sqrt (2 + sqrt 2))))))</p>
</blockquote>
<p>Where did this come from?</p>

<a name="160840554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840554" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840554">Floris van Doorn (Mar 15 2019 at 02:06)</a>:</h4>
<p>The file I'm working on is here: <a href="https://github.com/fpvandoorn/mathlib/blob/pi/src/data/real/pi.lean" target="_blank" title="https://github.com/fpvandoorn/mathlib/blob/pi/src/data/real/pi.lean">https://github.com/fpvandoorn/mathlib/blob/pi/src/data/real/pi.lean</a></p>

<a name="160840635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840635" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840635">Kenny Lau (Mar 15 2019 at 02:08)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm"> the series sqrt(2+sqrt(2+ ... ))-/</span>
<span class="n">noncomputable</span> <span class="n">def</span> <span class="n">sqrt_two_add_series</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span>
<span class="bp">|</span> <span class="mi">0</span>     <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sqrt</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">+</span> <span class="n">sqrt_two_add_series</span> <span class="n">n</span><span class="o">)</span>

<span class="kn">lemma</span> <span class="n">pi_gt_sqrt_two_add_series</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">pi</span> <span class="bp">&gt;</span> <span class="mi">2</span> <span class="err">^</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">sqrt</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">-</span> <span class="n">sqrt_two_add_series</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>

<span class="kn">lemma</span> <span class="n">pi_lt_sqrt_two_add_series</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">pi</span> <span class="bp">&lt;</span> <span class="mi">2</span> <span class="err">^</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">sqrt</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">-</span> <span class="n">sqrt_two_add_series</span> <span class="n">n</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">4</span> <span class="err">^</span> <span class="n">n</span> <span class="o">:=</span>

<span class="kn">lemma</span> <span class="n">pi_gt_314</span> <span class="o">:</span> <span class="n">pi</span> <span class="bp">&gt;</span> <span class="mi">3</span><span class="bp">.</span><span class="mi">14</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">refine</span> <span class="n">lt_of_le_of_lt</span> <span class="bp">_</span> <span class="o">(</span><span class="n">pi_gt_sqrt_two_add_series</span> <span class="mi">4</span><span class="o">),</span>

<span class="kn">lemma</span> <span class="n">pi_lt_315</span> <span class="o">:</span> <span class="n">pi</span> <span class="bp">&lt;</span> <span class="mi">3</span><span class="bp">.</span><span class="mi">15</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">refine</span> <span class="n">lt_of_lt_of_le</span> <span class="o">(</span><span class="n">pi_lt_sqrt_two_add_series</span> <span class="mi">4</span><span class="o">)</span> <span class="bp">_</span><span class="o">,</span>
</pre></div>

<a name="160840636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840636" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840636">Kenny Lau (Mar 15 2019 at 02:08)</a>:</h4>
<p>extract ^</p>

<a name="160840644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840644" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840644">Kenny Lau (Mar 15 2019 at 02:09)</a>:</h4>
<p>anyway <span class="user-mention" data-user-id="111080">@Floris van Doorn</span> remarkable work!</p>

<a name="160840720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840720" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840720">Mario Carneiro (Mar 15 2019 at 02:11)</a>:</h4>
<p>The initial starting point <code>sqrt_two_add_series 0</code> is arbitrary? What constraints does it require?</p>

<a name="160840779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840779" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840779">Floris van Doorn (Mar 15 2019 at 02:12)</a>:</h4>
<p>The first and 7th inequalities are relatively tight (it compares 2 with 2.0003 and 1.994). The other inequalities are not tight at all, the numbers on the right are all between 1 and 2.<br>
What's going on is that I proved that</p>
<div class="codehilite"><pre><span></span>2 ^ 5 * sqrt (2 - sqrt (2 + sqrt (2 + sqrt (2 + sqrt (2)))) &lt; π &lt; 2 ^ 5 * sqrt (2 - sqrt (2 + sqrt (2 + sqrt (2 + sqrt (2)))) + 1 / 4 ^ 4
</pre></div>


<p>Now we can check the bounds by replacing <code>π</code> by <code>3.14</code> and <code>3.15</code> and then moving all the square roots of the inequality to the other side. To do that, we need to check that stuff is positive (that gives all the non-tight inequalities), and the final inequality are the two tight ones.</p>

<a name="160840782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840782" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840782">Mario Carneiro (Mar 15 2019 at 02:12)</a>:</h4>
<p>If we let <code>sqrt_two_add_series a n</code> be the series starting at <code>a</code>, then my hope is to get an inequality chain based on <code>sqrt_two_add_series a (n+1) &lt;= sqrt_two_add_series b n</code> when a and b are suitably related rational numbers</p>

<a name="160840870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840870" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840870">Mario Carneiro (Mar 15 2019 at 02:14)</a>:</h4>
<p>is <code>sqrt_two_add_series a n</code> monotonic in <code>a</code>? I think it is</p>

<a name="160840873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840873" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840873">Floris van Doorn (Mar 15 2019 at 02:14)</a>:</h4>
<p>The defining equation of <code>sqrt_two_add_series</code> is</p>
<div class="codehilite"><pre><span></span>cos (pi / 2 ^ (n+1)) = sqrt_two_add_series n / 2
</pre></div>

<a name="160840885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840885" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840885">Mario Carneiro (Mar 15 2019 at 02:14)</a>:</h4>
<p>aha,  you inverted sin^2+cos^2 = 1</p>

<a name="160840906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840906">Floris van Doorn (Mar 15 2019 at 02:15)</a>:</h4>
<p>yes, the main equality is <code>lemma cos_square : cos x ^ 2 = 1 / 2 + cos (2 * x) / 2 </code></p>

<a name="160840958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840958" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840958">Kenny Lau (Mar 15 2019 at 02:16)</a>:</h4>
<p>how do we formalize "precision reduction"? <span class="user-mention" data-user-id="110049">@Mario Carneiro</span></p>

<a name="160840983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840983" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840983">Mario Carneiro (Mar 15 2019 at 02:17)</a>:</h4>
<p>blasty lean users aren't going to like the answer</p>

<a name="160840984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160840984" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160840984">Mario Carneiro (Mar 15 2019 at 02:17)</a>:</h4>
<p>you give intermediate small rational numbers as certificates</p>

<a name="160841028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841028" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841028">Floris van Doorn (Mar 15 2019 at 02:18)</a>:</h4>
<p>yes,  it might be nice to let <code>sqrt_two_add_series</code> start at an arbitrary number, and yes, <code>sqrt_two_add_series a n</code> is monotone in both <code>a</code> and <code>n</code>.</p>

<a name="160841054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841054" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841054">Kenny Lau (Mar 15 2019 at 02:19)</a>:</h4>
<p>fortunately I'm not a blasty lean user</p>

<a name="160841058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841058" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841058">Mario Carneiro (Mar 15 2019 at 02:19)</a>:</h4>
<p>Is it true that <code>sqrt_two_add_series a (n+1) = sqrt_two_add_series (sqrt a + 2) n</code> or something like that?</p>

<a name="160841063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841063" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841063">Mario Carneiro (Mar 15 2019 at 02:19)</a>:</h4>
<p>sorry playing catchup</p>

<a name="160841135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841135" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841135">Floris van Doorn (Mar 15 2019 at 02:21)</a>:</h4>
<p>almost: <code>sqrt_two_add_series a (n+1) = sqrt_two_add_series (sqrt (2 + a)) n</code></p>

<a name="160841151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841151" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841151">Mario Carneiro (Mar 15 2019 at 02:21)</a>:</h4>
<p>Okay, so with monotonicity we get the desired result: if <code>2+a &lt;= b^2</code> and <code>b &gt;= 0</code> then <code>sqrt_two_add_series a (n+1) &lt;= sqrt_two_add_series b n</code></p>

<a name="160841198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841198">Mario Carneiro (Mar 15 2019 at 02:22)</a>:</h4>
<p>so now you apply this lemma 5 times, and supply 5 small rational numbers that satisfy the inequalities (check in mathematica or something)</p>

<a name="160841208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841208" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841208">Mario Carneiro (Mar 15 2019 at 02:23)</a>:</h4>
<p>and those numbers are the certificate</p>

<a name="160841228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841228" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841228">Floris van Doorn (Mar 15 2019 at 02:23)</a>:</h4>
<p>that sounds good</p>

<a name="160841230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841230" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841230">Floris van Doorn (Mar 15 2019 at 02:23)</a>:</h4>
<p>(of course I hoped for a lazier solution :) )</p>

<a name="160841281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841281" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841281">Mario Carneiro (Mar 15 2019 at 02:24)</a>:</h4>
<p>Oh the lazy solution is also possible, you can just tell lean "round to n digits at each stage"</p>

<a name="160841284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841284" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841284">Mario Carneiro (Mar 15 2019 at 02:24)</a>:</h4>
<p>and pick n so it works</p>

<a name="160841300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841300" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841300">Mario Carneiro (Mar 15 2019 at 02:25)</a>:</h4>
<p>but the really really important part is don't work out all the algebra with the original number, that causes exponential blowup</p>

<a name="160841361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841361" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841361">Mario Carneiro (Mar 15 2019 at 02:26)</a>:</h4>
<p>I really like certificate proofs, they show the added power of ITP</p>

<a name="160841363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841363" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841363">Kenny Lau (Mar 15 2019 at 02:26)</a>:</h4>
<p>didn't you write a floating point library or something?</p>

<a name="160841364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841364" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841364">Mario Carneiro (Mar 15 2019 at 02:26)</a>:</h4>
<p>you can solve NP problems in polynomial time, people! That's big news</p>

<a name="160841365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841365" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841365">Kenny Lau (Mar 15 2019 at 02:26)</a>:</h4>
<p>would that be useful?</p>

<a name="160841388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841388" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841388">Mario Carneiro (Mar 15 2019 at 02:27)</a>:</h4>
<p>this is why metamath is fast and every tactic based prover is 5 orders of magnitude slower, because certificates matter</p>

<a name="160841438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841438" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841438">Kenny Lau (Mar 15 2019 at 02:28)</a>:</h4>
<p>so we still use norm_num in each stage or something like that?</p>

<a name="160841439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841439" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841439">Mario Carneiro (Mar 15 2019 at 02:28)</a>:</h4>
<p>yes</p>

<a name="160841445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841445" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841445">Kenny Lau (Mar 15 2019 at 02:28)</a>:</h4>
<p>it's definitely the wrong time for me to try, so maybe later</p>

<a name="160841446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841446" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841446">Kenny Lau (Mar 15 2019 at 02:28)</a>:</h4>
<p>it's 2:28 AM</p>

<a name="160841460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841460" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841460">Mario Carneiro (Mar 15 2019 at 02:29)</a>:</h4>
<p>I will come up with appropriate certificates in a bit, once I understand the situation right</p>

<a name="160841900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160841900" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160841900">Floris van Doorn (Mar 15 2019 at 02:40)</a>:</h4>
<p>I'm currently adding a second argument and showing the monotonicity</p>

<a name="160842360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160842360" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160842360">Floris van Doorn (Mar 15 2019 at 02:51)</a>:</h4>
<p>(updated the file on Github)</p>

<a name="160843441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160843441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160843441">Floris van Doorn (Mar 15 2019 at 03:17)</a>:</h4>
<p>are you working on the certificates <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> ? Otherwise I'll start on it now.</p>

<a name="160843488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160843488" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160843488">Mario Carneiro (Mar 15 2019 at 03:18)</a>:</h4>
<p>I have this so far, for the lower bound:</p>
<div class="codehilite"><pre><span></span>{32 a5 &gt;= 157/50, 2 - a5^2 &gt;= a4, a4^2 &gt;= 2 + a3, a3^2 &gt;= 2 + a2,  a2^2 &gt;= 2 + a1, a1^2 &gt;= 2}
</pre></div>

<a name="160843818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160843818" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160843818">Mario Carneiro (Mar 15 2019 at 03:26)</a>:</h4>
<p>Oh, I didn't expect this would work:</p>
<div class="codehilite"><pre><span></span>{a1 -&gt; 2, a2 -&gt; 2, a3 -&gt; 2, a4 -&gt; -(2687/1350), a5 -&gt; 21/214}
</pre></div>

<a name="160843835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160843835" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160843835">Mario Carneiro (Mar 15 2019 at 03:27)</a>:</h4>
<p>the last few (first few? my numbering is weird) are exactly 2, which works out nicely with the algebra. You probably want to special case that since it makes everything easy for going to higher values</p>

<a name="160843845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160843845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160843845">Floris van Doorn (Mar 15 2019 at 03:27)</a>:</h4>
<p>I'm still a bit confused what your variables <code>a1</code>-<code>a5</code> correspond to.</p>

<a name="160843894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160843894" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160843894">Mario Carneiro (Mar 15 2019 at 03:28)</a>:</h4>
<p>Here's the abstract argument:</p>
<div class="codehilite"><pre><span></span>pi &gt;= 2^5 Sqrt[2 - f[0, 4]] &gt;= 2^5 a5 &gt;= 157/50
2 - a5^2 &gt;= a4 &gt;= f[a3, 1] &gt;= f[a2, 2] &gt;= f[a1, 3] &gt;= f[0, 4]
</pre></div>

<a name="160843895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160843895" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160843895">Mario Carneiro (Mar 15 2019 at 03:28)</a>:</h4>
<p>where <code>f</code> is your series function</p>

<a name="160843969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160843969" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160843969">Mario Carneiro (Mar 15 2019 at 03:31)</a>:</h4>
<p>Note that there are no side conditions on this proof, because <code>a4^2 &gt;= 2 + a3</code> implies <code>a4 &gt;= Sqrt[2 + a3]</code> regardless of whether <code>a4</code> is positive</p>

<a name="160843973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160843973" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160843973">Mario Carneiro (Mar 15 2019 at 03:31)</a>:</h4>
<p>for the upper bound I think there will be side conditions</p>

<a name="160844182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160844182" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160844182">Floris van Doorn (Mar 15 2019 at 03:37)</a>:</h4>
<blockquote>
<p><code>a4^2 &gt;= 2 + a3</code> implies <code>a4 &gt;= Sqrt[2 + a3]</code></p>
</blockquote>
<p>uhm... no: <code>(-10) ^ 2 &gt;= 2 + 0</code> but not <code>-10 &gt;= sqrt(2 + 0)</code>.</p>

<a name="160844191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160844191" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160844191">Floris van Doorn (Mar 15 2019 at 03:37)</a>:</h4>
<p>For the upper bound there won't be side conditions, I indeed realized that a couple of minutes ago.</p>

<a name="160844547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160844547" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160844547">Mario Carneiro (Mar 15 2019 at 03:45)</a>:</h4>
<p>Oh boy, I keep getting myself confused here. You are right, each of the a's must be positive, and I messed up a sign somewhere so my cert doesn't work</p>

<a name="160844626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160844626" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160844626">Floris van Doorn (Mar 15 2019 at 03:46)</a>:</h4>
<p>The signs are pretty confusing indeed. But if you give me the certificate for the inequalities</p>
<div class="codehilite"><pre><span></span>f[a4, 0] &gt;= f[a3, 1] &gt;= f[a2, 2] &gt;= f[a1, 3] &gt;= f[0, 4]
</pre></div>


<p>then I'm ready to plug them in my Lean code now.</p>

<a name="160845319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160845319" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160845319">Mario Carneiro (Mar 15 2019 at 04:02)</a>:</h4>
<p>Okay, here are the values for the lower bound:</p>
<div class="codehilite"><pre><span></span>{a1 -&gt; 577/408, a2 -&gt; 619/335, a3 -&gt; 2144/1093, a4 -&gt; 2687/1350, a5 -&gt; 89/907}
</pre></div>

<a name="160845382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160845382" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160845382">Floris van Doorn (Mar 15 2019 at 04:04)</a>:</h4>
<p>it works!</p>

<a name="160845471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160845471" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160845471">Floris van Doorn (Mar 15 2019 at 04:07)</a>:</h4>
<div class="codehilite"><pre><span></span>lemma pi_gt_314 : pi &gt; 3.14 :=
begin
  refine lt_of_le_of_lt _ (pi_gt_sqrt_two_add_series 4),
  rw [mul_comm],
  apply le_mul_of_div_le, norm_num, apply le_sqrt_of_sqr_le,
  rw [le_sub],
  refine le_trans (sqrt_two_add_series_step_up (577/408) (by norm_num) (by norm_num)) _,
  refine le_trans (sqrt_two_add_series_step_up (619/335) (by norm_num) (by norm_num)) _,
  refine le_trans (sqrt_two_add_series_step_up (2144/1093) (by norm_num) (by norm_num)) _,
  refine le_trans (sqrt_two_add_series_step_up (2687/1350) (by norm_num) (by norm_num)) _,
  rw [sqrt_two_add_series_zero],
  norm_num
end
</pre></div>

<a name="160845882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160845882" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160845882">Floris van Doorn (Mar 15 2019 at 04:19)</a>:</h4>
<div class="codehilite"><pre><span></span>lemma pi_lt_315 : pi &lt; 3.15 :=
begin
  refine lt_of_lt_of_le (pi_lt_sqrt_two_add_series 4) _,
  apply add_le_of_le_sub_right, rw [mul_comm], apply mul_le_of_le_div, apply pow_pos, norm_num,
  rw [sqrt_le_left, sub_le], swap, norm_num,
  refine le_trans _ (sqrt_two_add_series_step_down (41/29) (by norm_num)),
  refine le_trans _ (sqrt_two_add_series_step_down (194/105) (by norm_num)),
  refine le_trans _ (sqrt_two_add_series_step_down (13513/6889) (by norm_num)),
  refine le_trans _ (sqrt_two_add_series_step_down (2271/1141) (by norm_num)),
  norm_num
end
</pre></div>

<a name="160846001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160846001" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160846001">Floris van Doorn (Mar 15 2019 at 04:22)</a>:</h4>
<p>The compiling proofs can now be found here: <a href="https://github.com/fpvandoorn/mathlib/blob/pi/src/data/real/pi.lean" target="_blank" title="https://github.com/fpvandoorn/mathlib/blob/pi/src/data/real/pi.lean">https://github.com/fpvandoorn/mathlib/blob/pi/src/data/real/pi.lean</a></p>
<p>They do each take ~5 seconds to compile. Maybe we can find smaller certificates (I found mine in a very naive way).</p>

<a name="160846008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160846008" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160846008">Mario Carneiro (Mar 15 2019 at 04:23)</a>:</h4>
<p>I do want to figure out a general mechanism for optimizing all the certificates simultaneously; right now I'm optimizing them one by one and tweaking the results</p>

<a name="160846017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160846017" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160846017">Johan Commelin (Mar 15 2019 at 04:23)</a>:</h4>
<p>Can't a tactic do that for you?</p>

<a name="160846025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160846025" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160846025">Johan Commelin (Mar 15 2019 at 04:23)</a>:</h4>
<p>This must be a well-known idea in ITP, right?</p>

<a name="160846026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160846026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160846026">Mario Carneiro (Mar 15 2019 at 04:23)</a>:</h4>
<p>yes and no; this is stuff that should not be re-run every time</p>

<a name="160846027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160846027" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160846027">Floris van Doorn (Mar 15 2019 at 04:23)</a>:</h4>
<p>Yes, I'm just using Mathematica's <code>Rationalize</code> myself, until <code>Rationalize</code> finds a rational number which is on the correct side of the number I'm approximating</p>

<a name="160846084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160846084" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160846084">Johan Commelin (Mar 15 2019 at 04:24)</a>:</h4>
<p>The tactic could trace its result</p>

<a name="160846087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160846087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160846087">Mario Carneiro (Mar 15 2019 at 04:24)</a>:</h4>
<p>me too (you can ask for a number in a range with <code>Rationalize[(a+b)/2,(a-b)/2]</code>)</p>

<a name="160846111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160846111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160846111">Floris van Doorn (Mar 15 2019 at 04:25)</a>:</h4>
<p>oh yes, good point</p>

<a name="160846160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160846160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160846160">Mario Carneiro (Mar 15 2019 at 04:26)</a>:</h4>
<p>there isn't much point doing this in lean, unless lean gets as good at numbers as a CAS</p>

<a name="160846188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160846188" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160846188">Mario Carneiro (Mar 15 2019 at 04:27)</a>:</h4>
<p>this is really the sort of thing CASs are designed for: unverified computation / symbolic manipulation</p>

<a name="160846192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160846192" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160846192">Mario Carneiro (Mar 15 2019 at 04:27)</a>:</h4>
<p>If I was to do this sort of thing a lot I would want to automate some parts of it</p>

<a name="160846462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160846462" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160846462">Johan Commelin (Mar 15 2019 at 04:34)</a>:</h4>
<p>So we need a Sage bridge...</p>

<a name="160846630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160846630" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160846630">Mario Carneiro (Mar 15 2019 at 04:38)</a>:</h4>
<p>sure, that would do it</p>

<a name="160846641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160846641" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160846641">Mario Carneiro (Mar 15 2019 at 04:39)</a>:</h4>
<p>or code extraction</p>

<a name="160846647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160846647" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160846647">Mario Carneiro (Mar 15 2019 at 04:39)</a>:</h4>
<p>in this case, it's just pure computation, although it's nice having mathematica with builtin functions like <code>Rationalize</code> so we don't have to write it on the spot</p>

<a name="160847116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160847116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160847116">Johan Commelin (Mar 15 2019 at 04:52)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Do you think <code>meta</code> code could at some point be just as fast a proper CAS? I don't see why we shouldn't strive for world domination there as well...</p>

<a name="160847119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160847119" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160847119">Mario Carneiro (Mar 15 2019 at 04:52)</a>:</h4>
<p>sure, we just need more efficiency</p>

<a name="160847125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160847125" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160847125">Johan Commelin (Mar 15 2019 at 04:52)</a>:</h4>
<p>Is there hope that <span aria-label="four leaf clover" class="emoji emoji-1f340" role="img" title="four leaf clover">:four_leaf_clover:</span> will bring this efficiency?</p>

<a name="160847127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160847127" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160847127">Mario Carneiro (Mar 15 2019 at 04:52)</a>:</h4>
<p>I've used lean plenty for this kind of thing, and it's a big bottleneck</p>

<a name="160847139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160847139" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160847139">Mario Carneiro (Mar 15 2019 at 04:53)</a>:</h4>
<p>Yes, there is hope... I'm not putting all my eggs in that basket though</p>

<a name="160847144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160847144" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160847144">Johan Commelin (Mar 15 2019 at 04:53)</a>:</h4>
<p>You haven't even put all your ITP eggs in Leans basket...</p>

<a name="160847192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160847192" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160847192">Mario Carneiro (Mar 15 2019 at 04:54)</a>:</h4>
<p>I don't believe in world dominion</p>

<a name="160847216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160847216" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160847216">Mario Carneiro (Mar 15 2019 at 04:55)</a>:</h4>
<p>it's not a healthy mindset. Better to support open communication and interaction between systems, because there will always be people that prefer another language</p>

<a name="160847260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160847260" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160847260">Johan Commelin (Mar 15 2019 at 04:56)</a>:</h4>
<p>It also means you have to support <code>n^2</code> communications...</p>

<a name="160847269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160847269" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160847269">Mario Carneiro (Mar 15 2019 at 04:57)</a>:</h4>
<p>the common answer to that is "not if it's a star graph", i.e. world domination</p>

<a name="160847272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160847272" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160847272">Mario Carneiro (Mar 15 2019 at 04:57)</a>:</h4>
<p>but other sparse graphs work too</p>

<a name="160847275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160847275" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160847275">Mario Carneiro (Mar 15 2019 at 04:57)</a>:</h4>
<p>right now it's just an almost completely disconnected graph</p>

<a name="160856308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160856308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160856308">Kevin Buzzard (Mar 15 2019 at 08:39)</a>:</h4>
<p>I swear that was the happiest pi day of my life.</p>

<a name="160856503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160856503" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160856503">Mario Carneiro (Mar 15 2019 at 08:42)</a>:</h4>
<p>this was a pretty good pi day activity</p>

<a name="160857317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160857317" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160857317">Johan Commelin (Mar 15 2019 at 08:57)</a>:</h4>
<p>It would be cool to see some end result go into mathlib. Does that make sense?</p>

<a name="160857654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160857654" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160857654">Mario Carneiro (Mar 15 2019 at 09:02)</a>:</h4>
<p>yes, I think it should certainly go in mathlib</p>

<a name="160857662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160857662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160857662">Scott Morrison (Mar 15 2019 at 09:02)</a>:</h4>
<p>Seems pretty reasonable. We can chuck out old estimates that have been superseded (both in terms of precision of the bounds and ideas), but the best available bounds sound like a useful thing.</p>

<a name="160857680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160857680" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160857680">Mario Carneiro (Mar 15 2019 at 09:03)</a>:</h4>
<p>we might want to revisit the methods later, but something is better than nothing (and this method is pretty good already)</p>

<a name="160857708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160857708" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160857708">Mario Carneiro (Mar 15 2019 at 09:03)</a>:</h4>
<p>I don't necessarily even think that we should only provide the best bounds. Tighter bounds are harder to calculate and harder to use</p>

<a name="160857774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160857774" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160857774">Mario Carneiro (Mar 15 2019 at 09:04)</a>:</h4>
<p>In fact, as I argued in this thread, the best way to prove these kinds of inequalities is by controlled relaxation of the bounds to something simpler</p>

<a name="160859125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160859125" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160859125">Kevin Buzzard (Mar 15 2019 at 09:31)</a>:</h4>
<p><a href="https://xenaproject.wordpress.com/2019/03/15/happy-pi-day/" target="_blank" title="https://xenaproject.wordpress.com/2019/03/15/happy-pi-day/">https://xenaproject.wordpress.com/2019/03/15/happy-pi-day/</a></p>

<a name="160859130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160859130" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160859130">Kevin Buzzard (Mar 15 2019 at 09:31)</a>:</h4>
<p>Comments welcome as ever.</p>

<a name="160860297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160860297" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160860297">Johan Commelin (Mar 15 2019 at 09:51)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Here is a link to the archive: <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html" target="_blank" title="https://leanprover-community.github.io/archive/113488general/89755happypiday.html">https://leanprover-community.github.io/archive/113488general/89755happypiday.html</a><br>
It doesn't require login</p>

<a name="160860404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160860404" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160860404">Kenny Lau (Mar 15 2019 at 09:53)</a>:</h4>
<p>it's hard to generate good certs...</p>

<a name="160860406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160860406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160860406">Kenny Lau (Mar 15 2019 at 09:53)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>

<span class="c1"># pi &gt; 2 ^ (n+1) * sqrt (2 - sqrt_two_add_series 0 n)</span>
<span class="c1"># pi &lt; 2 ^ (n+1) * sqrt (2 - sqrt_two_add_series 0 n) + 1 / 4 ^ n</span>
<span class="c1"># sqrt_two_add_series(x,n+1) = sqrt(2+sqrt_two_add_series(x,n))</span>
<span class="k">def</span> <span class="nf">sqrt_two_add_series</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
    <span class="k">while</span> <span class="n">n</span><span class="p">:</span> <span class="n">x</span><span class="o">=</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="o">+</span><span class="n">x</span><span class="p">);</span> <span class="n">n</span><span class="o">-=</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;n=</span><span class="si">%d</span><span class="s2">:</span><span class="se">\t</span><span class="si">%.10f</span><span class="s2"> &lt; pi &lt; </span><span class="si">%.10f</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="o">-</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">n</span><span class="p">)),</span>
        <span class="mi">2</span><span class="o">**</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="o">-</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">n</span><span class="p">))</span><span class="o">+</span><span class="mi">1</span><span class="o">/</span><span class="mi">4</span><span class="o">**</span><span class="n">n</span><span class="p">))</span>

<span class="sd">&quot;&quot;&quot;OUTPUT:</span>
<span class="sd">n=0:    2.8284271247 &lt; pi &lt; 3.8284271247</span>
<span class="sd">n=1:    3.0614674589 &lt; pi &lt; 3.3114674589</span>
<span class="sd">n=2:    3.1214451523 &lt; pi &lt; 3.1839451523</span>
<span class="sd">n=3:    3.1365484905 &lt; pi &lt; 3.1521734905</span>
<span class="sd">n=4:    3.1403311570 &lt; pi &lt; 3.1442374070</span>
<span class="sd">n=5:    3.1412772509 &lt; pi &lt; 3.1422538134</span>
<span class="sd">n=6:    3.1415138011 &lt; pi &lt; 3.1417579418</span>
<span class="sd">n=7:    3.1415729404 &lt; pi &lt; 3.1416339755</span>
<span class="sd">n=8:    3.1415877253 &lt; pi &lt; 3.1416029841</span>
<span class="sd">n=9:    3.1415914215 &lt; pi &lt; 3.1415952362</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># to prove: 3.14 &lt;=  2**5 * math.sqrt(2 - sqrt_two_add_series(0,4))</span>
<span class="c1"># to prove: 157/1600 &lt;=  math.sqrt(2 - sqrt_two_add_series(0,4))</span>
<span class="c1"># to prove: 24649/2560000 &lt;=  2 - sqrt_two_add_series(0,4)</span>
<span class="c1"># to prove: sqrt_two_add_series(0,4) &lt;= 5095351/2560000</span>
<span class="c1"># rule: 2+x&lt;=y^2 |- sqrt_two_add_series(x,n+1) &lt;= sqrt_two_add_series(y,n)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">577</span><span class="o">/</span><span class="mi">408</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">2537</span><span class="o">/</span><span class="mi">1373</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">15163</span><span class="o">/</span><span class="mi">7730</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">1447</span><span class="o">/</span><span class="mi">727</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="mi">5095351</span><span class="o">/</span><span class="mi">2560000</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;OUTPUT:</span>
<span class="sd">1.9903694533443939</span>
<span class="sd">1.9903694901455364</span>
<span class="sd">1.9903707033912401</span>
<span class="sd">1.9903713890865138</span>
<span class="sd">1.9903713892709767</span>
<span class="sd">1.990371484375</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>

<a name="160860762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160860762" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160860762">Kevin Buzzard (Mar 15 2019 at 09:58)</a>:</h4>
<p>Use continued fractions</p>

<a name="160860789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160860789" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160860789">Kevin Buzzard (Mar 15 2019 at 09:58)</a>:</h4>
<p>That is a cheap yet powerful method to approximate reals by rationals</p>

<a name="160860927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160860927" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160860927">Kenny Lau (Mar 15 2019 at 10:01)</a>:</h4>
<p>that's what I used</p>

<a name="160861076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160861076" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160861076">Kenny Lau (Mar 15 2019 at 10:03)</a>:</h4>
<p>here are some smaller certs:</p>
<div class="codehilite"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">577</span><span class="o">/</span><span class="mi">408</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">619</span><span class="o">/</span><span class="mi">335</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">2297</span><span class="o">/</span><span class="mi">1171</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">1447</span><span class="o">/</span><span class="mi">727</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="mi">5095351</span><span class="o">/</span><span class="mi">2560000</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;OUTPUT:</span>
<span class="sd">1.9903694533443939</span>
<span class="sd">1.9903694901455364</span>
<span class="sd">1.9903695896706308</span>
<span class="sd">1.9903696406887783</span>
<span class="sd">1.9903713892709767</span>
<span class="sd">1.990371484375</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>

<a name="160861425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160861425" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160861425">Kenny Lau (Mar 15 2019 at 10:08)</a>:</h4>
<p>here are even smaller certs:</p>
<div class="codehilite"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">577</span><span class="o">/</span><span class="mi">408</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">619</span><span class="o">/</span><span class="mi">335</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">1940</span><span class="o">/</span><span class="mi">989</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">1447</span><span class="o">/</span><span class="mi">727</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="mi">5095351</span><span class="o">/</span><span class="mi">2560000</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;OUTPUT:</span>
<span class="sd">1.9903694533443939</span>
<span class="sd">1.9903694901455364</span>
<span class="sd">1.9903695896706308</span>
<span class="sd">1.9903711590704518</span>
<span class="sd">1.9903713892709767</span>
<span class="sd">1.990371484375</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>

<a name="160862100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160862100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160862100">Kenny Lau (Mar 15 2019 at 10:18)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> I've made a PR to your file</p>

<a name="160863967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160863967" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160863967">Kenny Lau (Mar 15 2019 at 10:48)</a>:</h4>
<p>even smaller:</p>
<div class="codehilite"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">338</span><span class="o">/</span><span class="mi">239</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">704</span><span class="o">/</span><span class="mi">381</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">1940</span><span class="o">/</span><span class="mi">989</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">1447</span><span class="o">/</span><span class="mi">727</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="mi">2</span><span class="o">-</span><span class="p">(</span><span class="mf">3.14</span><span class="o">/</span><span class="mi">2</span><span class="o">**</span><span class="mi">5</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;OUTPUT:</span>
<span class="sd">1.9903694533443939</span>
<span class="sd">1.990369667837741</span>
<span class="sd">1.9903700913568452</span>
<span class="sd">1.9903711590704518</span>
<span class="sd">1.9903713892709767</span>
<span class="sd">1.990371484375</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>

<a name="160864945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160864945" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160864945">Kenny Lau (Mar 15 2019 at 11:05)</a>:</h4>
<p>semi-brute-forced the (locally) smallest certs:</p>
<div class="codehilite"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">99</span><span class="o">/</span><span class="mi">70</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">874</span><span class="o">/</span><span class="mi">473</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">1940</span><span class="o">/</span><span class="mi">989</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">1447</span><span class="o">/</span><span class="mi">727</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="mi">2</span><span class="o">-</span><span class="p">(</span><span class="mf">3.14</span><span class="o">/</span><span class="mi">2</span><span class="o">**</span><span class="mi">5</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;OUTPUT:</span>
<span class="sd">1.9903694533443939</span>
<span class="sd">1.9903707035225453</span>
<span class="sd">1.9903708019895043</span>
<span class="sd">1.9903711590704518</span>
<span class="sd">1.9903713892709767</span>
<span class="sd">1.990371484375</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>

<a name="160864955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160864955" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160864955">Kenny Lau (Mar 15 2019 at 11:05)</a>:</h4>
<p>fitness = sum of all the numerators and denominators</p>

<a name="160865170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160865170" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160865170">Kenny Lau (Mar 15 2019 at 11:09)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">sqrt_two_add_series</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
    <span class="k">while</span> <span class="n">n</span><span class="p">:</span> <span class="n">x</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="o">+</span><span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span><span class="p">;</span> <span class="n">n</span><span class="o">-=</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="k">def</span> <span class="nf">gcd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="k">while</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="n">b</span><span class="o">%</span><span class="n">a</span><span class="p">,</span><span class="n">a</span>
    <span class="k">return</span> <span class="n">b</span>

<span class="k">def</span> <span class="nf">approx</span><span class="p">(</span><span class="n">lo</span><span class="p">,</span><span class="n">hi</span><span class="p">,</span><span class="n">N</span><span class="p">):</span>
    <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">denom</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
        <span class="n">num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">hi</span><span class="o">*</span><span class="n">denom</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">gcd</span><span class="p">(</span><span class="n">num</span><span class="p">,</span><span class="n">denom</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">lo</span> <span class="o">&lt;=</span> <span class="n">num</span><span class="o">/</span><span class="n">denom</span><span class="p">:</span>
            <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">num</span><span class="p">,</span><span class="n">denom</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">res</span>

<span class="n">N</span><span class="o">=</span><span class="mi">5000</span>

<span class="n">res</span> <span class="o">=</span> <span class="p">[[</span><span class="n">L</span><span class="p">]</span> <span class="k">for</span> <span class="n">L</span> <span class="ow">in</span> <span class="n">approx</span><span class="p">(</span><span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="mi">2</span><span class="o">-</span><span class="p">(</span><span class="mf">3.14</span><span class="o">/</span><span class="mi">2</span><span class="o">**</span><span class="mi">5</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">N</span><span class="p">)]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">]:</span>
    <span class="n">lo</span> <span class="o">=</span> <span class="n">sqrt_two_add_series</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>
    <span class="n">new</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">L</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
        <span class="n">size</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">num</span><span class="o">+</span><span class="n">denom</span> <span class="k">for</span> <span class="n">num</span><span class="p">,</span><span class="n">denom</span> <span class="ow">in</span> <span class="n">L</span><span class="p">)</span>
        <span class="n">hi</span> <span class="o">=</span> <span class="p">(</span><span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="mi">2</span>
        <span class="k">for</span> <span class="n">num</span><span class="p">,</span><span class="n">denom</span> <span class="ow">in</span> <span class="n">approx</span><span class="p">(</span><span class="n">lo</span><span class="p">,</span><span class="n">hi</span><span class="p">,</span><span class="n">N</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">num</span><span class="o">+</span><span class="n">denom</span><span class="o">+</span><span class="n">size</span> <span class="o">&lt;</span> <span class="mi">7000</span><span class="p">:</span>
                <span class="n">new</span><span class="o">.</span><span class="n">append</span><span class="p">([(</span><span class="n">num</span><span class="p">,</span><span class="n">denom</span><span class="p">)]</span> <span class="o">+</span> <span class="n">L</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">new</span>

<span class="n">min_size</span> <span class="o">=</span> <span class="mi">7000</span>
<span class="k">for</span> <span class="n">L</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
    <span class="n">size</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">num</span><span class="o">+</span><span class="n">denom</span> <span class="k">for</span> <span class="n">num</span><span class="p">,</span><span class="n">denom</span> <span class="ow">in</span> <span class="n">L</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">size</span> <span class="o">&lt;</span> <span class="n">min_size</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">L</span><span class="p">)</span>
        <span class="n">min_size</span> <span class="o">=</span> <span class="n">size</span>
</pre></div>

<a name="160865355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160865355" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160865355">Kenny Lau (Mar 15 2019 at 11:12)</a>:</h4>
<p>however the bottleneck is actually proving:</p>
<div class="codehilite"><pre><span></span>sqrt_two_add_series (1447 / 727) 0 ≤ 2 - (157 / 50 / 2 ^ (4 + 1)) ^ 2
</pre></div>

<a name="160865362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160865362" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160865362">Kenny Lau (Mar 15 2019 at 11:12)</a>:</h4>
<p>we didn't certify the right hand side</p>

<a name="160865395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160865395" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160865395">Kevin Buzzard (Mar 15 2019 at 11:13)</a>:</h4>
<blockquote>
<p>I think a Chinese mathematician 1000 years ago used 3•2^n-gons to estimate pi up to 7 digits?</p>
</blockquote>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> do you think it's feasible to get up to 7 digits in Lean?</p>

<a name="160865410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160865410" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160865410">Kenny Lau (Mar 15 2019 at 11:13)</a>:</h4>
<p>yes</p>

<a name="160865968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160865968" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160865968">Kenny Lau (Mar 15 2019 at 11:22)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> how would you prove <code>⊢ 1447 / 727 ≤ 2 - (157 / 50 / 2 ^ (4 + 1)) ^ 2</code>?</p>

<a name="160866082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866082" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866082">Kevin Buzzard (Mar 15 2019 at 11:24)</a>:</h4>
<p>Are these rationals or reals?</p>

<a name="160866091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866091" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866091">Mario Carneiro (Mar 15 2019 at 11:24)</a>:</h4>
<p>There was a fifth cert in my version that floris omitted</p>

<a name="160866094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866094" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866094">Kevin Buzzard (Mar 15 2019 at 11:24)</a>:</h4>
<p>I mean, I guess they're reals. Would it make life easier if they were rationals?</p>

<a name="160866115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866115">Mario Carneiro (Mar 15 2019 at 11:25)</a>:</h4>
<p>you want to insert an intermediate: <code>1447 / 727 ≤ 2 - a^2</code> and <code>a &lt;= 157 / 50 / 2 ^ (4 + 1)</code></p>

<a name="160866196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866196" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866196">Mario Carneiro (Mar 15 2019 at 11:26)</a>:</h4>
<p>good work on the cert optimization tho</p>

<a name="160866203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866203" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866203">Kenny Lau (Mar 15 2019 at 11:26)</a>:</h4>
<blockquote>
<p>I mean, I guess they're reals. Would it make life easier if they were rationals?</p>
</blockquote>
<p>no, you almost never want to use the decidable instance</p>

<a name="160866209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866209" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866209">Kenny Lau (Mar 15 2019 at 11:26)</a>:</h4>
<blockquote>
<p>you want to insert an intermediate: <code>1447 / 727 ≤ 2 - a^2</code> and <code>a &lt;= 157 / 50 / 2 ^ (4 + 1)</code></p>
</blockquote>
<p>ok lemme work on it</p>

<a name="160866225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866225" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866225">Kevin Buzzard (Mar 15 2019 at 11:27)</a>:</h4>
<p>a=0 works great</p>

<a name="160866337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866337" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866337">Mario Carneiro (Mar 15 2019 at 11:29)</a>:</h4>
<p>wait what? Something must be wrong then</p>

<a name="160866390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866390" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866390">Mario Carneiro (Mar 15 2019 at 11:30)</a>:</h4>
<p>oh, <code>a &gt;= 157 / 50 / 2 ^ (4 + 1)</code></p>

<a name="160866405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866405" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866405">Mario Carneiro (Mar 15 2019 at 11:30)</a>:</h4>
<p>like I mentioned before, sign headaches are real here</p>

<a name="160866437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866437" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866437">Kevin Buzzard (Mar 15 2019 at 11:31)</a>:</h4>
<p><code>246/2507</code></p>

<a name="160866520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866520" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866520">Kevin Buzzard (Mar 15 2019 at 11:32)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span></p>

<a name="160866543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866543" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866543">Kenny Lau (Mar 15 2019 at 11:33)</a>:</h4>
<p>(157/50/2^5 = 157/1600 which works better, but actually this is not the intermediate we want)</p>

<a name="160866567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866567" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866567">Kenny Lau (Mar 15 2019 at 11:33)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">pi_gt_314</span> <span class="o">:</span> <span class="n">pi</span> <span class="bp">&gt;</span> <span class="mi">3</span><span class="bp">.</span><span class="mi">14</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">refine</span> <span class="n">lt_of_le_of_lt</span> <span class="bp">_</span> <span class="o">(</span><span class="n">pi_gt_sqrt_two_add_series</span> <span class="mi">4</span><span class="o">),</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_comm</span><span class="o">],</span>
  <span class="n">apply</span> <span class="n">le_mul_of_div_le</span><span class="o">,</span> <span class="n">norm_num</span><span class="o">,</span> <span class="n">apply</span> <span class="n">le_sqrt_of_sqr_le</span><span class="o">,</span> <span class="n">rw</span> <span class="o">[</span><span class="n">le_sub</span><span class="o">],</span>
  <span class="n">refine</span> <span class="n">le_trans</span> <span class="o">(</span><span class="n">sqrt_two_add_series_step_up</span> <span class="o">(</span><span class="mi">99</span><span class="bp">/</span><span class="mi">70</span><span class="o">)</span> <span class="o">(</span><span class="k">by</span> <span class="n">norm_num</span><span class="o">)</span> <span class="o">(</span><span class="k">by</span> <span class="n">norm_num</span><span class="o">))</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">le_trans</span> <span class="o">(</span><span class="n">sqrt_two_add_series_step_up</span> <span class="o">(</span><span class="mi">874</span><span class="bp">/</span><span class="mi">473</span><span class="o">)</span> <span class="o">(</span><span class="k">by</span> <span class="n">norm_num</span><span class="o">)</span> <span class="o">(</span><span class="k">by</span> <span class="n">norm_num</span><span class="o">))</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">le_trans</span> <span class="o">(</span><span class="n">sqrt_two_add_series_step_up</span> <span class="o">(</span><span class="mi">1940</span><span class="bp">/</span><span class="mi">989</span><span class="o">)</span> <span class="o">(</span><span class="k">by</span> <span class="n">norm_num</span><span class="o">)</span> <span class="o">(</span><span class="k">by</span> <span class="n">norm_num</span><span class="o">))</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">le_trans</span> <span class="o">(</span><span class="n">sqrt_two_add_series_step_up</span> <span class="o">(</span><span class="mi">1447</span><span class="bp">/</span><span class="mi">727</span><span class="o">)</span> <span class="o">(</span><span class="k">by</span> <span class="n">norm_num</span><span class="o">)</span> <span class="o">(</span><span class="k">by</span> <span class="n">norm_num</span><span class="o">))</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">le_trans</span> <span class="o">(</span><span class="k">by</span> <span class="n">norm_num</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1447</span> <span class="bp">/</span> <span class="mi">727</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">≤</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">141</span> <span class="bp">/</span> <span class="mi">14644</span><span class="o">)</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">sub_le_sub_iff_left</span><span class="o">,</span> <span class="n">norm_num</span>
<span class="kn">end</span>
</pre></div>

<a name="160866581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866581">Kenny Lau (Mar 15 2019 at 11:34)</a>:</h4>
<p>this is 2 seconds faster on my computer (6s vs 8s)</p>

<a name="160866662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866662">Kenny Lau (Mar 15 2019 at 11:35)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> do you see how to make this faster?</p>
<div class="codehilite"><pre><span></span>⊢ (157 / 50 / 2 ^ (4 + 1)) ^ 2 ≤ 141 / 14644
</pre></div>

<a name="160866672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866672" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866672">Mario Carneiro (Mar 15 2019 at 11:35)</a>:</h4>
<p>same trick</p>

<a name="160866676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866676" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866676">Mario Carneiro (Mar 15 2019 at 11:35)</a>:</h4>
<p>prove <code>a^2 &lt;= bla</code> and <code>bla &lt;= a</code></p>

<a name="160866768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866768" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866768">Mario Carneiro (Mar 15 2019 at 11:37)</a>:</h4>
<p>By the way, the actual optimization criterion is the number of theorem applications in the norm_num proofs, although this is crazy hard to predict</p>

<a name="160866849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866849" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866849">Kenny Lau (Mar 15 2019 at 11:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> but like <code>bla</code> would just be <code>141/14644</code></p>

<a name="160866850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866850">Kenny Lau (Mar 15 2019 at 11:39)</a>:</h4>
<p>I already optimized this</p>

<a name="160866864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866864" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866864">Mario Carneiro (Mar 15 2019 at 11:39)</a>:</h4>
<p>no, you are optimizing <code>a</code></p>

<a name="160866921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866921" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866921">Mario Carneiro (Mar 15 2019 at 11:40)</a>:</h4>
<p><code>157 / 50 / 2 ^ (4 + 1) &lt;= magic</code> and <code>magic^2 &lt;= 141/14644</code></p>

<a name="160866929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866929" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866929">Kenny Lau (Mar 15 2019 at 11:40)</a>:</h4>
<p>the magic would just be <code>157/50/2^5</code> which is <code>157/1600</code></p>

<a name="160866938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866938" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866938">Kenny Lau (Mar 15 2019 at 11:40)</a>:</h4>
<p>I already reached the limit I think</p>

<a name="160866970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866970" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866970">Kenny Lau (Mar 15 2019 at 11:41)</a>:</h4>
<p>confirmed</p>

<a name="160866977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866977" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866977">Kevin Buzzard (Mar 15 2019 at 11:41)</a>:</h4>
<p>(deleted)</p>

<a name="160866981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160866981" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160866981">Mario Carneiro (Mar 15 2019 at 11:41)</a>:</h4>
<p>yeah okay then it's just a lot of working out</p>

<a name="160867051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867051">Mario Carneiro (Mar 15 2019 at 11:42)</a>:</h4>
<p>If this is really expensive compared to the other steps, you could try making <code>141/14644</code> a bit larger and see if you can compensate with the others</p>

<a name="160867117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867117" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867117">Kevin Buzzard (Mar 15 2019 at 11:44)</a>:</h4>
<p>Is clearing denominators expensive? There's a theorem which says you can do that</p>

<a name="160867124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867124" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867124">Mario Carneiro (Mar 15 2019 at 11:44)</a>:</h4>
<p>Also I'm not sure but it might help to prepare the division cancellation steps since all of the magic numbers are fractions</p>

<a name="160867126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867126" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867126">Mario Carneiro (Mar 15 2019 at 11:44)</a>:</h4>
<p>yeah that</p>

<a name="160867131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867131" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867131">Kenny Lau (Mar 15 2019 at 11:44)</a>:</h4>
<p>what does that mean?</p>

<a name="160867163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867163" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867163">Mario Carneiro (Mar 15 2019 at 11:45)</a>:</h4>
<p>meaning your intermediate theorems, the ones that you stick the magic numbers into, have side goals that talk only about multiplication and addition of natural numbers</p>

<a name="160867247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867247" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867247">Kenny Lau (Mar 15 2019 at 11:46)</a>:</h4>
<p>what goal in particular?</p>

<a name="160867271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867271" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867271">Mario Carneiro (Mar 15 2019 at 11:47)</a>:</h4>
<p>uh, I'm not sure what the exact form of the theorems being applied are</p>

<a name="160867286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867286" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867286">Mario Carneiro (Mar 15 2019 at 11:47)</a>:</h4>
<p>but you can have the magic numbers be <code>\u a / \u b</code> instead of a real fraction</p>

<a name="160867382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867382" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867382">Kenny Lau (Mar 15 2019 at 11:49)</a>:</h4>
<p>bottlenecks:</p>
<div class="codehilite"><pre><span></span>⊢ 2 + 0 ≤ (99 / 70) ^ 2
⊢ 2 + 99 / 70 ≤ (874 / 473) ^ 2
⊢ 2 + 874 / 473 ≤ (1940 / 989) ^ 2
⊢ 2 + 1940 / 989 ≤ (1447 / 727) ^ 2
⊢ 1447 / 727 ≤ 2 - 141 / 14644
⊢ (157 / 50 / 2 ^ (4 + 1)) ^ 2 ≤ 141 / 14644
</pre></div>

<a name="160867394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867394">Mario Carneiro (Mar 15 2019 at 11:49)</a>:</h4>
<p>and then the side goals are things like <code>a^2 * d &lt;= (c + 2 d) * b^2</code> instead of <code>(a/b)^2 &lt;= c/d + 2</code></p>

<a name="160867408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867408" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867408">Kenny Lau (Mar 15 2019 at 11:49)</a>:</h4>
<p>why would this be faster?</p>

<a name="160867483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867483" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867483">Mario Carneiro (Mar 15 2019 at 11:50)</a>:</h4>
<p>Depending on how norm_num unfolds the things, it might work out larger intermediates than necessary</p>

<a name="160867496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867496" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867496">Kenny Lau (Mar 15 2019 at 11:50)</a>:</h4>
<p>hmm</p>

<a name="160867546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867546" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867546">Mario Carneiro (Mar 15 2019 at 11:51)</a>:</h4>
<p>In theory, norm_num should be doing the right thing, and so this won't actually gain much</p>

<a name="160867563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867563" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867563">Mario Carneiro (Mar 15 2019 at 11:51)</a>:</h4>
<p>You might consider looking at the proof to profile it</p>

<a name="160867617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867617" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867617">Mario Carneiro (Mar 15 2019 at 11:52)</a>:</h4>
<p>(split off the <code>norm_num</code> subproofs to lemmas)</p>

<a name="160867728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867728">Kenny Lau (Mar 15 2019 at 11:54)</a>:</h4>
<p>the bottlenecks are essentially uncertifiable right?</p>

<a name="160867740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867740">Mario Carneiro (Mar 15 2019 at 11:54)</a>:</h4>
<p>Well, at some point you actually have to prove a tight bound</p>

<a name="160867744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867744" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867744">Kevin Buzzard (Mar 15 2019 at 11:54)</a>:</h4>
<p>Kenny how do you time how long a command takes?</p>

<a name="160867782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867782" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867782">Mario Carneiro (Mar 15 2019 at 11:55)</a>:</h4>
<p>Generally speaking, the difficulty of the proof (size of the numbers) is inversely proportional to the size of the gap</p>

<a name="160867800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867800">Mario Carneiro (Mar 15 2019 at 11:55)</a>:</h4>
<p>and we have placed 5 intermediate points in the original gap</p>

<a name="160867809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867809" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867809">Mario Carneiro (Mar 15 2019 at 11:55)</a>:</h4>
<p>so if we shift the points around a bit we can equalize the load</p>

<a name="160867810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867810" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867810">Kenny Lau (Mar 15 2019 at 11:55)</a>:</h4>
<p>for <code>⊢ 2 + 99 / 70 ≤ (874 / 473) ^ 2</code>, the largest number norm_num produces in the proof is <code>361313348</code></p>

<a name="160867862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867862" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867862">Mario Carneiro (Mar 15 2019 at 11:56)</a>:</h4>
<p>that sounds about right, for those numbers</p>

<a name="160867864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867864" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867864">Kenny Lau (Mar 15 2019 at 11:56)</a>:</h4>
<div class="codehilite"><pre><span></span>(norm_num.subst_into_div (763876 / 473) 473 (874 * (874 / 473)) 473 (763876 / 223729)
                       (norm_num.div_eq_div_helper (763876 / 473) 473 763876 223729 361313348
                          (norm_num.subst_into_prod (763876 / 473) 223729 (763876 / 473) 223729 361313348
                             (norm_num.subst_into_div 763876 473 763876 473 (763876 / 473)
                                (norm_num.div_eq_div_helper 763876 473 763876 473 361313348
                                   (norm_num.subst_into_prod 763876 473 763876 473 361313348 (eq.refl 763876)
                                      (eq.refl 473)
                                      (norm_num.mul_bit1_helper 763876 236 180274736 361313348
                                         (norm_num.mul_bit0_helper 763876 118 90137368
</pre></div>

<a name="160867873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867873" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867873">Mario Carneiro (Mar 15 2019 at 11:56)</a>:</h4>
<p>it should be 874^2 * 70</p>

<a name="160867886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867886" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867886">Kenny Lau (Mar 15 2019 at 11:56)</a>:</h4>
<p>well it isn't</p>

<a name="160867887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867887" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867887">Kevin Buzzard (Mar 15 2019 at 11:56)</a>:</h4>
<p>It's something times 473</p>

<a name="160867903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867903" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867903">Kevin Buzzard (Mar 15 2019 at 11:57)</a>:</h4>
<p>it's 874^2 * 473</p>

<a name="160867908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867908" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867908">Kenny Lau (Mar 15 2019 at 11:57)</a>:</h4>
<p>wat</p>

<a name="160867912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867912" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867912">Kenny Lau (Mar 15 2019 at 11:57)</a>:</h4>
<p>how did that number get there</p>

<a name="160867978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867978" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867978">Mario Carneiro (Mar 15 2019 at 11:58)</a>:</h4>
<p>I should note this is the one part of <code>norm_num</code> I didn't write</p>

<a name="160867989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160867989" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160867989">Mario Carneiro (Mar 15 2019 at 11:58)</a>:</h4>
<p>I offload + - * / to leo's impl</p>

<a name="160868044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160868044" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160868044">Mario Carneiro (Mar 15 2019 at 11:59)</a>:</h4>
<p>but it's not like there are that many ways to write a (correct) arithmetic prover</p>

<a name="160868098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160868098" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160868098">Kenny Lau (Mar 15 2019 at 12:00)</a>:</h4>
<p>anyway I'm going now, this was fun</p>

<a name="160868118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160868118" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160868118">Mario Carneiro (Mar 15 2019 at 12:00)</a>:</h4>
<p>good work</p>

<a name="160868320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160868320" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160868320">Mario Carneiro (Mar 15 2019 at 12:04)</a>:</h4>
<p>aha:</p>
<div class="codehilite"><pre><span></span><span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">α</span><span class="o">]</span>
<span class="bp">#</span><span class="kn">check</span> <span class="bp">@</span><span class="n">norm_num</span><span class="bp">.</span><span class="n">div_eq_div_helper</span> <span class="n">α</span> <span class="bp">_</span> <span class="o">(</span><span class="mi">763876</span> <span class="bp">/</span> <span class="mi">473</span><span class="o">)</span> <span class="mi">473</span> <span class="mi">763876</span> <span class="mi">223729</span> <span class="mi">361313348</span>
<span class="c1">-- norm_num.div_eq_div_helper (763876 / 473) 473 763876 223729 361313348 :</span>
<span class="c1">--   763876 / 473 * 223729 = 361313348 →</span>
<span class="c1">--   763876 * 473 = 361313348 → 473 ≠ 0 → 223729 ≠ 0 → 763876 / 473 / 473 = 763876 / 223729</span>
</pre></div>


<p>It is cross-multiplying to prove that <code>(874 * (874 / 473)) / 473 = (763876 / 473) / 473 = 763876 / 223729</code></p>

<a name="160868346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160868346" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160868346">Mario Carneiro (Mar 15 2019 at 12:04)</a>:</h4>
<p>that's... not a good idea for simplifying divisions of divisions</p>

<a name="160868440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160868440" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160868440">Kevin Buzzard (Mar 15 2019 at 12:06)</a>:</h4>
<p>PR to core Kenny!</p>

<a name="160875018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160875018" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160875018">Floris van Doorn (Mar 15 2019 at 13:38)</a>:</h4>
<p>At the bottom of the file <a href="https://github.com/fpvandoorn/mathlib/blob/pi/src/data/real/pi.lean" target="_blank" title="https://github.com/fpvandoorn/mathlib/blob/pi/src/data/real/pi.lean">https://github.com/fpvandoorn/mathlib/blob/pi/src/data/real/pi.lean</a> I also computed <code>pi</code> up to 5 decimal digits. It does take 20-25 seconds to compile for me though.</p>

<a name="160875081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160875081" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160875081">Floris van Doorn (Mar 15 2019 at 13:39)</a>:</h4>
<p>It's definitely possible to get better approximations, but the compilation time will just be bigger for that. So I don't think we want the tightest bounds in mathlib. But soon I'll PR the first 3 digits of pi to mathlib.</p>

<a name="160878448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160878448" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160878448">Mario Carneiro (Mar 15 2019 at 14:16)</a>:</h4>
<p>what is the profiler result? Is it <code>norm_num</code> or the kernel taking up the time?</p>

<a name="160879130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160879130" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160879130">Floris van Doorn (Mar 15 2019 at 14:22)</a>:</h4>
<p>Not sure how to read the output, here it is for <code>pi_gt_31415</code>:</p>
<div class="codehilite"><pre><span></span>elaboration of pi_gt_31415 took 11.9s
</pre></div>


<div class="codehilite"><pre><span></span>elaboration: tactic execution took 8.56s
num. allocated objects:  8023
num. allocated closures: 9813
num. allocated big nums: 96
 8560ms   100.0%   tactic.step
 8560ms   100.0%   scope_trace
 8560ms   100.0%   tactic.istep
 8560ms   100.0%   _interaction._lambda_2
 8560ms   100.0%   tactic.istep._lambda_1
 5972ms    69.8%   tactic.refine
 5945ms    69.5%   tactic.to_expr
 2583ms    30.2%   interaction_monad.orelse&#39;
 2580ms    30.1%   tactic.seq
 1641ms    19.2%   interaction_monad_orelse
 1621ms    18.9%   tactic.interactive.norm_num1
 1620ms    18.9%   tactic.replace_at._lambda_4
 1620ms    18.9%   tactic.alternative._lambda_3
 1620ms    18.9%   tactic.replace_at
 1615ms    18.9%   interaction_monad.monad._lambda_9
 1614ms    18.9%   tactic.ext_simplify_core
 1614ms    18.9%   norm_num.derive
 1607ms    18.8%   tactic.repeat
 1607ms    18.8%   _private.3096317357.repeat_aux._main._lambda_1
 1607ms    18.8%   tactic.all_goals
 1607ms    18.8%   _private.3321893233.all_goals_core._main._lambda_2
 1607ms    18.8%   tactic.try_core
 1607ms    18.8%   all_goals_core
 1607ms    18.8%   repeat_aux
 1548ms    18.1%   norm_num.derive._main._lambda_3
 1364ms    15.9%   tactic.norm_num
  959ms    11.2%   tactic.interactive.simp_core
  937ms    10.9%   tactic.join_user_simp_lemmas
  937ms    10.9%   tactic.mk_simp_set_core
  937ms    10.9%   simp_lemmas.mk_default
  937ms    10.9%   tactic.mk_simp_set
[...]
</pre></div>

<a name="160879322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160879322" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160879322">Floris van Doorn (Mar 15 2019 at 14:24)</a>:</h4>
<p>So most of the tactic time is in <code>refine</code>, so building the proof term(?). But there is also 3-4 seconds of time which is not used to execute tactics. Is that just to type-check the final proof?</p>

<a name="160879891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160879891" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160879891">Mario Carneiro (Mar 15 2019 at 14:30)</a>:</h4>
<p>I think you missed out on some part... there should be a line for kernel typechecking</p>

<a name="160879927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160879927" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160879927">Mario Carneiro (Mar 15 2019 at 14:30)</a>:</h4>
<p>it's next to the <code>elaboration of foo took n s</code> line</p>

<a name="160879935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160879935" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160879935">Floris van Doorn (Mar 15 2019 at 14:30)</a>:</h4>
<p>Yeah, I thought so too. I cannot find it anywhere in my Lean messages</p>

<a name="160879964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160879964" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160879964">Mario Carneiro (Mar 15 2019 at 14:31)</a>:</h4>
<p>maybe that just means it was below the threshold</p>

<a name="160880015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160880015" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160880015">Mario Carneiro (Mar 15 2019 at 14:31)</a>:</h4>
<p>but damn that's a lot of <code>to_expr</code></p>

<a name="160880092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160880092" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160880092">Mario Carneiro (Mar 15 2019 at 14:32)</a>:</h4>
<p>and <code>istep</code> too... the tactic overhead is significant</p>

<a name="160880134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160880134" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160880134">Floris van Doorn (Mar 15 2019 at 14:32)</a>:</h4>
<p>Oh no, I know what is going on: all the <code>tactic.refine</code> are the nested <code>norm_num</code>s</p>

<a name="160880210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160880210" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160880210">Mario Carneiro (Mar 15 2019 at 14:33)</a>:</h4>
<p>The way you read this is to look for nodes that come just before a percentage drop</p>

<a name="160880221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160880221" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160880221">Floris van Doorn (Mar 15 2019 at 14:33)</a>:</h4>
<p>When we execute </p>
<div class="codehilite"><pre><span></span>refine sqrt_two_add_series_step_up (11482/8119)  (by norm_num) (by norm_num) _,
</pre></div>


<p>the inner <code>norm_num</code> reports that the inner <code>norm_num</code> takes up almost a second:</p>
<div class="codehilite"><pre><span></span>713ms    98.5%   norm_num.derive
</pre></div>


<p>but for the outer tactic block, this is all part of the <code>refine</code> tactic.</p>

<a name="160880285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160880285" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160880285">Mario Carneiro (Mar 15 2019 at 14:34)</a>:</h4>
<p><code>refine</code> is quick, it is just calling another tactic that is slow</p>

<a name="160880325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160880325" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160880325">Floris van Doorn (Mar 15 2019 at 14:34)</a>:</h4>
<p>ok, sure. But the <code>to_expr</code> just calls the nested <code>norm_num</code> tactics, right?</p>

<a name="160880377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160880377" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160880377">Mario Carneiro (Mar 15 2019 at 14:35)</a>:</h4>
<p>yes, but that should show up in the total profile</p>

<a name="160880415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160880415" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160880415">Mario Carneiro (Mar 15 2019 at 14:35)</a>:</h4>
<div class="codehilite"><pre><span></span>1614ms    18.9%   norm_num.derive
1607ms    18.8%   tactic.repeat
...
</pre></div>

<a name="160880515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160880515" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160880515">Mario Carneiro (Mar 15 2019 at 14:36)</a>:</h4>
<p>compared to <code>8560ms</code> for all the tactics, that's not as large a fraction as I would have hoped</p>

<a name="160880594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160880594" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160880594">Floris van Doorn (Mar 15 2019 at 14:37)</a>:</h4>
<blockquote>
<p>Mario Carneiro: yes, but that should show up in the total profile</p>
</blockquote>
<p>I don't think it does. The sum of the times spend in <code>norm_num.derive</code> in the <em>nested</em> <code>by norm_num</code> tactics is much larger than the reported time on <code>norm_num.derive</code> when I hover over the <code>end</code> of the tactic block</p>

<a name="160880727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160880727" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160880727">Floris van Doorn (Mar 15 2019 at 14:38)</a>:</h4>
<p>If I add everything up, about <code>5.3s</code> is spend in <code>norm_num.derive</code></p>

<a name="160880764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160880764" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160880764">Floris van Doorn (Mar 15 2019 at 14:39)</a>:</h4>
<p>A bit more actually, but between <code>5s</code> and <code>6s</code>.</p>

<a name="160881160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160881160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160881160">Mario Carneiro (Mar 15 2019 at 14:44)</a>:</h4>
<p>It's surprising how inconclusive this test is, but it looks like the outer block does in fact reflect slow downs caused by inner blocks</p>
<div class="codehilite"><pre><span></span><span class="kn">set_option</span> <span class="n">profiler</span> <span class="n">true</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">tactic</span><span class="bp">.</span><span class="n">sleep</span> <span class="mi">10000</span><span class="o">,</span>
  <span class="n">refine</span> <span class="k">begin</span>
    <span class="n">tactic</span><span class="bp">.</span><span class="n">sleep</span> <span class="mi">10000</span><span class="o">,</span>
    <span class="n">trivial</span>
  <span class="kn">end</span>
<span class="kn">end</span>
</pre></div>

<a name="160881194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160881194" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160881194">Mario Carneiro (Mar 15 2019 at 14:44)</a>:</h4>
<p>either the profiler is way off, or <code>sleep</code> is not very accurate</p>

<a name="160881375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160881375" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160881375">Mario Carneiro (Mar 15 2019 at 14:46)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">elaboration</span><span class="o">:</span> <span class="n">tactic</span> <span class="n">compilation</span> <span class="n">took</span> <span class="mi">17</span><span class="bp">.</span><span class="mi">8</span><span class="n">ms</span>
<span class="n">test</span><span class="bp">.</span><span class="n">lean</span><span class="o">:</span><span class="mi">10</span><span class="o">:</span><span class="mi">0</span><span class="o">:</span> <span class="n">information</span> <span class="n">tactic</span> <span class="n">profile</span> <span class="n">data</span>
<span class="n">elaboration</span><span class="o">:</span> <span class="n">tactic</span> <span class="n">execution</span> <span class="n">took</span> <span class="mi">14</span><span class="bp">.</span><span class="mi">4</span><span class="n">s</span>
<span class="n">num</span><span class="bp">.</span> <span class="n">allocated</span> <span class="n">objects</span><span class="o">:</span>  <span class="mi">15</span>
<span class="n">num</span><span class="bp">.</span> <span class="n">allocated</span> <span class="n">closures</span><span class="o">:</span> <span class="mi">46</span>
<span class="mi">14404</span><span class="n">ms</span>   <span class="mi">100</span><span class="bp">.</span><span class="mi">0</span><span class="err">%</span>   <span class="n">tactic</span><span class="bp">.</span><span class="n">istep</span>
<span class="mi">14404</span><span class="n">ms</span>   <span class="mi">100</span><span class="bp">.</span><span class="mi">0</span><span class="err">%</span>   <span class="bp">_</span><span class="n">interaction</span><span class="bp">._</span><span class="n">lambda_2</span>
<span class="mi">14404</span><span class="n">ms</span>   <span class="mi">100</span><span class="bp">.</span><span class="mi">0</span><span class="err">%</span>   <span class="n">scope_trace</span>
<span class="mi">14404</span><span class="n">ms</span>   <span class="mi">100</span><span class="bp">.</span><span class="mi">0</span><span class="err">%</span>   <span class="n">tactic</span><span class="bp">.</span><span class="n">istep</span><span class="bp">._</span><span class="n">lambda_1</span>
<span class="mi">14404</span><span class="n">ms</span>   <span class="mi">100</span><span class="bp">.</span><span class="mi">0</span><span class="err">%</span>   <span class="n">tactic</span><span class="bp">.</span><span class="n">step</span>
 <span class="mi">7470</span><span class="n">ms</span>    <span class="mi">51</span><span class="bp">.</span><span class="mi">9</span><span class="err">%</span>   <span class="n">tactic</span><span class="bp">.</span><span class="n">to_expr</span>
 <span class="mi">7470</span><span class="n">ms</span>    <span class="mi">51</span><span class="bp">.</span><span class="mi">9</span><span class="err">%</span>   <span class="n">tactic</span><span class="bp">.</span><span class="n">refine</span>
 <span class="mi">6934</span><span class="n">ms</span>    <span class="mi">48</span><span class="bp">.</span><span class="mi">1</span><span class="err">%</span>   <span class="n">tactic</span><span class="bp">.</span><span class="n">sleep</span>
</pre></div>

<a name="160881408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160881408" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160881408">Floris van Doorn (Mar 15 2019 at 14:46)</a>:</h4>
<p>That seems pretty conclusive to me... The bottom <code>end</code> reports 1.7s spend at <code>sleep</code> and 5.2s at <code>refine</code>, the top <code>end</code> reports <code>5.2s</code> spend at <code>sleep</code>. But yeah, those numbers are not very close to 2000 and 4000...</p>

<a name="160881470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160881470" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160881470">Floris van Doorn (Mar 15 2019 at 14:47)</a>:</h4>
<p>(for future reference: the sleep numbers in Mario's post were originally 2000 and 4000)</p>

<a name="160881474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160881474" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160881474">Mario Carneiro (Mar 15 2019 at 14:47)</a>:</h4>
<p>even when I crank the numbers up they are still not so close</p>

<a name="160881478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160881478" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160881478">Mario Carneiro (Mar 15 2019 at 14:47)</a>:</h4>
<p>I think the units must be off</p>

<a name="160881554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160881554" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160881554">Floris van Doorn (Mar 15 2019 at 14:48)</a>:</h4>
<p>yeah, there must be something off with <code>sleep</code>. But it's clear that the inner <code>sleep</code> time <em>only</em> counts towards <code>refine</code>, not towards <code>sleep</code>.</p>

<a name="160881633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160881633" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160881633">Mario Carneiro (Mar 15 2019 at 14:49)</a>:</h4>
<p>yeah. To make it even more obvious:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">tactic</span><span class="bp">.</span><span class="n">sleep</span> <span class="mi">2000</span><span class="o">,</span>
    <span class="n">trivial</span>
  <span class="kn">end</span><span class="o">,</span>
  <span class="n">refine</span> <span class="k">begin</span>
    <span class="n">tactic</span><span class="bp">.</span><span class="n">sleep</span> <span class="mi">2000</span><span class="o">,</span>
    <span class="n">trivial</span>
  <span class="kn">end</span>
<span class="kn">end</span>
</pre></div>


<div class="codehilite"><pre><span></span>elaboration: tactic execution took 2.8s
num. allocated objects:  21
num. allocated closures: 52
 2798ms   100.0%   tactic.to_expr
 2798ms   100.0%   tactic.istep
 2798ms   100.0%   _interaction._lambda_2
 2798ms   100.0%   scope_trace
 2798ms   100.0%   tactic.istep._lambda_1
 2798ms   100.0%   tactic.step
 1429ms    51.1%   tactic.interactive.have._lambda_1
 1369ms    48.9%   tactic.refine
</pre></div>

<a name="160881932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160881932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160881932">Mario Carneiro (Mar 15 2019 at 14:52)</a>:</h4>
<p>There is an easy solution to this for your situation though: don't use nested tactics, use a <code>refine</code> with more underscores and kill the subgoals with <code>norm_num</code> in the main tactic block</p>

<a name="160882613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160882613" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160882613">Floris van Doorn (Mar 15 2019 at 15:00)</a>:</h4>
<p>If I do that, we see that indeed most of the time is spend at <code>norm_num</code>:</p>
<div class="codehilite"><pre><span></span>elaboration: tactic execution took 7.48s
num. allocated objects:  29602
num. allocated closures: 30223
num. allocated big nums: 322
 7482ms   100.0%   tactic.istep._lambda_1
 7482ms   100.0%   _interaction._lambda_2
 7482ms   100.0%   tactic.istep
 7482ms   100.0%   tactic.step
 7482ms   100.0%   scope_trace
 7442ms    99.5%   interaction_monad.orelse&#39;
 7439ms    99.4%   tactic.seq
 7420ms    99.2%   interaction_monad.monad._lambda_9
 7388ms    98.7%   tactic.all_goals
 7388ms    98.7%   _private.3321893233.all_goals_core._main._lambda_2
 7388ms    98.7%   all_goals_core
 6640ms    88.7%   interaction_monad_orelse
 6619ms    88.5%   tactic.replace_at._lambda_4
 6619ms    88.5%   tactic.replace_at
 6619ms    88.5%   tactic.alternative._lambda_3
 6619ms    88.5%   tactic.interactive.norm_num1
 6563ms    87.7%   norm_num.derive
 6563ms    87.7%   tactic.ext_simplify_core
 6499ms    86.9%   norm_num.derive._main._lambda_3
 5696ms    76.1%   tactic.norm_num
 2613ms    34.9%   norm_num.eval_ineq
 2608ms    34.9%   norm_num.prove_lt
 1357ms    18.1%   _private.3096317357.repeat_aux._main._lambda_1
[...]
</pre></div>

<a name="160882828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160882828" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160882828">Floris van Doorn (Mar 15 2019 at 15:02)</a>:</h4>
<p>Interestingly, there is a drop after <code>all_goals_core</code> (I'm now accumulating all the inequalities as goals, and killing them all with <code>all_goals {norm_num}</code> at the end)</p>

<a name="160883136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160883136" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160883136">Floris van Doorn (Mar 15 2019 at 15:06)</a>:</h4>
<p>oh, in the other proof (<code>pi_lt_31416</code>) the drop-offs from <code>100%</code> to <code>90%</code> are at very different tactics. So maybe that is just noise/semi-randomness.</p>

<a name="160885072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/happy%20pi%20day%21/near/160885072" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/89755happypiday.html#160885072">Floris van Doorn (Mar 15 2019 at 15:28)</a>:</h4>
<p>Since people requested it, I also computed the first 7 digits of <code>pi</code> at the bottom of <a href="https://github.com/fpvandoorn/mathlib/blob/pi/src/data/real/pi.lean" target="_blank" title="https://github.com/fpvandoorn/mathlib/blob/pi/src/data/real/pi.lean">https://github.com/fpvandoorn/mathlib/blob/pi/src/data/real/pi.lean</a></p>


{% endraw %}

{% include archive_update.html %}