---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/43035errorinterrupted.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html">error: interrupted</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="127445373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127445373" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127445373">Reid Barton (Jun 02 2018 at 00:20)</a>:</h4>
<p>Does anyone know why this often happens when using jump-to-definition? (I'm in emacs if it matters.)</p>

<a name="127445391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127445391" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127445391">Simon Hudon (Jun 02 2018 at 00:21)</a>:</h4>
<p>I get the same error.</p>

<a name="127445442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127445442" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127445442">Simon Hudon (Jun 02 2018 at 00:22)</a>:</h4>
<p>I thought it might be a problem with <code>company-mode</code> but I wasn't able to find anything. Are you also on a Mac?</p>

<a name="127445454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127445454" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127445454">Reid Barton (Jun 02 2018 at 00:23)</a>:</h4>
<p>Linux here</p>

<a name="127445516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127445516" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127445516">Simon Hudon (Jun 02 2018 at 00:25)</a>:</h4>
<p><span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> also I think and I remember he didn't have the same error so I thought it might be because of mac. It must be something else</p>

<a name="127445523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127445523" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127445523">Simon Hudon (Jun 02 2018 at 00:25)</a>:</h4>
<p>Are you well versed in Emacs Lisp?</p>

<a name="127445624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127445624" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127445624">Reid Barton (Jun 02 2018 at 00:28)</a>:</h4>
<p>Not especially, but I would try to debug it if the issue is not already understood.</p>

<a name="127445625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127445625" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127445625">Reid Barton (Jun 02 2018 at 00:28)</a>:</h4>
<p>It's quite irritating</p>

<a name="127446322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127446322" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127446322">Simon Hudon (Jun 02 2018 at 00:51)</a>:</h4>
<p>it is indeed. I just added print statements in  <code>lean-find-definition</code> in <code>lean-mode</code> but I can't get it to fail now ... :/</p>

<a name="127446785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127446785" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127446785">Simon Hudon (Jun 02 2018 at 01:05)</a>:</h4>
<p>Do you have:</p>
<div class="codehilite"><pre><span></span>(global-set-key (kbd &quot;S-SPC&quot;) #&#39;company-complete)
</pre></div>


<p>in your init file? I found a thread on the github repo (<a href="https://github.com/company-mode/company-mode/issues/69" target="_blank" title="https://github.com/company-mode/company-mode/issues/69">https://github.com/company-mode/company-mode/issues/69</a>) that suggests replacing it with:</p>
<div class="codehilite"><pre><span></span>(define-key company-mode-map (kbd &quot;S-SPC&quot;) #&#39;company-complete)
</pre></div>


<p>It seems to help but the bug has been showing up inconsistently. Can you try it and tell me if it helps?</p>

<a name="127446911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127446911" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127446911">Reid Barton (Jun 02 2018 at 01:09)</a>:</h4>
<p>I got <code>Symbol's value as variable is void: company-mode-map</code></p>

<a name="127446917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127446917" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127446917">Reid Barton (Jun 02 2018 at 01:09)</a>:</h4>
<p>Is that the right issue?</p>

<a name="127446984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127446984" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127446984">Reid Barton (Jun 02 2018 at 01:11)</a>:</h4>
<p>okay, a <code>(require 'company)</code> fixed that</p>

<a name="127446986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127446986" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127446986">Simon Hudon (Jun 02 2018 at 01:11)</a>:</h4>
<p>That's the one that helped me. Do you have <code>(require 'company)</code> before that line?</p>

<a name="127446989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127446989" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127446989">Reid Barton (Jun 02 2018 at 01:11)</a>:</h4>
<p>Well, it's working at the moment, but it usually does after restarting emacs :)</p>

<a name="127447104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127447104" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127447104">Reid Barton (Jun 02 2018 at 01:14)</a>:</h4>
<p>Oh, it already stopped working</p>

<a name="127447116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127447116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127447116">Simon Hudon (Jun 02 2018 at 01:14)</a>:</h4>
<p>Darn! I was hoping!</p>

<a name="127447977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127447977" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127447977">Simon Hudon (Jun 02 2018 at 01:41)</a>:</h4>
<p>In <code>lean-input.el</code>, in <code>lean-find-definition</code>, can you try adding print statements inside the lambda expression? Like this:</p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="nb">defun</span> <span class="nv">lean-find-definition</span> <span class="p">()</span>
  <span class="s">&quot;Jump to definition of thing at point&quot;</span>
  <span class="p">(</span><span class="k">interactive</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">lean-get-info-record-at-point</span>
   <span class="p">(</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">info-record</span><span class="p">)</span>
     <span class="p">(</span><span class="nf">print</span> <span class="s">&quot;begin&quot;</span><span class="p">)</span>
     <span class="p">(</span><span class="nv">-if-let</span> <span class="p">(</span><span class="nv">source-record</span> <span class="p">(</span><span class="nf">plist-get</span> <span class="nv">info-record</span> <span class="nb">:source</span><span class="p">))</span>
         <span class="p">(</span><span class="nf">apply</span> <span class="nf">#&#39;</span><span class="nv">lean-find-definition-cont</span> <span class="nv">source-record</span><span class="p">)</span>
       <span class="p">(</span><span class="nv">-if-let</span> <span class="p">(</span><span class="nv">id</span> <span class="p">(</span><span class="nf">plist-get</span> <span class="nv">info-record</span> <span class="nb">:full-id</span><span class="p">))</span>
           <span class="p">(</span><span class="nf">message</span> <span class="s">&quot;no source location available for %s&quot;</span> <span class="nv">id</span><span class="p">)</span>
         <span class="p">(</span><span class="nf">message</span> <span class="s">&quot;unknown thing at point&quot;</span><span class="p">)))</span>
     <span class="p">(</span><span class="nf">print</span> <span class="s">&quot;end&quot;</span><span class="p">))))</span>
</pre></div>

<a name="127448179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127448179" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127448179">Reid Barton (Jun 02 2018 at 01:48)</a>:</h4>
<p>Well... I tried adding those and it's working again.<br>
Did editing the <code>.el</code> file cause emacs to reload the mode automatically?</p>

<a name="127448391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127448391" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127448391">Simon Hudon (Jun 02 2018 at 01:55)</a>:</h4>
<p>I don't know. I wonder if the printing introduces a delay. Let's try removing the print statements</p>

<a name="127448441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127448441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127448441">Reid Barton (Jun 02 2018 at 01:56)</a>:</h4>
<p>Unfortunately I finished proving the thing I was trying to prove</p>

<a name="127448556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127448556" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127448556">Simon Hudon (Jun 02 2018 at 02:00)</a>:</h4>
<p>I guess we'll never know</p>

<a name="127456608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127456608" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127456608">Sebastian Ullrich (Jun 02 2018 at 07:08)</a>:</h4>
<p>This is a known issue (to me :) ) where go-to-definition doesn't work while the goal display is open</p>

<a name="127462600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127462600" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127462600">Simon Hudon (Jun 02 2018 at 11:16)</a>:</h4>
<p>That's very good to know! Is this on the emacs side or on the Lean side?</p>

<a name="127510537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127510537" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127510537">Sebastian Ullrich (Jun 03 2018 at 18:09)</a>:</h4>
<p>That requests are interrupted by unrelated requests is an issue with the Lean server. But lean-mode could try to work around that by not sending a goal request directly after a find definition request.</p>

<a name="127511362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127511362" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127511362">Simon Hudon (Jun 03 2018 at 18:42)</a>:</h4>
<p>Do you think if we set a timer for masking requests for half a second after find definition that might be good enough?</p>

<a name="127511592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127511592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127511592">Sebastian Ullrich (Jun 03 2018 at 18:51)</a>:</h4>
<p>It should be sufficient to suppress the next execution of <code>lean-show-goal--handler</code> after <code>lean-find-definition</code> has run, probably?</p>

<a name="127514811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127514811" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127514811">Simon Hudon (Jun 03 2018 at 20:50)</a>:</h4>
<p>That seems to be enough. Do you want a PR for it?</p>

<a name="127514912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127514912" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127514912">Sebastian Ullrich (Jun 03 2018 at 20:54)</a>:</h4>
<p>Sure, thanks</p>

<a name="127515061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/error%3A%20interrupted/near/127515061" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43035errorinterrupted.html#127515061">Simon Hudon (Jun 03 2018 at 21:00)</a>:</h4>
<p>Done</p>


{% endraw %}

{% include archive_update.html %}