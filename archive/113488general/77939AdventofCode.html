---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/77939AdventofCode.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html">Advent of Code</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="150682850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150682850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150682850">Edward Ayers (Dec 01 2018 at 14:00)</a>:</h4>
<p><a href="http://adventofcode.com" target="_blank" title="http://adventofcode.com">adventofcode.com</a> in Lean?</p>

<a name="150683859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150683859" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150683859">Patrick Massot (Dec 01 2018 at 14:34)</a>:</h4>
<p>Does anyone know how to use Lean to read a file from disk, and get a <code>list int</code> if each line looks like an integer?</p>

<a name="150683922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150683922" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150683922">Edward Ayers (Dec 01 2018 at 14:36)</a>:</h4>
<p>I just pasted into lean file! But that's a better idea!</p>

<a name="150683931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150683931" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150683931">Patrick Massot (Dec 01 2018 at 14:37)</a>:</h4>
<p>I thought about pasting, but I guess that's not a reasonable strategy if you want to do all 50 puzzles</p>

<a name="150683932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150683932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150683932">Patrick Massot (Dec 01 2018 at 14:37)</a>:</h4>
<p>And someone needs to write a IO monad howto anyway</p>

<a name="150684498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150684498" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150684498">Edward Ayers (Dec 01 2018 at 14:56)</a>:</h4>
<p>I completed it but I used <code>meta</code>. I feel dirty.</p>

<a name="150684511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150684511" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150684511">Patrick Massot (Dec 01 2018 at 14:57)</a>:</h4>
<p>Did you use IO?</p>

<a name="150684515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150684515" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150684515">Edward Ayers (Dec 01 2018 at 14:57)</a>:</h4>
<p>nope</p>

<a name="150684561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150684561" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150684561">Patrick Massot (Dec 01 2018 at 14:58)</a>:</h4>
<p>Would you know how to read from a file?</p>

<a name="150684565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150684565" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150684565">Mario Carneiro (Dec 01 2018 at 14:58)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">system</span><span class="bp">.</span><span class="n">io</span> <span class="n">data</span><span class="bp">.</span><span class="n">buffer</span><span class="bp">.</span><span class="n">parser</span> <span class="n">data</span><span class="bp">.</span><span class="n">int</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">open</span> <span class="n">tactic</span> <span class="n">parser</span>

<span class="n">def</span> <span class="n">number</span> <span class="o">:</span> <span class="n">parser</span> <span class="bp">ℕ</span> <span class="o">:=</span>
<span class="n">string</span><span class="bp">.</span><span class="n">to_nat</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="n">many_char1</span> <span class="o">(</span><span class="n">sat</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">c</span><span class="o">,</span>
  <span class="err">&#39;</span><span class="mi">0</span><span class="err">&#39;</span><span class="bp">.</span><span class="n">to_nat</span> <span class="bp">≤</span> <span class="n">c</span><span class="bp">.</span><span class="n">to_nat</span> <span class="bp">∧</span> <span class="n">c</span><span class="bp">.</span><span class="n">to_nat</span> <span class="bp">≤</span> <span class="err">&#39;</span><span class="mi">9</span><span class="err">&#39;</span><span class="bp">.</span><span class="n">to_nat</span><span class="o">)</span>

<span class="n">def</span> <span class="n">signed_number</span> <span class="o">:</span> <span class="n">parser</span> <span class="bp">ℤ</span> <span class="o">:=</span>
<span class="n">ch</span> <span class="err">&#39;</span><span class="bp">+</span><span class="err">&#39;</span> <span class="bp">&gt;&gt;</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="n">number</span><span class="o">)</span> <span class="bp">&lt;|&gt;</span>
<span class="n">ch</span> <span class="err">&#39;</span><span class="bp">-</span><span class="err">&#39;</span> <span class="bp">&gt;&gt;</span> <span class="o">((</span><span class="bp">λ</span> <span class="n">x</span><span class="o">:</span><span class="bp">ℕ</span><span class="o">,</span> <span class="bp">-</span><span class="n">x</span><span class="o">)</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="n">number</span><span class="o">)</span>

<span class="n">run_cmd</span> <span class="n">do</span>
  <span class="n">s</span> <span class="err">←</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">unsafe_run_io</span> <span class="err">$</span> <span class="n">io</span><span class="bp">.</span><span class="n">fs</span><span class="bp">.</span><span class="n">read_file</span> <span class="s2">&quot;dat.txt&quot;</span><span class="o">,</span>
  <span class="n">sum</span><span class="bp">.</span><span class="n">inr</span> <span class="n">l</span> <span class="err">←</span> <span class="n">return</span> <span class="err">$</span> <span class="n">run</span> <span class="o">(</span><span class="n">many</span> <span class="o">(</span><span class="n">signed_number</span> <span class="bp">&lt;*</span> <span class="n">ch</span> <span class="err">&#39;\</span><span class="n">n&#39;</span><span class="o">))</span> <span class="n">s</span><span class="o">,</span>
  <span class="n">trace</span> <span class="n">l</span>
</pre></div>


<div class="codehilite"><pre><span></span>[13,
 -(2+1),
 -(7+1),
 14,
 16,
 -(6+1),
 3,
 -(6+1),
 9,
 -(9+1),
 16,
...
</pre></div>

<a name="150684582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150684582" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150684582">Mario Carneiro (Dec 01 2018 at 14:59)</a>:</h4>
<p>maybe <span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> knows the correct way to call IO from <code>run_cmd</code>, but <code>unsafe_run_io</code> works in a pinch</p>

<a name="150684636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150684636" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150684636">Sebastian Ullrich (Dec 01 2018 at 15:00)</a>:</h4>
<p>I think you can use <code>#eval</code></p>

<a name="150684702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150684702" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150684702">Mario Carneiro (Dec 01 2018 at 15:03)</a>:</h4>
<p>oh, I should have used <code>to_string</code>, the output is much nicer</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">system</span><span class="bp">.</span><span class="n">io</span> <span class="n">data</span><span class="bp">.</span><span class="n">buffer</span><span class="bp">.</span><span class="n">parser</span>
<span class="kn">open</span> <span class="n">parser</span>

<span class="n">def</span> <span class="n">number</span> <span class="o">:</span> <span class="n">parser</span> <span class="bp">ℕ</span> <span class="o">:=</span>
<span class="n">string</span><span class="bp">.</span><span class="n">to_nat</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="n">many_char1</span> <span class="o">(</span><span class="n">sat</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">c</span><span class="o">,</span>
  <span class="err">&#39;</span><span class="mi">0</span><span class="err">&#39;</span><span class="bp">.</span><span class="n">to_nat</span> <span class="bp">≤</span> <span class="n">c</span><span class="bp">.</span><span class="n">to_nat</span> <span class="bp">∧</span> <span class="n">c</span><span class="bp">.</span><span class="n">to_nat</span> <span class="bp">≤</span> <span class="err">&#39;</span><span class="mi">9</span><span class="err">&#39;</span><span class="bp">.</span><span class="n">to_nat</span><span class="o">)</span>

<span class="n">def</span> <span class="n">signed_number</span> <span class="o">:</span> <span class="n">parser</span> <span class="bp">ℤ</span> <span class="o">:=</span>
<span class="n">ch</span> <span class="err">&#39;</span><span class="bp">+</span><span class="err">&#39;</span> <span class="bp">&gt;&gt;</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="n">number</span><span class="o">)</span> <span class="bp">&lt;|&gt;</span>
<span class="n">ch</span> <span class="err">&#39;</span><span class="bp">-</span><span class="err">&#39;</span> <span class="bp">&gt;&gt;</span> <span class="o">((</span><span class="bp">λ</span> <span class="n">x</span><span class="o">:</span><span class="bp">ℕ</span><span class="o">,</span> <span class="bp">-</span><span class="n">x</span><span class="o">)</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="n">number</span><span class="o">)</span>

<span class="bp">#</span><span class="kn">eval</span> <span class="n">do</span>
  <span class="n">s</span> <span class="err">←</span> <span class="n">io</span><span class="bp">.</span><span class="n">fs</span><span class="bp">.</span><span class="n">read_file</span> <span class="s2">&quot;dat.txt&quot;</span><span class="o">,</span>
  <span class="n">sum</span><span class="bp">.</span><span class="n">inr</span> <span class="n">l</span> <span class="err">←</span> <span class="n">return</span> <span class="err">$</span> <span class="n">run</span> <span class="o">(</span><span class="n">many</span> <span class="o">(</span><span class="n">signed_number</span> <span class="bp">&lt;*</span> <span class="n">ch</span> <span class="err">&#39;\</span><span class="n">n&#39;</span><span class="o">))</span> <span class="n">s</span><span class="o">,</span>
  <span class="n">trace</span> <span class="o">(</span><span class="n">to_string</span> <span class="n">l</span><span class="o">)</span> <span class="o">(</span><span class="n">return</span> <span class="o">())</span>
</pre></div>


<div class="codehilite"><pre><span></span>[13, -3, -8, 14, 16, -7, 3, -7, 9, -10, 16, 13, 12, 12, 4, 19, -2, -5, -15, -2, -13, -11, -13, -2, ...
</pre></div>

<a name="150684754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150684754" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150684754">Mario Carneiro (Dec 01 2018 at 15:05)</a>:</h4>
<p>For some reason the output or return value of the io is ignored, so I had to to a hack with <code>trace</code> to get it to print</p>

<a name="150684902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150684902" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150684902">Patrick Massot (Dec 01 2018 at 15:10)</a>:</h4>
<p>Thanks Mario! It allowed to complete Day 1, adding only 15 characters to your code :)</p>

<a name="150684972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150684972" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150684972">Edward Ayers (Dec 01 2018 at 15:12)</a>:</h4>
<p>Did you do the second part?</p>

<a name="150685393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150685393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150685393">Mario Carneiro (Dec 01 2018 at 15:27)</a>:</h4>
<p>here's how I did the first part in lean:</p>
<div class="codehilite"><pre><span></span><span class="bp">#</span><span class="kn">eval</span> <span class="mi">0</span>
<span class="bp">+</span><span class="mi">13</span>
<span class="bp">-</span><span class="mi">3</span>
<span class="bp">-</span><span class="mi">8</span>
<span class="bp">+</span><span class="mi">14</span>
<span class="bp">+</span><span class="mi">16</span>
</pre></div>

<a name="150686187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150686187" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150686187">Patrick Massot (Dec 01 2018 at 15:52)</a>:</h4>
<p>No, I decided I should stop distractions for a while. And also the question looked masochistic to do in functional rather than imperative language</p>

<a name="150686195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150686195" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150686195">Patrick Massot (Dec 01 2018 at 15:53)</a>:</h4>
<p>Mario, was that all your input?</p>

<a name="150687782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150687782" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150687782">Bryan Gin-ge Chen (Dec 01 2018 at 16:49)</a>:</h4>
<p>I had to use <code>#eval (0 : int)</code> since the first line of the input was negative.</p>

<a name="150703402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150703402" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150703402">Reid Barton (Dec 02 2018 at 01:54)</a>:</h4>
<p>I solved it too. But my solution took 40 seconds to run</p>

<a name="150703410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150703410" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150703410">Reid Barton (Dec 02 2018 at 01:55)</a>:</h4>
<p>The first part, I mean</p>

<a name="150703754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150703754" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150703754">Reid Barton (Dec 02 2018 at 02:06)</a>:</h4>
<p>Doing the second part in non-meta Lean seems pretty interesting</p>

<a name="150715253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150715253" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150715253">Mario Carneiro (Dec 02 2018 at 09:17)</a>:</h4>
<p>I think this is a good test case for the conventional programming capabilities of lean. Here's my solution for day 2 pt 1:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">system</span><span class="bp">.</span><span class="n">io</span> <span class="n">data</span><span class="bp">.</span><span class="n">buffer</span><span class="bp">.</span><span class="n">parser</span> <span class="n">meta</span><span class="bp">.</span><span class="n">rb_map</span> <span class="n">data</span><span class="bp">.</span><span class="n">list</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">open</span> <span class="n">parser</span>

<span class="n">def</span> <span class="n">letter</span> <span class="o">:</span> <span class="n">parser</span> <span class="n">char</span> <span class="o">:=</span>
<span class="n">sat</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">c</span><span class="o">,</span> <span class="err">&#39;</span><span class="n">a&#39;</span><span class="bp">.</span><span class="n">to_nat</span> <span class="bp">≤</span> <span class="n">c</span><span class="bp">.</span><span class="n">to_nat</span> <span class="bp">∧</span> <span class="n">c</span><span class="bp">.</span><span class="n">to_nat</span> <span class="bp">≤</span> <span class="err">&#39;</span><span class="n">z&#39;</span><span class="bp">.</span><span class="n">to_nat</span><span class="o">)</span>

<span class="n">def</span> <span class="n">count1</span> <span class="o">{</span><span class="n">α</span> <span class="n">lt</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_rel</span> <span class="n">lt</span><span class="o">]</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">rbmap</span> <span class="n">α</span> <span class="bp">ℕ</span> <span class="n">lt</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">rbmap</span> <span class="n">α</span> <span class="bp">ℕ</span> <span class="n">lt</span> <span class="o">:=</span>
<span class="n">c</span><span class="bp">.</span><span class="n">insert</span> <span class="n">a</span> <span class="err">$</span> <span class="k">match</span> <span class="n">c</span><span class="bp">.</span><span class="n">find</span> <span class="n">a</span> <span class="k">with</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">some</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span>
<span class="bp">|</span> <span class="n">none</span> <span class="o">:=</span> <span class="mi">1</span>
<span class="kn">end</span>

<span class="n">def</span> <span class="n">get_counts</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">char</span><span class="o">)</span> <span class="o">:</span> <span class="n">bool</span> <span class="bp">×</span> <span class="n">bool</span> <span class="o">:=</span>
<span class="k">let</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">list</span><span class="bp">.</span><span class="n">foldl</span> <span class="n">count1</span> <span class="o">(</span><span class="n">mk_rbmap</span> <span class="n">char</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="n">l</span> <span class="k">in</span>
<span class="n">m</span><span class="bp">.</span><span class="n">fold</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">c</span> <span class="n">n</span> <span class="bp">⟨</span><span class="n">r₁</span><span class="o">,</span> <span class="n">r₂</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">r₁</span> <span class="bp">∨</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span><span class="o">,</span> <span class="n">r₂</span> <span class="bp">∨</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">3</span><span class="bp">⟩</span><span class="o">)</span> <span class="o">(</span><span class="n">ff</span><span class="o">,</span> <span class="n">ff</span><span class="o">)</span>

<span class="bp">#</span><span class="kn">eval</span> <span class="n">do</span>
  <span class="n">s</span> <span class="err">←</span> <span class="n">io</span><span class="bp">.</span><span class="n">fs</span><span class="bp">.</span><span class="n">read_file</span> <span class="s2">&quot;dat.txt&quot;</span><span class="o">,</span>
  <span class="n">sum</span><span class="bp">.</span><span class="n">inr</span> <span class="n">ls</span> <span class="err">←</span> <span class="n">return</span> <span class="err">$</span> <span class="n">run</span> <span class="o">(</span><span class="n">many</span> <span class="o">(</span><span class="n">many</span> <span class="n">letter</span> <span class="bp">&lt;*</span> <span class="n">ch</span> <span class="err">&#39;\</span><span class="n">n&#39;</span><span class="o">))</span> <span class="n">s</span><span class="o">,</span>
  <span class="k">let</span> <span class="o">(</span><span class="n">l₁</span><span class="o">,</span> <span class="n">l₂</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">ls</span><span class="bp">.</span><span class="n">map</span> <span class="n">get_counts</span><span class="o">)</span><span class="bp">.</span><span class="n">unzip</span><span class="o">,</span>
  <span class="n">trace</span> <span class="o">(</span><span class="n">to_string</span> <span class="o">(</span><span class="n">l₁</span><span class="bp">.</span><span class="n">count</span> <span class="n">tt</span> <span class="bp">*</span> <span class="n">l₂</span><span class="bp">.</span><span class="n">count</span> <span class="n">tt</span><span class="o">))</span> <span class="o">(</span><span class="n">return</span> <span class="o">())</span>
</pre></div>

<a name="150715398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150715398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150715398">Mario Carneiro (Dec 02 2018 at 09:23)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span>  As for doing the day 1 pt 2 in non-meta lean, it was obviously intended to have a solution with unbounded iteration, and it is possible to have such a program never halt on some inputs. With some significant additional work you can actually decide whether an input will halt (by looking at whether the numbers are all distinct mod the period), and so you could get a fully correct non-meta lean solution that way (which is even better than the naive algorithm because it will tell you when the infinite stream has no duplicates).</p>
<p>But if you just want the easy solution, the simplest approach is just to have a depth limiter, and increase it until you get the answer.</p>

<a name="150794896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150794896" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150794896">Mario Carneiro (Dec 03 2018 at 20:45)</a>:</h4>
<p>To avoid spamming the chat I won't report daily, but I think I will take up this challenge. Follow along at <a href="https://github.com/digama0/advent-of-code" target="_blank" title="https://github.com/digama0/advent-of-code">https://github.com/digama0/advent-of-code</a> (spoiler alert)</p>

<a name="150837825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150837825" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150837825">Edward Ayers (Dec 04 2018 at 11:45)</a>:</h4>
<p>On part day 1 part 2, I believe you can show that the search terminates if two elements of your list are equal mod (answer to part 1). So I started coding up a non-meta algorithm but then I realized it would sap away my entire Saturday so I stopped.</p>

<a name="150837987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150837987" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150837987">Mario Carneiro (Dec 04 2018 at 11:48)</a>:</h4>
<p>Did you see my solution?</p>

<a name="150837992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150837992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150837992">Mario Carneiro (Dec 04 2018 at 11:48)</a>:</h4>
<p>I did that algorithm</p>

<a name="150838001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150838001" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150838001">Mario Carneiro (Dec 04 2018 at 11:48)</a>:</h4>
<p>and it did sap a good chunk of my day ;)</p>

<a name="150838140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150838140" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150838140">Mario Carneiro (Dec 04 2018 at 11:51)</a>:</h4>
<p>you can actually do a bit better than producing a proof of well foundedness to run the search... when two values have the same mod the period, you find the least difference of divs, and that's where the search will terminate (so you can do the whole thing without actually running those passes)</p>

<a name="150838882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150838882" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150838882">Edward Ayers (Dec 04 2018 at 12:03)</a>:</h4>
<p>Yeah that's how I was going to do it.</p>

<a name="150839362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150839362" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150839362">Edward Ayers (Dec 04 2018 at 12:10)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> thanks for sharing your solutions. There are still lots of language/mathlib features I am neglecting! Eg <code>withtop</code></p>

<a name="150841457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150841457" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150841457">Edward Ayers (Dec 04 2018 at 12:52)</a>:</h4>
<p>Also <span class="user-mention" data-user-id="110049">@Mario Carneiro</span>  in the parsers for numbers and letters you can use <code>sat $ char.is_lower</code> and <code>char.is_digit</code> instead of manually checking the char.</p>

<a name="150841473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150841473" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150841473">Mario Carneiro (Dec 04 2018 at 12:53)</a>:</h4>
<p>oh, lovely</p>

<a name="150841529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Advent%20of%20Code/near/150841529" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/77939AdventofCode.html#150841529">Mario Carneiro (Dec 04 2018 at 12:54)</a>:</h4>
<p>I'm hoping that the conventional programming capabilities of lean will be boosted by these attempts</p>


{% endraw %}
