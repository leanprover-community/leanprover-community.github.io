---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/35533rewritingahypothesis.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html">rewriting a hypothesis</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="125608657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125608657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125608657">Johan Commelin (Apr 24 2018 at 07:40)</a>:</h4>
<p>This belongs in its own topic.<br>
(Originally <a href="#narrow/stream/113488-general/subject/statement.20of.20the.20five.20lemma/near/125607928" title="#narrow/stream/113488-general/subject/statement.20of.20the.20five.20lemma/near/125607928">https://leanprover.zulipchat.com/#narrow/stream/113488-general/subject/statement.20of.20the.20five.20lemma/near/125607928</a>)</p>
<blockquote>
<p>Can I easily rewrite the hypothesis <code>(com₁ : m ∘ f = r ∘ l)</code> into <code>com₁' : \fo x, (m (f x) = r (l x))</code> ?</p>
</blockquote>

<a name="125608662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125608662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125608662">Sean Leather (Apr 24 2018 at 07:41)</a>:</h4>
<p>Did you try <code>unfold function.comp</code>?</p>

<a name="125608722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125608722" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125608722">Moses Schönfinkel (Apr 24 2018 at 07:42)</a>:</h4>
<p>Wouldn't you need extensionality for it first?</p>

<a name="125608842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125608842" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125608842">Sean Leather (Apr 24 2018 at 07:47)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">f₁</span> <span class="n">f₂</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">g₁</span> <span class="n">g₂</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span> <span class="n">g₁</span> <span class="err">∘</span> <span class="n">f₁</span> <span class="bp">=</span> <span class="n">g₂</span> <span class="err">∘</span> <span class="n">f₂</span> <span class="o">:=</span>
  <span class="k">by</span> <span class="n">unfold</span> <span class="n">function</span><span class="bp">.</span><span class="n">comp</span><span class="bp">;</span> <span class="n">funext</span> <span class="n">x</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">,</span>
<span class="n">f₁</span> <span class="n">f₂</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">,</span>
<span class="n">g₁</span> <span class="n">g₂</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">A</span>
<span class="err">⊢</span> <span class="n">g₁</span> <span class="o">(</span><span class="n">f₁</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g₂</span> <span class="o">(</span><span class="n">f₂</span> <span class="n">x</span><span class="o">)</span>
</pre></div>

<a name="125608848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125608848" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125608848">Moses Schönfinkel (Apr 24 2018 at 07:47)</a>:</h4>
<p>Right, I am a moron :).</p>

<a name="125608893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125608893" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125608893">Sean Leather (Apr 24 2018 at 07:48)</a>:</h4>
<p>Or you read from right to left. <span class="emoji emoji-1f643" title="upside down face">:upside_down_face:</span></p>

<a name="125608900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125608900" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125608900">Moses Schönfinkel (Apr 24 2018 at 07:48)</a>:</h4>
<p>I think my fingers typed before my brain got involved.</p>

<a name="125608909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125608909" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125608909">Sean Leather (Apr 24 2018 at 07:49)</a>:</h4>
<p>Actually, in my current version of Lean (dated to February, I think), <code>unfold</code> isn't necessary.</p>

<a name="125608912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125608912" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125608912">Sean Leather (Apr 24 2018 at 07:49)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">,</span>
<span class="n">f₁</span> <span class="n">f₂</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">,</span>
<span class="n">g₁</span> <span class="n">g₂</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">A</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">g₁</span> <span class="err">∘</span> <span class="n">f₁</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="n">g₂</span> <span class="err">∘</span> <span class="n">f₂</span><span class="o">)</span> <span class="n">x</span>
</pre></div>

<a name="125608959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125608959" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125608959">Sean Leather (Apr 24 2018 at 07:50)</a>:</h4>
<p>Okay, but that's not what you want. So I revoke my statement.</p>

<a name="125608982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125608982" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125608982">Sean Leather (Apr 24 2018 at 07:51)</a>:</h4>
<p>And to alleviate <span class="user-mention" data-user-id="110027">@Moses Schönfinkel</span>'s concerns, you can do it the other way around:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">f₁</span> <span class="n">f₂</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">g₁</span> <span class="n">g₂</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span> <span class="n">g₁</span> <span class="err">∘</span> <span class="n">f₁</span> <span class="bp">=</span> <span class="n">g₂</span> <span class="err">∘</span> <span class="n">f₂</span> <span class="o">:=</span>
  <span class="k">by</span> <span class="n">funext</span> <span class="n">x</span><span class="bp">;</span> <span class="n">unfold</span> <span class="n">function</span><span class="bp">.</span><span class="n">comp</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">,</span>
<span class="n">f₁</span> <span class="n">f₂</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">,</span>
<span class="n">g₁</span> <span class="n">g₂</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">A</span>
<span class="err">⊢</span> <span class="n">g₁</span> <span class="o">(</span><span class="n">f₁</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g₂</span> <span class="o">(</span><span class="n">f₂</span> <span class="n">x</span><span class="o">)</span>
</pre></div>

<a name="125608989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125608989" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125608989">Sean Leather (Apr 24 2018 at 07:51)</a>:</h4>
<p><span class="user-mention" data-user-id="110027">@Moses Schönfinkel</span> So you're not a moron after all.</p>

<a name="125609106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609106">Moses Schönfinkel (Apr 24 2018 at 07:54)</a>:</h4>
<p>I am at least a partial moron because I thought extensionality needs to come before unfolding :). For some definition of "thought" which is just "don't think and fetch a pattern you'd encountered before".</p>

<a name="125609543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609543" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609543">Johan Commelin (Apr 24 2018 at 08:07)</a>:</h4>
<p>Ok, so I unfolded that hypothesis. Now how do I apply it? Part of my (50-line) context is like this:</p>
<div class="codehilite"><pre><span></span>com₃ : (λ (x : C₁), m (h₁ x)) = λ (x : C₁), h₂ (l x),
x : C₁,
this : h₂ (l x) = 1
⊢ m (h₁ x) = 1
</pre></div>

<a name="125609747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609747" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609747">Johan Commelin (Apr 24 2018 at 08:13)</a>:</h4>
<p>Why can't <code>cc</code> solve this one?</p>

<a name="125609789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609789" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609789">Kevin Buzzard (Apr 24 2018 at 08:14)</a>:</h4>
<p>I don't know anything about cc</p>

<a name="125609790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609790" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609790">Johan Commelin (Apr 24 2018 at 08:14)</a>:</h4>
<p>Somehow it needs a slightly rewritten version of <code>com₃</code>, I guess</p>

<a name="125609793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609793" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609793">Kevin Buzzard (Apr 24 2018 at 08:14)</a>:</h4>
<p>but are you having trouble proving this in general?</p>

<a name="125609794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609794" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609794">Johan Commelin (Apr 24 2018 at 08:14)</a>:</h4>
<p>Yup</p>

<a name="125609816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609816" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609816">Kevin Buzzard (Apr 24 2018 at 08:15)</a>:</h4>
<p>com3 says "two functions are equal"</p>

<a name="125609818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609818" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609818">Johan Commelin (Apr 24 2018 at 08:15)</a>:</h4>
<p>AFAIK, <code>cc</code> follows it's nose, deducing equalities and occasionally applying some functions.</p>

<a name="125609823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609823" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609823">Johan Commelin (Apr 24 2018 at 08:15)</a>:</h4>
<p>But that is simplistic</p>

<a name="125609826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609826" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609826">Kevin Buzzard (Apr 24 2018 at 08:15)</a>:</h4>
<p>I would be tempted to really use the functions themselves</p>

<a name="125609827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609827" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609827">Johan Commelin (Apr 24 2018 at 08:15)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Right, so I need to do some funext</p>

<a name="125609833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609833">Kevin Buzzard (Apr 24 2018 at 08:15)</a>:</h4>
<p>I am sure I can give a hands-on proof</p>

<a name="125609834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609834" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609834">Johan Commelin (Apr 24 2018 at 08:15)</a>:</h4>
<p>Or what</p>

<a name="125609879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609879" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609879">Kevin Buzzard (Apr 24 2018 at 08:16)</a>:</h4>
<p>You can write "show (m circ h1) x = 1" probably</p>

<a name="125609881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609881" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609881">Kevin Buzzard (Apr 24 2018 at 08:16)</a>:</h4>
<p>this will rewrite the goal</p>

<a name="125609886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609886" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609886">Kevin Buzzard (Apr 24 2018 at 08:16)</a>:</h4>
<p>because <code>show</code> will change a goal to something definitionally equivalent</p>

<a name="125609887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609887" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609887">Kevin Buzzard (Apr 24 2018 at 08:16)</a>:</h4>
<p>Do you know about definitional equivalence?</p>

<a name="125609888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609888" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609888">Johan Commelin (Apr 24 2018 at 08:16)</a>:</h4>
<p>yes</p>

<a name="125609897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609897" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609897">Kevin Buzzard (Apr 24 2018 at 08:17)</a>:</h4>
<p>and you can use "change" to rewrite hypotheses to definitionally equivalent things too</p>

<a name="125609902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609902" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609902">Sean Leather (Apr 24 2018 at 08:17)</a>:</h4>
<p>As well as <code>refine</code>.</p>

<a name="125609906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609906">Johan Commelin (Apr 24 2018 at 08:17)</a>:</h4>
<p>Hmmz, ok</p>

<a name="125609907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609907">Johan Commelin (Apr 24 2018 at 08:17)</a>:</h4>
<p>Let's see if I can find a proof</p>

<a name="125609910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609910" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609910">Kevin Buzzard (Apr 24 2018 at 08:18)</a>:</h4>
<p>Let me just get your context into some MWE</p>

<a name="125609947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125609947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125609947">Kenny Lau (Apr 24 2018 at 08:18)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> <code>exaxt (congr_fun com\3 _).trans this</code></p>

<a name="125610023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610023" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610023">Kevin Buzzard (Apr 24 2018 at 08:21)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">W</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">W</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">W</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">)</span> <span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="n">W</span><span class="o">)</span> <span class="o">(</span><span class="n">one</span> <span class="o">:</span> <span class="n">Z</span><span class="o">)</span>
<span class="o">(</span><span class="n">Hcom</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">t</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="n">j</span> <span class="o">(</span><span class="n">h</span> <span class="n">t</span><span class="o">)))</span> <span class="o">(</span><span class="n">Hthis</span> <span class="o">:</span> <span class="n">j</span> <span class="o">(</span><span class="n">h</span> <span class="n">w</span><span class="o">)</span> <span class="bp">=</span> <span class="n">one</span><span class="o">)</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">w</span><span class="o">)</span> <span class="bp">=</span> <span class="n">one</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="125610026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610026">Kevin Buzzard (Apr 24 2018 at 08:21)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> if you write your question like this (i.e. make it easily cut-and-pasteable)</p>

<a name="125610029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610029" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610029">Kevin Buzzard (Apr 24 2018 at 08:21)</a>:</h4>
<p>then when Kenny goes into proof mode</p>

<a name="125610066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610066" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610066">Kevin Buzzard (Apr 24 2018 at 08:22)</a>:</h4>
<p>he's more likely to print out more proofs</p>

<a name="125610069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610069" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610069">Johan Commelin (Apr 24 2018 at 08:22)</a>:</h4>
<p>Ok, I see</p>

<a name="125610140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610140" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610140">Kevin Buzzard (Apr 24 2018 at 08:24)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">W</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">W</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">W</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">)</span> <span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="n">W</span><span class="o">)</span> <span class="o">(</span><span class="n">one</span> <span class="o">:</span> <span class="n">Z</span><span class="o">)</span>
<span class="o">(</span><span class="n">Hcom</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">t</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="n">j</span> <span class="o">(</span><span class="n">h</span> <span class="n">t</span><span class="o">)))</span> <span class="o">(</span><span class="n">Hthis</span> <span class="o">:</span> <span class="n">j</span> <span class="o">(</span><span class="n">h</span> <span class="n">w</span><span class="o">)</span> <span class="bp">=</span> <span class="n">one</span><span class="o">)</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">w</span><span class="o">)</span> <span class="bp">=</span> <span class="n">one</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">change</span> <span class="o">(</span><span class="n">g</span> <span class="err">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">w</span> <span class="bp">=</span> <span class="n">one</span><span class="o">,</span>
<span class="n">change</span> <span class="o">(</span><span class="n">j</span> <span class="err">∘</span> <span class="n">h</span><span class="o">)</span> <span class="n">w</span> <span class="bp">=</span> <span class="n">one</span> <span class="n">at</span> <span class="n">Hthis</span><span class="o">,</span>
<span class="n">change</span> <span class="o">(</span><span class="n">g</span> <span class="err">∘</span> <span class="n">f</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">j</span> <span class="err">∘</span> <span class="n">h</span><span class="o">)</span> <span class="n">at</span> <span class="n">Hcom</span><span class="o">,</span>
<span class="n">rwa</span> <span class="n">Hcom</span>
<span class="kn">end</span>
</pre></div>

<a name="125610146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610146" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610146">Kevin Buzzard (Apr 24 2018 at 08:25)</a>:</h4>
<p>If you're not ready for Kenny's gobble-de-gook then there is how I would think about it</p>

<a name="125610154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610154" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610154">Kevin Buzzard (Apr 24 2018 at 08:25)</a>:</h4>
<p><code>rwa</code> means <code>rewrite, and then note that the goal is an assumption so close it</code></p>

<a name="125610206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610206" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610206">Kevin Buzzard (Apr 24 2018 at 08:26)</a>:</h4>
<p>and <code>change</code> lets you change things to definitionally equivalent things</p>

<a name="125610211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610211" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610211">Kevin Buzzard (Apr 24 2018 at 08:26)</a>:</h4>
<p>The problem with rewrite is that it will not change stuff to definitionally equivalent stuff</p>

<a name="125610214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610214" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610214">Kevin Buzzard (Apr 24 2018 at 08:27)</a>:</h4>
<p>it has to already be exactly right</p>

<a name="125610290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610290" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610290">Johan Commelin (Apr 24 2018 at 08:29)</a>:</h4>
<p>Ok, got that. Thanks!</p>

<a name="125610296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610296" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610296">Kevin Buzzard (Apr 24 2018 at 08:29)</a>:</h4>
<p>Here's Kenny's proof:</p>

<a name="125610339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610339" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610339">Kevin Buzzard (Apr 24 2018 at 08:30)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">W</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">W</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">W</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">)</span> <span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="n">W</span><span class="o">)</span> <span class="o">(</span><span class="n">one</span> <span class="o">:</span> <span class="n">Z</span><span class="o">)</span>
<span class="o">(</span><span class="n">Hcom</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">t</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="n">j</span> <span class="o">(</span><span class="n">h</span> <span class="n">t</span><span class="o">)))</span> <span class="o">(</span><span class="n">Hthis</span> <span class="o">:</span> <span class="n">j</span> <span class="o">(</span><span class="n">h</span> <span class="n">w</span><span class="o">)</span> <span class="bp">=</span> <span class="n">one</span><span class="o">)</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">w</span><span class="o">)</span> <span class="bp">=</span> <span class="n">one</span> <span class="o">:=</span>
<span class="o">((</span><span class="n">congr_fun</span> <span class="n">Hcom</span><span class="o">)</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">trans</span> <span class="n">Hthis</span>
</pre></div>

<a name="125610340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610340" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610340">Patrick Massot (Apr 24 2018 at 08:30)</a>:</h4>
<p>That's a nice example. I'm sure we can have a 23rd PR about simp vs rw vs change</p>

<a name="125610341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610341" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610341">Kevin Buzzard (Apr 24 2018 at 08:30)</a>:</h4>
<p>This really shows the power of term mode</p>

<a name="125610345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610345" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610345">Patrick Massot (Apr 24 2018 at 08:30)</a>:</h4>
<p>Kevin, you forgot to switch browser</p>

<a name="125610350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610350" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610350">Patrick Massot (Apr 24 2018 at 08:30)</a>:</h4>
<p>To the one where you are logged in as Kenny</p>

<a name="125610360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610360" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610360">Kevin Buzzard (Apr 24 2018 at 08:31)</a>:</h4>
<p>darn, I'm getting forgetful in my old age</p>

<a name="125610367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610367" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610367">Kevin Buzzard (Apr 24 2018 at 08:31)</a>:</h4>
<p>General mathlib style guide says "if it's trivially true, then the best proof is an incomprehensible one-liner"</p>

<a name="125610405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610405" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610405">Kevin Buzzard (Apr 24 2018 at 08:32)</a>:</h4>
<p>because there's no point writing a four line tactic proof like mine, which makes it clear how you are doing something completely trivial</p>

<a name="125610426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610426" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610426">Kevin Buzzard (Apr 24 2018 at 08:33)</a>:</h4>
<p>But I spent a long long time writing all proofs in tactic mode before I felt comfortable with these fancy one-line term mode proofs</p>

<a name="125610428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610428" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610428">Johan Commelin (Apr 24 2018 at 08:33)</a>:</h4>
<p>Ok, so now I have proven that <code>h_1 x = 1</code>. So now I want to say <code>ker h_1 = im g_1</code> hence there is a <code>y : B_1</code> such that <code>g_1 y = x</code>.</p>

<a name="125610430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610430" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610430">Kevin Buzzard (Apr 24 2018 at 08:33)</a>:</h4>
<p>How have you set things up: is ker h1 a set?</p>

<a name="125610431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610431" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610431">Kevin Buzzard (Apr 24 2018 at 08:33)</a>:</h4>
<p>There are two ways of talking about what a mathematician would call a subset of a set</p>

<a name="125610471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610471" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610471">Kevin Buzzard (Apr 24 2018 at 08:34)</a>:</h4>
<p>you can use sets or subtypes</p>

<a name="125610478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610478" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610478">Kevin Buzzard (Apr 24 2018 at 08:34)</a>:</h4>
<p>they carry the same data, but packaged in different ways</p>

<a name="125610480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610480" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610480">Kevin Buzzard (Apr 24 2018 at 08:34)</a>:</h4>
<p>One is a term, one is a type</p>

<a name="125610485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610485" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610485">Johan Commelin (Apr 24 2018 at 08:34)</a>:</h4>
<p><a href="https://gist.github.com/jcommelin/d097eb8f2587d34e5c337450bca543db" target="_blank" title="https://gist.github.com/jcommelin/d097eb8f2587d34e5c337450bca543db">https://gist.github.com/jcommelin/d097eb8f2587d34e5c337450bca543db</a></p>

<a name="125610486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610486" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610486">Johan Commelin (Apr 24 2018 at 08:34)</a>:</h4>
<p>That's an update</p>

<a name="125610489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610489" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610489">Johan Commelin (Apr 24 2018 at 08:35)</a>:</h4>
<p>With what I have so far</p>

<a name="125610554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610554" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610554">Kevin Buzzard (Apr 24 2018 at 08:36)</a>:</h4>
<p>You're using sets</p>

<a name="125610555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610555" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610555">Kevin Buzzard (Apr 24 2018 at 08:36)</a>:</h4>
<p>Oh wow, the message everyone was replying to has changed.</p>

<a name="125610568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610568" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610568">Kevin Buzzard (Apr 24 2018 at 08:37)</a>:</h4>
<p>If you write <code>have := ...</code> in tactic mode</p>

<a name="125610607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610607" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610607">Kevin Buzzard (Apr 24 2018 at 08:38)</a>:</h4>
<p>then Lean calls the thing you proved <code>this</code> by default</p>

<a name="125610611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610611" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610611">Kevin Buzzard (Apr 24 2018 at 08:38)</a>:</h4>
<p>so you have about 20 hypotheses all called <code>this</code></p>

<a name="125610614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610614" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610614">Kevin Buzzard (Apr 24 2018 at 08:38)</a>:</h4>
<p>and you won't be able to use most of them</p>

<a name="125610616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610616" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610616">Kevin Buzzard (Apr 24 2018 at 08:38)</a>:</h4>
<p>because <code>this</code> will only refer to one of them</p>

<a name="125610619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610619">Kevin Buzzard (Apr 24 2018 at 08:38)</a>:</h4>
<p>and the rest will be inaccessible</p>

<a name="125610691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610691" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610691">Johan Commelin (Apr 24 2018 at 08:40)</a>:</h4>
<blockquote>
<p>Oh wow, the message everyone was replying to has changed.</p>
</blockquote>
<p>Yes, still need to figure out how github behaves. Sorry...</p>

<a name="125610707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610707" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610707">Patrick Massot (Apr 24 2018 at 08:41)</a>:</h4>
<p>For the record, the calc version of the previous question:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">W</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">W</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">W</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">)</span> <span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="n">W</span><span class="o">)</span> <span class="o">(</span><span class="n">one</span> <span class="o">:</span> <span class="n">Z</span><span class="o">)</span>
<span class="o">(</span><span class="n">Hcom</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">t</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="n">j</span> <span class="o">(</span><span class="n">h</span> <span class="n">t</span><span class="o">)))</span> <span class="o">(</span><span class="n">Hthis</span> <span class="o">:</span> <span class="n">j</span> <span class="o">(</span><span class="n">h</span> <span class="n">w</span><span class="o">)</span> <span class="bp">=</span> <span class="n">one</span><span class="o">)</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">w</span><span class="o">)</span> <span class="bp">=</span> <span class="n">one</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">w</span><span class="o">)</span> <span class="bp">=</span> <span class="n">j</span> <span class="o">(</span><span class="n">h</span> <span class="n">w</span><span class="o">)</span> <span class="o">:</span> <span class="n">congr_fun</span> <span class="n">Hcom</span> <span class="n">w</span>
         <span class="bp">...</span> <span class="bp">=</span> <span class="bp">_</span> <span class="o">:</span> <span class="n">Hthis</span>
</pre></div>

<a name="125610708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610708" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610708">Johan Commelin (Apr 24 2018 at 08:41)</a>:</h4>
<p>About all the <code>this</code>es. My current strategy is to give them a name if I need to. But hopefully things like <code>rwa</code> and <code>apply_assumption</code> will just figure it out.</p>

<a name="125610767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610767" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610767">Patrick Massot (Apr 24 2018 at 08:42)</a>:</h4>
<p>I guess Kevin/Kenny term proof is a rather direct translation of that calc proof</p>

<a name="125610778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610778" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610778">Kevin Buzzard (Apr 24 2018 at 08:43)</a>:</h4>
<p>yes, <code>calc</code> is just some elaborate way of applying <code>trans</code>, as we see from the calc docs ;-)</p>

<a name="125610843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610843">Patrick Massot (Apr 24 2018 at 08:45)</a>:</h4>
<p>I swear I didn't look at your term proof before writing this</p>

<a name="125610844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610844" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610844">Patrick Massot (Apr 24 2018 at 08:45)</a>:</h4>
<p>Because this is what I do with term proof</p>

<a name="125610845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610845">Patrick Massot (Apr 24 2018 at 08:45)</a>:</h4>
<p>My eyes refuse to stay on them</p>

<a name="125610944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610944" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610944">Kevin Buzzard (Apr 24 2018 at 08:48)</a>:</h4>
<p>eew</p>

<a name="125610945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610945" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610945">Kevin Buzzard (Apr 24 2018 at 08:48)</a>:</h4>
<p>the definition of kernel</p>

<a name="125610947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610947">Kevin Buzzard (Apr 24 2018 at 08:48)</a>:</h4>
<p>is "the pre-image of the trivial subgroup"</p>

<a name="125610951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610951" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610951">Kevin Buzzard (Apr 24 2018 at 08:48)</a>:</h4>
<p>Is that really better than "the things which map to the identity element"?</p>

<a name="125610954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610954" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610954">Kenny Lau (Apr 24 2018 at 08:48)</a>:</h4>
<p>they don’t like fibres</p>

<a name="125610957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610957" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610957">Kevin Buzzard (Apr 24 2018 at 08:49)</a>:</h4>
<p><code>@[simp] lemma mem_trivial [group α] {g : α} : g ∈ trivial α ↔ g = 1</code></p>

<a name="125610958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125610958" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125610958">Kenny Lau (Apr 24 2018 at 08:49)</a>:</h4>
<p>search for fibre in zulip</p>

<a name="125611012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611012" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611012">Kevin Buzzard (Apr 24 2018 at 08:50)</a>:</h4>
<p>I wonder if they have the lemma that h is in ker beta iff beta h = 1? ;-)</p>

<a name="125611034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611034" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611034">Kevin Buzzard (Apr 24 2018 at 08:51)</a>:</h4>
<p><code>lemma duh (f : A  → B) [is_group_hom f] (a : A) : a ∈ ker f ↔ f a = 1 := sorry</code></p>

<a name="125611036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611036" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611036">Kevin Buzzard (Apr 24 2018 at 08:51)</a>:</h4>
<p>That would definitely be a good start</p>

<a name="125611105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611105" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611105">Johan Commelin (Apr 24 2018 at 08:53)</a>:</h4>
<p>Ok, I have the hypothesis that <code>m</code> is bijective. I want to apply the fact that <code>m</code> is injective. The definition of <code>bijective m</code> is <code>injective m \and surjective m</code>. Is there a general tactic that kills this?</p>

<a name="125611151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611151" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611151">Kevin Buzzard (Apr 24 2018 at 08:54)</a>:</h4>
<p>If <code>H</code> is a proof of <code>P \and Q</code> then <code>H.1</code> is a proof of <code>P</code></p>

<a name="125611158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611158" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611158">Kenny Lau (Apr 24 2018 at 08:54)</a>:</h4>
<p>I was going to say that</p>

<a name="125611162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611162">Kevin Buzzard (Apr 24 2018 at 08:54)</a>:</h4>
<p>Don't bait Patrick</p>

<a name="125611184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611184" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611184">Johan Commelin (Apr 24 2018 at 08:55)</a>:</h4>
<p>Ok, thanks.</p>

<a name="125611388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611388" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611388">Johan Commelin (Apr 24 2018 at 09:01)</a>:</h4>
<p>What is the best way of writing <code>have := y : B_1 "such that g_1 y = x"</code>?</p>

<a name="125611400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611400" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611400">Johan Commelin (Apr 24 2018 at 09:01)</a>:</h4>
<p>Ok, that is pseudo-pseudo-Lean</p>

<a name="125611448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611448" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611448">Kevin Buzzard (Apr 24 2018 at 09:02)</a>:</h4>
<p>Maybe you want to know about subtypes now</p>

<a name="125611450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611450" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611450">Kevin Buzzard (Apr 24 2018 at 09:02)</a>:</h4>
<p>There's also <code>\ex</code></p>

<a name="125611451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611451" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611451">Kevin Buzzard (Apr 24 2018 at 09:02)</a>:</h4>
<p>exists</p>

<a name="125611461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611461" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611461">Johan Commelin (Apr 24 2018 at 09:03)</a>:</h4>
<p>ok, maybe that is useful</p>

<a name="125611463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611463" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611463">Kevin Buzzard (Apr 24 2018 at 09:03)</a>:</h4>
<p><code>∃ y : B_1, g_1 y = x</code></p>

<a name="125611465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611465" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611465">Kevin Buzzard (Apr 24 2018 at 09:03)</a>:</h4>
<p>that's a Prop, so something of that type is a proof of that prop</p>

<a name="125611470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611470" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611470">Kevin Buzzard (Apr 24 2018 at 09:03)</a>:</h4>
<p>and then you can uses <code>cases</code> on the proof in tactic mode to get to <code>y</code></p>

<a name="125611474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611474" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611474">Kevin Buzzard (Apr 24 2018 at 09:03)</a>:</h4>
<p>assuming you're in the middle of a proof.</p>

<a name="125611479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611479" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611479">Johan Commelin (Apr 24 2018 at 09:04)</a>:</h4>
<p>ok, going to try that</p>

<a name="125611518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611518" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611518">Kevin Buzzard (Apr 24 2018 at 09:04)</a>:</h4>
<p>If you're in the middle of a construction (i.e. defining something, not proving something) then you need to invoke the axiom of choice to get <code>y</code> out ;-)</p>

<a name="125611534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611534" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611534">Kevin Buzzard (Apr 24 2018 at 09:04)</a>:</h4>
<p>The other thing you can do is to actually make a new type -- a subtype</p>

<a name="125611553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611553" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611553">Kevin Buzzard (Apr 24 2018 at 09:05)</a>:</h4>
<p><code>X := {y : B_1 // g_1 y = x}</code></p>

<a name="125611564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611564" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611564">Kevin Buzzard (Apr 24 2018 at 09:05)</a>:</h4>
<p>Now to build something of that type you need both an element y of B_1 and a proof that g_1 y = x</p>

<a name="125611610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611610" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611610">Kevin Buzzard (Apr 24 2018 at 09:06)</a>:</h4>
<p>and then <code>⟨y,Hy⟩</code> has type X, where Hy is the proof</p>

<a name="125611621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611621" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611621">Kevin Buzzard (Apr 24 2018 at 09:06)</a>:</h4>
<p>Or you can build the subset</p>

<a name="125611635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611635" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611635">Kevin Buzzard (Apr 24 2018 at 09:06)</a>:</h4>
<p><code>X : set B_1 := {y : B_1 | g_1 y = x}</code></p>

<a name="125611639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611639" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611639">Kevin Buzzard (Apr 24 2018 at 09:07)</a>:</h4>
<p>but now X isn't a type, so you can't have things of type X</p>

<a name="125611650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611650" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611650">Kevin Buzzard (Apr 24 2018 at 09:07)</a>:</h4>
<p>X is just the function from B_1 to Prop sending z to the statement that g_1 z = x</p>

<a name="125611700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611700" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611700">Kevin Buzzard (Apr 24 2018 at 09:08)</a>:</h4>
<p>so now the assertion that y has the property you want is literally just <code>X y</code></p>

<a name="125611705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611705" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611705">Kevin Buzzard (Apr 24 2018 at 09:08)</a>:</h4>
<p>but the notation <code>y ∈ X</code> also exists</p>

<a name="125611706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611706" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611706">Kevin Buzzard (Apr 24 2018 at 09:08)</a>:</h4>
<p><code>\in</code></p>

<a name="125611711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611711" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611711">Kevin Buzzard (Apr 24 2018 at 09:08)</a>:</h4>
<p>Which of these three answers you want might depend on what you're doing</p>

<a name="125611720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611720" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611720">Kevin Buzzard (Apr 24 2018 at 09:09)</a>:</h4>
<p>and when I was learning Lean I found it very frustrating that there didn't seem to be a "right" answer for expressing something which in mathematics was unambiguous</p>

<a name="125611724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611724" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611724">Kevin Buzzard (Apr 24 2018 at 09:09)</a>:</h4>
<p>but it's something I've now come to terms with</p>

<a name="125611796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611796" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611796">Kevin Buzzard (Apr 24 2018 at 09:11)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> </p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">group_theory</span><span class="bp">.</span><span class="n">subgroup</span>

<span class="kn">open</span> <span class="n">function</span>

<span class="n">universes</span> <span class="n">u</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">group</span> <span class="n">B</span><span class="o">]</span>

<span class="kn">definition</span> <span class="n">ker</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span>  <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">[</span><span class="n">is_group_hom</span> <span class="n">f</span><span class="o">]</span> <span class="o">:=</span> <span class="n">is_group_hom</span><span class="bp">.</span><span class="n">ker</span> <span class="n">f</span>

<span class="kn">lemma</span> <span class="n">duh</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span>  <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">[</span><span class="n">is_group_hom</span> <span class="n">f</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">ker</span> <span class="n">f</span> <span class="bp">↔</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="125611799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125611799" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125611799">Kevin Buzzard (Apr 24 2018 at 09:11)</a>:</h4>
<p>Ok enough of this, I had better go to work</p>

<a name="125612020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125612020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125612020">Kevin Buzzard (Apr 24 2018 at 09:17)</a>:</h4>
<p>but I can't find this in subgroup.lean</p>

<a name="125612025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125612025" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125612025">Kevin Buzzard (Apr 24 2018 at 09:17)</a>:</h4>
<p>I just found it</p>

<a name="125612029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125612029" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125612029">Kevin Buzzard (Apr 24 2018 at 09:17)</a>:</h4>
<p><code>mem_ker</code></p>

<a name="125612084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125612084" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125612084">Kevin Buzzard (Apr 24 2018 at 09:18)</a>:</h4>
<p>not a simp lemma, presumably because it relies on f</p>

<a name="125612087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125612087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125612087">Kevin Buzzard (Apr 24 2018 at 09:18)</a>:</h4>
<p>so is not part of the simp philosophy</p>

<a name="125612111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125612111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125612111">Kevin Buzzard (Apr 24 2018 at 09:19)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> I think you should open <code>is_group_hom</code></p>

<a name="125612155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125612155" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125612155">Kevin Buzzard (Apr 24 2018 at 09:20)</a>:</h4>
<p>not least because then you don't have to define <code>ker</code>, it is just there for you</p>

<a name="125612160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125612160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125612160">Johan Commelin (Apr 24 2018 at 09:20)</a>:</h4>
<p>yes</p>

<a name="125612162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125612162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125612162">Johan Commelin (Apr 24 2018 at 09:20)</a>:</h4>
<p>I did that 2 minutes ago</p>

<a name="125612166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125612166" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125612166">Johan Commelin (Apr 24 2018 at 09:20)</a>:</h4>
<p>the proof is really stupid funny</p>

<a name="125612169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125612169" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125612169">Johan Commelin (Apr 24 2018 at 09:21)</a>:</h4>
<p>it is almost only <code>apply_assumption</code> and <code>cc</code></p>

<a name="125612179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rewriting%20a%20hypothesis/near/125612179" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/35533rewritingahypothesis.html#125612179">Johan Commelin (Apr 24 2018 at 09:21)</a>:</h4>
<p>with a very rare <code>rwa</code> or <code>simp</code></p>


{% endraw %}
