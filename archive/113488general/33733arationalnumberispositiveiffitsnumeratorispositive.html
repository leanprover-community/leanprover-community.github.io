---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html">a rational number is positive iff its numerator is positive</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="125905999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125905999" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125905999">Kenny Lau (Apr 30 2018 at 18:22)</a>:</h4>
<p>do we have that?</p>

<a name="125906320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906320" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906320">Johan Commelin (Apr 30 2018 at 18:29)</a>:</h4>
<p>So <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mo>−</mo><mn>1</mn></mrow><mrow><mo>−</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{-1}{-1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.2484389999999999em;vertical-align:-0.403331em;"></span><span class="base"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathrm mtight">1</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.403331em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> is not a positive rational number?</p>

<a name="125906332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906332" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906332">Kenny Lau (Apr 30 2018 at 18:29)</a>:</h4>
<p>in <code>rat</code> the denominator is always positive</p>

<a name="125906393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906393">Johan Commelin (Apr 30 2018 at 18:30)</a>:</h4>
<p>So <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mn>1</mn></mrow><mrow><mo>−</mo><mn>2</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{-2}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.2484389999999999em;vertical-align:-0.403331em;"></span><span class="base"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathrm mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.403331em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> is not a rational number...</p>

<a name="125906398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906398">Kenny Lau (Apr 30 2018 at 18:30)</a>:</h4>
<p>denominator</p>

<a name="125906409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906409" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906409">Johan Commelin (Apr 30 2018 at 18:31)</a>:</h4>
<p>I find this disturbing...</p>

<a name="125906582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906582" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906582">Kenny Lau (Apr 30 2018 at 18:34)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">rat</span><span class="bp">.</span><span class="n">num_pos_of_pos</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">rat</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">r</span><span class="bp">.</span><span class="n">num</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">calc</span>  <span class="o">(</span><span class="n">r</span><span class="bp">.</span><span class="n">num</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span>
    <span class="bp">=</span> <span class="n">r</span><span class="bp">.</span><span class="n">num</span> <span class="bp">/</span> <span class="o">(</span><span class="n">r</span><span class="bp">.</span><span class="n">denom</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">r</span><span class="bp">.</span><span class="n">denom</span> <span class="o">:</span> <span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="err">$</span> <span class="n">div_mul_cancel</span> <span class="bp">_</span> <span class="err">$</span> <span class="n">ne_of_gt</span> <span class="err">$</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_pos</span><span class="bp">.</span><span class="mi">2</span> <span class="n">r</span><span class="bp">.</span><span class="n">pos</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">*</span> <span class="n">r</span><span class="bp">.</span><span class="n">denom</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">rat</span><span class="bp">.</span><span class="n">mk_eq_div</span><span class="o">,</span> <span class="err">←</span> <span class="n">rat</span><span class="bp">.</span><span class="n">num_denom</span> <span class="n">r</span><span class="o">]</span>
<span class="bp">...</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">mul_pos</span> <span class="n">H</span> <span class="err">$</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_pos</span><span class="bp">.</span><span class="mi">2</span> <span class="n">r</span><span class="bp">.</span><span class="n">pos</span>
</pre></div>

<a name="125906590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906590" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906590">Kenny Lau (Apr 30 2018 at 18:34)</a>:</h4>
<p>it's hard to prove anything about the rational numbers when I don't have enough lemmas...</p>

<a name="125906724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906724" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906724">Johan Commelin (Apr 30 2018 at 18:36)</a>:</h4>
<p>Are you building an interface for \Q ?</p>

<a name="125906727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906727" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906727">Kenny Lau (Apr 30 2018 at 18:36)</a>:</h4>
<p>I'm using Q</p>

<a name="125906734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906734" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906734">Kenny Lau (Apr 30 2018 at 18:36)</a>:</h4>
<p>and I'm finding everything hard to prove</p>

<a name="125906760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906760" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906760">Johan Commelin (Apr 30 2018 at 18:37)</a>:</h4>
<p>Ok, then we need an interface... because end-users shouldn't use r.num and r.denom, in my opinion.</p>

<a name="125906768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906768" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906768">Kenny Lau (Apr 30 2018 at 18:37)</a>:</h4>
<p>well don't rationals have denominators...</p>

<a name="125906824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906824">Johan Commelin (Apr 30 2018 at 18:38)</a>:</h4>
<p>Not really well-defined... I think</p>

<a name="125906831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906831" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906831">Kenny Lau (Apr 30 2018 at 18:38)</a>:</h4>
<p>they are</p>

<a name="125906833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906833">Johan Commelin (Apr 30 2018 at 18:38)</a>:</h4>
<p>Of course you can make choices</p>

<a name="125906836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906836" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906836">Kenny Lau (Apr 30 2018 at 18:38)</a>:</h4>
<p>no choices required</p>

<a name="125906842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906842" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906842">Johan Commelin (Apr 30 2018 at 18:38)</a>:</h4>
<p>Well, not <em>morally</em> well-defined</p>

<a name="125906854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906854" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906854">Kenny Lau (Apr 30 2018 at 18:38)</a>:</h4>
<p>in Lean a rational number consists of a numerator in Z, denominator in N, proof that the denominator is positive, and proof that they are coprime</p>

<a name="125906861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906861" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906861">Kenny Lau (Apr 30 2018 at 18:39)</a>:</h4>
<p>and I find that to be morally well-defined also</p>

<a name="125906869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906869" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906869">Kenny Lau (Apr 30 2018 at 18:39)</a>:</h4>
<p>every rational number has a simplified form</p>

<a name="125906931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906931" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906931">Johan Commelin (Apr 30 2018 at 18:40)</a>:</h4>
<p>Yes, but that should be hidden away as much as possible</p>

<a name="125906940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906940" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906940">Johan Commelin (Apr 30 2018 at 18:40)</a>:</h4>
<p>I think</p>

<a name="125906952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906952" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906952">Kenny Lau (Apr 30 2018 at 18:40)</a>:</h4>
<p>I need its denominator to prove that every rational number is smaller than some power of 2</p>

<a name="125906956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906956" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906956">Kenny Lau (Apr 30 2018 at 18:40)</a>:</h4>
<p>in particular, 1/2^r.denom &lt; r</p>

<a name="125906988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906988">Johan Commelin (Apr 30 2018 at 18:41)</a>:</h4>
<p>Well, part of the interface could say that for every rational number <code>r</code> there exists an integer <code>n</code> with <code>r &lt; n</code></p>

<a name="125906995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125906995" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125906995">Johan Commelin (Apr 30 2018 at 18:41)</a>:</h4>
<p>Or something like that.</p>

<a name="125907033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907033" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907033">Kenny Lau (Apr 30 2018 at 18:42)</a>:</h4>
<p>aha that's existing</p>

<a name="125907041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907041" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907041">Kenny Lau (Apr 30 2018 at 18:42)</a>:</h4>
<p>but I don't like it :P</p>

<a name="125907056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907056" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907056">Reid Barton (Apr 30 2018 at 18:42)</a>:</h4>
<p>there's even a class for that</p>

<a name="125907215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907215" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907215">Kenny Lau (Apr 30 2018 at 18:46)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">lt_two_pow</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">&lt;</span> <span class="mi">2</span> <span class="err">^</span> <span class="n">n</span> <span class="o">:=</span>
<span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">n</span> <span class="n">dec_trivial</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">n</span> <span class="n">ih</span><span class="o">,</span>
<span class="k">calc</span>  <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span>
    <span class="bp">&lt;</span> <span class="mi">2</span><span class="err">^</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span>   <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">add_lt_add_right</span> <span class="n">ih</span> <span class="mi">1</span>
<span class="bp">...</span> <span class="bp">≤</span> <span class="mi">2</span><span class="err">^</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span><span class="err">^</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">add_le_add_left</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">pow_le_pow_of_le_right</span> <span class="n">dec_trivial</span> <span class="err">$</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero_le</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span><span class="err">^</span><span class="n">n</span><span class="o">)</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="mi">2</span><span class="err">^</span><span class="n">n</span> <span class="bp">*</span> <span class="mi">2</span>   <span class="o">:</span> <span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="err">$</span> <span class="n">mul_two</span> <span class="o">(</span><span class="mi">2</span><span class="err">^</span><span class="n">n</span><span class="o">)</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="mi">2</span><span class="err">^</span><span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>   <span class="o">:</span> <span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="err">$</span> <span class="n">nat</span><span class="bp">.</span><span class="n">pow_succ</span> <span class="mi">2</span> <span class="n">n</span>

<span class="kn">theorem</span> <span class="n">rat</span><span class="bp">.</span><span class="n">coe_pow</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="err">^</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">(</span><span class="n">m</span><span class="err">^</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">n</span> <span class="n">rfl</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">n</span> <span class="n">ih</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">pow_succ&#39;</span><span class="o">,</span> <span class="n">ih</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">pow_succ</span><span class="o">]</span>

<span class="kn">theorem</span> <span class="n">rat</span><span class="bp">.</span><span class="n">num_pos_of_pos</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">rat</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">r</span><span class="bp">.</span><span class="n">num</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="n">int</span><span class="bp">.</span><span class="n">cast_lt</span><span class="bp">.</span><span class="mi">1</span> <span class="err">$</span>
<span class="k">calc</span>  <span class="o">(</span><span class="n">r</span><span class="bp">.</span><span class="n">num</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span>
    <span class="bp">=</span> <span class="n">r</span><span class="bp">.</span><span class="n">num</span> <span class="bp">/</span> <span class="o">(</span><span class="n">r</span><span class="bp">.</span><span class="n">denom</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">r</span><span class="bp">.</span><span class="n">denom</span> <span class="o">:</span> <span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="err">$</span> <span class="n">div_mul_cancel</span> <span class="bp">_</span> <span class="err">$</span> <span class="n">ne_of_gt</span> <span class="err">$</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_pos</span><span class="bp">.</span><span class="mi">2</span> <span class="n">r</span><span class="bp">.</span><span class="n">pos</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">*</span> <span class="n">r</span><span class="bp">.</span><span class="n">denom</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">rat</span><span class="bp">.</span><span class="n">mk_eq_div</span><span class="o">,</span> <span class="err">←</span> <span class="n">rat</span><span class="bp">.</span><span class="n">num_denom</span> <span class="n">r</span><span class="o">]</span>
<span class="bp">...</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">mul_pos</span> <span class="n">H</span> <span class="err">$</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_pos</span><span class="bp">.</span><span class="mi">2</span> <span class="n">r</span><span class="bp">.</span><span class="n">pos</span>

<span class="kn">theorem</span> <span class="n">rat</span><span class="bp">.</span><span class="n">one_le_num_of_pos</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">rat</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">r</span><span class="bp">.</span><span class="n">num</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">have</span> <span class="n">H1</span> <span class="o">:</span> <span class="o">((</span><span class="mi">0</span><span class="bp">+</span><span class="mi">1</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">):</span><span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">ℚ</span><span class="o">),</span> <span class="k">from</span> <span class="n">rfl</span><span class="o">,</span>
<span class="n">H1</span> <span class="bp">▸</span> <span class="n">int</span><span class="bp">.</span><span class="n">cast_le</span><span class="bp">.</span><span class="mi">2</span> <span class="err">$</span> <span class="n">int</span><span class="bp">.</span><span class="n">add_one_le_of_lt</span> <span class="err">$</span> <span class="n">rat</span><span class="bp">.</span><span class="n">num_pos_of_pos</span> <span class="n">r</span> <span class="n">H</span>

<span class="kn">theorem</span> <span class="n">rat</span><span class="bp">.</span><span class="n">lt</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span><span class="err">^</span><span class="n">r</span><span class="bp">.</span><span class="n">denom</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="n">r</span> <span class="o">:=</span>
<span class="k">calc</span>  <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span><span class="err">^</span><span class="n">r</span><span class="bp">.</span><span class="n">denom</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span>
    <span class="bp">&lt;</span> <span class="mi">1</span> <span class="bp">/</span> <span class="n">r</span><span class="bp">.</span><span class="n">denom</span> <span class="o">:</span> <span class="n">one_div_lt_one_div_of_lt</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">cast_pos</span><span class="bp">.</span><span class="mi">2</span> <span class="n">r</span><span class="bp">.</span><span class="n">pos</span><span class="o">)</span>
  <span class="o">(</span><span class="n">trans_rel_left</span> <span class="bp">_</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">cast_lt</span><span class="bp">.</span><span class="mi">2</span> <span class="err">$</span> <span class="n">lt_two_pow</span> <span class="bp">_</span><span class="o">)</span> <span class="o">(</span><span class="n">rat</span><span class="bp">.</span><span class="n">coe_pow</span> <span class="mi">2</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">)</span>
<span class="bp">...</span> <span class="bp">≤</span> <span class="n">r</span><span class="bp">.</span><span class="n">num</span> <span class="bp">/</span> <span class="n">r</span><span class="bp">.</span><span class="n">denom</span> <span class="o">:</span> <span class="n">div_le_div_of_le_of_pos</span> <span class="o">(</span><span class="n">rat</span><span class="bp">.</span><span class="n">one_le_num_of_pos</span> <span class="n">r</span> <span class="n">H</span><span class="o">)</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">cast_pos</span><span class="bp">.</span><span class="mi">2</span> <span class="n">r</span><span class="bp">.</span><span class="n">pos</span><span class="o">)</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="n">r</span><span class="bp">.</span><span class="n">num</span> <span class="bp">/</span> <span class="o">(</span><span class="n">r</span><span class="bp">.</span><span class="n">denom</span><span class="o">:</span><span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">rfl</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">rat</span><span class="bp">.</span><span class="n">mk_eq_div</span><span class="o">,</span> <span class="err">←</span> <span class="n">rat</span><span class="bp">.</span><span class="n">num_denom</span> <span class="n">r</span><span class="o">]</span>
</pre></div>

<a name="125907217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907217" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907217">Kenny Lau (Apr 30 2018 at 18:46)</a>:</h4>
<p>yay done</p>

<a name="125907246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907246" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907246">Johan Commelin (Apr 30 2018 at 18:47)</a>:</h4>
<p>I just don't like the fact that if some computation spits out two integers, <code>a</code> and <code>b</code>, with <code>b \ne 0</code>, and I want to consider the rational number <code>a/b</code>, then Lean decides it <em>also</em> wants to put them in lowest terms.</p>

<a name="125907251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907251" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907251">Johan Commelin (Apr 30 2018 at 18:47)</a>:</h4>
<p>That might be an immense computation</p>

<a name="125907264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907264" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907264">Johan Commelin (Apr 30 2018 at 18:47)</a>:</h4>
<p>Or can it formally divide away the gcd, without actually calculating it?</p>

<a name="125907336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907336" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907336">Kevin Buzzard (Apr 30 2018 at 18:49)</a>:</h4>
<p>Johan you should take a look at <code>data/rat.lean</code> in mathlib</p>

<a name="125907337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907337" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907337">Kevin Buzzard (Apr 30 2018 at 18:49)</a>:</h4>
<p>I found that file not too intimidating</p>

<a name="125907343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907343" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907343">Johan Commelin (Apr 30 2018 at 18:49)</a>:</h4>
<p>Will do</p>

<a name="125907393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907393">Kevin Buzzard (Apr 30 2018 at 18:50)</a>:</h4>
<p>I would tell my students "of course a rational number is an equivalence class"</p>

<a name="125907398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907398">Kevin Buzzard (Apr 30 2018 at 18:50)</a>:</h4>
<p>(because it's Z localised away from 0)</p>

<a name="125907401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907401" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907401">Kevin Buzzard (Apr 30 2018 at 18:50)</a>:</h4>
<p>but in Lean working with equivalence classes is sometimes hard work</p>

<a name="125907406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907406">Kevin Buzzard (Apr 30 2018 at 18:50)</a>:</h4>
<p>so if they can get away with it, they work with an inductive type</p>

<a name="125907482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907482" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907482">Kevin Buzzard (Apr 30 2018 at 18:52)</a>:</h4>
<p>So they go with this structure of a numerator n in Z, a denominator d in N, a proof that d &gt; 0 and a proof that n and d are coprime!</p>

<a name="125907488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907488" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907488">Reid Barton (Apr 30 2018 at 18:52)</a>:</h4>
<p>If you don't reduce to lowest terms, then <code>1/2 + 1/2 + 1/2 + ... + 1/2</code> becomes an unwieldy computation</p>

<a name="125907492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907492" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907492">Kevin Buzzard (Apr 30 2018 at 18:52)</a>:</h4>
<p>At this point you can't even make 6/8</p>

<a name="125907495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907495" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907495">Kevin Buzzard (Apr 30 2018 at 18:52)</a>:</h4>
<p>but it's OK, they're only a few lines in</p>

<a name="125907501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907501" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907501">Kevin Buzzard (Apr 30 2018 at 18:52)</a>:</h4>
<p>and then they go on to make other constructors</p>

<a name="125907513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907513" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907513">Kevin Buzzard (Apr 30 2018 at 18:53)</a>:</h4>
<p>because they implemented Euclid already</p>

<a name="125907535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907535" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907535">Kevin Buzzard (Apr 30 2018 at 18:54)</a>:</h4>
<p>so you finally get a definition of <code>mk</code></p>

<a name="125907576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907576" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907576">Kevin Buzzard (Apr 30 2018 at 18:54)</a>:</h4>
<p>on line 61</p>

<a name="125907581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907581">Kevin Buzzard (Apr 30 2018 at 18:54)</a>:</h4>
<p>and they define <code>/</code> to be mk</p>

<a name="125907592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907592">Johan Commelin (Apr 30 2018 at 18:54)</a>:</h4>
<p>Well, Lean can decide to reduce to lowest terms when I force it to actually compute something. But if I want to define <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>π</mi><mo>(</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup><mo>)</mo><mo>−</mo><mn>1</mn></mrow><mrow><mi>π</mi><mo>(</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup><mo>+</mo><mn>1</mn><mo>)</mo><mo>−</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\pi(10^9)-1}{\pi(10^9+1)-1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:1.10892em;"></span><span class="strut bottom" style="height:1.62892em;vertical-align:-0.52em;"></span><span class="base"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.10892em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right:0.03588em;">π</span><span class="mopen mtight">(</span><span class="mord mathrm mtight">1</span><span class="mord mtight"><span class="mord mathrm mtight">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463142857142857em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathrm mtight">9</span></span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span><span class="mclose mtight">)</span><span class="mbin mtight">−</span><span class="mord mathrm mtight">1</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right:0.03588em;">π</span><span class="mopen mtight">(</span><span class="mord mathrm mtight">1</span><span class="mord mtight"><span class="mord mathrm mtight">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathrm mtight">9</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span><span class="mbin mtight">−</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> where <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>π</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\pi(n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.03588em;">π</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span> is the <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">n</span></span></span></span>-th prime, that should be possible, right?</p>

<a name="125907598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907598" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907598">Kevin Buzzard (Apr 30 2018 at 18:55)</a>:</h4>
<p>inductive structures with lots of things which are quite easy to carry around are very popular round here</p>

<a name="125907606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907606" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907606">Johan Commelin (Apr 30 2018 at 18:55)</a>:</h4>
<p>It shouldn't actually start computing those primes.</p>

<a name="125907624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907624" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907624">Kevin Buzzard (Apr 30 2018 at 18:55)</a>:</h4>
<p>If you want to actually work something complicated out then you should not be using Lean at this point</p>

<a name="125907626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907626" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907626">Johan Commelin (Apr 30 2018 at 18:55)</a>:</h4>
<p>Also, I <em>would</em> want to have a proof that <code>d = 0</code>, <em>all the time</em></p>

<a name="125907630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907630" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907630">Reid Barton (Apr 30 2018 at 18:55)</a>:</h4>
<p>If you believe it won't start computing the primes, then why would it need to do the conversion to lowest terms?</p>

<a name="125907634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907634" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907634">Johan Commelin (Apr 30 2018 at 18:56)</a>:</h4>
<p>But there they choose to just put <code>n/0 = 0</code></p>

<a name="125907681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907681" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907681">Kevin Buzzard (Apr 30 2018 at 18:56)</a>:</h4>
<p><code>n/0=0</code>.</p>

<a name="125907684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907684" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907684">Kevin Buzzard (Apr 30 2018 at 18:56)</a>:</h4>
<p>Mathematicians can often get upset about that.</p>

<a name="125907696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907696">Kevin Buzzard (Apr 30 2018 at 18:57)</a>:</h4>
<p>but the issue is just notation</p>

<a name="125907714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907714" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907714">Kevin Buzzard (Apr 30 2018 at 18:57)</a>:</h4>
<p>Just imagine you went through all the Lean source code replacing the notation <code>/</code> with something that looked more like <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi mathvariant="normal">/</mi><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">/^*</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord"><span class="mord mathrm">/</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.688696em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></p>

<a name="125907754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907754" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907754">Kevin Buzzard (Apr 30 2018 at 18:58)</a>:</h4>
<p>and the asterisk indicates a footnote:</p>

<a name="125907763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907763" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907763">Kevin Buzzard (Apr 30 2018 at 18:58)</a>:</h4>
<p>"Note to mathematicians: this is not your divide. This is just notation for a different function which we invented because we find it more useful."</p>

<a name="125907766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907766" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907766">Johan Commelin (Apr 30 2018 at 18:58)</a>:</h4>
<blockquote>
<p>If you want to actually work something complicated out then you should not be using Lean at this point</p>
</blockquote>
<p>Says the person who is formalising schemes... <span class="emoji emoji-1f923" title="rolling on the floor laughing">:rolling_on_the_floor_laughing:</span></p>

<a name="125907767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907767" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907767">Kevin Buzzard (Apr 30 2018 at 18:59)</a>:</h4>
<p>because whenever a mathematician writes the symbol <code>/</code></p>

<a name="125907780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907780" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907780">Kevin Buzzard (Apr 30 2018 at 18:59)</a>:</h4>
<p>they are doing that thing that mathematicians love to do -- they are making a promise.</p>

<a name="125907785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907785" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907785">Johan Commelin (Apr 30 2018 at 18:59)</a>:</h4>
<p>Lol</p>

<a name="125907790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907790" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907790">Kevin Buzzard (Apr 30 2018 at 18:59)</a>:</h4>
<p>They are saying "I promise that the denominator is not zero."</p>

<a name="125907794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907794" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907794">Johan Commelin (Apr 30 2018 at 18:59)</a>:</h4>
<p>Yeah, ok... I'll try to forget some of my home culture.</p>

<a name="125907796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907796" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907796">Kevin Buzzard (Apr 30 2018 at 18:59)</a>:</h4>
<p>but if you really make them keep their promises</p>

<a name="125907807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907807" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907807">Kevin Buzzard (Apr 30 2018 at 18:59)</a>:</h4>
<p>then that means that they have to supply a proof.</p>

<a name="125907861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907861" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907861">Kevin Buzzard (Apr 30 2018 at 19:00)</a>:</h4>
<p>And that is your input which you as a mathematician enter into /</p>

<a name="125907873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907873" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907873">Kevin Buzzard (Apr 30 2018 at 19:00)</a>:</h4>
<p>and that's exactly the data needed to work out /*</p>

<a name="125907875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907875" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907875">Kevin Buzzard (Apr 30 2018 at 19:00)</a>:</h4>
<p>with a guarantee that it's equal to /</p>

<a name="125907877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907877" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907877">Johan Commelin (Apr 30 2018 at 19:00)</a>:</h4>
<p>Fair enough</p>

<a name="125907879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907879" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907879">Kevin Buzzard (Apr 30 2018 at 19:00)</a>:</h4>
<p>Mathematicans are full of promises.</p>

<a name="125907883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907883" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907883">Kevin Buzzard (Apr 30 2018 at 19:01)</a>:</h4>
<p>A is a hypergeometric schemeoid</p>

<a name="125907896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907896" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907896">Kevin Buzzard (Apr 30 2018 at 19:01)</a>:</h4>
<p>and B is a set that bijects with A</p>

<a name="125907902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907902" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907902">Kevin Buzzard (Apr 30 2018 at 19:01)</a>:</h4>
<p>therefore B is a hypergeometric schemeoid.</p>

<a name="125907909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907909" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907909">Kevin Buzzard (Apr 30 2018 at 19:01)</a>:</h4>
<p>That statement comes with a promise. I had not realised this until very recently.</p>

<a name="125907960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907960" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907960">Kevin Buzzard (Apr 30 2018 at 19:02)</a>:</h4>
<p>The promise is: "I promise that the definition of a hypergeometric schemeoid structure on a set A does not involve actually looking at any of A's elements"</p>

<a name="125907965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125907965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125907965">Kevin Buzzard (Apr 30 2018 at 19:02)</a>:</h4>
<p>"it just involves things like structures of multiplication and addition on A</p>

<a name="125908006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125908006" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125908006">Kevin Buzzard (Apr 30 2018 at 19:03)</a>:</h4>
<p>You don't have to rely on A having an element containing an element containing the empty set in the definition -- but such a condition is a <strong>completely valid thing to say in ZFC</strong>.</p>

<a name="125908047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125908047" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125908047">Johan Commelin (Apr 30 2018 at 19:04)</a>:</h4>
<p>Yup...</p>

<a name="125908052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125908052" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125908052">Kevin Buzzard (Apr 30 2018 at 19:04)</a>:</h4>
<p>So when you make that transport of structure you are making a promise</p>

<a name="125908063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125908063" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125908063">Kevin Buzzard (Apr 30 2018 at 19:04)</a>:</h4>
<p>and mathematicians have kind of forgotten this, because it's just part of the culture.</p>

<a name="125908072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125908072" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125908072">Johan Commelin (Apr 30 2018 at 19:05)</a>:</h4>
<p>And lately we have more or less been working under that promise all the time... to never actually look at the elements of our sets.</p>

<a name="125908088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125908088" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125908088">Johan Commelin (Apr 30 2018 at 19:05)</a>:</h4>
<p>Our objects may have an element "3", but we don't actually care what that element "3" looks like. As long as it behaves like a "3"</p>

<a name="125908089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125908089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125908089">Kevin Buzzard (Apr 30 2018 at 19:05)</a>:</h4>
<p>There are certain things we _can_ do to sets, but we choose not to do. If G is a group, I don't care about the underlying set, I just care about one special element of G with the _name_ "identity" -- I don't care which set it is -- and the inversion and multiplication.</p>

<a name="125908159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125908159" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125908159">Chris Hughes (Apr 30 2018 at 19:07)</a>:</h4>
<p><code>pow_unbounded_of_gt_one</code> in <code>algebra.archimedean</code> sounds like what you want.</p>

<a name="125908160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125908160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125908160">Kevin Buzzard (Apr 30 2018 at 19:07)</a>:</h4>
<p>And I would be really interested in formalising the notion of what we as mathematicians consider decent things to do to types. Exactly what can mathematicians do to mathematical objects?</p>

<a name="125908210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125908210" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125908210">Johan Commelin (Apr 30 2018 at 19:08)</a>:</h4>
<p>Agreed. (But we are stealing Kenny's thread...) Chris subtly reminded me of that (-;</p>

<a name="125921367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125921367" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125921367">Mario Carneiro (May 01 2018 at 00:18)</a>:</h4>
<blockquote>
<p>I just don't like the fact that if some computation spits out two integers, a and b, with b \ne 0, and I want to consider the rational number a/b, then Lean decides it also wants to put them in lowest terms. That might be an immense computation</p>
</blockquote>
<p>The runtime for doing this is not much more than multiplication of rationals to begin with, so I think it's a reasonable cost given you are doing a division. As Reid says, the alternative is much worse, unnormalized rationals have exponentially worse runtime in some situations.</p>
<blockquote>
<p>Well, Lean can decide to reduce to lowest terms when I force it to actually compute something. But if I want to define <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>π</mi><mo>(</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup><mo>)</mo><mo>−</mo><mn>1</mn></mrow><mrow><mi>π</mi><mo>(</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup><mo>+</mo><mn>1</mn><mo>)</mo><mo>−</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{\pi(10^9)-1}{\pi(10^9+1)-1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:1.10892em;"></span><span class="strut bottom" style="height:1.62892em;vertical-align:-0.52em;"></span><span class="base"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.10892em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right:0.03588em;">π</span><span class="mopen mtight">(</span><span class="mord mathrm mtight">1</span><span class="mord mtight"><span class="mord mathrm mtight">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463142857142857em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathrm mtight">9</span></span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mathrm mtight">1</span><span class="mclose mtight">)</span><span class="mbin mtight">−</span><span class="mord mathrm mtight">1</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathit mtight" style="margin-right:0.03588em;">π</span><span class="mopen mtight">(</span><span class="mord mathrm mtight">1</span><span class="mord mtight"><span class="mord mathrm mtight">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913142857142857em;"><span style="top:-2.931em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathrm mtight">9</span></span></span></span></span></span></span></span><span class="mclose mtight">)</span><span class="mbin mtight">−</span><span class="mord mathrm mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> where <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>π</mi><mo>(</mo><mi>n</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">\pi(n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.03588em;">π</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span></span></span></span> is the <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">n</span></span></span></span>-th prime, that should be possible, right?</p>
</blockquote>
<p>If you say <code>def x : rat := pi bla bla...</code> then nothing is computed up front, but <code>x</code> is computed when you use it in a program which is <code>#eval</code>'d. In particular, Lean uses an eager evaluation semantics, so in fact <code>pi(10^9)</code> will be calculated <em>regardless</em> of whether rationals are defined as a quotient or as reduced fractions. (This isn't Haskell!) The only way to avoid the calculation at this stage is to have <code>/</code> be some sort of thunk-taking operation so as to defer evaluation of its arguments, but it is not at all obvious that these "lazy rats" are the intended usual use of rational numbers.</p>

<a name="125929510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125929510" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125929510">Johan Commelin (May 01 2018 at 04:59)</a>:</h4>
<p>Ok, understood. Somehow laziness feels natural to me. But I don't have that much experience actually. If at some point I need it, then I'll bring it up again (-;</p>

<a name="125929676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20rational%20number%20is%20positive%20iff%20its%20numerator%20is%20positive/near/125929676" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/33733arationalnumberispositiveiffitsnumeratorispositive.html#125929676">Reid Barton (May 01 2018 at 05:04)</a>:</h4>
<p>The point I was (too obliquely) trying to make before is that if Lean were lazy, then it would presumably have no reason to do the GCD computation, either</p>


{% endraw %}
