---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/99350Lean360.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html">Lean 3.6.0</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="189200317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189200317" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189200317">Gabriel Ebner (Feb 27 2020 at 10:02)</a>:</h4>
<p>Good morning, everyone!  I am pleased to announce the latest release of the community fork, Lean 3.6.0!<br>
There is an associated PR to mathlib, <a href="https://github.com/leanprover-community/mathlib/issues/2064" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/2064">#2064</a>, but unfortunately it's not finished yet and I have some higher priority stuff to do right now.</p>

<a name="189200392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189200392" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189200392">Johan Commelin (Feb 27 2020 at 10:03)</a>:</h4>
<p>Patrick already has a suggestion for <code>lean-3.6.1</code></p>

<a name="189200592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189200592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189200592">Gabriel Ebner (Feb 27 2020 at 10:06)</a>:</h4>
<p>Yes, I know that there are outstanding feature requests.  This is not the last release.  Please keep the PRs coming.</p>

<a name="189204741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189204741" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189204741">Patrick Massot (Feb 27 2020 at 11:18)</a>:</h4>
<p>My suggestion is not a feature request, it's a bug fix.</p>

<a name="189207624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189207624" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189207624">Gabriel Ebner (Feb 27 2020 at 12:07)</a>:</h4>
<p>Ah, I missed <a href="https://github.com/leanprover-community/lean/issues/126" target="_blank" title="https://github.com/leanprover-community/lean/issues/126">https://github.com/leanprover-community/lean/issues/126</a>.  If somebody PRs a fix, then we can release 3.6.1 if this is a big issue.</p>

<a name="189483275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189483275" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189483275">Gabriel Ebner (Mar 02 2020 at 11:44)</a>:</h4>
<p>It should be fixed now in 3.6.1.  Thanks <span class="user-mention" data-user-id="260921">@Markus Himmel</span> for the PR!  Please complain if the PR didn't actually fix the issue.</p>

<a name="189536627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189536627" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189536627">Yury G. Kudryashov (Mar 02 2020 at 21:06)</a>:</h4>
<p>I merged <code>master</code> into <code>lean36</code>, and built it.</p>

<a name="189536696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189536696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189536696">Yury G. Kudryashov (Mar 02 2020 at 21:07)</a>:</h4>
<p><code>real_inner_product</code> fails to find some class instance; everything else builds fine.</p>

<a name="189538850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189538850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189538850">Chris Hughes (Mar 02 2020 at 21:27)</a>:</h4>
<p>I spent some time trying to sort that out. It times out looking for <code>add_comm_monoid alpha</code>. I don't know why it's even looking for that instance.</p>

<a name="189547266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189547266" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189547266">Yury G. Kudryashov (Mar 02 2020 at 23:06)</a>:</h4>
<p>Definition compiles if I make it take <code>[add_comm_group]</code> as an argument.</p>

<a name="189548455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189548455" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189548455">Yury G. Kudryashov (Mar 02 2020 at 23:24)</a>:</h4>
<p>I guess something has changed in the class instance resolution procedure between 3.5.1 and 3.6.0</p>

<a name="189548980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189548980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189548980">Yury G. Kudryashov (Mar 02 2020 at 23:33)</a>:</h4>
<p>(after fixing a couple of <code>simp</code>s) now <code>normed_space</code> instance fails</p>

<a name="189550906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189550906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189550906">Yury G. Kudryashov (Mar 03 2020 at 00:02)</a>:</h4>
<p>BTW, <code>abel</code> doesn't work with <code>(a - b) - (a - c) = c - b</code> in Lean 3.6.0.</p>

<a name="189551147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189551147" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189551147">Yury G. Kudryashov (Mar 03 2020 at 00:07)</a>:</h4>
<p>And this leads to more build failures in <code>real_inner_product</code>.</p>

<a name="189597503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189597503" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189597503">Gabriel Ebner (Mar 03 2020 at 14:33)</a>:</h4>
<p>I've just merged master and updated to 3.6.1.  I'll look into the <code>real_inner_product</code> and <code>abel</code> issues.</p>

<a name="189611710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189611710" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189611710">Gabriel Ebner (Mar 03 2020 at 16:55)</a>:</h4>
<p>Okay, I've stumbled into an ugly type-class instance cycle when synthesizing an instance for <code>decidable (a ≤ b)</code>:</p>
<div class="codehilite"><pre><span></span><span class="bp">#</span><span class="kn">print</span> <span class="n">has_le</span><span class="bp">.</span><span class="n">le</span><span class="bp">.</span><span class="n">decidable</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">decidable_linear_ordered_comm_group</span><span class="bp">.</span><span class="n">to_decidable_linear_order</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">decidable_linear_ordered_comm_ring</span><span class="bp">.</span><span class="n">to_decidable_linear_ordered_comm_group</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">to_decidable_linear_ordered_comm_ring</span>
</pre></div>


<p>Opinions on which instance to remove?  I'll try removing <code>linear_nonneg_ring.to_decidable_linear_ordered_comm_ring</code> for now.  Is there anything that actually uses <code>linear_nonneg_ring</code>?</p>

<a name="189624767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189624767" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189624767">Floris van Doorn (Mar 03 2020 at 19:20)</a>:</h4>
<p>It's not really a cycle, right? We start with <code>decidable (a ≤ b)</code> and end with <code>decidable (nonneg x)</code>.</p>
<p>If any of them should be removed, definitely the last one.</p>

<a name="189627906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189627906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189627906">Gabriel Ebner (Mar 03 2020 at 19:54)</a>:</h4>
<p>I think <code>nonneg</code> reduces to <code>\le</code> in this case.  But maybe I got that wrong.</p>

<a name="189627987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189627987" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189627987">Gabriel Ebner (Mar 03 2020 at 19:55)</a>:</h4>
<p>The <code>real_inner_product.lean</code> file is now fixed.  Behold the horrible hack: <a href="https://github.com/leanprover-community/mathlib/pull/2064/commits/38d32c8b8aad86701d0018daf7a8a1d22759cc65" target="_blank" title="https://github.com/leanprover-community/mathlib/pull/2064/commits/38d32c8b8aad86701d0018daf7a8a1d22759cc65">https://github.com/leanprover-community/mathlib/pull/2064/commits/38d32c8b8aad86701d0018daf7a8a1d22759cc65</a><br>
I have no idea why these type class issues pop up <em>now</em>.<br>
At least for me, <code>abel</code> works just fine on <code>-</code>.<br>
That's it for today.</p>

<a name="189628111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189628111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189628111">Floris van Doorn (Mar 03 2020 at 19:56)</a>:</h4>
<p>Oh, <code>nonneg</code> is a field of a structure, so yes, in some cases it can be defined to be <code>fun x, 0 &lt;= x</code>. I agree that we should remove the instance attribute from <code>linear_nonneg_ring.to_decidable_linear_ordered_comm_ring</code>.</p>

<a name="189632353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189632353" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189632353">Mario Carneiro (Mar 03 2020 at 20:45)</a>:</h4>
<p>I think that <code>nonneg_ring</code> and friends should be removed from the typeclass instance search entirely. That was an experimental smart constructor for building an ordered group or ring from a "nonneg" class, but the <code>structure</code> is only to make the smart constructor more palatable, so it need not participate in the typeclass hierarchy</p>

<a name="189731429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189731429" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189731429">Patrick Massot (Mar 04 2020 at 20:24)</a>:</h4>
<p>I don't have enough time to read Zulip those days and I'm pretty confused. I see a lot of difficulties and I don't understand how they relate to Lean 3.6.0. Maybe they don't. Was there some change in the simplfier or type class search in Lean 3.6.0?</p>

<a name="189731685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189731685" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189731685">Gabriel Ebner (Mar 04 2020 at 20:27)</a>:</h4>
<p>I don't think it's clear why all of these problems come out <em>now</em>.  Most of them are also on master, see <a href="https://github.com/leanprover-community/lean/issues/137" target="_blank" title="https://github.com/leanprover-community/lean/issues/137">https://github.com/leanprover-community/lean/issues/137</a> and <a href="https://github.com/leanprover-community/mathlib/issues/2084" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/2084">#2084</a>.  My best guess is that removing <code>decidable_eq</code> from <code>field</code> has slightly changed type class resolution in some places (or made it slightly slower), and stuff that was barely working before is now completely broken.</p>

<a name="189731800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189731800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189731800">Patrick Massot (Mar 04 2020 at 20:28)</a>:</h4>
<p>Ok, so I'm not the only one to be confused.</p>

<a name="189775653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189775653" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189775653">Johan Commelin (Mar 05 2020 at 10:03)</a>:</h4>
<p>Major kudos to <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> !</p>

<a name="189775659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189775659" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189775659">Johan Commelin (Mar 05 2020 at 10:03)</a>:</h4>
<p>The bump PR now builds!</p>

<a name="189775975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189775975" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189775975">Johan Commelin (Mar 05 2020 at 10:08)</a>:</h4>
<p>I guess we should merge this sooner rather than later.</p>

<a name="189776069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189776069" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189776069">Gabriel Ebner (Mar 05 2020 at 10:09)</a>:</h4>
<p>Thanks to <span class="user-mention" data-user-id="238446">@Anne Baanen</span>, <span class="user-mention" data-user-id="110596">@Rob Lewis</span>, <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span>, and <span class="user-mention" data-user-id="110087">@Scott Morrison</span> how did lots of the work.</p>

<a name="189822713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.6.0/near/189822713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/99350Lean360.html#189822713">Scott Morrison (Mar 05 2020 at 18:38)</a>:</h4>
<p>Is someone on top of updating CI so that <code>lean-3.6.1</code> always has oleans?</p>


{% endraw %}

{% include archive_update.html %}