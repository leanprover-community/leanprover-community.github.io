---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/68216cantsynthesizeinstance.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html">can't synthesize instance?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="160608695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160608695" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160608695">dagit (Mar 12 2019 at 20:44)</a>:</h4>
<p>I'm having an issue where I've created an instance and then I immediately try to use that instance and lean says it can't synthesize that instance. If I explicitly pass the instance as an argument (using <code>@</code>), that does type check. <code>#print instances</code> shows my instance too. Any ideas on how to debug why it can't find the instance?</p>

<a name="160608739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160608739" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160608739">Patrick Massot (Mar 12 2019 at 20:45)</a>:</h4>
<p>You can trace the instance search</p>

<a name="160608766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160608766" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160608766">dagit (Mar 12 2019 at 20:45)</a>:</h4>
<p>I was looking at the docs for a command to do that but I couldn't find it. Do you know the command?</p>

<a name="160608783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160608783" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160608783">Patrick Massot (Mar 12 2019 at 20:46)</a>:</h4>
<p>But showing your instance here would probably be quicker</p>

<a name="160608847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160608847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160608847">Patrick Massot (Mar 12 2019 at 20:46)</a>:</h4>
<p><a href="https://leanprover.github.io/theorem_proving_in_lean/type_classes.html#managing-type-class-inference" target="_blank" title="https://leanprover.github.io/theorem_proving_in_lean/type_classes.html#managing-type-class-inference">https://leanprover.github.io/theorem_proving_in_lean/type_classes.html#managing-type-class-inference</a></p>

<a name="160608862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160608862" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160608862">Patrick Massot (Mar 12 2019 at 20:46)</a>:</h4>
<p>You need to read that whole chapter anyway</p>

<a name="160608869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160608869" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160608869">Johannes Hölzl (Mar 12 2019 at 20:46)</a>:</h4>
<p>you can activate the tracing with <code>set_option trace.class_instances true</code></p>

<a name="160608892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160608892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160608892">Johannes Hölzl (Mar 12 2019 at 20:47)</a>:</h4>
<p>but it is a little bit hard to read</p>

<a name="160609445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160609445" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160609445">dagit (Mar 12 2019 at 20:52)</a>:</h4>
<p>Thanks for the links and the command. In the trace it considered the one I want it to use but discarded it because of a metavar.</p>

<a name="160609853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160609853" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160609853">Simon Hudon (Mar 12 2019 at 20:57)</a>:</h4>
<p>I think unless some of your type class parameters are marked as <code>out_param</code>, they can't be meta variables while doing type class resolution. It's a bit like functional dependencies in Haskell.</p>

<a name="160609971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160609971" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160609971">Kevin Buzzard (Mar 12 2019 at 20:58)</a>:</h4>
<p>Can you post a MWE?</p>

<a name="160613008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160613008" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160613008">dagit (Mar 12 2019 at 21:35)</a>:</h4>
<p>Sorry, I was gone at a meeting.</p>

<a name="160613025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160613025" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160613025">dagit (Mar 12 2019 at 21:35)</a>:</h4>
<p>I've tried to make a minimal example but so far I've failed on that front.</p>

<a name="160613150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160613150" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160613150">dagit (Mar 12 2019 at 21:36)</a>:</h4>
<p>The class is defined like this:</p>
<div class="codehilite"><pre><span></span>universes u v w

namespace sexpr

class is_atom (α : Type _) :=
(to_char_buffer : α → char_buffer)
(read {m} [char_reader string m] (n:ℕ) : m α)

end sexpr
</pre></div>

<a name="160613206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160613206" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160613206">dagit (Mar 12 2019 at 21:37)</a>:</h4>
<p>And there is a function like this:<br>
<code>def repr {α:Type} [h : is_atom α] : sexpr α -&gt; string := render buffer.to_string</code></p>

<a name="160613231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160613231" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160613231">dagit (Mar 12 2019 at 21:37)</a>:</h4>
<p>And it's when I try to use that <code>repr</code> function that lean fails to synthesize the instance</p>

<a name="160613660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160613660" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160613660">Simon Hudon (Mar 12 2019 at 21:43)</a>:</h4>
<p>What's the type of <code>render</code>?</p>

<a name="160613849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160613849" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160613849">dagit (Mar 12 2019 at 21:45)</a>:</h4>
<p>The type of render is a bit involved, here is a link to tha code: <a href="https://github.com/GaloisInc/reopt-vcg/blob/master/lean/deps/sexpr/src/galois/sexpr.lean#L51" target="_blank" title="https://github.com/GaloisInc/reopt-vcg/blob/master/lean/deps/sexpr/src/galois/sexpr.lean#L51">https://github.com/GaloisInc/reopt-vcg/blob/master/lean/deps/sexpr/src/galois/sexpr.lean#L51</a></p>

<a name="160614114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160614114" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160614114">Kevin Buzzard (Mar 12 2019 at 21:48)</a>:</h4>
<p>I guess it all looks OK to my inexpert eyes. So you have some explicit type alpha and some explicit instance <code>is_atom alpha</code>. Does <code>example : is_atom alpha := by apply_instance</code> work? </p>
<p>Independent of this, I have never seen <code>Type _</code> before. Does it change anything if you change it to <code>Type*</code>?</p>

<a name="160614119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160614119" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160614119">Simon Hudon (Mar 12 2019 at 21:48)</a>:</h4>
<p>try:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">repr</span> <span class="o">{</span><span class="n">α</span><span class="o">:</span><span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">h</span> <span class="o">:</span> <span class="n">is_atom</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">sexpr</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">string</span> <span class="o">:=</span> <span class="n">render</span> <span class="n">buffer</span><span class="bp">.</span><span class="n">to_string</span> <span class="n">x</span>
</pre></div>


<p>I think having an argument to force a choice for argument <code>α</code> might help with type class resolution</p>

<a name="160614152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160614152" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160614152">dagit (Mar 12 2019 at 21:49)</a>:</h4>
<p>Kevin, that <code>example</code> also fails to find the instance. I was trying something like that earlier today.</p>

<a name="160614159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160614159" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160614159">dagit (Mar 12 2019 at 21:49)</a>:</h4>
<p>I'll try that Simon and get back to you.</p>

<a name="160614165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160614165" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160614165">Simon Hudon (Mar 12 2019 at 21:50)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>

<a name="160614230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160614230" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160614230">dagit (Mar 12 2019 at 21:50)</a>:</h4>
<p>Hmm...same error message. I'll try what Kevin ask about with <code>Type*</code></p>

<a name="160614288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160614288" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160614288">dagit (Mar 12 2019 at 21:51)</a>:</h4>
<p>Wait, what is the syntax you wanted me to try? I don't think <code>Type*</code> is valid.</p>

<a name="160614359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160614359" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160614359">dagit (Mar 12 2019 at 21:52)</a>:</h4>
<p>Removing the <code>_</code> so that it's just <code>Type</code> doesn't resolve the issue either.</p>

<a name="160614409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160614409" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160614409">Kevin Buzzard (Mar 12 2019 at 21:54)</a>:</h4>
<p>I didn't know <code>(alpha : Type _)</code> was valid syntax. I am pretty sure <code>(alpha : Type*)</code> is. You're using Lean 3.4 right?</p>

<a name="160614458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160614458" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160614458">Kevin Buzzard (Mar 12 2019 at 21:54)</a>:</h4>
<p>If <code>by apply_instance</code> can't find the instance then this is a step in the right direction.</p>

<a name="160614469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160614469" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160614469">Kevin Buzzard (Mar 12 2019 at 21:54)</a>:</h4>
<p>That's just asking type class inference to look up the instance.</p>

<a name="160614479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160614479" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160614479">dagit (Mar 12 2019 at 21:54)</a>:</h4>
<p>3.4.1 to be precise</p>

<a name="160614484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160614484" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160614484">Kevin Buzzard (Mar 12 2019 at 21:54)</a>:</h4>
<p>That should be fine.</p>

<a name="160614527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160614527" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160614527">dagit (Mar 12 2019 at 21:55)</a>:</h4>
<p>oh, <code>Type*</code> without a space makes a difference?</p>

<a name="160614538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160614538" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160614538">Patrick Massot (Mar 12 2019 at 21:55)</a>:</h4>
<p>yes</p>

<a name="160614612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160614612" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160614612">dagit (Mar 12 2019 at 21:56)</a>:</h4>
<div class="codehilite"><pre><span></span>[class_instances]  class-instance resolution trace
[class_instances] (0) ?x_0 : is_atom sexp.atom := nat_expr.atom_is_atom
[class_instances] trying next solution, current solution has metavars
</pre></div>

<a name="160614638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160614638" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160614638">dagit (Mar 12 2019 at 21:57)</a>:</h4>
<p>Is there a way to learn more about the metavar?</p>

<a name="160615510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160615510" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160615510">dagit (Mar 12 2019 at 22:10)</a>:</h4>
<p>Ah, we solved it.</p>

<a name="160615519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160615519" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160615519">dagit (Mar 12 2019 at 22:10)</a>:</h4>
<p>It was a universe level metavar</p>

<a name="160615529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160615529" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160615529">dagit (Mar 12 2019 at 22:10)</a>:</h4>
<p>In the definition of <code>is_atom</code> we added that the <code>m</code> used by <code>read</code> needs to have type <code>Type -&gt; Type</code></p>

<a name="160615534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160615534" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160615534">dagit (Mar 12 2019 at 22:10)</a>:</h4>
<p>Now it works as expected in my code</p>

<a name="160615536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160615536" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160615536">dagit (Mar 12 2019 at 22:10)</a>:</h4>
<p>Thanks everyone</p>

<a name="160615557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160615557" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160615557">dagit (Mar 12 2019 at 22:11)</a>:</h4>
<p>Also, <code>set_option pp.all true</code> allowed us to see the universe level variable.</p>

<a name="160615946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160615946" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160615946">Simon Hudon (Mar 12 2019 at 22:17)</a>:</h4>
<p>That's always a fun challenge!</p>

<a name="160703120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160703120" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160703120">Joe Hendrix (Mar 13 2019 at 16:57)</a>:</h4>
<p>Thanks for the help.   I understand why Lean behaves the  way it does in this case, but I found the behavior sufficiently counterintuitive that I filed an issue: <a href="https://github.com/leanprover/lean/issues/1995" target="_blank" title="https://github.com/leanprover/lean/issues/1995">https://github.com/leanprover/lean/issues/1995</a></p>

<a name="160703546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160703546" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160703546">Kevin Buzzard (Mar 13 2019 at 17:02)</a>:</h4>
<p>Hey Joe, long time no see. I'm sure you're aware of this, but nobody is reading Lean 3 issues at the minute, as far as we know. Lean 3 has basically been abandoned. There was one Lean update to 3.4.2 which Sebastian Ullrich put together after a request from the community, but we think that's pretty much it now.</p>

<a name="160725740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160725740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160725740">Joe Hendrix (Mar 13 2019 at 20:48)</a>:</h4>
<p>Hi Kevin, I understand -- I only filed the issue as I don't see any rush on addressing this, but also didn't want to forget the problem either.  I'm hoping that Lean 4 could address this once the new core capabilities are stable.<br>
I'm still using Lean and work with Jason, but also need to focus on other projects.</p>

<a name="160726827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can%27t%20synthesize%20instance%3F/near/160726827" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/68216cantsynthesizeinstance.html#160726827">Kevin Buzzard (Mar 13 2019 at 21:01)</a>:</h4>
<p>These structures which introduce new universes in structure fields can be problematic. Mario urged me to avoid them in some Lean maths project I'm working on (the perfectoid project) and we actually had to do some work to work around it. Ultimately our definition <code>structure Spv (R : Type u)</code> contained a field which mentioned a new type <code>Gamma : Type u</code> (note: same universe as R) and then we had to make a custom constructor which took Gamma of type v and created another Gamma in the same universe as R. We were assured by Mario that this would avoid problems further down the line.</p>


{% endraw %}
