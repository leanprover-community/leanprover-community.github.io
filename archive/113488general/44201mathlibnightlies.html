---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/44201mathlibnightlies.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html">mathlib nightlies</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="188380473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188380473" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188380473">Patrick Massot (Feb 17 2020 at 14:08)</a>:</h4>
<p>Is there any reason why mathlib nightlies are pre-releases and not releases? It makes it harder to fetch them.</p>

<a name="188380624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188380624" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188380624">Patrick Massot (Feb 17 2020 at 14:11)</a>:</h4>
<p>This is done <a href="https://github.com/leanprover-community/mathlib/blob/master/scripts/deploy_nightly.sh#L66" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/scripts/deploy_nightly.sh#L66">here</a> at the very end of the line.</p>

<a name="188380748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188380748" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188380748">Patrick Massot (Feb 17 2020 at 14:13)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> ?</p>

<a name="188380811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188380811" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188380811">Patrick Massot (Feb 17 2020 at 14:14)</a>:</h4>
<p>Specifically, this choices makes it impossible to use <a href="https://developer.github.com/v3/repos/releases/#get-the-latest-release" target="_blank" title="https://developer.github.com/v3/repos/releases/#get-the-latest-release">https://developer.github.com/v3/repos/releases/#get-the-latest-release</a></p>

<a name="188380874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188380874" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188380874">Rob Lewis (Feb 17 2020 at 14:15)</a>:</h4>
<p>No idea. Would changing it require updates to cache-olean/update-mathlib too? I wouldn't be inclined to spend much time changing this. Instead we should figure out the infrastructure to store builds for each commit on our own server.</p>

<a name="188381015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188381015" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188381015">Patrick Massot (Feb 17 2020 at 14:16)</a>:</h4>
<p>No, this would have no impact on existing scripts. They loop through all releases, pre or not.</p>

<a name="188381073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188381073" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188381073">Patrick Massot (Feb 17 2020 at 14:18)</a>:</h4>
<p>Rob, do you have enough admin power to change the latest nightly into an actual release?</p>

<a name="188381326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188381326" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188381326">Rob Lewis (Feb 17 2020 at 14:20)</a>:</h4>
<p>Done, although I'm not sure what difference it makes...</p>

<a name="188381368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188381368" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188381368">Patrick Massot (Feb 17 2020 at 14:21)</a>:</h4>
<p>Awesome! I explained the difference a few messages ago (the one with a GitHub API link)</p>

<a name="188381416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188381416" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188381416">Rob Lewis (Feb 17 2020 at 14:21)</a>:</h4>
<p>Ah, sorry, missed that message.</p>

<a name="188381466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188381466" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188381466">Patrick Massot (Feb 17 2020 at 14:22)</a>:</h4>
<p>No problem.</p>

<a name="188381914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188381914" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188381914">Sebastian Ullrich (Feb 17 2020 at 14:27)</a>:</h4>
<p>I originally set up Lean nightlies as pre-releases because semantically it seemed more appropriate, and elan can't use the API anyway because of the rate limiting.</p>

<a name="188382008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188382008" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188382008">Patrick Massot (Feb 17 2020 at 14:28)</a>:</h4>
<p>Thanks for the explanation. My experience is the API rate limiting is annoying when developing tools, but ok when using them.</p>

<a name="188384199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188384199" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188384199">Sebastian Ullrich (Feb 17 2020 at 14:54)</a>:</h4>
<p>That depends on your expected number of users. It would not scale at all for elan.</p>

<a name="188384334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188384334" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188384334">Patrick Massot (Feb 17 2020 at 14:56)</a>:</h4>
<p>I don't understand what you mean. Each user gets a limit, right?</p>

<a name="188384592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188384592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188384592">Sebastian Ullrich (Feb 17 2020 at 14:59)</a>:</h4>
<p>Each public IP address gets a (very low) limit, afair. I think we had some issues from users/scripts sharing an IP address.</p>

<a name="188385204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188385204" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188385204">Patrick Massot (Feb 17 2020 at 15:06)</a>:</h4>
<p>I see that IP sharing could an issue in universities.</p>

<a name="188385230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188385230" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188385230">Patrick Massot (Feb 17 2020 at 15:07)</a>:</h4>
<p>Currently I guess this matters only for people working at VU.</p>

<a name="188385239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188385239" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188385239">Patrick Massot (Feb 17 2020 at 15:07)</a>:</h4>
<p>and maybe CMU.</p>

<a name="188385367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188385367" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188385367">Gabriel Ebner (Feb 17 2020 at 15:09)</a>:</h4>
<p>At VU (and TU Wien) every computer has their own public IP so this shouldn't be an issue.</p>

<a name="188385598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188385598" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188385598">Rob Lewis (Feb 17 2020 at 15:11)</a>:</h4>
<p>I disabled the cache-olean githook because I was getting rate limiting errors when switching around a bunch of branches. (Also it was kind of slow.) So it does come up in practice.</p>

<a name="188385657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188385657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188385657">Rob Lewis (Feb 17 2020 at 15:12)</a>:</h4>
<p>Again, we should probably start hosting these things ourselves pretty soon.</p>

<a name="188712874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188712874" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188712874">Johan Commelin (Feb 21 2020 at 08:43)</a>:</h4>
<p>What do we need of a host for the nightlies?</p>

<a name="188712879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188712879" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188712879">Johan Commelin (Feb 21 2020 at 08:43)</a>:</h4>
<p>The bandwidth won't be that much, right?</p>

<a name="188712884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188712884" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188712884">Johan Commelin (Feb 21 2020 at 08:43)</a>:</h4>
<p>I've got a server running in my basement, I'm fine with hosting stuff.</p>

<a name="188712931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188712931" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188712931">Mario Carneiro (Feb 21 2020 at 08:44)</a>:</h4>
<p>the main problem with basement servers is uptime</p>

<a name="188712944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188712944" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188712944">Johan Commelin (Feb 21 2020 at 08:44)</a>:</h4>
<p>Sure</p>

<a name="188712957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188712957" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188712957">Johan Commelin (Feb 21 2020 at 08:45)</a>:</h4>
<p>Currently I've been up for 250 days in a row...</p>

<a name="188712969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188712969" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188712969">Johan Commelin (Feb 21 2020 at 08:45)</a>:</h4>
<p>But I agree that it is fragile</p>

<a name="188712992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188712992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188712992">Mario Carneiro (Feb 21 2020 at 08:45)</a>:</h4>
<p>Maybe we can get a mirror setup and crowdsource several basement servers?</p>

<a name="188713074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188713074" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188713074">Johan Commelin (Feb 21 2020 at 08:46)</a>:</h4>
<p>Yup, I guess that would work</p>

<a name="188714018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188714018" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188714018">Patrick Massot (Feb 21 2020 at 09:05)</a>:</h4>
<p>I think Scott also said he could host stuff at some point.</p>

<a name="188714102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188714102" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188714102">Patrick Massot (Feb 21 2020 at 09:06)</a>:</h4>
<p>How could we have a mirror setup? Doesn't it require a server that is always responding?</p>

<a name="188714724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188714724" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188714724">Johan Commelin (Feb 21 2020 at 09:19)</a>:</h4>
<p>But supposedly that would be very lightweight</p>

<a name="188714732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188714732" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188714732">Johan Commelin (Feb 21 2020 at 09:19)</a>:</h4>
<p>You could host a static file with URLs on <code>github.io</code></p>

<a name="188714746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188714746" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188714746">Johan Commelin (Feb 21 2020 at 09:20)</a>:</h4>
<p>And clients can cache the URLs, if all of them fail, check on <code>github.io</code> what the latest URLs are</p>

<a name="188714795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188714795" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188714795">Johan Commelin (Feb 21 2020 at 09:20)</a>:</h4>
<p>Maybe I should say <em>hostname</em> instead of <em>URL</em></p>

<a name="188714811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188714811" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188714811">Johan Commelin (Feb 21 2020 at 09:20)</a>:</h4>
<p>And then we manually maintain that list of server hostnames on <code>github.io</code></p>

<a name="188715275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188715275" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188715275">Patrick Massot (Feb 21 2020 at 09:29)</a>:</h4>
<p>Maybe we could even use torrents.</p>

<a name="188715298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188715298" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188715298">Patrick Massot (Feb 21 2020 at 09:29)</a>:</h4>
<p>But we should let people who know about computers setup all this.</p>

<a name="188715911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188715911" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188715911">Rob Lewis (Feb 21 2020 at 09:38)</a>:</h4>
<p>Buying actual space/bandwidth on Azure/S3/whatever will cost pennies if anything at all. Jasmin said he's happy to use grant money to cover it, if the time cost of getting it reimbursed is less than the monetary cost, which remains to be seen.</p>

<a name="188715947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188715947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188715947">Patrick Massot (Feb 21 2020 at 09:39)</a>:</h4>
<p>How would that work?</p>

<a name="188715955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188715955" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188715955">Rob Lewis (Feb 21 2020 at 09:39)</a>:</h4>
<p>How would what work?</p>

<a name="188715963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188715963" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188715963">Patrick Massot (Feb 21 2020 at 09:39)</a>:</h4>
<p>Using Azure/S3/whatever.</p>

<a name="188715965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188715965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188715965">Rob Lewis (Feb 21 2020 at 09:39)</a>:</h4>
<p>We get server space and push olean caches there instead of to a random GitHub repository.</p>

<a name="188716018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188716018" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188716018">Rob Lewis (Feb 21 2020 at 09:40)</a>:</h4>
<p>cache-olean/update-mathlib get pointed there instead of to the nightly repos.</p>

<a name="188716024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188716024" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188716024">Patrick Massot (Feb 21 2020 at 09:40)</a>:</h4>
<p>Sounds easy.</p>

<a name="188716036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188716036" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188716036">Rob Lewis (Feb 21 2020 at 09:40)</a>:</h4>
<p>Indeed.</p>

<a name="188716054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188716054" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188716054">Patrick Massot (Feb 21 2020 at 09:41)</a>:</h4>
<p>What would the url look like?</p>

<a name="188716081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188716081" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188716081">Rob Lewis (Feb 21 2020 at 09:41)</a>:</h4>
<p>Dunno if there's a default. Worst case we buy <a href="http://leanprover-community.info" target="_blank" title="http://leanprover-community.info">leanprover-community.info</a> for â‚¬10.</p>

<a name="188716166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188716166" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188716166">Rob Lewis (Feb 21 2020 at 09:42)</a>:</h4>
<p>lean.<a href="https://en.wikipedia.org/wiki/GRS_Domains#gTLDs_managed" target="_blank" title="https://en.wikipedia.org/wiki/GRS_Domains#gTLDs_managed">loan</a>?</p>

<a name="188716359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188716359" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188716359">Rob Lewis (Feb 21 2020 at 09:46)</a>:</h4>
<p>I don't want something cheap. I want something we don't need to waste time maintaining. A network of basement servers with a URL cache on GitHub doesn't sound like that.</p>

<a name="188716412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188716412" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188716412">Patrick Massot (Feb 21 2020 at 09:46)</a>:</h4>
<p>See Johan? We need the computer experts to handle that.</p>

<a name="188723957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188723957" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188723957">Rob Lewis (Feb 21 2020 at 11:37)</a>:</h4>
<p>The computer expert is on the case. Everyone hold your breath for 90 minutes. <a href="https://github.com/leanprover-community/mathlib/runs/460051728" target="_blank" title="https://github.com/leanprover-community/mathlib/runs/460051728">https://github.com/leanprover-community/mathlib/runs/460051728</a></p>

<a name="188729825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188729825" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188729825">Patrick Massot (Feb 21 2020 at 13:19)</a>:</h4>
<p><code>RESPONSE Status: 403 This request is not authorized to perform this operation using this permission.</code> <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>

<a name="188729903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188729903" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188729903">Rob Lewis (Feb 21 2020 at 13:20)</a>:</h4>
<p>Arbitrary file size limit. <a href="https://github.com/leanprover-community/mathlib/runs/460227887?check_suite_focus=true" target="_blank" title="https://github.com/leanprover-community/mathlib/runs/460227887?check_suite_focus=true">https://github.com/leanprover-community/mathlib/runs/460227887?check_suite_focus=true</a></p>

<a name="188730157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188730157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188730157">Patrick Massot (Feb 21 2020 at 13:24)</a>:</h4>
<p>Are you sure? This message really sounds like a permission issue.</p>

<a name="188730203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188730203" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188730203">Gabriel Ebner (Feb 21 2020 at 13:25)</a>:</h4>
<p>I think what happens is the following: if the file is very small, it's uploaded in one go.  If the file is larger, then it is uploaded in two or more parts.  For security reasons, we're disallowing write operations (only create is allowed).  So appending is disallowed.</p>

<a name="188730207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188730207" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188730207">Rob Lewis (Feb 21 2020 at 13:25)</a>:</h4>
<p>I'm "sure," in that I reproduced and solved it locally with a flag to allow larger files.</p>

<a name="188730687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188730687" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188730687">Patrick Massot (Feb 21 2020 at 13:33)</a>:</h4>
<p>I knew this should be handled by people working in a CS department.</p>

<a name="188740862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188740862" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188740862">Patrick Massot (Feb 21 2020 at 15:19)</a>:</h4>
<p><code>RESPONSE Status: 403 Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature.</code></p>

<a name="188740877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188740877" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188740877">Patrick Massot (Feb 21 2020 at 15:19)</a>:</h4>
<p>I guess this is progress.</p>

<a name="188740885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188740885" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188740885">Rob Lewis (Feb 21 2020 at 15:19)</a>:</h4>
<p>Yes, I'm aware.</p>

<a name="188740937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188740937" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188740937">Patrick Massot (Feb 21 2020 at 15:19)</a>:</h4>
<p>Maybe we need a toy project to test this without waiting 90 minutes between each try.</p>

<a name="188747833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188747833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188747833">Rob Lewis (Feb 21 2020 at 16:24)</a>:</h4>
<p><a href="https://oleanstorage.blob.core.windows.net/mathlib/e50512b4f446d928c6911f0dfd49f26ff5801c25.tar.gz" target="_blank" title="https://oleanstorage.blob.core.windows.net/mathlib/e50512b4f446d928c6911f0dfd49f26ff5801c25.tar.gz">download a 21mb mathlib build here</a></p>

<a name="188747884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188747884" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188747884">Rob Lewis (Feb 21 2020 at 16:24)</a>:</h4>
<p>You were wondering about the url? Nothing could be better than <code>oleanstorage.blob.core.windows.net/mathlib</code>!</p>

<a name="188870168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188870168" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188870168">Rob Lewis (Feb 23 2020 at 13:55)</a>:</h4>
<p>In the 27 hours since this landed, we've accumulated 900mb of olean caches.</p>

<a name="188870211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188870211" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188870211">Patrick Massot (Feb 23 2020 at 13:56)</a>:</h4>
<p>We should probably decide a conservation policy pretty quickly.</p>

<a name="188870213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188870213" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188870213">Patrick Massot (Feb 23 2020 at 13:56)</a>:</h4>
<p>And implement it.</p>

<a name="188870245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188870245" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188870245">Rob Lewis (Feb 23 2020 at 13:58)</a>:</h4>
<p>I don't think there's a huge hurry. The policy I have in mind is to keep branch builds for a month and master builds forever. So we have a month to implement that before it will matter.</p>

<a name="188870277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188870277" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188870277">Rob Lewis (Feb 23 2020 at 13:58)</a>:</h4>
<p>Maybe more helpful: should we try to cancel artifact uploads from non-master branches if another commit is added to that branch before the build finishes?</p>

<a name="188870278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188870278" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188870278">Patrick Massot (Feb 23 2020 at 13:58)</a>:</h4>
<p>Won't we hit the disk quota in one week instead of one month?</p>

<a name="188870288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188870288" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188870288">Rob Lewis (Feb 23 2020 at 13:59)</a>:</h4>
<p>The free account comes with $170 credit. It'll be a while before we burn through that.</p>

<a name="188870291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188870291" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188870291">Rob Lewis (Feb 23 2020 at 13:59)</a>:</h4>
<p>Even if we go over the disk quota.</p>

<a name="188870328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188870328" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188870328">Patrick Massot (Feb 23 2020 at 14:00)</a>:</h4>
<p>Does it start eating up that credit automatically as soon as we go over quota?</p>

<a name="188870345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188870345" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188870345">Rob Lewis (Feb 23 2020 at 14:00)</a>:</h4>
<p>I think we should get the infrastructure working, see what the usage looks like, and then figure out how we're paying long term.</p>

<a name="188870349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188870349" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188870349">Rob Lewis (Feb 23 2020 at 14:00)</a>:</h4>
<p>We'll find out!</p>

<a name="188870530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188870530" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188870530">Rob Lewis (Feb 23 2020 at 14:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110596">Rob Lewis</span> <a href="#narrow/stream/113488-general/topic/mathlib.20nightlies/near/188870277" title="#narrow/stream/113488-general/topic/mathlib.20nightlies/near/188870277">said</a>:</p>
<blockquote>
<p>Maybe more helpful: should we try to cancel artifact uploads from non-master branches if another commit is added to that branch before the build finishes?</p>
</blockquote>
<p>This might actually be the most useful move to save space. A lot of very useless archives will be stored by people updating a PR incrementally, like by accepting suggestions from comments. Is there a situation where someone would need to check out those oleans?</p>

<a name="188870540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188870540" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188870540">Patrick Massot (Feb 23 2020 at 14:07)</a>:</h4>
<p>I don't think we would ever use those oleans.</p>

<a name="188875789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20nightlies/near/188875789" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/44201mathlibnightlies.html#188875789">Gabriel Ebner (Feb 23 2020 at 16:59)</a>:</h4>
<p>In my current usage I don't need these oleans either.  I typically push to a branch, and then do a <code>curl https://oleanstorage.blob.core.windows.net/mathlib/$(git rev-parse HEAD).tar.gz | tar xz</code> once the build is finished.  I don't need anything except the oleans for the latest revision.  This might be different if multiple people are working on a branch.</p>


{% endraw %}

{% include archive_update.html %}