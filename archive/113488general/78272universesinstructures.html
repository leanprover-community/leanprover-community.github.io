---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/78272universesinstructures.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html">universes in structures</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="162501867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162501867" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162501867">Kevin Buzzard (Apr 04 2019 at 07:36)</a>:</h4>
<p>I defined a presheaf like this:</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">presheaf_of_types</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span>
<span class="o">(</span><span class="n">res</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">U</span> <span class="n">V</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">V</span> <span class="err">⊆</span> <span class="n">U</span><span class="o">),</span> <span class="n">F</span> <span class="n">U</span> <span class="bp">→</span> <span class="n">F</span> <span class="n">V</span><span class="o">)</span>
<span class="o">(</span><span class="n">id</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">F</span> <span class="n">U</span><span class="o">),</span> <span class="n">res</span> <span class="o">(</span><span class="n">le_refl</span> <span class="n">U</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">comp</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">U</span> <span class="n">V</span> <span class="n">W</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">}</span> <span class="o">(</span><span class="n">hUV</span> <span class="o">:</span> <span class="n">V</span> <span class="err">⊆</span> <span class="n">U</span><span class="o">)</span> <span class="o">(</span><span class="n">hVW</span> <span class="o">:</span> <span class="n">W</span> <span class="err">⊆</span> <span class="n">V</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">F</span> <span class="n">U</span><span class="o">),</span>
  <span class="n">res</span> <span class="n">hVW</span> <span class="o">(</span><span class="n">res</span> <span class="n">hUV</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">res</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">subset</span><span class="bp">.</span><span class="n">trans</span> <span class="n">hVW</span> <span class="n">hUV</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span>
</pre></div>


<p>I had to make a call about the target of <code>presheaf_of_types.F</code>. I went for the same universe as X, because I have this vaguely uncomfortable feeling about having universes in my structures which are not extractable from the input data.</p>
<p>I now realise that I can't define pushforwards of presheaves along continuous maps, at least continuous maps X -&gt; Y where X is in universe u1 and Y in universe u2.</p>
<p>There are lots of solutions to this. </p>
<p>1) Let F take values in universe v (and then feed in v manually later)<br>
2) Restrict the theory to continuous maps X -&gt; Y living in universe u<br>
3) Openly question this whole universe polymorphism stuff and let everything take values in Type.</p>
<p>I developed a bunch of the schemes repo over Type and never had any problems.</p>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> any comments?</p>

<a name="162501889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162501889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162501889">Kevin Buzzard (Apr 04 2019 at 07:36)</a>:</h4>
<p>I should stress that I spent 25 years doing research whilst living in Type and I never had any problems.</p>

<a name="162501985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162501985" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162501985">Mario Carneiro (Apr 04 2019 at 07:38)</a>:</h4>
<p>I will tentatively recommend that you restrict the theory to continuous maps in Type u</p>

<a name="162501998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162501998" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162501998">Kevin Buzzard (Apr 04 2019 at 07:38)</a>:</h4>
<p>If I bundle everything, and I'm going to try, then I feel like I'll be spending my life feeding universes into things anyway. It seems to me that (2) is a cop-out, I am either polymorphic or I am not, and (2) seems like a half way house that will satisfy nobody. I am unclear about the dangers of (1). Is it simply that I have to just put {u v} in a few places?</p>

<a name="162501999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162501999" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162501999">Mario Carneiro (Apr 04 2019 at 07:38)</a>:</h4>
<p>and we will see if an issue arises later</p>

<a name="162502014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502014" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502014">Kevin Buzzard (Apr 04 2019 at 07:39)</a>:</h4>
<p>So you are (1)-averse?</p>

<a name="162502020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502020">Mario Carneiro (Apr 04 2019 at 07:39)</a>:</h4>
<p>(1) will cause you to put .{u v} in lots of places</p>

<a name="162502022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502022">Kevin Buzzard (Apr 04 2019 at 07:39)</a>:</h4>
<p>Keep in mind that Scott convinced me on the equiv thread in #maths to try bundling.</p>

<a name="162502024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502024" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502024">Mario Carneiro (Apr 04 2019 at 07:39)</a>:</h4>
<p>I think the friction isn't worth it to you</p>

<a name="162502081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502081" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502081">Kevin Buzzard (Apr 04 2019 at 07:40)</a>:</h4>
<p>If the friction isn't worth it then you're telling me I should use (3)</p>

<a name="162502093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502093" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502093">Mario Carneiro (Apr 04 2019 at 07:40)</a>:</h4>
<p>(2) is about as good as (3) in terms of "don't worry about it" ism</p>

<a name="162502094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502094" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502094">Kevin Buzzard (Apr 04 2019 at 07:40)</a>:</h4>
<p>Or are you saying the philosophy is that I should be as polymorphic as possible whilst avoiding at all costs the pain of having to annotate my universes?</p>

<a name="162502115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502115">Mario Carneiro (Apr 04 2019 at 07:41)</a>:</h4>
<p>There are still ways to recover maps between different universes with (2), but they are more cumbersome</p>

<a name="162502164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502164" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502164">Kevin Buzzard (Apr 04 2019 at 07:42)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> if I were approaching these definitions with bundling and categories in mind (I want to define an equiv of presheaves of types) then what would your choice be?</p>

<a name="162502169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502169" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502169">Mario Carneiro (Apr 04 2019 at 07:42)</a>:</h4>
<p>and that seems like a reasonable tradeoff: make additional universes cumbersome in order to make the common case nicer</p>

<a name="162502174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502174" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502174">Mario Carneiro (Apr 04 2019 at 07:42)</a>:</h4>
<p>if indeed everything is in Type eventually then this shouldn't ever happen anyway</p>

<a name="162502185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502185" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502185">Kevin Buzzard (Apr 04 2019 at 07:42)</a>:</h4>
<p>Grothendieck would have just observed that (1) and (2) were the same because you can just move to a bigger universe</p>

<a name="162502195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502195" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502195">Mario Carneiro (Apr 04 2019 at 07:43)</a>:</h4>
<p>That's what I mean</p>

<a name="162502196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502196" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502196">Kevin Buzzard (Apr 04 2019 at 07:43)</a>:</h4>
<p>but I have no experience of the pain that this would involve in Lean</p>

<a name="162502197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502197" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502197">Kevin Buzzard (Apr 04 2019 at 07:43)</a>:</h4>
<p>and I am pain averse</p>

<a name="162502199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502199" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502199">Mario Carneiro (Apr 04 2019 at 07:43)</a>:</h4>
<p>you have to use <code>ulift</code></p>

<a name="162502206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502206" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502206">Kevin Buzzard (Apr 04 2019 at 07:43)</a>:</h4>
<p>ulift is a closed book to me</p>

<a name="162502214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502214" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502214">Mario Carneiro (Apr 04 2019 at 07:43)</a>:</h4>
<p>it's a universe shifting function that preserves all structure</p>

<a name="162502216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502216" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502216">Kevin Buzzard (Apr 04 2019 at 07:43)</a>:</h4>
<p>I thought Reid's comment was telling in the other thread -- he stuck to Type because he could not be bothered to ulift the reals</p>

<a name="162502267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502267" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502267">Kevin Buzzard (Apr 04 2019 at 07:44)</a>:</h4>
<p>is it canonical?</p>

<a name="162502268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502268" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502268">Mario Carneiro (Apr 04 2019 at 07:44)</a>:</h4>
<p>ah, there is that</p>

<a name="162502274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502274" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502274">Kevin Buzzard (Apr 04 2019 at 07:44)</a>:</h4>
<p>Fortunately the valuations I have on my stalks are not real-valued</p>

<a name="162502275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502275" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502275">Mario Carneiro (Apr 04 2019 at 07:44)</a>:</h4>
<p>sure it's canonical</p>

<a name="162502286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502286" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502286">Mario Carneiro (Apr 04 2019 at 07:44)</a>:</h4>
<p>it's like the canonical injection map</p>

<a name="162502287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502287">Kevin Buzzard (Apr 04 2019 at 07:44)</a>:</h4>
<p>they are taking values in a totally ordered monoid</p>

<a name="162502293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502293" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502293">Kevin Buzzard (Apr 04 2019 at 07:45)</a>:</h4>
<p>I love that I managed to get you to say canonical</p>

<a name="162502298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502298" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502298">Mario Carneiro (Apr 04 2019 at 07:45)</a>:</h4>
<p>in ZFC it is just inclusion</p>

<a name="162502304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502304" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502304">Kevin Buzzard (Apr 04 2019 at 07:45)</a>:</h4>
<p>when neither of us know what it means</p>

<a name="162502313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502313" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502313">Kevin Buzzard (Apr 04 2019 at 07:45)</a>:</h4>
<p>that's just how it works in maths too</p>

<a name="162502318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502318">Mario Carneiro (Apr 04 2019 at 07:45)</a>:</h4>
<p>it's canonical in lean because it's a function :P</p>

<a name="162502323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502323" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502323">Kevin Buzzard (Apr 04 2019 at 07:45)</a>:</h4>
<p>we sagely nod and agree that it's canonical</p>

<a name="162502369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502369" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502369">Kevin Buzzard (Apr 04 2019 at 07:46)</a>:</h4>
<p>is it functorial?</p>

<a name="162502376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502376" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502376">Mario Carneiro (Apr 04 2019 at 07:46)</a>:</h4>
<p>yep, it is all the things</p>

<a name="162502393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502393">Kevin Buzzard (Apr 04 2019 at 07:46)</a>:</h4>
<p>I don't know why people are so afraid of it then</p>

<a name="162502396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502396">Mario Carneiro (Apr 04 2019 at 07:46)</a>:</h4>
<p>it's also a thing</p>

<a name="162502407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502407" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502407">Mario Carneiro (Apr 04 2019 at 07:47)</a>:</h4>
<p>which is one more than no thing</p>

<a name="162502409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502409" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502409">Kevin Buzzard (Apr 04 2019 at 07:47)</a>:</h4>
<p>You can look forward to the "ulift hell" thread</p>

<a name="162502429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502429" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502429">Kevin Buzzard (Apr 04 2019 at 07:47)</a>:</h4>
<p>Thanks for the comments. Scott, I'd be interested to hear yours.</p>

<a name="162502530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502530" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502530">Kevin Buzzard (Apr 04 2019 at 07:49)</a>:</h4>
<p>I guess one final observation is that I have now coded up presheaves of types twice (once for schemes, once for this), Ramon coded it up for Schemes Reloaded, Johan did it, probably Scott did it, and somehow it's still not in mathlib. Maybe it's time someone PR'ed it...</p>

<a name="162523639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162523639" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162523639">Scott Morrison (Apr 04 2019 at 13:17)</a>:</h4>
<p>Ok, per request, I PR'd <a href="https://github.com/leanprover-community/mathlib/pull/886" target="_blank" title="https://github.com/leanprover-community/mathlib/pull/886">one version of (bundled) presheaves</a>. The definition is I hope inarguably the correct one. :-)</p>

<a name="162523657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162523657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162523657">Scott Morrison (Apr 04 2019 at 13:17)</a>:</h4>
<p>The essential definitions are:</p>
<div class="codehilite"><pre><span></span>structure Presheaf :=
(X : Top.{v})
(𝒪 : (opens X)ᵒᵖ ⥤ C)

structure Presheaf_hom (F G : Presheaf.{v} C) :=
(f : F.X ⟶ G.X)
(c : G.𝒪 ⟹ ((opens.map f).op ⋙ F.𝒪))
</pre></div>


<div class="codehilite"><pre><span></span>instance category_of_presheaves : category (Presheaf.{v} C) :=
{ hom := Presheaf_hom,
  ... }
</pre></div>


<p>and</p>
<div class="codehilite"><pre><span></span>def functor.map_presheaf (F : C ⥤ D) : Presheaf.{v} C ⥤ Presheaf.{v} D := ...
</pre></div>

<a name="162523746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162523746" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162523746">Scott Morrison (Apr 04 2019 at 13:18)</a>:</h4>
<p>There are still some things I'm unhappy with --- some places I need to use <code>erw</code>, where <code>simp</code> should suffice.</p>

<a name="162523780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162523780" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162523780">Johan Commelin (Apr 04 2019 at 13:19)</a>:</h4>
<p>Scott, I think what we are probably also interested in is the category of presheaves on a space <code>X</code>.</p>

<a name="162523794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162523794" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162523794">Johan Commelin (Apr 04 2019 at 13:19)</a>:</h4>
<p>I.e. unbundled presheaves on bundled spaces.</p>

<a name="162523806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162523806" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162523806">Johan Commelin (Apr 04 2019 at 13:19)</a>:</h4>
<p>Of course this is just a functor category...</p>

<a name="162523824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162523824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162523824">Johan Commelin (Apr 04 2019 at 13:19)</a>:</h4>
<p>But we might want some specialised coercions/simp lemmas</p>

<a name="162524028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162524028" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162524028">Scott Morrison (Apr 04 2019 at 13:21)</a>:</h4>
<p>Hmm... so what do you want besides <code>def presheaf (X : Top) := (opens X)^op \func C</code>?</p>

<a name="162524137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162524137" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162524137">Johan Commelin (Apr 04 2019 at 13:22)</a>:</h4>
<p>The push-forward functor should be easily accessible</p>

<a name="162524210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162524210" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162524210">Johan Commelin (Apr 04 2019 at 13:23)</a>:</h4>
<p>And maybe for terms of type <code>presheaf</code> we can actually make <code>F.obj</code> a coercion?</p>

<a name="162524225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162524225" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162524225">Johan Commelin (Apr 04 2019 at 13:23)</a>:</h4>
<p>I didn't experiment with it though</p>

<a name="162524268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162524268" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162524268">Johan Commelin (Apr 04 2019 at 13:24)</a>:</h4>
<p>Need to run to catch a train</p>

<a name="162530083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162530083" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162530083">Reid Barton (Apr 04 2019 at 14:27)</a>:</h4>
<p>I actually don't see what this particular bundled <code>Presheaf</code> is useful for, other than as an example</p>

<a name="162530196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162530196" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162530196">Reid Barton (Apr 04 2019 at 14:28)</a>:</h4>
<p>For example, I don't see how you could build "<code>Sheaf</code>" out of "<code>Presheaf</code>"</p>

<a name="162530848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162530848" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162530848">Reid Barton (Apr 04 2019 at 14:34)</a>:</h4>
<p>(Also, "presheaf" for me just means a (contravariant) functor from some category to sets. So there isn't really anything to define for presheaves that we don't have already.)</p>

<a name="162531042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162531042" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162531042">Reid Barton (Apr 04 2019 at 14:36)</a>:</h4>
<p>It might make sense though to define pseudofunctors to categories and the Grothendieck construction</p>

<a name="162531170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162531170" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162531170">Reid Barton (Apr 04 2019 at 14:38)</a>:</h4>
<p>maybe this opens too many cans of worms at once</p>

<a name="162555613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162555613" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162555613">Kevin Buzzard (Apr 04 2019 at 18:45)</a>:</h4>
<p>I wrote an unbundled version of presheaves of types.</p>

<a name="162555711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162555711" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162555711">Kevin Buzzard (Apr 04 2019 at 18:46)</a>:</h4>
<p><a href="https://gist.github.com/kbuzzard/567b88f2afae5730016c392ec2efc851" target="_blank" title="https://gist.github.com/kbuzzard/567b88f2afae5730016c392ec2efc851">https://gist.github.com/kbuzzard/567b88f2afae5730016c392ec2efc851</a></p>

<a name="162555757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162555757" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162555757">Kevin Buzzard (Apr 04 2019 at 18:47)</a>:</h4>
<p>I needed the notion of an <code>equiv</code> for them. But I was not convinced I had got it right until I had proved refl, symm and trans. They took me some time. I had to deal with heqs.</p>

<a name="162556436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162556436" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162556436">Kevin Buzzard (Apr 04 2019 at 18:53)</a>:</h4>
<p>My understanding is that Scott has done something less general than what I need. I need the notion of an equiv of pairs (X,F), i.e. two possibly distinct topological spaces equipped with presheaves.</p>

<a name="162556574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162556574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162556574">Mario Carneiro (Apr 04 2019 at 18:54)</a>:</h4>
<p>heqs sounds bad, where did they come up?</p>

<a name="162556767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162556767" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162556767">Kevin Buzzard (Apr 04 2019 at 18:56)</a>:</h4>
<p>In fact Scott it makes sense to tell you <em>exactly</em> what I need, just out of interest. I need the notion of an isomorphism of the following data: a topological space X, a presheaf of topological rings on X, and equivalence class of valuations on the stalks (where the direct limits are the limit of a direct system of rings only, not topological rings). I know how to do this. It's just a case of working out what is the best way to do this.</p>
<p>I have never used the category theory library. I did equivs of data (X,F) with X a top space and F a presheaf on X today so I know it can all be done. I went with Mario's annoying solution to the universe issue by staying in one universe for everything (X : type u and F U : type u).</p>

<a name="162556778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162556778" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162556778">Kevin Buzzard (Apr 04 2019 at 18:56)</a>:</h4>
<p>heqs came up because I was changing X.</p>

<a name="162556800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162556800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162556800">Kevin Buzzard (Apr 04 2019 at 18:57)</a>:</h4>
<p>I instantly turned every heq into an eq</p>

<a name="162556851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162556851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162556851">Kevin Buzzard (Apr 04 2019 at 18:57)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">structure</span><span class="w"> </span><span class="n">f_map</span><span class="w"> </span><span class="p">(</span><span class="err">𝒢</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">presheaf_of_typesU</span><span class="w"> </span><span class="nc">Y</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="err">ℱ</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">presheaf_of_typesU</span><span class="w"> </span><span class="nc">X</span><span class="p">)</span><span class="w"> </span><span class="o">:=</span><span class="w"></span>
<span class="p">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nc">X</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="nc">Y</span><span class="p">)</span><span class="w"></span>
<span class="p">[</span><span class="n">hf</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">continuous</span><span class="w"> </span><span class="n">f</span><span class="p">]</span><span class="w"></span>
<span class="p">(</span><span class="err">ρ</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">∀</span><span class="w"> </span><span class="nc">V</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">opens</span><span class="w"> </span><span class="nc">Y</span><span class="p">,</span><span class="w"> </span><span class="err">𝒢</span><span class="o">.</span><span class="nc">F</span><span class="w"> </span><span class="nc">V</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="err">ℱ</span><span class="o">.</span><span class="nc">F</span><span class="w"> </span><span class="err">⟨</span><span class="n">f</span><span class="w"> </span><span class="err">⁻¹&#39;</span><span class="w"> </span><span class="nc">V</span><span class="p">,</span><span class="w"> </span><span class="n">hf</span><span class="w"> </span><span class="o">_</span><span class="w"> </span><span class="nc">V</span><span class="o">.</span><span class="mi">2</span><span class="err">⟩</span><span class="p">)</span><span class="w"></span>
<span class="p">(</span><span class="n">nat</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">∀</span><span class="w"> </span><span class="nc">U</span><span class="w"> </span><span class="nc">V</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">opens</span><span class="w"> </span><span class="nc">Y</span><span class="p">,</span><span class="w"> </span><span class="err">∀</span><span class="w"> </span><span class="n">hUV</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nc">V</span><span class="w"> </span><span class="err">⊆</span><span class="w"> </span><span class="nc">U</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="err">∀</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">𝒢</span><span class="o">.</span><span class="nc">F</span><span class="w"> </span><span class="nc">U</span><span class="p">,</span><span class="w"> </span><span class="err">ρ</span><span class="w"> </span><span class="nc">V</span><span class="w"> </span><span class="p">(</span><span class="err">𝒢</span><span class="o">.</span><span class="n">res</span><span class="w"> </span><span class="n">hUV</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">ℱ</span><span class="o">.</span><span class="n">res</span><span class="w"> </span><span class="p">(</span><span class="n">by</span><span class="w"> </span><span class="p">{</span><span class="n">intros</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">hx</span><span class="p">,</span><span class="w"> </span><span class="n">exact</span><span class="w"> </span><span class="n">hUV</span><span class="w"> </span><span class="n">hx</span><span class="p">})</span><span class="w"> </span><span class="p">(</span><span class="err">ρ</span><span class="w"> </span><span class="nc">U</span><span class="w"> </span><span class="n">x</span><span class="p">))</span><span class="w"></span>
</pre></div>


<p>That's a definition of a morphism in my category</p>

<a name="162556944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162556944" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162556944">Kevin Buzzard (Apr 04 2019 at 18:58)</a>:</h4>
<p>But when defining equivs I wanted to say that two morphisms were equal, and this involved saying the f's were equal and then the rho's were ==</p>

<a name="162557059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557059" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557059">Kevin Buzzard (Apr 04 2019 at 18:59)</a>:</h4>
<p>rho is not a good notation, it's not a restriction, rho is the map between the presheaves. f is the map between the spaces and rho, soon to be renamed, is the map between the presheaves. I think heq is inevitable here. But I managed to battle all of them off.</p>

<a name="162557662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557662">Kevin Buzzard (Apr 04 2019 at 19:04)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">ext</span> <span class="o">(</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="n">f_map</span> <span class="err">𝒢</span> <span class="n">ℱ</span><span class="o">)</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">α</span><span class="bp">.</span><span class="n">f</span> <span class="bp">=</span> <span class="n">β</span><span class="bp">.</span><span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">hρ</span> <span class="o">:</span> <span class="n">α</span><span class="bp">.</span><span class="n">ρ</span> <span class="bp">==</span> <span class="n">β</span><span class="bp">.</span><span class="n">ρ</span><span class="o">)</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">=</span> <span class="n">β</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="n">α</span> <span class="k">with</span> <span class="n">αf</span> <span class="n">αhf</span> <span class="n">αρ</span> <span class="n">αnat</span><span class="o">,</span> <span class="n">cases</span> <span class="n">β</span> <span class="k">with</span> <span class="n">βf</span> <span class="n">βhf</span> <span class="n">βρ</span> <span class="n">βnat</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">presheaf_of_typesU</span><span class="bp">.</span><span class="n">f_map</span><span class="bp">.</span><span class="n">mk</span><span class="bp">.</span><span class="n">inj_eq</span><span class="o">,</span>
  <span class="n">exact</span> <span class="bp">⟨</span><span class="n">hf</span><span class="o">,</span> <span class="n">hρ</span><span class="bp">⟩</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>That was what Lean gave me, so I went with it.</p>

<a name="162557713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557713">Mario Carneiro (Apr 04 2019 at 19:05)</a>:</h4>
<p>first observation: this should be a definition</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">opens</span><span class="bp">.</span><span class="n">comap</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">α</span> <span class="o">:=</span>
<span class="bp">⟨</span><span class="n">f</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="n">U</span><span class="o">,</span> <span class="n">hf</span> <span class="bp">_</span> <span class="n">U</span><span class="bp">.</span><span class="mi">2</span><span class="bp">⟩</span>
</pre></div>

<a name="162557735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557735">Kevin Buzzard (Apr 04 2019 at 19:05)</a>:</h4>
<p>Yeah, I couldn't find that!</p>

<a name="162557812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557812" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557812">Kevin Buzzard (Apr 04 2019 at 19:06)</a>:</h4>
<p>I read all of topology.opens :-)</p>

<a name="162557838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557838" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557838">Mario Carneiro (Apr 04 2019 at 19:06)</a>:</h4>
<p>It's not very complete, I think it's just what is needed to define the category</p>

<a name="162557855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557855" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557855">Mario Carneiro (Apr 04 2019 at 19:06)</a>:</h4>
<p>you may also want to bundle continuous maps for this purpose</p>

<a name="162557907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557907">Kevin Buzzard (Apr 04 2019 at 19:07)</a>:</h4>
<p>I'm still not very good at understanding sentences with the word <code>bundle</code> in.</p>

<a name="162557971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557971" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557971">Kevin Buzzard (Apr 04 2019 at 19:07)</a>:</h4>
<p>Oh -- you mean <code>continuous_map X Y</code>?</p>

<a name="162557980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557980">Mario Carneiro (Apr 04 2019 at 19:07)</a>:</h4>
<p>yes</p>

<a name="162558222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162558222" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162558222">Kevin Buzzard (Apr 04 2019 at 19:10)</a>:</h4>
<p>I am very interested in hearing the way Scott would handle this stuff. My understanding of his PR is that he has not yet defined the morphisms I need -- <code>f_map</code>. They caused me some pain, I don't know whether they will cause him more or less pain, or whether he can use my work.</p>

<a name="162559483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162559483" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162559483">Kevin Buzzard (Apr 04 2019 at 19:24)</a>:</h4>
<blockquote>
<p>first observation: this should be a definition</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">opens</span><span class="bp">.</span><span class="n">comap</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">α</span> <span class="o">:=</span>
<span class="bp">⟨</span><span class="n">f</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="n">U</span><span class="o">,</span> <span class="n">hf</span> <span class="bp">_</span> <span class="n">U</span><span class="bp">.</span><span class="mi">2</span><span class="bp">⟩</span>
</pre></div>


</blockquote>
<p>Is <code>{f : α → β}</code> ok here? It was only after reading your code that I discovered that <code>continuous</code> wasn't a typeclass :-)</p>

<a name="162559577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162559577" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162559577">Mario Carneiro (Apr 04 2019 at 19:25)</a>:</h4>
<p>It can be, but you end up with unhelpful <code>opens.comap _ U</code> terms in your goal, like <code>classical.some _</code></p>

<a name="162559715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162559715" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162559715">Mario Carneiro (Apr 04 2019 at 19:27)</a>:</h4>
<p>also <code>opens</code> seems to be a bit indecisive about whether to use <code>\sub</code> or <code>\le</code> for subsets</p>

<a name="162559728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162559728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162559728">Kevin Buzzard (Apr 04 2019 at 19:27)</a>:</h4>
<p>And why is this called <code>opens.comap</code> (which I assume is topological_space.opens.comap) and not <code>continuous.comap</code>? I am still not very good at naming.</p>

<a name="162559857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162559857" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162559857">Mario Carneiro (Apr 04 2019 at 19:29)</a>:</h4>
<p>You can use projection notation either way, but the distinguishing feature is that <code>opens</code> is the thing being comapped. You aren't going to comap <code>opens</code> with something other than a continuous function, but continuous functions can comap other things</p>

<a name="162559985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162559985" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162559985">Kevin Buzzard (Apr 04 2019 at 19:30)</a>:</h4>
<p>I make your change and I now have to fix errors like</p>
<div class="codehilite"><pre><span></span>type mismatch at application
  ℱ.res _ x
term
  x
has type
  ℱ.F V
but is expected to have type
  ℱ.F (topological_space.opens.comap (λ (x : X), x) continuous_id V)
</pre></div>


<p>I guess this is to be expected.</p>

<a name="162560159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162560159" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162560159">Kevin Buzzard (Apr 04 2019 at 19:32)</a>:</h4>
<p>Lovely lines such as </p>
<div class="codehilite"><pre><span></span>    change ℱ.res _ (ℱ.res _ (ℱ.res _ x)) = ℱ.res _ x,
</pre></div>


<p>now don't compile at all :-(</p>

<a name="162561187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162561187" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162561187">Kevin Buzzard (Apr 04 2019 at 19:44)</a>:</h4>
<p>no that's a complete lie, I fixed the first error and all the other errors magically fixed themselves. I've got it working :D</p>

<a name="162561443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162561443" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162561443">Kevin Buzzard (Apr 04 2019 at 19:47)</a>:</h4>
<p>Revised version at <a href="https://gist.github.com/kbuzzard/567b88f2afae5730016c392ec2efc851" target="_blank" title="https://gist.github.com/kbuzzard/567b88f2afae5730016c392ec2efc851">https://gist.github.com/kbuzzard/567b88f2afae5730016c392ec2efc851</a></p>

<a name="162561475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162561475" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162561475">Kevin Buzzard (Apr 04 2019 at 19:47)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> would using category theory stuff make any of this easier?</p>

<a name="162561504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162561504" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162561504">Kevin Buzzard (Apr 04 2019 at 19:47)</a>:</h4>
<p>Conversely, could I use this to make a bundled version of presheaves of types easier to implement? I think what I have that Scott doesn't have is that I am allowed to change my base with morphisms</p>

<a name="162562808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162562808" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162562808">Mario Carneiro (Apr 04 2019 at 20:02)</a>:</h4>
<p>I'm working on a more complete working-out of the proposal</p>

<a name="162562869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162562869" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162562869">Mario Carneiro (Apr 04 2019 at 20:03)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">namespace</span> <span class="n">topological_space</span><span class="bp">.</span><span class="n">opens</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kn">variables</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">γ</span><span class="o">]</span>

<span class="n">def</span> <span class="n">comap</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">α</span> <span class="o">:=</span>
<span class="bp">⟨</span><span class="n">f</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="n">U</span><span class="o">,</span> <span class="n">hf</span> <span class="bp">_</span> <span class="n">U</span><span class="bp">.</span><span class="mi">2</span><span class="bp">⟩</span>

<span class="kn">theorem</span> <span class="n">comap_id</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">comap</span> <span class="n">id</span> <span class="n">continuous_id</span> <span class="n">U</span> <span class="bp">=</span> <span class="n">U</span> <span class="o">:=</span> <span class="n">ext</span> <span class="n">rfl</span>

<span class="kn">theorem</span> <span class="n">comap_comp</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">γ</span><span class="o">}</span>
  <span class="o">{</span><span class="n">hf</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">}</span> <span class="o">{</span><span class="n">hg</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">g</span><span class="o">}</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">γ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">comap</span> <span class="bp">_</span> <span class="o">(</span><span class="n">hf</span><span class="bp">.</span><span class="n">comp</span> <span class="n">hg</span><span class="o">)</span> <span class="n">U</span> <span class="bp">=</span> <span class="n">comap</span> <span class="bp">_</span> <span class="n">hf</span> <span class="o">(</span><span class="n">comap</span> <span class="bp">_</span> <span class="n">hg</span> <span class="n">U</span><span class="o">)</span> <span class="o">:=</span> <span class="n">ext</span> <span class="n">rfl</span>

<span class="kn">theorem</span> <span class="n">comap_mono</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">hf</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">}</span> <span class="o">{</span><span class="n">U</span> <span class="n">V</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">β</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">U</span> <span class="bp">≤</span> <span class="n">V</span><span class="o">)</span> <span class="o">:</span> <span class="n">U</span><span class="bp">.</span><span class="n">comap</span> <span class="n">f</span> <span class="n">hf</span> <span class="bp">≤</span> <span class="n">V</span><span class="bp">.</span><span class="n">comap</span> <span class="n">f</span> <span class="n">hf</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span> <span class="n">h</span> <span class="n">hx</span>

<span class="kn">end</span> <span class="n">topological_space</span><span class="bp">.</span><span class="n">opens</span>



<span class="kn">structure</span> <span class="n">f_map</span> <span class="o">(</span><span class="err">𝒢</span> <span class="o">:</span> <span class="n">presheaf_of_typesU</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">ℱ</span> <span class="o">:</span> <span class="n">presheaf_of_typesU</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span>
<span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">)</span>
<span class="o">(</span><span class="n">ρ</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">V</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">Y</span><span class="o">,</span> <span class="err">𝒢</span><span class="bp">.</span><span class="n">F</span> <span class="n">V</span> <span class="bp">→</span> <span class="n">ℱ</span><span class="bp">.</span><span class="n">F</span> <span class="o">(</span><span class="n">V</span><span class="bp">.</span><span class="n">comap</span> <span class="n">f</span> <span class="n">hf</span><span class="o">))</span>
<span class="o">(</span><span class="n">nat</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">U</span> <span class="n">V</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">Y</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">hUV</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">≤</span> <span class="n">U</span><span class="o">,</span>
  <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="err">𝒢</span><span class="bp">.</span><span class="n">F</span> <span class="n">U</span><span class="o">,</span> <span class="n">ρ</span> <span class="n">V</span> <span class="o">(</span><span class="err">𝒢</span><span class="bp">.</span><span class="n">res</span> <span class="n">hUV</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">ℱ</span><span class="bp">.</span><span class="n">res</span> <span class="o">(</span><span class="n">comap_mono</span> <span class="n">hUV</span><span class="o">)</span> <span class="o">(</span><span class="n">ρ</span> <span class="n">U</span> <span class="n">x</span><span class="o">))</span>
</pre></div>

<a name="162563753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162563753" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162563753">Kevin Buzzard (Apr 04 2019 at 20:12)</a>:</h4>
<p>It seems to me that the only thing category theory can offer me here is free proofs of refl symm and trans given comp_id and comp_assoc</p>

<a name="162563783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162563783" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162563783">Kevin Buzzard (Apr 04 2019 at 20:13)</a>:</h4>
<p>I don't see the benefit of using it here.</p>

<a name="162563913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162563913" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162563913">Johan Commelin (Apr 04 2019 at 20:14)</a>:</h4>
<p>I think Scott also allows you to change the base space.</p>

<a name="162564014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162564014" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162564014">Johan Commelin (Apr 04 2019 at 20:15)</a>:</h4>
<p>In fact, <code>opens X \func Type u</code> is defeq to your definition (modulo iota for records).</p>

<a name="162564037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162564037" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162564037">Johan Commelin (Apr 04 2019 at 20:15)</a>:</h4>
<p>So I think it also doesn't hurt to use the category lib</p>

<a name="162564128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162564128" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162564128">Johan Commelin (Apr 04 2019 at 20:16)</a>:</h4>
<p>I found it incredibly hard to construct a certain adjunction using the category lib. I don't think that would become any easier by avoiding the category lib.</p>

<a name="162564133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162564133" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162564133">Kevin Buzzard (Apr 04 2019 at 20:16)</a>:</h4>
<p>Remark : I think you can prove refl symm and trans for equiv using only comp_assoc and id_comp -- you don't seem to need comp_id</p>

<a name="162564319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162564319" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162564319">Kevin Buzzard (Apr 04 2019 at 20:18)</a>:</h4>
<p>The thing I took from Scott's comments were that I could define an equiv as a morphism with a two sided inverse instead of having to write down what I mean by an isomorphism</p>

<a name="162565784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162565784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162565784">Scott Morrison (Apr 04 2019 at 20:35)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>, sorry, I haven't caught up everything here --- but your first comment:</p>
<blockquote>
<p>My understanding is that Scott has done something less general than what I need. I need the notion of an equiv of pairs (X,F), i.e. two possibly distinct topological spaces equipped with presheaves.</p>
</blockquote>
<p>is exactly wrong. Did you look at my definition?</p>

<a name="162565944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162565944" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162565944">Scott Morrison (Apr 04 2019 at 20:36)</a>:</h4>
<p>A morphism is exactly:</p>
<div class="codehilite"><pre><span></span>structure Presheaf_hom (F G : Presheaf.{v} C) :=
(f : F.X ⟶ G.X)
(c : G.𝒪 ⟹ ((opens.map f).op ⋙ F.𝒪))
</pre></div>


<p>i.e. a pair, a continuous map, changing the topological space, along with a map from the presheaf on the target space to the pushforward of the presheaf on the source space.</p>

<a name="162566012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162566012" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162566012">Scott Morrison (Apr 04 2019 at 20:37)</a>:</h4>
<p>I then define a category structure on these, so you get the notion of an equivalence of pairs simply by writing <code>\iso</code>.</p>

<a name="162566232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162566232" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162566232">Scott Morrison (Apr 04 2019 at 20:39)</a>:</h4>
<p>Sorry if I sound a bit grumpy, but as far as I can tell what you guys have been talking about needing since I went to bed last night is exactly what I PR'd.</p>

<a name="162566325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162566325" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162566325">Scott Morrison (Apr 04 2019 at 20:40)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span>'s</p>
<div class="codehilite"><pre><span></span>structure f_map (𝒢 : presheaf_of_typesU Y) (ℱ : presheaf_of_typesU X) :=
(f : X → Y)
(hf : continuous f)
(ρ : ∀ V : opens Y, 𝒢.F V → ℱ.F (V.comap f hf))
(nat : ∀ U V : opens Y, ∀ hUV : V ≤ U,
  ∀ x : 𝒢.F U, ρ V (𝒢.res hUV x) = ℱ.res (comap_mono hUV) (ρ U x))
</pre></div>


<p>is exactly a long winded way of saying my <code>Presheaf_hom</code>, and _less_ general, since it restricts to presheaves valued in <code>Type</code>, rather than an arbitrary category.</p>

<a name="162566382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162566382" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162566382">Scott Morrison (Apr 04 2019 at 20:41)</a>:</h4>
<p>Please tell me if I'm missing something.</p>

<a name="162566536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162566536" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162566536">Mario Carneiro (Apr 04 2019 at 20:42)</a>:</h4>
<p>Here's a completed revision of Kevin's file: <a href="https://gist.github.com/digama0/9bfe808e7e51fecc001d8ac8976db19c" target="_blank" title="https://gist.github.com/digama0/9bfe808e7e51fecc001d8ac8976db19c">https://gist.github.com/digama0/9bfe808e7e51fecc001d8ac8976db19c</a></p>

<a name="162566598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162566598" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162566598">Scott Morrison (Apr 04 2019 at 20:43)</a>:</h4>
<p>Grah!!!</p>

<a name="162566615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162566615" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162566615">Mario Carneiro (Apr 04 2019 at 20:43)</a>:</h4>
<p>Where is <code>opens.map</code>?</p>

<a name="162566695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162566695" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162566695">Scott Morrison (Apr 04 2019 at 20:44)</a>:</h4>
<p>Where it's been for months, in <code>category_theory/instances/topological_spaces.lean</code>.</p>

<a name="162566698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162566698" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162566698">Mario Carneiro (Apr 04 2019 at 20:44)</a>:</h4>
<p>I can definitely believe that these are the same issues that come up in the categorical formulation</p>

<a name="162566774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162566774" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162566774">Mario Carneiro (Apr 04 2019 at 20:45)</a>:</h4>
<p>For the record, I'm just making epsilon improvements to Kevin's proposal, not a complete rewrite. I haven't looked in detail at the stuff in this area, I'm just talking about how to deal with dependent types</p>

<a name="162566889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162566889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162566889">Scott Morrison (Apr 04 2019 at 20:46)</a>:</h4>
<p>Okay... but as far as I can tell it's all done in my PR from last night. (Which was just a tidy up of a file I showed people months ago....)</p>

<a name="162567743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162567743" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162567743">Mario Carneiro (Apr 04 2019 at 20:55)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>, I'm inclined to believe that Scott has already done all the hard work of these definitions in the category theory lib, and handled the dependencies right because they have been an issue from day one. As for friction of using category theory here: <code>opens</code> is already a category (it was designed to be one), and <code>Type</code> is a category. So those shouldn't cause a problem. You shouldn't have to deal with universe issues since you only care about <code>Type u</code> which has homs in the same universe. Unfolding these morphisms into continuous functions and such is probably going to be a little bit of boilerplate; hopefully this doesn't come up too often, especially if you care about the global structure more than individual morphisms. So I say try Scott's proposal for presheaves and see what happens.</p>

<a name="162567871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162567871" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162567871">Mario Carneiro (Apr 04 2019 at 20:56)</a>:</h4>
<p>I will be very happy if we see a real use of the category theory lib outside of category theory</p>

<a name="162568177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162568177" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162568177">Kevin Buzzard (Apr 04 2019 at 20:59)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span>  I can't read the category theory code easily -- I did look at it, but all this whiskering stuff etc and the completely new language and notation basically means that I have to sit down and study it more carefully than I had time to (I was on a train when I saw your message and about to get off; I'd spent the journey finishing my own code and wasn't connected to the internet) and then when I got it I had family stuff. I'll try to get to it this evening but basically, due to my lack of experience, the code looked mostly incomprehensible to me. I'm sure I can change this. </p>
<p>The work I did has basically taught me what needs to be done to define an equiv of these objects. I had to deal with heqs, although they turned out painless, and some proofs really had me scratching my head for a while, but I got through them all in the end. Once I have wrestled through all the foreign notation, which I will have to do at some stage, I'll be able to make some kind of judgement as to what this category theory stuff is buying me.</p>

<a name="162568394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162568394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162568394">Kevin Buzzard (Apr 04 2019 at 21:01)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">id&#39;</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℱ</span><span class="bp">.</span><span class="n">F</span> <span class="n">U</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℱ</span><span class="bp">.</span><span class="n">res</span> <span class="n">h</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">ℱ</span><span class="bp">.</span><span class="n">id</span> <span class="bp">_</span> <span class="bp">_</span>
</pre></div>


<p>That's a crazy use of <code>h</code> :-) I hadn't really internalised that trick until now.</p>

<a name="162568432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162568432" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162568432">Kevin Buzzard (Apr 04 2019 at 21:01)</a>:</h4>
<p>Lean infers it must be a proof of U \sub U</p>

<a name="162568588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162568588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162568588">Kevin Buzzard (Apr 04 2019 at 21:03)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">pushforward</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">[</span><span class="n">hf</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">]</span> <span class="o">(</span><span class="n">ℱ</span> <span class="o">:</span> <span class="n">presheaf_of_typesU</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">presheaf_of_typesU</span> <span class="n">Y</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">F</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">V</span><span class="o">,</span> <span class="n">ℱ</span><span class="bp">.</span><span class="n">F</span> <span class="bp">⟨</span><span class="n">f</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="n">V</span><span class="o">,</span> <span class="n">hf</span> <span class="bp">_</span> <span class="n">V</span><span class="bp">.</span><span class="mi">2</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="n">res</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">hUV</span><span class="o">,</span> <span class="n">ℱ</span><span class="bp">.</span><span class="n">res</span> <span class="o">(</span><span class="bp">λ</span> <span class="bp">_</span> <span class="n">hx</span><span class="o">,</span> <span class="n">hUV</span> <span class="n">hx</span><span class="o">),</span>
  <span class="n">id</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">_</span><span class="o">,</span> <span class="n">ℱ</span><span class="bp">.</span><span class="n">id</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">comp</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">U</span> <span class="n">V</span> <span class="n">W</span> <span class="n">hUV</span> <span class="n">hVW</span><span class="o">,</span> <span class="n">ℱ</span><span class="bp">.</span><span class="n">comp</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span>
<span class="o">}</span>
</pre></div>


<p>Any reason why you didn't use <code>opens.comap</code> in the definition of <code>F</code>?</p>

<a name="162568889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162568889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162568889">Kevin Buzzard (Apr 04 2019 at 21:06)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">ext</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="n">f_map</span> <span class="err">𝒢</span> <span class="n">ℱ</span><span class="o">}</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">α</span><span class="bp">.</span><span class="n">f</span> <span class="bp">=</span> <span class="n">β</span><span class="bp">.</span><span class="n">f</span><span class="o">)</span>
<span class="o">(</span><span class="n">hρ</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">V</span> <span class="n">x</span><span class="o">,</span> <span class="n">α</span><span class="bp">.</span><span class="n">ρ</span> <span class="n">V</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ℱ</span><span class="bp">.</span><span class="n">res</span> <span class="o">(</span><span class="n">le_of_eq</span> <span class="o">(</span><span class="k">by</span> <span class="n">congr&#39;</span><span class="o">))</span> <span class="o">(</span><span class="n">β</span><span class="bp">.</span><span class="n">ρ</span> <span class="n">V</span> <span class="n">x</span><span class="o">))</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">=</span> <span class="n">β</span> <span class="o">:=</span>
</pre></div>


<p>You have a <code>heq</code>-free <code>ext</code>! Probably very wise :-)</p>

<a name="162569135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162569135" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162569135">Scott Morrison (Apr 04 2019 at 21:09)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  --- stop reading Mario's version, and start reading mine. :-) You'll see the same tricks being used, because Mario showed them to me when I wrote my version last year.</p>

<a name="162569233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162569233" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162569233">Scott Morrison (Apr 04 2019 at 21:10)</a>:</h4>
<p>And you'll see I do use <code>opens.map</code> (which is the already-in-mathlib synonym for the <code>opens.comap</code> you've been using) in the definition of the pushforward.</p>

<a name="162569247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162569247" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162569247">Kevin Buzzard (Apr 04 2019 at 21:10)</a>:</h4>
<p>I want to read Mario's first because it's much easier for me :-) I'll read yours next!</p>

<a name="162569503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162569503" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162569503">Mario Carneiro (Apr 04 2019 at 21:13)</a>:</h4>
<p>oops, I missed that one</p>

<a name="162569614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162569614" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162569614">Patrick Massot (Apr 04 2019 at 21:14)</a>:</h4>
<p>I would love to use the category theory Scott, Reid and Johan worked on. But I totally understand Kevin's reaction. Clearly the code is frightening. I hope one day I'll learn to read it</p>

<a name="162569699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162569699" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162569699">Kevin Buzzard (Apr 04 2019 at 21:15)</a>:</h4>
<p>My proof of equiv.refl was much worse than Mario's because I had not yet proved id_comp -- I only realised I needed it when I was proving equiv.trans :-)</p>

<a name="162569777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162569777" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162569777">Kevin Buzzard (Apr 04 2019 at 21:16)</a>:</h4>
<p>OK so I just read all of Mario's code and the main thing I learnt was that the heq can be avoided.</p>

<a name="162569790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162569790" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162569790">Kevin Buzzard (Apr 04 2019 at 21:16)</a>:</h4>
<p>Ok now to brave Scott's :-/</p>

<a name="162570342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162570342" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162570342">Kevin Buzzard (Apr 04 2019 at 21:22)</a>:</h4>
<p>After 2 minutes I have decided that I cannot possibly read Scott's code unless I read it in Lean, but I thankfully now understand git well enough nowadays to pull his PR branch and compile it. Back in 15 minutes.</p>

<a name="162570619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162570619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162570619">Kevin Buzzard (Apr 04 2019 at 21:25)</a>:</h4>
<p>Until then, Scott let me give you some idea what I think when I look at your code:</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">Presheaf</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">Top</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">})</span>
<span class="o">(</span><span class="err">𝒪</span> <span class="o">:</span> <span class="o">(</span><span class="n">opens</span> <span class="n">X</span><span class="o">)</span><span class="err">ᵒᵖ</span> <span class="err">⥤</span> <span class="n">C</span><span class="o">)</span>

<span class="kn">structure</span> <span class="n">Presheaf_hom</span> <span class="o">(</span><span class="n">F</span> <span class="n">G</span> <span class="o">:</span> <span class="n">Presheaf</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">F</span><span class="bp">.</span><span class="n">X</span> <span class="err">⟶</span> <span class="n">G</span><span class="bp">.</span><span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="bp">.</span><span class="err">𝒪</span> <span class="err">⟹</span> <span class="o">((</span><span class="n">opens</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">op</span> <span class="err">⋙</span> <span class="n">F</span><span class="bp">.</span><span class="err">𝒪</span><span class="o">))</span>
</pre></div>


<p>I think "What is <code>⥤</code>, I guess it must be a functor, what is that insane arrow <code>⟶</code>, I have no idea, what is <code> ⟹</code>, what is <code>⋙</code>. That's why I can't just sit down and read your code. But you have made it amply clear that now is the time to start finding out.</p>

<a name="162570705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162570705" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162570705">Scott Morrison (Apr 04 2019 at 21:26)</a>:</h4>
<p>Oh dear. I'm sorry, I had no idea you didn't even know the arrows. :-) Sorry.</p>

<a name="162570767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162570767" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162570767">Scott Morrison (Apr 04 2019 at 21:27)</a>:</h4>
<p>The insane arrow <code>⟶</code> is just the "morphism in a category" arrow. Think of it just like the usual arrow in <code>Type</code>, but on steroids.</p>

<a name="162570833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162570833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162570833">Scott Morrison (Apr 04 2019 at 21:28)</a>:</h4>
<p>(In fact, you can use the "insane" arrow in place of the normal arrow, for types. This will pull in the category instance on <code>Type</code>, and be definitionally equal to the normal arrow.)</p>

<a name="162570841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162570841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162570841">Scott Morrison (Apr 04 2019 at 21:28)</a>:</h4>
<p><code>⥤</code> is the functor arrow</p>

<a name="162570850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162570850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162570850">Scott Morrison (Apr 04 2019 at 21:28)</a>:</h4>
<p><code>⟹</code> is the natural transformation arrow.</p>

<a name="162570892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162570892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162570892">Scott Morrison (Apr 04 2019 at 21:29)</a>:</h4>
<p><code>≫</code> is composition of morphisms (so if <code>f : X \hom Y</code>, and <code>g : Y \hom Z</code>, you can write <code>f ≫ g</code> to get a <code>X \hom Z</code>)</p>

<a name="162570910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162570910" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162570910">Scott Morrison (Apr 04 2019 at 21:29)</a>:</h4>
<p><code>⋙</code> is composition of functors.</p>

<a name="162570975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162570975" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162570975">Scott Morrison (Apr 04 2019 at 21:30)</a>:</h4>
<p>and finally, in the definition of composition of <code>Presheaf_hom</code>,  (and in <code>ext</code>),</p>

<a name="162570981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162570981" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162570981">Scott Morrison (Apr 04 2019 at 21:30)</a>:</h4>
<p><code>⊟</code> is "vertical composition of natural transformations"</p>

<a name="162571128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162571128" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162571128">Scott Morrison (Apr 04 2019 at 21:32)</a>:</h4>
<p>Finally, the last piece of notation is the one you've been asking about: <code>≅</code>, which gives you all the different notations of equivalence, all with uniform notation. :-)</p>

<a name="162571144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162571144" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162571144">Mario Carneiro (Apr 04 2019 at 21:32)</a>:</h4>
<p>and <code>.op</code>?</p>

<a name="162571252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162571252" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162571252">Scott Morrison (Apr 04 2019 at 21:34)</a>:</h4>
<p>As an example, we have</p>
<div class="codehilite"><pre><span></span>/-- `opens.map f` gives the functor from open sets in Y to open set in X,
    given by taking preimages under f. -/
def map
  {X Y : Top.{u}} (f : X ⟶ Y) : opens Y ⥤ opens X :=
{ obj := λ U, ⟨ f.val ⁻¹&#39; U, f.property _ U.property ⟩,
  map := λ U V i, ⟨ ⟨ λ a b, i.down.down b ⟩ ⟩ }.

def map_iso {X Y : Top.{u}} (f g : X ⟶ Y) (h : f = g) : map f ≅ map g := ...
</pre></div>


<p>In the last line there is an appearance of <code>≅</code>. Lean looks at this, realises that both <code>map f</code> and <code>map g</code> are functors from <code>opens Y</code> to <code>opens X</code>, successfully realises there are category structures on both of these, whose morphisms are natural transformations, so <code>≅</code> must mean an isomorphism in that category, i.e., a natural isomorphism. (No special notation or special cases for <code>functor_equiv</code>!)</p>

<a name="162571322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162571322" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162571322">Scott Morrison (Apr 04 2019 at 21:35)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span>, unfortunately there are several <code>op</code>s, and it's still too confusing. This <code>.op</code> is applied as field notation to a functor, so it must be <code>functor.op</code>, which takes a <code>F : C \func D</code> and spits out a functor <code>C^\op \func D^\op</code>.</p>

<a name="162571334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162571334" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162571334">Mario Carneiro (Apr 04 2019 at 21:35)</a>:</h4>
<p>I guess this isn't going to give you a generic function from <code>A ≅ B</code> to the plain equiv <code>A ~= B</code>?</p>

<a name="162571431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162571431" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162571431">Mario Carneiro (Apr 04 2019 at 21:36)</a>:</h4>
<p>what's the <code>.down.down</code> in the definition of <code>opens.map</code> for?</p>

<a name="162571983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162571983" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162571983">Scott Morrison (Apr 04 2019 at 21:44)</a>:</h4>
<p>We can possibly fix that <code>.down.down</code> now, actually. We used to not be able to define categories with morphisms in <code>Prop</code>.</p>

<a name="162572029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162572029" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162572029">Scott Morrison (Apr 04 2019 at 21:44)</a>:</h4>
<p>This was recently fixed.</p>

<a name="162572053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162572053" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162572053">Patrick Massot (Apr 04 2019 at 21:44)</a>:</h4>
<p>I find it strange that I used to think I knew what was a sheaf but never needed to learn "vertical composition of natural transformations"</p>

<a name="162572066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162572066" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162572066">Scott Morrison (Apr 04 2019 at 21:45)</a>:</h4>
<p>So the definition of <code>hom</code> in <code>opens X</code> is <code>ulift (plift X &lt;= Y)</code></p>

<a name="162572103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162572103" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162572103">Scott Morrison (Apr 04 2019 at 21:45)</a>:</h4>
<p>Okay, but if you don't learn the definition of "vertical composition of natural transformations" you will spend the rest of your life checking more naturality squares than you need to. :-)</p>

<a name="162572159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162572159" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162572159">Patrick Massot (Apr 04 2019 at 21:46)</a>:</h4>
<p>Who checks naturality squares anyway?</p>

<a name="162572160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162572160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162572160">Scott Morrison (Apr 04 2019 at 21:46)</a>:</h4>
<p>...</p>

<a name="162572162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162572162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162572162">Scott Morrison (Apr 04 2019 at 21:46)</a>:</h4>
<p>mostly <code>tidy</code>, to be honest.</p>

<a name="162572171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162572171" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162572171">Scott Morrison (Apr 04 2019 at 21:46)</a>:</h4>
<p>It exists precisely because I don't check naturality squares either.</p>

<a name="162573301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162573301" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162573301">Kevin Buzzard (Apr 04 2019 at 22:01)</a>:</h4>
<p>Is "vertical composition of natural transformations" the same as "composition of natural transformations"?</p>

<a name="162573830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162573830" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162573830">Kevin Buzzard (Apr 04 2019 at 22:08)</a>:</h4>
<p>Thanks a lot for the notation cheat sheet. I have been doing housework but am now desperate to get back to this</p>

<a name="162574984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162574984" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162574984">Kevin Buzzard (Apr 04 2019 at 22:22)</a>:</h4>
<p>I did look at some category theory last summer when an UG got interested in it, and I did pick up some of the notation then, but I didn't use it since then and if I don't use things regularly then I forget them quite efficiently nowadays</p>

<a name="162575415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162575415" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162575415">Kevin Buzzard (Apr 04 2019 at 22:30)</a>:</h4>
<p>So topological spaces have all limits and colimits in Lean? Do commutative rings?</p>

<a name="162575588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162575588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162575588">Kevin Buzzard (Apr 04 2019 at 22:32)</a>:</h4>
<p>Would <code>tidy</code> have been any use to Mario or me in our approach?</p>

<a name="162576095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162576095" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162576095">Kevin Buzzard (Apr 04 2019 at 22:40)</a>:</h4>
<p>I think Ramon wrote colimits for rings ages ago</p>

<a name="162576343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162576343" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162576343">Kevin Buzzard (Apr 04 2019 at 22:44)</a>:</h4>
<p>Do we have the category of topological rings?</p>

<a name="162576879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162576879" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162576879">Kevin Buzzard (Apr 04 2019 at 22:53)</a>:</h4>
<blockquote>
<p>I will be very happy if we see a real use of the category theory lib outside of category theory</p>
</blockquote>
<p>Yeah but the problem is that it's a real PITA to use some unmerged branch of mathlib and we want them ASAP. I've got too used to having olean files on tap, it has made a huge difference to my workflow</p>

<a name="162577193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162577193" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162577193">Kevin Buzzard (Apr 04 2019 at 22:58)</a>:</h4>
<p>I see now that it should be possible to build a category of topological rings and to make the category of presheaves of topological rings. But how to put this extra structure of an equivalence class of valuations on the stalks? Can one modify the presheaf category or does one have to start again? Am object of the category we want is a space with a presheaf of topological rings plus this extra data of valuations on the stalks and I don't immediately see how to add it.</p>

<a name="162577249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162577249" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162577249">Kevin Buzzard (Apr 04 2019 at 22:59)</a>:</h4>
<p>One can pull back an equivalence class of valuations via a morphism of rings. You can think of an equivalence class of valuations on a commutative ring as just being a binary relation on the ring satisfying some axioms by the way</p>

<a name="162577320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162577320" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162577320">Kevin Buzzard (Apr 04 2019 at 23:00)</a>:</h4>
<p>But the axioms are in the perfectoid project</p>

<a name="162577482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162577482" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162577482">Kevin Buzzard (Apr 04 2019 at 23:02)</a>:</h4>
<p>I could never write that proof of <code>comp_id</code> -- it looks terrifying</p>

<a name="162577627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162577627" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162577627">Kevin Buzzard (Apr 04 2019 at 23:05)</a>:</h4>
<p>Mario's<code>comp_id</code> is</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">comp_id</span> <span class="o">(</span><span class="n">fℱ</span><span class="err">𝒢</span> <span class="o">:</span> <span class="n">f_map</span> <span class="n">ℱ</span> <span class="err">𝒢</span><span class="o">)</span> <span class="o">:</span> <span class="n">comp</span> <span class="n">fℱ</span><span class="err">𝒢</span> <span class="o">(</span><span class="n">f_map</span><span class="bp">.</span><span class="n">id</span> <span class="err">𝒢</span><span class="o">)</span> <span class="bp">=</span> <span class="n">fℱ</span><span class="err">𝒢</span> <span class="o">:=</span>
<span class="n">f_map</span><span class="bp">.</span><span class="n">ext</span> <span class="n">rfl</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">V</span> <span class="n">x</span><span class="o">,</span> <span class="k">begin</span>
  <span class="n">simp</span><span class="o">,</span> <span class="n">dsimp</span> <span class="o">[</span><span class="n">comp</span><span class="o">,</span> <span class="n">id</span><span class="o">],</span> <span class="n">simp</span> <span class="o">[</span><span class="err">𝒢</span><span class="bp">.</span><span class="n">comp</span><span class="o">]</span>
<span class="kn">end</span>
</pre></div>


<p>basically painless</p>

<a name="162577862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162577862" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162577862">Kevin Buzzard (Apr 04 2019 at 23:10)</a>:</h4>
<blockquote>
<p>You shouldn't have to deal with universe issues since you only care about <code>Type u</code> which has homs in the same universe.</p>
</blockquote>
<p>Wait wait wait I'm only sticking to Type u because you told me to! I thought I was supposed to care about being maximally polymorphic!</p>

<a name="162579501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162579501" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162579501">Mario Carneiro (Apr 04 2019 at 23:40)</a>:</h4>
<p>I mean that the homs of the category <code>Type u</code> live in a particular universe, namely <code>Type u</code>, rather than some arbitrary other universe. So you don't have to deal with the two-variable problem that appears in general categories</p>

<a name="162579531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162579531" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162579531">Mario Carneiro (Apr 04 2019 at 23:41)</a>:</h4>
<p>There is no category <code>Type*</code> that spans multiple universes anyway</p>

<a name="162579547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162579547" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162579547">Mario Carneiro (Apr 04 2019 at 23:41)</a>:</h4>
<p>aka "<code>Type u</code> is a <code>large_category</code>"</p>

<a name="162579710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162579710" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162579710">Kevin Buzzard (Apr 04 2019 at 23:44)</a>:</h4>
<p>But there's some other two variable problem -- aah but maybe Scott's approach solves this correctly?</p>

<a name="162579824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162579824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162579824">Scott Morrison (Apr 04 2019 at 23:46)</a>:</h4>
<p>Okay, I will definitely need to look at <code>comp_id</code>.</p>

<a name="162579838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162579838" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162579838">Mario Carneiro (Apr 04 2019 at 23:47)</a>:</h4>
<p>What scott's approach will not give you is a way to talk about homs between presheaves living in different universes. There is basically no way to have a holistic view of these cross-universe homs</p>

<a name="162579841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162579841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162579841">Scott Morrison (Apr 04 2019 at 23:47)</a>:</h4>
<p>I agree mine is bad. :-(</p>

<a name="162579914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162579914" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162579914">Mario Carneiro (Apr 04 2019 at 23:48)</a>:</h4>
<p>it's basically the same problem as why <code>functor</code> in core only has a <code>&lt;$&gt;</code> acting on functions between types in the same universe</p>

<a name="162579947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162579947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162579947">Mario Carneiro (Apr 04 2019 at 23:48)</a>:</h4>
<p>You can use <code>ulift</code> to recover some universe polymorphism</p>

<a name="162612484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162612484" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162612484">Scott Morrison (Apr 05 2019 at 11:03)</a>:</h4>
<p>Okay, <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>, <span class="user-mention" data-user-id="112680">@Johan Commelin</span>, I have refactored quite a bit, pulling out the stuff that is about presheaves on a fixed space, and then later doing pairs (space, presheaf on it).</p>

<a name="162612493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162612493" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162612493">Scott Morrison (Apr 05 2019 at 11:03)</a>:</h4>
<p>The proofs are much simpler now.</p>

<a name="162612523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162612523" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162612523">Scott Morrison (Apr 05 2019 at 11:03)</a>:</h4>
<p>e.g. my <code>comp_id</code> and so on are so much simpler they have disappeared :-) (Once they are down to <code>ext; dsimp; simp</code> I'm happy to omit them and let <code>tidy</code> fill them in!)</p>

<a name="162612527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162612527" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162612527">Scott Morrison (Apr 05 2019 at 11:03)</a>:</h4>
<p>I wrote some stuff about stalks.</p>

<a name="162612588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162612588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162612588">Scott Morrison (Apr 05 2019 at 11:04)</a>:</h4>
<p>And got as far as constructing <br>
<code>def stalk_map {F G : Presheaf.{v} C} (α : F ⟶ G) (x : F.X) : stalk (α.f x) ⟶ stalk x := ...</code></p>

<a name="162612613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162612613" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162612613">Scott Morrison (Apr 05 2019 at 11:05)</a>:</h4>
<p>I have proved nothing about about that map, at this point, however, so I don't know whether it is usable.</p>

<a name="162612746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162612746" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162612746">Johan Commelin (Apr 05 2019 at 11:08)</a>:</h4>
<p>I'm not sure if I like your "hack" where you replace <code>opens X</code> with its opposite...</p>

<a name="162612971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162612971" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162612971">Scott Morrison (Apr 05 2019 at 11:11)</a>:</h4>
<p>I knew you wouldn't like this.</p>

<a name="162612976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162612976" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162612976">Scott Morrison (Apr 05 2019 at 11:11)</a>:</h4>
<p>It just saves so so much pain, you wouldn't believe.</p>

<a name="162613035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162613035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162613035">Johan Commelin (Apr 05 2019 at 11:12)</a>:</h4>
<p>That doesn't sound good</p>

<a name="162613039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162613039" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162613039">Scott Morrison (Apr 05 2019 at 11:12)</a>:</h4>
<p>I can rename it if you like, but I'm not going to be able to write this stuff with explicit <code>op</code>s everywhere.</p>

<a name="162613047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162613047" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162613047">Johan Commelin (Apr 05 2019 at 11:12)</a>:</h4>
<p>What if we want to do the etale site?</p>

<a name="162613052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162613052" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162613052">Johan Commelin (Apr 05 2019 at 11:12)</a>:</h4>
<p>We will need to deal with the <code>op</code>s there...</p>

<a name="162613069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162613069" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162613069">Johan Commelin (Apr 05 2019 at 11:13)</a>:</h4>
<p>But we can worry about that in the future.</p>

<a name="162613071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162613071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162613071">Scott Morrison (Apr 05 2019 at 11:13)</a>:</h4>
<p>That sounds like a good place to deal with them. :-)</p>

<a name="162613087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162613087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162613087">Johan Commelin (Apr 05 2019 at 11:13)</a>:</h4>
<p>So... let's redefine stalks using filtered colimits...</p>

<a name="162613146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162613146" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162613146">Johan Commelin (Apr 05 2019 at 11:14)</a>:</h4>
<p>That means we first need a definition of filtered colimit in mathlib</p>

<a name="162614563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162614563" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162614563">Scott Morrison (Apr 05 2019 at 11:39)</a>:</h4>
<p>I should sleep soon, but I agree this is a good thing to do, and we're actually not that far.</p>

<a name="162614566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162614566" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162614566">Scott Morrison (Apr 05 2019 at 11:39)</a>:</h4>
<p>Do you want to talk about it tomorrow? I can probably find some time.</p>

<a name="162614569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162614569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162614569">Scott Morrison (Apr 05 2019 at 11:39)</a>:</h4>
<p>We could even try out the new VS Code collaborative mode :-)</p>

<a name="162614570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162614570" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162614570">Patrick Massot (Apr 05 2019 at 11:39)</a>:</h4>
<p>Thank you very much Scott</p>

<a name="162614627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162614627" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162614627">Johan Commelin (Apr 05 2019 at 11:40)</a>:</h4>
<p>I'm not sure if I have time tomorrow... maybe...</p>

<a name="162614632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162614632" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162614632">Scott Morrison (Apr 05 2019 at 11:40)</a>:</h4>
<p>I'm doing presheaves with preorders on the stalks right now. :-)</p>

<a name="162618447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162618447" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162618447">Reid Barton (Apr 05 2019 at 12:33)</a>:</h4>
<p>Nooooo you need the <code>op</code>s</p>

<a name="162618566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162618566" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162618566">Reid Barton (Apr 05 2019 at 12:34)</a>:</h4>
<p>How would you even define sheaves? "A collection of maps <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><mi>U</mi><mo>→</mo><msub><mi>U</mi><mi>α</mi></msub><mo>}</mo></mrow><annotation encoding="application/x-tex">\{U \to U_\alpha\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mopen">{</span><span class="mord mathit" style="margin-right:0.10903em;">U</span><span class="mrel">→</span><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right:0.0037em;">α</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">}</span></span></span></span> is a co-cover if ..."?</p>

<a name="162618625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162618625" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162618625">Reid Barton (Apr 05 2019 at 12:35)</a>:</h4>
<p>Does it save real pain, or does it just save writing <code>op</code> a lot?</p>

<a name="162634532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162634532" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162634532">Reid Barton (Apr 05 2019 at 15:43)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> I'm not sure how far you got with filtered colimits, but I pushed my old implementation which I never got around to PRing to the <code>filtered-colimits</code> branch</p>

<a name="162634615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162634615" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162634615">Reid Barton (Apr 05 2019 at 15:44)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/commit/bc457fb5716fbffe63cbcc10b4ce7a253c720f84" target="_blank" title="https://github.com/leanprover-community/mathlib/commit/bc457fb5716fbffe63cbcc10b4ce7a253c720f84">https://github.com/leanprover-community/mathlib/commit/bc457fb5716fbffe63cbcc10b4ce7a253c720f84</a></p>

<a name="162640590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162640590" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162640590">Reid Barton (Apr 05 2019 at 17:05)</a>:</h4>
<blockquote>
<p>Is "vertical composition of natural transformations" the same as "composition of natural transformations"?</p>
</blockquote>
<p>Yes.</p>

<a name="162666636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162666636" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162666636">Scott Morrison (Apr 05 2019 at 22:22)</a>:</h4>
<p>Ok, I think while walking the dog I understood what my problem with the <code>op</code>s has been, and I hope that I can restore them. The price that is I will have to define <code>opens.op_map : (opens X)^op \func (opens Y)^op</code> separately from <code>opens.map</code>, rather than just using <code>(opens.map).op</code> as I have been. This is only a few lines of duplication.</p>

<a name="162666725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162666725" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162666725">Kevin Buzzard (Apr 05 2019 at 22:23)</a>:</h4>
<p>I should say that in contrast to Johan, I don't mind at all about you having reversed the arrows in <code>opens X</code> -- you could even have just defined <code>opens_op X</code>. But if you think you've figured out what's going on then great :-)</p>

<a name="162666799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162666799" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162666799">Scott Morrison (Apr 05 2019 at 22:24)</a>:</h4>
<p>The underlying problem is that <code>opens.map</code> is really a 2-functor from {topological spaces}&lt;={continuous maps}&lt;={equalities} to {categories}&lt;={functors}&lt;={nat trans}, and so we have some dependent type theory hell waiting the break loose. Too many <code>op</code>s in the wrong places prevent things simplifying at the right moments.</p>

<a name="162666988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162666988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162666988">Scott Morrison (Apr 05 2019 at 22:27)</a>:</h4>
<p>Another realisation while walking the dog is that since we've generalised the category theory library to allow <code>Prop</code> valued homs, the avenue is open to using "functor extensionality" for functors into Prop-level categories. The point is that you only need to check equality on objects, and then proof irrelevance guarantees equality of morphisms. This means that the usual <code>eq.rec</code> balrog that functor extensionality rouses should not be a problem.</p>

<a name="162667092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162667092" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162667092">Scott Morrison (Apr 05 2019 at 22:28)</a>:</h4>
<p>I'm not quite there with "bundled presheaves whose stalks have preorders, and whose morphisms preserve the preorders", but I think I'm pretty close. Hopefully this afternoon. :-)</p>

<a name="162667149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162667149" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162667149">Kevin Buzzard (Apr 05 2019 at 22:29)</a>:</h4>
<p>Yes, I didn't know how you were going to do this. I did wonder whether doing presheaves in the funky functor way would somehow not really help, whereas with the structures Mario and I made you can just add more fields</p>

<a name="162667690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162667690" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162667690">Scott Morrison (Apr 05 2019 at 22:37)</a>:</h4>
<p>I'm just doing more fields, too.</p>

<a name="162668368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162668368" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162668368">Kevin Buzzard (Apr 05 2019 at 22:45)</a>:</h4>
<p>I don't know how to add more fields to the objects of a category</p>

<a name="162668480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162668480" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162668480">Scott Morrison (Apr 05 2019 at 22:46)</a>:</h4>
<p>Just bundle more. A object of the new category is an object of the old category, along with some extra piece of data.</p>

<a name="162668633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162668633" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162668633">Kevin Buzzard (Apr 05 2019 at 22:49)</a>:</h4>
<p>I just didn't know how easy this was to do in practice. Of course the morphisms change too etc.</p>

<a name="162668652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162668652" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162668652">Kevin Buzzard (Apr 05 2019 at 22:49)</a>:</h4>
<p>With structures I can see how it all would work but in this bundled setting I don't have the experience.</p>

<a name="162678953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162678953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162678953">Scott Morrison (Apr 06 2019 at 02:34)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="110032">@Reid Barton</span>, no I've done basically nothing on filtered colimits yet, so this is great.</p>

<a name="162678954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162678954" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162678954">Scott Morrison (Apr 06 2019 at 02:34)</a>:</h4>
<p>Can we PR it?</p>


{% endraw %}

{% include archive_update.html %}