---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/80479leanpkgartifactstoragelocation.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/80479leanpkgartifactstoragelocation.html">leanpkg artifact storage location</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="130723831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20artifact%20storage%20location/near/130723831" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/80479leanpkgartifactstoragelocation.html#130723831">Keeley Hoek (Aug 01 2018 at 16:02)</a>:</h4>
<p>Hi there! Does anyone know of a particular reason why leanpkg copies dependencies into a "_target" directory in the project folder, as opposed to keeping a directory of artifacts in your home directory (e.g. like maven does)? It'd certainly avoid unnecessarily compiling mathlib multiple times when playing around with little projects.</p>

<a name="130724301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20artifact%20storage%20location/near/130724301" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/80479leanpkgartifactstoragelocation.html#130724301">Reid Barton (Aug 01 2018 at 16:10)</a>:</h4>
<p><span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> ^ ?</p>

<a name="130724346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20artifact%20storage%20location/near/130724346" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/80479leanpkgartifactstoragelocation.html#130724346">Mario Carneiro (Aug 01 2018 at 16:11)</a>:</h4>
<p>one of <code>leanpkg add</code> and <code>leanpkg install</code> is a global install</p>

<a name="130724449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20artifact%20storage%20location/near/130724449" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/80479leanpkgartifactstoragelocation.html#130724449">Sebastian Ullrich (Aug 01 2018 at 16:13)</a>:</h4>
<p><code>leanpkg install</code>, but that's intended for use in non-project files</p>

<a name="130724789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20artifact%20storage%20location/near/130724789" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/80479leanpkgartifactstoragelocation.html#130724789">Kevin Buzzard (Aug 01 2018 at 16:19)</a>:</h4>
<p>I currently have two projects which are using different versions of mathlib, but I'm not usually in this situation. I'm running something with UGs where we're all using mathlib 3.4.1 because trying to get 25 people to upgrade their mathlibs is a pain when some of them can't even open a terminal. I'm also doing a project which uses bleeding edge mathlib. But if I could have two flavours of mathlib installed globally I'd be happier than I am now, because I often find myself recompiling. I sometimes cheat and copy and paste instead of recompiling.</p>

<a name="130724961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20artifact%20storage%20location/near/130724961" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/80479leanpkgartifactstoragelocation.html#130724961">Sebastian Ullrich (Aug 01 2018 at 16:23)</a>:</h4>
<p><span class="user-mention" data-user-id="110111">@Keeley Hoek</span> I don't think there is a particular reason other than the current <code>leanpkg</code> being the minimum viable product</p>

<a name="130748733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20artifact%20storage%20location/near/130748733" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/80479leanpkgartifactstoragelocation.html#130748733">Scott Morrison (Aug 01 2018 at 23:46)</a>:</h4>
<p>Potentially there's a problem for people who work like me, with two repositories <code>repoA</code> and <code>repoB</code>, with <code>repoB</code> depending on a particular commit from <code>repoA</code>, and both repositories change rapidly. In this case in the central <code>~/.leanpkg</code> directory I suspect we will end up with lots of copies of <code>repoA</code> checked out at different commits.</p>

<a name="130748735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20artifact%20storage%20location/near/130748735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/80479leanpkgartifactstoragelocation.html#130748735">Scott Morrison (Aug 01 2018 at 23:47)</a>:</h4>
<p>This is probably a small price to pay (people in this situation can just clean out that directory every so often?) in exchange for having multiple projects be able to use the same compile version of mathlib, which would be really really lovely.</p>

<a name="130748740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20artifact%20storage%20location/near/130748740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/80479leanpkgartifactstoragelocation.html#130748740">Scott Morrison (Aug 01 2018 at 23:47)</a>:</h4>
<p>I'd be very happy to see central storage in any case.</p>

<a name="130748981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20artifact%20storage%20location/near/130748981" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/80479leanpkgartifactstoragelocation.html#130748981">Sebastian Ullrich (Aug 01 2018 at 23:55)</a>:</h4>
<p>What Rust's <code>cargo</code> (which is the direct inspiration for <code>leanpkg</code>) does is it caches downloaded git repositories in a central cache (because these can be shared even if you're using different versions of them in different projects) and then stores build artifacts per project, probably to avoid flooding the central cache, as <span class="user-mention" data-user-id="110087">@Scott Morrison</span> alluded to</p>

<a name="130751692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20artifact%20storage%20location/near/130751692" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/80479leanpkgartifactstoragelocation.html#130751692">Scott Morrison (Aug 02 2018 at 01:18)</a>:</h4>
<p>I see, but that wouldn't save on rebuilding mathlib between different projects, which is the real payoff.</p>


{% endraw %}
