---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/9593834elanandmathlib.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html">3.4, elan, and mathlib</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="125295801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125295801" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125295801">Johan Commelin (Apr 19 2018 at 08:48)</a>:</h4>
<p>I just installed <code>elan</code>. Succesfully it seems. I then ran <code>mkdir ~/mess/leantest</code> and inside that directory, I ran <code>elan toolchain install nightly</code>. This provided me with a <code>leanpkg</code> command, and I ran <code>leanpkg add https://github.com/leanprover/mathlib</code>. After cloning from github, it complained <code>cannot find revision lean-3.4.0 in repository _target/deps/mathlib</code>. I guess this is somehow expected, because mathlib is not 3.4.0 ready. Right?</p>

<a name="125295811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125295811" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125295811">Johan Commelin (Apr 19 2018 at 08:49)</a>:</h4>
<p>So which permutation of command should I run, to get the most up to date version of lean + mathlib on my box?</p>

<a name="125295909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125295909" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125295909">Mario Carneiro (Apr 19 2018 at 08:52)</a>:</h4>
<p>do you have a <code>leanpkg.toml</code> file? What is in it?</p>

<a name="125295915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125295915" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125295915">Sebastian Ullrich (Apr 19 2018 at 08:53)</a>:</h4>
<p>You're probably using Lean stable, which is installed by elan by default - see <code>lean -v</code> or <code>elan show</code></p>

<a name="125295926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125295926" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125295926">Mario Carneiro (Apr 19 2018 at 08:53)</a>:</h4>
<p>What do I need to do to make this work?</p>

<a name="125295931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125295931" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125295931">Mario Carneiro (Apr 19 2018 at 08:53)</a>:</h4>
<p>Is it just adding a tag with the name <code>lean-3.4.0</code>?</p>

<a name="125295932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125295932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125295932">Johan Commelin (Apr 19 2018 at 08:53)</a>:</h4>
<div class="codehilite"><pre><span></span>elan show
installed toolchains
--------------------

stable-x86_64-unknown-linux-gnu
nightly-x86_64-unknown-linux-gnu

active toolchain
----------------

stable-x86_64-unknown-linux-gnu (default)
Lean (version 3.4.0, commit 4be96eaaaf71, Release)
</pre></div>

<a name="125295935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125295935" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125295935">Johan Commelin (Apr 19 2018 at 08:54)</a>:</h4>
<p>I do not have a <code>.toml</code> file</p>

<a name="125295974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125295974" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125295974">Johan Commelin (Apr 19 2018 at 08:54)</a>:</h4>
<p>Should I write this myself?</p>

<a name="125295992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125295992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125295992">Sebastian Ullrich (Apr 19 2018 at 08:55)</a>:</h4>
<p><code>leanpkg init &lt;package name&gt;</code> will create it for you. You can use <code>leanpkg +nightly init ...</code> to set the Lean version to a nightly, but I'm not sure there is any point in encouraging users to use nightlies any more. <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> What do you think?</p>

<a name="125296038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296038" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296038">Johan Commelin (Apr 19 2018 at 08:56)</a>:</h4>
<p>Ok, I see</p>

<a name="125296039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296039" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296039">Johan Commelin (Apr 19 2018 at 08:56)</a>:</h4>
<p>Is there a concensus?</p>

<a name="125296049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296049" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296049">Sebastian Ullrich (Apr 19 2018 at 08:57)</a>:</h4>
<p>Not yet I think. Right now, <code>stable</code> and <code>nightly</code> are functionally the same Lean version.</p>

<a name="125296050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296050" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296050">Mario Carneiro (Apr 19 2018 at 08:57)</a>:</h4>
<p>Assuming lean is completely frozen now, I guess we can move to building against 3.4.0, but I expect some occasional bugfixes will come along, and then I will want to go back to nightlies</p>

<a name="125296051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296051">Johan Commelin (Apr 19 2018 at 08:57)</a>:</h4>
<p>I hope that, now that 3.4 is out, there is a stable way to get everything working together</p>

<a name="125296104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296104" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296104">Johan Commelin (Apr 19 2018 at 08:58)</a>:</h4>
<p>And then we document this, so that users know which 5 commands to run in a fresh directory to get a lean project up and running</p>

<a name="125296106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296106">Mario Carneiro (Apr 19 2018 at 08:58)</a>:</h4>
<p>For now, though, you want to make sure that your lean version is nightly-2018-04-06 since that's what mathlib master is using</p>

<a name="125296113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296113" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296113">Johan Commelin (Apr 19 2018 at 08:58)</a>:</h4>
<p>Ok, and how should I make sure I get that nightly, using <code>elan</code></p>

<a name="125296116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296116">Sebastian Ullrich (Apr 19 2018 at 08:59)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Yeah, I guess a tag should work. Not sure if force-updating it will work too :) .</p>

<a name="125296119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296119" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296119">Johan Commelin (Apr 19 2018 at 08:59)</a>:</h4>
<p>(Because it seems using <code>elan</code> is wise)</p>

<a name="125296123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296123" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296123">Mario Carneiro (Apr 19 2018 at 08:59)</a>:</h4>
<p>I am not the elan guru in this conversation :)</p>

<a name="125296124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296124" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296124">Sebastian Ullrich (Apr 19 2018 at 08:59)</a>:</h4>
<p><code>leanpkg +nightly-2018-04-06 init mypackage</code></p>

<a name="125296125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296125" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296125">Johan Commelin (Apr 19 2018 at 08:59)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> When do you expect mathlib to use 3.4? (No pressure...)</p>

<a name="125296130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296130" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296130">Mario Carneiro (Apr 19 2018 at 08:59)</a>:</h4>
<p>Probably tomorrow or the day after, when I get a chance to sit down and look at the changes</p>

<a name="125296178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296178" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296178">Johan Commelin (Apr 19 2018 at 09:00)</a>:</h4>
<p><span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> But to have a <code>leanpkg</code> command, I already need to first run an <code>elan</code> command, right?</p>

<a name="125296180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296180" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296180">Johan Commelin (Apr 19 2018 at 09:00)</a>:</h4>
<p>Because <code>elan</code> provides me with a <code>leanpkg</code></p>

<a name="125296187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296187" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296187">Sebastian Ullrich (Apr 19 2018 at 09:01)</a>:</h4>
<p>No, you just need to have elan installed</p>

<a name="125296194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296194" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296194">Sebastian Ullrich (Apr 19 2018 at 09:01)</a>:</h4>
<p>It's the same as <code>elan run nightly-2018-04-06 leanpkg init mypackage</code>, if you like that better :)</p>

<a name="125296237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296237" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296237">Johan Commelin (Apr 19 2018 at 09:02)</a>:</h4>
<p>Ok, so I empty my leantest directory</p>

<a name="125296245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296245" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296245">Johan Commelin (Apr 19 2018 at 09:02)</a>:</h4>
<p>And I get</p>

<a name="125296248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296248" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296248">Johan Commelin (Apr 19 2018 at 09:02)</a>:</h4>
<div class="codehilite"><pre><span></span>$ elan run nightly-2018-04-06 leanpkg init leantest
error: toolchain &#39;nightly-2018-04-06-x86_64-unknown-linux-gnu&#39; is not installed
</pre></div>

<a name="125296340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296340" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296340">Sebastian Ullrich (Apr 19 2018 at 09:05)</a>:</h4>
<p>Oops, I was hoping this worked... then you need to run <code>elan toolchain install nightly-2018-04-06</code> first</p>

<a name="125296348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296348" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296348">Johan Commelin (Apr 19 2018 at 09:05)</a>:</h4>
<p>Ok, I'll try that</p>

<a name="125296393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296393">Johan Commelin (Apr 19 2018 at 09:06)</a>:</h4>
<p>My first goal now, is to write a 10-line readme, that will explain how to start a fresh project.</p>

<a name="125296394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296394">Johan Commelin (Apr 19 2018 at 09:06)</a>:</h4>
<p>Including VScode integration, I hope</p>

<a name="125296406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296406">Johan Commelin (Apr 19 2018 at 09:07)</a>:</h4>
<p><span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> That worked. And now I also ran <code>elan run nightly-2018-04-06 leanpkg init leantest</code></p>

<a name="125296411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296411" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296411">Johan Commelin (Apr 19 2018 at 09:07)</a>:</h4>
<p>Should the next step be <code>leanpkg add https://github.com/leanprover/mathlib
</code>?</p>

<a name="125296465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296465" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296465">Sebastian Ullrich (Apr 19 2018 at 09:08)</a>:</h4>
<p>Yes</p>

<a name="125296473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296473" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296473">Mario Carneiro (Apr 19 2018 at 09:09)</a>:</h4>
<p>is there a way to get the version number from mathlib?</p>

<a name="125296480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296480" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296480">Sebastian Ullrich (Apr 19 2018 at 09:09)</a>:</h4>
<p>You mean the <code>lean_version</code>?</p>

<a name="125296481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296481" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296481">Mario Carneiro (Apr 19 2018 at 09:09)</a>:</h4>
<p>yes</p>

<a name="125296483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296483" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296483">Johan Commelin (Apr 19 2018 at 09:09)</a>:</h4>
<p>Ok, that worked. I assume now I should run <code>leanpkg build</code>. Right?</p>

<a name="125296484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296484" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296484">Mario Carneiro (Apr 19 2018 at 09:09)</a>:</h4>
<p>The mathlib elan setup doesn't say anything about lean versions</p>

<a name="125296536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296536" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296536">Mario Carneiro (Apr 19 2018 at 09:10)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> If you get that 10 line startup script working, pr it to the mathlib readme</p>

<a name="125296537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296537" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296537">Sebastian Ullrich (Apr 19 2018 at 09:10)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> That should work, but not do much. Lean only builds the part of the dependencies you actually import in your <code>src</code> directory</p>

<a name="125296546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296546" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296546">Johan Commelin (Apr 19 2018 at 09:11)</a>:</h4>
<p>Ok, so there is no need to run <code>leanpkg build</code> right now?</p>

<a name="125296547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296547" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296547">Johan Commelin (Apr 19 2018 at 09:11)</a>:</h4>
<p>Then I won't do it</p>

<a name="125296589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296589" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296589">Johan Commelin (Apr 19 2018 at 09:12)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Ok, I'll do that. Once I've got it working (^;</p>

<a name="125296591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296591" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296591">Sebastian Ullrich (Apr 19 2018 at 09:12)</a>:</h4>
<p>I was surprised you were able to run <code>leanpkg add</code> before initializing the package. I guess you got a "failed to open file 'leanpkg.toml'" only at the very end? Pretty much a bug in leanpkg, oh well.</p>

<a name="125296604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296604" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296604">Johan Commelin (Apr 19 2018 at 09:13)</a>:</h4>
<p><span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> I love breaking things. Hehe</p>

<a name="125296650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296650" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296650">Johan Commelin (Apr 19 2018 at 09:14)</a>:</h4>
<p>Right, so I did not run <code>leanpkg build</code>. Only fired up VScode</p>

<a name="125296660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296660" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296660">Johan Commelin (Apr 19 2018 at 09:14)</a>:</h4>
<p>It says <code>No Lean file active</code> in the Lean messages, after I opened a <code>.lean</code> file</p>

<a name="125296729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296729" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296729">Moses Schönfinkel (Apr 19 2018 at 09:16)</a>:</h4>
<p>Clicking anywhere in the file usually fixes this for me.</p>

<a name="125296749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296749" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296749">Johan Commelin (Apr 19 2018 at 09:18)</a>:</h4>
<p>Ok, that works. Never had to do that...</p>

<a name="125296786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296786" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296786">Sebastian Ullrich (Apr 19 2018 at 09:18)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Not sure what you're trying to achieve. The Travis build will select the correct version from <code>lean_version</code> automatically.</p>

<a name="125296794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296794" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296794">Mario Carneiro (Apr 19 2018 at 09:18)</a>:</h4>
<p>well, I'm mildly surprised that the default setup gave the wrong version of lean for mathlib</p>

<a name="125296804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296804">Mario Carneiro (Apr 19 2018 at 09:19)</a>:</h4>
<p>I want a short command or script to give to a newbie that wants the latest version of mathlib and a compatible version of lean</p>

<a name="125296858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296858" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296858">Mario Carneiro (Apr 19 2018 at 09:20)</a>:</h4>
<p>I'd prefer that the script not contain the literal string <code>nightly-2018-04-06</code> since that ages</p>

<a name="125296877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296877" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296877">Johan Commelin (Apr 19 2018 at 09:21)</a>:</h4>
<p><span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> But I need to tell VScode to use the correct version of lean, right? So I edit the settings, to point it to <code>~/.elan/toolchains/nightly-2018-04-06-x86_64-unknown-linux-gnu/bin/lean</code>, is that correct?</p>

<a name="125296932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125296932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125296932">Sebastian Ullrich (Apr 19 2018 at 09:22)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> I've only tested emacs so far, but specifying <code>~/.elan/bin/lean</code> should work</p>

<a name="125297004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125297004" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125297004">Johan Commelin (Apr 19 2018 at 09:24)</a>:</h4>
<div class="codehilite"><pre><span></span>Lean: Unable to start the Lean server process: Error: spawn ~/.elan/bin/lean ENOENT The lean.executablePath may be incorrect, make sure it is a valid Lean executable
</pre></div>

<a name="125297007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125297007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125297007">Johan Commelin (Apr 19 2018 at 09:24)</a>:</h4>
<p>Alas, it is still complaining</p>

<a name="125297029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125297029" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125297029">Mario Carneiro (Apr 19 2018 at 09:25)</a>:</h4>
<p>put <code>.exe</code> at the end?</p>

<a name="125297072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125297072" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125297072">Sebastian Ullrich (Apr 19 2018 at 09:26)</a>:</h4>
<p>On Linux?</p>

<a name="125297074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125297074" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125297074">Sebastian Ullrich (Apr 19 2018 at 09:26)</a>:</h4>
<p>Maybe it doesn't like the <code>~</code></p>

<a name="125297080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125297080" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125297080">Johan Commelin (Apr 19 2018 at 09:26)</a>:</h4>
<p>Yes, I'm on linux</p>

<a name="125297134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125297134" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125297134">Johan Commelin (Apr 19 2018 at 09:28)</a>:</h4>
<p>Ok, that seems to have done it. I expanded the <code>~</code> to my homedir</p>

<a name="125297136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125297136" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125297136">Sebastian Ullrich (Apr 19 2018 at 09:28)</a>:</h4>
<p>Nice, good to know</p>

<a name="125297144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125297144" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125297144">Johan Commelin (Apr 19 2018 at 09:29)</a>:</h4>
<p>Ok, I'm now try to compile Kevin's result that Spec(R) is quasi-compact</p>

<a name="125297145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125297145" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125297145">Johan Commelin (Apr 19 2018 at 09:29)</a>:</h4>
<p>If that works, then I'll write the little readme</p>

<a name="125297154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125297154" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125297154">Johan Commelin (Apr 19 2018 at 09:30)</a>:</h4>
<p>Also, is there a way to tell lean not to use all my CPU threads?</p>

<a name="125297269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125297269" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125297269">Johan Commelin (Apr 19 2018 at 09:32)</a>:</h4>
<div class="codehilite"><pre><span></span>mkdir leantest/
cd leantest/
elan run nightly-2018-04-06 leanpkg init leantest
elan toolchain install nightly-2018-04-06
elan run nightly-2018-04-06 leanpkg init leantest
ls
ls -a
leanpkg add https://github.com/leanprover/mathlib
leanpkg add https://github.com/kbuzzard/lean-stacks-project
ls
elan show

# Change VScode settings to point to &quot;/home/&lt;user&gt;/.elan/bin/lean&quot;
</pre></div>

<a name="125297276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125297276" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125297276">Johan Commelin (Apr 19 2018 at 09:32)</a>:</h4>
<p>That is my current bash history</p>

<a name="125297290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125297290" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125297290">Johan Commelin (Apr 19 2018 at 09:33)</a>:</h4>
<p>So, I'll clean it up, and write a bit of details. But I thought I would log it here as well</p>

<a name="125297293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125297293" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125297293">Sebastian Ullrich (Apr 19 2018 at 09:33)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> So, this looks like a chicken and egg problem - when selecting the Lean version for creating the package, we don't know what dependencies the user will install yet. Well, it doesn't really matter what version to use for creating the package, so we could suggest to the user to change their Lean version after the fact when adding mathlib. I'm planning to do the same on <code>leanpkg upgrade</code>; we can also discuss this at <a href="https://github.com/Kha/elan/issues/5" target="_blank" title="https://github.com/Kha/elan/issues/5">https://github.com/Kha/elan/issues/5</a></p>

<a name="125297535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125297535" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125297535">Johan Commelin (Apr 19 2018 at 09:39)</a>:</h4>
<p>O.o.....</p>
<div class="codehilite"><pre><span></span>Lean: Server has stopped due to signal SIGSEGV
</pre></div>


<p>That doesn't sound good...</p>

<a name="125298604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125298604" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125298604">Kevin Buzzard (Apr 19 2018 at 10:08)</a>:</h4>
<p>Johan -- one possibility is that you just get everything working in the old way, and just wait until mathlib is running with 3.4.</p>

<a name="125298643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125298643" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125298643">Kevin Buzzard (Apr 19 2018 at 10:08)</a>:</h4>
<p>The reason this might be useful is that what we will ultimately really need</p>

<a name="125298644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125298644" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125298644">Kevin Buzzard (Apr 19 2018 at 10:08)</a>:</h4>
<p>is a clear and concise set of instructions</p>

<a name="125298645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125298645" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125298645">Kevin Buzzard (Apr 19 2018 at 10:08)</a>:</h4>
<p>on how to get Lean 3.4 and mathlib running.</p>

<a name="125298647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125298647" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125298647">Kevin Buzzard (Apr 19 2018 at 10:08)</a>:</h4>
<p>And at the minute mathlib doesn't work with Lean 3.4, and elan still has teething troubles</p>

<a name="125298654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125298654" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125298654">Kevin Buzzard (Apr 19 2018 at 10:09)</a>:</h4>
<p>in other words, I guess what I'm saying is that I am waiting until mathlib works with Lean 3.4 before I start thinking about writing down some succinct explanation of how to use elan</p>

<a name="125298656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125298656" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125298656">Kevin Buzzard (Apr 19 2018 at 10:09)</a>:</h4>
<p>and for me there is no hurry because I have a set-up that works without elan</p>

<a name="125298707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125298707" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125298707">Kevin Buzzard (Apr 19 2018 at 10:10)</a>:</h4>
<p>OTOH I'm sure Sebastian is appreciating your comments on elan.</p>

<a name="125298709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125298709" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125298709">Kevin Buzzard (Apr 19 2018 at 10:10)</a>:</h4>
<p>As for the segv</p>

<a name="125298710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125298710" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125298710">Kevin Buzzard (Apr 19 2018 at 10:10)</a>:</h4>
<p>you do occasionally get these, although they are quite rare</p>

<a name="125298717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125298717" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125298717">Kevin Buzzard (Apr 19 2018 at 10:11)</a>:</h4>
<p>a good way of getting them is to compile a project, thus getting a bunch of .olean files, and then changing the version of Lean you're using</p>

<a name="125298720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125298720" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125298720">Kevin Buzzard (Apr 19 2018 at 10:11)</a>:</h4>
<p>so the first thing you need to do is to rule this out</p>

<a name="125298759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125298759" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125298759">Kevin Buzzard (Apr 19 2018 at 10:12)</a>:</h4>
<p>and the second big question is whether you can reliably reproduce the segfault</p>

<a name="125298764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125298764" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125298764">Kevin Buzzard (Apr 19 2018 at 10:12)</a>:</h4>
<p>and if you can, then you get an achievement</p>

<a name="125298766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125298766" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125298766">Kevin Buzzard (Apr 19 2018 at 10:12)</a>:</h4>
<p>and you're allowed to post an issue to the lean repo</p>

<a name="125298780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125298780" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125298780">Kevin Buzzard (Apr 19 2018 at 10:13)</a>:</h4>
<p>I've had a couple recently but I couldn't reproduce them, annoyingly</p>

<a name="125298821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125298821" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125298821">Kevin Buzzard (Apr 19 2018 at 10:14)</a>:</h4>
<p>(the moment I get one, I hit ctrl-Z to go back a bit, ctrl-shift-P Lean:restart to restart Lean, and then try typing exactly the same keys again)</p>

<a name="125298842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125298842" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125298842">Kevin Buzzard (Apr 19 2018 at 10:15)</a>:</h4>
<p>I am really really looking forwards to the stability of 3.4 + mathlib, but until then I have plenty to do :-)</p>

<a name="125299255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125299255" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125299255">Sebastian Ullrich (Apr 19 2018 at 10:27)</a>:</h4>
<p>Just to be clear, any issues happening _after_ Lean was started successfully should not be elan's fault :)</p>

<a name="125301335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125301335" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125301335">Johan Commelin (Apr 19 2018 at 11:33)</a>:</h4>
<p>So <code>find . -name *.olean</code> finds nothing. Which means the first option is ruled out. I guess. Now I will start the backtracking.</p>

<a name="125301402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125301402" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125301402">Sebastian Ullrich (Apr 19 2018 at 11:35)</a>:</h4>
<p>The .olean version mismatch problem has been fixed for quite some time</p>

<a name="125306980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125306980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125306980">Johan Commelin (Apr 19 2018 at 14:04)</a>:</h4>
<p>Can Lean segfault if it runs out of memory? I opened a file from Kevin's lean-stacks-project and I had not compiled anything before. I only have 4GB in my rusty Thinkpad (no swap). So I think that Lean maybe ran out of memory.</p>

<a name="125307443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125307443" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125307443">Sebastian Ullrich (Apr 19 2018 at 14:14)</a>:</h4>
<p>There have been many ways for Lean to segfault so far, but that one would be new :)</p>

<a name="125307469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125307469" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125307469">Johan Commelin (Apr 19 2018 at 14:15)</a>:</h4>
<p>So, should I run <code>leanpkg build</code> or something similar? Ought that work?</p>

<a name="125307522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125307522" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125307522">Sebastian Ullrich (Apr 19 2018 at 14:16)</a>:</h4>
<p>Worth a try, at least then you know it's easily reproducible</p>

<a name="125307543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125307543" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125307543">Johan Commelin (Apr 19 2018 at 14:17)</a>:</h4>
<div class="codehilite"><pre><span></span>$ leanpkg build
configuring leantest 0.1
mathlib: trying to update _target/deps/mathlib to revision 7d1ab388bb097db5d631d11892e8f110e1f2e9cd
&gt; git checkout --detach 7d1ab388bb097db5d631d11892e8f110e1f2e9cd    # in directory _target/deps/mathlib
HEAD is now at 7d1ab38 feat(list/basic,...): minor modifications &amp; additions
lean-stacks-project: trying to update _target/deps/lean-stacks-project to revision a2204862a0c20c4ea4f98d5685c1a51a3b0279d3
&gt; git checkout --detach a2204862a0c20c4ea4f98d5685c1a51a3b0279d3    # in directory _target/deps/lean-stacks-project
HEAD is now at a220486 Merge branch &#39;master&#39; of github.com:kbuzzard/lean-stacks-project
&gt; lean --make src
</pre></div>

<a name="125307604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125307604" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125307604">Johan Commelin (Apr 19 2018 at 14:18)</a>:</h4>
<p>This completed immediately...</p>

<a name="125307607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125307607" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125307607">Johan Commelin (Apr 19 2018 at 14:18)</a>:</h4>
<p>Doesn't do any compiling at all</p>

<a name="125307844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125307844" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125307844">Sebastian Ullrich (Apr 19 2018 at 14:24)</a>:</h4>
<p>Is your segfaulting file saved in the <code>src</code> directory?</p>

<a name="125316120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125316120" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125316120">Johan Commelin (Apr 19 2018 at 17:34)</a>:</h4>
<p>No, the <code>src/</code> dir is empty</p>

<a name="125325431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125325431" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125325431">Sebastian Ullrich (Apr 19 2018 at 21:03)</a>:</h4>
<p>You should save your Lean files in <code>src</code>, as described in <a href="https://leanprover.github.io/reference/using_lean.html#directory-layout" target="_blank" title="https://leanprover.github.io/reference/using_lean.html#directory-layout">https://leanprover.github.io/reference/using_lean.html#directory-layout</a></p>

<a name="125384466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125384466" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125384466">Johan Commelin (Apr 20 2018 at 08:21)</a>:</h4>
<p>Sorry, I'm completely confused. As you can see from my log above, I only ran <code>leanpkg add</code> to add mathlib and lean-stacks-project. Both are added to <code>_target/deps/</code>. The leave <code>src/</code> empty. What am I doing wrong?</p>

<a name="125391323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125391323" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125391323">Kevin Buzzard (Apr 20 2018 at 08:39)</a>:</h4>
<p>Here's how you're supposed to run the stacks project.</p>

<a name="125391361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125391361" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125391361">Kevin Buzzard (Apr 20 2018 at 08:39)</a>:</h4>
<p>First, clone the stacks project.</p>

<a name="125391523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125391523" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125391523">Kevin Buzzard (Apr 20 2018 at 08:40)</a>:</h4>
<p>Then make it into a lean package with some leanpkg command which I forgot</p>

<a name="125391558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125391558" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125391558">Kevin Buzzard (Apr 20 2018 at 08:40)</a>:</h4>
<p>then build it</p>

<a name="125391670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125391670" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125391670">Kevin Buzzard (Apr 20 2018 at 08:40)</a>:</h4>
<p>Here's how you're supposed to make a new project with the stacks project as a dependency</p>

<a name="125391716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125391716" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125391716">Kevin Buzzard (Apr 20 2018 at 08:40)</a>:</h4>
<p>First make a directory for your new project</p>

<a name="125391732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125391732" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125391732">Johan Commelin (Apr 20 2018 at 08:40)</a>:</h4>
<p>Ok, I see. I thought you had to <code>leanpkg add</code> it</p>

<a name="125391813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125391813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125391813">Kevin Buzzard (Apr 20 2018 at 08:40)</a>:</h4>
<p>then use leanpkg add to add the stacks project</p>

<a name="125391845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125391845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125391845">Kevin Buzzard (Apr 20 2018 at 08:41)</a>:</h4>
<p>I think I've got it straight.</p>

<a name="125391887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125391887" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125391887">Johan Commelin (Apr 20 2018 at 08:41)</a>:</h4>
<p>Aha, I hope this helps...</p>

<a name="125391925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125391925" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125391925">Kevin Buzzard (Apr 20 2018 at 08:41)</a>:</h4>
<p>On behalf of the community I apologise for the lack of docs and the general difficulty of finding the docs you need</p>

<a name="125391958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125391958" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125391958">Kevin Buzzard (Apr 20 2018 at 08:41)</a>:</h4>
<p>we are working on this problem</p>

<a name="125392130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125392130" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125392130">Kevin Buzzard (Apr 20 2018 at 08:41)</a>:</h4>
<p>What happens in practice is that Sebastian does a really good job of writing all these package managers</p>

<a name="125392200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125392200" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125392200">Kevin Buzzard (Apr 20 2018 at 08:42)</a>:</h4>
<p>and then he explains how things work here</p>

<a name="125392247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125392247" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125392247">Kevin Buzzard (Apr 20 2018 at 08:42)</a>:</h4>
<p>and everyone learns</p>

<a name="125392513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125392513" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125392513">Kevin Buzzard (Apr 20 2018 at 08:42)</a>:</h4>
<p>and then either stuff doesn't get written, or stuff gets written but in some place you might not expect, or stuff doesn't get written and then the older stuff is written but out of date and wrong.</p>

<a name="125392533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125392533" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125392533">Johan Commelin (Apr 20 2018 at 08:42)</a>:</h4>
<p>Right, I'll try to figure out the command to turn the clone into a lean package</p>

<a name="125392547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125392547" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125392547">Patrick Massot (Apr 20 2018 at 08:42)</a>:</h4>
<p>Yes we are working on it. I really for big improvements in the next few weeks</p>

<a name="125392876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125392876" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125392876">Kevin Buzzard (Apr 20 2018 at 08:43)</a>:</h4>
<p>To make matters worse, and by "worse" I mean "better", we now have elan, which is something else</p>

<a name="125392932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125392932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125392932">Johan Commelin (Apr 20 2018 at 08:44)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Could it be that you mean <code>leanpkg configure</code> to download the dependencies?</p>

<a name="125392979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125392979" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125392979">Patrick Massot (Apr 20 2018 at 08:44)</a>:</h4>
<p>Mathlib goes 3.4, elan matures, TPIL and refman get updated and everything will become much easier</p>

<a name="125393016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125393016" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125393016">Kevin Buzzard (Apr 20 2018 at 08:44)</a>:</h4>
<p>and the most comprehensive docs on elan are obtained by searching for elan here :-)</p>

<a name="125393109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125393109" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125393109">Kevin Buzzard (Apr 20 2018 at 08:44)</a>:</h4>
<p>"Mathlib goes 3.4" -- here's hoping!</p>

<a name="125393225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125393225" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125393225">Kevin Buzzard (Apr 20 2018 at 08:44)</a>:</h4>
<p>Presumably you noticed the rather terrifying-looking stumbling block</p>

<a name="125393596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125393596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125393596">Kevin Buzzard (Apr 20 2018 at 08:45)</a>:</h4>
<p>One thing I love about Lean is that we are free to add various type annotations everywhere if we get confused</p>

<a name="125393614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125393614" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125393614">Kevin Buzzard (Apr 20 2018 at 08:45)</a>:</h4>
<p>and I get confused a lot</p>

<a name="125394557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125394557" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125394557">Kevin Buzzard (Apr 20 2018 at 08:48)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> line 16 of an old commit</p>

<a name="125394572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125394572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125394572">Kevin Buzzard (Apr 20 2018 at 08:48)</a>:</h4>
<p><a href="https://github.com/leanprover/lean/commit/37bde20d07dc28b7fd3e84a1c768b9ce547bd5a8#diff-93c4834f2a585510be668daf86b8e81fR16" target="_blank" title="https://github.com/leanprover/lean/commit/37bde20d07dc28b7fd3e84a1c768b9ce547bd5a8#diff-93c4834f2a585510be668daf86b8e81fR16">https://github.com/leanprover/lean/commit/37bde20d07dc28b7fd3e84a1c768b9ce547bd5a8#diff-93c4834f2a585510be668daf86b8e81fR16</a></p>

<a name="125394649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125394649" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125394649">Kevin Buzzard (Apr 20 2018 at 08:48)</a>:</h4>
<p>That was when mathlib was called library_dev</p>

<a name="125394787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125394787" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125394787">Kevin Buzzard (Apr 20 2018 at 08:48)</a>:</h4>
<p>When the docs moved into the reference manual, some of those old docs got lost</p>

<a name="125394963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125394963" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125394963">Johan Commelin (Apr 20 2018 at 08:49)</a>:</h4>
<p>Ok, thanks!</p>

<a name="125395693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125395693" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125395693">Kevin Buzzard (Apr 20 2018 at 08:51)</a>:</h4>
<p>You seem to be right -- the "creating new packages" docs survived but the "working on existing packages" para got lost.</p>

<a name="125396463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125396463" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125396463">Johan Commelin (Apr 20 2018 at 08:52)</a>:</h4>
<p>Whoohoo, now <code>leanpkg build</code> is actually doing something!</p>

<a name="125396803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125396803" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125396803">Kevin Buzzard (Apr 20 2018 at 08:53)</a>:</h4>
<p>I would go and have a cup of tea</p>

<a name="125396981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125396981" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125396981">Kevin Buzzard (Apr 20 2018 at 08:54)</a>:</h4>
<p>I would also recommend maximising your console window and using ctrl-(minus key) to minimise your font size</p>

<a name="125397420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125397420" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125397420">Kevin Buzzard (Apr 20 2018 at 08:55)</a>:</h4>
<p>that way successful compilation of a file whose full path is more than 80 characters doesn't result in your terminal being filled with garbage</p>

<a name="125397837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125397837" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125397837">Johan Commelin (Apr 20 2018 at 08:56)</a>:</h4>
<p>I see... I'm already running fullscreen. I'm about to get a computer account at the department, and I'm going to ask for a second screen on my desk.</p>

<a name="125397850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125397850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125397850">Kevin Buzzard (Apr 20 2018 at 08:56)</a>:</h4>
<p>[and note the message I sent you yesterday about certain files which have errors in as they are WIPs; I know it's a bit unprofessional but I develop on more than one machine and github is just a convenient way to store my half-written files]</p>

<a name="125397980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125397980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125397980">Johan Commelin (Apr 20 2018 at 08:56)</a>:</h4>
<p>Running VScode on a 12" Thinkpad is horrible</p>

<a name="125398040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125398040" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125398040">Kevin Buzzard (Apr 20 2018 at 08:56)</a>:</h4>
<p>I am absolutely serious when I say</p>

<a name="125398142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125398142" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125398142">Kevin Buzzard (Apr 20 2018 at 08:56)</a>:</h4>
<p>that I run VS Code on a laptop with a medium size screen</p>

<a name="125398190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125398190" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125398190">Kevin Buzzard (Apr 20 2018 at 08:56)</a>:</h4>
<p>and the fact that it was horrible</p>

<a name="125398203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125398203" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125398203">Johan Commelin (Apr 20 2018 at 08:57)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Yes, I saw that message. No problem. I think branches could help you there. You can push WIP branches to github as well.</p>

<a name="125398209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125398209" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125398209">Kevin Buzzard (Apr 20 2018 at 08:57)</a>:</h4>
<p>actually made me bite the bullet and start wearing glasses</p>

<a name="125398256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125398256" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125398256">Kevin Buzzard (Apr 20 2018 at 08:57)</a>:</h4>
<p>and now I have glasses (for reading)</p>

<a name="125398298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125398298" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125398298">Kevin Buzzard (Apr 20 2018 at 08:57)</a>:</h4>
<p>I can just minimise the font to quite small :-)</p>

<a name="125398440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125398440" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125398440">Kevin Buzzard (Apr 20 2018 at 08:57)</a>:</h4>
<p>I am not good at branches yet.</p>

<a name="125398475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125398475" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125398475">Kevin Buzzard (Apr 20 2018 at 08:57)</a>:</h4>
<p>but I am getting there.</p>

<a name="125398688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125398688" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125398688">Kevin Buzzard (Apr 20 2018 at 08:58)</a>:</h4>
<p>I never needed them before because Kenny and Chris work on localised code and don't care if other stuff doesn't compile</p>

<a name="125398741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125398741" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125398741">Kevin Buzzard (Apr 20 2018 at 08:58)</a>:</h4>
<p>and nobody else has ever paid any attention to the project :-)</p>

<a name="125398791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125398791" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125398791">Kevin Buzzard (Apr 20 2018 at 08:58)</a>:</h4>
<p>We are nearly done though.</p>

<a name="125399260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125399260" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125399260">Johan Commelin (Apr 20 2018 at 08:59)</a>:</h4>
<blockquote>
<p>and nobody else has ever paid any attention to the project :-)</p>
</blockquote>
<p>I'm sorry for being curious</p>

<a name="125399367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125399367" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125399367">Johan Commelin (Apr 20 2018 at 08:59)</a>:</h4>
<p>I should just wait a couple of days (-;</p>

<a name="125399566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125399566" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125399566">Kevin Buzzard (Apr 20 2018 at 09:00)</a>:</h4>
<p>I just this morning pushed a version of tah01HR which contains a concrete endgame</p>

<a name="125399695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125399695" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125399695">Kevin Buzzard (Apr 20 2018 at 09:00)</a>:</h4>
<p>i.e. "we need to prove this lemma and that lemma and then just glue everything together"</p>

<a name="125399936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125399936" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125399936">Kevin Buzzard (Apr 20 2018 at 09:00)</a>:</h4>
<p>I think I am right when I say that mathlib compiles with the nightly of 6th April</p>

<a name="125399993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125399993" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125399993">Kevin Buzzard (Apr 20 2018 at 09:01)</a>:</h4>
<p>and the project should work with that</p>

<a name="125400371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125400371" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125400371">Johan Commelin (Apr 20 2018 at 09:01)</a>:</h4>
<p>So far the compile is doing its job perfectly (-;</p>

<a name="125400434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125400434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125400434">Patrick Massot (Apr 20 2018 at 09:01)</a>:</h4>
<p>You don't have to guess here, it's right there: <a href="https://github.com/leanprover/mathlib/blob/master/leanpkg.toml#L4" target="_blank" title="https://github.com/leanprover/mathlib/blob/master/leanpkg.toml#L4">https://github.com/leanprover/mathlib/blob/master/leanpkg.toml#L4</a></p>

<a name="125400646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125400646" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125400646">Kevin Buzzard (Apr 20 2018 at 09:02)</a>:</h4>
<p>aah, another undocumented gem ;-)</p>

<a name="125400783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125400783" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125400783">Johan Commelin (Apr 20 2018 at 09:02)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> Yes, now I only need to convince my laptop of that (-;</p>

<a name="125408071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125408071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125408071">Patrick Massot (Apr 20 2018 at 09:21)</a>:</h4>
<p>Did you put that same line in your own project <code>leanpkg.toml</code>?</p>

<a name="125408162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125408162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125408162">Kevin Buzzard (Apr 20 2018 at 09:21)</a>:</h4>
<p>if he cloned my project then it should be there</p>

<a name="125408164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125408164" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125408164">Johan Commelin (Apr 20 2018 at 09:21)</a>:</h4>
<p>Atm I just cloned the lean-stacks-project repo, which has its own toml</p>

<a name="125408296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125408296" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125408296">Kevin Buzzard (Apr 20 2018 at 09:22)</a>:</h4>
<p>So the system does actually work</p>

<a name="125408297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125408297" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125408297">Patrick Massot (Apr 20 2018 at 09:22)</a>:</h4>
<p>what does <code>which leanpkg</code> tells you?</p>

<a name="125408321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125408321" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125408321">Kevin Buzzard (Apr 20 2018 at 09:22)</a>:</h4>
<p>it's just that we need to document it better</p>

<a name="125408391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125408391" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125408391">Johan Commelin (Apr 20 2018 at 09:22)</a>:</h4>
<p>And <code>elan</code> parsed it, and made me use the right version of <code>leanpkg</code> and <code>lean</code> <span class="emoji emoji-1f389" title="tada">:tada:</span></p>

<a name="125408557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125408557" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125408557">Johan Commelin (Apr 20 2018 at 09:23)</a>:</h4>
<div class="codehilite"><pre><span></span>$ which leanpkg
/home/jmc/.elan/bin/leanpkg
</pre></div>

<a name="125408605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125408605" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125408605">Patrick Massot (Apr 20 2018 at 09:23)</a>:</h4>
<p>ok, it's all fine</p>

<a name="125408758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125408758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125408758">Patrick Massot (Apr 20 2018 at 09:23)</a>:</h4>
<p>also, make sure you never ever define a leanpath variable in VScode</p>

<a name="125408832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125408832" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125408832">Patrick Massot (Apr 20 2018 at 09:23)</a>:</h4>
<p>this only leads to confusion</p>

<a name="125409071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125409071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125409071">Johan Commelin (Apr 20 2018 at 09:24)</a>:</h4>
<p>I set it to <code>/home/jmc/.elan/bin/lean</code></p>

<a name="125409118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125409118" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125409118">Patrick Massot (Apr 20 2018 at 09:24)</a>:</h4>
<p>You shouldn't</p>

<a name="125409169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125409169" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125409169">Johan Commelin (Apr 20 2018 at 09:24)</a>:</h4>
<p>So what <em>should</em> I do?</p>

<a name="125409362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125409362" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125409362">Patrick Massot (Apr 20 2018 at 09:25)</a>:</h4>
<p>You should simply launch VScode from a terminal where the shell path variable is set correctly (ie <code>which lean</code> points to <code>.elan/bin/lean</code>)</p>

<a name="125409629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125409629" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125409629">Patrick Massot (Apr 20 2018 at 09:25)</a>:</h4>
<p>which will happen if you have <code>source $HOME/.elan/env</code> in your initialization file (<code>.profile</code> or <code>.bashrc</code> or...)</p>

<a name="125410457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125410457" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125410457">Johan Commelin (Apr 20 2018 at 09:28)</a>:</h4>
<p>Ok, that makes sense</p>

<a name="125410489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125410489" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125410489">Johan Commelin (Apr 20 2018 at 09:28)</a>:</h4>
<p>I'll do that from now on</p>

<a name="125411324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125411324" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125411324">Kevin Buzzard (Apr 20 2018 at 09:30)</a>:</h4>
<p>ha ha, I use leanpath all the time; it points to a symlink :-)</p>

<a name="125411592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125411592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125411592">Kevin Buzzard (Apr 20 2018 at 09:31)</a>:</h4>
<p>Johan -- I haven't used elan at all yet but I just changed the README in lean-stacks-project to explain what I think you just did.</p>

<a name="125411895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125411895" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125411895">Kevin Buzzard (Apr 20 2018 at 09:32)</a>:</h4>
<p>Feel free to submit a PR explaining elan. I have not even attempted to find out whether elan has docs; I have other things to worry about currently :-)</p>

<a name="125412651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125412651" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125412651">Johan Commelin (Apr 20 2018 at 09:34)</a>:</h4>
<p>If my compile succeeds, then the first thing I will do is write some small docs and PR them.</p>

<a name="125423318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125423318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125423318">Patrick Massot (Apr 20 2018 at 10:05)</a>:</h4>
<p>Let me try something (we'll see if we can PR later). Instruction for a first time user of Lean under linux:</p>
<ul>
<li>make sure <a href="https://code.visualstudio.com/download" target="_blank" title="https://code.visualstudio.com/download">VScode</a> is installed</li>
<li>launch VScode and install the Lean extension by clicking the extension icon in the view bar at left and searching for lean. quit VScode for ow</li>
<li>make sure <code>git</code> and <code>curl</code> are installed, using your distrib package manager</li>
<li><code>curl https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh -sSf | sh</code> and type enter when a question is asked. Then add <code>source .elan/env</code> to your shell initialization script, say <code>~/.bashrc</code>, and source it in the current terminal (or relaunch a new terminal).</li>
<li>The previous step downloaded the latest stable release, that may be too recent or too old for mathlib, and you really want mathlib. Have a look at <a href="https://github.com/leanprover/mathlib/blob/master/leanpkg.toml#L4" target="_blank" title="https://github.com/leanprover/mathlib/blob/master/leanpkg.toml#L4">https://github.com/leanprover/mathlib/blob/master/leanpkg.toml#L4</a> to see what is the nightly mathlib currently wants. Say you see <code>nightly-2018-04-06</code>. Then run <code>elan toolchain install nightly-2018-04-06</code>.</li>
<li>Now we want some playground to experiment. Use <code>elan run nightly-2018-04-06 leanpkg new my_playground</code>. This will  create a <code>my_playground</code> directory with a lean project layout. </li>
<li>Go to that directory and type <code>leanpkg add leanprover/mathlib</code> this will download mathlib and put it inside <code>my_playground/_target/deps</code>,</li>
<li>At this point you can already create some lean file in <code>my_playground/src</code>, launch VScode, go to and play with Lean by opening the file, typing <code>Ctrl-shift-enter</code> to open Lean message windows, and type, say <code>#check 1</code> to see the result</li>
<li>You cant also use <code>import group_theory.subgroup</code> and then <code>#check is_subgroup</code>. But this will use uncompiled version of mathlib, which is very inefficient. If you run <code>leanpkg build</code> from inside <code>my_playground</code> then it will compile only files which are dependencies of mathlib <code>group_theory/subgroup.lean</code>.</li>
<li>If you want to play more, it's better to compile all mathlib once and for all. You can do this by going into <code>my_playground/_target/deps/mathlib</code>, type <code>lean --make</code>and go get some coffee.</li>
</ul>

<a name="125424229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125424229" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125424229">Patrick Massot (Apr 20 2018 at 10:08)</a>:</h4>
<p>That being said, we really need mathlib nightlies (ie. precompiled mathlib)</p>

<a name="125424479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125424479" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125424479">Patrick Massot (Apr 20 2018 at 10:08)</a>:</h4>
<p>It makes no sense that curious potential users have to wait for mathlib to compile</p>

<a name="125428649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125428649" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125428649">Johan Commelin (Apr 20 2018 at 10:20)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> I think that is a very good start</p>

<a name="125428740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125428740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125428740">Johan Commelin (Apr 20 2018 at 10:21)</a>:</h4>
<p>I would also like a small section on how to work on an existing project, like lean-stacks-project</p>

<a name="125428806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125428806" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125428806">Kevin Buzzard (Apr 20 2018 at 10:21)</a>:</h4>
<p>You can copy that from my README</p>

<a name="125428860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125428860" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125428860">Kevin Buzzard (Apr 20 2018 at 10:21)</a>:</h4>
<p>except that it should be updated to use elan</p>

<a name="125495917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125495917" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125495917">Simon Hudon (Apr 21 2018 at 14:59)</a>:</h4>
<p>In elan, when downloading Lean and its library, would it be possible to add a <code>leanpkg.toml</code> file at the root of <code>library</code>. That would make it easier to browse with emacs.</p>

<a name="125496101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125496101" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125496101">Sebastian Ullrich (Apr 21 2018 at 15:05)</a>:</h4>
<p>What parts of browsing would that change?</p>

<a name="125496250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125496250" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125496250">Simon Hudon (Apr 21 2018 at 15:11)</a>:</h4>
<p>When I open <code>init/meta/tactic.lean</code> in emacs, it tries to start a lean server and fails and <code>M-.</code> won't help <br>
me go to a definition</p>

<a name="125496453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125496453" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125496453">Sebastian Ullrich (Apr 21 2018 at 15:19)</a>:</h4>
<p>Oh, it looks like we forgot to include <code>library/leanpkg.path</code> in the releases. I'll fix it for the future.</p>

<a name="125496722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125496722" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125496722">Simon Hudon (Apr 21 2018 at 15:28)</a>:</h4>
<p>Can <code>leanpkg.path</code> specify the version of <code>lean</code> to launch when editing the files?</p>

<a name="125496876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.4%2C%20elan%2C%20and%20mathlib/near/125496876" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/9593834elanandmathlib.html#125496876">Sebastian Ullrich (Apr 21 2018 at 15:34)</a>:</h4>
<p>Ah, you are right. I guess injecting a <code>leanpkg.toml</code> file could indeed be the best solution.</p>


{% endraw %}

{% include archive_update.html %}