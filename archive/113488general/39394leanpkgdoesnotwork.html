---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/39394leanpkgdoesnotwork.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html">leanpkg does not work</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="129424899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129424899" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129424899">Blair Shi (Jul 10 2018 at 18:00)</a>:</h4>
<p>after git clone Xena-UROP-2018 from GitHub, I want to do <code>leanpkg upgrade</code> but it failed and post many error:</p>
<p><code>/usr/local/leanpkg/leanpkg/main.lean:1:0: error: file 'init' not found in the LEAN_PATH
/usr/local/leanpkg/leanpkg/resolve.lean:1:0: error: file 'init' not found in the LEAN_PATH
/usr/local/leanpkg/leanpkg/manifest.lean:1:0: error: file 'init' not found in the LEAN_PATH
/usr/local/leanpkg/leanpkg/toml.lean:1:0: error: file 'init' not found in the LEAN_PATH </code></p>
<p>I don't know how to do.</p>

<a name="129431669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129431669" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129431669">Kevin Buzzard (Jul 10 2018 at 20:13)</a>:</h4>
<p>Which OS?</p>

<a name="129431724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129431724" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129431724">Kevin Buzzard (Jul 10 2018 at 20:14)</a>:</h4>
<p>Are you using the command line? What's the output of <code>lean --version</code>?</p>

<a name="129437075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129437075" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129437075">Blair Shi (Jul 10 2018 at 22:10)</a>:</h4>
<p>it gives me <code>Lean (version 3.4.1, commit 17fe3decaf8a, Release)</code></p>

<a name="129437080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129437080" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129437080">Blair Shi (Jul 10 2018 at 22:10)</a>:</h4>
<p>I run this on Mac</p>

<a name="129456013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129456013" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129456013">Sebastian Ullrich (Jul 11 2018 at 07:16)</a>:</h4>
<p>How did you install Lean?</p>

<a name="129456073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129456073" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129456073">Kevin Buzzard (Jul 11 2018 at 07:18)</a>:</h4>
<p>If you type <code>leanpkg</code>, what is the first line of the output? I have files with the same names as those which are giving you errors, in my unix install, but there is no mention of <code>init</code>. It's certainly possible to get it all working on a mac.</p>

<a name="129460129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129460129" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129460129">Sebastian Ullrich (Jul 11 2018 at 09:24)</a>:</h4>
<p><span class="user-mention" data-user-id="119876">@Blair Shi</span></p>

<a name="129460708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129460708" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129460708">Blair Shi (Jul 11 2018 at 09:40)</a>:</h4>
<p>Macos high Sierra 10.13.2</p>

<a name="129460895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129460895" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129460895">Blair Shi (Jul 11 2018 at 09:45)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> </p>
<div class="codehilite"><pre><span></span>dyn3159-100:xena-UROP-2018 shifengzheng$ leanpkg
/usr/local/leanpkg/leanpkg/main.lean:1:0: error: file &#39;init&#39; not found in the LEAN_PATH
</pre></div>

<a name="129460969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129460969" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129460969">Blair Shi (Jul 11 2018 at 09:47)</a>:</h4>
<p><span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> I just downloaded the package <code>lean-3.4.1</code> and then in my vscode I set <br>
<code>    "lean.executablePath": "/Users/shifengzheng/lean-3.4.1-darwin/bin/lean",</code></p>

<a name="129462153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129462153" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129462153">Sebastian Ullrich (Jul 11 2018 at 10:18)</a>:</h4>
<p><span class="user-mention" data-user-id="119876">@Blair Shi</span> Why do you have files in <code>/usr/local/</code> then? Do you have an old Homebrew installation or something like that?</p>

<a name="129462557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129462557" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129462557">Kevin Buzzard (Jul 11 2018 at 10:29)</a>:</h4>
<p><span class="user-mention" data-user-id="119876">@Blair Shi</span> <span class="user-mention" data-user-id="119876">@Blair Shi</span> (wait -- there are two?) the error shows that the version of <code>leanpkg</code> which is running is <em>not</em> the one in <code>Users/shifengzheng/lean-3.4.1-darwin/bin/</code>, it is some other version installed in <code>usr/local</code>. You might want to completely remove the <code>/usr/local/leanpkg</code> directory and add <code>Users/shifengzheng/lean-3.4.1-darwin/bin/</code> to the path on your command line</p>

<a name="129462558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129462558" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129462558">Blair Shi (Jul 11 2018 at 10:29)</a>:</h4>
<p><span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span>  before I did not have <code>leanpkg</code>in my <code>/usr/local/</code> but when I typed <code>leanpkg</code> in terminal, it reported <code>&lt;unknown&gt;:1:1: error: file '/usr/local/leanpkg/leanpkg/main.lean' not found</code>. So I put leanpkg into my <code>/usr/local/</code></p>

<a name="129462561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129462561" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129462561">Kevin Buzzard (Jul 11 2018 at 10:29)</a>:</h4>
<p>I don't think you can just move <code>leanpkg</code> and hope for things to still work</p>

<a name="129462565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129462565" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129462565">Kevin Buzzard (Jul 11 2018 at 10:29)</a>:</h4>
<p>I think you have to move the entire installation</p>

<a name="129462644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129462644" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129462644">Kevin Buzzard (Jul 11 2018 at 10:30)</a>:</h4>
<p>What I'm saying is that you can move the directory <code>/Users/shifengzheng/lean-3.4.1-darwin</code> to anywhere you like</p>

<a name="129462648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129462648" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129462648">Kevin Buzzard (Jul 11 2018 at 10:30)</a>:</h4>
<p>but you should leave the contents intact.</p>

<a name="129462654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129462654" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129462654">Kevin Buzzard (Jul 11 2018 at 10:30)</a>:</h4>
<p>When you've decided where to put it, point VS Code and your command line PATH to it, and then things should be OK.</p>

<a name="129465999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129465999" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129465999">Blair Shi (Jul 11 2018 at 12:00)</a>:</h4>
<p>I moved <code>lean-3.4.1-darwin</code> to <code>/usr/local/</code> and added path to LEAN_PATH and removed the previous <code>leanpkg</code>in <code>local</code></p>
<div class="codehilite"><pre><span></span>dyn3159-100:xena-UROP-2018 shifengzheng$ echo $LEAN_PATH
/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/lean-3.4.1-darwin/bin/
</pre></div>


<p>But stil not work. </p>
<div class="codehilite"><pre><span></span>dyn3159-100:xena-UROP-2018 shifengzheng$ leanpkg
&lt;unknown&gt;:1:1: error: file &#39;/usr/local/leanpkg/leanpkg/main.lean&#39; not found
</pre></div>


<p>Did I set the wrong path or did I miss to do something?</p>

<a name="129466184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129466184" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129466184">Sebastian Ullrich (Jul 11 2018 at 12:04)</a>:</h4>
<p>Kevin said to modify <code>PATH</code>, not <code>LEAN_PATH</code>. Please <code>unset LEAN_PATH</code>.</p>

<a name="129466360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129466360" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129466360">Sebastian Ullrich (Jul 11 2018 at 12:08)</a>:</h4>
<p>Could you post the output of <code>which leanpkg</code> and <code>bash -x leanpkg</code>?</p>

<a name="129466476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129466476" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129466476">Blair Shi (Jul 11 2018 at 12:11)</a>:</h4>
<p><span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span>  sorry for my misunderstanding. I <code>unset LEAN_PATH</code> and did what you said</p>
<div class="codehilite"><pre><span></span>dyn3159-100:xena-UROP-2018 shifengzheng$ which leanpkg
/usr/local/bin/leanpkg
dyn3159-100:xena-UROP-2018 shifengzheng$ bash -x leanpkg
++ uname
+ unamestr=Darwin
+ [[ Darwin == \D\a\r\w\i\n ]]
+ command -v greadlink
+ READLINK=greadlink
+++ greadlink -f leanpkg
++ dirname /Users/shifengzheng/xena-UROP-2018/leanpkg
+ leandir=/Users/shifengzheng/xena-UROP-2018/..
++ greadlink -f /Users/shifengzheng/xena-UROP-2018/..
+ leandir=/Users/shifengzheng
+ librarydir=/Users/shifengzheng/lib/lean
+ test -d /Users/shifengzheng/lib/lean
+ librarydir=/Users/shifengzheng
+ LEAN_PATH=/Users/shifengzheng/library:/Users/shifengzheng/leanpkg
+ PATH=/Users/shifengzheng/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin
+ exec lean --run /Users/shifengzheng/leanpkg/leanpkg/main.lean
&lt;unknown&gt;:1:1: error: file &#39;/Users/shifengzheng/leanpkg/leanpkg/main.lean&#39; not found
</pre></div>

<a name="129466541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129466541" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129466541">Sebastian Ullrich (Jul 11 2018 at 12:12)</a>:</h4>
<p>Apparently you still have an old <code>leanpkg</code> at <code>/usr/local/bin</code></p>

<a name="129466576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129466576" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129466576">Kevin Buzzard (Jul 11 2018 at 12:13)</a>:</h4>
<p>Blair -- I'll be at Imperial in about 10 minutes and will try and sort things out. Sorry it's taken so long -- I had other things to do this morning.</p>

<a name="129466958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanpkg%20does%20not%20work/near/129466958" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/39394leanpkgdoesnotwork.html#129466958">Blair Shi (Jul 11 2018 at 12:19)</a>:</h4>
<p>I find a solution to deal with this issue. I just put the <code>Xena-UROP-2018</code> to my <code>my_playground</code> which already set up <code>mathlib</code>. Now it works</p>


{% endraw %}
