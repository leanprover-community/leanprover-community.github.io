---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/22895applyfun.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html">apply_fun</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="169644795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169644795" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169644795">Patrick Massot (Jul 04 2019 at 12:41)</a>:</h4>
<p>I'm trying to get rid of all the small lemmas and tactic I wrote during my undergrad course using Lean. The next thing is <a href="https://gist.github.com/PatrickMassot/a54fb57815ce748ebc907d66f491bb0d" target="_blank" title="https://gist.github.com/PatrickMassot/a54fb57815ce748ebc907d66f491bb0d">https://gist.github.com/PatrickMassot/a54fb57815ce748ebc907d66f491bb0d</a> which is a small tactic wrapping <code>congr_arg</code>. I know it's kind of stupid, but I didn't feel like explaining to students that going from <code>h : a = b</code> to <code>h : f(a) = f(b)</code> required applying a lemma (especially with a weird name).  In real world we say "apply f" to the assumption h, so I wrote <code>apply_fun f at h</code>. Then I generalized to the case of inequalities, but didn't actually use that version in the end. The question is: can I prepare a mathlib PR? I don't expect this tactic to be used much in mathlib itself, but since I managed to get <code>push_neg</code> and <code>contrapose</code>in then maybe teaching tactics are fine.</p>

<a name="169645404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169645404" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169645404">Simon Hudon (Jul 04 2019 at 12:49)</a>:</h4>
<p>I think we could merge that. For inequalities, how do you feed in a proof that f is monotonic?</p>

<a name="169645804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169645804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169645804">Patrick Massot (Jul 04 2019 at 12:54)</a>:</h4>
<p>I don't understand the question</p>

<a name="169645828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169645828" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169645828">Patrick Massot (Jul 04 2019 at 12:55)</a>:</h4>
<p>Is something unclear in the docstring or examples?</p>

<a name="169645844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169645844" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169645844">Patrick Massot (Jul 04 2019 at 12:55)</a>:</h4>
<p>Or maybe you read the Zulip post but not the gist?</p>

<a name="169646309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169646309" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169646309">Simon Hudon (Jul 04 2019 at 13:01)</a>:</h4>
<p>I didn't read the gist. Sorry. Let me do that now</p>

<a name="169646426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169646426" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169646426">Simon Hudon (Jul 04 2019 at 13:02)</a>:</h4>
<p>There's a <code>mono</code> attribute that the tactic <code>mono</code> uses. You could use it to discharge side goals sometimes</p>

<a name="169646587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169646587" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169646587">Patrick Massot (Jul 04 2019 at 13:04)</a>:</h4>
<p>How would that work?</p>

<a name="169646601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169646601" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169646601">Patrick Massot (Jul 04 2019 at 13:05)</a>:</h4>
<p>Should I try running the mono tactic?</p>

<a name="169647309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169647309" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169647309">Simon Hudon (Jul 04 2019 at 13:14)</a>:</h4>
<p>I think that would be the simplest way to do it</p>

<a name="169648106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169648106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169648106">Patrick Massot (Jul 04 2019 at 13:25)</a>:</h4>
<p>I struggle to find any example that would work for tests. There are almost no <code>mono</code> lemma in mathlib <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>

<a name="169652457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169652457" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169652457">Simon Hudon (Jul 04 2019 at 14:27)</a>:</h4>
<p>Really? What are you looking for?</p>

<a name="169652471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169652471" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169652471">Patrick Massot (Jul 04 2019 at 14:28)</a>:</h4>
<p>I found something</p>

<a name="169652478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169652478" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169652478">Patrick Massot (Jul 04 2019 at 14:28)</a>:</h4>
<p>I'll open a PR</p>

<a name="169652923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169652923" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169652923">Patrick Massot (Jul 04 2019 at 14:34)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/1184" target="_blank" title="https://github.com/leanprover-community/mathlib/pull/1184">https://github.com/leanprover-community/mathlib/pull/1184</a></p>

<a name="169657307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169657307" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169657307">Simon Hudon (Jul 04 2019 at 15:48)</a>:</h4>
<p>It looks good</p>

<a name="169657313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169657313" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169657313">Simon Hudon (Jul 04 2019 at 15:48)</a>:</h4>
<p>The name might not be the best</p>

<a name="169657410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169657410" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169657410">Simon Hudon (Jul 04 2019 at 15:50)</a>:</h4>
<p>I could expect people to understand <code>apply_fun</code> as the same as <code>apply ... in ...</code> in Coq. Against your early intuition, I'd be tempted to mention <code>congr</code> in the name. The tactic might even be unified with <code>congr'</code></p>

<a name="169658887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169658887" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169658887">Patrick Massot (Jul 04 2019 at 16:19)</a>:</h4>
<p>This is a tactic for students, not Coq users...</p>

<a name="169659067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169659067" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169659067">Simon Hudon (Jul 04 2019 at 16:24)</a>:</h4>
<p>That is true but if we want to put it in mathlib, it has to make sense to more than just your students. And comparing to Coq is useful because they have solved similar problems before so making the same choices that they made at least brings in the thought that they put in their choices. Plus, it's good to not be different when we don't need to</p>

<a name="169659199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169659199" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169659199">Johan Commelin (Jul 04 2019 at 16:26)</a>:</h4>
<p>We'll also want the version where you evaluate <code>f = g</code> on the inputs <code>x = y</code>. Is that supported?</p>

<a name="169660698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169660698" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169660698">Patrick Massot (Jul 04 2019 at 16:56)</a>:</h4>
<p>Simon, what name would make you happy?</p>

<a name="169660726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169660726" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169660726">Patrick Massot (Jul 04 2019 at 16:57)</a>:</h4>
<p>Johan, your version can be obtained by apply_fun followed by rw. I don't see how to make something simpler.</p>

<a name="169734875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169734875" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169734875">Jeremy Avigad (Jul 05 2019 at 20:43)</a>:</h4>
<p>Patrick, do you think students really prefer <code>apply_fun f at h</code> to <code>rw h</code>? I know they are not the same, but for purposes like this <code>rw</code> is intuitive, and it is the right idiom.</p>

<a name="169736909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169736909" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169736909">Patrick Massot (Jul 05 2019 at 21:31)</a>:</h4>
<p>I don't understand this question. Those two tactics don't do the same thing</p>

<a name="169737135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169737135" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169737135">Patrick Massot (Jul 05 2019 at 21:36)</a>:</h4>
<p>How do you want to do the example in tactics.md <a href="https://github.com/leanprover-community/mathlib/pull/1184/files" target="_blank" title="https://github.com/leanprover-community/mathlib/pull/1184/files">https://github.com/leanprover-community/mathlib/pull/1184/files</a> with rw?</p>

<a name="169737408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169737408" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169737408">Chris Hughes (Jul 05 2019 at 21:43)</a>:</h4>
<p>have : f x = f y, by rw h,</p>

<a name="169737483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169737483" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169737483">Chris Hughes (Jul 05 2019 at 21:45)</a>:</h4>
<p>40 billion tactics to remember to slightly shorten things isn't necessarily easier than just knowing <code>have</code> and <code>rw</code>, which are more powerful, if more verbose.</p>

<a name="169738494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169738494" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169738494">Reid Barton (Jul 05 2019 at 22:11)</a>:</h4>
<p>When I want to do this I usually also want to replace the old hypothesis, too, though. So I write something like <code>replace h := congr_arg f h</code>. That is already a bit outside the most commonly used tactics, so I wouldn't mind having a specialized way to write it.</p>

<a name="169740345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169740345" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169740345">Yury G. Kudryashov (Jul 05 2019 at 22:58)</a>:</h4>
<p>With just <code>replace</code> and <code>rw</code>: <code>replace h : f x = f y := by rw h</code></p>

<a name="169740366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169740366" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169740366">Yury G. Kudryashov (Jul 05 2019 at 22:59)</a>:</h4>
<p>Though this way one has to write <code>f x = f y</code> explicitly. This might be inconvenient for long <code>x</code> and <code>y</code></p>

<a name="169767785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169767785" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169767785">Patrick Massot (Jul 06 2019 at 13:47)</a>:</h4>
<p>I think none of these alternative capture the fact that we have an atomic operation "apply f to h".</p>

<a name="169881923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_fun/near/169881923" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/22895applyfun.html#169881923">Patrick Massot (Jul 08 2019 at 16:05)</a>:</h4>
<p>Shall we merge <a href="https://github.com/leanprover-community/mathlib/issues/1184" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/1184">#1184</a> then?</p>


{% endraw %}

{% include archive_update.html %}