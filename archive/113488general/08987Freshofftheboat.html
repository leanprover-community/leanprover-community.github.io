---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/08987Freshofftheboat.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html">Fresh off the boat</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="124351061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351061" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351061">Nima (Mar 29 2018 at 04:15)</a>:</h4>
<p>Anyone is willing to prove this example for me? It seems too obvious, but I have not luck doing it within the past hour.</p>
<div class="codehilite"><pre><span></span>universe u

variable {α : Type u}

structure constraint (α:Type u) :=
  cnstr::
  (trv:bool) -- is trivial
  (stt:bool) -- is strict
  (low:bool) -- is lower-bound
  (bnd:α)
open constraint

def setof : constraint α → α → Prop
| (cnstr tt _  _   _  ) _ := tt
| (cnstr _  tt low bnd) a := tt --if low then bnd &lt; a else a &lt; bnd
| (cnstr _  ff low bnd) a := tt --if low then bnd ≤ a else a ≤ bnd

example (c: constraint α) (a:α) : setof c a := sorry
</pre></div>

<a name="124351110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351110" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351110">Kenny Lau (Mar 29 2018 at 04:17)</a>:</h4>
<p>It doesn't even typecheck <span class="user-mention" data-user-id="112062">@Nima</span></p>

<a name="124351152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351152" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351152">Nima (Mar 29 2018 at 04:19)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> Sorry, I  added "open constraint". Now it is typed checked</p>

<a name="124351206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351206" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351206">Simon Hudon (Mar 29 2018 at 04:20)</a>:</h4>
<p>you can prove it as:</p>
<div class="codehilite"><pre><span></span>example (c: constraint α) (a:α) : setof c a :=
by cases c ; trivial
</pre></div>


<p>I believe</p>

<a name="124351263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351263" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351263">Nima (Mar 29 2018 at 04:23)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> internal.lean:21:59: error<br>
trivial tactic failed<br>
state:<br>
α : Type u,<br>
a : α,<br>
trv stt low : bool,<br>
bnd : α<br>
⊢ setof {trv := trv, stt := stt, low := low, bnd := bnd} a</p>

<a name="124351376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351376" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351376">Mario Carneiro (Mar 29 2018 at 04:27)</a>:</h4>
<p>You probably want <code>true</code> instead of <code>tt</code> in the definition of <code>setof</code></p>

<a name="124351484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351484" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351484">Simon Hudon (Mar 29 2018 at 04:30)</a>:</h4>
<p>And you may find it easier to use this definition rather than yours:</p>
<div class="codehilite"><pre><span></span>inductive constraint (a : Type u)
| trivial : constraint
| strict_upper (x : a) : constraint
| strict_lower (x : a) : constraint
| nonstrict_upper (x : a) : constraint
| nonstrict_lower (x : a) : constraint
</pre></div>

<a name="124351488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351488" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351488">Nima (Mar 29 2018 at 04:30)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> <br>
The following gives me the same error</p>
<div class="codehilite"><pre><span></span>def  setof : constraint α → α →  Prop
| (cnstr tt _ _ _ ) _ := true
| (cnstr _ tt low bnd) a := true --if low then bnd &lt; a else a &lt; bnd
| (cnstr _ ff low bnd) a := true --if low then bnd ≤ a else a ≤ bnd
</pre></div>


<p>The following is not typechecked</p>
<div class="codehilite"><pre><span></span>def  setof : constraint α → α →  Prop
| (cnstr true _ _ _ ) _ := true
| (cnstr _ true low bnd) a := true --if low then bnd &lt; a else a &lt; bnd
| (cnstr _ false low bnd) a := true --if low then bnd ≤ a else a ≤ bnd
</pre></div>

<a name="124351496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351496" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351496">Mario Carneiro (Mar 29 2018 at 04:31)</a>:</h4>
<p>The first one is what I mean. FYI you can code block with triple backquote before and after</p>

<a name="124351539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351539" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351539">Mario Carneiro (Mar 29 2018 at 04:32)</a>:</h4>
<div class="codehilite"><pre><span></span>def setof : constraint α → α → Prop
| (cnstr tt _ _ _ ) _ := true
| (cnstr ff tt low bnd) a := true --if low then bnd &lt; a else a &lt; bnd
| (cnstr ff ff low bnd) a := true --if low then bnd ≤ a else a ≤ bnd

example : ∀ (c : constraint α) (a:α), setof c a
| (cnstr tt _ _ _) _ := trivial
| (cnstr ff tt low bnd) a := trivial
| (cnstr ff ff low bnd) a := trivial
</pre></div>

<a name="124351545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351545" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351545">Kenny Lau (Mar 29 2018 at 04:33)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> you don't need after :P</p>

<a name="124351546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351546" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351546">Mario Carneiro (Mar 29 2018 at 04:33)</a>:</h4>
<p>Are you one of those people who leaves off <code>&lt;/html&gt;</code></p>

<a name="124351547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351547" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351547">Mario Carneiro (Mar 29 2018 at 04:33)</a>:</h4>
<p>YOU RUINED THE INTERNET</p>

<a name="124351592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351592">Nima (Mar 29 2018 at 04:35)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Not sure what you mean!?</p>

<a name="124351593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351593" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351593">Mario Carneiro (Mar 29 2018 at 04:35)</a>:</h4>
<p>About what? The example shows how to prove the theorem by cases</p>

<a name="124351594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351594" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351594">Mario Carneiro (Mar 29 2018 at 04:36)</a>:</h4>
<p>my quip about the internet was for kenny's benefit</p>

<a name="124351633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351633" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351633">Mario Carneiro (Mar 29 2018 at 04:36)</a>:</h4>
<p>Note that you need to explicitly specify <code>ff</code> for the latter two cases in the definition of <code>setof</code> for the proof to work</p>

<a name="124351638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351638" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351638">Nima (Mar 29 2018 at 04:37)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Thanks a lot, it worked</p>

<a name="124351677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351677" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351677">Mario Carneiro (Mar 29 2018 at 04:38)</a>:</h4>
<p>Also, if you want to use <code>&lt;</code> you will need an appropriate typeclass, e.g.</p>
<div class="codehilite"><pre><span></span>def setof [linear_order α] : constraint α → α → Prop
| (cnstr tt _ _ _ ) _ := true
| (cnstr ff tt low bnd) a := if low then bnd &lt; a else a &lt; bnd
| (cnstr ff ff low bnd) a := if low then bnd ≤ a else a ≤ bnd
</pre></div>

<a name="124351684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351684" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351684">Nima (Mar 29 2018 at 04:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> too soon for those lessons ;)</p>

<a name="124351726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351726" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351726">Mario Carneiro (Mar 29 2018 at 04:40)</a>:</h4>
<p>I agree with simon though about your encoding; having a bunch of <code>bool</code> flags will make things harder than just having a single inductive case split</p>

<a name="124351776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351776" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351776">Mario Carneiro (Mar 29 2018 at 04:43)</a>:</h4>
<p>You can also replace <code>α → Prop</code> with <code>set α</code> in the definition of <code>setof</code> (they are the same, but <code>set α</code> has more associated notations)</p>

<a name="124351777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351777" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351777">Nima (Mar 29 2018 at 04:43)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Is there any easy explanation for why do I need "to explicitly specify <code>ff</code> for the latter two cases in the definition of <code>setof</code> for the proof to work "</p>

<a name="124351821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351821" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351821">Simon Hudon (Mar 29 2018 at 04:44)</a>:</h4>
<p>And if you want to avoid type classes, you should pick a specific type (e.g. <code>ℕ</code>, <code>ℤ</code>, <code>ℚ</code>, <code>ℝ</code>) and the order will come from there</p>

<a name="124351866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351866" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351866">Simon Hudon (Mar 29 2018 at 04:46)</a>:</h4>
<blockquote>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Is there any easy explanation for why do I need "to explicitly specify <code>ff</code> for the latter two cases in the definition of <code>setof</code> for the proof to work "</p>
</blockquote>
<p>Because your definition has three equations and you can't match against the bools unless you know their values because you use their exact values in the equations</p>

<a name="124351867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351867" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351867">Simon Hudon (Mar 29 2018 at 04:46)</a>:</h4>
<p>E.g.:</p>
<div class="codehilite"><pre><span></span>| (cnstr tt _ _ _ ) _ := true
</pre></div>

<a name="124351870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351870" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351870">Mario Carneiro (Mar 29 2018 at 04:47)</a>:</h4>
<div class="codehilite"><pre><span></span>def setof : constraint α → α → Prop
| (cnstr tt _ _ _ ) _ := true
| (cnstr ff tt low bnd) a := true
| (cnstr ff ff low bnd) a := true
#print prefix setof.equations
-- setof.equations._eqn_1 : ∀ {α : Type u} (low : bool) (bnd a : α), setof {trv := ff, stt := ff, low := low, bnd := bnd} a = true
-- setof.equations._eqn_2 : ∀ {α : Type u} (low : bool) (bnd a : α), setof {trv := ff, stt := tt, low := low, bnd := bnd} a = true
-- setof.equations._eqn_3 : ∀ {α : Type u} (_x _x_1 : bool) (_x_2 _x_3 : α), setof {trv := tt, stt := _x, low := _x_1, bnd := _x_2} _x_3 = true

def setof : constraint α → α → Prop
| (cnstr tt _ _ _ ) _ := true
| (cnstr _ tt low bnd) a := true
| (cnstr _ ff low bnd) a := true
#print prefix setof.equations
-- setof.equations._eqn_1 : ∀ {α : Type u} (low : bool) (bnd a : α), setof {trv := ff, stt := ff, low := low, bnd := bnd} a = true
-- setof.equations._eqn_2 : ∀ {α : Type u} (low : bool) (bnd a : α), setof {trv := ff, stt := tt, low := low, bnd := bnd} a = true
-- setof.equations._eqn_3 : ∀ {α : Type u} (_x : bool) (_x_1 _x_2 : α), setof {trv := tt, stt := ff, low := _x, bnd := _x_1} _x_2 = true
-- setof.equations._eqn_4 : ∀ {α : Type u} (_x : bool) (_x_1 _x_2 : α), setof {trv := tt, stt := tt, low := _x, bnd := _x_1} _x_2 = true
</pre></div>

<a name="124351918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351918" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351918">Mario Carneiro (Mar 29 2018 at 04:48)</a>:</h4>
<p>Actually, the problem is that without specifying that the last two cases are <code>ff</code>, it does its first case split on the second bool, leading to four cases overall (with a superfluous case split on <code>stt</code> in the trivial case). This means that later you will need to case on it in the theorem</p>

<a name="124351924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351924" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351924">Nima (Mar 29 2018 at 04:49)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> So the following from "8.2. Wildcards and Overlapping Patterns" is not that useful " But Lean handles the ambiguity by using the first applicable equation, so the net result is the same "</p>

<a name="124351972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351972" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351972">Mario Carneiro (Mar 29 2018 at 04:50)</a>:</h4>
<p>This has more to do with internals of the heuristics for what to case split when you aren't being explicit about it</p>

<a name="124351976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351976" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351976">Nima (Mar 29 2018 at 04:50)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Got it! Thanks</p>

<a name="124351979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124351979" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124351979">Mario Carneiro (Mar 29 2018 at 04:51)</a>:</h4>
<p>There's really no need to use a variable in the latter cases, you know it's <code>ff</code> and by writing it you tell lean to split there</p>

<a name="124369160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124369160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124369160">Nima (Mar 29 2018 at 14:44)</a>:</h4>
<p>Have I defined <code>has_coe_to_sort</code> correctly? If so, how do I fix the <code>admit</code>s in my proof?</p>
<div class="codehilite"><pre><span></span>inductive constraint
| trv                    : constraint
| stt (bnd:ℕ) (low:Prop) : constraint
| nst (bnd:ℕ) (low:Prop) : constraint

namespace constraint

def setof : constraint → ℕ → Prop :=
begin
  intros c a,
  cases c with bnd lft bnd lft,
    case trv         {exact true},
    case stt bnd lft {exact lft ∧ bnd&lt;a ∨ a &lt; bnd},
    case nst bnd lft {exact lft ∧ bnd≤a ∨ a ≤ bnd},
end

instance constraint_to_sort : has_coe_to_sort constraint :=
  {S := Type, coe := λ S, {x // setof S x}}

example : ∀ (c:constraint) (n:c), setof c n :=
begin
  intros c n,
  cases c,
    trivial,
    begin
      admit
    end,
    begin
      admit
    end
end

end constraint
</pre></div>

<a name="124371359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124371359" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124371359">Kevin Buzzard (Mar 29 2018 at 15:36)</a>:</h4>
<p>This doesn't typecheck for me.</p>

<a name="124371371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124371371" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124371371">Kevin Buzzard (Mar 29 2018 at 15:36)</a>:</h4>
<div class="codehilite"><pre><span></span>invalid `case`, there is no goal tagged with prefix [constraint.stt, bnd, lft]
state:
2 goals
case constraint.stt
a bnd : ℕ,
lft : Prop
⊢ Prop

case constraint.nst
a bnd : ℕ,
lft : Prop
⊢ Prop
</pre></div>

<a name="124371375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124371375" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124371375">Kevin Buzzard (Mar 29 2018 at 15:36)</a>:</h4>
<p>line 13</p>

<a name="124371556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124371556" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124371556">Kevin Buzzard (Mar 29 2018 at 15:40)</a>:</h4>
<p>fixed it</p>

<a name="124371576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124371576" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124371576">Kevin Buzzard (Mar 29 2018 at 15:41)</a>:</h4>
<div class="codehilite"><pre><span></span>def setof : constraint → ℕ → Prop :=
begin
  intros c a,
  cases c with bnd lft bnd lft,
    case trv         {exact true},
    case stt {exact lft ∧ bnd&lt;a ∨ a &lt; bnd},
    case nst {exact lft ∧ bnd≤a ∨ a ≤ bnd},
end
</pre></div>

<a name="124371579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124371579" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124371579">Kevin Buzzard (Mar 29 2018 at 15:41)</a>:</h4>
<p>I'm using a recent lean nightly</p>

<a name="124371678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124371678" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124371678">Nima (Mar 29 2018 at 15:43)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <br>
The following two lines fixed it (replace <code>admit</code>s)<br>
<code>exact @subtype.property nat (setof (stt bnd low)) n</code><br>
<code>exact @subtype.property nat (setof (nst bnd low)) n</code><br>
In fact I can solve the example in the following way</p>
<div class="codehilite"><pre><span></span>example : ∀ (c:constraint) (n:c), setof c n :=
begin
  intros c n,
  exact @subtype.property nat (setof c) n
end
</pre></div>

<a name="124371841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124371841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124371841">Kevin Buzzard (Mar 29 2018 at 15:47)</a>:</h4>
<p>I am confused about what's going on.</p>

<a name="124371847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124371847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124371847">Kevin Buzzard (Mar 29 2018 at 15:47)</a>:</h4>
<p><code>setof c</code> wants a nat, and you give it <code>n</code>, which is a <code>c</code>.</p>

<a name="124375020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124375020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124375020">Nima (Mar 29 2018 at 17:14)</a>:</h4>
<p>Why the following is invalid? <br>
Error Message " invalid universe declaration, 'u_1' shadows a local universe"<br>
If I use <code>variable α : Type u</code> then everything will be fine</p>
<div class="codehilite"><pre><span></span>universe u
constant  α : Type u
variables x y : α
</pre></div>


<p>The following gives me no error (why?):</p>
<div class="codehilite"><pre><span></span>universe u
constant α : Type u
variable x : α
variable y : α
</pre></div>

<a name="124376097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376097" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376097">Nima (Mar 29 2018 at 17:43)</a>:</h4>
<p>I know the following example can be solve by replacing the last line with <code>exact hm</code>. But why I receive a this error:</p>
<div class="codehilite"><pre><span></span>universe u
variable {α : Type u}
constant le : α → α → Prop
example :
∀ (α : Type u)
  (hm : ∃ (m : α), ∀ (m&#39; : α), le m m&#39;),
  (∃ (m : α), ∀ (a : α) , le m a) :=
begin
  intros α hm,
  match hm with ⟨m,hh⟩ := sorry
end
</pre></div>


<p>It gives me</p>
<div class="codehilite"><pre><span></span>tmp.lean:12:2: error
don&#39;t know how to synthesize placeholder
context:
⊢ Type ?

tmp.lean:12:2: error
equation compiler failed (use &#39;set_option trace.eqn_compiler.elim_match true&#39; for additional details)

tmp.lean:12:8: error
unknown identifier &#39;hm&#39;

tmp.lean:12:8: error
don&#39;t know how to synthesize placeholder
context:
⊢ Sort ?

tmp.lean:12:16: error
invalid constructor ⟨...⟩, expected type is not an inductive type
  ?m_1
</pre></div>

<a name="124376139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376139" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376139">Kevin Buzzard (Mar 29 2018 at 17:44)</a>:</h4>
<p>That is funny. Generally I never use constants at all.</p>

<a name="124376145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376145" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376145">Kenny Lau (Mar 29 2018 at 17:44)</a>:</h4>
<p>right, you shouldn't use constant</p>

<a name="124376163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376163" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376163">Nima (Mar 29 2018 at 17:46)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> You mean constant for types, right? Otherwise, how do you assume a relation is given to you?</p>

<a name="124376512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376512" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376512">Kevin Buzzard (Mar 29 2018 at 17:54)</a>:</h4>
<p>I never ever use constants. I would write something like <code>example (le : X -&gt; X -&gt; Prop) : blah</code></p>

<a name="124376522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376522" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376522">Kenny Lau (Mar 29 2018 at 17:55)</a>:</h4>
<p><span class="user-mention" data-user-id="112062">@Nima</span> you use variable</p>

<a name="124376538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376538" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376538">Kevin Buzzard (Mar 29 2018 at 17:55)</a>:</h4>
<p>Or <code>variable</code> yes</p>

<a name="124376552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376552" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376552">Kevin Buzzard (Mar 29 2018 at 17:55)</a>:</h4>
<p>I would use variables or the trick above for an abstract relation.</p>

<a name="124376596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376596">Kevin Buzzard (Mar 29 2018 at 17:56)</a>:</h4>
<p>For a "well-known" one like <code>le</code> I would use the type class system</p>

<a name="124376626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376626" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376626">Kevin Buzzard (Mar 29 2018 at 17:57)</a>:</h4>
<p>Like this:</p>

<a name="124376674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376674" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376674">Kevin Buzzard (Mar 29 2018 at 17:58)</a>:</h4>
<div class="codehilite"><pre><span></span>variables (X : Type) [has_le X]
variables (x y : X)
#check has_le.le x y
#check x ≤ y
</pre></div>

<a name="124376689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376689" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376689">Kevin Buzzard (Mar 29 2018 at 17:58)</a>:</h4>
<p>Making X an instance of class <code>has_le</code> enables me to use the notation <code>\leq</code></p>

<a name="124376695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376695" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376695">Kenny Lau (Mar 29 2018 at 17:58)</a>:</h4>
<p><code>\le</code> :)</p>

<a name="124376696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376696">Kevin Buzzard (Mar 29 2018 at 17:58)</a>:</h4>
<p>no way!</p>

<a name="124376706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376706" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376706">Kevin Buzzard (Mar 29 2018 at 17:59)</a>:</h4>
<p>You'll be telling me I don't have to type <code>\forall</code> next</p>

<a name="124376707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376707" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376707">Kenny Lau (Mar 29 2018 at 17:59)</a>:</h4>
<p>I know the shortest code for the symbols I use :P</p>

<a name="124376709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376709" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376709">Kenny Lau (Mar 29 2018 at 17:59)</a>:</h4>
<p><code>\fo</code></p>

<a name="124376760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376760" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376760">Kevin Buzzard (Mar 29 2018 at 18:00)</a>:</h4>
<p>I discovered that one because I once typed something like <code>\fo4all</code> followed by a space</p>

<a name="124376772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376772">Kevin Buzzard (Mar 29 2018 at 18:00)</a>:</h4>
<p>and was like "wooah, it's magic"</p>

<a name="124376783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376783" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376783">Kevin Buzzard (Mar 29 2018 at 18:00)</a>:</h4>
<p>"it worked anyway"</p>

<a name="124376817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376817" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376817">Kevin Buzzard (Mar 29 2018 at 18:01)</a>:</h4>
<p>Back to the point</p>

<a name="124376872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376872" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376872">Kevin Buzzard (Mar 29 2018 at 18:02)</a>:</h4>
<p>you can write <code>[H : has_le X]</code> if you want to give the construction a name. Otherwise it ends up being called something like <code>_inst_1</code></p>

<a name="124376882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376882" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376882">Kenny Lau (Mar 29 2018 at 18:02)</a>:</h4>
<p>but most of the time you don't want to do that</p>

<a name="124376920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124376920" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124376920">Kevin Buzzard (Mar 29 2018 at 18:03)</a>:</h4>
<p>Right, most of the time you want Lean to figure it out for you</p>

<a name="124377820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124377820" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124377820">Nima (Mar 29 2018 at 18:25)</a>:</h4>
<p>Thanks, <br>
Would you please answer this one as well?</p>
<blockquote>
<p>I know the following example can be solve by replacing the last line with <code>exact hm</code>. But why I receive a this error:</p>
</blockquote>

<a name="124377930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124377930" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124377930">Mario Carneiro (Mar 29 2018 at 18:27)</a>:</h4>
<p>match is not a tactic. If you want to use it you have to say <code>exact match ...</code></p>

<a name="124377984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124377984" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124377984">Mario Carneiro (Mar 29 2018 at 18:28)</a>:</h4>
<p>When you write it there lean gets all sorts of confused in the parsing</p>

<a name="124378010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124378010" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124378010">Mario Carneiro (Mar 29 2018 at 18:29)</a>:</h4>
<p>also <code>match</code> requires <code>end</code> after it</p>

<a name="124378069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124378069" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124378069">Nima (Mar 29 2018 at 18:30)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Awesome!</p>

<a name="124378075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124378075" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124378075">Mario Carneiro (Mar 29 2018 at 18:30)</a>:</h4>
<p>The tactic equivalent of <code>match</code> is <code>cases</code>, but I think you have already discovered this</p>

<a name="124378087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124378087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124378087">Mario Carneiro (Mar 29 2018 at 18:31)</a>:</h4>
<p>so you could use <code>cases hm with m hh,</code> in place of the match line</p>

<a name="124379367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124379367" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124379367">Nima (Mar 29 2018 at 19:03)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Thanks a lot, I finally finished a proof! (super simple one, yet 65 lines!!)</p>

<a name="124383712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124383712" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124383712">Nima (Mar 29 2018 at 20:52)</a>:</h4>
<p>This is about <strong> coercions </strong><br>
The first example in the following code works perfectly fine.<br>
However, the second example cannot be type-checked. I know this direction in general is not possible. But this example, <code>trv α</code> contains all elements of <code>α</code>. So how should I prove the second example?</p>
<div class="codehilite"><pre><span></span>universe u
variables {α : Type u} [linear_order α]

inductive constraint (α:Type u)
| trv                    : constraint
| stt (bnd:α) (low:Prop) : constraint
| nst (bnd:α) (low:Prop) : constraint

namespace constraint

def setof : constraint α → α → Prop :=
begin
  intros c a,
  cases c with bnd low bnd low,
    case trv         {exact true},
    case stt bnd low {exact low ∧ bnd&lt;a ∨ ¬ low ∧ a &lt; bnd},
    case nst bnd low {exact low ∧ bnd≤a ∨ ¬ low ∧ a ≤ bnd},
end

instance constraint_to_sort : has_coe_to_sort (constraint α) :=
  {S := Type u, coe := λ S, {x // setof S x}}

example : ∀ (c:constraint α) (a:c), setof c a :=
begin
  intros c a,
  exact @subtype.property α (setof c) a
end

example : (∀ (a : (trv α)), ff) → ∀ a:α, ff :=
begin
  intros h a,
  exact h a
end

end constraint
</pre></div>

<a name="124383739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124383739" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124383739">Kenny Lau (Mar 29 2018 at 20:53)</a>:</h4>
<p>what is the intuition behind all these?</p>

<a name="124383794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124383794" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124383794">Nima (Mar 29 2018 at 20:54)</a>:</h4>
<p>Using coercion we can say every natural number is a real number. But what if we know <code>r</code> is a real number <code>2</code>. How we can use it as a natural number.</p>

<a name="124383804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124383804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124383804">Kenny Lau (Mar 29 2018 at 20:55)</a>:</h4>
<p>what is trv stt nst?</p>

<a name="124383989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124383989" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124383989">Nima (Mar 29 2018 at 20:58)</a>:</h4>
<p>Constructors of <code>constraint</code>. The code defines coercion from <code>constraint  α</code> to <code>α</code>. I am trying to go back from <code>α</code> to <code>constraint α</code>.  In the second example, <code>trv α</code> is a trivial constraint that is satisfied by every element of type <code>α</code>.</p>

<a name="124384111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124384111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124384111">Kenny Lau (Mar 29 2018 at 21:00)</a>:</h4>
<p>btw <code>setof</code> doesn't type check</p>

<a name="124384152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124384152" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124384152">Nima (Mar 29 2018 at 21:02)</a>:</h4>
<p>I copy pasted it from VSCode, it type checks perfectly fine.<br>
Someone else told me if they remove <code>bnd</code> and <code>low</code> right after <code>case stt</code> and <code>case nst</code> they can compile it as well.</p>

<a name="124384192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124384192" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124384192">Kenny Lau (Mar 29 2018 at 21:02)</a>:</h4>
<p>right</p>

<a name="124384196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124384196" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124384196">Kenny Lau (Mar 29 2018 at 21:02)</a>:</h4>
<div class="codehilite"><pre><span></span>universe u
variables {α : Type u} [linear_order α]

inductive constraint (α:Type u)
| trv                    : constraint
| stt (bnd:α) (low:Prop) : constraint
| nst (bnd:α) (low:Prop) : constraint

namespace constraint

def setof : constraint α → α → Prop :=
begin
  intros c a,
  cases c with bnd low bnd low,
    case trv {exact true},
    case stt {exact low ∧ bnd&lt;a ∨ ¬ low ∧ a &lt; bnd},
    case nst {exact low ∧ bnd≤a ∨ ¬ low ∧ a ≤ bnd},
end

instance constraint_to_sort : has_coe_to_sort (constraint α) :=
  {S := Type u, coe := λ S, {x // setof S x}}

example : ∀ (c:constraint α) (a:c), setof c a :=
begin
  intros c a,
  exact @subtype.property α (setof c) a
end

example : (∀ (a : (trv α)), ff) → ∀ a:α, ff :=
begin
  intros h a,
  exact h ⟨a, trivial⟩
end

end constraint
</pre></div>

<a name="124384198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124384198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124384198">Kenny Lau (Mar 29 2018 at 21:02)</a>:</h4>
<p>solution ^</p>

<a name="124384222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124384222" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124384222">Kenny Lau (Mar 29 2018 at 21:03)</a>:</h4>
<p>also, I would avoid using any tactics in definitions</p>

<a name="124384230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124384230" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124384230">Nima (Mar 29 2018 at 21:03)</a>:</h4>
<p>Thanks, so <code>trivial</code> is basically a proof that <code>a</code> is satisfied by <code>trv α</code>. Right?</p>

<a name="124384300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124384300" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124384300">Nima (Mar 29 2018 at 21:04)</a>:</h4>
<blockquote>
<p>also, I would avoid using any tactics in definitions</p>
</blockquote>
<p>"Fresh off the boat", so no idea what best practices are. Just trying to survive ;)</p>

<a name="124384333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124384333" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124384333">Kenny Lau (Mar 29 2018 at 21:05)</a>:</h4>
<p>oh, ok, sorry</p>

<a name="124384399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124384399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124384399">Kenny Lau (Mar 29 2018 at 21:06)</a>:</h4>
<div class="codehilite"><pre><span></span>def setof : constraint α → α → Prop
| (trv α)       a := true
| (stt bnd low) a := low ∧ bnd&lt;a ∨ ¬ low ∧ a &lt; bnd
| (nst bnd low) a := low ∧ bnd≤a ∨ ¬ low ∧ a ≤ bnd
</pre></div>

<a name="124384477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124384477" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124384477">Nima (Mar 29 2018 at 21:08)</a>:</h4>
<p>Cool, thanks</p>

<a name="124387596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124387596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124387596">Nima (Mar 29 2018 at 22:33)</a>:</h4>
<p>Is there any tactic that can push the negation inside quantifiers?<br>
For example <code>¬  ∀ x,∃ y, p x y</code> should become <code>∃ x,∀ y, ¬ p x y</code>.<br>
Using <code>classical</code> is fine.</p>

<a name="124388893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124388893" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124388893">Andrew Ashworth (Mar 29 2018 at 23:12)</a>:</h4>
<p>no. use a lemma</p>

<a name="124389077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124389077" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124389077">Nima (Mar 29 2018 at 23:19)</a>:</h4>
<p><span class="user-mention" data-user-id="110025">@Andrew Ashworth</span> You mean some lemma (probably two) twice. Right? I was looking for some tactic to push the negation all the way inside. Not sure how difficult it is to write such a tactic. I don't think writing a lemma is the solution, or at least I don't know how that can be done using a lemma such that one invocation of it will do the job.</p>

<a name="124389453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124389453" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124389453">Andrew Ashworth (Mar 29 2018 at 23:32)</a>:</h4>
<p>i mean, literally write a lemma stating <code> ¬ ∀ x,∃ y, p x y </code> iff <code> ∃ x,∀ y, ¬ p x y </code>. Then rewrite with it.</p>

<a name="124394062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124394062" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124394062">Nima (Mar 30 2018 at 02:06)</a>:</h4>
<p>How do I find Lean version that is running online? I am using 3.3.0 (re-downloaded 5 minutes ago) and cannot typecheck the following code from Programming in Lean (the online Lean typechecks it):</p>
<div class="codehilite"><pre><span></span>import system.io
variable [io.interface]
open nat io

def print_squares : ℕ → io unit
| 0        := return ()
| (succ n) := print_squares n &gt;&gt;
              put_str (nat.to_string n ++ &quot;^2 = &quot; ++
                       nat.to_string (n * n) ++ &quot;\n&quot;)

#eval print_squares 100
</pre></div>

<a name="124394417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124394417" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124394417">Mario Carneiro (Mar 30 2018 at 02:20)</a>:</h4>
<p>The latest version of lean doesn't use <code>io.interface</code>. Try removing that line and the rest should work</p>

<a name="124394471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124394471" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124394471">Nima (Mar 30 2018 at 02:22)</a>:</h4>
<p>Removing that adds to error.  The current error I am receiving is <code> unknown identifier 'nat.to_string' </code>.<br>
If it is of any help, I am on Mac and downloaded the binary version.</p>

<a name="124395469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124395469" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124395469">Mario Carneiro (Mar 30 2018 at 03:00)</a>:</h4>
<p>Looks like it's just <code>to_string</code> now</p>

<a name="124395480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124395480" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124395480">Kenny Lau (Mar 30 2018 at 03:01)</a>:</h4>
<p>what did I just see</p>

<a name="124395481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124395481" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124395481">Kenny Lau (Mar 30 2018 at 03:01)</a>:</h4>
<p>is Lean basically python now</p>

<a name="124396126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396126" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396126">Andrew Ashworth (Mar 30 2018 at 03:24)</a>:</h4>
<p>i think there's room to add more handy programming gadgets once lean 4 rolls around and we can extend the parser</p>

<a name="124396196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396196" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396196">Andrew Ashworth (Mar 30 2018 at 03:26)</a>:</h4>
<p><code>map (fun x -&gt; x * x) [0 .. 10] = [0, 1, 4, 9, 16, 25, 36, 49, 56, 64, 81, 100]</code> would be sweet</p>

<a name="124396199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396199" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396199">Kenny Lau (Mar 30 2018 at 03:26)</a>:</h4>
<p>we already have list.map</p>

<a name="124396203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396203" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396203">Andrew Ashworth (Mar 30 2018 at 03:26)</a>:</h4>
<p>you can't write <code>[0 .. 10]</code> right now</p>

<a name="124396204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396204" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396204">Kenny Lau (Mar 30 2018 at 03:26)</a>:</h4>
<p>list.range</p>

<a name="124396214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396214" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396214">Andrew Ashworth (Mar 30 2018 at 03:27)</a>:</h4>
<p>or more generally <code>[0 .. 2 .. 10]</code> where you can supply a step</p>

<a name="124396257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396257" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396257">Andrew Ashworth (Mar 30 2018 at 03:28)</a>:</h4>
<p>aha, that's not quite so simple to declare with a <code>notation</code> command</p>

<a name="124396269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396269" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396269">Kenny Lau (Mar 30 2018 at 03:29)</a>:</h4>
<div class="codehilite"><pre><span></span>import system.io

open nat io

def print_fib_core : ℕ → ℕ × ℕ × io unit
| 0        := (0, 1, return ())
| (succ n) := let (a, b, c) := print_fib_core n in
              (b, a+b, c &gt;&gt;
                  put_str (&quot;fib &quot; ++ to_string n ++ &quot; = &quot; ++
                       to_string a ++ &quot;\n&quot;))

def print_fib : ℕ → io unit :=
λ n, (print_fib_core n).2.2

#eval print_fib 100
</pre></div>

<a name="124396274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396274" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396274">Kenny Lau (Mar 30 2018 at 03:29)</a>:</h4>
<div class="codehilite"><pre><span></span>fib 0 = 0
fib 1 = 1
fib 2 = 1
fib 3 = 2
fib 4 = 3
fib 5 = 5
fib 6 = 8
fib 7 = 13
fib 8 = 21
fib 9 = 34
fib 10 = 55
[...]
fib 90 = 2880067194370816120
fib 91 = 4660046610375530309
fib 92 = 7540113804746346429
fib 93 = 12200160415121876738
fib 94 = 19740274219868223167
fib 95 = 31940434634990099905
fib 96 = 51680708854858323072
fib 97 = 83621143489848422977
fib 98 = 135301852344706746049
fib 99 = 218922995834555169026
</pre></div>

<a name="124396276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396276" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396276">Kenny Lau (Mar 30 2018 at 03:30)</a>:</h4>
<p>cool, now I can do Project Euler with it</p>

<a name="124396325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396325" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396325">Kenny Lau (Mar 30 2018 at 03:30)</a>:</h4>
<p>this is ridiculous</p>

<a name="124396360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396360" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396360">Andrew Ashworth (Mar 30 2018 at 03:31)</a>:</h4>
<p>project euler in a functional language is painful, but that's probably because i don't speak monad</p>

<a name="124396406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396406">Kenny Lau (Mar 30 2018 at 03:32)</a>:</h4>
<p>you only need <code>io unit</code> :P</p>

<a name="124396431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396431" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396431">Nima (Mar 30 2018 at 03:33)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> Thank you, it worked (I still need <code> variable [io.interface]</code>, but it works)</p>

<a name="124396472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396472" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396472">Kenny Lau (Mar 30 2018 at 03:34)</a>:</h4>
<p>ok</p>

<a name="124396942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396942" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396942">Mario Carneiro (Mar 30 2018 at 03:51)</a>:</h4>
<p>I get <code> VM does not have code for 'unsafe_monad_from_pure_bind' </code> when I try to run that code</p>

<a name="124396946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396946" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396946">Kenny Lau (Mar 30 2018 at 03:51)</a>:</h4>
<p>which code?</p>

<a name="124396991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396991">Mario Carneiro (Mar 30 2018 at 03:53)</a>:</h4>
<p>your fib code</p>

<a name="124396992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396992">Kenny Lau (Mar 30 2018 at 03:53)</a>:</h4>
<p>what is your lean version?</p>

<a name="124396995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396995" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396995">Kenny Lau (Mar 30 2018 at 03:53)</a>:</h4>
<div class="codehilite"><pre><span></span>Lean (version 3.3.1, commit 28f4143be31b, RELEASE)
</pre></div>

<a name="124396996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396996" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396996">Mario Carneiro (Mar 30 2018 at 03:53)</a>:</h4>
<p>28f414</p>

<a name="124396998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124396998" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124396998">Kenny Lau (Mar 30 2018 at 03:53)</a>:</h4>
<p>wow</p>

<a name="124397036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397036" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397036">Kenny Lau (Mar 30 2018 at 03:54)</a>:</h4>
<p>what does that mean</p>

<a name="124397039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397039" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397039">Mario Carneiro (Mar 30 2018 at 03:54)</a>:</h4>
<p>same as yours, evidently</p>

<a name="124397111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397111">Mario Carneiro (Mar 30 2018 at 03:56)</a>:</h4>
<p>I can't even find<code>unsafe_monad_from_pure_bind</code> in the lean repo, it's a mystery where that comes from</p>

<a name="124397117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397117" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397117">Mario Carneiro (Mar 30 2018 at 03:56)</a>:</h4>
<p>meh, restart and it's fine</p>

<a name="124397125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397125" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397125">Kenny Lau (Mar 30 2018 at 03:57)</a>:</h4>
<p>what is the intended use for bit0 and bit1?</p>

<a name="124397127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397127" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397127">Kenny Lau (Mar 30 2018 at 03:57)</a>:</h4>
<p>can I use them in recursion?</p>

<a name="124397368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397368" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397368">Mario Carneiro (Mar 30 2018 at 04:05)</a>:</h4>
<p>Here's my version of the fib printer:</p>
<div class="codehilite"><pre><span></span>def fib_core : ℕ → ℕ × ℕ
| 0        := (0, 1)
| (succ n) := let (a, b) := fib_core n in (b, a+b)

def fib (n) := (fib_core n).1

def print_fib (n : ℕ) : io unit :=
(list.range 100).mmap&#39; (λ n,
  put_str (&quot;fib &quot; ++ to_string n ++ &quot; = &quot; ++
    to_string (fib n) ++ &quot;\n&quot;))

#eval print_fib 100
</pre></div>


<p>It's asymptotically slower than Kenny's version since it recomputes <code>fib</code> rather than calculating as it goes, but this is a bit closer to what you would expect in another programming language without any fancy tricks</p>

<a name="124397445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397445" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397445">Mario Carneiro (Mar 30 2018 at 04:06)</a>:</h4>
<p><code>bit0</code> and <code>bit1</code> are used by the parser to construct natural number literals and other number literals like <code>7</code>, which is actually <code>bit1 (bit1 (bit1 1)))</code> in whatever type (it must have typeclasses for <code>has_add</code> and <code>has_one</code>)</p>

<a name="124397459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397459" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397459">Mario Carneiro (Mar 30 2018 at 04:07)</a>:</h4>
<p>If you want to define a function by binary recursion over <code>nat</code>, use <code>nat.binary_rec_on</code>, which uses <code>bit b n</code> which generalizes <code>bit0</code> and <code>bit1</code> with a boolean bit parameter</p>

<a name="124397505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397505">Kenny Lau (Mar 30 2018 at 04:09)</a>:</h4>
<div class="codehilite"><pre><span></span>def list.update {α : Type*} : list α → list nat → α → list α
| L []     x := L
| L (h::t) x := (L.update t x).update_nth h x

namespace eratosthenes

def aux1 : nat → nat → nat
| sq lo := if (lo+1)*(lo+1) &gt; sq then lo else lo+1

def isqrt : nat → nat
| n := if H : n / 4 &lt; n then
         (aux1 n (isqrt (n / 4) * 2))
       else n

def aux2 : list bool → nat → nat → list bool :=
λ L len n, L.update (list.map (λ z, (z + n) * n) (list.range $ len / n)) ff

def aux3 : list bool → nat → nat → list bool
| L len 0     := L
| L len 1     := L
| L len (n+1) := aux2 (aux3 L len n) len (n+1)

def aux4 : nat → list bool :=
λ n, aux3 (list.repeat tt n) n (isqrt n)

def aux5 : list bool → nat → list nat :=
λ L n, (list.range n).filter $ λ z, L.nth z = tt

end eratosthenes

def eratosthenes : nat → list nat :=
λ n, (eratosthenes.aux5 (eratosthenes.aux4 n) n).drop 2

#eval eratosthenes 1000
</pre></div>

<a name="124397508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397508" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397508">Kenny Lau (Mar 30 2018 at 04:09)</a>:</h4>
<p>why is this so slow</p>

<a name="124397558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397558" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397558">Mario Carneiro (Mar 30 2018 at 04:10)</a>:</h4>
<p>geez, name your stuff better</p>

<a name="124397560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397560" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397560">Kenny Lau (Mar 30 2018 at 04:11)</a>:</h4>
<p>well I don't intend to PR it :P</p>

<a name="124397565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397565" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397565">Mario Carneiro (Mar 30 2018 at 04:11)</a>:</h4>
<p>it's like reading decompiled sources</p>

<a name="124397566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397566" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397566">Kenny Lau (Mar 30 2018 at 04:11)</a>:</h4>
<p>oh, sorry</p>

<a name="124397567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397567" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397567">Kenny Lau (Mar 30 2018 at 04:11)</a>:</h4>
<p>aux1 is for isqrt</p>

<a name="124397568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397568" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397568">Andrew Ashworth (Mar 30 2018 at 04:11)</a>:</h4>
<p>heh, sieve of e</p>

<a name="124397569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397569">Kenny Lau (Mar 30 2018 at 04:11)</a>:</h4>
<p>aux2 does one sieve</p>

<a name="124397570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397570" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397570">Andrew Ashworth (Mar 30 2018 at 04:11)</a>:</h4>
<p><a href="https://www.cs.hmc.edu/~oneill/papers/Sieve-JFP.pdf" target="_blank" title="https://www.cs.hmc.edu/~oneill/papers/Sieve-JFP.pdf">https://www.cs.hmc.edu/~oneill/papers/Sieve-JFP.pdf</a></p>

<a name="124397571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397571" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397571">Mario Carneiro (Mar 30 2018 at 04:11)</a>:</h4>
<p>What's the anticipated order?</p>

<a name="124397611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397611" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397611">Kenny Lau (Mar 30 2018 at 04:12)</a>:</h4>
<p>of what?</p>

<a name="124397613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397613" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397613">Mario Carneiro (Mar 30 2018 at 04:12)</a>:</h4>
<p>of the code</p>

<a name="124397615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397615" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397615">Kenny Lau (Mar 30 2018 at 04:12)</a>:</h4>
<p>it sieves sqrt(n) times</p>

<a name="124397616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397616" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397616">Kenny Lau (Mar 30 2018 at 04:12)</a>:</h4>
<p>each time taking n</p>

<a name="124397619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397619">Kenny Lau (Mar 30 2018 at 04:12)</a>:</h4>
<p>I think it's O(n^1.5) then</p>

<a name="124397620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397620" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397620">Mario Carneiro (Mar 30 2018 at 04:12)</a>:</h4>
<p>I see several quadratic passes at least</p>

<a name="124397621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397621" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397621">Kenny Lau (Mar 30 2018 at 04:12)</a>:</h4>
<p>where is the quadratic pass</p>

<a name="124397628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397628" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397628">Mario Carneiro (Mar 30 2018 at 04:13)</a>:</h4>
<p><code>(list.range n).filter $ λ z, L.nth z = tt</code> passes over <code>L</code> for each <code>n</code></p>

<a name="124397638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397638" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397638">Kenny Lau (Mar 30 2018 at 04:13)</a>:</h4>
<p>oh, how should I fix that</p>

<a name="124397639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397639" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397639">Kenny Lau (Mar 30 2018 at 04:13)</a>:</h4>
<p>ah, I should deconstruct the list</p>

<a name="124397640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397640" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397640">Andrew Ashworth (Mar 30 2018 at 04:13)</a>:</h4>
<p>paper i linked discusses the sieve in a functional setting exhaustively</p>

<a name="124397681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397681" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397681">Mario Carneiro (Mar 30 2018 at 04:14)</a>:</h4>
<p>You should put comments or something, it's not obvious what the auxes do</p>

<a name="124397689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397689" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397689">Kenny Lau (Mar 30 2018 at 04:15)</a>:</h4>
<p>should I implement the code form your paper?</p>

<a name="124397730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397730" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397730">Andrew Ashworth (Mar 30 2018 at 04:16)</a>:</h4>
<p>i mean, if you want a functional Sieve of Eratosthenes , that is also pretty fast, yes</p>

<a name="124397735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397735">Kenny Lau (Mar 30 2018 at 04:17)</a>:</h4>
<p>does it use data structures that I don't have?</p>

<a name="124397738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397738" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397738">Kenny Lau (Mar 30 2018 at 04:17)</a>:</h4>
<p>PriorityQ?</p>

<a name="124397777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397777" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397777">Andrew Ashworth (Mar 30 2018 at 04:19)</a>:</h4>
<p>this is getting a bit out of hand, but you could implement one from okasaki's "purely functional data structures"</p>

<a name="124397780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397780" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397780">Mario Carneiro (Mar 30 2018 at 04:19)</a>:</h4>
<p>Yeah, we don't have that, maybe <code>rb_map</code> will work</p>

<a name="124397784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397784">Mario Carneiro (Mar 30 2018 at 04:19)</a>:</h4>
<p>Beware, Okasaki assumes a <code>susp</code> type (aka memoization), but we don't have one</p>

<a name="124397828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397828" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397828">Andrew Ashworth (Mar 30 2018 at 04:20)</a>:</h4>
<p>hm. then i'd use the red-black tree in lean core for everything</p>

<a name="124397833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397833">Mario Carneiro (Mar 30 2018 at 04:21)</a>:</h4>
<p>You actually could make your original code a lot faster simply by using arrays instead of lists. You are using them like arrays anyway</p>

<a name="124397834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397834" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397834">Mario Carneiro (Mar 30 2018 at 04:21)</a>:</h4>
<p>and that will make <code>L.nth</code> asymptotically fast</p>

<a name="124397874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397874" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397874">Kenny Lau (Mar 30 2018 at 04:22)</a>:</h4>
<p>I've never used array :P</p>

<a name="124397875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397875" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397875">Kenny Lau (Mar 30 2018 at 04:22)</a>:</h4>
<p>I don't even know arrays exist</p>

<a name="124397896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397896" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397896">Mario Carneiro (Mar 30 2018 at 04:23)</a>:</h4>
<p><code>array</code> is like <code>vector</code>, it's a list with a fixed (in the type) size</p>

<a name="124397938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397938" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397938">Mario Carneiro (Mar 30 2018 at 04:24)</a>:</h4>
<p>and importantly, it's implemented as an C++ array, meaning that updates and nth are fast</p>

<a name="124397993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397993" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397993">Kenny Lau (Mar 30 2018 at 04:27)</a>:</h4>
<p>can I trace the function calls? i.e. debugging?</p>

<a name="124397996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124397996" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124397996">Andrew Ashworth (Mar 30 2018 at 04:27)</a>:</h4>
<p>is vector a dynamically growing array under the hood?</p>

<a name="124398049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398049" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398049">Andrew Ashworth (Mar 30 2018 at 04:29)</a>:</h4>
<p>... i wonder how much work it would take to use a dynamically growing array for lean's list impl</p>

<a name="124398148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398148" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398148">Mario Carneiro (Mar 30 2018 at 04:32)</a>:</h4>
<p><code>vector</code> is literally just a subtype of <code>list</code>. <code>array</code> is isomorphic to <code>vector</code>, and is implemented as the <code>parray</code> type in C++, which is a C++ array with some added support for end extension and persistent usage</p>

<a name="124398220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398220" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398220">Andrew Ashworth (Mar 30 2018 at 04:36)</a>:</h4>
<p>ahh, i see</p>

<a name="124398431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398431" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398431">Kenny Lau (Mar 30 2018 at 04:42)</a>:</h4>
<div class="codehilite"><pre><span></span>def list.update {α : Type*} : list α → list nat → α → list α
| L []     x := L
| L (h::t) x := (L.update t x).update_nth h x

def list.extract {α : Type*} [decidable_eq α] : list α → nat → α → list nat
| L      0     x := []
| []     (n+1) x := []
| (h::t) (n+1) x := if h = x then n :: t.extract n x else t.extract n x

namespace eratosthenes

def aux1 : nat → nat → nat
| sq lo := if (lo+1)*(lo+1) &gt; sq then lo else lo+1

def isqrt : nat → nat
| n := if H : n / 4 &lt; n then aux1 n (isqrt (n / 4) * 2) else n

-- from L, make every n-th item false
def step : list bool → nat → nat → list bool :=
λ L len n, L.update (list.map (λ z, (z + n) * n) (list.range $ len / n)) ff

-- do &quot;step&quot; for every integer from 2 to n
def sieve : list bool → nat → nat → list bool
| L len 0     := L
| L len 1     := L
| L len (n+1) := if L.nth (n+1) = tt then step (sieve L len n) len (n+1) else sieve L len n

-- invoke sieve with sqrt(n)
def prime.bool : nat → list bool :=
λ n, sieve (list.repeat tt n) n (isqrt n)

end eratosthenes

def eratosthenes : nat → list nat :=
λ n, ((eratosthenes.prime.bool n).reverse.extract n tt).reverse.drop 2

#eval eratosthenes 1000
</pre></div>

<a name="124398434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398434">Kenny Lau (Mar 30 2018 at 04:42)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> what do you think is the complexity of this?</p>

<a name="124398474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398474" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398474">Kenny Lau (Mar 30 2018 at 04:44)</a>:</h4>
<p>ah, I see a quadratic pass</p>

<a name="124398480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398480" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398480">Mario Carneiro (Mar 30 2018 at 04:44)</a>:</h4>
<p><code>L.update</code> is quadratic</p>

<a name="124398481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398481" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398481">Kenny Lau (Mar 30 2018 at 04:44)</a>:</h4>
<p>right</p>

<a name="124398484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398484" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398484">Mario Carneiro (Mar 30 2018 at 04:45)</a>:</h4>
<p>I think you should define <code>step</code> by recursion</p>

<a name="124398494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398494" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398494">Mario Carneiro (Mar 30 2018 at 04:45)</a>:</h4>
<p>it shouldn't be hard to make every <code>n</code>th item false by keeping an accumulator</p>

<a name="124398539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398539" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398539">Mario Carneiro (Mar 30 2018 at 04:46)</a>:</h4>
<p>You can't do <code>step</code> in less than O(n) time with this data structure, so <code>sieve</code> is necessarily O(n^2)</p>

<a name="124398540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398540" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398540">Kenny Lau (Mar 30 2018 at 04:47)</a>:</h4>
<p>what do you mean?</p>

<a name="124398547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398547" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398547">Mario Carneiro (Mar 30 2018 at 04:47)</a>:</h4>
<p><code>step</code> has to walk down the entire list to change stuff</p>

<a name="124398551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398551" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398551">Kenny Lau (Mar 30 2018 at 04:47)</a>:</h4>
<p>but I only need to call step <code>sqrt(n)</code> times</p>

<a name="124398592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398592">Mario Carneiro (Mar 30 2018 at 04:48)</a>:</h4>
<p>Ah, that's true. So n^1.5 seems likely</p>

<a name="124398597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398597" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398597">Mario Carneiro (Mar 30 2018 at 04:49)</a>:</h4>
<p>As that paper will tell you though, this isn't "true" eratosthenes since you have to visit all the skipped entries multiple times</p>

<a name="124398599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398599" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398599">Kenny Lau (Mar 30 2018 at 04:49)</a>:</h4>
<p>I see</p>

<a name="124398639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398639" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398639">Kenny Lau (Mar 30 2018 at 04:50)</a>:</h4>
<p>well that paper is too technical</p>

<a name="124398687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398687" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398687">Kenny Lau (Mar 30 2018 at 04:52)</a>:</h4>
<p>it's O(n^1.5) now, empirically</p>

<a name="124398688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398688" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398688">Kenny Lau (Mar 30 2018 at 04:52)</a>:</h4>
<p>because I can do 10000 now</p>

<a name="124398691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398691" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398691">Kenny Lau (Mar 30 2018 at 04:52)</a>:</h4>
<p>(how pathetic)</p>

<a name="124398692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398692" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398692">Kenny Lau (Mar 30 2018 at 04:52)</a>:</h4>
<div class="codehilite"><pre><span></span>def list.extract {α : Type*} [decidable_eq α] : list α → nat → α → list nat
| L      0     x := []
| []     (n+1) x := []
| (h::t) (n+1) x := if h = x then n :: t.extract n x else t.extract n x

namespace eratosthenes

def aux1 : nat → nat → nat
| sq lo := if (lo+1)*(lo+1) &gt; sq then lo else lo+1

def isqrt : nat → nat
| n := if H : n / 4 &lt; n then aux1 n (isqrt (n / 4) * 2) else n

-- from L, make every n-th item false
def step : list bool → nat → nat → list bool :=
λ L n start, L.enum.map (λ z, if z.1 % n = 0 ∧ start ≤ z.1 then ff else z.2)

-- do &quot;step&quot; for every integer from 2 to n
def sieve : list bool → nat →list bool
| L 0     := L
| L 1     := L
| L (n+1) := if L.nth (n+1) = tt then step (sieve L n) (n+1) ((n+1)*(n+1)) else sieve L n

-- invoke sieve with sqrt(n)
def prime.bool : nat → list bool :=
λ n, sieve (list.repeat tt n) (isqrt n)

end eratosthenes

def eratosthenes : nat → list nat :=
λ n, ((eratosthenes.prime.bool n).reverse.extract n tt).reverse.drop 2

#eval eratosthenes 10000
</pre></div>

<a name="124398695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398695" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398695">Kenny Lau (Mar 30 2018 at 04:52)</a>:</h4>
<p>now I'm going to redo it</p>

<a name="124398698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398698" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398698">Kenny Lau (Mar 30 2018 at 04:53)</a>:</h4>
<p>i.e. use <code>list nat</code> instead of <code>list bool</code></p>

<a name="124398701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398701" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398701">Kenny Lau (Mar 30 2018 at 04:53)</a>:</h4>
<p>and use accumulator instead of mod</p>

<a name="124398704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398704" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398704">Andrew Ashworth (Mar 30 2018 at 04:53)</a>:</h4>
<p>well, that paper has a list based implementation on page 11</p>

<a name="124398743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398743" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398743">Kenny Lau (Mar 30 2018 at 04:54)</a>:</h4>
<p>oh</p>

<a name="124398745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398745" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398745">Andrew Ashworth (Mar 30 2018 at 04:54)</a>:</h4>
<p>but, you'll need a lazy sequence type</p>

<a name="124398746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398746" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398746">Kenny Lau (Mar 30 2018 at 04:54)</a>:</h4>
<p>coinduction is coming soon, I hope :)</p>

<a name="124398747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398747" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398747">Andrew Ashworth (Mar 30 2018 at 04:54)</a>:</h4>
<p>i don't know if lean supports lazy semantics right now</p>

<a name="124398749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398749" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398749">Kenny Lau (Mar 30 2018 at 04:54)</a>:</h4>
<p>we already have stream</p>

<a name="124398750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398750" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398750">Kenny Lau (Mar 30 2018 at 04:54)</a>:</h4>
<p>but I don't know how computable it is</p>

<a name="124398751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398751" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398751">Mario Carneiro (Mar 30 2018 at 04:55)</a>:</h4>
<p>Seriously, use <code>array</code></p>

<a name="124398757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398757" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398757">Mario Carneiro (Mar 30 2018 at 04:55)</a>:</h4>
<p>if you care about speed, use <code>array</code></p>

<a name="124398760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398760" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398760">Mario Carneiro (Mar 30 2018 at 04:55)</a>:</h4>
<p>linked lists are known horrible in almost all cases in CS theory</p>

<a name="124398802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398802" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398802">Mario Carneiro (Mar 30 2018 at 04:56)</a>:</h4>
<p><code>stream</code> exists and is computable, but is not remotely efficient as a stream</p>

<a name="124398808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398808" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398808">Mario Carneiro (Mar 30 2018 at 04:57)</a>:</h4>
<p>the hard part about making that paper applicable in lean is all the tricks used to take advantage of laziness</p>

<a name="124398847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398847">Mario Carneiro (Mar 30 2018 at 04:58)</a>:</h4>
<p>AFAIK there are no plans to make lean lazy. You can manually add laziness using <code>thunk</code></p>

<a name="124398849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398849" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398849">Andrew Ashworth (Mar 30 2018 at 04:58)</a>:</h4>
<p>yeah, it's unfortunate that the most popular pure functional language emphasizes laziness so much</p>

<a name="124398853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398853" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398853">Andrew Ashworth (Mar 30 2018 at 04:59)</a>:</h4>
<p>it's really hard to move code snippets and ideas over</p>

<a name="124398857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398857" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398857">Mario Carneiro (Mar 30 2018 at 04:59)</a>:</h4>
<p>ML is a good functional strict language, but I find it often does too much impure stuff</p>

<a name="124398859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398859" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398859">Andrew Ashworth (Mar 30 2018 at 04:59)</a>:</h4>
<p>that's a benefit :)</p>

<a name="124398860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398860" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398860">Andrew Ashworth (Mar 30 2018 at 04:59)</a>:</h4>
<p>(i use f# when i can)</p>

<a name="124398899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398899" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398899">Mario Carneiro (Mar 30 2018 at 05:00)</a>:</h4>
<p>In the sense that it makes it difficult to transfer ideas over</p>

<a name="124398907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398907">Andrew Ashworth (Mar 30 2018 at 05:00)</a>:</h4>
<p>i haven't tried to do much imperative programming in lean</p>

<a name="124398909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124398909" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124398909">Andrew Ashworth (Mar 30 2018 at 05:00)</a>:</h4>
<p>is it hard to emulate?</p>

<a name="124399059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124399059" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124399059">Kenny Lau (Mar 30 2018 at 05:06)</a>:</h4>
<p>now it's much faster!</p>

<a name="124399060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124399060" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124399060">Kenny Lau (Mar 30 2018 at 05:06)</a>:</h4>
<div class="codehilite"><pre><span></span>namespace eratosthenes

def aux1 : nat → nat → nat
| sq lo := if (lo+1)*(lo+1) &gt; sq then lo else lo+1

def isqrt : nat → nat
| n := if H : n / 4 &lt; n then aux1 n (isqrt (n / 4) * 2) else n

-- from L, remove every item divisible by n
def step : list nat → nat → list nat
| []     n := []
| (h::t) n := if h%n = 0 then step t n else h::step t n

-- each time : remove one element, do step on that element
def sieve : nat → list nat → list nat
| hi []     := []
| hi (h::t) := if h ≤ hi then (h::step t h) else (h::t)

end eratosthenes

def eratosthenes : nat → list nat :=
λ n, eratosthenes.sieve (eratosthenes.isqrt n) ((list.range n).drop 2)

#eval eratosthenes 10000
</pre></div>

<a name="124399219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124399219" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124399219">Mario Carneiro (Mar 30 2018 at 05:13)</a>:</h4>
<p>I think <code>step</code> can be expressed as a <code>list.filter</code> without a performance hit with this approach</p>

<a name="124399222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124399222" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124399222">Mario Carneiro (Mar 30 2018 at 05:13)</a>:</h4>
<p>Isn't <code>sieve</code> recursive?</p>

<a name="124399244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124399244" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124399244">Kenny Lau (Mar 30 2018 at 05:14)</a>:</h4>
<p>yes, I just discovered the bug xd</p>

<a name="124399282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124399282" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124399282">Kenny Lau (Mar 30 2018 at 05:15)</a>:</h4>
<p>now Lean doesn't trust that my recursion is well-founded</p>

<a name="124399283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124399283" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124399283">Kenny Lau (Mar 30 2018 at 05:15)</a>:</h4>
<p>I can't be bothered to prove that to Lean</p>

<a name="124399284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124399284" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124399284">Kenny Lau (Mar 30 2018 at 05:15)</a>:</h4>
<p>so, see you :P</p>

<a name="124399694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124399694" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124399694">Kenny Lau (Mar 30 2018 at 05:28)</a>:</h4>
<div class="codehilite"><pre><span></span>namespace eratosthenes

-- O(1)
def aux1 : nat → nat → nat
| sq lo := if (lo+1)*(lo+1) &gt; sq then lo else lo+1

-- O(log n)
def isqrt : nat → nat
| n := if H : n / 4 &lt; n then aux1 n (isqrt (n / 4) * 2) else n

-- O(n)
-- from L, remove every item divisible by n
def step : list nat → nat → list nat
| []     n := []
| (h::t) n := if h%n = 0 then step t n else h::step t n

theorem aux (t : list nat) (h : nat) : list.sizeof (step t h) ≤ list.sizeof t :=
begin
  induction t with h1 t1 ih,
  { dsimp [step],
    refl },
  { dsimp [step],
    by_cases H : h1 % h = 0,
    { simp [H, list.sizeof],
      apply le_trans ih,
      apply le_trans (nat.le_add_right _ (sizeof h1)),
      exact nat.le_add_left _ _ },
    { simp [H, list.sizeof],
      apply nat.add_le_add_left,
      rw add_comm,
      apply nat.add_le_add_right,
      exact ih } }
end

theorem aux2 (t : list nat) (h : nat) : has_well_founded.r (step t h) (h :: t) :=
begin
  dsimp [has_well_founded.r, sizeof_measure, measure, inv_image, sizeof, has_sizeof.sizeof, list.sizeof],
  apply lt_of_le_of_lt (aux t h),
  apply nat.lt_add_of_pos_left,
  rw add_comm,
  exact nat.zero_lt_succ _
end

-- O(n^1.5)
-- each time : remove one element, do step on that element
def sieve (hi : nat) : list nat → list nat
| []     := []
| (h::t) := if h ≤ hi then (h::(sieve $ step t h)) else (h::t)
using_well_founded { dec_tac := `[exact aux2 t h] }

end eratosthenes

-- O(n^1.5)
def eratosthenes : nat → list nat :=
λ n, eratosthenes.sieve (eratosthenes.isqrt n) ((list.range n).drop 2)

#eval eratosthenes 10000
</pre></div>

<a name="124399696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124399696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124399696">Kenny Lau (Mar 30 2018 at 05:29)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I lied</p>

<a name="124399751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124399751" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124399751">Mario Carneiro (Mar 30 2018 at 05:30)</a>:</h4>
<p>If you used <code>filter</code> for <code>step</code>, the lemma would be easier</p>

<a name="124400262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124400262" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124400262">Kenny Lau (Mar 30 2018 at 05:49)</a>:</h4>
<p>btw it can handle <code>100000</code> now</p>

<a name="124400366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124400366" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124400366">Kenny Lau (Mar 30 2018 at 05:52)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I don't see what difference it makes. It isn't a lemma that L.filter p has size at most L</p>

<a name="124400386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124400386" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124400386">Mario Carneiro (Mar 30 2018 at 05:53)</a>:</h4>
<p>It's a sublist from <code>filter_sublist</code>, and sublist implies length less equal</p>

<a name="124400388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124400388" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124400388">Kenny Lau (Mar 30 2018 at 05:53)</a>:</h4>
<p>so how exactly would I prove its well-foundedness?</p>

<a name="124401268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124401268" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124401268">Mario Carneiro (Mar 30 2018 at 06:24)</a>:</h4>
<div class="codehilite"><pre><span></span>def step (L : list nat) (n : nat) : list nat :=
L.filter (λ a, a%n ≠ 0)

def sieve (hi : nat) : list nat → list nat
| []     := []
| (h::t) :=
  have (step t h).length &lt; (h :: t).length, from
  lt_succ_of_le $ list.length_le_of_sublist $ list.filter_sublist _,
  if h ≤ hi then h::sieve (step t h) else h::t
using_well_founded {
  rel_tac := λ _ _, `[exact ⟨_, measure_wf list.length⟩],
  dec_tac := `[exact this] }
</pre></div>

<a name="124401276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124401276" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124401276">Kenny Lau (Mar 30 2018 at 06:25)</a>:</h4>
<p>oh, changing the relation</p>

<a name="124401277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124401277" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124401277">Kenny Lau (Mar 30 2018 at 06:25)</a>:</h4>
<p>I see</p>

<a name="124436819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124436819" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124436819">Nima (Mar 31 2018 at 00:45)</a>:</h4>
<p>The following is from Programming in Lean and works perfectly fine in the online Lean. Any idea how I should make it also work in version 3.3.0?</p>
<div class="codehilite"><pre><span></span>open expr tactic classical

meta def normalize_hyp (lemmas : list expr) (hyp : expr) : tactic unit :=
do try (simp_at hyp lemmas)
</pre></div>

<a name="124436867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124436867" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124436867">Simon Hudon (Mar 31 2018 at 00:47)</a>:</h4>
<p>what errors are you encountering?</p>

<a name="124436869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124436869" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124436869">Kenny Lau (Mar 31 2018 at 00:47)</a>:</h4>
<div class="codehilite"><pre><span></span>sandbox3.lean:6:3: error

don&#39;t know how to synthesize placeholder
context:
lemmas : list expr,
hyp : expr,
normalize_hyp : tactic unit
⊢ Type ?


sandbox3.lean:6:8: error

unknown identifier &#39;simp_at&#39;
</pre></div>

<a name="124436964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124436964" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124436964">Nima (Mar 31 2018 at 00:50)</a>:</h4>
<p>Yes, those errors</p>

<a name="124437019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437019" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437019">Simon Hudon (Mar 31 2018 at 00:53)</a>:</h4>
<p>Can you try <code>simp_hyp</code> instead of <code>simp_at</code>?</p>

<a name="124437022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437022">Kenny Lau (Mar 31 2018 at 00:53)</a>:</h4>
<div class="codehilite"><pre><span></span>type mismatch at application
  simp_hyp hyp
term
  hyp
has type
  expr
but is expected to have type
  simp_lemmas
</pre></div>

<a name="124437257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437257" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437257">Simon Hudon (Mar 31 2018 at 01:02)</a>:</h4>
<p>ok, first, swap the order of the arguments: <code> simp_hyp lemmas hyp</code></p>

<a name="124437259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437259" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437259">Simon Hudon (Mar 31 2018 at 01:02)</a>:</h4>
<p>second, let's construct a <code>simp_lemmas</code></p>

<a name="124437309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437309" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437309">Simon Hudon (Mar 31 2018 at 01:04)</a>:</h4>
<div class="codehilite"><pre><span></span>meta def normalize_hyp (lemmas : list expr) (hyp : expr) : tactic unit :=
do s &lt;- simp_lemmas.append simp_lemmas.mk lemmas,
   try (simp_at s hyp)
</pre></div>

<a name="124437406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437406">Nima (Mar 31 2018 at 01:08)</a>:</h4>
<p><code>simp_at</code>(<code>unknown identifier</code>)?<br>
If I use <code>simp_hyp</code> give me the same error</p>
<div class="codehilite"><pre><span></span>type mismatch at application
  simp_hyp hyp
term
  hyp
has type
  expr
but is expected to have type
  simp_lemmas
Additional information:
/Users/nima/Dropbox/Codes/Lean/Interval/tmp.lean:5:8: context: switched to simple application elaboration procedure because failed to use expected type to elaborate it, error message
  type mismatch, term
    (simp_hyp ?m_1 ?m_2 h
       {max_steps := simp.default_max_steps,
        contextual := ff,
        lift_eq := tt,
        canonize_instances := tt,
        canonize_proofs := ff,
        use_axioms := tt,
        zeta := tt,
        beta := tt,
        eta := tt,
        proj := tt,
        iota := tt,
        single_pass := ff,
        fail_if_unchanged := tt,
        memoize := tt})
  has type
    expr → tactic expr : Type
  but is expected to have type
    tactic ?m_1 : Type ?
</pre></div>

<a name="124437425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437425" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437425">Simon Hudon (Mar 31 2018 at 01:10)</a>:</h4>
<p>Sorry, the second version was wrong. I fixed it</p>

<a name="124437594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437594" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437594">Nima (Mar 31 2018 at 01:16)</a>:</h4>
<p>Is there any lean file that I can download from github to have the fix?</p>

<a name="124437603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437603">Simon Hudon (Mar 31 2018 at 01:17)</a>:</h4>
<p>I mean, this is what it should be:</p>
<div class="codehilite"><pre><span></span>meta def normalize_hyp (lemmas : list expr) (hyp : expr) : tactic unit :=
do s &lt;- simp_lemmas.append simp_lemmas.mk lemmas,
   try (simp_at s hyp)
</pre></div>

<a name="124437655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437655" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437655">Nima (Mar 31 2018 at 01:19)</a>:</h4>
<p>but <code>simp_at</code> gives me <code>unknown identifier 'simp_at' </code> error</p>

<a name="124437699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437699" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437699">Simon Hudon (Mar 31 2018 at 01:20)</a>:</h4>
<p>Sorry I keep making the same typo:</p>
<div class="codehilite"><pre><span></span>meta def normalize_hyp (lemmas : list expr) (hyp : expr) : tactic unit :=
do s &lt;- simp_lemmas.append simp_lemmas.mk lemmas,
   try (simp_hyp s hyp)
</pre></div>

<a name="124437706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437706" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437706">Nima (Mar 31 2018 at 01:22)</a>:</h4>
<p>This gives me the following error:</p>
<div class="codehilite"><pre><span></span>type mismatch at application
  simp_hyp s hyp
term
  hyp
has type
  expr
but is expected to have type
  opt_param (list name) list.nil
Additional information:
/Users/nima/Dropbox/Codes/Lean/Interval/tmp.lean:5:8: context: switched to simple application elaboration procedure because failed to use expected type to elaborate it, error message
  type mismatch, term
    (simp_hyp ?m_1 ?m_2 h
       {max_steps := simp.default_max_steps,
        contextual := ff,
        lift_eq := tt,
        canonize_instances := tt,
        canonize_proofs := ff,
        use_axioms := tt,
        zeta := tt,
        beta := tt,
        eta := tt,
        proj := tt,
        iota := tt,
        single_pass := ff,
        fail_if_unchanged := tt,
        memoize := tt})
  has type
    expr → tactic expr : Type
  but is expected to have type
    tactic ?m_1 : Type ?
</pre></div>

<a name="124437753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437753" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437753">Simon Hudon (Mar 31 2018 at 01:23)</a>:</h4>
<p>that's progress</p>

<a name="124437795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437795" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437795">Simon Hudon (Mar 31 2018 at 01:24)</a>:</h4>
<p>How about</p>
<div class="codehilite"><pre><span></span>meta def normalize_hyp (lemmas : list expr) (hyp : expr) : tactic unit :=
do s &lt;- simp_lemmas.append simp_lemmas.mk lemmas,
   try (simp_hyp s [] hyp)
</pre></div>

<a name="124437842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437842" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437842">Nima (Mar 31 2018 at 01:26)</a>:</h4>
<p>Wow! Thanks</p>

<a name="124437851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437851">Simon Hudon (Mar 31 2018 at 01:27)</a>:</h4>
<p>No problems. Sorry for the excessive back and forth.</p>

<a name="124437890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437890" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437890">Mario Carneiro (Mar 31 2018 at 01:28)</a>:</h4>
<p>I don't see <code>simp_at</code> in the lean web editor either. Is it in 3.3.0?</p>

<a name="124437950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437950" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437950">Nima (Mar 31 2018 at 01:31)</a>:</h4>
<p>No problem at all.<br>
I don't know how to check Lean version, mine is supposed to be 3.3.0.<br>
The same chapter gives me error. <br>
Last line <code> unknown identifier 'monad.for''</code><br>
Is there a magic fix for this one as well?</p>
<blockquote>
<p>The for' tactic, like the for tactic, applies the second argument to each element of the first, but it returns unit rather than accumulate the results in a list. </p>
</blockquote>
<div class="codehilite"><pre><span></span>open expr tactic classical monad

meta def normalize_hyp (lemmas : list expr) (hyp : expr) : tactic unit :=
do s &lt;- simp_lemmas.append simp_lemmas.mk lemmas,
   try (simp_hyp s [] hyp)

meta def normalize_hyps : tactic unit :=
do hyps ← local_context,
   lemmas ← monad.mapm mk_const [``not_not_intro],
   monad.for&#39; hyps (normalize_hyp lemmas)
</pre></div>

<a name="124437965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437965">Simon Hudon (Mar 31 2018 at 01:32)</a>:</h4>
<blockquote>
<p>I don't see <code>simp_at</code> in the lean web editor either. Is it in 3.3.0?</p>
</blockquote>
<p>It disappeared in <a href="https://github.com/leanprover/lean/commit/69ed291aab8493a7fb33b52dc2982e2db417761f" target="_blank" title="https://github.com/leanprover/lean/commit/69ed291aab8493a7fb33b52dc2982e2db417761f">https://github.com/leanprover/lean/commit/69ed291aab8493a7fb33b52dc2982e2db417761f</a><br>
in July</p>

<a name="124437997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124437997" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124437997">Simon Hudon (Mar 31 2018 at 01:32)</a>:</h4>
<p><span class="user-mention" data-user-id="112062">@Nima</span> you can check your version with <code>lean --version</code></p>

<a name="124438043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124438043" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124438043">Simon Hudon (Mar 31 2018 at 01:34)</a>:</h4>
<p>Instead of <code> monad.for' hyps (normalize_hyp lemmas) </code> try <code>hyps.mmap' (normalize_hyp lemmas)</code></p>

<a name="124438094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124438094" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124438094">Nima (Mar 31 2018 at 01:36)</a>:</h4>
<p>Fantastic!<br>
Thanks a lot,<br>
Also, my version is <code>Lean (version 3.3.0, commit fa9c868ed2bb, Release)</code></p>

<a name="124438145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124438145" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124438145">Simon Hudon (Mar 31 2018 at 01:39)</a>:</h4>
<p>Yeah, that's exactly 3.3.0</p>

<a name="124438148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124438148" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124438148">Simon Hudon (Mar 31 2018 at 01:40)</a>:</h4>
<p>Programming in Lean seems to be working with a pretty old version of Lean</p>

<a name="124442486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442486" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442486">Nima (Mar 31 2018 at 04:36)</a>:</h4>
<p>Sorry if this is too stupid, but why the following does not type-checks (I don't care the example itself) :</p>
<div class="codehilite"><pre><span></span>universe u
variable {α : Type u}
example (p:α → Prop) : (¬(∃ (a:α), ¬ p a)) → (∀ (a:α), p a) :=
begin
  intros h a,
  have h&#39; : (p a) → p a,
  from admit,
  admit
end
</pre></div>


<p>I get the following error at <code>have</code></p>
<div class="codehilite"><pre><span></span>type mismatch at application
  p a
term
  a
has type
  p a : Prop
but is expected to have type
  α : Type u
state:
α : Type u,
p : α → Prop,
h : ¬∃ (a : α), ¬p a,
a : α
⊢ p a
</pre></div>


<p>This is Tactic State right before <code>have</code></p>
<div class="codehilite"><pre><span></span>α : Type u,
p : α → Prop,
h : ¬∃ (a : α), ¬p a,
a : α
⊢ p a
</pre></div>

<a name="124442534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442534" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442534">Simon Hudon (Mar 31 2018 at 04:39)</a>:</h4>
<p>That's puzzling</p>

<a name="124442585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442585" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442585">Mario Carneiro (Mar 31 2018 at 04:41)</a>:</h4>
<p>You can't <code>from admit</code>, <code>admit</code> is a tactic not a term. Use <code>from sorry</code> or just <code>admit</code></p>

<a name="124442624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442624" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442624">Simon Hudon (Mar 31 2018 at 04:42)</a>:</h4>
<p>Dang! I completely missed that!</p>

<a name="124442625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442625" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442625">Mario Carneiro (Mar 31 2018 at 04:42)</a>:</h4>
<p>But the error is actually an issue with the variable <code>a</code> together with <code>p -&gt; q</code> instead of <code>\forall (_ : p), q</code></p>

<a name="124442632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442632" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442632">Nima (Mar 31 2018 at 04:43)</a>:</h4>
<p>So the following change gives me the same error:</p>
<div class="codehilite"><pre><span></span>have h&#39; : (p a) → (p a),
  admit,
  admit
</pre></div>

<a name="124442672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442672" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442672">Mario Carneiro (Mar 31 2018 at 04:44)</a>:</h4>
<p><a href="https://github.com/leanprover/lean/issues/1822" target="_blank" title="https://github.com/leanprover/lean/issues/1822">https://github.com/leanprover/lean/issues/1822</a></p>

<a name="124442673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442673" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442673">Simon Hudon (Mar 31 2018 at 04:44)</a>:</h4>
<p>Oooooooh! I had to stare a it for a while. I almost bore a whole through my monitor</p>

<a name="124442681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442681" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442681">Mario Carneiro (Mar 31 2018 at 04:45)</a>:</h4>
<p>You can work around the issue by writing <code>∀_:p a, p a</code> instead of <code>p a -&gt; p a</code></p>

<a name="124442682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442682" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442682">Mario Carneiro (Mar 31 2018 at 04:45)</a>:</h4>
<p>or use a variable other than <code>a</code></p>

<a name="124442723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442723" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442723">Simon Hudon (Mar 31 2018 at 04:46)</a>:</h4>
<p>Is there any plan to change that horrible convention to name that bound variable <code>a</code>?</p>

<a name="124442724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442724" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442724">Mario Carneiro (Mar 31 2018 at 04:46)</a>:</h4>
<p>I think? There are two separate autonaming approaches, one produces <code>a_n</code> and the other produces <code>_x_n</code></p>

<a name="124442729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442729" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442729">Mario Carneiro (Mar 31 2018 at 04:47)</a>:</h4>
<p>The underscore trick switches to the other naming convention</p>

<a name="124442731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442731" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442731">Mario Carneiro (Mar 31 2018 at 04:47)</a>:</h4>
<p>But it's never as simple as it seems for this stuff. See the issue</p>

<a name="124442770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442770" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442770">Mario Carneiro (Mar 31 2018 at 04:48)</a>:</h4>
<p>also <a href="https://github.com/leanprover/lean/pull/1844" target="_blank" title="https://github.com/leanprover/lean/pull/1844">https://github.com/leanprover/lean/pull/1844</a></p>

<a name="124442778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442778" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442778">Simon Hudon (Mar 31 2018 at 04:49)</a>:</h4>
<p>Yeah, don't I know it</p>

<a name="124442779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442779" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442779">Mario Carneiro (Mar 31 2018 at 04:49)</a>:</h4>
<p>Looks like Leo wanted to postpone a fix because of the new parser (sigh...)</p>

<a name="124442780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442780" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442780">Simon Hudon (Mar 31 2018 at 04:49)</a>:</h4>
<p>Thanks for the link</p>

<a name="124442822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442822" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442822">Simon Hudon (Mar 31 2018 at 04:50)</a>:</h4>
<p>I've heard that song before :D</p>

<a name="124442823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442823" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442823">Simon Hudon (Mar 31 2018 at 04:50)</a>:</h4>
<p>Here's hoping that the new parser also cures cancer :D</p>

<a name="124442824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442824">Mario Carneiro (Mar 31 2018 at 04:51)</a>:</h4>
<p>but don't bother with any medicine or chemotherapy in the meantime</p>

<a name="124442829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442829" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442829">Kenny Lau (Mar 31 2018 at 04:51)</a>:</h4>
<p>oh, what does double colon mean? as in, <code>{x : : p a}</code> something like that</p>

<a name="124442830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442830" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442830">Mario Carneiro (Mar 31 2018 at 04:51)</a>:</h4>
<p>that's malformed</p>

<a name="124442869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442869" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442869">Kenny Lau (Mar 31 2018 at 04:52)</a>:</h4>
<p><a href="https://github.com/leanprover/mathlib/pull/88#discussion_r178095763" target="_blank" title="https://github.com/leanprover/mathlib/pull/88#discussion_r178095763">https://github.com/leanprover/mathlib/pull/88#discussion_r178095763</a></p>

<a name="124442871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442871" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442871">Kenny Lau (Mar 31 2018 at 04:52)</a>:</h4>
<blockquote>
<p>what about <code>def next.fixed_point {x : : α} (H : x ≤ f x) : fixed_point</code> (in similar for previous) then you can shorten some proofs below.</p>
</blockquote>

<a name="124442872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442872" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442872">Mario Carneiro (Mar 31 2018 at 04:52)</a>:</h4>
<p>looks like a typo</p>

<a name="124442874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124442874" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124442874">Kenny Lau (Mar 31 2018 at 04:52)</a>:</h4>
<p>oh</p>

<a name="124443018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124443018" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124443018">Nima (Mar 31 2018 at 04:58)</a>:</h4>
<blockquote>
<p>But the error is actually an issue with the ...</p>
</blockquote>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I only understood that part, but it worked. So thank you  :)</p>

<a name="124443076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124443076" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124443076">Simon Hudon (Mar 31 2018 at 05:01)</a>:</h4>
<p>Basically, <code>have h' : (p a) → p a,</code> is the same as <code>have h' : ∀ a : p a, p a,</code> so the first <code>a</code> has type <code> α</code> and the second one has type <code>p a</code></p>

<a name="124443709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124443709" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124443709">Nima (Mar 31 2018 at 05:28)</a>:</h4>
<p>Thanks for the clarification,<br>
Some of the discussion on those links were about how Lean should choose name of the bounded variable in <code>∀ a : p ...</code>. Right? (I mean is it always <code>a</code> or starts with <code>a</code>, so if I don't start names with <code>a</code> then I will never see this problem again?)</p>

<a name="124443809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124443809" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124443809">Mario Carneiro (Mar 31 2018 at 05:33)</a>:</h4>
<p>Yes. Ideally it should be chosen to be distinct from the variables on the RHS, but for some reason this is complicated, so it just uses a name generator and you the user are responsible for not choosing the same name. You should beware of naming your variables <code>a</code>, <code>a_1</code>, <code>a_2</code> etc. as well as <code>_x</code>, <code>_x_1</code>, <code>_x_2</code> etc. Also <code>_inst</code> and <code>_match</code> and other underscore names are taken, so you should avoid starting your variables with an underscore.</p>

<a name="124447155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447155" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447155">Kenny Lau (Mar 31 2018 at 07:56)</a>:</h4>
<div class="codehilite"><pre><span></span>has type
  α → α → Prop : Type u
but is expected to have type
  α → α → Type ? : Type (max u (?+1))
</pre></div>

<a name="124447156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447156">Kenny Lau (Mar 31 2018 at 07:56)</a>:</h4>
<p>is Prop not a type?</p>

<a name="124447161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447161" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447161">Kenny Lau (Mar 31 2018 at 07:57)</a>:</h4>
<p>btw <code>plift</code> seems to have resolved the error</p>

<a name="124447207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447207" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447207">Mario Carneiro (Mar 31 2018 at 07:59)</a>:</h4>
<p>Prop is a Type, but Prop is not Type</p>

<a name="124447211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447211" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447211">Kenny Lau (Mar 31 2018 at 07:59)</a>:</h4>
<p>Prop is Type 0, no?</p>

<a name="124447214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447214" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447214">Mario Carneiro (Mar 31 2018 at 07:59)</a>:</h4>
<p>Prop is Sort 0, Type u is Sort (u+1)</p>

<a name="124447215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447215" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447215">Kenny Lau (Mar 31 2018 at 07:59)</a>:</h4>
<p>oh</p>

<a name="124447258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447258" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447258">Kenny Lau (Mar 31 2018 at 08:00)</a>:</h4>
<div class="codehilite"><pre><span></span>don&#39;t know how to synthesize placeholder
context:
α : Type u,
_inst_1 : partial_order α,
x y : α,
hxy : plift (x ≤ y)
⊢ {down := le_trans (hxy.down) ({down := le_refl y}.down)} = hxy
</pre></div>

<a name="124447262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447262" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447262">Kenny Lau (Mar 31 2018 at 08:00)</a>:</h4>
<p>proof irrelevance after plift...?</p>

<a name="124447269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447269" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447269">Mario Carneiro (Mar 31 2018 at 08:01)</a>:</h4>
<p>you have to case on <code>hxy</code> first</p>

<a name="124447308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447308">Mario Carneiro (Mar 31 2018 at 08:02)</a>:</h4>
<p>or rewrite with <code>plift.up_down</code></p>

<a name="124447315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447315" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447315">Kenny Lau (Mar 31 2018 at 08:03)</a>:</h4>
<p><code>congr_arg plift.up rfl</code> works</p>

<a name="124447316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447316" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447316">Kenny Lau (Mar 31 2018 at 08:03)</a>:</h4>
<p>after casing</p>

<a name="124447317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447317" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447317">Kenny Lau (Mar 31 2018 at 08:03)</a>:</h4>
<p><code> λ x y ⟨hxy⟩, congr_arg plift.up rfl</code></p>

<a name="124447318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447318">Mario Carneiro (Mar 31 2018 at 08:03)</a>:</h4>
<p>but <code>rfl</code> doesn't?</p>

<a name="124447354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447354" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447354">Kenny Lau (Mar 31 2018 at 08:04)</a>:</h4>
<p>I'm stupid</p>

<a name="124447355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447355" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447355">Kenny Lau (Mar 31 2018 at 08:04)</a>:</h4>
<p>it does</p>

<a name="124447362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447362" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447362">Kenny Lau (Mar 31 2018 at 08:04)</a>:</h4>
<p>interesting</p>

<a name="124447363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447363" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447363">Kenny Lau (Mar 31 2018 at 08:04)</a>:</h4>
<p>it goes assertion error without the casing</p>

<a name="124447364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447364" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447364">Kenny Lau (Mar 31 2018 at 08:04)</a>:</h4>
<p>but I've been getting too many assertion errors I decided to stop caring</p>

<a name="124447372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447372" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447372">Mario Carneiro (Mar 31 2018 at 08:05)</a>:</h4>
<p>hm, that's not a place I've seen an assertion error before</p>

<a name="124447461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447461" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447461">Kenny Lau (Mar 31 2018 at 08:09)</a>:</h4>
<p>is there polymorphic empty type?</p>

<a name="124447507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447507" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447507">Kenny Lau (Mar 31 2018 at 08:11)</a>:</h4>
<div class="codehilite"><pre><span></span>def empty : category empty :=
{ Mor := empty.rec _,
  Comp := empty.rec _,
  Id := empty.rec _,
  Hid_left := empty.rec _,
  Hid_right := empty.rec _,
  Hassoc := empty.rec _ }
</pre></div>

<a name="124447508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447508" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447508">Kenny Lau (Mar 31 2018 at 08:11)</a>:</h4>
<p>lol</p>

<a name="124447548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447548" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447548">Mario Carneiro (Mar 31 2018 at 08:12)</a>:</h4>
<p>Surprisingly no. You can use <code>ulift empty</code> in a pinch</p>

<a name="124447555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447555" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447555">Kenny Lau (Mar 31 2018 at 08:13)</a>:</h4>
<p>and yes, I'm doing category theory again</p>

<a name="124447600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447600" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447600">Kenny Lau (Mar 31 2018 at 08:15)</a>:</h4>
<p><code>λ x y z, unit.cases_on z rfl</code></p>

<a name="124447601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447601" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447601">Kenny Lau (Mar 31 2018 at 08:15)</a>:</h4>
<p>is there a way to case on <code>z</code> in the lambda part?</p>

<a name="124447641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447641" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447641">Kenny Lau (Mar 31 2018 at 08:16)</a>:</h4>
<div class="codehilite"><pre><span></span>def one : category unit :=
{ Mor := λ _ _, unit,
  Comp := λ _ _ _ _ _, unit.star,
  Id := λ _, unit.star,
  Hid_left := λ _ _, unit.rec rfl,
  Hid_right := λ _ _, unit.rec rfl,
  Hassoc := λ _ _ _ _ _ _ _, rfl }
</pre></div>

<a name="124447688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447688" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447688">Mario Carneiro (Mar 31 2018 at 08:18)</a>:</h4>
<p>you can write <code>()</code> in the lambda I think, or <code>⟨⟩</code></p>

<a name="124447693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447693" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447693">Kenny Lau (Mar 31 2018 at 08:19)</a>:</h4>
<p>the latter works</p>

<a name="124447782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447782" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447782">Kenny Lau (Mar 31 2018 at 08:22)</a>:</h4>
<div class="codehilite"><pre><span></span>def of_monoid (α : Type u) [monoid α] : category unit :=
{ Mor := λ _ _, α,
  Comp := λ _ _ _, (*),
  Id := λ _, 1,
  Hid_left := λ _ _, one_mul,
  Hid_right := λ _ _, mul_one,
  Hassoc := λ _ _ _ _, mul_assoc }
</pre></div>

<a name="124447783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447783" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447783">Kenny Lau (Mar 31 2018 at 08:22)</a>:</h4>
<p>how beautifully the structures are compatible</p>

<a name="124447841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447841">Kenny Lau (Mar 31 2018 at 08:25)</a>:</h4>
<div class="codehilite"><pre><span></span>def of_monoid (α : Type u) [monoid α] : category unit :=
{ Mor := λ _ _, α,
  Comp := λ _ _ _, (*),
  Id := λ _, 1,
  Hid_left := λ _ _, one_mul,
  Hid_right := λ _ _, mul_one,
  Hassoc := λ _ _ _ _, mul_assoc }

def to_monoid (C: category unit) : monoid (C.Mor () ()) :=
{ mul := C.Comp _ _ _,
  mul_assoc := C.Hassoc () () () (),
  one := C.Id (),
  one_mul := C.Hid_left () (),
  mul_one := C.Hid_right () () }
</pre></div>

<a name="124447878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447878" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447878">Kenny Lau (Mar 31 2018 at 08:26)</a>:</h4>
<p>this is very beautiful</p>

<a name="124447888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447888" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447888">Mario Carneiro (Mar 31 2018 at 08:27)</a>:</h4>
<p>I think you can do better in that last one... in any category, the homs from an object to itself forms a monoid</p>

<a name="124447931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447931" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447931">Kenny Lau (Mar 31 2018 at 08:29)</a>:</h4>
<div class="codehilite"><pre><span></span>def to_monoid {α : Type u} (C: category α) (x : α) : monoid (C.Mor x x) :=
{ mul := C.Comp _ _ _,
  mul_assoc := C.Hassoc x x x x,
  one := C.Id x,
  one_mul := C.Hid_left x x,
  mul_one := C.Hid_right x x }
</pre></div>

<a name="124447932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447932">Kenny Lau (Mar 31 2018 at 08:29)</a>:</h4>
<p>done</p>

<a name="124447974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124447974" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124447974">Kenny Lau (Mar 31 2018 at 08:30)</a>:</h4>
<p>I just realized the forgetful functor and its adjoint exists in Cat</p>

<a name="124448020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448020">Kenny Lau (Mar 31 2018 at 08:32)</a>:</h4>
<p>now <code>one</code> is a special case of <code>discrete</code></p>

<a name="124448021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448021" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448021">Kenny Lau (Mar 31 2018 at 08:32)</a>:</h4>
<div class="codehilite"><pre><span></span>def discrete (α : Type u) : category α :=
{ Mor := λ _ _, unit,
  Comp := λ _ _ _ _ _, (),
  Id := λ _, (),
  Hid_left := λ _ _ ⟨⟩, rfl,
  Hid_right := λ _ _ ⟨⟩, rfl,
  Hassoc := λ _ _ _ _ _ _ _, rfl }

def one : category unit :=
discrete unit
</pre></div>

<a name="124448022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448022">Kenny Lau (Mar 31 2018 at 08:32)</a>:</h4>
<p>ok technically zero also, but...</p>

<a name="124448023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448023" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448023">Kenny Lau (Mar 31 2018 at 08:33)</a>:</h4>
<div class="codehilite"><pre><span></span>def discrete (α : Type u) : category α :=
{ Mor := λ _ _, unit,
  Comp := λ _ _ _ _ _, (),
  Id := λ _, (),
  Hid_left := λ _ _ ⟨⟩, rfl,
  Hid_right := λ _ _ ⟨⟩, rfl,
  Hassoc := λ _ _ _ _ _ _ _, rfl }

def zero : category empty :=
discrete empty

def one : category unit :=
discrete unit
</pre></div>

<a name="124448158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448158" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448158">Kenny Lau (Mar 31 2018 at 08:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span>  how would you call the category <code>* -&gt; *</code> and the category <code>* =&gt; *</code>?</p>

<a name="124448159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448159" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448159">Kenny Lau (Mar 31 2018 at 08:39)</a>:</h4>
<p>(one arrow, two arrows)</p>

<a name="124448161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448161" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448161">Mario Carneiro (Mar 31 2018 at 08:39)</a>:</h4>
<p>what do they mean?</p>

<a name="124448162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448162">Kenny Lau (Mar 31 2018 at 08:39)</a>:</h4>
<p>the former is the category with 2 objects and 3 morphisms</p>

<a name="124448202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448202" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448202">Mario Carneiro (Mar 31 2018 at 08:40)</a>:</h4>
<p>that's <code>two</code></p>

<a name="124448203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448203" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448203">Kenny Lau (Mar 31 2018 at 08:40)</a>:</h4>
<p>and the latter is with 4 morphisms</p>

<a name="124448205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448205" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448205">Mario Carneiro (Mar 31 2018 at 08:40)</a>:</h4>
<p><code>two'</code>? <code>two_eq</code> (since it's the equalizer diagram)</p>

<a name="124448210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448210" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448210">Kenny Lau (Mar 31 2018 at 08:41)</a>:</h4>
<p>so it doesn't have a name in convention?</p>

<a name="124448212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448212" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448212">Mario Carneiro (Mar 31 2018 at 08:41)</a>:</h4>
<p>I've never seen it have an official name</p>

<a name="124448213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448213" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448213">Kenny Lau (Mar 31 2018 at 08:41)</a>:</h4>
<p>yes, I meant official. words.</p>

<a name="124448250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448250" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448250">Kenny Lau (Mar 31 2018 at 08:42)</a>:</h4>
<p>maybe <code>equalizer_diagram</code> lol</p>

<a name="124448259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448259" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448259">Mario Carneiro (Mar 31 2018 at 08:43)</a>:</h4>
<p>Alternatively <code>two_mor</code> since it's the canonical two morphism diagram</p>

<a name="124448260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448260" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448260">Kenny Lau (Mar 31 2018 at 08:43)</a>:</h4>
<p>what do you mean?</p>

<a name="124448261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448261" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448261">Kenny Lau (Mar 31 2018 at 08:43)</a>:</h4>
<p>and how are you going to name the pullback diagram</p>

<a name="124448300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448300" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448300">Mario Carneiro (Mar 31 2018 at 08:44)</a>:</h4>
<p><code>three_in</code> and <code>three_out</code>?</p>

<a name="124448301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448301" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448301">Kenny Lau (Mar 31 2018 at 08:44)</a>:</h4>
<p>hmm</p>

<a name="124448302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448302" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448302">Kenny Lau (Mar 31 2018 at 08:44)</a>:</h4>
<p>ok</p>

<a name="124448348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448348" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448348">Kenny Lau (Mar 31 2018 at 08:46)</a>:</h4>
<div class="codehilite"><pre><span></span>def Mor : bool → bool → Type
| ff ff := unit
| ff tt := bool
| tt ff := empty
| tt tt := unit
</pre></div>

<a name="124448349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448349" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448349">Kenny Lau (Mar 31 2018 at 08:46)</a>:</h4>
<p>do you want to switch <code>bool</code> and <code>empty</code>?</p>

<a name="124448398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448398">Mario Carneiro (Mar 31 2018 at 08:49)</a>:</h4>
<p>Hm, that seems a bit painful to work with</p>

<a name="124448400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448400" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448400">Kenny Lau (Mar 31 2018 at 08:49)</a>:</h4>
<p>how would you do it?</p>

<a name="124448441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448441">Kenny Lau (Mar 31 2018 at 08:50)</a>:</h4>
<div class="codehilite"><pre><span></span>def Mor : bool → bool → Type
| ff ff := unit
| ff tt := bool
| tt ff := empty
| tt tt := unit

def Comp : Π x y z : bool, Mor y z → Mor x y → Mor x z
| ff ff ff _ g := g
| ff ff tt f _ := f
| ff tt tt _ g := g
| tt tt tt _ _ := ()
</pre></div>

<a name="124448446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448446" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448446">Mario Carneiro (Mar 31 2018 at 08:51)</a>:</h4>
<div class="codehilite"><pre><span></span>inductive Mor : bool → bool → Type
| id : ∀ b, Mor b b
| par : bool → Mor ff tt
</pre></div>

<a name="124448452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448452" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448452">Kenny Lau (Mar 31 2018 at 08:51)</a>:</h4>
<p>heh...</p>

<a name="124448454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448454" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448454">Kenny Lau (Mar 31 2018 at 08:51)</a>:</h4>
<p>what does <code>par</code> stand for?</p>

<a name="124448455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448455" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448455">Mario Carneiro (Mar 31 2018 at 08:51)</a>:</h4>
<p>parallel</p>

<a name="124448456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448456" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448456">Mario Carneiro (Mar 31 2018 at 08:51)</a>:</h4>
<p>making up names is hard...</p>

<a name="124448496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448496" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448496">Kenny Lau (Mar 31 2018 at 08:52)</a>:</h4>
<p>eu entendo</p>

<a name="124448540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448540" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448540">Mario Carneiro (Mar 31 2018 at 08:54)</a>:</h4>
<p>It might be worth generalizing this example to a whole bouquet of parallel arrows indexed by <code>A</code></p>

<a name="124448542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448542" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448542">Kenny Lau (Mar 31 2018 at 08:54)</a>:</h4>
<p>fair enough</p>

<a name="124448543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448543" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448543">Kenny Lau (Mar 31 2018 at 08:54)</a>:</h4>
<p>would you like to do the hard job of naming it for me</p>

<a name="124448544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448544" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448544">Mario Carneiro (Mar 31 2018 at 08:54)</a>:</h4>
<p><code>par</code> :)</p>

<a name="124448545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448545" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448545">Kenny Lau (Mar 31 2018 at 08:54)</a>:</h4>
<p>wonderful</p>

<a name="124448546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448546" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448546">Kenny Lau (Mar 31 2018 at 08:55)</a>:</h4>
<div class="codehilite"><pre><span></span>inductive Mor : bool → bool → Type
| id : ∀ b, Mor b b
| par : bool → Mor ff tt

def Comp : Π x y z : bool, Mor y z → Mor x y → Mor x z
| ff ff _  f _ := f
| _  tt tt _ g := g
</pre></div>

<a name="124448549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448549" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448549">Kenny Lau (Mar 31 2018 at 08:55)</a>:</h4>
<p>two cases!</p>

<a name="124448782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448782" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448782">Kenny Lau (Mar 31 2018 at 09:04)</a>:</h4>
<div class="codehilite"><pre><span></span>namespace par

variable α : Type u

inductive Mor : bool → bool → Type u
| id : ∀ b, Mor b b
| par : α → Mor ff tt

def Comp : Π x y z, Mor α y z → Mor α x y → Mor α x z
| ff ff _  f _ := f
| _  tt tt _ g := g

def Hid_left : ∀ x y f, Comp α x y y (Mor.id α y) f = f
| ff ff (Mor.id α b) := rfl
| ff tt _ := rfl
| tt tt (Mor.id α b) := rfl

def Hid_right : ∀ x y f, Comp α x x y f (Mor.id α x) = f
| ff ff (Mor.id α b) := rfl
| ff tt _ := rfl
| tt tt (Mor.id α b) := rfl

def Hassoc : ∀ x y z w f g h, Comp α x y w (Comp α y z w f g) h = Comp α x z w f (Comp α x y z g h)
| ff ff _  _  _ _ _ := rfl
| ff tt tt tt _ _ _ := rfl
| tt tt tt tt _ _ _ := rfl

end par

def par (α : Type u) : category bool :=
{ Mor := par.Mor α,
  Comp := par.Comp α,
  Id := par.Mor.id α,
  Hid_left := par.Hid_left α,
  Hid_right := par.Hid_right α,
  Hassoc := par.Hassoc α }

def two_mor : category bool :=
par bool
</pre></div>

<a name="124448783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448783" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448783">Kenny Lau (Mar 31 2018 at 09:04)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> do you see any possible golf on the casings?</p>

<a name="124448833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448833">Mario Carneiro (Mar 31 2018 at 09:07)</a>:</h4>
<p>I sometimes use secondary cases when a bunch of cases are the same; there isn't too much of that in this example but you could write <code>Hassoc</code> as</p>
<div class="codehilite"><pre><span></span>def Hassoc : ∀ x y z w f g h, Comp α x y w (Comp α y z w f g) h = Comp α x z w f (Comp α x y z g h)
| ff ff _  _  _ _ _ := rfl
| b tt tt tt _ _ _ := by cases b; refl
</pre></div>

<a name="124448872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448872" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448872">Kenny Lau (Mar 31 2018 at 09:08)</a>:</h4>
<p>well...</p>

<a name="124448874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448874" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448874">Kenny Lau (Mar 31 2018 at 09:08)</a>:</h4>
<p>that tactic was |unnecessary|</p>

<a name="124448879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448879" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448879">Mario Carneiro (Mar 31 2018 at 09:09)</a>:</h4>
<p>The advantage really shows itself when you need to deal with a wildcard case which abbreviates five identical cases with five identical proofs</p>

<a name="124448880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448880" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448880">Kenny Lau (Mar 31 2018 at 09:09)</a>:</h4>
<p>I see</p>

<a name="124448921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448921" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448921">Mario Carneiro (Mar 31 2018 at 09:10)</a>:</h4>
<p>it doesn't make the generated proof any shorter, but it's a slightly neater arrangement</p>

<a name="124448922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448922" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448922">Kenny Lau (Mar 31 2018 at 09:10)</a>:</h4>
<div class="codehilite"><pre><span></span>structure category (α : Type u) : Type (max u v + 1) :=
(Mor : Π x y : α, Type v)
(Comp : Π x y z, Mor y z → Mor x y → Mor x z)
(Id : Π x, Mor x x)
(Hid_left : ∀ x y (f : Mor x y), Comp _ _ _ (Id _) f = f)
(Hid_right : ∀ x y (f : Mor x y), Comp _ _ _ f (Id _) = f)
(Hassoc : ∀ x y z w (f : Mor z w) (g : Mor y z) (h : Mor x y), Comp _ _ _ (Comp _ _ _ f g) h = Comp _ _ _ f (Comp _ _ _ g h))
</pre></div>

<a name="124448923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448923" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448923">Kenny Lau (Mar 31 2018 at 09:10)</a>:</h4>
<p>I run into type problem when I try to define a cone</p>

<a name="124448924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448924" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448924">Kenny Lau (Mar 31 2018 at 09:10)</a>:</h4>
<p>namely, option</p>

<a name="124448929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448929" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448929">Kenny Lau (Mar 31 2018 at 09:11)</a>:</h4>
<p>the problem is the type of the morphism...</p>

<a name="124448930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448930" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448930">Mario Carneiro (Mar 31 2018 at 09:11)</a>:</h4>
<p>I was thinking about doing the same for the <code>Mor.id</code> cases in <code>Hid_left</code> and such but you need the cases there so that the <code>ff tt</code> case works</p>

<a name="124448973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448973" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448973">Kenny Lau (Mar 31 2018 at 09:12)</a>:</h4>
<p>wait</p>

<a name="124448974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448974" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448974">Kenny Lau (Mar 31 2018 at 09:12)</a>:</h4>
<div class="codehilite"><pre><span></span>def Mor : option α → option α → Type u_1
| none none := punit
| none (some y) := punit
| (some x) none := ulift empty
| (some x) (some y) := C.Mor x y
</pre></div>

<a name="124448975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448975" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448975">Kenny Lau (Mar 31 2018 at 09:12)</a>:</h4>
<p>how the hell does this work</p>

<a name="124448977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448977" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448977">Kenny Lau (Mar 31 2018 at 09:12)</a>:</h4>
<div class="codehilite"><pre><span></span>variables {α : Type u} (C : category α)
</pre></div>

<a name="124448978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448978" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448978">Mario Carneiro (Mar 31 2018 at 09:12)</a>:</h4>
<p>what's the problem?</p>

<a name="124448979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448979" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448979">Kenny Lau (Mar 31 2018 at 09:12)</a>:</h4>
<p>this is amazing</p>

<a name="124448980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448980">Kenny Lau (Mar 31 2018 at 09:12)</a>:</h4>
<p>I never defined <code>u_1</code></p>

<a name="124448982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448982" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448982">Kenny Lau (Mar 31 2018 at 09:12)</a>:</h4>
<p>it comes with <code>C</code>, but I never gave it a name</p>

<a name="124448987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448987" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448987">Mario Carneiro (Mar 31 2018 at 09:13)</a>:</h4>
<p>yeah, it's a really thin abstraction</p>

<a name="124448988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448988">Kenny Lau (Mar 31 2018 at 09:13)</a>:</h4>
<p>how does it work</p>

<a name="124448990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448990" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448990">Mario Carneiro (Mar 31 2018 at 09:13)</a>:</h4>
<p>also why <code>variables A B : Sort*</code> doesn't work</p>

<a name="124448991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124448991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124448991">Kenny Lau (Mar 31 2018 at 09:13)</a>:</h4>
<p>it's unprecedented, the ability to have an unnamed name</p>

<a name="124449030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449030" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449030">Mario Carneiro (Mar 31 2018 at 09:14)</a>:</h4>
<p>Whenever you have a free universe variable in a <code>variable</code> declaration, it adds a <code>universe u_n</code> definition to the file and uses that</p>

<a name="124449031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449031">Mario Carneiro (Mar 31 2018 at 09:14)</a>:</h4>
<p>it's not magically named or a metavariable or anything</p>

<a name="124449049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449049" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449049">Kenny Lau (Mar 31 2018 at 09:15)</a>:</h4>
<div class="codehilite"><pre><span></span>inductive Mor : option α → option α → Type (max u u_1)
| id : ∀ y, Mor none y
| mor : ∀ x y (f : C.Mor x y), Mor (some x) (some y)
</pre></div>

<a name="124449050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449050" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449050">Kenny Lau (Mar 31 2018 at 09:15)</a>:</h4>
<p>why do I need <code>max</code> here but not that one?</p>

<a name="124449052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449052" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449052">Kenny Lau (Mar 31 2018 at 09:15)</a>:</h4>
<div class="codehilite"><pre><span></span>def Mor : option α → option α → Type u_1
| none none := punit
| none (some y) := punit
| (some x) none := ulift empty
| (some x) (some y) := C.Mor x y
</pre></div>

<a name="124449108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449108" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449108">Mario Carneiro (Mar 31 2018 at 09:17)</a>:</h4>
<p>I don't recommend using <code>u_1</code>, you should name your variables</p>

<a name="124449109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449109" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449109">Kenny Lau (Mar 31 2018 at 09:17)</a>:</h4>
<p>how would I do that?</p>

<a name="124449111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449111">Mario Carneiro (Mar 31 2018 at 09:17)</a>:</h4>
<p><code>universes u v</code>?</p>

<a name="124449150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449150" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449150">Kenny Lau (Mar 31 2018 at 09:18)</a>:</h4>
<p>no...</p>

<a name="124449153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449153" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449153">Kenny Lau (Mar 31 2018 at 09:18)</a>:</h4>
<div class="codehilite"><pre><span></span>structure category (α : Type u) : Type (max u v + 1) :=
(Mor : Π x y : α, Type v)
(Comp : Π x y z, Mor y z → Mor x y → Mor x z)
(Id : Π x, Mor x x)
(Hid_left : ∀ x y (f : Mor x y), Comp _ _ _ (Id _) f = f)
(Hid_right : ∀ x y (f : Mor x y), Comp _ _ _ f (Id _) = f)
(Hassoc : ∀ x y z w (f : Mor z w) (g : Mor y z) (h : Mor x y), Comp _ _ _ (Comp _ _ _ f g) h = Comp _ _ _ f (Comp _ _ _ g h))
</pre></div>

<a name="124449154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449154" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449154">Kenny Lau (Mar 31 2018 at 09:18)</a>:</h4>
<p>I can't name it</p>

<a name="124449155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449155" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449155">Kenny Lau (Mar 31 2018 at 09:18)</a>:</h4>
<p>it comes with the <code>Mor</code> of the category variable</p>

<a name="124449156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449156">Kenny Lau (Mar 31 2018 at 09:18)</a>:</h4>
<div class="codehilite"><pre><span></span>variables {α : Type u} (C : category α)
</pre></div>

<a name="124449157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449157">Mario Carneiro (Mar 31 2018 at 09:19)</a>:</h4>
<p>You can write universe arguments of a constant explicitly with <code>category.{u v}</code></p>

<a name="124449162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449162">Kenny Lau (Mar 31 2018 at 09:19)</a>:</h4>
<p>oh worked</p>

<a name="124449215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449215" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449215">Kenny Lau (Mar 31 2018 at 09:21)</a>:</h4>
<div class="codehilite"><pre><span></span>inductive Mor : option α → option α → Type (max u v)
| id : ∀ y, Mor none y
| mor : ∀ x y (f : C.Mor x y), Mor x y
</pre></div>

<a name="124449216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449216" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449216">Kenny Lau (Mar 31 2018 at 09:21)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> the name <code>id</code> is morally wrong; how would you name it?</p>

<a name="124449217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449217" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449217">Kenny Lau (Mar 31 2018 at 09:21)</a>:</h4>
<p>maybe <code>proj</code></p>

<a name="124449258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449258" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449258">Mario Carneiro (Mar 31 2018 at 09:22)</a>:</h4>
<p>you should use <code>some</code> instead of the coercion</p>

<a name="124449259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449259" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449259">Mario Carneiro (Mar 31 2018 at 09:22)</a>:</h4>
<p>like you were before</p>

<a name="124449262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449262" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449262">Kenny Lau (Mar 31 2018 at 09:23)</a>:</h4>
<div class="codehilite"><pre><span></span>inductive Mor : option α → option α → Type (max u v)
| proj : ∀ y, Mor none y
| mor : ∀ x y (f : C.Mor x y), Mor (some x) (some y)
</pre></div>

<a name="124449263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449263" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449263">Kenny Lau (Mar 31 2018 at 09:23)</a>:</h4>
<p>this?</p>

<a name="124449266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449266" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449266">Kenny Lau (Mar 31 2018 at 09:23)</a>:</h4>
<p>komu eesu?</p>

<a name="124449267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449267" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449267">Mario Carneiro (Mar 31 2018 at 09:23)</a>:</h4>
<p>maybe just <code>none_le</code> or something like that?</p>

<a name="124449268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449268" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449268">Kenny Lau (Mar 31 2018 at 09:23)</a>:</h4>
<p>i don't like thinking it in a poset-manner</p>

<a name="124449269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449269" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449269">Kenny Lau (Mar 31 2018 at 09:23)</a>:</h4>
<p>about</p>

<a name="124449314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449314">Mario Carneiro (Mar 31 2018 at 09:25)</a>:</h4>
<p>I think this one should be defined with a <code>def</code>; that will fix the universe <code>max</code> thing</p>

<a name="124449315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449315" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449315">Kenny Lau (Mar 31 2018 at 09:25)</a>:</h4>
<p>what do you mean by "fix", is it a bug?</p>

<a name="124449355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449355" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449355">Mario Carneiro (Mar 31 2018 at 09:26)</a>:</h4>
<p>The problem is that lean isn't smart enough to notice that the <code>∀ y</code> in proj only fills out one morphism per type in the family</p>

<a name="124449360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449360" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449360">Mario Carneiro (Mar 31 2018 at 09:27)</a>:</h4>
<p>If you just try to push it all in a single inductive type, it overestimates the best universe</p>

<a name="124449489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449489" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449489">Kenny Lau (Mar 31 2018 at 09:32)</a>:</h4>
<div class="codehilite"><pre><span></span>def Mor : option α → option α → Type v
| none none := punit
| none (some y) := punit
| (some x) none := ulift empty
| (some x) (some y) := C.Mor x y

def Comp : Π x y z, Mor C y z → Mor C x y → Mor C x z
| none none _ f _ := f
| none _ (some z) _ _ := punit.star
| (some x) (some y) (some z) f g := C.Comp x y z f g
</pre></div>

<a name="124449490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449490" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449490">Kenny Lau (Mar 31 2018 at 09:32)</a>:</h4>
<p>the sky is blue again</p>

<a name="124449496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449496" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449496">Kenny Lau (Mar 31 2018 at 09:33)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> what next, are you going to tell me that you can generalize <code>option</code> to <code>sum</code></p>

<a name="124449536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449536" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449536">Mario Carneiro (Mar 31 2018 at 09:34)</a>:</h4>
<div class="codehilite"><pre><span></span>def Mor : option α → option α → Type v
| none     y        := punit
| _        none     := ulift empty
| (some x) (some y) := C.Mor x y
</pre></div>

<a name="124449537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449537" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449537">Kenny Lau (Mar 31 2018 at 09:34)</a>:</h4>
<p>ok thanks</p>

<a name="124449543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449543" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449543">Kenny Lau (Mar 31 2018 at 09:35)</a>:</h4>
<p>ok it's really 3 equations</p>

<a name="124449544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449544" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449544">Mario Carneiro (Mar 31 2018 at 09:35)</a>:</h4>
<p>You can generalize option to sum, there are two interesting structures there - disjoint union and union where the left objects have morphisms to the right</p>

<a name="124449586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449586" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449586">Mario Carneiro (Mar 31 2018 at 09:36)</a>:</h4>
<p>but <code>option</code> is nicer to use than <code>sum punit</code></p>

<a name="124449587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449587" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449587">Kenny Lau (Mar 31 2018 at 09:36)</a>:</h4>
<div class="codehilite"><pre><span></span>def Mor : option α → option α → Type v
| none y := punit
| (some x) none := ulift empty
| (some x) (some y) := C.Mor x y

/-
._eqn_1 : ∀ {α : Type u} (C : category α) (y : option α), Mor C none y = punit
._eqn_2 : ∀ {α : Type u} (C : category α) (x : α), Mor C (some x) none = ulift empty
._eqn_3 : ∀ {α : Type u} (C : category α) (x y : α), Mor C (some x) (some y) = C.Mor x y
-/

def Mor : option α → option α → Type v
| none y := punit
| _ none := ulift empty
| (some x) (some y) := C.Mor x y

/-
._eqn_1 : ∀ {α : Type u} (C : category α), Mor C none none = punit
._eqn_2 : ∀ {α : Type u} (C : category α) (val : α), Mor C none (some val) = punit
._eqn_3 : ∀ {α : Type u} (C : category α) (val : α), Mor C (some val) none = ulift empty
._eqn_4 : ∀ {α : Type u} (C : category α) (x y : α), Mor C (some x) (some y) = C.Mor x y
-/
</pre></div>

<a name="124449592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449592">Kenny Lau (Mar 31 2018 at 09:37)</a>:</h4>
<p>por que pasa isso</p>

<a name="124449594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449594" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449594">Kenny Lau (Mar 31 2018 at 09:37)</a>:</h4>
<p>ok I know why I'm just exclaiming</p>

<a name="124449633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449633" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449633">Mario Carneiro (Mar 31 2018 at 09:38)</a>:</h4>
<p>¡</p>

<a name="124449678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449678" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449678">Kenny Lau (Mar 31 2018 at 09:40)</a>:</h4>
<p>pojish einteindeh si eu falu assii?</p>

<a name="124449685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449685" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449685">Kenny Lau (Mar 31 2018 at 09:41)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span></p>

<a name="124449722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449722" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449722">Mario Carneiro (Mar 31 2018 at 09:42)</a>:</h4>
<p>your portuguese is getting harder to read</p>

<a name="124449725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449725" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449725">Kenny Lau (Mar 31 2018 at 09:42)</a>:</h4>
<p>:P</p>

<a name="124449727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449727" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449727">Kenny Lau (Mar 31 2018 at 09:42)</a>:</h4>
<p>"podes entender se eu falo assim"</p>

<a name="124449736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449736" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449736">Mario Carneiro (Mar 31 2018 at 09:43)</a>:</h4>
<p>I think Nima had a similar issue the other day</p>

<a name="124449737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449737" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449737">Kenny Lau (Mar 31 2018 at 09:43)</a>:</h4>
<p>not understanding my portuguese?</p>

<a name="124449774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449774" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449774">Mario Carneiro (Mar 31 2018 at 09:44)</a>:</h4>
<p>something about the order of case splits causing superfluous splitting</p>

<a name="124449778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449778" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449778">Kenny Lau (Mar 31 2018 at 09:44)</a>:</h4>
<p>oh</p>

<a name="124449780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449780" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449780">Kenny Lau (Mar 31 2018 at 09:44)</a>:</h4>
<p>I could do disjoint union</p>

<a name="124449782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449782" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449782">Kenny Lau (Mar 31 2018 at 09:44)</a>:</h4>
<p>but I don't think there's this notion in the category theory community?</p>

<a name="124449789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449789" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449789">Mario Carneiro (Mar 31 2018 at 09:45)</a>:</h4>
<p>Have you coordinated with Scott?</p>

<a name="124449790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449790" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449790">Kenny Lau (Mar 31 2018 at 09:45)</a>:</h4>
<p>I mean, it is probably some universal objects in the category of categories</p>

<a name="124449791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449791" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449791">Kenny Lau (Mar 31 2018 at 09:45)</a>:</h4>
<p>no</p>

<a name="124449792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449792" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449792">Mario Carneiro (Mar 31 2018 at 09:45)</a>:</h4>
<p>The disjoint union is certainly the coproduct in Cat</p>

<a name="124449793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449793" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449793">Kenny Lau (Mar 31 2018 at 09:45)</a>:</h4>
<p>aha</p>

<a name="124449876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124449876" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124449876">Kenny Lau (Mar 31 2018 at 09:48)</a>:</h4>
<p>is there a shorthand for <code>punit.star</code>?</p>

<a name="124450072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124450072" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124450072">Kenny Lau (Mar 31 2018 at 09:57)</a>:</h4>
<p>why does <code>#check  Type  1000000</code> crash?</p>

<a name="124450073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124450073" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124450073">Mario Carneiro (Mar 31 2018 at 09:57)</a>:</h4>
<p>no, although you could open <code>punit</code></p>

<a name="124450110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124450110" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124450110">Mario Carneiro (Mar 31 2018 at 09:58)</a>:</h4>
<p>lol stop breaking lean</p>

<a name="124450113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124450113" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124450113">Kenny Lau (Mar 31 2018 at 09:58)</a>:</h4>
<p>I mean, it should be just a construct</p>

<a name="124450114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124450114" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124450114">Kenny Lau (Mar 31 2018 at 09:58)</a>:</h4>
<p>unless you're telling me that it creates an array with a million entries</p>

<a name="124450115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124450115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124450115">Kenny Lau (Mar 31 2018 at 09:58)</a>:</h4>
<p>but most of them should be just empty?</p>

<a name="124450116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124450116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124450116">Mario Carneiro (Mar 31 2018 at 09:58)</a>:</h4>
<p>I think it does something by recursion a million times and busts the stack</p>

<a name="124450118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124450118" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124450118">Kenny Lau (Mar 31 2018 at 09:59)</a>:</h4>
<p>hmm</p>

<a name="124450123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124450123" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124450123">Kenny Lau (Mar 31 2018 at 09:59)</a>:</h4>
<p>Is there a general construction that abstracts "from set to pointed set"?</p>

<a name="124450186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124450186" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124450186">Kenny Lau (Mar 31 2018 at 10:02)</a>:</h4>
<p>oh, it's just the coslice category isn't it</p>

<a name="124451065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124451065" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124451065">Kenny Lau (Mar 31 2018 at 10:38)</a>:</h4>
<div class="codehilite"><pre><span></span>def Cat : category Σ α : Type u, category.{u v} α :=
{ Mor := λ C D, functor C.2 D.2,
  Comp := λ C D E, functor.comp C.2 D.2 E.2,
  Id := λ C, functor.id C.2,
  Hid_left := λ C D F, by cases F; refl,
  Hid_right := λ C D F, by cases F; refl,
  Hassoc := λ _ _ _ _ _ _ _, rfl, }
</pre></div>

<a name="124451066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124451066" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124451066">Kenny Lau (Mar 31 2018 at 10:38)</a>:</h4>
<p>my life is now complete</p>

<a name="124452180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124452180" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124452180">Kenny Lau (Mar 31 2018 at 11:24)</a>:</h4>
<div class="codehilite"><pre><span></span>def comma {α : Type u} (C : category.{u v} α)
  {β : Type u₁} (D : category.{u₁ v₁} β)
  {γ : Type u₂} (E : category.{u₂ v₂} γ)
  (F : functor C E) (G : functor D E) :
  category Σ c d, E.Mor (F.F c) (G.F d) :=
{ Mor := λ x y, { P : C.Mor x.1 y.1 × D.Mor x.2.1 y.2.1 //
      E.Comp (F.F x.1) (F.F y.1) (G.F y.2.1) y.2.2 (F.mor x.1 y.1 P.1)
    = E.Comp (F.F x.1) (G.F x.2.1) (G.F y.2.1) (G.mor x.2.1 y.2.1 P.2) x.2.2 },
  Comp := λ x y z P Q, ⟨(C.Comp x.1 y.1 z.1 P.1.1 Q.1.1, D.Comp x.2.1 y.2.1 z.2.1 P.1.2 Q.1.2),
    by rw [← F.Hcomp, ← G.Hcomp, E.Hassoc, ← Q.2, ← E.Hassoc, P.2, E.Hassoc]⟩,
  Id := λ x, ⟨(C.Id x.1, D.Id x.2.1), by rw [F.Hid, G.Hid, E.Hid_left, E.Hid_right]⟩,
  Hid_left := λ x y P, subtype.eq $ by dsimp; rw [C.Hid_left, D.Hid_left]; cases P.1; refl,
  Hid_right := λ x y P, subtype.eq $ by dsimp; rw [C.Hid_right, D.Hid_right]; cases P.1; refl,
  Hassoc := λ x y z w P Q R, subtype.eq $ by dsimp; rw [C.Hassoc, D.Hassoc] }
</pre></div>


<p>Now I can have pointed sets :P</p>

<a name="124464151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464151" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464151">Nima (Mar 31 2018 at 19:41)</a>:</h4>
<p>How do we pass arguments to meta definition?<br>
The following does not typecheck</p>
<div class="codehilite"><pre><span></span>universe u
open tactic monad expr classical

meta def inst {α: Type u} (p:α → Prop) (h:∀ (n:α), p n) (a:α) : tactic unit :=
do skip

example {α:Type u} (b:α) (p:α → Prop) : (∀ (a:α), p a) → p b :=
begin
  intro h,
  have h&#39; : p b, from h b, -- I want the next line have does the same thing
  inst p h b, -- error: unknown identifier &#39;p&#39; &#39;h&#39; &#39;b&#39;
end
</pre></div>


<p>Tactic State:</p>
<div class="codehilite"><pre><span></span>α : Type u,
b : α,
p : α → Prop,
h : ∀ (a : α), p a,
h&#39; : p b
⊢ p b
</pre></div>

<a name="124464196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464196" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464196">Simon Hudon (Mar 31 2018 at 19:43)</a>:</h4>
<p>I believe there exists a tactic for what you're trying to do. I'm still going to assume that you want an answer to the question you actually asked</p>

<a name="124464258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464258" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464258">Nima (Mar 31 2018 at 19:45)</a>:</h4>
<p>I don't know such tactic, but sure, I would like to know an answer to what I asked.</p>

<a name="124464348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464348" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464348">Simon Hudon (Mar 31 2018 at 19:48)</a>:</h4>
<p>It is called <code>specialize</code>. It is pretty nice. </p>
<p>Let's put your tactic in its section because we need to open a bunch of namespaces:</p>
<div class="codehilite"><pre><span></span><span class="kn">section</span>
<span class="kn">open</span> <span class="n">tactic</span> <span class="n">interactive</span> <span class="n">interactive</span><span class="bp">.</span><span class="n">types</span> <span class="n">lean</span><span class="bp">.</span><span class="n">parser</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">inst</span> <span class="o">(</span><span class="n">fa</span> <span class="o">:</span> <span class="n">parse</span> <span class="n">texpr</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">parse</span> <span class="n">texpr</span><span class="o">)</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="n">do</span> <span class="n">trace</span> <span class="n">fa</span><span class="o">,</span>
   <span class="n">trace</span> <span class="n">x</span>

<span class="kn">end</span>
</pre></div>

<a name="124464361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464361" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464361">Simon Hudon (Mar 31 2018 at 19:49)</a>:</h4>
<p>When you're given information to a tactic, you're basically giving them syntactic objects and you need provide a way for Lean to parse it. That's because you can invent a lot of different notations for your tactics.</p>

<a name="124464414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464414" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464414">Nima (Mar 31 2018 at 19:51)</a>:</h4>
<p>When I write <code>inst h b</code>, I still get the same error(?)</p>

<a name="124464460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464460" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464460">Simon Hudon (Mar 31 2018 at 19:53)</a>:</h4>
<p>I'm not sure it will solve anything but let's see if it does. Add the following between your tactic and your lemma:</p>
<div class="codehilite"><pre><span></span><span class="n">run_cmd</span> <span class="n">add_interactive</span> <span class="o">[</span><span class="bp">`</span><span class="n">inst</span><span class="o">]</span>
</pre></div>

<a name="124464516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464516" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464516">Nima (Mar 31 2018 at 19:55)</a>:</h4>
<p>Instead of the previous error, this gives me  error <code>expression expected </code>, error is below <code>b</code> in <code>inst h b</code></p>

<a name="124464668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464668">Nima (Mar 31 2018 at 20:00)</a>:</h4>
<p>Also, is there anyway I can use <code>specialize</code> on a <strong>goal</strong>  like <code>∃ (b : α), p b</code></p>

<a name="124464676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464676" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464676">Simon Hudon (Mar 31 2018 at 20:01)</a>:</h4>
<p>To your second question: no, you need <code>existsi</code> and you feel it your witness or a list of witnesses</p>

<a name="124464723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464723" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464723">Simon Hudon (Mar 31 2018 at 20:02)</a>:</h4>
<p>What if you erase <code>b</code> in <code>inst h b</code>?</p>

<a name="124464777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464777" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464777">Nima (Mar 31 2018 at 20:04)</a>:</h4>
<p>Here is the status:</p>
<div class="codehilite"><pre><span></span>universe u

section
open tactic interactive interactive.types lean.parser
meta def inst (fa : parse texpr) (x : parse texpr) : tactic unit :=
do trace fa,
   trace x
end
run_cmd add_interactive [`inst]

example {α:Type u} (b:α) (p:α → Prop) : (∀ (a:α), p a) → p b :=
begin
  intro h,
  inst h,  -- error: expression expected
  admit
end
</pre></div>

<a name="124464788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464788" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464788">Simon Hudon (Mar 31 2018 at 20:05)</a>:</h4>
<p>Ok, I get it. Sorry it took me a while. Lean seems <code>h b</code> as one expression in <code>inst h b</code> so we need a separator</p>

<a name="124464829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464829" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464829">Simon Hudon (Mar 31 2018 at 20:06)</a>:</h4>
<p>We could require the user to enter <code>inst (h, b)</code>, how does that look to you?</p>

<a name="124464839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464839" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464839">Nima (Mar 31 2018 at 20:07)</a>:</h4>
<p>Fine by me, but does that mean we should change definition of <code>inst</code>? (right now I am getting the same error)</p>

<a name="124464843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464843">Simon Hudon (Mar 31 2018 at 20:07)</a>:</h4>
<p>In that case, you'd define your tactic as:</p>
<div class="codehilite"><pre><span></span>meta def inst (fa : parse $ tk &quot;(&quot; *&gt; texpr &lt;* tk &quot;,&quot;)
              (x : parse $ texpr &lt;* tk &quot;)&quot;) : tactic unit :=
do trace fa,
   trace x

end
</pre></div>

<a name="124464845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464845">Nima (Mar 31 2018 at 20:07)</a>:</h4>
<p>wow! this is scary</p>

<a name="124464886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464886" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464886">Simon Hudon (Mar 31 2018 at 20:08)</a>:</h4>
<p><code>tk</code> and <code>texpr</code> are commands for the parser: literally "parse a parenthesis" and "parse an expression"</p>

<a name="124464934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464934" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464934">Simon Hudon (Mar 31 2018 at 20:10)</a>:</h4>
<p><code>&lt;*</code> and <code>*&gt;</code> is just to get them to be executed one after the other. <code>a &lt;* b</code> runs <code>a</code> first, then <code>b</code> and returns whatever <code>a</code> returns. <code>a *&gt; b</code> runs <code>a</code> first as well and then runs <code>b</code> and returns the result of <code>b</code></p>

<a name="124464941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464941" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464941">Nima (Mar 31 2018 at 20:11)</a>:</h4>
<p>I see, and <code>$</code> ?</p>

<a name="124464990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124464990" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124464990">Simon Hudon (Mar 31 2018 at 20:13)</a>:</h4>
<p>It's a way of making function application nicer by using fewer parentheses. If you'd write <code>f (g (h x))</code> instead you can write <code>f $ g $ h x</code></p>

<a name="124465039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124465039" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124465039">Simon Hudon (Mar 31 2018 at 20:14)</a>:</h4>
<p>So, instead of <code> parse $ tk "(" *&gt; texpr &lt;* tk "," </code>, one could write:</p>
<div class="codehilite"><pre><span></span><span class="n">parse</span>
   <span class="o">(</span><span class="n">do</span> <span class="n">tk</span> <span class="s2">&quot;(&quot;</span><span class="o">,</span>
       <span class="n">e</span> <span class="err">←</span> <span class="n">texpr</span><span class="o">,</span>
       <span class="n">tk</span> <span class="s2">&quot;,&quot;</span><span class="o">,</span>
       <span class="n">return</span> <span class="n">e</span><span class="o">)</span>
</pre></div>

<a name="124465047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124465047" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124465047">Nima (Mar 31 2018 at 20:15)</a>:</h4>
<p>We can only use <code>$</code> in meta world. Right?<br>
The following gives me error</p>
<div class="codehilite"><pre><span></span>def f (n:ℕ) := n+1
example : f $ f $ 1 = 3 := sorry
</pre></div>


<p>Error is:</p>
<div class="codehilite"><pre><span></span>type mismatch at application
  f (1 = 3)
term
  1 = 3
has type
  Prop
but is expected to have type
  ℕ
</pre></div>

<a name="124465095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124465095" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124465095">Simon Hudon (Mar 31 2018 at 20:17)</a>:</h4>
<p>No actually, it works everywhere. The problem with your expression is <code>f $ f 1</code> is of type <code>ℕ </code> but you're using it to specify the type of <code>example</code> it should have type <code>Sort u</code></p>

<a name="124465142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124465142" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124465142">Simon Hudon (Mar 31 2018 at 20:18)</a>:</h4>
<p>Now the problem is precedence: <code>$</code> has lower precedence than <code>=</code> and Lean reads your expression as <code>f (f (1 = 3))</code></p>

<a name="124465144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124465144" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124465144">Nima (Mar 31 2018 at 20:18)</a>:</h4>
<p>Nice, thanks a lot,<br>
Also, <code>existsi</code> you mentioned worked as a charm.</p>

<a name="124465151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124465151" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124465151">Simon Hudon (Mar 31 2018 at 20:19)</a>:</h4>
<p><code>$</code> won't make your expression nicer but if you applied <code>f</code> once more, you could write <code>f (f $ f 1) = 3</code> where you use <code>(</code> and <code>)</code> to "protect" <code>=</code> from <code>$</code>, in a sense</p>

<a name="124465245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124465245" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124465245">Nima (Mar 31 2018 at 20:22)</a>:</h4>
<p>I see, it is good to have an alternative to parenthesis</p>

<a name="124465259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124465259" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124465259">Moses Schönfinkel (Mar 31 2018 at 20:23)</a>:</h4>
<p>to be fair I would then do <code>example : (f ∘ f ∘ f) 1 = 4 := sorry</code> :)</p>

<a name="124465306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124465306" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124465306">Moses Schönfinkel (Mar 31 2018 at 20:24)</a>:</h4>
<p>it's an eternal Haskell bikeshed as to how to mix parens, composition, flip and low priority application :P</p>

<a name="124465522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124465522" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124465522">Simon Hudon (Mar 31 2018 at 20:33)</a>:</h4>
<p>I agree on second point, not on first. I prefer <code> f ∘ f ∘ f $ 1</code> if we're going to use <code>∘</code> to avoid parenthesis ... but in this case, it doesn't help</p>

<a name="124465562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124465562" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124465562">Moses Schönfinkel (Mar 31 2018 at 20:34)</a>:</h4>
<p>oh, you're absolutely right in this regard, it doesn't avoid the parens :)</p>

<a name="124465563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124465563" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124465563">Moses Schönfinkel (Mar 31 2018 at 20:34)</a>:</h4>
<p>in general I do prefer composition over anything else tho</p>

<a name="124784334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784334" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784334">Nima (Apr 08 2018 at 03:14)</a>:</h4>
<p>I know <code>exact fact p</code> finishes the proof, but how can I break it into the following two steps:<br>
1. add <code>fact</code> to my set of hypotheses (named <code>fa</code>)<br>
2. use <code>fa</code> to finish the proof</p>
<div class="codehilite"><pre><span></span>constant fact : ∀ (p:Prop), ¬p
example (p:Prop) : ¬p :=
begin
  exact fact p
end
</pre></div>


<p>Also, I used <code>constant</code> to define an axiom. Is this the usual method?</p>

<a name="124784341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784341" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784341">Kenny Lau (Apr 08 2018 at 03:15)</a>:</h4>
<p>we don't usually use <code>constant/axiom</code></p>

<a name="124784342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784342" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784342">Mario Carneiro (Apr 08 2018 at 03:15)</a>:</h4>
<p><code>have fa := fact, exact fa p</code></p>

<a name="124784382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784382" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784382">Mario Carneiro (Apr 08 2018 at 03:16)</a>:</h4>
<p>The usual method is not to add axioms at all. Usually it suffices to use <code>variable</code> instead, which adds the "axiom" as a precondition of the theorem</p>

<a name="124784383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784383" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784383">Mario Carneiro (Apr 08 2018 at 03:17)</a>:</h4>
<p>You can also use <code>apply fa</code> instead of <code>exact fa p</code> to finish the proof</p>

<a name="124784427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784427" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784427">Kenny Lau (Apr 08 2018 at 03:18)</a>:</h4>
<p>as a useless and obvious remark, your axiom is inconsistent:</p>

<a name="124784428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784428" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784428">Kenny Lau (Apr 08 2018 at 03:18)</a>:</h4>
<div class="codehilite"><pre><span></span>constant fact : ∀ (p:Prop), ¬p
example : false :=
begin
  apply fact (fact = fact),
  exact rfl
end
</pre></div>

<a name="124784429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784429" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784429">Nima (Apr 08 2018 at 03:18)</a>:</h4>
<p>If I have many axioms, isn't it going to be a problem?<br>
Suppose I define a lot of axioms to use in a project.<br>
But I am sure I am not going to use all of them in all of theorems.<br>
Isn't it considered a problem that I see all of them in my proof status?</p>

<a name="124784434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784434">Kenny Lau (Apr 08 2018 at 03:19)</a>:</h4>
<p>what are your axioms?</p>

<a name="124784480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784480" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784480">Mario Carneiro (Apr 08 2018 at 03:20)</a>:</h4>
<p>One way to manage a large collection of axioms is to bundle them all in a typeclass like <code>field A</code></p>

<a name="124784487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784487" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784487">Mario Carneiro (Apr 08 2018 at 03:21)</a>:</h4>
<p>If you use <code>variable</code> to declare your axioms, only the ones you actually use in a given theorem will be added as preconditions to the theorem</p>

<a name="124784530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784530" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784530">Nima (Apr 08 2018 at 03:22)</a>:</h4>
<blockquote>
<p>If you use <code>variable</code> to declare your axioms, only the ones you actually use in a given theorem will be added as preconditions to the theorem</p>
</blockquote>
<p>So in that case, what is the difference between constant and variable?</p>

<a name="124784578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784578" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784578">Kenny Lau (Apr 08 2018 at 03:24)</a>:</h4>
<p><code>constant</code> is global, in the sense that it is true once and for all</p>

<a name="124784587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784587" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784587">Kenny Lau (Apr 08 2018 at 03:25)</a>:</h4>
<p>whereas, e.g. <code>example : P -&gt; Q := sorry</code> is the same as</p>
<div class="codehilite"><pre><span></span>variable (h : P)
example : Q := sorry
</pre></div>

<a name="124784588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784588">Kenny Lau (Apr 08 2018 at 03:25)</a>:</h4>
<p><code>variable</code> is more like a local assumption</p>

<a name="124784629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784629" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784629">Nima (Apr 08 2018 at 03:26)</a>:</h4>
<p>I have not written any large collection of axioms, I am thinking of a <code>C++</code> type with a lot of constraints.<br>
If all these constraints are satisfied then the operations that I will define on this type make sense.<br>
So how should I define all type constraints so I can easily use them later? (obviously I am going to have more than one type)</p>

<a name="124784640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784640" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784640">Kenny Lau (Apr 08 2018 at 03:27)</a>:</h4>
<div class="codehilite"><pre><span></span>class module (α : out_param $ Type u) (β : Type v) [out_param $ ring α]
  extends has_scalar α β, add_comm_group β :=
(smul_add : ∀r (x y : β), r • (x + y) = r • x + r • y)
(add_smul : ∀r s (x : β), (r + s) • x = r • x + s • x)
(mul_smul : ∀r s (x : β), (r * s) • x = r • s • x)
(one_smul : ∀x : β, (1 : α) • x = x)
</pre></div>

<a name="124784641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784641" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784641">Kenny Lau (Apr 08 2018 at 03:27)</a>:</h4>
<p>make it a structure / class</p>

<a name="124784749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784749" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784749">Simon Hudon (Apr 08 2018 at 03:30)</a>:</h4>
<p>A <code>constant</code> / <code>axiom</code> (they're the same) is like you gained knowledge for free. With <code>variables</code>, <code>class</code> and <code>structure</code>, you get to assume certain properties but whatever you assume eventually has to be proved.</p>

<a name="124784821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784821" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784821">Simon Hudon (Apr 08 2018 at 03:33)</a>:</h4>
<p>If you have <code>variable h : false</code>, you can prove any theorem statement you want but using that theorem will be much more demanding. If you have <code>constant h : false</code>, you'll be able to prove all the theorems that you want and you'll never have to "pay" for such a strong assumption. That means that you may be building a bunch of nonsense. Especially if you have two or more axioms and you don't realize that they contradict each other</p>

<a name="124784910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784910" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784910">Simon Hudon (Apr 08 2018 at 03:36)</a>:</h4>
<p>(actually, I can't think of a use for a theorem that assumes false (with <code>variable</code>), it's probably useless but also harmless)</p>

<a name="124784913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784913" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784913">Kenny Lau (Apr 08 2018 at 03:36)</a>:</h4>
<p>you can never prove false, so you can never use that theorem</p>

<a name="124784914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784914" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784914">Kenny Lau (Apr 08 2018 at 03:37)</a>:</h4>
<p>oh wait</p>

<a name="124784918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784918" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784918">Nima (Apr 08 2018 at 03:37)</a>:</h4>
<p>So would you finish this example (if I use <code>constant</code> then I can do it):</p>
<div class="codehilite"><pre><span></span>variable h : false
example : ∀ (p:Prop), ¬ p :=  sorry
</pre></div>

<a name="124784919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784919" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784919">Kenny Lau (Apr 08 2018 at 03:37)</a>:</h4>
<p>that theorem is exactly <code>false.elim</code></p>

<a name="124784922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784922" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784922">Mario Carneiro (Apr 08 2018 at 03:37)</a>:</h4>
<p>I use <code>false.elim</code> all the time...</p>

<a name="124784923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784923" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784923">Kenny Lau (Apr 08 2018 at 03:37)</a>:</h4>
<p><code>false.elim h</code></p>

<a name="124784924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784924" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784924">Simon Hudon (Apr 08 2018 at 03:37)</a>:</h4>
<blockquote>
<p>I use <code>false.elim</code> all the time...</p>
</blockquote>
<p>Yes, me too but you only need one of those</p>

<a name="124784961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784961" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784961">Mario Carneiro (Apr 08 2018 at 03:38)</a>:</h4>
<p>What is true is that you don't really need anything other than <code>false.elim</code> in an inconsistent context</p>

<a name="124784964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784964" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784964">Nima (Apr 08 2018 at 03:38)</a>:</h4>
<p>I see, thanks</p>

<a name="124784965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784965">Mario Carneiro (Apr 08 2018 at 03:38)</a>:</h4>
<p>since it's like <code>sorry</code>, it's the best theorem</p>

<a name="124784972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124784972" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124784972">Mario Carneiro (Apr 08 2018 at 03:39)</a>:</h4>
<p>You can also write <code>h.elim</code> if <code>h : false</code> btw</p>

<a name="124785013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785013" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785013">Nima (Apr 08 2018 at 03:40)</a>:</h4>
<p>When I wasn't using <code>class</code>, I defined a constant for an operator and then define notation for it. How can I do the same for class?</p>
<div class="codehilite"><pre><span></span>universe u
class number(α : Type u) [linear_order α] :=
(neg₀ : α     → option α)

prefix `-₀`:40 := neg₀ -- won&#39;t type check
</pre></div>

<a name="124785015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785015" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785015">Kenny Lau (Apr 08 2018 at 03:40)</a>:</h4>
<p><code>number.neg_o</code></p>

<a name="124785021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785021" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785021">Kenny Lau (Apr 08 2018 at 03:41)</a>:</h4>
<p>not sure what you're trying to do though</p>

<a name="124785022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785022">Kenny Lau (Apr 08 2018 at 03:41)</a>:</h4>
<p>neg maps alpha to option alpha?</p>

<a name="124785023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785023" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785023">Mario Carneiro (Apr 08 2018 at 03:41)</a>:</h4>
<p>optional negation, I assume</p>

<a name="124785024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785024" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785024">Mario Carneiro (Apr 08 2018 at 03:42)</a>:</h4>
<p>something like <code>nat.ppred</code>?</p>

<a name="124785063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785063" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785063">Nima (Apr 08 2018 at 03:42)</a>:</h4>
<p>Excellent,<br>
Suppose I have a value of type <code>int</code> (in <code>C++</code>). Just because negation is defined it does not mean that I can take negation of every value. So I defined it to be something like this!</p>

<a name="124785065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785065" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785065">Kenny Lau (Apr 08 2018 at 03:42)</a>:</h4>
<p>but shouldn't that not be a field</p>

<a name="124785066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785066" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785066">Kenny Lau (Apr 08 2018 at 03:43)</a>:</h4>
<p>I mean, you don't want to permit any map from alpha to option alpha</p>

<a name="124785071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785071">Mario Carneiro (Apr 08 2018 at 03:43)</a>:</h4>
<p>Who said anything about it being a field?</p>

<a name="124785072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785072" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785072">Kenny Lau (Apr 08 2018 at 03:43)</a>:</h4>
<p>by field I mean a field of the class</p>

<a name="124785073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785073" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785073">Kenny Lau (Apr 08 2018 at 03:43)</a>:</h4>
<p>i.e. the things after <code>:=</code></p>

<a name="124785074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785074" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785074">Mario Carneiro (Apr 08 2018 at 03:43)</a>:</h4>
<p>what's wrong with specifying a negation operation like this?</p>

<a name="124785113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785113" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785113">Kenny Lau (Apr 08 2018 at 03:44)</a>:</h4>
<p>oh</p>

<a name="124785114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785114" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785114">Kenny Lau (Apr 08 2018 at 03:44)</a>:</h4>
<p>I thought it's like making int from nat</p>

<a name="124785115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785115">Kenny Lau (Apr 08 2018 at 03:44)</a>:</h4>
<p>misinterpreted</p>

<a name="124785258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785258" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785258">Nima (Apr 08 2018 at 03:50)</a>:</h4>
<p>Section 6.6 of Theorem Proving in Lean says</p>
<blockquote>
<p>They can also include subscripts, which can be entered by typing <code>\_</code> followed by the desired subscripted character</p>
</blockquote>
<p>I can only use single digits as subscript in VS Code. Am I missing something?</p>

<a name="124785259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785259" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785259">Kenny Lau (Apr 08 2018 at 03:50)</a>:</h4>
<p><code>\_m\_g</code></p>

<a name="124785260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785260" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785260">Kenny Lau (Apr 08 2018 at 03:50)</a>:</h4>
<p>you need to do it twice</p>

<a name="124785311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785311" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785311">Nima (Apr 08 2018 at 03:53)</a>:</h4>
<p>I type <code>m</code> then <code>\</code> then <code>_</code> them <code>m</code> then <code>\</code> then <code>_</code> then <code>g</code>then space <br>
I got: <code>m</code> followed by a box followed by a dash followed by <code>g</code></p>

<a name="124785350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785350" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785350">Kenny Lau (Apr 08 2018 at 03:54)</a>:</h4>
<p><code>\_m \_g </code></p>

<a name="124785351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785351" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785351">Kenny Lau (Apr 08 2018 at 03:54)</a>:</h4>
<p>space after <code>m</code></p>

<a name="124785358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785358" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785358">Nima (Apr 08 2018 at 03:55)</a>:</h4>
<p>I typed <code>m</code> then <code>\</code> then <code>_</code> them <code>m</code> then space then <code>\</code> then <code>_</code> then <code>g</code>then space  <br>
I got: <code>m</code> followed by a box followed by a space followed by dash followed by <code>g</code></p>

<a name="124785399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785399">Kenny Lau (Apr 08 2018 at 03:56)</a>:</h4>
<p>maybe <code>m</code> doesn't work then</p>

<a name="124785400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785400" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785400">Kenny Lau (Apr 08 2018 at 03:56)</a>:</h4>
<p><code>\_r \_g</code></p>

<a name="124785401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785401" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785401">Kenny Lau (Apr 08 2018 at 03:56)</a>:</h4>
<p>not every letter has subscript</p>

<a name="124785408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785408" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785408">Kenny Lau (Apr 08 2018 at 03:57)</a>:</h4>
<p>the point being, make each letter separately</p>

<a name="124785448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785448" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785448">Nima (Apr 08 2018 at 03:58)</a>:</h4>
<p>Thank, <code>r</code> worked</p>

<a name="124785544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785544" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785544">Nima (Apr 08 2018 at 04:02)</a>:</h4>
<p>Would you let me know why the following won't type check</p>
<div class="codehilite"><pre><span></span>universe u
class number(α : Type u) [linear_order α] :=
(neg₀ : α     → option α)
prefix `-₀`:40 := number.neg₀
example (α : Type u) [linear_order α] : ∀ (n:number α), (-₀ n) = (neg₀ n) := sorry
</pre></div>

<a name="124785546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785546" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785546">Kenny Lau (Apr 08 2018 at 04:02)</a>:</h4>
<p><code>number.neg_0 n</code></p>

<a name="124785547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785547" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785547">Kenny Lau (Apr 08 2018 at 04:02)</a>:</h4>
<p>or <code>n.neg_0</code></p>

<a name="124785599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785599" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785599">Nima (Apr 08 2018 at 04:05)</a>:</h4>
<p>oops!<br>
When I defined everything in terms of a class, then type of my operators don't make any sense</p>

<a name="124785603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785603">Kenny Lau (Apr 08 2018 at 04:05)</a>:</h4>
<p>how so?</p>

<a name="124785644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785644" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785644">Nima (Apr 08 2018 at 04:06)</a>:</h4>
<p>Ok, here is two errors I still receive</p>
<div class="codehilite"><pre><span></span>failed to synthesize type class instance for
α : Type u,
_inst_1 : linear_order α,
n : number α
⊢ linear_order (number α)
</pre></div>


<div class="codehilite"><pre><span></span>invalid field notation, function &#39;number.neg₀&#39; does not have explicit argument with type (number ...)
</pre></div>

<a name="124785645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785645" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785645">Kenny Lau (Apr 08 2018 at 04:06)</a>:</h4>
<p>right\</p>

<a name="124785646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785646" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785646">Kenny Lau (Apr 08 2018 at 04:06)</a>:</h4>
<p>aha</p>

<a name="124785647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785647" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785647">Kenny Lau (Apr 08 2018 at 04:06)</a>:</h4>
<p>you should have <code>[number \alpha]</code></p>

<a name="124785654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785654" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785654">Kenny Lau (Apr 08 2018 at 04:07)</a>:</h4>
<p>and then <code>\forall n:\alpha, -\_o n = number.neg\_o n</code></p>

<a name="124785696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785696">Kenny Lau (Apr 08 2018 at 04:08)</a>:</h4>
<p>but I would use <code>extends</code>:</p>
<div class="codehilite"><pre><span></span>universe u

class number (α : Type u) extends linear_order α :=
(neg₀ : α → option α)

prefix `-₀`:40 := number.neg₀

example (α : Type u) [number α] : ∀ (n:α), (-₀ n) = (number.neg₀ n) := λ _, rfl
</pre></div>

<a name="124785697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785697" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785697">Simon Hudon (Apr 08 2018 at 04:08)</a>:</h4>
<p>When going from an OO-ish language (like C++) to a functional language (like Lean and Haskell), one pitfall is that <code>class</code> don't mean the same thing anymore. In C++, a class defines a type while in Lean, a class is a sort of packet of information that can be inferred about your types</p>

<a name="124785789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785789" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785789">Nima (Apr 08 2018 at 04:12)</a>:</h4>
<p>Thanks, without <code>[linear_order α]</code> --&gt; <code>extends linear_order α</code> it would not type checked</p>

<a name="124785790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785790" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785790">Kenny Lau (Apr 08 2018 at 04:12)</a>:</h4>
<p>there's a way to do it without <code>extends</code>:</p>
<div class="codehilite"><pre><span></span>universe u

class number (α : Type u) [linear_order α] :=
(neg₀ : α → option α)

prefix `-₀`:40 := number.neg₀

example (α : Type u) [linear_order α] [number α] : ∀ (n:α), (-₀ n) = (number.neg₀ n) := λ _, rfl
</pre></div>

<a name="124785792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785792" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785792">Kenny Lau (Apr 08 2018 at 04:12)</a>:</h4>
<p>but I prefer the version with <code>extends</code></p>

<a name="124785807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785807" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785807">Nima (Apr 08 2018 at 04:13)</a>:</h4>
<p>Also, can I do something so instead of <code> _inst_1 : number α </code> I will get something like <code>hn : number α</code>?</p>

<a name="124785847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785847">Kenny Lau (Apr 08 2018 at 04:14)</a>:</h4>
<p>if you want to do that, you can, but you should also make it a structure</p>

<a name="124785851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785851">Kenny Lau (Apr 08 2018 at 04:15)</a>:</h4>
<div class="codehilite"><pre><span></span>universe u

class number (α : Type u) [linear_order α] :=
(neg₀ : α → option α)

prefix `-₀`:40 := number.neg₀

example (α : Type u) [linear_order α] [hn : number α] : ∀ (n:α), (-₀ n) = (number.neg₀ n) := λ _, rfl
</pre></div>

<a name="124785895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124785895" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124785895">Nima (Apr 08 2018 at 04:16)</a>:</h4>
<p>Awesome, thank you</p>

<a name="124786746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124786746" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124786746">Nima (Apr 08 2018 at 04:52)</a>:</h4>
<p>Sorry if it is too obvious, but how do you finish this example:</p>
<div class="codehilite"><pre><span></span>universe u
class  number(α : Type u) extends linear_order α := unit
example (α : Type u) [nn:number α] (a:α) (b:α) : (a&lt;b) → (a≤ b) := sorry
</pre></div>

<a name="124786752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124786752" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124786752">Mario Carneiro (Apr 08 2018 at 04:53)</a>:</h4>
<p><code>le_of_lt</code></p>

<a name="124786753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124786753" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124786753">Kenny Lau (Apr 08 2018 at 04:53)</a>:</h4>
<p><code>and.left</code> :-)</p>

<a name="124786755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124786755" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124786755">Mario Carneiro (Apr 08 2018 at 04:53)</a>:</h4>
<p>eww</p>

<a name="124786756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124786756" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124786756">Mario Carneiro (Apr 08 2018 at 04:54)</a>:</h4>
<p>actually that won't work now that I come to think of it</p>

<a name="124786805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124786805" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124786805">Nima (Apr 08 2018 at 04:55)</a>:</h4>
<p>Thanks, but I was thinking of how I can directly use <code>preorder.lt</code>?<br>
When I say <code>have hh:=nn.lt</code> all I get is <code> hh : α → α → Prop </code>. But <code>preorder.lt</code> is defined to be <code> (lt := λ a b, a ≤ b ∧ ¬ b ≤ a) </code></p>

<a name="124786844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124786844" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124786844">Kenny Lau (Apr 08 2018 at 04:56)</a>:</h4>
<p>use <code>let</code> instead of <code>have</code></p>

<a name="124786845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124786845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124786845">Kenny Lau (Apr 08 2018 at 04:56)</a>:</h4>
<p><code>have</code> forgets definitions</p>

<a name="124786846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124786846" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124786846">Mario Carneiro (Apr 08 2018 at 04:56)</a>:</h4>
<p>This was also kenny's mistake - <code>preorder.lt</code> is not defined as that</p>

<a name="124786847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124786847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124786847">Mario Carneiro (Apr 08 2018 at 04:56)</a>:</h4>
<p>that's only the default value</p>

<a name="124786850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124786850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124786850">Mario Carneiro (Apr 08 2018 at 04:56)</a>:</h4>
<p>there is a second field that says that <code>preorder.lt</code> is equivalent to that, from which <code>le_of_lt</code> is proven</p>

<a name="124786896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124786896" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124786896">Mario Carneiro (Apr 08 2018 at 04:58)</a>:</h4>
<p>Perhaps you are oversimplifying your problem, but <code>le_of_lt</code> is certainly the way to solve the original question</p>

<a name="124786999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124786999" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124786999">Nima (Apr 08 2018 at 05:03)</a>:</h4>
<p>sure, I am trying to see how I can directly use all those properties defined for a class.<br>
I used <code>let hh := nn.lt</code> and got <code> hh : α → α → Prop := linear_order.lt </code>.<br>
Why does it say <code>linear_order</code> and not <code>preorder</code>?</p>
<div class="codehilite"><pre><span></span>class preorder (α : Type u) extends has_le α, has_lt α :=
(le_refl : ∀ a : α, a ≤ a)
(le_trans : ∀ a b c : α, a ≤ b → b ≤ c → a ≤ c)
(lt := λ a b, a ≤ b ∧ ¬ b ≤ a)
(lt_iff_le_not_le : ∀ a b : α, a &lt; b ↔ (a ≤ b ∧ ¬ b ≤ a) . order_laws_tac)

class partial_order (α : Type u) extends preorder α :=
(le_antisymm : ∀ a b : α, a ≤ b → b ≤ a → a = b)

class linear_order (α : Type u) extends partial_order α :=
(le_total : ∀ a b : α, a ≤ b ∨ b ≤ a)
</pre></div>

<a name="124787296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124787296" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124787296">Mario Carneiro (Apr 08 2018 at 05:15)</a>:</h4>
<p><code>linear_order.lt</code> extracts the <code>lt</code> field of a <code>linear_order</code>. It is defined in terms of <code>preorder.lt</code>, just composing with the parent structure conversions</p>

<a name="124787337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124787337" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124787337">Nima (Apr 08 2018 at 05:16)</a>:</h4>
<p>When <code>lt_iff_le_not_le</code> is defined for <code>preorder</code>, why do we need a lemma with same name for <code>preorder</code>?</p>

<a name="124787343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124787343" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124787343">Mario Carneiro (Apr 08 2018 at 05:17)</a>:</h4>
<p>If you know <code> number α</code>, then you can write <code>number.lt a b</code> where <code>a b : α</code> (you don't need to refer to <code>nn</code>) and it will refer to the <code>lt</code> field inherited from <code>preorder</code></p>

<a name="124787383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124787383" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124787383">Mario Carneiro (Apr 08 2018 at 05:18)</a>:</h4>
<p>The lemmas of a structure are often restated as separate theorems in order to get the notations and implicitness of arguments right</p>

<a name="124787393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124787393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124787393">Mario Carneiro (Apr 08 2018 at 05:19)</a>:</h4>
<p>so for instance you can write <code>a &lt; b</code> where <code>a b : α</code> and it will find the <code>number</code> instance and work it back to the <code>preorder</code> that supplies the implementation of <code>&lt;</code></p>

<a name="124787434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124787434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124787434">Mario Carneiro (Apr 08 2018 at 05:20)</a>:</h4>
<p>but this is not the same term as <code>number.lt a b</code> (it is definitionally equal), which can affect rewrites and things</p>

<a name="124787435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124787435" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124787435">Nima (Apr 08 2018 at 05:20)</a>:</h4>
<p><code>let hh := number.lt a b</code> gives me error: <code> unknown identifier 'number.lt' </code></p>

<a name="124787444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124787444" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124787444">Mario Carneiro (Apr 08 2018 at 05:21)</a>:</h4>
<p>The new structure command doesn't create <code>number.lt</code> type fields, it just has parent structure fields</p>

<a name="124787446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124787446" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124787446">Mario Carneiro (Apr 08 2018 at 05:21)</a>:</h4>
<p>the preferred way to refer to it is <code>a &lt; b</code> of course</p>

<a name="124787486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124787486" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124787486">Mario Carneiro (Apr 08 2018 at 05:22)</a>:</h4>
<p>but should be able to write <code>preorder.lt a b</code> or <code>linear_order.lt a b</code>.. they are all the same, definitionally</p>

<a name="124787575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124787575" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124787575">Nima (Apr 08 2018 at 05:26)</a>:</h4>
<p>I have no problem with <code>a&lt;b</code>. My problem is that I still don't know how to finish this example (how do I expand definition <code>nn.lt</code> or  <code>preorder.lt a b</code>,  I failed to do it using <code>rw</code>)? I don't care about the full proof, just how do I bring definition or the lemma itself into my hypotheses?</p>
<div class="codehilite"><pre><span></span>universe u
class number(α : Type u) extends linear_order α := unit
example (α : Type u) [nn:number α] (a:α) (b:α) : (a&lt;b) → (a≤ b) :=
begin
  intro less,
  let hh := nn.lt,
  admit
end
</pre></div>

<a name="124787720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124787720" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124787720">Mario Carneiro (Apr 08 2018 at 05:32)</a>:</h4>
<p>The relevant lemma is <code>lt_iff_le_not_le</code>, which you can refer to directly by <code>preorder.lt_iff_le_not_le</code> or through the restated version (which uses notation for le and lt). So the proof would be something like <code>(preorder.lt_iff_le_not_le _ _).1 less</code></p>

<a name="124787762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124787762" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124787762">Mario Carneiro (Apr 08 2018 at 05:34)</a>:</h4>
<p>Again, <code>nn.lt</code> <em>is not a definition</em>, despite the <code>:=</code>. It is a default value for a field, which is allowed to be anything. The reason we know it is in fact equivalent to that default value is because of <code>lt_iff_le_not_le</code>.</p>

<a name="124788049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124788049" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124788049">Nima (Apr 08 2018 at 05:46)</a>:</h4>
<blockquote>
<p>Again, <code>nn.lt</code> <em>is not a definition</em>, despite t...</p>
</blockquote>
<p>Very helpful, thank you.<br>
How can I  expand/replace <code> ≤ </code> to/with <code> preorder.le </code>?</p>

<a name="124788056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124788056" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124788056">Kenny Lau (Apr 08 2018 at 05:47)</a>:</h4>
<p><code>dsimp [( ≤ )]</code></p>

<a name="124788059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124788059" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124788059">Nima (Apr 08 2018 at 05:47)</a>:</h4>
<p>Nice</p>

<a name="124802900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124802900" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124802900">Nima (Apr 08 2018 at 16:09)</a>:</h4>
<p>How should I write the <code>match</code> so the whole thing will type-check?</p>
<div class="codehilite"><pre><span></span>universe u
class number(α : Type u) extends linear_order α :=
(min : option α)
(min_prop : match min with
            | none := true -- some predicate
            | sime m := true -- some predicate
            end)
</pre></div>

<a name="124802998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124802998" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124802998">Kevin Buzzard (Apr 08 2018 at 16:12)</a>:</h4>
<p>Some not sime</p>

<a name="124802999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124802999" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124802999">Kenny Lau (Apr 08 2018 at 16:12)</a>:</h4>
<p>still does not typecheck</p>

<a name="124803001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124803001" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124803001">Kevin Buzzard (Apr 08 2018 at 16:12)</a>:</h4>
<p>And brackets round some m</p>

<a name="124803003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124803003" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124803003">Kevin Buzzard (Apr 08 2018 at 16:12)</a>:</h4>
<p>That should do it</p>

<a name="124803004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124803004" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124803004">Kenny Lau (Apr 08 2018 at 16:12)</a>:</h4>
<p>nope</p>

<a name="124803007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124803007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124803007">Kenny Lau (Apr 08 2018 at 16:13)</a>:</h4>
<p>I don't think you can do funny things inside that particular position</p>

<a name="124803012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124803012" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124803012">Kevin Buzzard (Apr 08 2018 at 16:13)</a>:</h4>
<p>Then we need the big guns to save us</p>

<a name="124803051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124803051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124803051">Nima (Apr 08 2018 at 16:14)</a>:</h4>
<div class="codehilite"><pre><span></span>universe u
class number(α : Type u) extends linear_order α :=
(min : option α)
(min_prop : match min with
            | none := true -- some predicate
            | (some m) := true -- some predicate
            end)
</pre></div>


<p>gives me <code> invalid match/convoy expression, expected type is not known </code></p>

<a name="124803052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124803052" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124803052">Kevin Buzzard (Apr 08 2018 at 16:14)</a>:</h4>
<p>min might also mean something else</p>

<a name="124803053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124803053" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124803053">Kenny Lau (Apr 08 2018 at 16:14)</a>:</h4>
<div class="codehilite"><pre><span></span>universe u
class number(α : Type u) extends linear_order α :=
(min : option α)
(min_prop : @option.rec_on α (λ x, Prop) min true (λ x, true))
</pre></div>

<a name="124803054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124803054" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124803054">Kenny Lau (Apr 08 2018 at 16:14)</a>:</h4>
<p>this worked</p>

<a name="124803055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124803055" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124803055">Kevin Buzzard (Apr 08 2018 at 16:14)</a>:</h4>
<p>He is just rewriting the match into what lean expands it to</p>

<a name="124803063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124803063" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124803063">Kevin Buzzard (Apr 08 2018 at 16:15)</a>:</h4>
<p>Given the error</p>

<a name="124803065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124803065" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124803065">Nima (Apr 08 2018 at 16:16)</a>:</h4>
<p>To me <code>match</code> or <code>cases</code> are a lot more readable that <code>rec_on</code>.<br>
Is there any way to fix this and use <code>match</code>?</p>

<a name="124803106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124803106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124803106">Kevin Buzzard (Apr 08 2018 at 16:16)</a>:</h4>
<p>Is the issue that lean needs to be told the type earlier on?</p>

<a name="124803107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124803107" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124803107">Kenny Lau (Apr 08 2018 at 16:16)</a>:</h4>
<p>I think so</p>

<a name="124804468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124804468" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124804468">Nima (Apr 08 2018 at 17:12)</a>:</h4>
<p>Any way I can fix the error message <code> failed to register private name '_match_2', prefix has not been registered </code> for this:</p>
<div class="codehilite"><pre><span></span>universe u
class number(α : Type u) extends linear_order α :=
(min : option α)
(max_prop : Prop := match min with
                    | none := true
                    | (some _) := true
                    end))
</pre></div>

<a name="124804999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124804999" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124804999">Simon Hudon (Apr 08 2018 at 17:35)</a>:</h4>
<p>Interesting. I'm not sure you can use <code>match</code> this way because it requires the creation of auxiliary definitions. You can try <code>option.cases_on min true (λ _, true)</code> instead or create a definition yourself that you refer to in that expression.</p>

<a name="124805183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124805183" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124805183">Nima (Apr 08 2018 at 17:43)</a>:</h4>
<p>I know <code>option.cases_on min true (λ _, true)</code> works, but to me <code>match</code> and <code>cases</code> are a lot more readable.<br>
I am just trying to define some property to my <code>class</code> and it seems impossible without using <code>cases_on</code> or <code>rec_on</code></p>

<a name="124805272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124805272" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124805272">Simon Hudon (Apr 08 2018 at 17:47)</a>:</h4>
<p>You can also do:</p>
<div class="codehilite"><pre><span></span>def max_prop_def (α : Type*) : option α -&gt; Prop
  | none := true
  | (some _) := true
</pre></div>


<p>And use <code>max_prop_def min</code> as your default value.</p>

<a name="124805367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124805367" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124805367">Nima (Apr 08 2018 at 17:50)</a>:</h4>
<p>Fantastic, thanks a lot!<br>
<code>Type*</code> means Type at some universe?</p>

<a name="124805679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124805679" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124805679">Simon Hudon (Apr 08 2018 at 18:02)</a>:</h4>
<p>Exactly! And Lean infers that universe for you</p>

<a name="124805978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124805978" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124805978">Kevin Buzzard (Apr 08 2018 at 18:15)</a>:</h4>
<p>you can also write <code>universe u</code> at the top and then <code>(alpha : Type u)</code>. It's like variables -- you are implicitly quantifying over universes.</p>

<a name="124806249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124806249" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124806249">Mario Carneiro (Apr 08 2018 at 18:25)</a>:</h4>
<p>I strongly recommend Simon's solution over inlining the match (even assuming you can get it to work). It might look nice up front, but as soon as you start using these properties in proofs, you will have to reference those internals</p>

<a name="124806595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124806595" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124806595">Nima (Apr 08 2018 at 18:38)</a>:</h4>
<p>Would you please tell me how I should change this, so it will type check?</p>
<div class="codehilite"><pre><span></span>inductive constraint (α:Type*)
| trv                                        : constraint
| stt (bnd:α) (low:Prop) (d : decidable low) : constraint

namespace constraint
def setof {α : Type*} [linear_order α] : constraint α → α → Prop
| (trv α)         a := true
| (stt bnd low d) a := if low then bnd&lt;a else a&lt;bnd -- ERROR: failed to synthesize type class instance for
</pre></div>

<a name="124806903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124806903" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124806903">Simon Hudon (Apr 08 2018 at 18:51)</a>:</h4>
<p>I'm not sure what <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> will think of it but I propose:</p>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">bound</span> <span class="o">(</span><span class="n">α</span><span class="o">:</span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">upper</span>  <span class="o">(</span><span class="n">bnd</span><span class="o">:</span><span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">bound</span>
<span class="bp">|</span> <span class="n">lower</span>  <span class="o">(</span><span class="n">bnd</span><span class="o">:</span><span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">bound</span>

<span class="n">def</span> <span class="kn">check</span> <span class="o">{</span><span class="n">α</span><span class="o">:</span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_linear_order</span>  <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">bound</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">bool</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">bound</span><span class="bp">.</span><span class="n">lower</span> <span class="n">x</span><span class="o">)</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">y</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">bound</span><span class="bp">.</span><span class="n">upper</span> <span class="n">x</span><span class="o">)</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="n">y</span>

<span class="kn">inductive</span> <span class="n">constraint</span> <span class="o">(</span><span class="n">α</span><span class="o">:</span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">trv</span>                     <span class="o">:</span> <span class="n">constraint</span>
<span class="bp">|</span> <span class="n">stt</span> <span class="o">(</span><span class="n">bnd</span><span class="o">:</span><span class="n">bound</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">constraint</span>

<span class="kn">namespace</span> <span class="n">constraint</span>
<span class="n">def</span> <span class="n">setof</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_linear_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">constraint</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">bool</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">trv</span> <span class="n">α</span><span class="o">)</span>         <span class="n">a</span> <span class="o">:=</span> <span class="n">true</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">stt</span> <span class="n">bnd</span><span class="o">)</span> <span class="n">a</span> <span class="o">:=</span> <span class="kn">check</span> <span class="n">bnd</span> <span class="n">a</span>
</pre></div>

<a name="124807220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124807220" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124807220">Nima (Apr 08 2018 at 19:02)</a>:</h4>
<p>Thanks for showing <code>lean</code> :)<br>
I have to think about/learn/understand your solution.<br>
In a meantime, is there a way to merge similar cases?<br>
Consider the following example</p>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">constraint</span> <span class="o">(</span><span class="n">α</span><span class="o">:</span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">trv</span>        <span class="o">:</span> <span class="n">constraint</span>
<span class="bp">|</span> <span class="n">lt</span> <span class="o">(</span><span class="n">bnd</span><span class="o">:</span><span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">constraint</span>
<span class="bp">|</span> <span class="n">le</span> <span class="o">(</span><span class="n">bnd</span><span class="o">:</span><span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">constraint</span>
<span class="bp">|</span> <span class="n">gt</span> <span class="o">(</span><span class="n">bnd</span><span class="o">:</span><span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">constraint</span>
<span class="bp">|</span> <span class="n">ge</span> <span class="o">(</span><span class="n">bnd</span><span class="o">:</span><span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">constraint</span>

<span class="kn">open</span> <span class="n">constraint</span>
<span class="n">def</span> <span class="n">prop</span> <span class="o">(</span><span class="n">α</span><span class="o">:</span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:</span> <span class="n">constraint</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">trv</span> <span class="n">α</span><span class="o">):=</span> <span class="n">true</span> <span class="c1">-- short term</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">lt</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">true</span> <span class="c1">-- very long term 1</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">le</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">true</span> <span class="c1">-- very long term 1</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">gt</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">true</span> <span class="c1">-- very long term 2</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">ge</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">true</span> <span class="c1">-- very long term 2</span>
</pre></div>


<p>Is there any way I use pattern matching and merge those cases where the right hand side is going to be the same?<br>
I know it is a long shot, but even better: may be cases for <code>lt</code> and <code>le</code> have a lot in common, <code>very_long ∧p1</code> and <code>very_long∧p2</code>.  Is there a way to effectively write something like </p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">prop</span> <span class="o">(</span><span class="n">α</span><span class="o">:</span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:</span> <span class="n">constraint</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">trv</span> <span class="n">α</span><span class="o">):=</span> <span class="n">true</span> <span class="c1">-- short term</span>
<span class="bp">|</span> <span class="n">x</span><span class="o">:(</span><span class="n">lt</span> <span class="bp">_</span><span class="o">)</span> <span class="n">or</span> <span class="n">x</span><span class="o">:(</span><span class="n">le</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">very_long</span> <span class="bp">∧</span> <span class="k">match</span> <span class="n">x</span> <span class="k">with</span> <span class="bp">|</span><span class="o">(</span><span class="n">lt</span> <span class="bp">_</span><span class="o">):=</span> <span class="n">p1</span> <span class="bp">|</span> <span class="o">(</span><span class="n">le</span> <span class="bp">_</span><span class="o">):=</span><span class="n">p2</span> <span class="kn">end</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">gt</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">true</span> <span class="c1">-- very long term 2</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">ge</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">true</span> <span class="c1">-- very long term 2</span>
</pre></div>

<a name="124807668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124807668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124807668">Simon Hudon (Apr 08 2018 at 19:21)</a>:</h4>
<blockquote>
<p>Thanks for showing <code>lean</code></p>
</blockquote>
<p>My pleasure! I love sharing my excitement for Lean.</p>
<p>I would go back to the separation of <code>constraint</code> and <code>bound</code> and define <code>prop</code> as:</p>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">strictness</span>
<span class="bp">|</span> <span class="n">strict</span> <span class="bp">|</span> <span class="n">non_strict</span>

<span class="kn">inductive</span> <span class="n">bound</span> <span class="o">(</span><span class="n">α</span><span class="o">:</span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">upper</span>  <span class="o">(</span><span class="n">bnd</span><span class="o">:</span><span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">strictness</span> <span class="bp">→</span> <span class="n">bound</span>
<span class="bp">|</span> <span class="n">lower</span>  <span class="o">(</span><span class="n">bnd</span><span class="o">:</span><span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">strictness</span> <span class="bp">→</span> <span class="n">bound</span>

<span class="kn">open</span> <span class="n">bound</span> <span class="n">strictness</span>
<span class="c1">-- ...</span>

<span class="n">def</span> <span class="n">prop</span> <span class="o">(</span><span class="n">α</span><span class="o">:</span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:</span> <span class="n">constraint</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">trv</span> <span class="n">α</span><span class="o">):=</span> <span class="n">true</span> <span class="c1">-- short term</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">stt</span> <span class="o">(</span><span class="n">lower</span> <span class="n">b</span> <span class="n">str</span><span class="o">))</span> <span class="o">:=</span> <span class="n">very_long</span> <span class="bp">∧</span> <span class="k">match</span> <span class="n">str</span> <span class="k">with</span> <span class="bp">|</span> <span class="n">strict</span><span class="o">:=</span> <span class="n">p1</span> <span class="bp">|</span> <span class="n">non_strict</span> <span class="o">:=</span><span class="n">p2</span> <span class="kn">end</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">stt</span> <span class="o">(</span><span class="n">upper</span> <span class="n">b</span> <span class="n">str</span><span class="o">))</span> <span class="o">:=</span> <span class="c1">-- very long term 2</span>
</pre></div>

<a name="124807713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124807713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124807713">Simon Hudon (Apr 08 2018 at 19:23)</a>:</h4>
<p>So the short answer is that you can't combine pattern matching and propositional notation. You can, however, try to get a bit closer and define functions like <code>is_strict</code> or <code>is_le</code> and use them in <code>if _ then _ else _</code>.</p>

<a name="124807940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124807940" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124807940">Nima (Apr 08 2018 at 19:32)</a>:</h4>
<p>Thanks a lot,<br>
About <code>[decidable_linear_order ℕ]</code><br>
At the intuitive level, does this mean if you give me two natural numbers, I can tell you which one is larger?<br>
I think the answer yes, but it should be no.<br>
For example, if you give me two natural number in <strong>binary format</strong> then comparing them is decidable. But who said you are going to always give them in binary format?<br>
So if I use <code>[decidable_linear_order ℕ]</code> in a definition, and use <code>classical</code> to find two numbers inside that definition, does that mean comparing them is decidable? (I think the answer should be no, but I don't know why)</p>

<a name="124808142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124808142" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124808142">Simon Hudon (Apr 08 2018 at 19:40)</a>:</h4>
<blockquote>
<p>At the intuitive level, does this mean if you give me two natural numbers, I can tell you which one is larger?</p>
</blockquote>
<p>Yes that's correct. </p>

<a name="124808241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124808241" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124808241">Simon Hudon (Apr 08 2018 at 19:44)</a>:</h4>
<blockquote>
<p>I think the answer yes, but it should be no.</p>
</blockquote>
<p>In Lean, no set of numbers are postulated (i.e. we say "let there be natural numbers" and they appear). Instead, each set of numbers is constructed as an inductive type. In particular, natural numbers are defined as follows:</p>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">nat</span>
<span class="bp">|</span> <span class="n">zero</span> <span class="o">:</span> <span class="n">nat</span>
<span class="bp">|</span> <span class="n">succ</span> <span class="o">:</span> <span class="n">nat</span> <span class="bp">-&gt;</span> <span class="n">nat</span>
</pre></div>


<p>You may recognize the structure of Peano's axiomatization of natural numbers. The big difference is that the above is a valid definition. Whenever you are given two natural numbers, they are given to you in unary notation (e.g. 11111 for 5, 111 for 3 and so on). This makes comparison decidable</p>

<a name="124808252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124808252" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124808252">Simon Hudon (Apr 08 2018 at 19:45)</a>:</h4>
<p>For the sake of performances however, the virtual machine and some tactics use binary representations (in the case of the vm, it's implemented by gmp, I believe)</p>

<a name="124808255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124808255" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124808255">Simon Hudon (Apr 08 2018 at 19:45)</a>:</h4>
<p>Is this what you were getting at?</p>

<a name="124808675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124808675" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124808675">Nima (Apr 08 2018 at 19:59)</a>:</h4>
<p>That makes sense, thanks.</p>

<a name="124812752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124812752" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124812752">Nima (Apr 08 2018 at 22:43)</a>:</h4>
<p>How can I finish the last definition?</p>
<div class="codehilite"><pre><span></span><span class="kn">open</span> <span class="n">nat</span>

<span class="kn">inductive</span> <span class="n">ind</span>
<span class="bp">|</span> <span class="n">emt</span> <span class="o">:</span> <span class="n">ind</span>
<span class="bp">|</span> <span class="n">val</span> <span class="o">(</span><span class="n">a</span><span class="o">:</span><span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span><span class="n">ind</span>
<span class="kn">open</span> <span class="n">ind</span>

<span class="n">def</span> <span class="n">is_nonempty</span> <span class="o">:</span> <span class="n">ind</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">emt</span>     <span class="o">:=</span> <span class="n">false</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">val</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">true</span>

<span class="n">def</span> <span class="n">valof</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">ind</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">is_nonempty</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="k">match</span> <span class="n">i</span> <span class="k">with</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">val</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="n">n</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="o">:=</span> <span class="k">begin</span> <span class="n">admit</span> <span class="kn">end</span>
<span class="kn">end</span>
</pre></div>


<p>Status is </p>
<div class="codehilite"><pre><span></span>i : ind,
h : is_nonempty i,
_match : ind → ℕ,
_x : ind
⊢ ℕ
</pre></div>


<p>It seems <code>lean</code> forgot about the first case!</p>

<a name="124813315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124813315" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124813315">Nima (Apr 08 2018 at 23:05)</a>:</h4>
<p>I don't understand what the difference is, but it could be done using the following definition:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">valof</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">ind</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">is_nonempty</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="n">i</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">is_nonempty</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">contradiction</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">a</span>
<span class="kn">end</span>
</pre></div>

<a name="124813425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124813425" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124813425">Kevin Buzzard (Apr 08 2018 at 23:08)</a>:</h4>
<p>Here's how to avoid the <code>a</code>:</p>

<a name="124813433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124813433" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124813433">Kevin Buzzard (Apr 08 2018 at 23:09)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">valof</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">ind</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">is_nonempty</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="n">i</span> <span class="k">with</span> <span class="n">n</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">false</span><span class="bp">.</span><span class="n">elim</span> <span class="n">h</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">n</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>

<a name="124813486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124813486" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124813486">Kevin Buzzard (Apr 08 2018 at 23:10)</a>:</h4>
<p>After <code>cases</code> you have two goals, and it's encouraged to wrap them in curly brackets so you can deal with them one at a time (it helps with debugging later on when Leo changes everything and stuff stops working)</p>

<a name="124813493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124813493" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124813493">Nima (Apr 08 2018 at 23:11)</a>:</h4>
<p>what is wrong with <code>a</code>? <br>
Is it because <code>a</code> is used internally?</p>

<a name="124813835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124813835" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124813835">Kevin Buzzard (Apr 08 2018 at 23:23)</a>:</h4>
<p>the fact that Lean randomly calls variables a is considered a bug ;-)</p>

<a name="124813836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124813836" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124813836">Kevin Buzzard (Apr 08 2018 at 23:23)</a>:</h4>
<p>Not least because you might already have another variable called a!</p>

<a name="124813884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124813884" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124813884">Kevin Buzzard (Apr 08 2018 at 23:25)</a>:</h4>
<p><a href="https://github.com/leanprover/lean/issues/1822" target="_blank" title="https://github.com/leanprover/lean/issues/1822">https://github.com/leanprover/lean/issues/1822</a></p>

<a name="124813925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124813925" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124813925">Kevin Buzzard (Apr 08 2018 at 23:26)</a>:</h4>
<p>In Lean 4 your code will stop working but mine should be OK. In fact your code does not work for me -- which version of Lean are you using?</p>

<a name="124813927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124813927" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124813927">Kevin Buzzard (Apr 08 2018 at 23:26)</a>:</h4>
<p>I am on the nightly from 6th April.</p>

<a name="124813932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124813932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124813932">Kevin Buzzard (Apr 08 2018 at 23:27)</a>:</h4>
<p>All my code does, of course, is explicitly names the variable when we do the case split.</p>

<a name="124813984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124813984" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124813984">Nima (Apr 08 2018 at 23:29)</a>:</h4>
<p>Lean (version 3.3.0, commit fa9c868ed2bb, Release)</p>

<a name="124814034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124814034" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124814034">Kevin Buzzard (Apr 08 2018 at 23:31)</a>:</h4>
<p>v3.4 is coming soon. A lot has happened since 3.3.</p>

<a name="124814079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124814079" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124814079">Kevin Buzzard (Apr 08 2018 at 23:32)</a>:</h4>
<p>Oh, this works for me:</p>

<a name="124814083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124814083" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124814083">Kevin Buzzard (Apr 08 2018 at 23:32)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span>  <span class="n">valof&#39;</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">ind</span><span class="o">),</span> <span class="n">is_nonempty</span> <span class="n">i</span> <span class="bp">→</span> <span class="bp">ℕ</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">val</span> <span class="n">n</span><span class="o">)</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">n</span>
<span class="bp">|</span> <span class="n">emt</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">false</span><span class="bp">.</span><span class="n">elim</span> <span class="n">h</span>
</pre></div>

<a name="124814089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124814089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124814089">Kevin Buzzard (Apr 08 2018 at 23:33)</a>:</h4>
<p>The equation compiler is apparently more clever than match</p>

<a name="124814129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124814129" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124814129">Kevin Buzzard (Apr 08 2018 at 23:34)</a>:</h4>
<p>that can't be right because they are the same thing. The difference is that I am getting h involved in the matching process here.</p>

<a name="124814192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124814192" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124814192">Kevin Buzzard (Apr 08 2018 at 23:36)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span>  <span class="n">valof</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">ind</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">is_nonempty</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span>  <span class="k">match</span> <span class="n">i</span><span class="o">,</span><span class="n">h</span> <span class="k">with</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">val</span> <span class="n">n</span><span class="o">),</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">n</span>
<span class="bp">|</span> <span class="n">emt</span><span class="o">,</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">false</span><span class="bp">.</span><span class="n">elim</span> <span class="n">h</span>
<span class="kn">end</span>
</pre></div>

<a name="124814194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124814194" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124814194">Kevin Buzzard (Apr 08 2018 at 23:36)</a>:</h4>
<p>You need to tell the equation compiler about h explicitly, so it seems.</p>

<a name="124814735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124814735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124814735">Nima (Apr 08 2018 at 23:57)</a>:</h4>
<p>Thanks, your solution worked for me,<br>
But I did not understand why I should use <code>h</code> in the match (I know it won't type-check without it, but I don't know why)</p>

<a name="124815048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124815048" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124815048">Nima (Apr 09 2018 at 00:09)</a>:</h4>
<p>How can I mark result Prop decidable?</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">func</span><span class="o">(</span><span class="n">p</span><span class="o">:</span><span class="kt">Prop</span><span class="o">)[</span><span class="n">decidable</span> <span class="n">p</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">p</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">p</span><span class="o">:</span><span class="kt">Prop</span><span class="o">)[</span><span class="n">decidable</span> <span class="n">p</span><span class="o">]</span> <span class="o">:</span> <span class="k">if</span> <span class="o">(</span><span class="n">func</span> <span class="n">p</span><span class="o">)</span> <span class="k">then</span> <span class="n">true</span> <span class="k">else</span> <span class="n">false</span> <span class="o">:=</span> <span class="n">sorry</span> <span class="c1">-- won&#39;t type check</span>
</pre></div>

<a name="124815254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124815254" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124815254">Kevin Buzzard (Apr 09 2018 at 00:17)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">func</span> <span class="o">(</span><span class="n">p</span><span class="o">:</span><span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">p</span>

<span class="kn">instance</span> <span class="n">func_of_decidable_is_decidable</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">[</span><span class="n">H</span> <span class="o">:</span> <span class="n">decidable</span> <span class="n">p</span><span class="o">]</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">func</span> <span class="n">p</span><span class="o">)</span> <span class="o">:=</span> <span class="n">H</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">p</span><span class="o">:</span><span class="kt">Prop</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable</span> <span class="n">p</span><span class="o">]</span> <span class="o">:</span> <span class="k">if</span> <span class="o">(</span><span class="n">func</span> <span class="n">p</span><span class="o">)</span> <span class="k">then</span> <span class="n">true</span> <span class="k">else</span> <span class="n">false</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="124815294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124815294" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124815294">Kevin Buzzard (Apr 09 2018 at 00:18)</a>:</h4>
<p>I explain to the type class inference system that it should spot that if p is decidable then func p is too.</p>

<a name="124815298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124815298" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124815298">Nima (Apr 09 2018 at 00:18)</a>:</h4>
<p>Great, thanks</p>

<a name="124815365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124815365" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124815365">Kevin Buzzard (Apr 09 2018 at 00:21)</a>:</h4>
<p>As for the equation compiler question (why it's not smart enough to make deductions about h) -- I'm afraid that's beyond my pay grade. You can see in your begin/end attempt that by the time we've got to the right of the colon-equals, Lean doesn't even seem to know that i is emt -- even if you explicitly write that it is -- so it can't make any deductions about h.</p>

<a name="124815524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124815524" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124815524">Simon Hudon (Apr 09 2018 at 00:27)</a>:</h4>
<p>I think that when you match on both <code>i</code> and <code>h</code>, it allows Lean to change the type of <code>h</code> (or rather, its patterns) to reflect that you're matching on <code>i</code>. In the first branch, <code>h : is_empty (val n)</code> and in the second, <code>h : is_empty emt</code>. After that, we have definitional equality with <code>false</code> (resp. <code>true</code>) by simply unfolding <code>is_empty</code></p>

<a name="124815579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124815579" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124815579">Simon Hudon (Apr 09 2018 at 00:28)</a>:</h4>
<p>With regards to decidable, when a function returns <code>true</code> or <code>false</code> and then that you need it to be decidable, you can use <code>bool</code> instead and it will be automatically decidable because there is an implicit conversion from <code>bool</code> to <code>Prop</code> and the resulting <code>Prop</code> is decidable.</p>

<a name="124815709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124815709" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124815709">Nima (Apr 09 2018 at 00:33)</a>:</h4>
<p>How do I prove <code>decidable true</code>?<br>
Regarding using <code>bool</code>, it works, but then either I have write <code>p=tt</code> or I will see the left symbol <code>↥p</code> everywhere (not sure how comfortable I am with that, or how much trouble it is going to cause me later).</p>

<a name="124815760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124815760" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124815760">Kevin Buzzard (Apr 09 2018 at 00:35)</a>:</h4>
<p><code>decidable true</code> has type <code>Type</code>so I'm not sure you can prove it.</p>

<a name="124815761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124815761" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124815761">Kevin Buzzard (Apr 09 2018 at 00:35)</a>:</h4>
<p>Here's the definition of decidable -- it's an inductive type.</p>

<a name="124815801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124815801" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124815801">Kevin Buzzard (Apr 09 2018 at 00:36)</a>:</h4>
<div class="codehilite"><pre><span></span>class inductive decidable (p : Prop)
| is_false (h : ¬p) : decidable
| is_true  (h : p) : decidable
</pre></div>

<a name="124815802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124815802" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124815802">Kevin Buzzard (Apr 09 2018 at 00:36)</a>:</h4>
<p>So you have two constructors, <code>is_true</code> and <code>is_false</code></p>

<a name="124815813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124815813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124815813">Kevin Buzzard (Apr 09 2018 at 00:37)</a>:</h4>
<p><code>#check is_true trivial -- decidable true</code></p>

<a name="124815856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124815856" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124815856">Kevin Buzzard (Apr 09 2018 at 00:38)</a>:</h4>
<p><code>true</code> is a Prop and <code>trivial</code> is a proof of <code>true</code></p>

<a name="124815867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124815867" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124815867">Nima (Apr 09 2018 at 00:39)</a>:</h4>
<p>So if output of a function is either <code>true</code> or <code>false</code>, how do I say this output is decidable (without going to <code>bool</code>)? From what you just said, what I am trying to write in <code>lean</code> does not even make sense. Right?</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">func</span><span class="o">(</span><span class="n">p</span><span class="o">:</span><span class="kt">Prop</span><span class="o">)[</span><span class="n">decidable</span> <span class="n">p</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">true</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">p</span><span class="o">:</span><span class="kt">Prop</span><span class="o">)[</span><span class="n">decidable</span> <span class="n">p</span><span class="o">]</span> <span class="o">:</span> <span class="k">if</span> <span class="o">(</span><span class="n">func</span> <span class="n">p</span><span class="o">)</span> <span class="k">then</span> <span class="n">true</span> <span class="k">else</span> <span class="n">false</span> <span class="o">:=</span> <span class="n">sorry</span> <span class="c1">-- won&#39;t type check</span>
</pre></div>

<a name="124815916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124815916" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124815916">Kevin Buzzard (Apr 09 2018 at 00:41)</a>:</h4>
<p>Well you have to prove that the output is either true or false, and then you can make an instance of the decidable class by using is_false if it's false and is_true if it's true</p>

<a name="124815978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124815978" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124815978">Kevin Buzzard (Apr 09 2018 at 00:43)</a>:</h4>
<p>Take a look at how core Lean proves that less than or equal to is decidable on nat</p>

<a name="124815981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124815981" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124815981">Kevin Buzzard (Apr 09 2018 at 00:43)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">decidable_le</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span>
<span class="bp">|</span> <span class="mi">0</span>     <span class="n">b</span>     <span class="o">:=</span> <span class="n">is_true</span> <span class="o">(</span><span class="n">zero_le</span> <span class="n">b</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">a</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="mi">0</span>     <span class="o">:=</span> <span class="n">is_false</span> <span class="o">(</span><span class="n">not_succ_le_zero</span> <span class="n">a</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">a</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
  <span class="k">match</span> <span class="n">decidable_le</span> <span class="n">a</span> <span class="n">b</span> <span class="k">with</span>
  <span class="bp">|</span> <span class="n">is_true</span> <span class="n">h</span>  <span class="o">:=</span> <span class="n">is_true</span> <span class="o">(</span><span class="n">succ_le_succ</span> <span class="n">h</span><span class="o">)</span>
  <span class="bp">|</span> <span class="n">is_false</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">is_false</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="n">h</span> <span class="o">(</span><span class="n">le_of_succ_le_succ</span> <span class="n">a</span><span class="o">))</span>
  <span class="kn">end</span>
</pre></div>

<a name="124816022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124816022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124816022">Kevin Buzzard (Apr 09 2018 at 00:44)</a>:</h4>
<p>Given the statement <code>a &lt;= b</code> it either proves that it's true or proves that it's false, and in each case it creates an instance of <code>decidable (a &lt;= b)</code></p>

<a name="124816028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124816028" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124816028">Kevin Buzzard (Apr 09 2018 at 00:45)</a>:</h4>
<p>using the <code>is_true</code> or <code>is_false</code> constructors</p>

<a name="124816073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124816073" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124816073">Kevin Buzzard (Apr 09 2018 at 00:46)</a>:</h4>
<p>things like <code>nat.zero_le</code> are lemmas in Lean (that one says "forall n, 0 &lt;= n")</p>

<a name="124816076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124816076" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124816076">Kevin Buzzard (Apr 09 2018 at 00:46)</a>:</h4>
<p>Earlier in the file they must have written "open nat" so you don't have to keep writing "nat."</p>

<a name="124816172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124816172" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124816172">Nima (Apr 09 2018 at 00:50)</a>:</h4>
<p>Sorry, but I still cannot figure out how to make this example work without going to <code>bool</code></p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">func</span><span class="o">(</span><span class="n">p</span><span class="o">:</span><span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">true</span>
<span class="kn">instance</span> <span class="n">func_of_decidable_is_decidable</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span>
<span class="n">decidable</span> <span class="o">(</span><span class="n">func</span> <span class="n">p</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">func</span><span class="o">],</span>
  <span class="c1">-- I have to prove decidable true</span>
  <span class="n">admit</span>
<span class="kn">end</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">p</span><span class="o">:</span><span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="k">if</span> <span class="o">(</span><span class="n">func</span> <span class="n">p</span><span class="o">)</span> <span class="k">then</span> <span class="n">true</span> <span class="k">else</span> <span class="n">false</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="124816222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124816222" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124816222">Kevin Buzzard (Apr 09 2018 at 00:53)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">func</span><span class="o">(</span><span class="n">p</span><span class="o">:</span><span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">true</span>
<span class="kn">instance</span> <span class="n">func_of_decidable_is_decidable</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span>
<span class="n">decidable</span> <span class="o">(</span><span class="n">func</span> <span class="n">p</span><span class="o">)</span> <span class="o">:=</span> <span class="n">is_true</span> <span class="n">trivial</span>
</pre></div>

<a name="124816227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124816227" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124816227">Kevin Buzzard (Apr 09 2018 at 00:53)</a>:</h4>
<p>I just use the constructor</p>

<a name="124816265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124816265" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124816265">Kevin Buzzard (Apr 09 2018 at 00:54)</a>:</h4>
<p>in tactic mode you can write <code>exact is_true trivial</code></p>

<a name="124816270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124816270" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124816270">Nima (Apr 09 2018 at 00:54)</a>:</h4>
<p>Thanks, now I got it!</p>

<a name="124816272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124816272" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124816272">Kevin Buzzard (Apr 09 2018 at 00:54)</a>:</h4>
<p>The only way you can ever prove decidable anything is to use a constructor. decidable is an inductive type with two constructors and the only way to make an instance of it is to use one of the constructors.</p>

<a name="124816379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124816379" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124816379">Mario Carneiro (Apr 09 2018 at 00:59)</a>:</h4>
<p><code>decidable.true</code> proves <code>decidable true</code></p>

<a name="124816479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124816479" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124816479">Mario Carneiro (Apr 09 2018 at 01:02)</a>:</h4>
<div class="codehilite"><pre><span></span>instance (i) : decidable (is_nonempty i) :=
by cases i; unfold is_nonempty; apply_instance
</pre></div>

<a name="124816490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124816490" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124816490">Mario Carneiro (Apr 09 2018 at 01:03)</a>:</h4>
<p><code>valof</code> can also be defined without the <code>emt</code> case at all:</p>
<div class="codehilite"><pre><span></span>def valof : Π (i : ind), is_nonempty i → ℕ
| (val n) h := n
</pre></div>


<p>This is because lean does cases on <code>h</code> there and needs no cases since it's <code>false</code></p>

<a name="124816533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124816533" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124816533">Mario Carneiro (Apr 09 2018 at 01:04)</a>:</h4>
<p>I don't recommend using <code>bool</code> in this case if you can help it; it's possible but the coercions will get in your way sooner or later</p>

<a name="124816581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124816581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124816581">Nima (Apr 09 2018 at 01:06)</a>:</h4>
<p>what is the difference between <code>unfold</code> and <code>rw</code>?</p>

<a name="124816582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124816582" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124816582">Mario Carneiro (Apr 09 2018 at 01:06)</a>:</h4>
<p>Also, you can prove <code>decidable T</code> for any expression <code>T</code> that is already known to be decidable from earlier stuff (like ands of ors of true and natural number equality and other things like that) by <code>apply_instance</code>.</p>

<a name="124816591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124816591" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124816591">Mario Carneiro (Apr 09 2018 at 01:07)</a>:</h4>
<p><code>unfold</code> does definitional unfolding; the syntax is <code>unfold X</code> where <code>X</code> is a definition will rewrite with the equation lemmas for <code>X</code>. <code>rw</code> does arbitrary (non-definitional) rewriting with any equations you give it</p>

<a name="124816634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124816634" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124816634">Mario Carneiro (Apr 09 2018 at 01:08)</a>:</h4>
<p>However, <code>rw X</code> also works as a shorthand for "rewrite with the equation lemmas for <code>X</code>" which makes it very similar to <code>unfold</code> in this instance</p>

<a name="124817111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124817111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124817111">Nima (Apr 09 2018 at 01:28)</a>:</h4>
<p>Thank you,<br>
After all these helps and more than an hour I wrote <strong>6 lines</strong> as a proof  <span class="emoji emoji-1f631" title="scream">:scream:</span></p>

<a name="124817178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124817178" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124817178">Mario Carneiro (Apr 09 2018 at 01:31)</a>:</h4>
<p>"perfection is when there is nothing left to take away" - Antoine de Saint-Exupery</p>

<a name="124817309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124817309" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124817309">Nima (Apr 09 2018 at 01:36)</a>:</h4>
<p>Just to be clear, that was just survival; no perfection was involved!</p>

<a name="124817314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124817314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124817314">Simon Hudon (Apr 09 2018 at 01:37)</a>:</h4>
<p>I also like to quote Adventure Time when it comes to learning functional programming and proving: sucking is the first step towards being kind of good at something.</p>

<a name="124817408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124817408" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124817408">Simon Hudon (Apr 09 2018 at 01:41)</a>:</h4>
<p>The fun thing about Haskell and Lean is that ugly code is still very much usable. As you learn more, you see it improve over time. My ugly Haskell and Lean code is still easier to refactor and evolve than anything I wrote in any language. Just to say: starting with bad code is not too much of a problem</p>

<a name="124819331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124819331" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124819331">Nima (Apr 09 2018 at 02:59)</a>:</h4>
<p>When I use <code>cases </code> on an inductive type, how can I specify the first case that I would like to consider?<br>
When I am in tactic mode, how can I have pattern matching on two inductive types at the same time?</p>

<a name="124819379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124819379" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124819379">Kenny Lau (Apr 09 2018 at 03:00)</a>:</h4>
<p>nested cases?</p>

<a name="124819382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124819382" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124819382">Kenny Lau (Apr 09 2018 at 03:00)</a>:</h4>
<blockquote>
<p>When I use <code>cases </code> on an inductive type, how can I specify the first case that I would like to consider?</p>
</blockquote>
<p>in tactic mode you can write</p>
<div class="codehilite"><pre><span></span>case list.nil
{ simp },
case list.cons
{ simp }
</pre></div>

<a name="124819491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124819491" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124819491">Nima (Apr 09 2018 at 03:04)</a>:</h4>
<p>Thanks for <code>case</code><br>
By "nested cases" you mean writing multiple <code>cases</code>?<br>
I meant something like <code>match a,b with</code>? Is there anything like that available?</p>

<a name="124819500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124819500" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124819500">Kenny Lau (Apr 09 2018 at 03:05)</a>:</h4>
<p><code>exact match a,b with</code></p>

<a name="124819501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124819501" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124819501">Kenny Lau (Apr 09 2018 at 03:05)</a>:</h4>
<p>you can always use <code>exact</code> to go into term mode</p>

<a name="124819502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124819502" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124819502">Kenny Lau (Apr 09 2018 at 03:05)</a>:</h4>
<p>and <code>by</code> to go into tactic mode</p>

<a name="124819503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124819503" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124819503">Kenny Lau (Apr 09 2018 at 03:05)</a>:</h4>
<p>no, I don't think there's a tactic for nested cases</p>

<a name="124819545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124819545" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124819545">Nima (Apr 09 2018 at 03:06)</a>:</h4>
<p><code>exact match a,b with</code> is exactly what I was looking for. Thank you.</p>

<a name="124820994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124820994" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124820994">Mario Carneiro (Apr 09 2018 at 04:05)</a>:</h4>
<p><code>rcases</code>, from the mathlib tactics, does multiple cases</p>

<a name="124821038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124821038" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124821038">Mario Carneiro (Apr 09 2018 at 04:06)</a>:</h4>
<p>but it only works with one input expression. In fact regular cases will automatically generalize dependent hypotheses like <code>match i, h with</code> in your earlier example.</p>

<a name="124863817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124863817" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124863817">Nima (Apr 10 2018 at 01:11)</a>:</h4>
<p>Does it make any sense if I use <code>classical</code> to prove something like <code> decidable (number.choose α = none) </code>?</p>

<a name="124864641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124864641" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124864641">Mario Carneiro (Apr 10 2018 at 01:41)</a>:</h4>
<p>You can, but <code>option.is_none</code> is already decidable</p>

<a name="124865269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124865269" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124865269">Simon Hudon (Apr 10 2018 at 02:05)</a>:</h4>
<p>There's also something contradictory to using classical reasoning to prove decidability: decidability is preferable to <code>classical.em</code> (excluded middle) especially to preserve computability. If you bring in classical reasoning, you lose computability so you might as well go all the way and just use <code>classical.prop_decidable</code> to make every proposition decidable:</p>
<div class="codehilite"><pre><span></span><span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="n">classical</span><span class="bp">.</span><span class="n">prop_decidable</span>
</pre></div>


<p>This is useful to use <code>if _ then _ else _</code> without proving decidability.</p>

<a name="124865624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124865624" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124865624">Nima (Apr 10 2018 at 02:17)</a>:</h4>
<p>So if I want to use <code>decidable</code> as what it is intended to be then I should not use <code>classical</code>. Right?</p>

<a name="124865732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124865732" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124865732">Kenny Lau (Apr 10 2018 at 02:20)</a>:</h4>
<p>but <code>classical.prop_decidable</code> just says that every <code>prop</code> is <code>decidable</code></p>

<a name="124865767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124865767" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124865767">Mario Carneiro (Apr 10 2018 at 02:21)</a>:</h4>
<p><code>decidable</code> is a proof obligation that is trivial if you are being classical. Most conventional math in lean is classical, so you usually don't have to worry about this. You should think about decidability if you are writing an executable program (if you have to mark your program <code>noncomputable</code> it won't run).</p>

<a name="124865820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124865820" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124865820">Mario Carneiro (Apr 10 2018 at 02:22)</a>:</h4>
<p>You can attempt to avoid LEM even when proving theorems, like Kenny, but the library won't really help you in this quest so it's an uphill battle</p>

<a name="124865830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124865830" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124865830">Nima (Apr 10 2018 at 02:23)</a>:</h4>
<p>Please look at the last two lines, as I am not sure if anything else there is relevant</p>
<div class="codehilite"><pre><span></span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">number</span> <span class="n">α</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">constraint</span> <span class="n">α</span><span class="o">,</span>
<span class="n">d₁</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">is_trivial</span> <span class="n">c</span><span class="o">),</span>
<span class="n">d₂</span> <span class="o">:</span> <span class="n">decidable_linear_order</span> <span class="n">α</span><span class="o">,</span>
<span class="bp">_</span><span class="n">match</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="bp">_</span><span class="n">a</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">is_trivial</span> <span class="n">c</span><span class="o">)),</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">is_satisfiable</span> <span class="n">c</span><span class="o">),</span>
<span class="n">hnt</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">is_trivial</span> <span class="n">c</span><span class="o">,</span>
<span class="n">d₃</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">is_lower_bound</span> <span class="n">c</span><span class="o">),</span>
<span class="bp">_</span><span class="n">match</span> <span class="o">:</span>
  <span class="n">decidable</span> <span class="o">(</span><span class="n">is_lower_bound</span> <span class="n">c</span><span class="o">)</span> <span class="bp">→</span>
  <span class="n">decidable</span>
    <span class="o">(</span><span class="n">ite</span> <span class="o">(</span><span class="n">is_lower_bound</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">is_satisfiable</span><span class="bp">._</span><span class="n">match_3</span> <span class="n">c</span> <span class="n">hnt</span> <span class="o">(</span><span class="n">number</span><span class="bp">.</span><span class="n">max</span> <span class="n">α</span><span class="o">))</span>
       <span class="o">(</span><span class="n">is_satisfiable</span><span class="bp">._</span><span class="n">match_4</span> <span class="n">c</span> <span class="n">hnt</span> <span class="o">(</span><span class="n">number</span><span class="bp">.</span><span class="n">min</span> <span class="n">α</span><span class="o">))),</span>
<span class="n">hl</span> <span class="o">:</span> <span class="n">is_lower_bound</span> <span class="n">c</span><span class="o">,</span>
<span class="bp">_</span><span class="n">match</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="bp">_</span><span class="n">a</span> <span class="o">:</span> <span class="n">option</span> <span class="n">α</span><span class="o">),</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">is_satisfiable</span><span class="bp">._</span><span class="n">match_3</span> <span class="n">c</span> <span class="n">hnt</span> <span class="bp">_</span><span class="n">a</span><span class="o">),</span>
<span class="n">m</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span>
<span class="n">aa</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">get_bound</span> <span class="n">c</span> <span class="n">hnt</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">get_bound</span> <span class="n">c</span> <span class="n">hnt</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span>
</pre></div>


<p>If I do <code> exact aa,</code> I receive this cryptic error message.</p>
<div class="codehilite"><pre><span></span><span class="n">invalid</span> <span class="n">type</span> <span class="n">ascription</span><span class="o">,</span> <span class="n">term</span> <span class="n">has</span> <span class="n">type</span>
  <span class="n">decidable</span>
    <span class="o">(</span><span class="bp">@</span><span class="n">has_lt</span><span class="bp">.</span><span class="n">lt</span> <span class="n">α</span>
       <span class="o">(</span><span class="bp">@</span><span class="n">preorder</span><span class="bp">.</span><span class="n">to_has_lt</span> <span class="n">α</span>
          <span class="o">(</span><span class="bp">@</span><span class="n">partial_order</span><span class="bp">.</span><span class="n">to_preorder</span> <span class="n">α</span>
             <span class="o">(</span><span class="bp">@</span><span class="n">linear_order</span><span class="bp">.</span><span class="n">to_partial_order</span> <span class="n">α</span>
                <span class="o">(</span><span class="bp">@</span><span class="n">linear_order</span><span class="bp">.</span><span class="n">mk</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">decidable_linear_order</span><span class="bp">.</span><span class="n">le</span> <span class="n">α</span> <span class="n">d₂</span><span class="o">)</span> <span class="o">(</span><span class="bp">@</span><span class="n">decidable_linear_order</span><span class="bp">.</span><span class="n">lt</span> <span class="n">α</span> <span class="n">d₂</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span>
                   <span class="bp">_</span><span class="o">))))</span>
       <span class="o">(</span><span class="bp">@</span><span class="n">constraint</span><span class="bp">.</span><span class="n">get_bound</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span> <span class="n">c</span> <span class="n">hnt</span><span class="o">)</span>
       <span class="n">m</span><span class="o">)</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="n">decidable</span>
    <span class="o">(</span><span class="bp">@</span><span class="n">has_lt</span><span class="bp">.</span><span class="n">lt</span> <span class="n">α</span>
       <span class="o">(</span><span class="bp">@</span><span class="n">preorder</span><span class="bp">.</span><span class="n">to_has_lt</span> <span class="n">α</span>
          <span class="o">(</span><span class="bp">@</span><span class="n">partial_order</span><span class="bp">.</span><span class="n">to_preorder</span> <span class="n">α</span>
             <span class="o">(</span><span class="bp">@</span><span class="n">linear_order</span><span class="bp">.</span><span class="n">to_partial_order</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">number</span><span class="bp">.</span><span class="n">number</span><span class="bp">.</span><span class="n">to_linear_order</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">))))</span>
       <span class="o">(</span><span class="bp">@</span><span class="n">constraint</span><span class="bp">.</span><span class="n">get_bound</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span> <span class="n">c</span> <span class="n">hnt</span><span class="o">)</span>
       <span class="n">m</span><span class="o">)</span>
<span class="n">state</span><span class="o">:</span>
<span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="bp">...</span>
</pre></div>


<p>I know I might not gave enough information to receive an exact answer, but is there any clue you can share about why this might happen?</p>

<a name="124865882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124865882" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124865882">Mario Carneiro (Apr 10 2018 at 02:24)</a>:</h4>
<p>You have <code>decidable (is_trivial c)</code> as an assumption, which is probably a bad sign. How is <code>is_trivial</code> and <code>constraint</code> defined?</p>

<a name="124865889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124865889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124865889">Kenny Lau (Apr 10 2018 at 02:25)</a>:</h4>
<p>diamond of death?</p>

<a name="124865935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124865935" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124865935">Simon Hudon (Apr 10 2018 at 02:26)</a>:</h4>
<p>I think <code> decidable_linear_order α</code> is more problematic because it is already subsumed by <code>number α</code></p>

<a name="124865937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124865937" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124865937">Mario Carneiro (Apr 10 2018 at 02:26)</a>:</h4>
<p>yes, <code> number α</code> and <code> decidable_linear_order α</code> both supply a less-equal relation</p>

<a name="124865947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124865947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124865947">Mario Carneiro (Apr 10 2018 at 02:27)</a>:</h4>
<p>you should replace <code>decidable_linear_order α</code> with <code>@decidable_rel α (&lt;)</code></p>

<a name="124865948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124865948" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124865948">Nima (Apr 10 2018 at 02:27)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">is_trivial</span> <span class="o">:</span> <span class="n">constraint</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">cnstr</span>  <span class="n">ktrv</span>        <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">true</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">cnstr</span> <span class="o">(</span><span class="n">kdyn</span> <span class="n">trv</span> <span class="bp">_</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">true</span>
<span class="bp">|</span> <span class="bp">_</span>                            <span class="o">:=</span> <span class="n">false</span>
</pre></div>

<a name="124865950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124865950" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124865950">Mario Carneiro (Apr 10 2018 at 02:27)</a>:</h4>
<p>or define <code>decidable_number</code></p>

<a name="124865991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124865991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124865991">Mario Carneiro (Apr 10 2018 at 02:28)</a>:</h4>
<p>You should be able to prove <code>decidable (is_trivial c)</code> for all <code>c</code> as an instance, so it shouldn't need to be an assumption</p>

<a name="124865997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124865997" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124865997">Nima (Apr 10 2018 at 02:29)</a>:</h4>
<p>I make <strong>no claim</strong> of writing in the best or even a good way. Just trying to find my way through.</p>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">triviality</span>
<span class="bp">|</span> <span class="n">trv</span>
<span class="bp">|</span> <span class="n">ntr</span>

<span class="kn">inductive</span> <span class="n">direction</span>
<span class="bp">|</span> <span class="n">lower</span>
<span class="bp">|</span> <span class="n">upper</span>

<span class="kn">inductive</span> <span class="n">strictness</span>
<span class="bp">|</span> <span class="n">stt</span>
<span class="bp">|</span> <span class="n">nst</span>

<span class="kn">inductive</span> <span class="n">triviality_kind</span> <span class="o">{</span><span class="n">α</span><span class="o">:</span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="bp">|</span> <span class="n">ktrv</span>                             <span class="o">:</span> <span class="n">triviality_kind</span>
<span class="bp">|</span> <span class="n">kntr</span>                   <span class="o">(</span><span class="n">bnd</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">triviality_kind</span>
<span class="bp">|</span> <span class="n">kdyn</span> <span class="o">(</span><span class="n">tr</span> <span class="o">:</span> <span class="n">triviality</span><span class="o">)</span> <span class="o">(</span><span class="n">bnd</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">triviality_kind</span>

<span class="kn">inductive</span> <span class="n">direction_kind</span>
<span class="bp">|</span> <span class="n">none</span>
<span class="bp">|</span> <span class="n">klower</span>
<span class="bp">|</span> <span class="n">kupper</span>
<span class="bp">|</span> <span class="n">kdynam</span> <span class="o">(</span><span class="n">dir</span> <span class="o">:</span> <span class="n">direction</span><span class="o">)</span>

<span class="kn">inductive</span> <span class="n">strictness_kind</span>
<span class="bp">|</span> <span class="n">none</span>
<span class="bp">|</span> <span class="n">kstt</span>
<span class="bp">|</span> <span class="n">knst</span>
<span class="bp">|</span> <span class="n">kdyn</span> <span class="o">(</span><span class="n">st</span> <span class="o">:</span> <span class="n">strictness</span><span class="o">)</span>

<span class="kn">structure</span> <span class="n">constraint</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">cnstr</span> <span class="bp">::</span>
  <span class="o">(</span><span class="n">trvk</span> <span class="o">:</span> <span class="bp">@</span><span class="n">triviality_kind</span> <span class="n">α</span><span class="o">)</span>
  <span class="o">(</span><span class="n">dirk</span> <span class="o">:</span> <span class="n">direction_kind</span> <span class="o">)</span>
  <span class="o">(</span><span class="n">strk</span> <span class="o">:</span> <span class="n">strictness_kind</span><span class="o">)</span>
  <span class="o">(</span><span class="n">ndir</span> <span class="o">:</span> <span class="n">dirk</span> <span class="bp">=</span> <span class="n">direction_kind</span><span class="bp">.</span><span class="n">none</span>  <span class="bp">↔</span> <span class="n">trvk</span> <span class="bp">=</span> <span class="n">triviality_kind</span><span class="bp">.</span><span class="n">ktrv</span><span class="o">)</span>
  <span class="o">(</span><span class="n">nstr</span> <span class="o">:</span> <span class="n">strk</span> <span class="bp">=</span> <span class="n">strictness_kind</span><span class="bp">.</span><span class="n">none</span> <span class="bp">↔</span> <span class="n">trvk</span> <span class="bp">=</span> <span class="n">triviality_kind</span><span class="bp">.</span><span class="n">ktrv</span><span class="o">)</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="kn">instance</span>  <span class="n">is_trivial_is_decidable</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">constraint</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
<span class="n">decidable</span> <span class="o">(</span><span class="n">is_trivial</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="n">c</span><span class="bp">;</span> <span class="n">cases</span> <span class="n">trvk</span><span class="bp">;</span>
  <span class="n">try</span> <span class="o">{</span> <span class="n">unfold</span> <span class="n">is_trivial</span> <span class="o">}</span><span class="bp">;</span>
  <span class="n">try</span> <span class="o">{</span> <span class="n">cases</span> <span class="n">tr</span> <span class="o">}</span><span class="bp">;</span>
  <span class="n">try</span> <span class="o">{</span> <span class="n">exact</span> <span class="n">decidable</span><span class="bp">.</span><span class="n">true</span> <span class="o">}</span><span class="bp">;</span>
  <span class="n">try</span> <span class="o">{</span> <span class="n">exact</span> <span class="n">decidable</span><span class="bp">.</span><span class="n">false</span><span class="o">},</span>
<span class="kn">end</span>
</pre></div>

<a name="124866049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124866049" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124866049">Mario Carneiro (Apr 10 2018 at 02:30)</a>:</h4>
<p>You seem to already have the proof I mention there</p>

<a name="124866094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124866094" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124866094">Mario Carneiro (Apr 10 2018 at 02:32)</a>:</h4>
<p>What produced the <code>d₁ : decidable (is_trivial c)</code> in the theorem you are proving?</p>

<a name="124866108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124866108" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124866108">Nima (Apr 10 2018 at 02:33)</a>:</h4>
<p>I am trying to prove  the following is decidable</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">is_satisfiable</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">constraint</span> <span class="n">α</span><span class="o">)</span> <span class="o">[</span><span class="n">d</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">is_trivial</span> <span class="n">c</span><span class="o">)]</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="k">match</span> <span class="n">d</span> <span class="k">with</span>
  <span class="bp">|</span> <span class="n">is_true</span>  <span class="bp">_</span>  <span class="o">:=</span> <span class="n">number</span><span class="bp">.</span><span class="n">choose</span> <span class="n">α</span> <span class="bp">≠</span> <span class="n">none</span>
  <span class="bp">|</span> <span class="n">is_false</span> <span class="n">ht</span> <span class="o">:=</span>
    <span class="k">match</span> <span class="n">get_strictness</span> <span class="n">c</span> <span class="n">ht</span> <span class="k">with</span>
    <span class="bp">|</span> <span class="n">nst</span> <span class="o">:=</span>  <span class="n">true</span>
    <span class="bp">|</span> <span class="n">stt</span> <span class="o">:=</span>  <span class="k">if</span> <span class="n">is_lower_bound</span> <span class="n">c</span> <span class="k">then</span>
                <span class="k">match</span> <span class="n">number</span><span class="bp">.</span><span class="n">max</span> <span class="n">α</span> <span class="k">with</span>
                <span class="bp">|</span> <span class="n">none</span>   <span class="o">:=</span> <span class="n">true</span>
                <span class="bp">|</span> <span class="n">some</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">get_bound</span> <span class="n">c</span> <span class="n">ht</span> <span class="bp">&lt;</span> <span class="n">m</span>
                <span class="kn">end</span>
              <span class="k">else</span>
                <span class="k">match</span> <span class="n">number</span><span class="bp">.</span><span class="n">min</span> <span class="n">α</span> <span class="k">with</span>
                <span class="bp">|</span> <span class="n">none</span>   <span class="o">:=</span> <span class="n">true</span>
                <span class="bp">|</span> <span class="n">some</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">get_bound</span> <span class="n">c</span> <span class="n">ht</span>
                <span class="kn">end</span>
    <span class="kn">end</span>
  <span class="kn">end</span>
</pre></div>


<p>Second line:</p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span>  <span class="n">is_satisfiable_is_decidable</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">constraint</span> <span class="n">α</span><span class="o">)</span>
          <span class="o">[</span><span class="n">d₁</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">is_trivial</span> <span class="n">c</span><span class="o">)]</span>
          <span class="o">[</span><span class="n">d₂</span> <span class="o">:</span> <span class="n">decidable_linear_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span>
<span class="n">decidable</span> <span class="o">(</span><span class="n">is_satisfiable</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">match</span> <span class="n">d₁</span> <span class="k">with</span>
<span class="bp">|</span> <span class="n">is_true</span>  <span class="n">ht</span>  <span class="o">:=</span> <span class="k">by</span> <span class="n">unfold</span> <span class="n">is_satisfiable</span><span class="bp">;</span> <span class="n">simp</span><span class="bp">;</span> <span class="n">apply_instance</span>
<span class="bp">|</span> <span class="n">is_false</span> <span class="n">hnt</span> <span class="o">:=</span>
  <span class="k">begin</span>
    <span class="n">unfold</span> <span class="n">is_satisfiable</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">get_strictness</span> <span class="n">c</span> <span class="n">hnt</span><span class="bp">;</span> <span class="n">unfold</span> <span class="n">is_satisfiable</span><span class="bp">._</span><span class="n">match_2</span><span class="o">,</span>
    <span class="k">begin</span>
      <span class="k">have</span> <span class="n">d₃</span> <span class="o">:</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">is_lower_bound</span> <span class="n">c</span><span class="o">),</span> <span class="k">by</span> <span class="n">apply_instance</span><span class="o">,</span>
      <span class="n">exact</span> <span class="k">match</span> <span class="n">d₃</span> <span class="k">with</span>
      <span class="bp">|</span> <span class="n">is_true</span>  <span class="n">hl</span>  <span class="o">:=</span>
        <span class="k">begin</span>
          <span class="n">simp</span> <span class="o">[</span><span class="n">hl</span><span class="o">],</span>
          <span class="n">exact</span> <span class="k">match</span> <span class="n">number</span><span class="bp">.</span><span class="n">max</span> <span class="n">α</span> <span class="k">with</span>
          <span class="bp">|</span> <span class="n">none</span>   <span class="o">:=</span> <span class="k">by</span> <span class="n">unfold</span> <span class="n">is_satisfiable</span><span class="bp">._</span><span class="n">match_3</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">decidable</span><span class="bp">.</span><span class="n">true</span>
          <span class="bp">|</span> <span class="n">some</span> <span class="n">m</span> <span class="o">:=</span> <span class="k">begin</span>
                      <span class="n">unfold</span> <span class="n">is_satisfiable</span><span class="bp">._</span><span class="n">match_3</span><span class="o">,</span>
                      <span class="k">have</span> <span class="n">aa</span> <span class="o">:=</span> <span class="n">decidable_linear_order</span><span class="bp">.</span><span class="n">decidable_lt</span> <span class="n">α</span> <span class="o">(</span><span class="n">get_bound</span> <span class="n">c</span> <span class="n">hnt</span><span class="o">)</span> <span class="n">m</span><span class="o">,</span>
                      <span class="n">exact</span> <span class="n">aa</span><span class="o">,</span>
                      <span class="kn">end</span>
          <span class="c1">-- by unfold is_satisfiable._match_3; apply_instance</span>
          <span class="kn">end</span>
        <span class="kn">end</span>
      <span class="bp">|</span> <span class="n">is_false</span> <span class="n">hnl</span> <span class="o">:=</span> <span class="k">begin</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hnl</span><span class="o">],</span> <span class="n">admit</span> <span class="kn">end</span>
      <span class="kn">end</span><span class="o">,</span>
    <span class="kn">end</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">decidable</span><span class="bp">.</span><span class="n">true</span>
  <span class="kn">end</span>
<span class="kn">end</span>
</pre></div>

<a name="124866109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124866109" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124866109">Mario Carneiro (Apr 10 2018 at 02:33)</a>:</h4>
<p>drop the line <code>           [d₁ : decidable (is_trivial c)] </code></p>

<a name="124866111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124866111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124866111">Mario Carneiro (Apr 10 2018 at 02:33)</a>:</h4>
<p>You can do the match by writing <code>if ht : is_trivial c then ... else ...</code></p>

<a name="124866223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124866223" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124866223">Nima (Apr 10 2018 at 02:38)</a>:</h4>
<p>Should I drop <code> [d : decidable (is_trivial c)] </code> from definition of <code>is_satisfiable</code> as well?</p>

<a name="124866253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124866253" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124866253">Mario Carneiro (Apr 10 2018 at 02:38)</a>:</h4>
<p>Given the complexity of your definition, I think you would do better to change <code>is_satisfiable</code> to type <code>def is_satisfiable (c : constraint α) : bool :=</code>. Same for <code>is_trivial</code>, since it's just a bunch of <code>true</code> and <code>false</code> branches</p>

<a name="124866261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124866261" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124866261">Mario Carneiro (Apr 10 2018 at 02:39)</a>:</h4>
<p>Then decidability will be trivial, and you can prove the unfolding of the individual branches as (much easier) lemmas</p>

<a name="124866476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124866476" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124866476">Mario Carneiro (Apr 10 2018 at 02:46)</a>:</h4>
<p>I don't have all your definitions so I don't know if this typechecks, but something like this:</p>
<div class="codehilite"><pre><span></span>def is_trivial : constraint α → bool
| (cnstr  ktrv        _ _ _ _) := tt
| (cnstr (kdyn trv _) _ _ _ _) := tt
| _                            := ff

def is_satisfiable (c : constraint α) : bool :=
if ht : is_trivial c then
  (number.choose α).is_some
else
  match get_strictness c ht with
  | nst := tt
  | stt :=
    if is_lower_bound c then
      match number.max α with
      | none   := tt
      | some m := get_bound c ht &lt; m
      end
    else
      match number.min α with
      | none   := tt
      | some m := m &lt; get_bound c ht
      end
  end
</pre></div>

<a name="124866687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124866687" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124866687">Nima (Apr 10 2018 at 02:55)</a>:</h4>
<p>Would you please tell me why I should have dropped <code>[d₁ : decidable (is_trivial c)]</code>?<br>
Shouldn't I have one of these for every property I put in <code>if then else</code>?</p>

<a name="124866740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124866740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124866740">Simon Hudon (Apr 10 2018 at 02:57)</a>:</h4>
<p>When you look at <code>(get_bound c hnt &lt; m)</code> you should see that <code>&lt;</code> is generic, i.e. it is inferred from instances. Because of that you should see that it takes four parameters, not two:</p>
<ul>
<li><code>α </code></li>
<li>some instance of <code>has_lt α</code></li>
<li><code>get_bound c hnt</code></li>
<li><code>m</code></li>
</ul>
<p>This means that if different instances of <code>has_lt</code> are inferred for two <code>&lt;</code> propositions, they are not syntactically the same so you can't use one to prove the other</p>

<a name="124866786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124866786" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124866786">Simon Hudon (Apr 10 2018 at 02:58)</a>:</h4>
<p>That means that you have to consciously try to have a unique path to any instance that you're going to use. If the instances are conceptually the same, it might still be hard to prove and the effort is usually not worth it</p>

<a name="124866904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124866904" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124866904">Mario Carneiro (Apr 10 2018 at 03:03)</a>:</h4>
<p>When you say <code>[d₁ : decidable (is_trivial c)]</code> , you are defining a function parametric over proofs that triviality is decidable. There's no need to do this, you already have such a proof/function and want to call it whenever you want to decide if a constraint is trivial</p>

<a name="124866963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124866963" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124866963">Mario Carneiro (Apr 10 2018 at 03:05)</a>:</h4>
<p>If you say <code>if ht : is_trivial c then ...</code>, it automatically infers the <code>decidable (is_trivial c)</code> argument (using the environment, not just the local context), which is what you want.</p>

<a name="124867141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124867141" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124867141">Nima (Apr 10 2018 at 03:11)</a>:</h4>
<p>Thank you both,<br>
I need time to take these in ...</p>

<a name="124867357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124867357" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124867357">Simon Hudon (Apr 10 2018 at 03:19)</a>:</h4>
<p>Sure :) it's a slow process. You can have Lean's pretty printer show more information and, among others, show the implicit and type class arguments by using <code>set_option pp.all true</code> before your theorem.</p>

<a name="124869749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124869749" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124869749">Nima (Apr 10 2018 at 04:43)</a>:</h4>
<p>OK, after I changed something and I will get back to it later, I managed to rewrote the whole proof in the following nicer way.<br>
As you can see something is almost duplicated. Is there anyway I can make this even shorter (ie remove those duplications)?</p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span>  <span class="n">is_satisfiable_is_decidable</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">constraint</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
<span class="n">decidable</span> <span class="o">(</span><span class="n">is_satisfiable</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
  <span class="k">if</span> <span class="n">ht</span> <span class="o">:</span> <span class="n">is_trivial</span>     <span class="n">c</span> <span class="k">then</span> <span class="k">by</span> <span class="o">{</span> <span class="n">unfold</span> <span class="n">is_satisfiable</span><span class="o">,</span> <span class="n">simp</span> <span class="o">[</span><span class="n">ht</span><span class="o">],</span> <span class="n">apply_instance</span> <span class="o">}</span> <span class="k">else</span>
  <span class="k">if</span> <span class="n">hs</span> <span class="o">:</span> <span class="n">is_nonstrict</span>   <span class="n">c</span> <span class="k">then</span> <span class="k">by</span> <span class="o">{</span> <span class="n">unfold</span> <span class="n">is_satisfiable</span><span class="o">,</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hs</span><span class="o">],</span> <span class="n">apply_instance</span> <span class="o">}</span> <span class="k">else</span>
  <span class="k">if</span> <span class="n">hl</span> <span class="o">:</span> <span class="n">is_lower_bound</span> <span class="n">c</span> <span class="k">then</span> <span class="k">by</span>
    <span class="n">unfold</span> <span class="n">is_satisfiable</span><span class="bp">;</span>
    <span class="n">cases</span> <span class="n">number</span><span class="bp">.</span><span class="n">max</span> <span class="n">α</span> <span class="k">with</span> <span class="n">m</span><span class="bp">;</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">ht</span><span class="o">,</span><span class="n">hs</span><span class="o">,</span><span class="n">hl</span><span class="o">,</span><span class="n">is_satisfiable</span><span class="o">]</span><span class="bp">;</span>
    <span class="n">apply_instance</span>
  <span class="k">else</span> <span class="k">by</span>
    <span class="n">unfold</span> <span class="n">is_satisfiable</span><span class="bp">;</span>
    <span class="n">cases</span> <span class="n">number</span><span class="bp">.</span><span class="n">min</span> <span class="n">α</span> <span class="k">with</span> <span class="n">m</span><span class="bp">;</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">ht</span><span class="o">,</span><span class="n">hs</span><span class="o">,</span><span class="n">hl</span><span class="o">,</span><span class="n">is_satisfiable</span><span class="o">]</span><span class="bp">;</span>
    <span class="n">apply_instance</span>
</pre></div>

<a name="124869940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124869940" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124869940">Simon Hudon (Apr 10 2018 at 04:49)</a>:</h4>
<p>Can you reproduce the definitions of <code>is_satisfiable</code>, <code>constraint</code>, <code>is_trivial</code>, <code>is_nonstrict</code> and <code>is_lower_bound</code> please?</p>

<a name="124870028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124870028" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124870028">Nima (Apr 10 2018 at 04:52)</a>:</h4>
<p>I did not mean shorter proof using all these definitions. I thought just because those lines look a lot like each other, one should be able to merge them using something like <code>try</code>. But if I write <code>if ht : is_trivial c ∨ is_nonstrict c then</code> then I cannot even write <code>cases ht</code>, and I did not understand why.</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">constraint</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">cnstr</span> <span class="bp">::</span>
  <span class="o">(</span><span class="n">trvk</span> <span class="o">:</span> <span class="bp">@</span><span class="n">triviality_kind</span> <span class="n">α</span><span class="o">)</span>
  <span class="o">(</span><span class="n">dirk</span> <span class="o">:</span> <span class="n">direction_kind</span> <span class="o">)</span>
  <span class="o">(</span><span class="n">strk</span> <span class="o">:</span> <span class="n">strictness_kind</span><span class="o">)</span>
  <span class="o">(</span><span class="n">ndir</span> <span class="o">:</span> <span class="n">dirk</span> <span class="bp">=</span> <span class="n">direction_kind</span><span class="bp">.</span><span class="n">none</span>  <span class="bp">↔</span> <span class="n">trvk</span> <span class="bp">=</span> <span class="n">triviality_kind</span><span class="bp">.</span><span class="n">ktrv</span><span class="o">)</span>
  <span class="o">(</span><span class="n">nstr</span> <span class="o">:</span> <span class="n">strk</span> <span class="bp">=</span> <span class="n">strictness_kind</span><span class="bp">.</span><span class="n">none</span> <span class="bp">↔</span> <span class="n">trvk</span> <span class="bp">=</span> <span class="n">triviality_kind</span><span class="bp">.</span><span class="n">ktrv</span><span class="o">)</span>

<span class="n">def</span> <span class="n">is_trivial</span> <span class="o">:</span> <span class="n">constraint</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">cnstr</span>  <span class="n">ktrv</span>        <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">true</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">cnstr</span> <span class="o">(</span><span class="n">kdyn</span> <span class="n">trv</span> <span class="bp">_</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">true</span>
<span class="bp">|</span> <span class="bp">_</span>                            <span class="o">:=</span> <span class="n">false</span>

<span class="n">def</span> <span class="n">is_lower_bound</span> <span class="o">:</span> <span class="n">constraint</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">cnstr</span> <span class="bp">_</span>  <span class="n">klower</span>        <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">true</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">cnstr</span> <span class="bp">_</span> <span class="o">(</span><span class="n">kdynam</span> <span class="n">lower</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">true</span>
<span class="bp">|</span> <span class="bp">_</span>                              <span class="o">:=</span> <span class="n">false</span>

<span class="n">def</span> <span class="n">is_nonstrict</span> <span class="o">:</span> <span class="n">constraint</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">cnstr</span> <span class="bp">_</span> <span class="bp">_</span>  <span class="n">knst</span>      <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">true</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">cnstr</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">kdyn</span> <span class="n">nst</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">true</span>
<span class="bp">|</span> <span class="bp">_</span>                          <span class="o">:=</span> <span class="n">false</span>

<span class="n">def</span> <span class="n">is_satisfiable</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">constraint</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="k">if</span> <span class="n">ht</span> <span class="o">:</span> <span class="n">is_trivial</span>     <span class="n">c</span> <span class="k">then</span> <span class="n">number</span><span class="bp">.</span><span class="n">choose</span> <span class="n">α</span> <span class="bp">≠</span> <span class="n">none</span> <span class="k">else</span>
  <span class="k">if</span>      <span class="n">is_nonstrict</span>   <span class="n">c</span> <span class="k">then</span> <span class="n">true</span> <span class="k">else</span>
  <span class="k">if</span>      <span class="n">is_lower_bound</span> <span class="n">c</span> <span class="k">then</span>
    <span class="k">match</span> <span class="n">number</span><span class="bp">.</span><span class="n">max</span> <span class="n">α</span> <span class="k">with</span>
    <span class="bp">|</span> <span class="n">none</span>   <span class="o">:=</span> <span class="n">true</span>
    <span class="bp">|</span> <span class="n">some</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">get_bound</span> <span class="n">c</span> <span class="n">ht</span> <span class="bp">&lt;</span> <span class="n">m</span>
    <span class="kn">end</span>
  <span class="k">else</span>
    <span class="k">match</span> <span class="n">number</span><span class="bp">.</span><span class="n">min</span> <span class="n">α</span> <span class="k">with</span>
    <span class="bp">|</span> <span class="n">none</span>   <span class="o">:=</span> <span class="n">true</span>
    <span class="bp">|</span> <span class="n">some</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">get_bound</span> <span class="n">c</span> <span class="n">ht</span>
    <span class="kn">end</span>
</pre></div>

<a name="124870217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124870217" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124870217">Simon Hudon (Apr 10 2018 at 04:59)</a>:</h4>
<p>I'd like to replace your big <code>if _ then _ else _ </code> with a <code>match</code> but I can't think of a nice way to do it. Instead, let's try this:</p>
<div class="codehilite"><pre><span></span><span class="k">begin</span>
   <span class="n">refine</span> <span class="o">(</span> <span class="k">if</span> <span class="n">ht</span> <span class="o">:</span> <span class="n">is_trivial</span>     <span class="n">c</span> <span class="k">then</span> <span class="bp">_</span>
            <span class="k">else</span> <span class="k">if</span>      <span class="n">is_nonstrict</span>   <span class="n">c</span> <span class="k">then</span> <span class="bp">_</span>
            <span class="k">else</span> <span class="k">if</span>      <span class="n">is_lower_bound</span> <span class="n">c</span> <span class="k">then</span>
                <span class="k">match</span> <span class="n">number</span><span class="bp">.</span><span class="n">max</span> <span class="n">α</span> <span class="k">with</span>
                 <span class="bp">|</span> <span class="n">none</span>   <span class="o">:=</span> <span class="bp">_</span>
                 <span class="bp">|</span> <span class="n">some</span> <span class="n">m</span> <span class="o">:=</span> <span class="bp">_</span>
                <span class="kn">end</span>
            <span class="k">else</span>
                <span class="k">match</span> <span class="n">number</span><span class="bp">.</span><span class="n">min</span> <span class="n">α</span> <span class="k">with</span>
                 <span class="bp">|</span> <span class="n">none</span>   <span class="o">:=</span> <span class="bp">_</span>
                 <span class="bp">|</span> <span class="n">some</span> <span class="n">m</span> <span class="o">:=</span> <span class="bp">_</span>
                <span class="kn">end</span> <span class="o">)</span>
   <span class="bp">;</span> <span class="n">simp</span> <span class="o">[</span><span class="bp">*</span><span class="o">,</span> <span class="n">is_satisfiable</span><span class="o">]</span> <span class="bp">;</span> <span class="n">apply_instance</span>
<span class="kn">end</span>
</pre></div>

<a name="124870219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124870219" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124870219">Simon Hudon (Apr 10 2018 at 04:59)</a>:</h4>
<p>Not very concise but less repetitive</p>

<a name="124870361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124870361" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124870361">Simon Hudon (Apr 10 2018 at 05:04)</a>:</h4>
<p>As a side note: I suggest you pick more obvious names -- that is, names whose meaning is obvious rather than names that are easy to pick -- that names such as <code>knst</code>. I feel overly short names pose a puzzle to the reader.</p>

<a name="124870419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124870419" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124870419">Nima (Apr 10 2018 at 05:07)</a>:</h4>
<p>Thanks a lot, seems something I can use often.<br>
Regarding <code>refine</code>, I found this:</p>
<blockquote>
<p>The refine tactic applies the expression in question to the goal, but leaves any remaining metavariables for us to fill</p>
</blockquote>
<p>Is that what you are trying to do?<br>
How does <code>refine</code> knows inside <code>(..)</code> is supposed to be definition of <code>is_satisfiable</code> and so it can fill all the <code>_</code>?</p>

<a name="124870519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124870519" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124870519">Nima (Apr 10 2018 at 05:11)</a>:</h4>
<blockquote>
<p>As a side note: I suggest you pick more ...</p>
</blockquote>
<p>Sometimes I think I might be sick, since I prefer <code>stt</code> and <code>nst</code> over <code>strict</code> and <code>non_strict</code>, mainly because when you write them in two consecutive lines, they are nicely aligned! <span class="emoji emoji-1f643" title="upside down face">:upside_down_face:</span></p>

<a name="124870612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124870612" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124870612">Simon Hudon (Apr 10 2018 at 05:14)</a>:</h4>
<p>Yes that's what I'm trying to do. Think of refine as applying type inference to <code>(if ... then _ else ... :  decidable (is_satisfiable c))</code>. Before we start, we don't know the type of <code>_</code> but then, we use the type of <code>dite</code> (the <code>if _ then _ else _</code> function) and we can figure out that <code>_</code> has type <code>decidable (is_satisfiable c)</code>. When we're done with type inference / type checking, we still don't know a term (or proof) to assign to <code>_</code> so building such a term becomes the goal of a subproof.</p>

<a name="124870621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124870621" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124870621">Simon Hudon (Apr 10 2018 at 05:15)</a>:</h4>
<p>Symbols that line up do look nice! As a compromise, you may consider padding with spaces</p>

<a name="124870724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124870724" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124870724">Nima (Apr 10 2018 at 05:19)</a>:</h4>
<p>OK, I copy-pasted your suggestion and I am receiving the following error (highlighted below the first <code>;</code>), is this a version issue? (I am on 3.3.0)</p>
<div class="codehilite"><pre><span></span><span class="n">Tactic</span> <span class="n">State</span>
<span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">number</span> <span class="n">α</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">constraint</span> <span class="n">α</span>
<span class="err">⊢</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">is_satisfiable</span> <span class="n">c</span><span class="o">)</span>


<span class="n">don&#39;t</span> <span class="n">know</span> <span class="n">how</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">placeholder</span>
<span class="kn">context</span><span class="o">:</span>
<span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">number</span> <span class="n">α</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">constraint</span> <span class="n">α</span><span class="o">,</span>
<span class="n">ht</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">is_trivial</span> <span class="n">c</span><span class="o">,</span>
<span class="bp">_</span><span class="n">match</span> <span class="o">:</span> <span class="n">option</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">is_satisfiable</span> <span class="n">c</span><span class="o">)</span>
<span class="err">⊢</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">is_satisfiable</span> <span class="n">c</span><span class="o">)</span>
<span class="n">state</span><span class="o">:</span>
<span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">number</span> <span class="n">α</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">constraint</span> <span class="n">α</span>
<span class="err">⊢</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">is_satisfiable</span> <span class="n">c</span><span class="o">)</span>
</pre></div>

<a name="124870774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124870774" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124870774">Mario Carneiro (Apr 10 2018 at 05:21)</a>:</h4>
<p>I don't think your approach will work, Simon. First of all, <code>match</code> and <code>let match</code> have a tendency to be insulated from pexpr metavariable generation, so that they end up being immediate (term) goals even if they appear in a <code>refine</code></p>

<a name="124870822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124870822" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124870822">Mario Carneiro (Apr 10 2018 at 05:22)</a>:</h4>
<p>Second, it is important for Nima's proof approach that the <code> number.max α </code> argument be exposed at the point of the <code>match</code>/<code>cases</code>, otherwise it won't be generalized. That means that the <code>unfold is_satisfiable</code> command has to come <em>before</em> the match attempt</p>

<a name="124870826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124870826" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124870826">Simon Hudon (Apr 10 2018 at 05:22)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I think you're right.</p>
<p><span class="user-mention" data-user-id="112062">@Nima</span> Would you mind using <a href="https://gist.github.com/" target="_blank" title="https://gist.github.com/">https://gist.github.com/</a> to share all the definitions needed to make the example work?</p>

<a name="124870878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124870878" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124870878">Simon Hudon (Apr 10 2018 at 05:24)</a>:</h4>
<p>I'll try to make a proof work on my side and get back to you</p>

<a name="124871580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124871580" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124871580">Nima (Apr 10 2018 at 05:51)</a>:</h4>
<p>Here is a link<br>
<strong><a href="https://github.com/nima-roohi/lets-learn-some-lean" target="_blank" title="https://github.com/nima-roohi/lets-learn-some-lean">lets-learn-some-lean</a></strong></p>

<a name="124871630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124871630" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124871630">Mario Carneiro (Apr 10 2018 at 05:53)</a>:</h4>
<p>In <code>number.lean</code>, you almost certainly want <code>:</code> instead of <code>:=</code> in the fields <code> neg₀</code> etc</p>

<a name="124871678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124871678" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124871678">Nima (Apr 10 2018 at 05:55)</a>:</h4>
<p>Sure,  thanks,</p>

<a name="124872748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124872748" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124872748">Simon Hudon (Apr 10 2018 at 06:33)</a>:</h4>
<p>Here's my next suggestion:</p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span>  <span class="n">is_satisfiable_is_decidable</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">constraint</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
<span class="n">decidable</span> <span class="o">(</span><span class="n">is_satisfiable</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">refine</span> <span class="o">(</span> <span class="k">if</span> <span class="n">ht</span> <span class="o">:</span> <span class="n">is_trivial</span>     <span class="n">c</span> <span class="k">then</span> <span class="bp">_</span>
            <span class="k">else</span> <span class="k">if</span> <span class="n">hs</span> <span class="o">:</span> <span class="n">is_nonstrict</span>   <span class="n">c</span> <span class="k">then</span> <span class="bp">_</span>
            <span class="k">else</span> <span class="k">if</span> <span class="n">hl</span> <span class="o">:</span> <span class="n">is_lower_bound</span> <span class="n">c</span> <span class="k">then</span>
                <span class="bp">_</span>
            <span class="k">else</span>
                <span class="bp">_</span> <span class="o">)</span>
   <span class="bp">;</span> <span class="n">simp</span> <span class="o">[</span><span class="bp">*</span><span class="o">,</span> <span class="n">is_satisfiable</span><span class="o">]</span>
   <span class="bp">;</span> <span class="n">try</span> <span class="o">{</span> <span class="n">generalize</span> <span class="o">:</span> <span class="n">number</span><span class="bp">.</span><span class="n">max</span> <span class="n">α</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span> <span class="n">cases</span> <span class="n">x</span><span class="o">,</span> <span class="o">}</span>
   <span class="bp">;</span> <span class="n">try</span> <span class="o">{</span> <span class="n">generalize</span> <span class="o">:</span> <span class="n">number</span><span class="bp">.</span><span class="n">min</span> <span class="n">α</span> <span class="bp">=</span> <span class="n">x</span><span class="o">,</span> <span class="n">cases</span> <span class="n">x</span><span class="o">,</span> <span class="o">}</span>
   <span class="bp">;</span> <span class="n">try</span> <span class="o">{</span> <span class="n">simp</span> <span class="o">[</span><span class="bp">*</span><span class="o">,</span> <span class="n">is_satisfiable</span><span class="o">]</span> <span class="o">}</span>
   <span class="bp">;</span> <span class="n">apply_instance</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="124872756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124872756" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124872756">Simon Hudon (Apr 10 2018 at 06:33)</a>:</h4>
<p>It could work without the <code>generalize</code>s but it would produce many more cases</p>

<a name="124872798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124872798" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124872798">Mario Carneiro (Apr 10 2018 at 06:34)</a>:</h4>
<p>why is that?</p>

<a name="124872799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124872799" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124872799">Mario Carneiro (Apr 10 2018 at 06:34)</a>:</h4>
<p>also isn't the first <code>simp</code> redundant?</p>

<a name="124872801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124872801" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124872801">Simon Hudon (Apr 10 2018 at 06:34)</a>:</h4>
<p>Yeah, I just noticed that</p>

<a name="124872807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124872807" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124872807">Mario Carneiro (Apr 10 2018 at 06:35)</a>:</h4>
<p>also the parens around the <code>refine</code> should be unnecessary</p>

<a name="124872808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124872808" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124872808">Simon Hudon (Apr 10 2018 at 06:35)</a>:</h4>
<p>I mean: which first <code>simp</code>?</p>

<a name="124872859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124872859" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124872859">Simon Hudon (Apr 10 2018 at 06:37)</a>:</h4>
<blockquote>
<p>also the parens around the <code>refine</code> should be unnecessary</p>
</blockquote>
<p>I think it might create a precedence problem with <code>;</code></p>

<a name="124872982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124872982" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124872982">Simon Hudon (Apr 10 2018 at 06:41)</a>:</h4>
<p>To answer your first question: it generates many more cases because we only need <code>cases number.max α</code> (resp. <code>cases number.min α</code>) in one branch out of four so, at the first <code>try</code>, without the <code>generalize</code>, we end up with <code>8</code> cases instead of <code>5</code> and, at the second try, we end up with <code>16</code> cases instead of <code>6</code>. We don't see all those cases but somehow knowing that they're there would give me nightmares</p>

<a name="124873026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873026">Mario Carneiro (Apr 10 2018 at 06:42)</a>:</h4>
<p>does <code>generalize</code> fail if the target expression is not present?</p>

<a name="124873080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873080" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873080">Simon Hudon (Apr 10 2018 at 06:44)</a>:</h4>
<p><code>generalize : number.max α = x</code> does but not <code>generalize h : number.max α = x</code></p>

<a name="124873185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873185" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873185">Simon Hudon (Apr 10 2018 at 06:48)</a>:</h4>
<p>I kind of like this use of <code>refine</code>. Maybe a tactic such as <code>if_then_else [is_trivial c,is_nonstrict c,is_lower_bound c]</code> would be nicer though.</p>

<a name="124873190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873190" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873190">Mario Carneiro (Apr 10 2018 at 06:49)</a>:</h4>
<p>A remark on theorems like this, where you have to go through all the cases in your original definition: You have to do this every time you want to prove anything about <code>is_satisfiable</code>, which is why I prefer to write a custom recursor that does the match splits for you. You can then use it to define <code>is_satisfiable</code> itself, as well as theorems proving properties about it</p>

<a name="124873193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873193" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873193">Simon Hudon (Apr 10 2018 at 06:49)</a>:</h4>
<p>That make sense. Do you also write a tactic to apply the recursor?</p>

<a name="124873194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873194" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873194">Mario Carneiro (Apr 10 2018 at 06:50)</a>:</h4>
<p><code>by_cases</code> is the tactic version of <code>if then else</code></p>

<a name="124873237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873237" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873237">Simon Hudon (Apr 10 2018 at 06:50)</a>:</h4>
<p>Can you give it multiple conditions?</p>

<a name="124873238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873238" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873238">Mario Carneiro (Apr 10 2018 at 06:50)</a>:</h4>
<p>Not usually, I will either write it explicitly as a term or use <code>apply is_satisfiable.rec</code></p>

<a name="124873239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873239" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873239">Mario Carneiro (Apr 10 2018 at 06:50)</a>:</h4>
<p>no</p>

<a name="124873246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873246" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873246">Mario Carneiro (Apr 10 2018 at 06:51)</a>:</h4>
<p>I'm not convinced you will always have this structure anyway; it seems like it's best just to nest the <code>by_cases</code> applications</p>

<a name="124873287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873287">Mario Carneiro (Apr 10 2018 at 06:52)</a>:</h4>
<p>you could also have <code>if h1 then if h2 then e1 else e2 else e3</code></p>

<a name="124873419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873419" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873419">Nima (Apr 10 2018 at 06:58)</a>:</h4>
<p>Thank you for the solution.<br>
By actually doing it, I can see <code>cases number.max α</code> creates a lot more cases than <code>generalize : number.max α = x, cases x</code>. But why (aren't they both cases on <code>none</code> and <code>some _</code>)?</p>

<a name="124873477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873477" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873477">Simon Hudon (Apr 10 2018 at 07:00)</a>:</h4>
<p>In <code>generalize : number.max α = x, cases x</code>, <code>generalize : number.max α = x</code> fails if <code>number.max α</code> is not used in the goal and therefore <code>cases x</code> doesn't get executed. It's a complicated way of saying <code>cases number.max α</code> but only if I actually use <code>number.max α</code></p>

<a name="124873546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873546" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873546">Nima (Apr 10 2018 at 07:03)</a>:</h4>
<p>I see,<br>
Also, is this <strong>recuroser</strong> a concept in lean or Haskell?</p>
<blockquote>
<p>... which is why I prefer to write a custom recursor that does the match splits for you. ...</p>
</blockquote>
<p>Theorem Proving in Lean, Section 7.1</p>
<blockquote>
<p>... It is also known as a recursor, and it is what makes the type “inductive” ...</p>
</blockquote>
<p>??</p>

<a name="124873547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873547" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873547">Simon Hudon (Apr 10 2018 at 07:03)</a>:</h4>
<p>By the time it is used, <code>number.max α</code> has disappeared from all but one goal</p>

<a name="124873636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873636" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873636">Simon Hudon (Apr 10 2018 at 07:06)</a>:</h4>
<p>The recursor is a Lean and dependent type theory concept</p>

<a name="124873689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873689" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873689">Simon Hudon (Apr 10 2018 at 07:09)</a>:</h4>
<p>In Lean, an inductive type definition is not a first class citizen. It is translated into a bunch of constants and definitions.</p>

<a name="124873691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873691" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873691">Simon Hudon (Apr 10 2018 at 07:09)</a>:</h4>
<p>Let's take a look at:</p>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">my_option</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
 <span class="bp">|</span> <span class="n">none</span> <span class="o">:</span> <span class="n">my_option</span>
 <span class="bp">|</span> <span class="n">some</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">my_option</span>
</pre></div>

<a name="124873696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873696">Sean Leather (Apr 10 2018 at 07:09)</a>:</h4>
<p>It's not limited to dependent types, of course. <span class="emoji emoji-1f642" title="simple smile">:simple_smile:</span></p>

<a name="124873741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873741" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873741">Simon Hudon (Apr 10 2018 at 07:10)</a>:</h4>
<p>Thanks for the precision!</p>

<a name="124873747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873747" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873747">Sean Leather (Apr 10 2018 at 07:11)</a>:</h4>
<p>Gotta keep you on your toes. <span class="emoji emoji-1f609" title="wink">:wink:</span></p>

<a name="124873752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873752" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873752">Simon Hudon (Apr 10 2018 at 07:11)</a>:</h4>
<p>If we type in </p>
<div class="codehilite"><pre><span></span><span class="bp">#</span><span class="kn">print</span> <span class="kn">prefix</span> <span class="n">my_option</span>
</pre></div>


<p>we see the constants and definitions that <code>my_option</code> is translated into</p>

<a name="124873906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873906">Simon Hudon (Apr 10 2018 at 07:17)</a>:</h4>
<p>Sean will correct me if I'm wrong but I think only three of them are constants: two constructors</p>
<div class="codehilite"><pre><span></span>my_option.none : Π (α : Type u_1), my_option α
my_option.some : Π {α : Type u_1}, α → my_option α
</pre></div>


<p>and one recursor</p>
<div class="codehilite"><pre><span></span>my_option.cases_on : Π {α : Type u_1} {C : my_option α → Sort l} (n : my_option α),
  C (my_option.none α) → (Π (a : α), C (my_option.some a)) → C n
</pre></div>


<p>(I just realized that <code>no_confusion</code> is actually a definition)</p>

<a name="124873964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124873964" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124873964">Simon Hudon (Apr 10 2018 at 07:19)</a>:</h4>
<p>The recursor basically tells you how to pattern match on <code>my_option</code>. When you pattern match on <code>opt : my_option α</code>, you're constructing a value of <code>C opt</code> (for some <code>C</code>) and you have to provide a way to construct <code>C opt</code> in the case where <code>opt</code> is <code>none</code> and in the case where <code>opt</code> is <code>some a</code></p>

<a name="124874009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874009" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874009">Mario Carneiro (Apr 10 2018 at 07:20)</a>:</h4>
<p>Actually the constant is <code>my_option.rec_on</code>, and of course <code>my_option</code> itself is also a constant</p>

<a name="124874019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874019" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874019">Gabriel Ebner (Apr 10 2018 at 07:21)</a>:</h4>
<p><code>rec_on</code> should be a definition as well.  <code>rec</code> is the recursor constant.</p>

<a name="124874021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874021" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874021">Simon Hudon (Apr 10 2018 at 07:21)</a>:</h4>
<p>Aren't <code>rec_on</code> and <code>cases_on</code> defined in term of each other?</p>

<a name="124874026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874026">Mario Carneiro (Apr 10 2018 at 07:21)</a>:</h4>
<p><code>rec_on</code> and <code>cases_on</code> are the same for a nonrecursive inductive type</p>

<a name="124874078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874078" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874078">Simon Hudon (Apr 10 2018 at 07:23)</a>:</h4>
<p>What I mean is, for recursive inductive types, do we actually have two separate constants for <code>cases</code> and <code>rec</code>?</p>

<a name="124874127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874127" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874127">Mario Carneiro (Apr 10 2018 at 07:25)</a>:</h4>
<p>there is no <code>cases</code> for some reason, just <code>cases_on</code>, and no, <code>rec</code> is the only elimination-like constant, <code>cases_on</code> just ignores the inductive hypotheses</p>

<a name="124874175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874175" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874175">Kevin Buzzard (Apr 10 2018 at 07:26)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> <a href="https://xenaproject.wordpress.com/2018/03/24/no-confusion-over-no_confusion/" target="_blank" title="https://xenaproject.wordpress.com/2018/03/24/no-confusion-over-no_confusion/">https://xenaproject.wordpress.com/2018/03/24/no-confusion-over-no_confusion/</a> -- <code>no_confusion</code> is defined in terms of the eliminator, but I always found the definition rather obscure. I wrote some notes about it in the link.</p>

<a name="124874176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874176" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874176">Simon Hudon (Apr 10 2018 at 07:26)</a>:</h4>
<p>Ok, that's what I thought. So I cut some cornets in my explanation by making it about <code>cases_on</code> instead of <code>rec</code></p>

<a name="124874189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874189" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874189">Simon Hudon (Apr 10 2018 at 07:27)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Thanks! I was sure it had to be postulated too. I guess i got confused <span class="emoji emoji-1f61d" title="stuck out tongue closed eyes">:stuck_out_tongue_closed_eyes:</span></p>

<a name="124874229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874229" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874229">Sean Leather (Apr 10 2018 at 07:28)</a>:</h4>
<p>Just for the sake of completeness and posterity, is this what everybody is seeing after <code>#print prefix my_option</code>?</p>
<div class="codehilite"><pre><span></span><span class="n">my_option</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">u_1</span>
<span class="n">my_option</span><span class="bp">.</span><span class="n">cases_on</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">my_option</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">Sort</span> <span class="n">l</span><span class="o">}</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">my_option</span> <span class="n">α</span><span class="o">),</span>
  <span class="n">C</span> <span class="o">(</span><span class="n">my_option</span><span class="bp">.</span><span class="n">none</span> <span class="n">α</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">Π</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">C</span> <span class="o">(</span><span class="n">my_option</span><span class="bp">.</span><span class="n">some</span> <span class="n">a</span><span class="o">))</span> <span class="bp">→</span> <span class="n">C</span> <span class="n">n</span>
<span class="n">my_option</span><span class="bp">.</span><span class="n">has_sizeof_inst</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">)</span> <span class="o">[</span><span class="n">α_inst</span> <span class="o">:</span> <span class="n">has_sizeof</span> <span class="n">α</span><span class="o">],</span> <span class="n">has_sizeof</span> <span class="o">(</span><span class="n">my_option</span> <span class="n">α</span><span class="o">)</span>
<span class="n">my_option</span><span class="bp">.</span><span class="n">no_confusion</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">{</span><span class="n">P</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">l</span><span class="o">}</span> <span class="o">{</span><span class="n">v1</span> <span class="n">v2</span> <span class="o">:</span> <span class="n">my_option</span> <span class="n">α</span><span class="o">},</span> <span class="n">v1</span> <span class="bp">=</span> <span class="n">v2</span> <span class="bp">→</span> <span class="n">my_option</span><span class="bp">.</span><span class="n">no_confusion_type</span> <span class="n">P</span> <span class="n">v1</span> <span class="n">v2</span>
<span class="n">my_option</span><span class="bp">.</span><span class="n">no_confusion_type</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">},</span> <span class="n">Sort</span> <span class="n">l</span> <span class="bp">→</span> <span class="n">my_option</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">my_option</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">Sort</span> <span class="n">l</span>
<span class="n">my_option</span><span class="bp">.</span><span class="n">none</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">),</span> <span class="n">my_option</span> <span class="n">α</span>
<span class="n">my_option</span><span class="bp">.</span><span class="n">none</span><span class="bp">.</span><span class="n">inj</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">},</span> <span class="n">my_option</span><span class="bp">.</span><span class="n">none</span> <span class="n">α</span> <span class="bp">=</span> <span class="n">my_option</span><span class="bp">.</span><span class="n">none</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">true</span>
<span class="n">my_option</span><span class="bp">.</span><span class="n">none</span><span class="bp">.</span><span class="n">inj_arrow</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">},</span> <span class="n">my_option</span><span class="bp">.</span><span class="n">none</span> <span class="n">α</span> <span class="bp">=</span> <span class="n">my_option</span><span class="bp">.</span><span class="n">none</span> <span class="n">α</span> <span class="bp">→</span> <span class="bp">Π</span> <span class="o">⦃</span><span class="n">P</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">l</span><span class="o">⦄,</span> <span class="o">(</span><span class="n">true</span> <span class="bp">→</span> <span class="n">P</span><span class="o">)</span> <span class="bp">→</span> <span class="n">P</span>
<span class="n">my_option</span><span class="bp">.</span><span class="n">none</span><span class="bp">.</span><span class="n">inj_eq</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">},</span> <span class="n">my_option</span><span class="bp">.</span><span class="n">none</span> <span class="n">α</span> <span class="bp">=</span> <span class="n">my_option</span><span class="bp">.</span><span class="n">none</span> <span class="n">α</span> <span class="bp">=</span> <span class="n">true</span>
<span class="n">my_option</span><span class="bp">.</span><span class="n">none</span><span class="bp">.</span><span class="n">sizeof_spec</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">)</span> <span class="o">[</span><span class="n">α_inst</span> <span class="o">:</span> <span class="n">has_sizeof</span> <span class="n">α</span><span class="o">],</span> <span class="n">my_option</span><span class="bp">.</span><span class="n">sizeof</span> <span class="n">α</span> <span class="o">(</span><span class="n">my_option</span><span class="bp">.</span><span class="n">none</span> <span class="n">α</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span>
<span class="n">my_option</span><span class="bp">.</span><span class="n">rec</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">my_option</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">Sort</span> <span class="n">l</span><span class="o">},</span>
  <span class="n">C</span> <span class="o">(</span><span class="n">my_option</span><span class="bp">.</span><span class="n">none</span> <span class="n">α</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">Π</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">C</span> <span class="o">(</span><span class="n">my_option</span><span class="bp">.</span><span class="n">some</span> <span class="n">a</span><span class="o">))</span> <span class="bp">→</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">my_option</span> <span class="n">α</span><span class="o">),</span> <span class="n">C</span> <span class="n">n</span>
<span class="n">my_option</span><span class="bp">.</span><span class="n">rec_on</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">my_option</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">Sort</span> <span class="n">l</span><span class="o">}</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">my_option</span> <span class="n">α</span><span class="o">),</span>
  <span class="n">C</span> <span class="o">(</span><span class="n">my_option</span><span class="bp">.</span><span class="n">none</span> <span class="n">α</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">Π</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">C</span> <span class="o">(</span><span class="n">my_option</span><span class="bp">.</span><span class="n">some</span> <span class="n">a</span><span class="o">))</span> <span class="bp">→</span> <span class="n">C</span> <span class="n">n</span>
<span class="n">my_option</span><span class="bp">.</span><span class="n">sizeof</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">)</span> <span class="o">[</span><span class="n">α_inst</span> <span class="o">:</span> <span class="n">has_sizeof</span> <span class="n">α</span><span class="o">],</span> <span class="n">my_option</span> <span class="n">α</span> <span class="bp">→</span> <span class="bp">ℕ</span>
<span class="n">my_option</span><span class="bp">.</span><span class="n">some</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">},</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">my_option</span> <span class="n">α</span>
<span class="n">my_option</span><span class="bp">.</span><span class="n">some</span><span class="bp">.</span><span class="n">inj</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="n">a_1</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span> <span class="n">my_option</span><span class="bp">.</span><span class="n">some</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">my_option</span><span class="bp">.</span><span class="n">some</span> <span class="n">a_1</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a_1</span>
<span class="n">my_option</span><span class="bp">.</span><span class="n">some</span><span class="bp">.</span><span class="n">inj_arrow</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="n">a_1</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span> <span class="n">my_option</span><span class="bp">.</span><span class="n">some</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">my_option</span><span class="bp">.</span><span class="n">some</span> <span class="n">a_1</span> <span class="bp">→</span> <span class="bp">Π</span> <span class="o">⦃</span><span class="n">P</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">l</span><span class="o">⦄,</span> <span class="o">(</span><span class="n">a</span> <span class="bp">=</span> <span class="n">a_1</span> <span class="bp">→</span> <span class="n">P</span><span class="o">)</span> <span class="bp">→</span> <span class="n">P</span>
<span class="n">my_option</span><span class="bp">.</span><span class="n">some</span><span class="bp">.</span><span class="n">inj_eq</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="n">a_1</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span> <span class="n">my_option</span><span class="bp">.</span><span class="n">some</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">my_option</span><span class="bp">.</span><span class="n">some</span> <span class="n">a_1</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">=</span> <span class="n">a_1</span><span class="o">)</span>
<span class="n">my_option</span><span class="bp">.</span><span class="n">some</span><span class="bp">.</span><span class="n">sizeof_spec</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">)</span> <span class="o">[</span><span class="n">α_inst</span> <span class="o">:</span> <span class="n">has_sizeof</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">my_option</span><span class="bp">.</span><span class="n">sizeof</span> <span class="n">α</span> <span class="o">(</span><span class="n">my_option</span><span class="bp">.</span><span class="n">some</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">sizeof</span> <span class="n">a</span>
</pre></div>

<a name="124874240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874240" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874240">Simon Hudon (Apr 10 2018 at 07:29)</a>:</h4>
<p>Yes</p>

<a name="124874243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874243" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874243">Sean Leather (Apr 10 2018 at 07:29)</a>:</h4>
<p>Awesome. I haven't upgraded Lean in a while, so some things may have changed. <span class="emoji emoji-1f642" title="simple smile">:simple_smile:</span></p>

<a name="124874244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874244" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874244">Simon Hudon (Apr 10 2018 at 07:29)</a>:</h4>
<p>Or rather, until other people answer: I don't know</p>

<a name="124874245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874245" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874245">Kevin Buzzard (Apr 10 2018 at 07:29)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> here's an indication that it doesn't have to be postulated -- once you have <code>cases</code> for <code>nat</code> you can define <code>is_zero</code> by <code>is_zero 0 = tt</code> and <code>is_zero (succ n) = ff</code> and then prove that zero can't be a successor that way.</p>

<a name="124874287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874287">Kevin Buzzard (Apr 10 2018 at 07:30)</a>:</h4>
<p>Is this what _everybody_ is seeing??</p>

<a name="124874290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874290" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874290">Kevin Buzzard (Apr 10 2018 at 07:30)</a>:</h4>
<p>I don't know either.</p>

<a name="124874297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874297" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874297">Sean Leather (Apr 10 2018 at 07:30)</a>:</h4>
<p>One response was enough for me, it seems.</p>

<a name="124874298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874298" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874298">Kevin Buzzard (Apr 10 2018 at 07:30)</a>:</h4>
<p>[i.e. it's what I am seeing]</p>

<a name="124874302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874302" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874302">Kenny Lau (Apr 10 2018 at 07:30)</a>:</h4>
<blockquote>
<p>Is this what _everybody_ is seeing??</p>
</blockquote>
<p>we all know you teach m1f</p>

<a name="124874311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874311" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874311">Simon Hudon (Apr 10 2018 at 07:31)</a>:</h4>
<p>I don't. What is m1f?</p>

<a name="124874312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874312" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874312">Sean Leather (Apr 10 2018 at 07:31)</a>:</h4>
<p>I only required an extistential result, rather than a universal quantification.</p>

<a name="124874317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874317" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874317">Kevin Buzzard (Apr 10 2018 at 07:31)</a>:</h4>
<p>m1f = introduction to proof course</p>

<a name="124874358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874358" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874358">Kenny Lau (Apr 10 2018 at 07:32)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> one should probably change the course name then</p>

<a name="124874359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874359" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874359">Simon Hudon (Apr 10 2018 at 07:32)</a>:</h4>
<p>So let's rephrase then: does there exist a participant other than myself that also sees the following output ... ?</p>

<a name="124874360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874360" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874360">Kevin Buzzard (Apr 10 2018 at 07:32)</a>:</h4>
<p>Yes.</p>

<a name="124874361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874361" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874361">Nima (Apr 10 2018 at 07:32)</a>:</h4>
<p>Yes</p>

<a name="124874422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874422" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874422">Sean Leather (Apr 10 2018 at 07:34)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> I think it's not only the <a href="#narrow/stream/113488-general/subject/constructing.20proofs.20by.20hand/near/124872856" title="#narrow/stream/113488-general/subject/constructing.20proofs.20by.20hand/near/124872856">dictionary</a> that uses English to describe English. We also do that here.</p>

<a name="124874443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874443" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874443">Kenny Lau (Apr 10 2018 at 07:35)</a>:</h4>
<p>doom day's clock is ticking</p>

<a name="124874490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874490" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874490">Sean Leather (Apr 10 2018 at 07:36)</a>:</h4>
<p><span class="user-mention" data-user-id="112062">@Nima</span> I'm just curious what your background is relevant to Lean. Have you worked with functional programming or proof assistants?</p>

<a name="124874634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874634" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874634">Simon Hudon (Apr 10 2018 at 07:40)</a>:</h4>
<p>Alright! Enough excitement for today. I have to wake up in a few hours and get back to writing. Good &lt;&lt;insert current period of the day of your timezone here&gt;&gt; everyone!</p>

<a name="124874652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874652" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874652">Sean Leather (Apr 10 2018 at 07:41)</a>:</h4>
<p>And good night to you, <span class="user-mention" data-user-id="110026">@Simon Hudon</span>!</p>

<a name="124874654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874654" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874654">Moses Schönfinkel (Apr 10 2018 at 07:41)</a>:</h4>
<p>Good night. <span class="user-mention" data-user-id="110045">@Sean Leather</span> has returned too, neat! Hello.</p>

<a name="124874656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874656" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874656">Kevin Buzzard (Apr 10 2018 at 07:41)</a>:</h4>
<p>You can check time zones on Zulip I noticed.</p>

<a name="124874658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874658" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874658">Kenny Lau (Apr 10 2018 at 07:41)</a>:</h4>
<p>interesting</p>

<a name="124874661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874661" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874661">Sean Leather (Apr 10 2018 at 07:41)</a>:</h4>
<p><span class="user-mention" data-user-id="110027">@Moses Schönfinkel</span> Hello, hello! You don't have any news on Lean 5 to tell me about, do you? <span class="emoji emoji-1f61f" title="worried">:worried:</span></p>

<a name="124874663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874663" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874663">Kevin Buzzard (Apr 10 2018 at 07:41)</a>:</h4>
<p>click on the down-arrow which appears when you mouse over a person's name on the right</p>

<a name="124874703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874703" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874703">Kevin Buzzard (Apr 10 2018 at 07:42)</a>:</h4>
<p>and you see their local time</p>

<a name="124874704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874704" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874704">Moses Schönfinkel (Apr 10 2018 at 07:42)</a>:</h4>
<p>I have been having some issues with my crystal ball ever since my cat cracked it.</p>

<a name="124874706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874706" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874706">Kevin Buzzard (Apr 10 2018 at 07:42)</a>:</h4>
<p>although Kenny went from Lon to HK and didn't update his</p>

<a name="124874708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874708" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874708">Nima (Apr 10 2018 at 07:42)</a>:</h4>
<blockquote>
<p>functional programming:</p>
</blockquote>
<p>Only Scala, which based on what I see, I would not be surprised if people find it insulting that I put Scala and FP side by side ;)</p>
<blockquote>
<p>proof assistants</p>
</blockquote>
<p>I worked with PVS, for example, I have a paper in which I said something is wrong and this is the right version. In order to be more confident, I proved some of the stuff in PVS (about 25K proof commands, which of course could be very inefficient proofs)</p>

<a name="124874716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874716" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874716">Kenny Lau (Apr 10 2018 at 07:43)</a>:</h4>
<blockquote>
<p>although Kenny went from Lon to HK and didn't update his</p>
</blockquote>
<p>done</p>

<a name="124874766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874766" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874766">Moses Schönfinkel (Apr 10 2018 at 07:44)</a>:</h4>
<p>Scala is the best way to target JVM.</p>

<a name="124874825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874825" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874825">Simon Hudon (Apr 10 2018 at 07:46)</a>:</h4>
<p><span class="user-mention" data-user-id="112062">@Nima</span> Would you mind giving us a reference to your paper? I did some PVS too and I'd like to see what you did</p>

<a name="124874898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874898" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874898">Nima (Apr 10 2018 at 07:50)</a>:</h4>
<p>Revisiting MITL to Fix Decision Procedures <br>
<a href="https://link.springer.com/chapter/10.1007/978-3-319-73721-8_22" target="_blank" title="https://link.springer.com/chapter/10.1007/978-3-319-73721-8_22">https://link.springer.com/chapter/10.1007/978-3-319-73721-8_22</a><br>
Proofs can be found here (link is also in the paper)<br>
<a href="http://uofi.box.com/v/PVSProofsOfMITL" target="_blank" title="http://uofi.box.com/v/PVSProofsOfMITL">http://uofi.box.com/v/PVSProofsOfMITL</a></p>

<a name="124874946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874946" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874946">Simon Hudon (Apr 10 2018 at 07:50)</a>:</h4>
<p>Thanks!</p>

<a name="124874949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124874949" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124874949">Simon Hudon (Apr 10 2018 at 07:50)</a>:</h4>
<p>Ok, now I'm really off</p>

<a name="124899110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124899110" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124899110">Nima (Apr 10 2018 at 19:26)</a>:</h4>
<p>I have a type <code>constraint</code> which represents something like <code>bnd &lt; x</code> or <code>x &lt; bnd</code>.<br>
I have a function <code>sem</code> (semantics) that receives a constraint as input and return a predicate one <code>ℕ</code> as output (the set of values satisfied by the constraint). Let <code>c</code> be a constraint. I would like to be able to write <code>x : c</code>. For that, I have the following code, but I am not sure about <code>{x // sem S x}</code>. Is there a mistake or a better way there?</p>
<div class="codehilite"><pre><span></span><span class="kn">open</span> <span class="n">nat</span>

<span class="kn">inductive</span> <span class="n">constraint</span>
<span class="bp">|</span> <span class="n">low</span> <span class="o">(</span><span class="n">bnd</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">upp</span> <span class="o">(</span><span class="n">bnd</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="kn">open</span> <span class="n">constraint</span>

<span class="n">def</span> <span class="n">sem</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">constraint</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="k">match</span> <span class="n">c</span> <span class="k">with</span>
<span class="bp">|</span> <span class="n">low</span> <span class="n">bnd</span> <span class="o">:=</span> <span class="n">bnd</span> <span class="bp">&lt;</span> <span class="n">a</span>
<span class="bp">|</span> <span class="n">upp</span> <span class="n">bnd</span> <span class="o">:=</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">bnd</span>
<span class="kn">end</span>

<span class="kn">instance</span> <span class="n">constraint_to_pred</span> <span class="o">:</span>
  <span class="n">has_coe</span> <span class="o">(</span><span class="n">constraint</span><span class="o">)</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">⟨λ</span> <span class="n">c</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="n">sem</span> <span class="n">c</span> <span class="n">a</span><span class="bp">⟩</span>

<span class="kn">instance</span> <span class="n">constraint_to_sort</span><span class="o">:</span>
  <span class="n">has_coe_to_sort</span> <span class="o">(</span><span class="n">constraint</span> <span class="o">)</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">S</span> <span class="o">:=</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">,</span> <span class="n">coe</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">S</span><span class="o">,</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="n">sem</span> <span class="n">S</span> <span class="n">x</span><span class="o">}}</span>
</pre></div>


<p>If everything is fine, how do I finish the following example:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="o">(</span><span class="n">low</span> <span class="mi">1</span><span class="o">),</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span> <span class="bp">&gt;</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">admit</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="124899250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124899250" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124899250">Simon Hudon (Apr 10 2018 at 19:30)</a>:</h4>
<p>It looks good to me except that I don't know that you actually need the <code>has_coe</code> instance</p>

<a name="124899258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124899258" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124899258">Simon Hudon (Apr 10 2018 at 19:30)</a>:</h4>
<p>For the proof, you can try:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="o">(</span><span class="n">low</span> <span class="mi">1</span><span class="o">),</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span> <span class="bp">&gt;</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">unfold_coes</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">admit</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="124899280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124899280" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124899280">Simon Hudon (Apr 10 2018 at 19:31)</a>:</h4>
<p>It should unfold all the coercions and then you should see a clear way to finishing the proof</p>

<a name="124899441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124899441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124899441">Nima (Apr 10 2018 at 19:35)</a>:</h4>
<p>If I comment the first instance then the second one won't type check (may be because of <code>{x // sem S x}</code> that I prefer not to have any way)</p>
<div class="codehilite"><pre><span></span>type mismatch at field &#39;coe&#39;
  λ (S : constraint), {x // ⁇}
has type
  constraint → Sort (max 1 ?) : Type (max 1 ?)
but is expected to have type
  constraint → Type ? : Type (?+1)
</pre></div>


<p>If I don't comment the first instance then I will receive the following error: <code>unknown identifier 'unfold_coes'</code></p>

<a name="124899492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124899492" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124899492">Simon Hudon (Apr 10 2018 at 19:36)</a>:</h4>
<p>You need <code>import tactic</code></p>

<a name="124899573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124899573" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124899573">Simon Hudon (Apr 10 2018 at 19:39)</a>:</h4>
<p>If you want to remove the first instance, I think you need to change the second to:</p>
<div class="codehilite"><pre><span></span>instance constraint_to_sort:
  has_coe_to_sort (constraint ) :=
  {S := Sort*, coe := λ S, {x // sem S x}}
</pre></div>

<a name="124899844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124899844" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124899844">Nima (Apr 10 2018 at 19:46)</a>:</h4>
<p>OK, I don't know what happened, but removing the first instance does not give me error any more</p>
<blockquote>
<p>You need import tactic</p>
</blockquote>
<p>Do you mean <code>open tactic</code>? Line <code>import init.meta.tactic</code> will type check, but <code>import tactic</code> will not.</p>

<a name="124899858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124899858" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124899858">Simon Hudon (Apr 10 2018 at 19:47)</a>:</h4>
<p>You're not using <code>leanpkg</code> and <code>mathlib</code> right? Now would be a good time to bring them in</p>

<a name="124899909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124899909" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124899909">Simon Hudon (Apr 10 2018 at 19:48)</a>:</h4>
<p>In a terminal where your sources are, type in:</p>
<div class="codehilite"><pre><span></span>leanpkg init lets-learn-some-lean
leanpkg add leanprover/mathlib
</pre></div>

<a name="124902193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124902193" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124902193">Nima (Apr 10 2018 at 20:42)</a>:</h4>
<p>OK, I have imported tactic. But I still receive the same error.</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">interactive</span>
<span class="kn">open</span> <span class="n">nat</span>

<span class="kn">inductive</span> <span class="n">constraint</span>
<span class="bp">|</span> <span class="n">low</span> <span class="o">(</span><span class="n">bnd</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">upp</span> <span class="o">(</span><span class="n">bnd</span><span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="kn">open</span> <span class="n">constraint</span>

<span class="n">def</span> <span class="n">sem</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">constraint</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="k">match</span> <span class="n">c</span> <span class="k">with</span>
<span class="bp">|</span> <span class="n">low</span> <span class="n">bnd</span> <span class="o">:=</span> <span class="n">bnd</span> <span class="bp">&lt;</span> <span class="n">a</span>
<span class="bp">|</span> <span class="n">upp</span> <span class="n">bnd</span> <span class="o">:=</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">bnd</span>
<span class="kn">end</span>

<span class="c1">-- this instance seems redundant for now</span>
<span class="kn">instance</span> <span class="n">constraint_to_pred</span> <span class="o">:</span>
  <span class="n">has_coe</span> <span class="o">(</span><span class="n">constraint</span><span class="o">)</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">⟨λ</span> <span class="n">c</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="n">sem</span> <span class="n">c</span> <span class="n">a</span><span class="bp">⟩</span>

<span class="kn">instance</span> <span class="n">constraint_to_sort</span><span class="o">:</span>
  <span class="n">has_coe_to_sort</span> <span class="o">(</span><span class="n">constraint</span> <span class="o">)</span> <span class="o">:=</span>
  <span class="o">{</span><span class="n">S</span> <span class="o">:=</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">,</span> <span class="n">coe</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">S</span><span class="o">,</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="n">sem</span> <span class="n">S</span> <span class="n">x</span><span class="o">}}</span>

<span class="kn">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="o">(</span><span class="n">low</span> <span class="mi">1</span><span class="o">),</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span> <span class="bp">&gt;</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">unfold_coes</span><span class="o">,</span> <span class="c1">-- ERROR: unknown identifier &#39;unfold_coes&#39;</span>
  <span class="n">intro</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">admit</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>I think dependency is successfully created. For example, I can make the following work perfectly fine.</p>
<div class="codehilite"><pre><span></span><span class="kn">variables</span> <span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="o">:</span> <span class="kt">Prop</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">H₁</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">finish</span>
</pre></div>


<p>But no luck with <code>unfold_coes</code></p>

<a name="124970239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124970239" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124970239">Nima (Apr 12 2018 at 06:01)</a>:</h4>
<p>Inside a proof, I have two cases. In case 1, I prove something about lower bound and in case 2, I prove something about upper bound. Each case has multiple steps, but the structure is identical (in order to obtain the second part from the first part, all I need to do is replace word <code>mid</code> with <code>max</code>).<br>
How do I write both these cases without practically writing a part of the proof twice?</p>

<a name="124970283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124970283" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124970283">Kenny Lau (Apr 12 2018 at 06:02)</a>:</h4>
<p>where is the word <code>mid</code> and <code>max</code>?</p>

<a name="124970284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124970284" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124970284">Kenny Lau (Apr 12 2018 at 06:02)</a>:</h4>
<p>could you post your code?</p>

<a name="124970345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124970345" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124970345">Nima (Apr 12 2018 at 06:05)</a>:</h4>
<p>The whole code is too long, but here is the part I was talking about (I just wanted to see what the general approach is in these situations. Do you create a whole new <code>meta</code> function, or you can do something inline):</p>
<div class="codehilite"><pre><span></span>  <span class="n">by_cases</span> <span class="n">is_lower_bound</span> <span class="n">c</span> <span class="k">with</span> <span class="n">hl</span> <span class="bp">;</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hl</span><span class="o">],</span>
  <span class="k">begin</span>
    <span class="k">have</span> <span class="n">hl&#39;</span> <span class="o">:=</span> <span class="n">iff</span><span class="bp">.</span><span class="n">mp</span> <span class="o">(</span><span class="n">is_lower_bound_is_lower</span> <span class="n">c</span> <span class="n">ht</span><span class="o">)</span> <span class="n">hl</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">hm</span> <span class="o">:=</span> <span class="n">number</span><span class="bp">.</span><span class="n">min_prop</span> <span class="n">α</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">number</span><span class="bp">.</span><span class="n">min</span> <span class="n">α</span> <span class="k">with</span> <span class="n">m</span><span class="bp">;</span> <span class="n">unfold</span> <span class="n">min_prop</span> <span class="n">at</span> <span class="n">hm</span><span class="o">,</span>
    <span class="k">begin</span>
      <span class="n">specialize</span> <span class="n">hm</span> <span class="n">bnd</span><span class="o">,</span>
      <span class="n">cases</span> <span class="n">hm</span> <span class="k">with</span> <span class="n">m&#39;</span> <span class="n">hm&#39;</span><span class="o">,</span>
      <span class="n">specialize</span> <span class="n">h₁</span> <span class="n">m&#39;</span><span class="o">,</span>
      <span class="n">unfold</span> <span class="n">sem</span> <span class="n">at</span> <span class="n">h₁</span><span class="o">,</span>
      <span class="n">simp</span> <span class="o">[</span><span class="n">ht</span><span class="o">,</span><span class="n">hb</span><span class="o">,</span><span class="n">hl&#39;</span><span class="o">,</span><span class="n">hs&#39;</span><span class="o">,</span><span class="n">sem</span><span class="o">]</span> <span class="n">at</span> <span class="n">h₁</span><span class="o">,</span>
      <span class="k">have</span> <span class="o">:=</span> <span class="n">iff</span><span class="bp">.</span><span class="n">mp</span> <span class="n">lt_iff_le_not_le</span> <span class="n">hm&#39;</span><span class="o">,</span>
      <span class="n">simp</span> <span class="o">[</span><span class="n">h₁</span><span class="o">,</span><span class="n">this</span><span class="o">]</span> <span class="n">at</span> <span class="n">h₁</span><span class="o">,</span>
      <span class="n">contradiction</span><span class="o">,</span>
    <span class="kn">end</span><span class="o">,</span>
    <span class="n">specialize</span> <span class="n">hm</span> <span class="n">bnd</span><span class="o">,</span>
    <span class="n">specialize</span> <span class="n">h₁</span> <span class="n">m</span><span class="o">,</span>
    <span class="n">unfold</span> <span class="n">sem</span> <span class="n">at</span> <span class="n">h₁</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">ht</span><span class="o">,</span><span class="n">hb</span><span class="o">,</span><span class="n">hl&#39;</span><span class="o">,</span><span class="n">hs&#39;</span><span class="o">]</span> <span class="n">at</span> <span class="n">h₁</span><span class="o">,</span>
    <span class="n">unfold</span> <span class="n">sem</span> <span class="n">at</span> <span class="n">h₁</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:=</span> <span class="n">le_antisymm</span> <span class="n">hm</span> <span class="n">h₁</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">this</span><span class="o">],</span>
  <span class="kn">end</span><span class="o">,</span>
<span class="c1">-- next case replace words &quot;lower&quot; with &quot;upper&quot; and &quot;min&quot; with &quot;max&quot;</span>
</pre></div>

<a name="124970386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124970386" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124970386">Mario Carneiro (Apr 12 2018 at 06:06)</a>:</h4>
<p>You are not likely to be able to simplify this unless you formalize the symmetry between <code>min</code> and <code>max</code> here</p>

<a name="124970390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124970390" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124970390">Mario Carneiro (Apr 12 2018 at 06:07)</a>:</h4>
<p>You can try to extract a lemma with something with the same type as <code>min</code> and <code>max</code></p>

<a name="124970450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124970450" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124970450">Nima (Apr 12 2018 at 06:09)</a>:</h4>
<p>If I don't extract any lemma, is there any way, I can write this proof but replace for example <code>(is_lower_bound_is_lower c ht)</code> with a placeholder and later fill that placeholder twice?</p>

<a name="124970504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124970504" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124970504">Mario Carneiro (Apr 12 2018 at 06:11)</a>:</h4>
<p>You can run the same tactic script twice. As long as you set up the state (before or after) with suitable modifications, you can do this kind of thing</p>

<a name="124970548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124970548" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124970548">Mario Carneiro (Apr 12 2018 at 06:12)</a>:</h4>
<p>For example, you could have <code>have lem := is_lower_bound_is_lower</code> in one branch and <code>have lem := is_upper_bound_is_upper</code> in the other branch, and then run a script that refers to <code>lem</code> which means different things in the two branches</p>

<a name="124970597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124970597" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124970597">Nima (Apr 12 2018 at 06:14)</a>:</h4>
<p>gotcha, thanks</p>

<a name="124970598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124970598" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124970598">Kenny Lau (Apr 12 2018 at 06:14)</a>:</h4>
<p>or just copy it once already</p>

<a name="124971067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124971067" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124971067">Nima (Apr 12 2018 at 06:32)</a>:</h4>
<p>How do I combine the following two:</p>
<div class="codehilite"><pre><span></span><span class="n">unfold</span> <span class="n">f1</span> <span class="n">at</span> <span class="n">h1</span> <span class="n">h2</span> <span class="c1">-- only at h1 and h2</span>
<span class="n">unfold</span> <span class="n">f1</span> <span class="c1">-- only at goal (?)</span>
</pre></div>

<a name="124971268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124971268" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124971268">Mario Carneiro (Apr 12 2018 at 06:40)</a>:</h4>
<p><code>unfold f1</code> can also be written <code>unfold f1 at |-</code>, and you can do both with <code>unfold f1 at h1 h2 |-</code></p>

<a name="124971269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124971269" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124971269">Mario Carneiro (Apr 12 2018 at 06:40)</a>:</h4>
<p>there's also a unicode version of <code>|-</code></p>

<a name="124971554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124971554" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124971554">Nima (Apr 12 2018 at 06:51)</a>:</h4>
<p>thanks</p>

<a name="124981003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/124981003" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#124981003">Simon Hudon (Apr 12 2018 at 11:50)</a>:</h4>
<p>I wonder if <code>wlog</code> might be of help for your repetition problem. Like Mario said, you'd need to formalize the symmetry some more but maybe <code>wlog</code> can do some of that</p>

<a name="125005327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125005327" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125005327">Nima (Apr 12 2018 at 21:29)</a>:</h4>
<p>Sorry, but how do I finish this example?</p>
<div class="codehilite"><pre><span></span>class number := (aa1 := tt)
example [nn:number] : number.aa1 = tt := sorry
</pre></div>

<a name="125005396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125005396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125005396">Simon Hudon (Apr 12 2018 at 21:30)</a>:</h4>
<p>Try <code>by simp!</code></p>

<a name="125005400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125005400" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125005400">Simon Hudon (Apr 12 2018 at 21:30)</a>:</h4>
<p>(the <code>!</code> is part of the proof)</p>

<a name="125005417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125005417" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125005417">Nima (Apr 12 2018 at 21:31)</a>:</h4>
<p>I got error: <code>command expected</code></p>

<a name="125005472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125005472" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125005472">Simon Hudon (Apr 12 2018 at 21:32)</a>:</h4>
<p>Restart your Lean server (C-c C-r in emacs)</p>

<a name="125005522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125005522" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125005522">Nima (Apr 12 2018 at 21:33)</a>:</h4>
<p>I am on VS Code, restarted the whole program. But no luck!</p>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">number</span> <span class="o">:=</span> <span class="o">(</span><span class="n">aa1</span> <span class="o">:=</span> <span class="n">tt</span><span class="o">)</span>
<span class="kn">example</span> <span class="o">[</span><span class="n">nn</span><span class="o">:</span><span class="n">number</span><span class="o">]</span> <span class="o">:</span> <span class="n">number</span><span class="bp">.</span><span class="n">aa1</span> <span class="bp">=</span> <span class="n">tt</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span><span class="bp">!</span>  <span class="c1">-- error command expected</span>
</pre></div>


<p>Lean 3.3.0</p>

<a name="125005571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125005571" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125005571">Simon Hudon (Apr 12 2018 at 21:34)</a>:</h4>
<p>Oh! 3.3.0 ...</p>

<a name="125005574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125005574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125005574">Simon Hudon (Apr 12 2018 at 21:34)</a>:</h4>
<p>ok, one sec</p>

<a name="125005580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125005580" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125005580">Simon Hudon (Apr 12 2018 at 21:34)</a>:</h4>
<p>ok <code>by refl</code> should do it</p>

<a name="125005670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125005670" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125005670">Nima (Apr 12 2018 at 21:36)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">invalid</span> <span class="n">apply</span> <span class="n">tactic</span><span class="o">,</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">unify</span>
  <span class="n">number</span><span class="bp">.</span><span class="n">aa1</span> <span class="bp">=</span> <span class="n">tt</span>
<span class="k">with</span>
  <span class="err">?</span><span class="n">m_2</span> <span class="bp">=</span> <span class="err">?</span><span class="n">m_2</span>
<span class="n">state</span><span class="o">:</span>
<span class="n">nn</span> <span class="o">:</span> <span class="n">number</span>
<span class="err">⊢</span> <span class="n">number</span><span class="bp">.</span><span class="n">aa1</span> <span class="bp">=</span> <span class="n">tt</span>
</pre></div>

<a name="125005701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125005701" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125005701">Simon Hudon (Apr 12 2018 at 21:37)</a>:</h4>
<p>What happens if you do:</p>
<div class="codehilite"><pre><span></span>begin
  unfold number.aa1
end
</pre></div>

<a name="125005794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125005794" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125005794">Simon Hudon (Apr 12 2018 at 21:39)</a>:</h4>
<p>Sorry, I just got what is happening. The proof shouldn't work</p>

<a name="125005855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125005855" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125005855">Nima (Apr 12 2018 at 21:40)</a>:</h4>
<p>Yep, it does not.</p>

<a name="125005877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125005877" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125005877">Simon Hudon (Apr 12 2018 at 21:41)</a>:</h4>
<p>In <code>class number := (aa1 := tt)</code>, <code>aa1</code> is a field of type <code>bool</code> whose default value (when you build an instance) is <code>tt</code>. You can still specify a different value so you don't know for sure that <code>aa1</code> is <code>tt</code> in your example</p>

<a name="125005923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125005923" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125005923">Simon Hudon (Apr 12 2018 at 21:42)</a>:</h4>
<p>What are you trying to do with that example? I suspect you're misusing classes</p>

<a name="125005995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125005995" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125005995">Nima (Apr 12 2018 at 21:45)</a>:</h4>
<p>First, how do I change a default value? Is this like a programming language that I can assign value to variables??<br>
I wanted to show <code>number.has_prev a</code> is decidable for any value <code>a</code>. But I guess you are saying value of <code>has_prev</code> can be changed later (can mark it like a constant! I am lost)</p>
<div class="codehilite"><pre><span></span><span class="o">(</span><span class="n">has_prev</span>  <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span><span class="o">:</span><span class="n">α</span><span class="o">,</span> <span class="n">dense</span> <span class="bp">=</span> <span class="n">ff</span> <span class="bp">∧</span> <span class="n">some</span> <span class="n">a</span> <span class="bp">≠</span> <span class="n">min</span><span class="o">)</span>
</pre></div>

<a name="125006160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125006160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125006160">Simon Hudon (Apr 12 2018 at 21:48)</a>:</h4>
<p>No, this is not about mutating variables. Think of <code>class number</code> as a type declaration:</p>
<div class="codehilite"><pre><span></span>@[class]
structure number :=
  (aa1 : bool)
</pre></div>


<p>the <code>:= tt</code> part allows you to write:</p>
<div class="codehilite"><pre><span></span>instance : number :=
{ }
</pre></div>


<p>and it is taken to mean:</p>
<div class="codehilite"><pre><span></span>instance : number :=
{ aa1 := tt }
</pre></div>

<a name="125006189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125006189" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125006189">Nima (Apr 12 2018 at 21:49)</a>:</h4>
<p>ooo!</p>

<a name="125006246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125006246" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125006246">Simon Hudon (Apr 12 2018 at 21:50)</a>:</h4>
<p>And in keeping with desugaring the <code>class</code> / <code>instance</code> syntax, the latter is equivalent to:</p>
<div class="codehilite"><pre><span></span>@[instance]
def my_number_instance : number :=
{ aa1 := tt }
</pre></div>

<a name="125006293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125006293" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125006293">Nima (Apr 12 2018 at 21:51)</a>:</h4>
<p>What was I thinking!!<br>
Thanks a lot.</p>

<a name="125006340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125006340" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125006340">Simon Hudon (Apr 12 2018 at 21:52)</a>:</h4>
<p>No worries</p>

<a name="125121921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125121921" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125121921">Nima (Apr 15 2018 at 20:48)</a>:</h4>
<p>How do I finish this example without using <code>finish</code>?</p>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">param</span> <span class="bp">|</span> <span class="n">p1</span> <span class="bp">|</span> <span class="n">p2</span> <span class="bp">|</span> <span class="n">p3</span>
<span class="kn">example</span> <span class="o">:</span> <span class="n">param</span><span class="bp">.</span><span class="n">p1</span> <span class="bp">=</span> <span class="n">param</span><span class="bp">.</span><span class="n">p2</span> <span class="bp">→</span> <span class="n">false</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="125121986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125121986" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125121986">Patrick Massot (Apr 15 2018 at 20:51)</a>:</h4>
<p><code>example : param.p1 = param.p2 → false := λ h, param.no_confusion h</code></p>

<a name="125122032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125122032" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125122032">Mario Carneiro (Apr 15 2018 at 20:53)</a>:</h4>
<p>you can also use <code>by injection h</code></p>

<a name="125122172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125122172" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125122172">Nima (Apr 15 2018 at 20:58)</a>:</h4>
<p>Thank you both</p>

<a name="125122183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125122183" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125122183">Patrick Massot (Apr 15 2018 at 20:59)</a>:</h4>
<p>I think you could create new topics, instead of always reusing the same one. It would make it easier for other readers to decide whether they could learn something from your questions.</p>

<a name="125123108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125123108" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125123108">Nima (Apr 15 2018 at 21:30)</a>:</h4>
<p>That is definitely an option. However, most (if not all) of my questions are trivially answered by experienced users like Simon or Mario. I look at "Fresh off the boat" as a topic that contains questions a new user like me with a very little experience might ask. Nothing deep, but they come from everywhere (for example, because I read a book and that book talks about lots of different things). That is how I see them related. </p>
<p>Of course, another option is to create one topic for basically every one of them. The point is, 1) I don't know the answer is in <code>no_confusion</code> or <code>injection</code>, so most likely the topic I would create won't have a meaningful representation of its content. 2) I doubt that a user will learn much just by reading a single one of them. Either, they already know the answer, or if they don't, they are likely to benefit from similar questions that now they would not know how to find.</p>
<p>I agree, for some concepts having a separate topic makes a lot of sense. For example, Code Generation, Meta Programming, mathlib (may be each with subtopics as well). But I don't see enough benefit to bloat list of topic by wanting every topic to be as specific as possible. Maybe having both kinds would be more helpful. Some are general-nothing-deep-scattered-subjects and some focused-deep-into-a-concent topics.</p>
<p>Please let me know what you think. If I see you guys prefer separate topics anyway, I will do my best to post that way.</p>

<a name="125123341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125123341" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125123341">Simon Hudon (Apr 15 2018 at 21:37)</a>:</h4>
<p>I think you can already pick a good topic by describing the problem that you're having. In this case you could say "how to I prove that different constructors form distinct values". I don't think the topic should contain the answer to your question because, if someone has the same problem as you, they won't know to look in the thread you created.</p>

<a name="125123382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125123382" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125123382">Simon Hudon (Apr 15 2018 at 21:38)</a>:</h4>
<p>You can also pick a very bad topic name and change it later as suggestions come in</p>

<a name="125123395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Fresh%20off%20the%20boat/near/125123395" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/08987Freshofftheboat.html#125123395">Nima (Apr 15 2018 at 21:39)</a>:</h4>
<p>No problem,<br>
Thanks for letting me know your thought.</p>


{% endraw %}
