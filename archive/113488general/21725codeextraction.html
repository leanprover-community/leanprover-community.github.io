---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/21725codeextraction.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/21725codeextraction.html">code extraction</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="125171529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/code%20extraction/near/125171529" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21725codeextraction.html#125171529">jacke (Apr 17 2018 at 01:15)</a>:</h4>
<p>I would like to extract c++ programs from my lean code, but the question is how to do it! Page 6 of Programming in Lean says that " Programs<br>
written in the language can be evaluated efficiently by Leanâ€™s virtual-machine interpreter or translated automatically to C++ and compiled"</p>

<a name="125171587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/code%20extraction/near/125171587" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21725codeextraction.html#125171587">jacke (Apr 17 2018 at 01:17)</a>:</h4>
<p>I can see that there is a PR here that promises such functionality: <a href="https://github.com/leanprover/lean/pull/1241" target="_blank" title="https://github.com/leanprover/lean/pull/1241">https://github.com/leanprover/lean/pull/1241</a>, but it was never integrated into the codebase (the PR was rejected). </p>
<p>Is there a way to extract C++ programs using Lean 3.3.0?</p>
<p>Thanks for helping, and sorry for my formatting!</p>

<a name="125171694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/code%20extraction/near/125171694" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21725codeextraction.html#125171694">Simon Hudon (Apr 17 2018 at 01:21)</a>:</h4>
<p>So far, there is no facility for code extraction in any language. The only way to execute a Lean program is with the Lean virtual machine. The developers plan to add native code generation (like a compiler) in the next version (Lean 4) which is already under construction.</p>

<a name="125171818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/code%20extraction/near/125171818" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21725codeextraction.html#125171818">jacke (Apr 17 2018 at 01:24)</a>:</h4>
<p>Got it, thanks! </p>
<p>I've been using Lean to prove out certain algorithms, and code extraction to C++ would be a wonderful way to generate an immediate efficiency dividend.</p>

<a name="125171824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/code%20extraction/near/125171824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21725codeextraction.html#125171824">jacke (Apr 17 2018 at 01:25)</a>:</h4>
<p>Looking forward to version 4!</p>

<a name="125171883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/code%20extraction/near/125171883" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21725codeextraction.html#125171883">Simon Hudon (Apr 17 2018 at 01:27)</a>:</h4>
<p>You and me both! If this is something you have time for / skills for, (source) code generation in various languages would be pretty useful. My own todo list has code generation in Haskell and Rust on it but I don't know in which decade I'll get around to it <span class="emoji emoji-1f61d" title="stuck out tongue closed eyes">:stuck_out_tongue_closed_eyes:</span></p>

<a name="125171887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/code%20extraction/near/125171887" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21725codeextraction.html#125171887">Mario Carneiro (Apr 17 2018 at 01:27)</a>:</h4>
<p>This is on my todo list as well, I was working on this just today</p>

<a name="125171928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/code%20extraction/near/125171928" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21725codeextraction.html#125171928">Simon Hudon (Apr 17 2018 at 01:28)</a>:</h4>
<p>You were? Which language?</p>

<a name="125171938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/code%20extraction/near/125171938" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21725codeextraction.html#125171938">Mario Carneiro (Apr 17 2018 at 01:29)</a>:</h4>
<p>Lean to C, or maybe ML</p>

<a name="125172006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/code%20extraction/near/125172006" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21725codeextraction.html#125172006">jacke (Apr 17 2018 at 01:31)</a>:</h4>
<p>It's super easy to interface from C/C++ to pretty much anywhere else. <br>
Extracting to C  would be great.</p>

<a name="125172052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/code%20extraction/near/125172052" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21725codeextraction.html#125172052">Simon Hudon (Apr 17 2018 at 01:32)</a>:</h4>
<p>Nice! What's your approach?</p>

<a name="125172100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/code%20extraction/near/125172100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21725codeextraction.html#125172100">Mario Carneiro (Apr 17 2018 at 01:34)</a>:</h4>
<p>I'm still looking at large scale infrastructure, but the idea is to have a type translation for the objects, and then closure conversion and translate the rest as directly as possible</p>

<a name="125172127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/code%20extraction/near/125172127" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21725codeextraction.html#125172127">Mario Carneiro (Apr 17 2018 at 01:35)</a>:</h4>
<p>There is a question of whether to use "advanced" features of C++ or treat it like assembly language with nicer syntax and get rid of all the complicated control flow</p>

<a name="125172203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/code%20extraction/near/125172203" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21725codeextraction.html#125172203">Simon Hudon (Apr 17 2018 at 01:37)</a>:</h4>
<p>Any thoughts on proving the correctness of the translation?</p>

<a name="125172318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/code%20extraction/near/125172318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21725codeextraction.html#125172318">Mario Carneiro (Apr 17 2018 at 01:40)</a>:</h4>
<p>I'm toying with the idea of doing this as a dissertation project, but probably code extraction should come first</p>

<a name="125172374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/code%20extraction/near/125172374" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21725codeextraction.html#125172374">Simon Hudon (Apr 17 2018 at 01:43)</a>:</h4>
<p>That would be awesome! I'm thinking of doing that myself because I need such a feature but it's a bit of a distraction for me. One the examples in my dissertation is a non-blocking double ended queue. It would be fun if I could refine it down to executable code.</p>


{% endraw %}
