---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/05308tfaeformatting.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html">tfae formatting</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="184329515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184329515" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184329515">Johan Commelin (Dec 27 2019 at 16:16)</a>:</h4>
<p><code>tfae</code> is being used. Kudos to <span class="user-mention" data-user-id="110032">@Reid Barton</span> and <span class="user-mention" data-user-id="110026">@Simon Hudon</span> for making the tactic work, and to <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> for using it.<br>
Here's a question/proposal about formatting: shall we format <code>tfae</code> statements with one "item" per line?<br>
Pinging <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> and <span class="user-mention" data-user-id="110596">@Rob Lewis</span> for this style issue.</p>

<a name="184329618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184329618" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184329618">Yury G. Kudryashov (Dec 27 2019 at 16:18)</a>:</h4>
<p>Do you mean something like this?</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">tfae_mem_nhds_within_Ioi</span> <span class="o">{</span><span class="n">a</span> <span class="n">u&#39;</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">hu&#39;</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">u&#39;</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">tfae</span> <span class="o">[</span><span class="n">s</span> <span class="err">∈</span> <span class="n">nhds_within</span> <span class="n">a</span> <span class="o">(</span><span class="n">Ioi</span> <span class="n">a</span><span class="o">),</span> <span class="c">/-</span><span class="cm"> 0 -/</span>
    <span class="n">s</span> <span class="err">∈</span> <span class="n">nhds_within</span> <span class="n">a</span> <span class="o">(</span><span class="n">Ioc</span> <span class="n">a</span> <span class="n">u&#39;</span><span class="o">),</span> <span class="c">/-</span><span class="cm"> 1 -/</span>
    <span class="n">s</span> <span class="err">∈</span> <span class="n">nhds_within</span> <span class="n">a</span> <span class="o">(</span><span class="n">Ioo</span> <span class="n">a</span> <span class="n">u&#39;</span><span class="o">),</span> <span class="c">/-</span><span class="cm"> 2 -/</span>
    <span class="bp">∃</span> <span class="n">u</span> <span class="err">∈</span> <span class="n">Ioc</span> <span class="n">a</span> <span class="n">u&#39;</span><span class="o">,</span> <span class="n">Ioo</span> <span class="n">a</span> <span class="n">u</span> <span class="err">⊆</span> <span class="n">s</span><span class="o">,</span> <span class="c">/-</span><span class="cm"> 3 -/</span>
    <span class="bp">∃</span> <span class="n">u</span> <span class="err">∈</span> <span class="n">Ioi</span> <span class="n">a</span><span class="o">,</span> <span class="n">Ioo</span> <span class="n">a</span> <span class="n">u</span> <span class="err">⊆</span> <span class="n">s</span><span class="o">]</span> <span class="c">/-</span><span class="cm"> 4 -/</span> <span class="o">:=</span>
</pre></div>

<a name="184329647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184329647" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184329647">Johan Commelin (Dec 27 2019 at 16:18)</a>:</h4>
<p>Yes, exactly</p>

<a name="184329655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184329655" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184329655">Yury G. Kudryashov (Dec 27 2019 at 16:19)</a>:</h4>
<p>Numbers help those writing <code>(tfae_mem_nhds_within_Ioi h s).out 0 3</code></p>

<a name="184329748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184329748" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184329748">Johan Commelin (Dec 27 2019 at 16:20)</a>:</h4>
<p>Hmmm, I now realise that <code>tfae_have</code> uses 1-based indexing, but <code>tfae.out</code> uses 0-based indexing...</p>

<a name="184329758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184329758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184329758">Johan Commelin (Dec 27 2019 at 16:20)</a>:</h4>
<p>I guess that should be fixed</p>

<a name="184329791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184329791" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184329791">Yury G. Kudryashov (Dec 27 2019 at 16:21)</a>:</h4>
<p>Or even</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">tfae_mem_nhds_within_Ioi</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">tfae</span> <span class="o">[</span><span class="n">s</span> <span class="err">∈</span> <span class="n">nhds_within</span> <span class="n">a</span> <span class="o">(</span><span class="n">Ioi</span> <span class="n">a</span><span class="o">),</span> <span class="c">/-</span><span class="cm"> 0 : `s` is a neighborhood of `a` within `(a, +∞)` -/</span>
    <span class="n">s</span> <span class="err">∈</span> <span class="n">nhds_within</span> <span class="n">a</span> <span class="o">(</span><span class="n">Ioc</span> <span class="n">a</span> <span class="n">b</span><span class="o">),</span> <span class="c">/-</span><span class="cm"> 1 : `s` is a neighborhood of `a` within `(a, b]` -/</span>
    <span class="n">s</span> <span class="err">∈</span> <span class="n">nhds_within</span> <span class="n">a</span> <span class="o">(</span><span class="n">Ioo</span> <span class="n">a</span> <span class="n">b</span><span class="o">),</span> <span class="c">/-</span><span class="cm"> 2 : `s` is a neighborhood of `a` within `(a, b)` -/</span>
    <span class="bp">∃</span> <span class="n">u</span> <span class="err">∈</span> <span class="n">Ioc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">Ioo</span> <span class="n">a</span> <span class="n">u</span> <span class="err">⊆</span> <span class="n">s</span><span class="o">,</span> <span class="c">/-</span><span class="cm"> 3 : `s` includes `(a, u)` for some `u ∈ (a, b]` -/</span>
    <span class="bp">∃</span> <span class="n">u</span> <span class="err">∈</span> <span class="n">Ioi</span> <span class="n">a</span><span class="o">,</span> <span class="n">Ioo</span> <span class="n">a</span> <span class="n">u</span> <span class="err">⊆</span> <span class="n">s</span><span class="o">]</span> <span class="c">/-</span><span class="cm"> 4 : `s` includes `(a, u)` for some `u &gt; a` -/</span> <span class="o">:=</span>
</pre></div>

<a name="184329800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184329800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184329800">Johan Commelin (Dec 27 2019 at 16:21)</a>:</h4>
<p>I think I would put <code>:=</code> before comment <code>4</code></p>

<a name="184329806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184329806" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184329806">Johan Commelin (Dec 27 2019 at 16:21)</a>:</h4>
<p>But that's minor nitpicking</p>

<a name="184329852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184329852" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184329852">Sebastien Gouezel (Dec 27 2019 at 16:22)</a>:</h4>
<p>Also, for one-line comments you can use <code>--</code>.</p>

<a name="184329860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184329860" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184329860">Johan Commelin (Dec 27 2019 at 16:22)</a>:</h4>
<p>Only if you don't put <code>:=</code> at the end of the line</p>

<a name="184329881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184329881" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184329881">Sebastien Gouezel (Dec 27 2019 at 16:23)</a>:</h4>
<p>Yes. I was implicitly seconding your comment :)</p>

<a name="184329889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184329889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184329889">Yury G. Kudryashov (Dec 27 2019 at 16:23)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">tfae_mem_nhds_within_Ioi</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">tfae</span> <span class="o">[</span><span class="n">s</span> <span class="err">∈</span> <span class="n">nhds_within</span> <span class="n">a</span> <span class="o">(</span><span class="n">Ioi</span> <span class="n">a</span><span class="o">),</span> <span class="c1">-- 0 : `s` is a neighborhood of `a` within `(a, +∞)`</span>
    <span class="n">s</span> <span class="err">∈</span> <span class="n">nhds_within</span> <span class="n">a</span> <span class="o">(</span><span class="n">Ioc</span> <span class="n">a</span> <span class="n">b</span><span class="o">),</span>   <span class="c1">-- 1 : `s` is a neighborhood of `a` within `(a, b]`</span>
    <span class="n">s</span> <span class="err">∈</span> <span class="n">nhds_within</span> <span class="n">a</span> <span class="o">(</span><span class="n">Ioo</span> <span class="n">a</span> <span class="n">b</span><span class="o">),</span>   <span class="c1">-- 2 : `s` is a neighborhood of `a` within `(a, b)`</span>
    <span class="bp">∃</span> <span class="n">u</span> <span class="err">∈</span> <span class="n">Ioc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">Ioo</span> <span class="n">a</span> <span class="n">u</span> <span class="err">⊆</span> <span class="n">s</span><span class="o">,</span>    <span class="c1">-- 3 : `s` includes `(a, u)` for some `u ∈ (a, b]`</span>
    <span class="bp">∃</span> <span class="n">u</span> <span class="err">∈</span> <span class="n">Ioi</span> <span class="n">a</span><span class="o">,</span> <span class="n">Ioo</span> <span class="n">a</span> <span class="n">u</span> <span class="err">⊆</span> <span class="n">s</span><span class="o">]</span> <span class="o">:=</span>   <span class="c1">-- 4 : `s` includes `(a, u)` for some `u &gt; a`</span>
</pre></div>

<a name="184329941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184329941" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184329941">Johan Commelin (Dec 27 2019 at 16:24)</a>:</h4>
<p>It's too bad that those comments won't end up in the docstring</p>

<a name="184330505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184330505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184330505">Johan Commelin (Dec 27 2019 at 16:34)</a>:</h4>
<p>In fact, I think it's quite important that these comments do end up in the docstring, because if the lemma gets used with <code>tfae.out</code> a person reading the code will probably want to hover over the lemma to see exactly which two equivalent statements are being used.</p>

<a name="184330868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184330868" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184330868">Yury G. Kudryashov (Dec 27 2019 at 16:40)</a>:</h4>
<p>I'll copy them to the docstring.</p>

<a name="184339803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184339803" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184339803">Rob Lewis (Dec 27 2019 at 19:45)</a>:</h4>
<p>I agree that the 0/1 indexing should be made consistent and that the numbers should appear in the docstring.</p>

<a name="184339878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184339878" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184339878">Rob Lewis (Dec 27 2019 at 19:46)</a>:</h4>
<p>Note that (I think) markdown will format a numbered list starting with 1, even if the input starts with 0. i.e.</p>
<div class="codehilite"><pre><span></span>0. `s` is a neighborhood...
1. `s` is a neighborhood...
</pre></div>


<p>will get printed as </p>
<div class="codehilite"><pre><span></span>1. ...
2. ...
</pre></div>

<a name="184339910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184339910" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184339910">Rob Lewis (Dec 27 2019 at 19:47)</a>:</h4>
<p>So maybe we should use 1-based indexing. Or unordered lists with indices added manually.</p>

<a name="184350235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184350235" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184350235">Mario Carneiro (Dec 27 2019 at 23:45)</a>:</h4>
<p>Actually, I think we could use an annotation so that we can write:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">tfae_mem_nhds_within_Ioi</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
  <span class="k">by</span> <span class="n">tfae</span> <span class="o">[</span>
    <span class="n">Ioi</span><span class="o">:</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">nhds_within</span> <span class="n">a</span> <span class="o">(</span><span class="n">Ioi</span> <span class="n">a</span><span class="o">),</span>
    <span class="n">Ioc</span><span class="o">:</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">nhds_within</span> <span class="n">a</span> <span class="o">(</span><span class="n">Ioc</span> <span class="n">a</span> <span class="n">b</span><span class="o">),</span>
    <span class="n">Ioo</span><span class="o">:</span> <span class="n">s</span> <span class="err">∈</span> <span class="n">nhds_within</span> <span class="n">a</span> <span class="o">(</span><span class="n">Ioo</span> <span class="n">a</span> <span class="n">b</span><span class="o">),</span>
    <span class="n">ex_Ioc</span><span class="o">:</span> <span class="bp">∃</span> <span class="n">u</span> <span class="err">∈</span> <span class="n">Ioc</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">Ioo</span> <span class="n">a</span> <span class="n">u</span> <span class="err">⊆</span> <span class="n">s</span><span class="o">,</span>
    <span class="n">ex_Ioi</span><span class="o">:</span> <span class="bp">∃</span> <span class="n">u</span> <span class="err">∈</span> <span class="n">Ioi</span> <span class="n">a</span><span class="o">,</span> <span class="n">Ioo</span> <span class="n">a</span> <span class="n">u</span> <span class="err">⊆</span> <span class="n">s</span><span class="o">]</span> <span class="o">:=</span>
</pre></div>


<p>and then reference the names using <code>tfae_have Ioi &lt;-&gt; Ioo := tfae_mem_nhds_within_Ioi</code> or similar</p>

<a name="184350298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tfae%20formatting/near/184350298" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/05308tfaeformatting.html#184350298">Mario Carneiro (Dec 27 2019 at 23:47)</a>:</h4>
<p>It could be syntax for <code>tfae [(\lam Ioi, Ioi) s ∈ nhds_within a (Ioi a), ...</code></p>


{% endraw %}

{% include archive_update.html %}