---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/40789tokens.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html">tokens</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="135382507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382507" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382507">Scott Morrison (Oct 08 2018 at 06:17)</a>:</h4>
<p>Does anyone know where the list of "registered tokens" is?</p>
<blockquote>
<p>/-- Check that the next token is <code>tk</code> and consume it. <code>tk</code> must be a registered token. -/<br>
meta constant tk (tk : string) : parser unit</p>
</blockquote>

<a name="135382549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382549" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382549">Simon Hudon (Oct 08 2018 at 06:18)</a>:</h4>
<p>You can define one as <code>precedence `my_keyword`:0</code></p>

<a name="135382612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382612" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382612">Scott Morrison (Oct 08 2018 at 06:20)</a>:</h4>
<p>I'd like to modify some of my tactics so they print out a trace message of what they're doing.</p>

<a name="135382619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382619">Scott Morrison (Oct 08 2018 at 06:21)</a>:</h4>
<p>My idea was to have, e.g. <code>backwards_reasoning</code>, but then be able to write <code>backwards_reasoning?</code> and get trace ouput.</p>

<a name="135382620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382620" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382620">Scott Morrison (Oct 08 2018 at 06:21)</a>:</h4>
<p>However <code>?</code> isn't an allowed token.</p>

<a name="135382623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382623" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382623">Scott Morrison (Oct 08 2018 at 06:21)</a>:</h4>
<p>Do you have a suggestion for good syntax for this?</p>

<a name="135382666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382666" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382666">Scott Morrison (Oct 08 2018 at 06:22)</a>:</h4>
<p>I'm hoping that one day this model might be widespread --- e.g. in Lean 4 we could even imagine your squeeze_simp just be callable by <code>simp?</code>.</p>

<a name="135382731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382731" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382731">Simon Hudon (Oct 08 2018 at 06:24)</a>:</h4>
<p>Are you trying to make <code>backwards_reasoning?</code>the name of the tactic or is <code>?</code> a parameter to <code>backwards_reasoning</code>?</p>

<a name="135382740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382740">Scott Morrison (Oct 08 2018 at 06:25)</a>:</h4>
<p>? was meant to be a parameter</p>

<a name="135382741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382741" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382741">Scott Morrison (Oct 08 2018 at 06:25)</a>:</h4>
<p>I can make this work with !, just via:</p>

<a name="135382742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382742" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382742">Scott Morrison (Oct 08 2018 at 06:25)</a>:</h4>
<p><code>meta def backwards_reasoning (trace : parse $ optional (tk "!"))  ...</code></p>

<a name="135382782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382782" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382782">Scott Morrison (Oct 08 2018 at 06:26)</a>:</h4>
<p>Hmm, it seems <code>#</code> works fine, maybe that's good enough.</p>

<a name="135382784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382784">Mario Carneiro (Oct 08 2018 at 06:26)</a>:</h4>
<p>Surely <code>?</code> is a token</p>

<a name="135382785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382785" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382785">Scott Morrison (Oct 08 2018 at 06:26)</a>:</h4>
<p>Somehow <code>!</code> strikes me as a "work harder!" modifier to a tactic,  rather than a "tell me more"</p>

<a name="135382795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382795" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382795">Mario Carneiro (Oct 08 2018 at 06:26)</a>:</h4>
<p>I think <code>rcases</code> and <code>rintro</code> use <code>?</code> in their parsing, for the hint mode</p>

<a name="135382802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382802" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382802">Scott Morrison (Oct 08 2018 at 06:27)</a>:</h4>
<p>Okay, I will look at those.</p>

<a name="135382811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382811" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382811">Mario Carneiro (Oct 08 2018 at 06:27)</a>:</h4>
<p>Actually it would be nice if <code>squeeze_simp</code> was <code>simp?</code></p>

<a name="135382817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382817" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382817">Scott Morrison (Oct 08 2018 at 06:28)</a>:</h4>
<p>Ugh...</p>

<a name="135382853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382853" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382853">Simon Hudon (Oct 08 2018 at 06:28)</a>:</h4>
<p>I get the same error as you but this fixes it:</p>
<div class="codehilite"><pre><span></span><span class="kn">precedence</span> <span class="bp">`</span><span class="err">?</span><span class="bp">`</span><span class="o">:</span><span class="mi">0</span>
</pre></div>

<a name="135382864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382864" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382864">Scott Morrison (Oct 08 2018 at 06:28)</a>:</h4>
<p>Awesome, thanks <span class="user-mention" data-user-id="110026">@Simon Hudon</span>.</p>

<a name="135382867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382867" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382867">Scott Morrison (Oct 08 2018 at 06:28)</a>:</h4>
<p>Presumably this is a bit fragile, but works for now. :-)</p>

<a name="135382870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382870" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382870">Mario Carneiro (Oct 08 2018 at 06:28)</a>:</h4>
<p>I would be careful with that</p>

<a name="135382876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382876" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382876">Mario Carneiro (Oct 08 2018 at 06:29)</a>:</h4>
<p>declaring something as a token makes it unusable as a variable name</p>

<a name="135382884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382884" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382884">Mario Carneiro (Oct 08 2018 at 06:29)</a>:</h4>
<p>maybe that's not a problem here though :)</p>

<a name="135382950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382950" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382950">Mario Carneiro (Oct 08 2018 at 06:30)</a>:</h4>
<p>Does it work if you declare it locally?</p>

<a name="135382958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135382958" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135382958">Mario Carneiro (Oct 08 2018 at 06:30)</a>:</h4>
<p>I see that <code>rcases</code> has <code>local postfix `?`:9001 := optional</code>, which may be a factor in why this works</p>

<a name="135383035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135383035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135383035">Simon Hudon (Oct 08 2018 at 06:33)</a>:</h4>
<p>I am also unclear on the interaction between <code>postfix</code> and <code>precedence</code></p>

<a name="135383149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135383149" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135383149">Scott Morrison (Oct 08 2018 at 06:36)</a>:</h4>
<p>You can't do anything with <code>local precedence</code></p>

<a name="135383161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135383161" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135383161">Simon Hudon (Oct 08 2018 at 06:37)</a>:</h4>
<p>Even if you could that would make your tactic tricky to use</p>

<a name="135383206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135383206" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135383206">Scott Morrison (Oct 08 2018 at 06:38)</a>:</h4>
<p>Yeah.</p>

<a name="135410263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135410263" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135410263">Reid Barton (Oct 08 2018 at 15:17)</a>:</h4>
<p>Aha interesting. So this explains why I could never get <code>rcases?</code> to work. It only works once I make <code>?</code> some kind of notation.</p>

<a name="135411814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135411814" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135411814">Simon Hudon (Oct 08 2018 at 15:42)</a>:</h4>
<p>That sounds like a probable explanation. <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> you may need to add <code>precedence `?`:0</code> in mathlib</p>

<a name="135413968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135413968" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135413968">Mario Carneiro (Oct 08 2018 at 16:19)</a>:</h4>
<p>oh! I didn't realize <code>rcases?</code> was broken</p>

<a name="135418076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135418076" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135418076">Patrick Massot (Oct 08 2018 at 17:39)</a>:</h4>
<p>This was mentioned several times here, but I guess we need to learn to use GitHub issues instead of only relying on whining here</p>

<a name="135418181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135418181" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135418181">Mario Carneiro (Oct 08 2018 at 17:41)</a>:</h4>
<p>was it? I don't recall any error reports for <code>rcases?</code></p>

<a name="135419249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135419249" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135419249">Patrick Massot (Oct 08 2018 at 18:03)</a>:</h4>
<p>e.g. <a href="#narrow/stream/113488-general/subject/rcases.3F/near/133503552" title="#narrow/stream/113488-general/subject/rcases.3F/near/133503552">https://leanprover.zulipchat.com/#narrow/stream/113488-general/subject/rcases.3F/near/133503552</a></p>

<a name="135419347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135419347" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135419347">Mario Carneiro (Oct 08 2018 at 18:05)</a>:</h4>
<p>oh, I thought that was resolved from the comments</p>

<a name="135419489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/tokens/near/135419489" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/40789tokens.html#135419489">Patrick Massot (Oct 08 2018 at 18:08)</a>:</h4>
<p>I was sure it was mentioned a couple more times but I can't find it</p>


{% endraw %}
