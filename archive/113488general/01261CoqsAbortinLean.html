---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/01261CoqsAbortinLean.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html">Coq's Abort in Lean</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="135406580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135406580" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135406580">Kevin Sullivan (Oct 08 2018 at 14:22)</a>:</h4>
<p>What is Lean's equivalent of Abort in Coq?</p>

<a name="135406598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135406598" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135406598">Mario Carneiro (Oct 08 2018 at 14:23)</a>:</h4>
<p>what does it do?</p>

<a name="135406720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135406720" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135406720">Kevin Sullivan (Oct 08 2018 at 14:25)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Abort terminates (gives up on) a failing or incomplete proof (whereas Coq's "Admitted" gives up and accepts the proposition being proved as an axiom, like sorry in Lean).</p>

<a name="135406812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135406812" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135406812">Mario Carneiro (Oct 08 2018 at 14:26)</a>:</h4>
<p>Lean doesn't have this. I guess it makes more sense with the line-based input approach to coq</p>

<a name="135406836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135406836" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135406836">Mario Carneiro (Oct 08 2018 at 14:26)</a>:</h4>
<p>but in lean once you have written <code>def</code> you are committed to either finishing it or getting an error or warning</p>

<a name="135407728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135407728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135407728">Kevin Sullivan (Oct 08 2018 at 14:38)</a>:</h4>
<p>For pedagogical purposes in any case it'd be good to have, as one can then exhibit proof strategies that don't work out. Students can see how the tactic state evolves until one gets stuck and gives up.</p>

<a name="135407747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135407747" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135407747">Mario Carneiro (Oct 08 2018 at 14:39)</a>:</h4>
<p>Usually we use <code>sorry</code> for that</p>

<a name="135418308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135418308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135418308">Kevin Sullivan (Oct 08 2018 at 17:44)</a>:</h4>
<p>Yes but sorry accepts the proposition axiomatically, which in general is not what one wants to do. E.g., when showing why P \or \not P isn't provable without em.</p>

<a name="135418336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135418336" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135418336">Simon Hudon (Oct 08 2018 at 17:45)</a>:</h4>
<p>You can use <code>run_cmd</code>: it allows you to run tactics and failing to prove the goal has no consequences</p>

<a name="135418499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135418499" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135418499">Sebastian Ullrich (Oct 08 2018 at 17:49)</a>:</h4>
<p><code>example</code> may be more appropriate in that case</p>

<a name="135418627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135418627" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135418627">Simon Hudon (Oct 08 2018 at 17:51)</a>:</h4>
<p><code>example</code> has the down side that, if you use <code>sorry</code>, it still produces warnings.</p>

<a name="135418882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135418882" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135418882">Mario Carneiro (Oct 08 2018 at 17:56)</a>:</h4>
<p>There is always the trick used in the tests: use <code>sorry</code> in a <code>have</code> subproof that doesn't get used</p>

<a name="135478380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135478380" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135478380">Kevin Sullivan (Oct 09 2018 at 15:37)</a>:</h4>
<blockquote>
<p>There is always the trick used in the tests: use <code>sorry</code> in a <code>have</code> subproof that doesn't get used</p>
</blockquote>
<p>There are work-arounds, albeit with some compromises, but wouldn't it be cleaner to just provide an "abort" tactic. The context for this suggestion is not expert use of Lean but rather early undergraduate education, where every inelegant complexity causes additional pain and suffering amongst students.</p>

<a name="135479771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135479771" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135479771">Sebastian Ullrich (Oct 09 2018 at 15:59)</a>:</h4>
<p>Note that <code>Abort</code> is not a tactic but a built-in command in Coq. We would need to change the <code>begin...end</code> syntax and parts of the elaborator for something similar.</p>

<a name="135479775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135479775" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135479775">Rob Lewis (Oct 09 2018 at 15:59)</a>:</h4>
<p>From what (little) I know about Coq, <code>Abort</code> isn't a tactic, it's a top-level command. I don't think there's a way to implement it as a tactic in Lean 3, at least not in a way that mimics the usage of the Coq command. This seems like the kind of thing you might be able to do in Lean 4.</p>

<a name="135479780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135479780" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135479780">Sebastian Ullrich (Oct 09 2018 at 15:59)</a>:</h4>
<p>Nice timing :)</p>

<a name="135479782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135479782" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135479782">Rob Lewis (Oct 09 2018 at 15:59)</a>:</h4>
<p>Haha, good timing!</p>

<a name="135479784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135479784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135479784">Sebastian Ullrich (Oct 09 2018 at 15:59)</a>:</h4>
<p>:D</p>

<a name="135479789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135479789" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135479789">Patrick Massot (Oct 09 2018 at 15:59)</a>:</h4>
<p>Amazing duo</p>

<a name="135479859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135479859" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135479859">Rob Lewis (Oct 09 2018 at 16:00)</a>:</h4>
<p>To keep repeating Sebastian, I agree that using <code>example</code> is the Lean-style way to do this.</p>

<a name="135479876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135479876" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135479876">Rob Lewis (Oct 09 2018 at 16:00)</a>:</h4>
<p>To show a failing proof attempt, start an example and don't finish it.</p>

<a name="135479889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135479889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135479889">Patrick Massot (Oct 09 2018 at 16:01)</a>:</h4>
<p>No, the Lean way is to finish the proof.</p>

<a name="135479907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135479907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135479907">Rob Lewis (Oct 09 2018 at 16:01)</a>:</h4>
<p>There's no problem leaving an attempt unfinished like there is in Coq, it doesn't stop the processing of future declarations.</p>

<a name="135479921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135479921" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135479921">Patrick Massot (Oct 09 2018 at 16:01)</a>:</h4>
<p>Even if <code>==</code> suddenly appear in the proof</p>

<a name="135494007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135494007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135494007">Simon Hudon (Oct 09 2018 at 19:52)</a>:</h4>
<p>What if we treated <code>abort</code> like <code>sorry</code> except that, when it appears in an example, it doesn't produce warnings?</p>

<a name="135516025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135516025" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135516025">Kevin Sullivan (Oct 10 2018 at 03:27)</a>:</h4>
<blockquote>
<p>What if we treated <code>abort</code> like <code>sorry</code> except that, when it appears in an example, it doesn't produce warnings?</p>
</blockquote>
<p>It would need both (1) to not produce warnings, and (2) to not accept the goal axiomatically.</p>
<p>And, yes,  to Rob L. Abort is a command, not a tactic, in Coq.</p>
<p>By the way, Coq's command, analogous to Lean's sorry, is Admitted. It gives up on the current proof and accepts the goal axiomatically. By contrast, Abort gives up on the current proof but discards rather than accepts the current goal.</p>

<a name="135516089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135516089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135516089">Simon Hudon (Oct 10 2018 at 03:29)</a>:</h4>
<p>I think examples can't be invoked from other proofs so that part is already there.</p>

<a name="135528161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135528161" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135528161">Rob Lewis (Oct 10 2018 at 08:58)</a>:</h4>
<p>I've only used Coq for  simple things. Specifically, I don't know how <code>Abort</code> works in nested proofs like they describe in the manual. Here's something that very roughly approximates its behavior in the top-level case. If you use <code>example</code>, the environment will be the same before and after processing this, and there are no warnings. </p>
<div class="codehilite"><pre><span></span><span class="kn">constant</span> <span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">abort</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">}</span> <span class="o">:</span> <span class="n">α</span>

<span class="kn">open</span> <span class="n">tactic</span>
<span class="n">meta</span> <span class="n">def</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">interactive</span><span class="bp">.</span><span class="n">abort</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="n">all_goals</span> <span class="bp">`</span><span class="o">[</span><span class="n">exact</span> <span class="n">abort</span><span class="o">]</span>

<span class="kn">example</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="mi">0</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="n">abort</span>
<span class="kn">end</span>
</pre></div>

<a name="135528193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coq%27s%20Abort%20in%20Lean/near/135528193" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/01261CoqsAbortinLean.html#135528193">Rob Lewis (Oct 10 2018 at 08:59)</a>:</h4>
<p>But I still think the Lean-style way to do this is to just leave the example unfinished.</p>


{% endraw %}
