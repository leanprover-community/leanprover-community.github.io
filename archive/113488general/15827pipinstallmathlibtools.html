---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/15827pipinstallmathlibtools.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html">pip install mathlibtools</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="184385048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385048" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385048">Patrick Massot (Dec 28 2019 at 18:13)</a>:</h4>
<p>I just created a python package for our mathlib supporting tools at <a href="https://pypi.org/project/mathlibtools/0.0.1/" target="_blank" title="https://pypi.org/project/mathlibtools/0.0.1/">https://pypi.org/project/mathlibtools/0.0.1/</a>. We now need as many people as possible to try it in various settings. In order to help the community in this new adventure, you only need to:</p>
<ul>
<li>make sure your installation of <code>update-mathlib</code> (if any) gets out of the way. It probably means moving <code>$HOME/.mathlib/bin/</code> somewhere your shell won't look at.</li>
<li>Make sure you have some version of python (at least python 3.5) with a working <code>pip</code> command, preferably in a weird setup (windows, multiple versions of python installed in conflicting ways...)</li>
<li>try <code>pip install mathlibtools</code>  (or <code>pip3 install ...</code> or <code>sudo pip install ...</code> or <code>pip install --user</code> or whatever variation you can think of).</li>
<li>go to the root folder of a lean project using <code>lean-3.4.2</code> and <code>mathlib</code> and type <code>update-mathlib</code> (see <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/install/project.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/install/project.md">this doc</a> if you don't know how to make one)</li>
<li>if you know what they are meant to do, you can also try <code>cache-olean</code> and <code>setup-lean-git-hooks</code></li>
<li>Report here.</li>
</ul>

<a name="184385123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385123" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385123">Kevin Buzzard (Dec 28 2019 at 18:14)</a>:</h4>
<p>I am an ideal candidate for this because I'm using Ubuntu which has python2 by default. But doesn't this mean that it just won't work? Do I need to go into some python3 environment first?</p>

<a name="184385140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385140" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385140">Patrick Massot (Dec 28 2019 at 18:15)</a>:</h4>
<p>You probably need to use <code>sudo pip3 install mathlib-tools</code>.</p>

<a name="184385148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385148" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385148">Patrick Massot (Dec 28 2019 at 18:15)</a>:</h4>
<p>or <code>pip3 install --user mathlibtools</code></p>

<a name="184385150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385150" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385150">Kevin Buzzard (Dec 28 2019 at 18:15)</a>:</h4>
<p>without any <code>workon</code> stuff?</p>

<a name="184385195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385195" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385195">Patrick Massot (Dec 28 2019 at 18:16)</a>:</h4>
<p>You can also try in a virtualenv (ie. after <code>workon</code>) but this would be a different test case.</p>

<a name="184385222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385222" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385222">Kevin Buzzard (Dec 28 2019 at 18:17)</a>:</h4>
<p>ooh I've never been in <code>~/.mathlib</code> before. I seem to have 39 files called things like <code>mathlib-olean-nightly-2019-05-23.tar.gz</code></p>

<a name="184385232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385232" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385232">Kevin Buzzard (Dec 28 2019 at 18:17)</a>:</h4>
<p>oh man I also have my <code>hooks</code> for when I work on mathlib. Should I move them too?</p>

<a name="184385295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385295" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385295">Patrick Massot (Dec 28 2019 at 18:18)</a>:</h4>
<p>If you intend to test <code>setup-lean-git-hooks</code> then you should also move that folder away, just to make sure.</p>

<a name="184385297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385297" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385297">Kevin Buzzard (Dec 28 2019 at 18:18)</a>:</h4>
<p>Ok I'll just move all of <code>.mathlib</code> out of the way</p>

<a name="184385317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385317" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385317">Patrick Massot (Dec 28 2019 at 18:19)</a>:</h4>
<p>Your 39 files are all the compiled versions of mathlib that update-mathlib ever downloaded for you. We could have a contest to see who is the greatest update-mathlib user.</p>

<a name="184385325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385325" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385325">Patrick Massot (Dec 28 2019 at 18:19)</a>:</h4>
<p>I have 55 of them!</p>

<a name="184385332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385332" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385332">Patrick Massot (Dec 28 2019 at 18:19)</a>:</h4>
<p>Who has more?</p>

<a name="184385334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385334" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385334">Kevin Buzzard (Dec 28 2019 at 18:19)</a>:</h4>
<p>I typed <code>pip3 install --user mathlibtools</code> and now I have no command <code>update-mathlib</code></p>

<a name="184385396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385396">Kevin Buzzard (Dec 28 2019 at 18:21)</a>:</h4>
<p>I have <code>update-motd</code> -- will that do?</p>

<a name="184385400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385400" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385400">Patrick Massot (Dec 28 2019 at 18:21)</a>:</h4>
<p>no</p>

<a name="184385404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385404" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385404">Kevin Buzzard (Dec 28 2019 at 18:21)</a>:</h4>
<p>I have no <code>~/.mathlib</code></p>

<a name="184385407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385407" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385407">Patrick Massot (Dec 28 2019 at 18:21)</a>:</h4>
<p>Could you try to <code>sudo pip3 install mathlibtools</code> version?</p>

<a name="184385452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385452" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385452">Kevin Buzzard (Dec 28 2019 at 18:22)</a>:</h4>
<p>Before I do that, can you clarify if my <code>PATH</code> is supposed to have changed, or if I am now supposed to have a <code>~/.mathlib</code>?</p>

<a name="184385461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385461" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385461">Patrick Massot (Dec 28 2019 at 18:22)</a>:</h4>
<p>None of those.</p>

<a name="184385470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385470" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385470">Kevin Buzzard (Dec 28 2019 at 18:22)</a>:</h4>
<blockquote>
<p>Could you try to <code>sudo pip3 install mathlibtools</code> version?</p>
</blockquote>
<p>Is this some trick to hack me?</p>

<a name="184385486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385486" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385486">Kevin Buzzard (Dec 28 2019 at 18:23)</a>:</h4>
<div class="codehilite"><pre><span></span>$ sudo pip3 install mathlibtools
[sudo] password for buzzard:
The directory &#39;/home/buzzard/.cache/pip/http&#39; or its parent directory is not owned by the current user and the cache has been disabled. Please check the permissions and owner of that directory. If executing pip with sudo, you may want sudo&#39;s -H flag.
The directory &#39;/home/buzzard/.cache/pip&#39; or its parent directory is not owned by the current user and caching wheels has been disabled. check the permissions and owner of that directory. If executing pip with sudo, you may want sudo&#39;s -H flag.
Requirement already satisfied: mathlibtools in ./.local/lib/python3.6/site-packages
Requirement already satisfied: toml in ./.local/lib/python3.6/site-packages (from mathlibtools)
Requirement already satisfied: certifi in ./.local/lib/python3.6/site-packages (from mathlibtools)
Requirement already satisfied: gitpython in ./.local/lib/python3.6/site-packages (from mathlibtools)
Requirement already satisfied: requests in ./.local/lib/python3.6/site-packages (from mathlibtools)
Requirement already satisfied: PyGithub in ./.local/lib/python3.6/site-packages (from mathlibtools)
Requirement already satisfied: gitdb2&gt;=2.0.0 in ./.local/lib/python3.6/site-packages (from gitpython-&gt;mathlibtools)
Requirement already satisfied: urllib3!=1.25.0,!=1.25.1,&lt;1.26,&gt;=1.21.1 in ./.local/lib/python3.6/site-packages (from requests-&gt;mathlibtools)
Requirement already satisfied: idna&lt;2.9,&gt;=2.5 in ./.local/lib/python3.6/site-packages (from requests-&gt;mathlibtools)
Requirement already satisfied: chardet&lt;3.1.0,&gt;=3.0.2 in ./.local/lib/python3.6/site-packages (from requests-&gt;mathlibtools)
Requirement already satisfied: deprecated in ./.local/lib/python3.6/site-packages (from PyGithub-&gt;mathlibtools)
Requirement already satisfied: pyjwt in ./.local/lib/python3.6/site-packages (from PyGithub-&gt;mathlibtools)
Requirement already satisfied: six in ./.local/lib/python3.6/site-packages (from PyGithub-&gt;mathlibtools)
Requirement already satisfied: smmap2&gt;=2.0.0 in ./.local/lib/python3.6/site-packages (from gitdb2&gt;=2.0.0-&gt;gitpython-&gt;mathlibtools)
Requirement already satisfied: wrapt&lt;2,&gt;=1.10 in ./.local/lib/python3.6/site-packages (from deprecated-&gt;PyGithub-&gt;mathlibtools)
buzzard@bob:~$
</pre></div>

<a name="184385490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385490" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385490">Etienne Laurin (Dec 28 2019 at 18:23)</a>:</h4>
<p>If you use <code>pip3</code> with <code>--user</code>, the package gets installed in a different folder that might not be in your path. You can run <code>python3 -c 'import site; print(site.USER_SITE)'</code> to see where.</p>

<a name="184385500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385500" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385500">Kevin Buzzard (Dec 28 2019 at 18:23)</a>:</h4>
<p>My python3 is Python 3.6.9, I notice</p>

<a name="184385549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385549" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385549">Etienne Laurin (Dec 28 2019 at 18:24)</a>:</h4>
<p>once installed <code>mathlibtools</code> seems to work well for me</p>

<a name="184385553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385553" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385553">Patrick Massot (Dec 28 2019 at 18:24)</a>:</h4>
<p>Hey, Kevin's pip still tried a user space install.</p>

<a name="184385555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385555" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385555">Etienne Laurin (Dec 28 2019 at 18:24)</a>:</h4>
<div class="codehilite"><pre><span></span>$ virtualenv -p python3.7 .py
$ .py/bin/pip install mathlibtools
Successfully installed mathlibtools-0.0.1
$ .py/bin/update-mathlib
Querying GitHub...
Reusing cached olean archive
... successfully extracted olean archive.
</pre></div>

<a name="184385625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385625" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385625">Kevin Buzzard (Dec 28 2019 at 18:26)</a>:</h4>
<p>This will all be Ubuntu's default set-up for python3. </p>
<div class="codehilite"><pre><span></span>$ dpkg -S /usr/bin/python3
python3-minimal: /usr/bin/python3
buzzard@bob:~$
</pre></div>


<p>because I have no idea how python2/3/whatever works, all I ever do is use the Ubuntu package manager to install python packages</p>

<a name="184385652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385652" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385652">Patrick Massot (Dec 28 2019 at 18:27)</a>:</h4>
<p>Kevin, do you see anything in <code>$HOME/.local/bin/</code>?</p>

<a name="184385709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385709" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385709">Kevin Buzzard (Dec 28 2019 at 18:28)</a>:</h4>
<p>OK so if I do <code>workon format_lean</code> (Patrick this is the set-up you explain in the format_lean docs) and then <code>pip install mathlibtools</code> then it seems to work</p>

<a name="184385713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385713">Kevin Buzzard (Dec 28 2019 at 18:28)</a>:</h4>
<p>My python is now 3.7.1</p>

<a name="184385724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385724" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385724">Patrick Massot (Dec 28 2019 at 18:28)</a>:</h4>
<p>Ok, this is good but not good enough. It should also work outside of a virtual env.</p>

<a name="184385731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385731" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385731">Patrick Massot (Dec 28 2019 at 18:29)</a>:</h4>
<p>Do you see anything in <code>$HOME/.local/bin/</code>?</p>

<a name="184385740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385740">Kevin Buzzard (Dec 28 2019 at 18:29)</a>:</h4>
<p>[I'm just actually testing update-mathlib, hang on]</p>

<a name="184385794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385794" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385794">Kevin Buzzard (Dec 28 2019 at 18:30)</a>:</h4>
<div class="codehilite"><pre><span></span>(format_lean) buzzard@bob:~/lean-projects/test$ update-mathlib
Info: No github section found in &#39;git config&#39;, we will use GitHub with no authentication
Querying GitHub...
Error: no nightly archive found
no cache found
</pre></div>

<a name="184385803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385803" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385803">Patrick Massot (Dec 28 2019 at 18:30)</a>:</h4>
<p>What is in you leanpkg.toml?</p>

<a name="184385804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385804">Kevin Buzzard (Dec 28 2019 at 18:30)</a>:</h4>
<p>eew that's my fault</p>

<a name="184385808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385808" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385808">Kevin Buzzard (Dec 28 2019 at 18:30)</a>:</h4>
<p>April 2018!</p>

<a name="184385818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385818" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385818">Patrick Massot (Dec 28 2019 at 18:31)</a>:</h4>
<p>I would be easier to test that in a project where update-mathlib used to work.</p>

<a name="184385820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385820" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385820">Kevin Buzzard (Dec 28 2019 at 18:31)</a>:</h4>
<div class="codehilite"><pre><span></span>$ more leanpkg.toml
[package]
name = &quot;test&quot;
version = &quot;0.1&quot;
lean_version = &quot;nightly-2018-04-06&quot;
path = &quot;src&quot;

[dependencies]
lean-lib = {git = &quot;https://github.com/unitb/lean-lib&quot;, rev = &quot;1ccbd0da9d71eac905559f8ca6768098f5ed617e&quot;}
mathlib = {git = &quot;https://github.com/leanprover-community/mathlib&quot;, rev = &quot;5df2ee70cfd576e6fa11359496a8a06c029151c9&quot;}
(format_lean) buzzard@bob:~/lean-projects/test$
</pre></div>


<p>How did that happen??</p>

<a name="184385830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385830" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385830">Kevin Buzzard (Dec 28 2019 at 18:31)</a>:</h4>
<p>oh I'm an idiot, all my fault. My "new" test repo already existed</p>

<a name="184385874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385874" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385874">Patrick Massot (Dec 28 2019 at 18:32)</a>:</h4>
<p><code>lean-version</code> has to be <code>lean-3.4.2</code>.</p>

<a name="184385886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385886" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385886">Kevin Buzzard (Dec 28 2019 at 18:32)</a>:</h4>
<p>Yes! I think that test dir was there from years ago. It all works fine.</p>

<a name="184385894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385894" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385894">Kevin Buzzard (Dec 28 2019 at 18:33)</a>:</h4>
<p>OK I'm now back out of the format_lean venv</p>

<a name="184385900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385900" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385900">Patrick Massot (Dec 28 2019 at 18:33)</a>:</h4>
<p>and inspecting <code>$HOME/.local/bin</code></p>

<a name="184385904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385904" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385904">Kevin Buzzard (Dec 28 2019 at 18:33)</a>:</h4>
<div class="codehilite"><pre><span></span>buzzard@bob:~/.local/bin$ ls -l
total 292
-rwxr-xr-x 1 buzzard buzzard  3694 Dec 28 18:19 cache-olean
-rwxr-xr-x 1 buzzard buzzard   225 Dec 28 18:19 chardetect
-rwxr-xr-x 1 buzzard buzzard   234 Nov 16 21:40 easy_install
-rwxr-xr-x 1 buzzard buzzard   234 Nov 16 21:40 easy_install-3.6
-rwxr-xr-x 1 buzzard buzzard   212 Feb  9  2019 flask
-rwxr-xr-x 1 buzzard buzzard   235 Feb  9  2019 iptest
-rwxr-xr-x 1 buzzard buzzard   235 Feb  9  2019 iptest3
-rwxr-xr-x 1 buzzard buzzard   228 Feb  9  2019 ipython
-rwxr-xr-x 1 buzzard buzzard   228 Feb  9  2019 ipython3
-rwxr-xr-x 1 buzzard buzzard   236 Feb  9  2019 pbr
-rwxrwxr-x 1 buzzard buzzard   214 Apr 14  2018 pip
-rwxrwxr-x 1 buzzard buzzard   214 Apr 14  2018 pip2
-rwxrwxr-x 1 buzzard buzzard   214 Apr 14  2018 pip2.7
-rwxr-xr-x 1 buzzard buzzard   219 Feb  9  2019 pygmentize
-rwxr-xr-x 1 buzzard buzzard   215 Dec 28 18:19 pyjwt
-rwxr-xr-x 1 buzzard buzzard   685 Dec 28 18:19 setup-lean-git-hooks
-rwxr-xr-x 1 buzzard buzzard  1341 Dec 28 18:19 update-mathlib
-rwxr-xr-x 1 buzzard buzzard   234 Feb  9  2019 virtualenv
-rwxr-xr-x 1 buzzard buzzard   239 Feb  9  2019 virtualenv-clone
-rwxr-xr-x 1 buzzard buzzard  2210 Feb  9  2019 virtualenvwrapper_lazy.sh
-rwxr-xr-x 1 buzzard buzzard 41697 Feb  9  2019 virtualenvwrapper.sh
buzzard@bob:~/.local/bin$
</pre></div>

<a name="184385951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385951" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385951">Patrick Massot (Dec 28 2019 at 18:34)</a>:</h4>
<p>Ok, so the issue is that <code>.local/bin</code> in not in your path, but this is where <code>pip3 install --user</code> puts its executable files.</p>

<a name="184385955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385955" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385955">Kevin Buzzard (Dec 28 2019 at 18:34)</a>:</h4>
<p>It's not in my <code>PATH</code> though</p>

<a name="184385965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184385965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184385965">Kevin Buzzard (Dec 28 2019 at 18:35)</a>:</h4>
<p>Ubuntu says</p>
<div class="codehilite"><pre><span></span>buzzard@bob:~$ echo $PATH
/home/buzzard/.pyenv/bin:/home/buzzard/.mathlib/bin:/home/buzzard/.mathlib/bin:/home/buzzard/.elan/bin:/home/buzzard/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/java/jdk1.8.0_77/bin:/usr/local/java/jdk1.8.0_77/jre/bin:/home/buzzard/Encfs/bin:/home/buzzard/Dropbox/bin
</pre></div>


<p>(I put the last two or three there myself)</p>

<a name="184386096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184386096" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184386096">Patrick Massot (Dec 28 2019 at 18:39)</a>:</h4>
<p>The fact that the sudo version doesn't work is probably <code>pyenv</code> messing up things.</p>

<a name="184386109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184386109" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184386109">Patrick Massot (Dec 28 2019 at 18:39)</a>:</h4>
<p>The <code>--user</code> issue seems to be a known but unfixed issue: <a href="https://github.com/pypa/pip/issues/3813" target="_blank" title="https://github.com/pypa/pip/issues/3813">https://github.com/pypa/pip/issues/3813</a></p>

<a name="184386227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184386227" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184386227">Patrick Massot (Dec 28 2019 at 18:42)</a>:</h4>
<p>can you try a bare <code>pip install mathlibtools</code>?</p>

<a name="184386231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184386231" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184386231">Patrick Massot (Dec 28 2019 at 18:42)</a>:</h4>
<p>and then <code>which update-mathlib</code></p>

<a name="184386517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184386517" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184386517">Kevin Buzzard (Dec 28 2019 at 18:51)</a>:</h4>
<div class="codehilite"><pre><span></span>$ pip
Traceback (most recent call last):
  File &quot;/usr/bin/pip&quot;, line 9, in &lt;module&gt;
    from pip import main
ImportError: cannot import name main
</pre></div>


<p>This doesn't bode well, right?</p>

<a name="184386523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184386523" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184386523">Etienne Laurin (Dec 28 2019 at 18:51)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> This new <code>update-mathlib</code> seems to overwrite <code>./src</code> instead of <code>_target/deps/mathlib/src</code></p>

<a name="184386640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184386640" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184386640">Etienne Laurin (Dec 28 2019 at 18:54)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> What does the <code>which pip</code> command say?</p>

<a name="184386655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184386655" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184386655">Kevin Buzzard (Dec 28 2019 at 18:55)</a>:</h4>
<p>I think I once did something which nobody should do with <code>pip</code>. I once googled this. This will be a python2 pip and I never use python2.</p>

<a name="184386704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184386704" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184386704">Kevin Buzzard (Dec 28 2019 at 18:56)</a>:</h4>
<p><code>pip3 install mathlibtools</code> works fine (but doesn't put update-mathlib anywhere where my path spots it)</p>

<a name="184386726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184386726" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184386726">Etienne Laurin (Dec 28 2019 at 18:57)</a>:</h4>
<p>What does the <code>which pip3</code> command report? It looks like you may be using a non-system pip3 from <code>/home/buzzard/.pyenv/bin</code></p>

<a name="184387358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184387358" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184387358">Patrick Massot (Dec 28 2019 at 19:15)</a>:</h4>
<p>Oops, this <code>src</code> issue is a bug I introduced while refactoring a bit. I shouldn't have done that at the same time.</p>

<a name="184387693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184387693" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184387693">Patrick Massot (Dec 28 2019 at 19:25)</a>:</h4>
<p><span class="user-mention" data-user-id="113071">@Etienne Laurin</span>  I pushed a fix to pypi, thanks!</p>

<a name="184387989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184387989" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184387989">Patrick Massot (Dec 28 2019 at 19:33)</a>:</h4>
<p>Ã‰tienne, can you confirm that installation worked for you without fiddling with PATH?</p>

<a name="184388501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184388501" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184388501">Etienne Laurin (Dec 28 2019 at 19:49)</a>:</h4>
<p>Yes, but I used a virtualenv and invoke update-mathlib using a relative path.</p>

<a name="184389311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184389311" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184389311">Patrick Massot (Dec 28 2019 at 20:15)</a>:</h4>
<p>What if you try a system install?</p>

<a name="184392266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184392266" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184392266">Etienne Laurin (Dec 28 2019 at 21:42)</a>:</h4>
<p><code>sudo pip3 install mathlibtools</code> installs  to my path but <code>pip3 install mathlib</code> doesn't.</p>

<a name="184392451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184392451" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184392451">Patrick Massot (Dec 28 2019 at 21:49)</a>:</h4>
<p>And can you see where <code>pip3 install</code> puts it? Is it in <code>$HOME/.local/bin</code>?</p>

<a name="184392505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184392505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184392505">Etienne Laurin (Dec 28 2019 at 21:51)</a>:</h4>
<p>Yep, that's where.</p>

<a name="184392560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184392560" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184392560">Patrick Massot (Dec 28 2019 at 21:53)</a>:</h4>
<p>Do you think this is still an improvement over the current situation? We currently need to tweak the path, but had control to where the script ended up. Now we loose control but it should end up in a more standard place.</p>

<a name="184392887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184392887" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184392887">Etienne Laurin (Dec 28 2019 at 22:02)</a>:</h4>
<p>I like that it's more universal, I don't have Ubuntu or Windows, the pip package makes it easier to use for me.</p>

<a name="184393031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pip%20install%20mathlibtools/near/184393031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/15827pipinstallmathlibtools.html#184393031">Patrick Massot (Dec 28 2019 at 22:07)</a>:</h4>
<p>Good. Thank you very much for testing this. I wish more people could try...</p>


{% endraw %}

{% include archive_update.html %}