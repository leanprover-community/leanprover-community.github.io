---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/79033modes.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html">modes</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="123188602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123188602" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123188602">Kevin Buzzard (Mar 02 2018 at 15:59)</a>:</h4>
<p>So what are these "modes"? Johannes talked about <code>smt</code> mode and <code>conv</code> mode. Do mathematician end users need to know about these modes yet? I have used a <code>conv</code> tactic -- is that related to <code>conv</code> mode? My understanding of these things is still very hazy. Is there any advice for making it better other than "look through the libraries and try to spot stuff"?</p>

<a name="123189330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123189330" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123189330">Mario Carneiro (Mar 02 2018 at 16:16)</a>:</h4>
<p>As you may have noticed, the <code>conv</code> tactic isn't really a self-contained tactic; it ends with a tactic block and you have to put other tactics in it. Inside that block, proof states look a little different and there are a different set of available tactics. That is a mode</p>

<a name="123192054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123192054" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123192054">Kevin Buzzard (Mar 02 2018 at 17:33)</a>:</h4>
<p>Can I hang out in <code>conv</code> mode like I hang out in what I call "tactic mode"? Is that the correct name for that mode? The place where I can access <code>tactic.interactive</code> stuff?</p>

<a name="123192190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123192190" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123192190">Sebastian Ullrich (Mar 02 2018 at 17:37)</a>:</h4>
<p>Yes, in mode $m you have access to tactics from namespace <code>$m.interactive</code></p>

<a name="123192195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123192195" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123192195">Sebastian Ullrich (Mar 02 2018 at 17:37)</a>:</h4>
<p>It doesn't make sense to enter conv mode without using <code>conv</code>, but you can e.g. enter smt mode using <code>begin [smt] ... end</code></p>

<a name="123193054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123193054" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123193054">Moses Sch√∂nfinkel (Mar 02 2018 at 18:02)</a>:</h4>
<p>Are we getting any closer to getting something like <code>omega</code> in <code>[smt]</code>?</p>

<a name="123193561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123193561" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123193561">Kevin Buzzard (Mar 02 2018 at 18:15)</a>:</h4>
<div class="codehilite"><pre><span></span>example : 2 + 2 = 4 := begin
  conv in (2 + 2 = 4) {
   -- wooah I&#39;m in conv mode
   -- there is no turnstile!
   -- goal is
   -- | 2 + 2 = 4
   -- what do I do now?
  }
end
</pre></div>

<a name="123193630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123193630" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123193630">Kevin Buzzard (Mar 02 2018 at 18:17)</a>:</h4>
<p>Yay! I can't unfold +! I can't do anything!</p>

<a name="123193847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123193847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123193847">Kevin Buzzard (Mar 02 2018 at 18:22)</a>:</h4>
<p>Is it <code>init/meta/converter/interactive.lean</code> I'm supposed to be looking at? (converter not conv)</p>

<a name="123193876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123193876" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123193876">Gabriel Ebner (Mar 02 2018 at 18:23)</a>:</h4>
<p>Yes.</p>

<a name="123193933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123193933" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123193933">Gabriel Ebner (Mar 02 2018 at 18:24)</a>:</h4>
<p>The idea is that the pipe shows you the current term that you rewrite.</p>

<a name="123193938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123193938" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123193938">Gabriel Ebner (Mar 02 2018 at 18:24)</a>:</h4>
<p>Try <code>to_lhs</code>, and you get to the left side of the equation.</p>

<a name="123193946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123193946" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123193946">Patrick Massot (Mar 02 2018 at 18:25)</a>:</h4>
<p>Almost each time I try <code>conv</code> it tells me it can't find the pattern</p>

<a name="123193952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123193952" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123193952">Gabriel Ebner (Mar 02 2018 at 18:25)</a>:</h4>
<p>If you do <code>whnf</code>, you convert the current subterm to WHNF.</p>

<a name="123193955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123193955" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123193955">Patrick Massot (Mar 02 2018 at 18:25)</a>:</h4>
<p>even if the pattern is <code>_</code></p>

<a name="123193963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123193963" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123193963">Gabriel Ebner (Mar 02 2018 at 18:25)</a>:</h4>
<p>I feel it's pretty buggy.</p>

<a name="123194009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123194009" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123194009">Patrick Massot (Mar 02 2018 at 18:26)</a>:</h4>
<p>Usually I wish I could use it to rewrite under a lambda</p>

<a name="123194014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123194014" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123194014">Patrick Massot (Mar 02 2018 at 18:26)</a>:</h4>
<p>But it very rarely succeeds</p>

<a name="123194016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123194016" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123194016">Kevin Buzzard (Mar 02 2018 at 18:26)</a>:</h4>
<p>Isn't that exactly what it's for?</p>

<a name="123194098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123194098" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123194098">Gabriel Ebner (Mar 02 2018 at 18:28)</a>:</h4>
<p>Something like this?</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">,</span> <span class="mi">0</span><span class="bp">+</span><span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">conv</span> <span class="o">{</span> <span class="n">to_lhs</span><span class="o">,</span> <span class="n">funext</span><span class="o">,</span> <span class="n">rw</span> <span class="err">‚Üê</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero_add</span> <span class="n">x</span> <span class="o">},</span>
<span class="kn">end</span>
</pre></div>

<a name="123194107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123194107" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123194107">Kevin Buzzard (Mar 02 2018 at 18:29)</a>:</h4>
<div class="codehilite"><pre><span></span>example : 2 + 2 = 4 := begin
  conv in (2 + 2) {
    whnf,
  },
  conv in (4) {
    whnf,
  },
end
</pre></div>

<a name="123194202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123194202" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123194202">Kevin Buzzard (Mar 02 2018 at 18:30)</a>:</h4>
<p>When I leave conv mode it closes a goal of the form <code>x=x</code>?</p>

<a name="123194224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123194224" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123194224">Gabriel Ebner (Mar 02 2018 at 18:31)</a>:</h4>
<p>Yes, it tries reflexivity and triv.</p>

<a name="123194249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123194249" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123194249">Patrick Massot (Mar 02 2018 at 18:31)</a>:</h4>
<p>I didn't know you could enter conv mode without <code>in</code> pattern</p>

<a name="123194306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123194306" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123194306">Gabriel Ebner (Mar 02 2018 at 18:32)</a>:</h4>
<p><code>in</code> just navigates to the specified subterm.  Otherwise you start at the top.</p>

<a name="123194358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123194358" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123194358">Kevin Buzzard (Mar 02 2018 at 18:33)</a>:</h4>
<blockquote>
<p>I didn't know you could enter conv mode without <code>in</code> pattern</p>
</blockquote>
<p>You learn about these things in the "modes" topic.</p>

<a name="123194486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123194486" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123194486">Patrick Massot (Mar 02 2018 at 18:35)</a>:</h4>
<p>What are the navigating commands inside conv mode? I see you wrote <code>to_lhs</code></p>

<a name="123194781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123194781" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123194781">Patrick Massot (Mar 02 2018 at 18:41)</a>:</h4>
<p>That <code>converter/interactive.lean</code> could have a bit more docstrings...</p>

<a name="123195234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123195234" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123195234">Gabriel Ebner (Mar 02 2018 at 18:51)</a>:</h4>
<p>There's also congr, which opens subgoals for all* arguments of the current term.<br>
*Well, whatever you can reach via congruence lemmas.</p>

<a name="123195289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123195289" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123195289">Patrick Massot (Mar 02 2018 at 18:52)</a>:</h4>
<p>I don't understand what that means</p>

<a name="123195392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123195392" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123195392">Patrick Massot (Mar 02 2018 at 18:54)</a>:</h4>
<p>What is a "goal for an argument"?</p>

<a name="123195447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123195447" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123195447">Gabriel Ebner (Mar 02 2018 at 18:55)</a>:</h4>
<p>Step through this example:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">5</span> <span class="o">:=</span> <span class="k">begin</span>
  <span class="n">conv</span> <span class="o">{</span>
    <span class="n">to_lhs</span><span class="o">,</span>
    <span class="n">congr</span><span class="o">,</span>
  <span class="o">},</span>
<span class="kn">end</span>
</pre></div>


<p>After to_lhs, you have one goal <code>| 2+2</code>.  If you then invoke <code>congr</code> you get two goals, <code>| 2</code> for the first argument of <code>+</code>, and <code>| 1</code> for the second argument.</p>

<a name="123195620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123195620" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123195620">Patrick Massot (Mar 02 2018 at 18:59)</a>:</h4>
<p>Ok, maybe the word "goal" is misleading here</p>

<a name="123195670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123195670" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123195670">Patrick Massot (Mar 02 2018 at 19:00)</a>:</h4>
<p>You mean branch the navigation to navigate to all arguments, right?</p>

<a name="123195708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123195708" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123195708">Gabriel Ebner (Mar 02 2018 at 19:01)</a>:</h4>
<p>I guess you could say that.</p>

<a name="123195725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123195725" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123195725">Gabriel Ebner (Mar 02 2018 at 19:01)</a>:</h4>
<p>Under the hood each of the branches is represented as a goal in the tactic state (e.g. as 2 = ?m_1), that's where I got the notation from.</p>

<a name="123196026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123196026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123196026">Patrick Massot (Mar 02 2018 at 19:08)</a>:</h4>
<p>After navigating to a subterm, what can you do besides rewrite and whnf?</p>

<a name="123196130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123196130" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123196130">Patrick Massot (Mar 02 2018 at 19:10)</a>:</h4>
<p>And if I arrive using congr at two goals but I want to act only on one, how can I leave some subterm unchanged?</p>

<a name="123196832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123196832" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123196832">Mario Carneiro (Mar 02 2018 at 19:29)</a>:</h4>
<p>It occurs to me that <code>norm_num</code> and <code>ring</code> should probably be available as <code>conv</code> tactics</p>

<a name="123196906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123196906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123196906">Mario Carneiro (Mar 02 2018 at 19:30)</a>:</h4>
<p>Maybe "target" is a better term than "goal" in the <code>conv</code> monad</p>

<a name="123197688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123197688" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123197688">Patrick Massot (Mar 02 2018 at 19:51)</a>:</h4>
<p>Indeed target sounds less confusing to me</p>

<a name="123197758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123197758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123197758">Patrick Massot (Mar 02 2018 at 19:52)</a>:</h4>
<p>And ring and norm_num would probably be useful here</p>

<a name="123198260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123198260" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123198260">Kevin Buzzard (Mar 02 2018 at 20:04)</a>:</h4>
<p>I was going to try to figure out smt now</p>

<a name="123198329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123198329" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123198329">Kevin Buzzard (Mar 02 2018 at 20:06)</a>:</h4>
<p>but I just got an email from Leo via github...</p>

<a name="123198332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123198332" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123198332">Kevin Buzzard (Mar 02 2018 at 20:06)</a>:</h4>
<p><a href="https://github.com/leanprover/lean/issues/1940#issuecomment-370014241" target="_blank" title="https://github.com/leanprover/lean/issues/1940#issuecomment-370014241">https://github.com/leanprover/lean/issues/1940#issuecomment-370014241</a></p>

<a name="123198351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123198351" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123198351">Patrick Massot (Mar 02 2018 at 20:06)</a>:</h4>
<p>Yeah the B‚É´DFL says we shouldn't use that</p>

<a name="123198381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123198381" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123198381">Patrick Massot (Mar 02 2018 at 20:07)</a>:</h4>
<p>This is really mysterious to me. I thought Leo came from the SMT world and wanted to bridge the gap between automated stuff and proofs assistants</p>

<a name="123201195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123201195" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123201195">Gabriel Ebner (Mar 02 2018 at 21:22)</a>:</h4>
<p>I think Leo has drawn conclusions from his experience with Z3 and SMT in general.  He believes that users are often encoding straightforward problems in very roundabout ways just because they want to fit it into the language of SMT.  This is not the best way to solve these problems.  I remember two stories that he kept telling:</p>

<a name="123201393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123201393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123201393">Gabriel Ebner (Mar 02 2018 at 21:27)</a>:</h4>
<p>1) Somebody was using Z3 to solve physics problems.  They took measurements using a camera and (I think) gave equations to Z3 that constrained the position of an object.  However they formulated them as a problem in real arithmetic, which is somewhat expensive to decide.  Inexact numeric methods would have been a better choice here.  (Ok, this story doesn't really say anything against SMT in Lean..)</p>

<a name="123201475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123201475" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123201475">Scott Morrison (Mar 02 2018 at 21:28)</a>:</h4>
<p>(and of course the problem with these stories is that failures get blamed on the back-end, not the user's choice of encoding, I guess)</p>

<a name="123201606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123201606" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123201606">Gabriel Ebner (Mar 02 2018 at 21:31)</a>:</h4>
<p>2) The dependently-typed language F* uses Z3 to discharge verification conditions.  They have a wonderful paper on how to write an evaluator using e-matching.  (see <a href="http://hatt2016.inria.fr/program/" target="_blank" title="http://hatt2016.inria.fr/program/">http://hatt2016.inria.fr/program/</a>)  Essentially, they output several megabytes of essentially first-order formulas just so that Z3 evaluates an expression like <code>simp</code> would.</p>

<a name="123202134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123202134" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123202134">Gabriel Ebner (Mar 02 2018 at 21:42)</a>:</h4>
<p>This one is more my own impression: SMT solvers (and theorem provers in general) have quite a bit of heuristics built-in so that they can handle many problems.  However, just going by heuristics is often brittle.  For example, Z3 has its own tactics language to specify the global proof search strategy.  <a href="https://link.springer.com/chapter/10.1007/978-3-642-36675-8_2" target="_blank" title="https://link.springer.com/chapter/10.1007/978-3-642-36675-8_2">https://link.springer.com/chapter/10.1007/978-3-642-36675-8_2</a>  I think Leo wants to do something like this in Lean.  That is, the automated theorem should not do any case-splits, other non-deterministic, or potentially expensive reasoning by default.  Instead the user should explicitly specify the expensive steps using tactics.  This approach could be less brittle and more performant than heuristic strategies.</p>

<a name="123202211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123202211" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123202211">Gabriel Ebner (Mar 02 2018 at 21:44)</a>:</h4>
<p>This was also pretty much his answer when I asked him, "why doesn't Lean have the SAT part of SMT?"  He seems to have a bit of bad experience with unreliable proofs in Z3.</p>

<a name="123202248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123202248" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123202248">Patrick Massot (Mar 02 2018 at 21:45)</a>:</h4>
<p>What about all these answers like "smt will do that, so let's not try something else" when Coq people asked for omega or other automatic tactics?</p>

<a name="123202309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123202309" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123202309">Moses Sch√∂nfinkel (Mar 02 2018 at 21:47)</a>:</h4>
<p>It will do that once it's in a state where users can specify the expensive steps, I guess :)?</p>

<a name="123202319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123202319" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123202319">Moses Sch√∂nfinkel (Mar 02 2018 at 21:47)</a>:</h4>
<p>Either way, thank you very much for the insight <span class="user-mention" data-user-email="gebner@gebner.org" data-user-id="110043">@Gabriel Ebner</span> .</p>

<a name="123202374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123202374" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123202374">Patrick Massot (Mar 02 2018 at 21:48)</a>:</h4>
<p>Yes, thanks for all your explanations today</p>

<a name="123202390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123202390" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123202390">Gabriel Ebner (Mar 02 2018 at 21:49)</a>:</h4>
<p>I don't know what discussion happened about omega.  I think Leo wants to have omega in the long-term future, but it's not blocking anything right now and it's not scientifically interesting either.  At that point, omega will probably work in SMT mode (if it still exists).  BTW, you can lift any tactic to SMT, so you could use <code>ring</code> as omega--.</p>

<a name="123202401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123202401" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123202401">Gabriel Ebner (Mar 02 2018 at 21:49)</a>:</h4>
<p><span class="user-mention" data-user-email="di.gama@gmail.com" data-user-id="110049">@Mario Carneiro</span> said he wanted to do omega in summer, but I'm not sure what came of that.</p>

<a name="123202449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123202449" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123202449">Patrick Massot (Mar 02 2018 at 21:50)</a>:</h4>
<p>When I'll have more time I'll try to write everything I understood about conv (from today's explanations and earlier examples) so that won't be totally lost</p>

<a name="123202482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123202482" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123202482">Patrick Massot (Mar 02 2018 at 21:51)</a>:</h4>
<p>I don't really know what omega is meant to do but it seem to help with computation. And computations are really the most inconvenient part of Lean I've seen</p>

<a name="123202556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123202556" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123202556">Gabriel Ebner (Mar 02 2018 at 21:53)</a>:</h4>
<p>It decides linear integer arithmetic (Presburger arithmetic), but only in one of the versions of natural numbers and integers in the Coq standard library.  (They have quite a few versions...)</p>

<a name="123202694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123202694" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123202694">Patrick Massot (Mar 02 2018 at 21:56)</a>:</h4>
<p>Ok, it seems less crucial than ring and field (or a version for vector space that would be really awesome)</p>

<a name="123202709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123202709" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123202709">Moses Sch√∂nfinkel (Mar 02 2018 at 21:57)</a>:</h4>
<p>Not the case when you're certifying software! :)</p>

<a name="123202975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123202975" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123202975">Patrick Massot (Mar 02 2018 at 22:02)</a>:</h4>
<p>I see. But remember Lean is mathematics friendly (doesn't care too much about constructivism, has documentation mentioning theorem in the title and not referring to Haskell or ML at every page etc...)</p>

<a name="123203579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123203579" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123203579">Andrew Ashworth (Mar 02 2018 at 22:17)</a>:</h4>
<blockquote>
<p>I see. But remember Lean is mathematics friendly (doesn't care too much about constructivism, has documentation mentioning theorem in the title and not referring to Haskell or ML at every page etc...)</p>
</blockquote>
<p>I think you might be confusing Jeremy and his CMU group with Leo :) That Lean is useful for mathematicians is a happy side-effect of Lean being useful for certifying software.</p>

<a name="123206234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123206234" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123206234">Sebastian Ullrich (Mar 02 2018 at 23:31)</a>:</h4>
<p>I believe there is a bad bug in <code>conv</code> that makes it fail with "failed to match pattern" if the conv tactic block fails... I never fixed it because I don't really use it</p>

<a name="123220123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123220123" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123220123">Patrick Massot (Mar 03 2018 at 07:50)</a>:</h4>
<p>That explains everything I saw when trying <code>conv</code>! Should I open an issue then? Or it enough to <span class="emoji emoji-1f64f" title="pray">:pray:</span> here?</p>

<a name="123220213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123220213" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123220213">Mario Carneiro (Mar 03 2018 at 07:54)</a>:</h4>
<p>Best stick to prayer. Gabriel and Sebastian are the only ones in a position to fix this if they wish, and they read this chat so consider them informed. Leo isn't going to do anything about "misleading error messages", so reporting it is just counterproductive these days.</p>

<a name="123227720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123227720" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123227720">Kevin Buzzard (Mar 03 2018 at 13:19)</a>:</h4>
<blockquote>
<p>That explains everything I saw when trying <code>conv</code>! Should I open an issue then? Or it enough to <span class="emoji emoji-1f64f" title="pray">:pray:</span> here?</p>
</blockquote>
<p>I guess I have had the same experience with conv as Patrick -- it has failed for me in exactly the same way (but in contrast to Sebastian I, probably like Patrick, just assumed it was me that was at fault). It's nice to be aware of the bug but now I realise that one can use it in interactive mode I feel like I have a good workaround.</p>

<a name="123239014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123239014" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123239014">Simon Hudon (Mar 03 2018 at 20:45)</a>:</h4>
<p>Are error messages something that could be fixed with patches from the community? I mean maybe we could learn to fix it ourselves and just submit those changes.</p>

<a name="123239699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123239699" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123239699">Kevin Buzzard (Mar 03 2018 at 21:11)</a>:</h4>
<p>I just think he wants everyone to leave him alone.</p>

<a name="123239740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123239740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123239740">Kevin Buzzard (Mar 03 2018 at 21:12)</a>:</h4>
<p>And my impression is that we're doing that quite well recently. I've certainly sat on a couple of minor things rather than reporting trivial bugs</p>

<a name="123256892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123256892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123256892">Patrick Massot (Mar 04 2018 at 09:02)</a>:</h4>
<p>Of course I also assumed it was my fault, especially since I understood very little of what conv was meant to do. I agree that knowing existence of this bug should be enough to mostly avoid it. But it would still be much nicer if <span class="user-mention" data-user-email="sebasti@nullri.ch" data-user-id="110024">@Sebastian Ullrich</span> could fix it.</p>

<a name="123275496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123275496" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123275496">Patrick Massot (Mar 04 2018 at 21:44)</a>:</h4>
<blockquote>
<p>Yes, it tries reflexivity and triv.</p>
</blockquote>
<p>[in the above quote, "it" refers to Lean when closing a <code>conv</code> block]</p>

<a name="123275497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123275497" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123275497">Patrick Massot (Mar 04 2018 at 21:44)</a>:</h4>
<p>Not quite</p>

<a name="123275508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123275508" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123275508">Patrick Massot (Mar 04 2018 at 21:45)</a>:</h4>
<p>It tries to close the goal when it really becomes <code>x = x</code>,  not <code>x' = x</code> with <code>x'</code> defeq <code>x</code></p>

<a name="123275597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123275597" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123275597">Patrick Massot (Mar 04 2018 at 21:48)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">‚Ñï</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">conv</span> <span class="o">{</span> <span class="n">to_lhs</span><span class="o">,</span> <span class="n">whnf</span> <span class="o">},</span>
<span class="n">trivial</span>
<span class="kn">end</span>
</pre></div>


<p>wouldn't work without that <code>trivial</code> (or <code>refl</code>)</p>

<a name="123276612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123276612" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123276612">Patrick Massot (Mar 04 2018 at 22:27)</a>:</h4>
<blockquote>
<p>When I'll have more time I'll try to write everything I understood about conv (from today's explanations and earlier examples) so that won't be totally lost</p>
</blockquote>
<p>see <a href="https://github.com/PatrickMassot/mathlib/blob/docs-conv/docs/extras/conv.md" target="_blank" title="https://github.com/PatrickMassot/mathlib/blob/docs-conv/docs/extras/conv.md">https://github.com/PatrickMassot/mathlib/blob/docs-conv/docs/extras/conv.md</a></p>

<a name="123276616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123276616" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123276616">Patrick Massot (Mar 04 2018 at 22:27)</a>:</h4>
<p>I opened a WIP PR at <a href="https://github.com/leanprover/mathlib/pull/73" target="_blank" title="https://github.com/leanprover/mathlib/pull/73">https://github.com/leanprover/mathlib/pull/73</a> so that people can add comments in a Github review</p>

<a name="123276655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123276655" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123276655">Patrick Massot (Mar 04 2018 at 22:28)</a>:</h4>
<p>Of course I'd like <span class="user-mention" data-user-email="gebner@gebner.org" data-user-id="110043">@Gabriel Ebner</span> to check what I wrote. But I would also like to read comments from people who don't know much about this converter mode.</p>

<a name="123277695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123277695" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123277695">Kevin Buzzard (Mar 04 2018 at 23:10)</a>:</h4>
<p>That looks fine to me. Somehow conv looks much easier to use now I realise I can use it interactively.</p>

<a name="123291923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123291923" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123291923">Patrick Massot (Mar 05 2018 at 08:17)</a>:</h4>
<p>Exactly: once explained, this is easy. The trap is to conclude this doesn't need documentation</p>

<a name="123291970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123291970" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123291970">Patrick Massot (Mar 05 2018 at 08:18)</a>:</h4>
<p>To be fair, the documentation is the change log was already very efficient. Without the pattern matching bug (now promoted "well known documented bug") it may have been enough to figure it out without Gabriel's help.</p>

<a name="123294559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123294559" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123294559">Patrick Massot (Mar 05 2018 at 09:43)</a>:</h4>
<p>Quick poll: <span class="user-mention" data-user-email="sebasti@nullri.ch" data-user-id="110024">@Sebastian Ullrich</span> what do you think the abbreviation <code>conv</code>stands for?</p>

<a name="123294697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123294697" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123294697">Sebastian Ullrich (Mar 05 2018 at 09:47)</a>:</h4>
<p>convolution, obviously</p>

<a name="123294708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123294708" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123294708">Patrick Massot (Mar 05 2018 at 09:47)</a>:</h4>
<p><span class="emoji emoji-1f604" title="smile">:smile:</span> Please answer seriously (unless you already saw the discussion about it on Github)</p>

<a name="123294754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123294754" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123294754">Kevin Buzzard (Mar 05 2018 at 09:48)</a>:</h4>
<p>Patrick is trying to figure out if it's conversion or converter</p>

<a name="123294756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123294756" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123294756">Kevin Buzzard (Mar 05 2018 at 09:48)</a>:</h4>
<p>for the docs</p>

<a name="123294823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123294823" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123294823">Patrick Massot (Mar 05 2018 at 09:50)</a>:</h4>
<p>Convolution always make great jokes. When I was a third student, my algebra teacher asked the audience "do you know a commutative ring without unit?". After some silence, someone answered: "integrable functions on R with usual addition and the convolution product". The algebra teacher turned slightly green and, after a few seconds, recovered and  told us: "what about even integers?".</p>

<a name="123294829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123294829" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123294829">Kevin Buzzard (Mar 05 2018 at 09:50)</a>:</h4>
<p>even integers are a pathological example</p>

<a name="123294833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123294833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123294833">Kevin Buzzard (Mar 05 2018 at 09:50)</a>:</h4>
<p>the first one comes up in the real world</p>

<a name="123294843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123294843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123294843">Kevin Buzzard (Mar 05 2018 at 09:51)</a>:</h4>
<p>it works for the p-adics  too</p>

<a name="123294893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123294893" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123294893">Patrick Massot (Mar 05 2018 at 09:52)</a>:</h4>
<p>I think he only wanted to emphasize why ideals are not subrings (knowing that we agreed rings have a unit)</p>

<a name="123294901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123294901" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123294901">Sebastian Ullrich (Mar 05 2018 at 09:53)</a>:</h4>
<p>I did see the Github thread already, unfortunately. I have no strong feelings in either direction.</p>

<a name="123294907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123294907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123294907">Patrick Massot (Mar 05 2018 at 09:53)</a>:</h4>
<p>And the teacher was <a href="http://www.mathematik.uni-stuttgart.de/~geckmf/" target="_blank" title="http://www.mathematik.uni-stuttgart.de/~geckmf/">http://www.mathematik.uni-stuttgart.de/~geckmf/</a> I don't think he sees convolution products in the real world</p>

<a name="123294912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123294912" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123294912">Moses Sch√∂nfinkel (Mar 05 2018 at 09:53)</a>:</h4>
<p>You've missed an <em>excellent</em> bikeshedding opportunity.</p>

<a name="123295026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123295026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123295026">Kevin Buzzard (Mar 05 2018 at 09:56)</a>:</h4>
<p>Given the choice between some tedious assertion violation or the chance to weigh in on what <code>conv</code> actually means, I'm surprised he didn't take the bait!</p>

<a name="123295093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123295093" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123295093">Patrick Massot (Mar 05 2018 at 09:58)</a>:</h4>
<p>He is a wise guy. He saw <a href="https://github.com/leanprover/lean/blob/d6d44a19947e2575b3fceed6d61167d258c661fb/library/init/meta/converter/conv.lean#L4" target="_blank" title="https://github.com/leanprover/lean/blob/d6d44a19947e2575b3fceed6d61167d258c661fb/library/init/meta/converter/conv.lean#L4">God</a> already decided.</p>

<a name="123314188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123314188" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123314188">Patrick Massot (Mar 05 2018 at 19:13)</a>:</h4>
<p>What should I do with this converter vs conversion? Follow Leo or tradition?</p>

<a name="123315696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123315696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123315696">Mario Carneiro (Mar 05 2018 at 19:51)</a>:</h4>
<p>My guess is this is a non-native speakerism</p>

<a name="123315807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123315807" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123315807">Patrick Massot (Mar 05 2018 at 19:53)</a>:</h4>
<p>I can understand that</p>

<a name="123315845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123315845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123315845">Patrick Massot (Mar 05 2018 at 19:54)</a>:</h4>
<p>It does not tell what to do</p>

<a name="123315858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123315858" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123315858">Kevin Buzzard (Mar 05 2018 at 19:54)</a>:</h4>
<p>Go with tradition</p>

<a name="123315863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123315863" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123315863">Kevin Buzzard (Mar 05 2018 at 19:54)</a>:</h4>
<p>but put a warning that Leo can change things at any time and then the docs will be broken</p>

<a name="123315896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123315896" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123315896">Patrick Massot (Mar 05 2018 at 19:55)</a>:</h4>
<p>Writing conversion instead of converter would not break any code in the documentation</p>

<a name="123315912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123315912" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123315912">Patrick Massot (Mar 05 2018 at 19:56)</a>:</h4>
<p>The full name is used only in the name (which does not need to be explicitly imported since it's in init) and docstrings</p>

<a name="123317131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123317131" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123317131">Patrick Massot (Mar 05 2018 at 20:27)</a>:</h4>
<p>Hum, the name is also used in the infamous error message: "find converter  failed, pattern was not found"</p>

<a name="123317173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123317173" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123317173">Patrick Massot (Mar 05 2018 at 20:28)</a>:</h4>
<p>Now I have a sentence containing both versions (I did not dare correcting the error message)</p>

<a name="123344153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123344153" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123344153">Sebastian Ullrich (Mar 06 2018 at 10:19)</a>:</h4>
<p>Whelp, now I remember why I didn't fix the error message. <code>conv</code> uses <code>tactic.ext_simplify_core</code>, which doesn't really allow propagating errors.</p>

<a name="123344257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123344257" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123344257">Patrick Massot (Mar 06 2018 at 10:22)</a>:</h4>
<p>So it would be really complicated to fix?</p>

<a name="123344448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/modes/near/123344448" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79033modes.html#123344448">Sebastian Ullrich (Mar 06 2018 at 10:29)</a>:</h4>
<p>It's not trivial at least</p>


{% endraw %}
