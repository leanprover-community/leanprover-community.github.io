---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/86990letinstructure.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html">let in structure</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="127451506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451506" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451506">Kevin Buzzard (Jun 02 2018 at 05:47)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">foo</span> <span class="o">:=</span>
<span class="k">let</span> <span class="n">bar</span> <span class="o">:=</span> <span class="bp">ℕ</span> <span class="k">in</span>
<span class="o">(</span><span class="mi">3</span> <span class="o">:</span> <span class="n">bar</span><span class="o">)</span>
</pre></div>

<a name="127451510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451510" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451510">Kevin Buzzard (Jun 02 2018 at 05:47)</a>:</h4>
<p>doesn't work</p>

<a name="127451512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451512" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451512">Kevin Buzzard (Jun 02 2018 at 05:47)</a>:</h4>
<p>moans about the let</p>

<a name="127451518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451518" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451518">Kevin Buzzard (Jun 02 2018 at 05:47)</a>:</h4>
<p>Am I doomed to write <code>power_bounded_elements R</code> throughout this entire definition?</p>

<a name="127451561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451561" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451561">Johan Commelin (Jun 02 2018 at 05:48)</a>:</h4>
<p>well, we can make some notation for it, right?</p>

<a name="127451618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451618" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451618">Johan Commelin (Jun 02 2018 at 05:50)</a>:</h4>
<p>Isn't double-superscript-circ common for this?</p>

<a name="127451693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451693" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451693">Kevin Buzzard (Jun 02 2018 at 05:53)</a>:</h4>
<p>aah here notation will solve my problem</p>

<a name="127451695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451695" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451695">Kevin Buzzard (Jun 02 2018 at 05:53)</a>:</h4>
<p>wait</p>

<a name="127451697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451697" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451697">Kevin Buzzard (Jun 02 2018 at 05:53)</a>:</h4>
<p>oh I have to leave the stupid gap</p>

<a name="127451738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451738" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451738">Kevin Buzzard (Jun 02 2018 at 05:54)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mtext> </mtext><msup><mrow></mrow><mo>∘</mo></msup></mrow><annotation encoding="application/x-tex">R\ {}^\circ</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord"><span class="mspace"> </span><span class="mord"></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.674115em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∘</span></span></span></span></span></span></span></span></span></span></span></p>

<a name="127451740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451740">Kevin Buzzard (Jun 02 2018 at 05:54)</a>:</h4>
<p>need the gap because of some fussy tokenizer</p>

<a name="127451804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451804">Johan Commelin (Jun 02 2018 at 05:57)</a>:</h4>
<p>It feels a bit like we are back to the typography of SGA etc, doesn't it?</p>

<a name="127451805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451805" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451805">Andrew Ashworth (Jun 02 2018 at 05:57)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">bar</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span> <span class="bp">ℕ</span>

<span class="kn">structure</span> <span class="n">foo</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">bar</span><span class="o">)</span>
</pre></div>


<p>I am unsure how to choose between notation and defs when you don't need infix/postfix parsing</p>

<a name="127451843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451843">Simon Hudon (Jun 02 2018 at 05:58)</a>:</h4>
<p>I assume you're making it into a postfix operator. Why not make the whole thing (<code>R∘</code>) a notation?</p>

<a name="127451851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451851">Johan Commelin (Jun 02 2018 at 05:58)</a>:</h4>
<p>You mean including the R?</p>

<a name="127451853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451853" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451853">Simon Hudon (Jun 02 2018 at 05:58)</a>:</h4>
<p>Exactly</p>

<a name="127451854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451854" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451854">Johan Commelin (Jun 02 2018 at 05:58)</a>:</h4>
<p>But that's variable</p>

<a name="127451861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451861" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451861">Kevin Buzzard (Jun 02 2018 at 05:59)</a>:</h4>
<p><code>notation : R `ᵒ` := power_bounded_subring R</code></p>

<a name="127451862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451862" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451862">Kevin Buzzard (Jun 02 2018 at 05:59)</a>:</h4>
<p>How does notation work? I never know. I need some notation notes</p>

<a name="127451863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451863" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451863">Simon Hudon (Jun 02 2018 at 05:59)</a>:</h4>
<p>If you declare it with <code>variable</code>, and make your notation local, that should be ok</p>

<a name="127451864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451864" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451864">Kevin Buzzard (Jun 02 2018 at 05:59)</a>:</h4>
<p>I know I can search through TPIL</p>

<a name="127451865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451865" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451865">Johan Commelin (Jun 02 2018 at 05:59)</a>:</h4>
<p>Yay for Zulip's parsing of "`".</p>

<a name="127451866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451866" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451866">Simon Hudon (Jun 02 2018 at 05:59)</a>:</h4>
<p>Use more ticks until it works</p>

<a name="127451867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451867" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451867">Kevin Buzzard (Jun 02 2018 at 05:59)</a>:</h4>
<p>right</p>

<a name="127451870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451870" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451870">Kevin Buzzard (Jun 02 2018 at 06:00)</a>:</h4>
<p>I use two outer ticks</p>

<a name="127451919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451919" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451919">Johan Commelin (Jun 02 2018 at 06:00)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> Aah, it's not <code>variable</code> like that. It is really variable in the notation.</p>

<a name="127451920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451920" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451920">Johan Commelin (Jun 02 2018 at 06:00)</a>:</h4>
<p>Like <code>x</code> and <code>y</code> in <code>x + y</code>.</p>

<a name="127451923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451923" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451923">Kevin Buzzard (Jun 02 2018 at 06:00)</a>:</h4>
<p>I can't get the notation to work though</p>

<a name="127451934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451934" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451934">Simon Hudon (Jun 02 2018 at 06:01)</a>:</h4>
<p>I must have misunderstood. I thought you wanted a local shorthand for the current file.</p>

<a name="127451935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451935" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451935">Johan Commelin (Jun 02 2018 at 06:01)</a>:</h4>
<p>Hmm, but now you didn't leave a gap in the ticks.</p>

<a name="127451980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451980">Johan Commelin (Jun 02 2018 at 06:02)</a>:</h4>
<p>I think it wants spaces around the <code>\circ</code></p>

<a name="127451981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451981" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451981">Simon Hudon (Jun 02 2018 at 06:02)</a>:</h4>
<p>Otherwise, you can use <code>postfix `ᵒ` := power_bounded_subring</code></p>

<a name="127451983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451983" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451983">Kevin Buzzard (Jun 02 2018 at 06:02)</a>:</h4>
<p>oh that looks like a nicer way to do it</p>

<a name="127451988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451988">Kevin Buzzard (Jun 02 2018 at 06:03)</a>:</h4>
<p>it wants a number</p>

<a name="127451990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127451990" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127451990">Kevin Buzzard (Jun 02 2018 at 06:03)</a>:</h4>
<p><code>postfix `ᵒ` : 37 := power_bounded_subring</code></p>

<a name="127452028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452028" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452028">Kevin Buzzard (Jun 02 2018 at 06:04)</a>:</h4>
<p>that should do it</p>

<a name="127452034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452034" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452034">Kevin Buzzard (Jun 02 2018 at 06:04)</a>:</h4>
<p>I must say, operator precedence is something else I am not sure I have a good feeling about</p>

<a name="127452035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452035">Kevin Buzzard (Jun 02 2018 at 06:04)</a>:</h4>
<p>I guess I want this one to be very sticky</p>

<a name="127452042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452042" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452042">Kevin Buzzard (Jun 02 2018 at 06:05)</a>:</h4>
<p>so should it be like 6 or 999999?</p>

<a name="127452044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452044" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452044">Simon Hudon (Jun 02 2018 at 06:05)</a>:</h4>
<p>To be fair, I'm not fond of putting precedence on a linear scale. I feel like specifying a partial order would be easier</p>

<a name="127452083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452083" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452083">Kevin Buzzard (Jun 02 2018 at 06:06)</a>:</h4>
<p>OK how about this:</p>

<a name="127452086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452086" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452086">Kevin Buzzard (Jun 02 2018 at 06:06)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">perfectoid_ring</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">is_prime</span> <span class="n">p</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">Tate_ring</span> <span class="n">R</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">is_complete</span> <span class="o">:</span> <span class="n">complete</span> <span class="n">R</span><span class="o">)</span>
<span class="o">(</span><span class="n">is_uniform</span>  <span class="o">:</span> <span class="n">uniform</span> <span class="n">R</span><span class="o">)</span>
<span class="o">(</span><span class="n">ramified</span>    <span class="o">:</span> <span class="bp">∃</span> <span class="n">ω</span> <span class="o">:</span> <span class="n">R</span> <span class="err">ᵒ</span><span class="o">,</span>
                 <span class="o">(</span><span class="n">is_pseudo_uniformizer</span> <span class="n">ω</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">ω</span> <span class="err">^</span> <span class="n">p</span> <span class="err">∣</span> <span class="n">p</span><span class="o">))</span>
 <span class="o">(</span><span class="n">Frob</span>       <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">R</span> <span class="err">ᵒ</span><span class="o">,</span>
                 <span class="bp">∃</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">R</span> <span class="err">ᵒ</span><span class="o">,</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="err">^</span> <span class="n">p</span> <span class="bp">+</span> <span class="n">p</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span>
</pre></div>

<a name="127452087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452087">Simon Hudon (Jun 02 2018 at 06:06)</a>:</h4>
<p>Think about the operators that are likely to appear in the same formula (including <code>=</code>) and what should take precedence</p>

<a name="127452094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452094" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452094">Kevin Buzzard (Jun 02 2018 at 06:07)</a>:</h4>
<p>I want the circ to take precedence in the sense that I want R circ being evaluated ASAP</p>

<a name="127452097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452097" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452097">Kevin Buzzard (Jun 02 2018 at 06:07)</a>:</h4>
<p>i.e. <code>A x B o</code> is definitely <code>A x (B o)</code></p>

<a name="127452098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452098" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452098">Simon Hudon (Jun 02 2018 at 06:07)</a>:</h4>
<p>precedence and evaluation order are not the same</p>

<a name="127452099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452099" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452099">Kevin Buzzard (Jun 02 2018 at 06:07)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> I reckon that looks fairly readable</p>

<a name="127452139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452139" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452139">Kevin Buzzard (Jun 02 2018 at 06:08)</a>:</h4>
<p>Simon I don't know anything about this stuff</p>

<a name="127452140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452140" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452140">Johan Commelin (Jun 02 2018 at 06:08)</a>:</h4>
<p>Yes, this looks very good. I hope you can maintain this throughout the top-down approach.</p>

<a name="127452141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452141" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452141">Kevin Buzzard (Jun 02 2018 at 06:08)</a>:</h4>
<p>and I know I can learn it but I'm not that interested in it</p>

<a name="127452144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452144" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452144">Simon Hudon (Jun 02 2018 at 06:08)</a>:</h4>
<p>I'll leave you guys to it</p>

<a name="127452145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452145" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452145">Kevin Buzzard (Jun 02 2018 at 06:08)</a>:</h4>
<p>do you have a good suggestion for a number?</p>

<a name="127452150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452150" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452150">Kevin Buzzard (Jun 02 2018 at 06:09)</a>:</h4>
<p>or else I'll leave it as 37 :-/</p>

<a name="127452151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452151" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452151">Mario Carneiro (Jun 02 2018 at 06:09)</a>:</h4>
<p>same as unary minus?</p>

<a name="127452157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452157">Mario Carneiro (Jun 02 2018 at 06:09)</a>:</h4>
<p>which is 65</p>

<a name="127452159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452159" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452159">Simon Hudon (Jun 02 2018 at 06:09)</a>:</h4>
<p>That looks like asking for trouble. Go one over or one below</p>

<a name="127452198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452198">Johan Commelin (Jun 02 2018 at 06:10)</a>:</h4>
<p>Is there anything below <code>50</code> at the moment?</p>

<a name="127452201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452201" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452201">Mario Carneiro (Jun 02 2018 at 06:10)</a>:</h4>
<p>tons</p>

<a name="127452203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452203" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452203">Mario Carneiro (Jun 02 2018 at 06:10)</a>:</h4>
<p>propositional stuff mostly</p>

<a name="127452208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452208" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452208">Mario Carneiro (Jun 02 2018 at 06:10)</a>:</h4>
<p>50 is <code>=</code>, so that's about as low as you get for atomic propositions</p>

<a name="127452209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452209" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452209">Kevin Buzzard (Jun 02 2018 at 06:10)</a>:</h4>
<p>ha ha (-Ro) -- is that what you're worried about Simon?</p>

<a name="127452212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452212" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452212">Mario Carneiro (Jun 02 2018 at 06:10)</a>:</h4>
<p>but types go lower than that</p>

<a name="127452213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452213" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452213">Kevin Buzzard (Jun 02 2018 at 06:10)</a>:</h4>
<p>can that sort of thing be an issue?</p>

<a name="127452216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452216" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452216">Mario Carneiro (Jun 02 2018 at 06:11)</a>:</h4>
<p>equal isn't really a problem</p>

<a name="127452219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452219" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452219">Mario Carneiro (Jun 02 2018 at 06:11)</a>:</h4>
<p>in fact it's important for having things be at the same level, like <code>a + b - c</code></p>

<a name="127452220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452220" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452220">Mario Carneiro (Jun 02 2018 at 06:11)</a>:</h4>
<p>which is left associated regardless of whether <code>+</code> or <code>-</code> comes first</p>

<a name="127452267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452267" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452267">Johan Commelin (Jun 02 2018 at 06:13)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> If you want to squeeze out a little bit more readability, then maybe <code>Frob</code> should be phrased as a statement modulo <code>p</code>.</p>

<a name="127452268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452268" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452268">Mario Carneiro (Jun 02 2018 at 06:13)</a>:</h4>
<p>there aren't many postfix operators in standard lean; there is <code>⁻¹</code> which has a crazy high precedence <code>max+10</code></p>

<a name="127452307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452307" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452307">Simon Hudon (Jun 02 2018 at 06:14)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I'm not sure what Lean does in that kind of situation and I can't think of reasons why either of (-R)o or -(Ro) would be always the best default</p>

<a name="127452309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452309" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452309">Kevin Buzzard (Jun 02 2018 at 06:14)</a>:</h4>
<p>I wasn't sure how to do quotient rings in Lean</p>

<a name="127452310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452310" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452310">Johan Commelin (Jun 02 2018 at 06:14)</a>:</h4>
<p>But I guess, you rather prefer avoiding quotients.</p>

<a name="127452311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452311" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452311">Kevin Buzzard (Jun 02 2018 at 06:14)</a>:</h4>
<p>actually I recently learnt how to use quotient types</p>

<a name="127452312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452312" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452312">Kevin Buzzard (Jun 02 2018 at 06:14)</a>:</h4>
<p>I was forced to</p>

<a name="127452313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452313" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452313">Mario Carneiro (Jun 02 2018 at 06:14)</a>:</h4>
<p>All notations come with a binding power, whichever is higher wins</p>

<a name="127452315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452315" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452315">Kevin Buzzard (Jun 02 2018 at 06:14)</a>:</h4>
<p>I needed direct limits and Kenny's work is still not in mathlib</p>

<a name="127452321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452321" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452321">Mario Carneiro (Jun 02 2018 at 06:15)</a>:</h4>
<p>that includes mixing pre/postfix</p>

<a name="127452322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452322" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452322">Johan Commelin (Jun 02 2018 at 06:15)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> In both cases the unary minus doens't make much sense. (At least not in contemporary maths. Maybe someone wants to overload it, but that thought gives me shudders...)</p>

<a name="127452324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452324" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452324">Johan Commelin (Jun 02 2018 at 06:15)</a>:</h4>
<p>So I guess in practice there won't be a problem.</p>

<a name="127452364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452364" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452364">Mario Carneiro (Jun 02 2018 at 06:16)</a>:</h4>
<p>Since <code>R o</code> here is a type it really doesn't matter as long as it's higher than 50 or so</p>

<a name="127452372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452372" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452372">Johan Commelin (Jun 02 2018 at 06:17)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I told you before that <code>57</code> is a better default value than <code>37</code>! Grothendieck was careful when choosing his prime!</p>

<a name="127452378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452378" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452378">Mario Carneiro (Jun 02 2018 at 06:17)</a>:</h4>
<p>lol it would be funny if all the notation precedences were primes just because</p>

<a name="127452379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452379" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452379">Johan Commelin (Jun 02 2018 at 06:17)</a>:</h4>
<p>Ooh, now I have a crazy question. What is the type of <code>65</code> in the notation for unary minus? Does it even have a type?</p>

<a name="127452420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452420" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452420">Mario Carneiro (Jun 02 2018 at 06:18)</a>:</h4>
<p>It was once <code>num</code>, which was for a long time the only use of <code>num</code>. Now it's <code>nat</code></p>

<a name="127452423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452423" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452423">Kevin Buzzard (Jun 02 2018 at 06:18)</a>:</h4>
<p><code>instance p : nat</code></p>

<a name="127452424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452424" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452424">Kevin Buzzard (Jun 02 2018 at 06:18)</a>:</h4>
<p>Does this lead me into trouble?</p>

<a name="127452425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452425" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452425">Kevin Buzzard (Jun 02 2018 at 06:18)</a>:</h4>
<p>I am sick of this p</p>

<a name="127452430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452430" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452430">Kevin Buzzard (Jun 02 2018 at 06:19)</a>:</h4>
<p>I want access to it at all times and yet I never want to carry it around</p>

<a name="127452434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452434">Kevin Buzzard (Jun 02 2018 at 06:19)</a>:</h4>
<p>It's a global variable</p>

<a name="127452435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452435" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452435">Mario Carneiro (Jun 02 2018 at 06:19)</a>:</h4>
<p>see e.g. <code>std.prec.max</code></p>

<a name="127452437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452437" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452437">Mario Carneiro (Jun 02 2018 at 06:19)</a>:</h4>
<p>In actual notation commands though the number is not an expression of type nat, it's a literal number string</p>

<a name="127452478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452478" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452478">Mario Carneiro (Jun 02 2018 at 06:20)</a>:</h4>
<p>although you can use <code>max</code> and other things in that spot too</p>

<a name="127452482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452482" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452482">Kevin Buzzard (Jun 02 2018 at 06:20)</a>:</h4>
<p>wait</p>

<a name="127452483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452483" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452483">Kevin Buzzard (Jun 02 2018 at 06:20)</a>:</h4>
<p>I have to make nat a class</p>

<a name="127452484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452484" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452484">Kevin Buzzard (Jun 02 2018 at 06:20)</a>:</h4>
<p>oh jeez where's that bit in the manual</p>

<a name="127452485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452485" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452485">Kevin Buzzard (Jun 02 2018 at 06:20)</a>:</h4>
<p>now I finally want to do it</p>

<a name="127452532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452532" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452532">Johan Commelin (Jun 02 2018 at 06:22)</a>:</h4>
<p>Do you mean like <code>attribute [class] nat</code>?</p>

<a name="127452581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452581">Mario Carneiro (Jun 02 2018 at 06:24)</a>:</h4>
<p>don't make <code>nat</code> a class</p>

<a name="127452590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452590" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452590">Mario Carneiro (Jun 02 2018 at 06:25)</a>:</h4>
<p>make <code>Prime</code> a class</p>

<a name="127452635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452635" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452635">Johan Commelin (Jun 02 2018 at 06:26)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Can't you have</p>
<div class="codehilite"><pre><span></span><span class="kn">variables</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">prime</span> <span class="n">p</span><span class="o">)</span>
<span class="n">include</span> <span class="n">p</span> <span class="n">hp</span>
</pre></div>

<a name="127452638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452638" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452638">Johan Commelin (Jun 02 2018 at 06:26)</a>:</h4>
<p>Does that make <code>p</code> and <code>hp</code> available everywhere you want them?</p>

<a name="127452689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452689" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452689">Kevin Buzzard (Jun 02 2018 at 06:28)</a>:</h4>
<p>I'm using type class inference to carry around primality of p</p>

<a name="127452690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452690" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452690">Mario Carneiro (Jun 02 2018 at 06:28)</a>:</h4>
<div class="codehilite"><pre><span></span>import data.nat.prime algebra.group_power

class Prime :=
(p : ℕ) (pp : nat.prime p)
open Prime

section
variable [Prime]

example (R) [ring R] (x : R) : x ^ 2 = x ^ p := sorry

end
</pre></div>

<a name="127452737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452737" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452737">Kevin Buzzard (Jun 02 2018 at 06:30)</a>:</h4>
<p>I thought <code>Prime</code> was supposed to be the subtype</p>

<a name="127452738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452738" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452738">Mario Carneiro (Jun 02 2018 at 06:30)</a>:</h4>
<p>it is</p>

<a name="127452739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452739" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452739">Kevin Buzzard (Jun 02 2018 at 06:31)</a>:</h4>
<p>I suppose</p>

<a name="127452746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452746" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452746">Kevin Buzzard (Jun 02 2018 at 06:31)</a>:</h4>
<p>this way you get to change the name from <code>val</code> to <code>p</code></p>

<a name="127452748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452748" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452748">Mario Carneiro (Jun 02 2018 at 06:31)</a>:</h4>
<p>Actually I said "bundled structure", so this is in some sense more faithful to the convention</p>

<a name="127452749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452749" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452749">Kevin Buzzard (Jun 02 2018 at 06:31)</a>:</h4>
<p>Is this sort of stuff mathlib-acceptable?</p>

<a name="127452788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452788" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452788">Mario Carneiro (Jun 02 2018 at 06:32)</a>:</h4>
<p>only if you use it a lot</p>

<a name="127452791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452791" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452791">Mario Carneiro (Jun 02 2018 at 06:33)</a>:</h4>
<p>I would prefer that you postprocess all your final theorems or whatever to make the prime explicit, but you can do this within the development if it helps</p>

<a name="127452806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452806" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452806">Andrew Ashworth (Jun 02 2018 at 06:33)</a>:</h4>
<p>is <code>p</code> actually <code>default nat</code> in that code snippet?</p>

<a name="127452846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452846" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452846">Mario Carneiro (Jun 02 2018 at 06:34)</a>:</h4>
<p>it's like <code>default nat</code> but not the same value</p>

<a name="127452847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452847">Mario Carneiro (Jun 02 2018 at 06:34)</a>:</h4>
<p>This is one of the important aspects of creating a new <code>class</code> - you get to create your own typeclass graph</p>

<a name="127452853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452853" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452853">Mario Carneiro (Jun 02 2018 at 06:35)</a>:</h4>
<p>in this case, since there are no instances of <code>Prime</code>, it will only ever pick up <code>[Prime]</code> in the context</p>

<a name="127452895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452895" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452895">Mario Carneiro (Jun 02 2018 at 06:36)</a>:</h4>
<p>maybe <code>fixed_prime</code> is a better name for this typeclass</p>

<a name="127452896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452896" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452896">Andrew Ashworth (Jun 02 2018 at 06:36)</a>:</h4>
<p>at first glance, this seems kinda hackish to me, but I need to think about it some</p>

<a name="127452897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452897" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452897">Kevin Buzzard (Jun 02 2018 at 06:36)</a>:</h4>
<p>It very much conveys what's going on</p>

<a name="127452901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452901" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452901">Andrew Ashworth (Jun 02 2018 at 06:37)</a>:</h4>
<p>the whole <code>variable [Prime]</code> has me for a loop</p>

<a name="127452905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452905">Kevin Buzzard (Jun 02 2018 at 06:37)</a>:</h4>
<p>I won't be using it a lot for the definition of perfectoid spaces</p>

<a name="127452906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452906">Johan Commelin (Jun 02 2018 at 06:37)</a>:</h4>
<p>Same here. I still don't get how Lean figures out what <code>p</code> means in the line<br>
<code>example (R) [ring R] (x : R) : x ^ 2 = x ^ p := sorry</code></p>

<a name="127452907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452907">Kevin Buzzard (Jun 02 2018 at 06:37)</a>:</h4>
<p>it's just you'll use it all the time the moment you start proving theorems about them</p>

<a name="127452908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452908" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452908">Mario Carneiro (Jun 02 2018 at 06:37)</a>:</h4>
<p>Since <code>Prime</code> was opened, that's <code>Prime.p</code></p>

<a name="127452947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452947">Johan Commelin (Jun 02 2018 at 06:38)</a>:</h4>
<p>Aah, cool!</p>

<a name="127452948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452948" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452948">Mario Carneiro (Jun 02 2018 at 06:38)</a>:</h4>
<p>which has an implicit typeclass argument <code>[Prime]</code>, which is discovered in the context</p>

<a name="127452951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452951" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452951">Johan Commelin (Jun 02 2018 at 06:39)</a>:</h4>
<p>So then once we start doing etale cohomology we want another class <code>fixed_coprime_prime</code>, and constructor <code>ℓ</code></p>

<a name="127452954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452954" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452954">Johan Commelin (Jun 02 2018 at 06:39)</a>:</h4>
<p>And a proof that it is not <code>p</code></p>

<a name="127452998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127452998" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127452998">Mario Carneiro (Jun 02 2018 at 06:40)</a>:</h4>
<div class="codehilite"><pre><span></span>class fixed_prime :=
(p : ℕ)
(pp : nat.prime p)
open fixed_prime

class fixed_coprime [fixed_prime] :=
(q : ℕ)
(co : nat.coprime p q)
</pre></div>

<a name="127453000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453000" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453000">Johan Commelin (Jun 02 2018 at 06:41)</a>:</h4>
<p>Mario, I really like this! I hope that it is not to hackish for Lean. This reflects how <code>p</code> is used in a lot of number theory/alg.geom. You just fix <code>p</code> at the beginning of your paper, and it doesn't change for 50 pages.</p>

<a name="127453006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453006" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453006">Johan Commelin (Jun 02 2018 at 06:41)</a>:</h4>
<p>Yes, but the <code>ℓ</code> has to be prime as well. As in "ℓ-adic cohomology" etc...</p>

<a name="127453007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453007">Mario Carneiro (Jun 02 2018 at 06:41)</a>:</h4>
<p>I haven't attempted to use this technique before. I'd be interested to see how it goes</p>

<a name="127453008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453008" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453008">Andrew Ashworth (Jun 02 2018 at 06:41)</a>:</h4>
<p>it feels like an end run around <code>parameter</code></p>

<a name="127453047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453047" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453047">Mario Carneiro (Jun 02 2018 at 06:42)</a>:</h4>
<p>you get the idea</p>

<a name="127453050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453050" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453050">Johan Commelin (Jun 02 2018 at 06:42)</a>:</h4>
<p>Sure.</p>

<a name="127453051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453051">Johan Commelin (Jun 02 2018 at 06:42)</a>:</h4>
<p>I will try to use it in the stuff on p-adic valuations.</p>

<a name="127453056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453056" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453056">Mario Carneiro (Jun 02 2018 at 06:43)</a>:</h4>
<p>Note that actually applying this for real primes, like if you want 57-adic cohomology, is a bit of a pain</p>

<a name="127453091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453091" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453091">Johan Commelin (Jun 02 2018 at 06:44)</a>:</h4>
<p>Hmm, I see.</p>

<a name="127453097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453097" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453097">Mario Carneiro (Jun 02 2018 at 06:44)</a>:</h4>
<p>well, maybe not so bad, you can use <code>local instance</code>s or <code>haveI</code> to introduce a <code>fixed_prime</code> without doing so globally</p>

<a name="127453098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453098" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453098">Johan Commelin (Jun 02 2018 at 06:44)</a>:</h4>
<p>That's a bit of a problem, I guess. For example squares in Q_2 behave different from squares in Q_p for p ≠ 2.</p>

<a name="127453145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453145" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453145">Mario Carneiro (Jun 02 2018 at 06:46)</a>:</h4>
<p>I mean, worst case scenario is you have to write <code>@thm</code> whenever you want to apply the theorem in a non <code>p</code> case</p>

<a name="127453146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453146" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453146">Johan Commelin (Jun 02 2018 at 06:46)</a>:</h4>
<p>Yes, I see. That makes sense.</p>

<a name="127453148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453148" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453148">Mario Carneiro (Jun 02 2018 at 06:46)</a>:</h4>
<p>also you can prove things with the assumption <code>p = 2</code></p>

<a name="127453150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453150" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453150">Johan Commelin (Jun 02 2018 at 06:46)</a>:</h4>
<p>Right.</p>

<a name="127453157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453157">Johan Commelin (Jun 02 2018 at 06:47)</a>:</h4>
<p>Actually the <code>@</code> notation reflects exactly how most mathematicians feel about working with one concrete prime. (Of course not the symbol "@", but the fact that all of a sudden you want to be specific about <code>p</code>.)</p>

<a name="127453194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453194" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453194">Johan Commelin (Jun 02 2018 at 06:48)</a>:</h4>
<p>You only do this in 1% of the time. And it always feels a bit disorienting.</p>

<a name="127453198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453198">Mario Carneiro (Jun 02 2018 at 06:49)</a>:</h4>
<p>whence the 57 thing</p>

<a name="127453202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453202" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453202">Johan Commelin (Jun 02 2018 at 06:49)</a>:</h4>
<p>I really think that we have theorems about <code>Q_p</code>, <code>Q_ℓ</code> and <code>Q_2</code>, and that is about it (-;</p>

<a name="127453247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453247" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453247">Mario Carneiro (Jun 02 2018 at 06:50)</a>:</h4>
<p>one other messy thing is if you want to use <code>l</code> as your <code>p</code></p>

<a name="127453252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453252" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453252">Johan Commelin (Jun 02 2018 at 06:50)</a>:</h4>
<p>So, have to unpack stuff with <code>@</code> is expected behaviour.</p>

<a name="127453253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453253" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453253">Johan Commelin (Jun 02 2018 at 06:50)</a>:</h4>
<p>Aah, yes, that might get messy...</p>

<a name="127453254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453254" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453254">Johan Commelin (Jun 02 2018 at 06:50)</a>:</h4>
<p>Also, there is a very delicate theory about what happens when <code>ℓ = p</code>...</p>

<a name="127453255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453255" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453255">Johan Commelin (Jun 02 2018 at 06:50)</a>:</h4>
<p>Headache ensues</p>

<a name="127453261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453261" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453261">Johan Commelin (Jun 02 2018 at 06:51)</a>:</h4>
<p>(Note: this is not relevant for defining perfectoid spaces. But it will definitely pop up later.)</p>

<a name="127453302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453302" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453302">Mario Carneiro (Jun 02 2018 at 06:52)</a>:</h4>
<p>Long story short, this technique is useful for fixing a value for a long time, with the downside being it makes unfixing it hard</p>

<a name="127453303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453303" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453303">Mario Carneiro (Jun 02 2018 at 06:52)</a>:</h4>
<p>parameters are easier to unfix, but then they stay unfixed</p>

<a name="127453347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453347" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453347">Johan Commelin (Jun 02 2018 at 06:54)</a>:</h4>
<p>Ok, so maybe we should do the same thing as with multiplicative groups and additive groups. And just develop the theory both for <code>p</code> and for <code>ℓ</code>...</p>

<a name="127453351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453351" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453351">Mario Carneiro (Jun 02 2018 at 06:55)</a>:</h4>
<p>That's not unreasonable; the theorems are defeq so you just have to state them</p>

<a name="127453354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453354" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453354">Johan Commelin (Jun 02 2018 at 06:55)</a>:</h4>
<p>Hmm, but sometimes you also want to compare what happens at <code>ℓ_1</code> and <code>ℓ_2</code>... and both are different from <code>p</code>.</p>

<a name="127453360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453360" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453360">Mario Carneiro (Jun 02 2018 at 06:55)</a>:</h4>
<p>maybe <code> ℓ</code> shouldn't be as fixed as <code>p</code></p>

<a name="127453361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453361" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453361">Johan Commelin (Jun 02 2018 at 06:55)</a>:</h4>
<p>Or statements like <code>\forall ℓ : (ℓ ≠ p) blabla</code>.</p>

<a name="127453401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453401" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453401">Andrew Ashworth (Jun 02 2018 at 06:56)</a>:</h4>
<p>an argument for using a parameter might be that when you use <code>haveI</code> and friends, you don't get to benefit from type class caching... although I am unsure how much time Lean spends searching the type class graph - it's not something I have a good feel for</p>

<a name="127453402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453402" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453402">Mario Carneiro (Jun 02 2018 at 06:57)</a>:</h4>
<p>in practice I've never seen an appreciable difference from using <code>haveI</code></p>

<a name="127453407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453407" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453407">Johan Commelin (Jun 02 2018 at 06:57)</a>:</h4>
<p>Ok, maybe <code>ℓ</code> should indeed have less fixiness than <code>p</code>.</p>

<a name="127453505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453505">Andrew Ashworth (Jun 02 2018 at 07:00)</a>:</h4>
<p>I think it might be a bigger deal for people working in interactive tactic mode... who have very large proofs / definitions</p>

<a name="127453512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453512" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453512">Andrew Ashworth (Jun 02 2018 at 07:01)</a>:</h4>
<p>again, it ::sounds:: scary to me, also because I don't mind at all being explicit, but that may be because I don't have enough Lean experience</p>

<a name="127453756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/let%20in%20structure/near/127453756" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/86990letinstructure.html#127453756">Andrew Ashworth (Jun 02 2018 at 07:10)</a>:</h4>
<p>would it affect memoization? suppose you had</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">myDef</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">expensive_tac1</span><span class="o">,</span>  <span class="c1">-- uses typeclass inference somewhere</span>
  <span class="n">expensive_tac2</span>  <span class="c1">-- does this mean we can&#39;t memoize the results of expensive_tac1 if we disable type class cache?</span>
<span class="kn">end</span>
</pre></div>


{% endraw %}
