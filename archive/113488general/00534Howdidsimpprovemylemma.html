---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/00534Howdidsimpprovemylemma.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html">How did simp prove my lemma?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="130640952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130640952" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130640952">Johan Commelin (Jul 31 2018 at 12:46)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">set_option</span> <span class="n">trace</span><span class="bp">.</span><span class="n">simp_lemmas</span> <span class="n">true</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">≤</span> <span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
</pre></div>


<p>I think the consensus is that this example should not be proven by <code>simp</code>. Can Lean tell me what the <em>morally correct</em> proof is?</p>

<a name="130640973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130640973" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130640973">Kenny Lau (Jul 31 2018 at 12:47)</a>:</h4>
<p><code>simp</code> does not prove it in the online version</p>

<a name="130640979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130640979" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130640979">Johan Commelin (Jul 31 2018 at 12:47)</a>:</h4>
<p>The trace option spits out a lot of noise, but I didn't find the lemma that prove this.</p>

<a name="130640991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130640991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130640991">Kenny Lau (Jul 31 2018 at 12:47)</a>:</h4>
<p>neither does it in my local copy</p>

<a name="130640993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130640993" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130640993">Kenny Lau (Jul 31 2018 at 12:47)</a>:</h4>
<p>but you can use <code>set_option trace.simplify.rewrite true</code></p>

<a name="130641048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130641048" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130641048">Johan Commelin (Jul 31 2018 at 12:48)</a>:</h4>
<p>My <code>simp</code> is stronger than yours!</p>
<div class="codehilite"><pre><span></span>0. [simplify.rewrite] [le_add_iff_nonneg_right]: i ≤ i + 1 ==&gt; 0 ≤ 1
</pre></div>

<a name="130641052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130641052" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130641052">Kenny Lau (Jul 31 2018 at 12:48)</a>:</h4>
<p>you imported stuff</p>

<a name="130641056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130641056" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130641056">Patrick Massot (Jul 31 2018 at 12:48)</a>:</h4>
<p>Cheater!</p>

<a name="130641165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130641165" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130641165">Johan Commelin (Jul 31 2018 at 12:50)</a>:</h4>
<p>O.o.... <span class="emoji emoji-1f629" title="distraught">:distraught:</span></p>

<a name="130641187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130641187" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130641187">Johan Commelin (Jul 31 2018 at 12:51)</a>:</h4>
<p>Apparently the category libs by Scott import stuff that give <code>simp</code> superpowers when dealing with integers.</p>

<a name="130641248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130641248" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130641248">Johan Commelin (Jul 31 2018 at 12:52)</a>:</h4>
<p>I didn't expect that that import would affect the proof.</p>

<a name="130641265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130641265" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130641265">Patrick Massot (Jul 31 2018 at 12:52)</a>:</h4>
<p>Don't forget that one import can hide thousands imports</p>

<a name="130641352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130641352" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130641352">Johan Commelin (Jul 31 2018 at 12:54)</a>:</h4>
<p>Yes, that is true. I think that means I should always import Scott's category libs.</p>

<a name="130641543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130641543" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130641543">Scott Morrison (Jul 31 2018 at 12:59)</a>:</h4>
<p>Eek, I have no idea how or why I could be responsible. :-)</p>

<a name="130641639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130641639" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130641639">Johan Commelin (Jul 31 2018 at 13:01)</a>:</h4>
<p>/me mumbles something about synergy...</p>

<a name="130641738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130641738" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130641738">Chris Hughes (Jul 31 2018 at 13:03)</a>:</h4>
<p>interesting<br>
<code>example : (0 : ℤ) ≤ 1 = true := rfl</code></p>

<a name="130641790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130641790" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130641790">Kenny Lau (Jul 31 2018 at 13:04)</a>:</h4>
<p>because <code>(0 : ℤ) ≤ 1</code> can be lifted to <code>bool</code>, because it is decidable</p>

<a name="130641797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130641797" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130641797">Kenny Lau (Jul 31 2018 at 13:04)</a>:</h4>
<p>but you already know this</p>

<a name="130641839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130641839" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130641839">Gabriel Ebner (Jul 31 2018 at 13:06)</a>:</h4>
<p>There is no bool in this example, the proposition is indeed definitionally equal to true.</p>

<a name="130641857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130641857" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130641857">Chris Hughes (Jul 31 2018 at 13:06)</a>:</h4>
<p><code>bool</code> isn't involved here. <code>true</code> is <code>true : Prop</code><br>
<code>example : (0 : ℕ) ≤ 1 = true := rfl --doesn't work</code></p>

<a name="130641891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130641891" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130641891">Kenny Lau (Jul 31 2018 at 13:06)</a>:</h4>
<p>oops, I misread</p>

<a name="130641897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20did%20simp%20prove%20my%20lemma%3F/near/130641897" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/00534Howdidsimpprovemylemma.html#130641897">Gabriel Ebner (Jul 31 2018 at 13:06)</a>:</h4>
<p><a href="https://github.com/leanprover/lean/blob/ceacfa7445953cbc8860ddabc55407430a9ca5c3/library/init/data/int/order.lean#L13-L17" target="_blank" title="https://github.com/leanprover/lean/blob/ceacfa7445953cbc8860ddabc55407430a9ca5c3/library/init/data/int/order.lean#L13-L17">https://github.com/leanprover/lean/blob/ceacfa7445953cbc8860ddabc55407430a9ca5c3/library/init/data/int/order.lean#L13-L17</a></p>


{% endraw %}

{% include archive_update.html %}