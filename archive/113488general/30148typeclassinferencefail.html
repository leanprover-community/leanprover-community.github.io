---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/30148typeclassinferencefail.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html">type class inference fail</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="127760290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760290" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760290">Johan Commelin (Jun 08 2018 at 09:52)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">don&#39;t</span> <span class="n">know</span> <span class="n">how</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">placeholder</span>
<span class="kn">context</span><span class="o">:</span>
<span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">comm_ring</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">R</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_2</span> <span class="o">:</span> <span class="n">topological_space</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">R</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_3</span> <span class="o">:</span> <span class="bp">@</span><span class="n">topological_ring</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">R</span> <span class="bp">_</span><span class="n">inst_2</span> <span class="o">(</span><span class="bp">@</span><span class="n">comm_ring</span><span class="bp">.</span><span class="n">to_ring</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">R</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">),</span>
<span class="n">R₀</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">R</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_4</span> <span class="o">:</span> <span class="bp">@</span><span class="n">is_subring</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">comm_ring</span><span class="bp">.</span><span class="n">to_ring</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">R</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">)</span> <span class="n">R₀</span><span class="o">,</span>
<span class="n">I</span> <span class="o">:</span> <span class="n">set</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="o">(</span><span class="bp">@</span><span class="n">coe_sort</span><span class="bp">.</span><span class="o">{</span><span class="mi">1</span> <span class="mi">2</span><span class="o">}</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="bp">@</span><span class="n">set</span><span class="bp">.</span><span class="n">has_coe_to_sort</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">R</span><span class="o">)</span> <span class="n">R₀</span><span class="o">),</span>
<span class="bp">_</span><span class="n">inst_5</span> <span class="o">:</span>
  <span class="bp">@</span><span class="n">is_ideal</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="o">(</span><span class="bp">@</span><span class="n">coe_sort</span><span class="bp">.</span><span class="o">{</span><span class="mi">1</span> <span class="mi">2</span><span class="o">}</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="bp">@</span><span class="n">set</span><span class="bp">.</span><span class="n">has_coe_to_sort</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">R</span><span class="o">)</span> <span class="n">R₀</span><span class="o">)</span>
    <span class="o">(</span><span class="bp">@</span><span class="n">subtype</span><span class="bp">.</span><span class="n">comm_ring</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">comm_ring</span><span class="bp">.</span><span class="n">to_ring</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">R</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">)</span> <span class="bp">_</span><span class="n">inst_1</span> <span class="n">R₀</span> <span class="bp">_</span><span class="n">inst_4</span><span class="o">)</span>
    <span class="n">I</span>
<span class="err">⊢</span> <span class="n">topological_space</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">R</span>
</pre></div>


<p>Why can this even fail?</p>

<a name="127760358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760358" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760358">Kevin Buzzard (Jun 08 2018 at 09:54)</a>:</h4>
<p>Because type class inference is not looking at your context, maybe?</p>

<a name="127760423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760423" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760423">Johan Commelin (Jun 08 2018 at 09:56)</a>:</h4>
<p>Right... so how is it ever supposed to figure things out if it doesn't look at my context?</p>

<a name="127760424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760424" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760424">Kevin Buzzard (Jun 08 2018 at 09:56)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">:</span> <span class="n">comm_group</span> <span class="n">G</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G</span><span class="o">,</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">admit</span>
<span class="kn">end</span>
</pre></div>

<a name="127760425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760425" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760425">Kevin Buzzard (Jun 08 2018 at 09:56)</a>:</h4>
<div class="codehilite"><pre><span></span>failed to synthesize type class instance for
G : Type,
a : comm_group G,
a b : G
⊢ has_mul G
</pre></div>

<a name="127760427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760427" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760427">Kevin Buzzard (Jun 08 2018 at 09:56)</a>:</h4>
<p>The system doesn't look there</p>

<a name="127760433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760433" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760433">Johan Commelin (Jun 08 2018 at 09:57)</a>:</h4>
<p>Shouldn't it?</p>

<a name="127760435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760435" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760435">Kevin Buzzard (Jun 08 2018 at 09:57)</a>:</h4>
<p>That's not a question I'm qualified to answer</p>

<a name="127760437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760437" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760437">Kevin Buzzard (Jun 08 2018 at 09:57)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_group</span> <span class="n">G</span><span class="o">]</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G</span><span class="o">,</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">admit</span>
<span class="kn">end</span>
</pre></div>

<a name="127760441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760441">Kevin Buzzard (Jun 08 2018 at 09:57)</a>:</h4>
<p>That works</p>

<a name="127760445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760445" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760445">Kevin Buzzard (Jun 08 2018 at 09:57)</a>:</h4>
<p>the square brackets mean "add me to the type class inference system"</p>

<a name="127760488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760488" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760488">Johan Commelin (Jun 08 2018 at 09:58)</a>:</h4>
<p>This feels extremely counterintuitive to me... after all, we go through pains to make sure there is only one instance of a class... so if there is <em>one</em> instance in my context there won't be any others. (I promise!)</p>

<a name="127760489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760489" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760489">Kevin Buzzard (Jun 08 2018 at 09:58)</a>:</h4>
<p>However there are commands which explicitly add stuff to the type class inference system</p>

<a name="127760490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760490" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760490">Sean Leather (Jun 08 2018 at 09:58)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> What does <code>set_option pp.all true</code> before that tell you?</p>

<a name="127760491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760491" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760491">Kevin Buzzard (Jun 08 2018 at 09:58)</a>:</h4>
<p>Do you know about <code>letI</code>?</p>

<a name="127760493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760493" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760493">Kevin Buzzard (Jun 08 2018 at 09:58)</a>:</h4>
<p>Maybe search for that in the type class inference thread</p>

<a name="127760497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760497" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760497">Johan Commelin (Jun 08 2018 at 09:58)</a>:</h4>
<p>Aha, I don't know about <code>letI</code>.</p>

<a name="127760498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760498" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760498">Kevin Buzzard (Jun 08 2018 at 09:59)</a>:</h4>
<p>I half-understand it</p>

<a name="127760504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760504" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760504">Kevin Buzzard (Jun 08 2018 at 09:59)</a>:</h4>
<p>the main gotcha is that this is defined in mathlib</p>

<a name="127760505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760505">Johan Commelin (Jun 08 2018 at 09:59)</a>:</h4>
<p><span class="user-mention" data-user-id="110045">@Sean Leather</span> I already have that set to true. You see it in the output.</p>

<a name="127760506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760506" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760506">Kevin Buzzard (Jun 08 2018 at 09:59)</a>:</h4>
<p>so you have to import _some_ mathlib file before it works</p>

<a name="127760507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760507" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760507">Johan Commelin (Jun 08 2018 at 09:59)</a>:</h4>
<p>Is this one of our mathematical promises playing up again?</p>

<a name="127760552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760552" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760552">Kevin Buzzard (Jun 08 2018 at 10:00)</a>:</h4>
<p>stream:general topic:more+type+class+inference+issues leti</p>

<a name="127760631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760631" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760631">Kevin Buzzard (Jun 08 2018 at 10:03)</a>:</h4>
<p><a href="#narrow/search/i.20would.20rather.20just.20make.20type.20class.20inference.20work.2E" title="#narrow/search/i.20would.20rather.20just.20make.20type.20class.20inference.20work.2E">https://leanprover.zulipchat.com/#narrow/search/i.20would.20rather.20just.20make.20type.20class.20inference.20work.2E</a></p>

<a name="127760632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760632" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760632">Kevin Buzzard (Jun 08 2018 at 10:03)</a>:</h4>
<p>Kenny teaching me about letI in pretty much the same situation</p>

<a name="127760634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760634" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760634">Johan Commelin (Jun 08 2018 at 10:03)</a>:</h4>
<p>Right, so I insert</p>
<div class="codehilite"><pre><span></span><span class="k">by</span> <span class="n">haveI</span> <span class="o">:=</span> <span class="n">topological_space</span> <span class="n">R</span><span class="bp">;</span> <span class="n">exact</span>
</pre></div>


<p>in the middle of my definition, and it works. Ugly!</p>

<a name="127760659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760659" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760659">Kevin Buzzard (Jun 08 2018 at 10:04)</a>:</h4>
<p>I totally agree that it is ugly</p>

<a name="127760677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760677" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760677">Kevin Buzzard (Jun 08 2018 at 10:04)</a>:</h4>
<p>And they have no plans to change it in Lean 4</p>

<a name="127760686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760686" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760686">Kevin Buzzard (Jun 08 2018 at 10:05)</a>:</h4>
<p>Mario wrote all this letI and exactI and haveI when Leo made some non-trivial changes which broke a lot of stuff</p>

<a name="127760688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760688" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760688">Kevin Buzzard (Jun 08 2018 at 10:05)</a>:</h4>
<p>For some reason, liberal type class inference was making Lean slow</p>

<a name="127760690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760690" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760690">Kevin Buzzard (Jun 08 2018 at 10:05)</a>:</h4>
<p>for his application</p>

<a name="127760691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760691" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760691">Kevin Buzzard (Jun 08 2018 at 10:05)</a>:</h4>
<p>so he made it stricter</p>

<a name="127760694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760694" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760694">Kevin Buzzard (Jun 08 2018 at 10:05)</a>:</h4>
<p>and then a whole bunch of mathlib broke</p>

<a name="127760713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760713">Kevin Buzzard (Jun 08 2018 at 10:06)</a>:</h4>
<p>and if this letI hack hadn't worked</p>

<a name="127760737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760737" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760737">Kevin Buzzard (Jun 08 2018 at 10:06)</a>:</h4>
<p>then it would not surprise me if mathlib would still be broken</p>

<a name="127760751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760751" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760751">Kevin Buzzard (Jun 08 2018 at 10:07)</a>:</h4>
<p>On the other hand</p>

<a name="127760753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760753" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760753">Kevin Buzzard (Jun 08 2018 at 10:07)</a>:</h4>
<p>I'm not sure you can have "mathematician inference"</p>

<a name="127760757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760757" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760757">Kevin Buzzard (Jun 08 2018 at 10:07)</a>:</h4>
<p>I think we're too clever</p>

<a name="127760799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760799" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760799">Kevin Buzzard (Jun 08 2018 at 10:08)</a>:</h4>
<p>If you can formalise some nice MWE of something which you feel would be nice if it worked but doesn't work</p>

<a name="127760800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760800">Kevin Buzzard (Jun 08 2018 at 10:08)</a>:</h4>
<p>then you could ask Sebastian or Mario why it doesn't work</p>

<a name="127760803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760803" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760803">Kevin Buzzard (Jun 08 2018 at 10:08)</a>:</h4>
<p>but I fear the answer might be</p>

<a name="127760804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760804">Kevin Buzzard (Jun 08 2018 at 10:09)</a>:</h4>
<p>something like "if that worked, then this important file would take 100 years to compile"</p>

<a name="127760811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20class%20inference%20fail/near/127760811" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/30148typeclassinferencefail.html#127760811">Kevin Buzzard (Jun 08 2018 at 10:09)</a>:</h4>
<p>But I'm not sure, what happened with the changes to type class inference is beyond my pay grade</p>


{% endraw %}
