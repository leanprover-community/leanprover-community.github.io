---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html">bundled presheaves with preorders on the stalks</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="162686462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162686462" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162686462">Scott Morrison (Apr 06 2019 at 05:56)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>, I think I've got it --- the category of bundled presheaves with preordered stalks.</p>

<a name="162687191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162687191" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162687191">Kevin Buzzard (Apr 06 2019 at 06:21)</a>:</h4>
<p>Topological rings?</p>

<a name="162687237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162687237" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162687237">Kevin Buzzard (Apr 06 2019 at 06:22)</a>:</h4>
<p>With the stalks being computed on the underlying presheaf of rings?</p>

<a name="162687250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162687250" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162687250">Kevin Buzzard (Apr 06 2019 at 06:23)</a>:</h4>
<p>We need two things from this category -- the notion of isomorphism (which comes for free) and the ability to pull back to an open subspace</p>

<a name="162687294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162687294" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162687294">Kevin Buzzard (Apr 06 2019 at 06:24)</a>:</h4>
<p>Many thanks!</p>

<a name="162687729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162687729" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162687729">Scott Morrison (Apr 06 2019 at 06:37)</a>:</h4>
<p>okay, I think my TODO list for this stuff is:<br>
1) put the <code>op</code>s back in the open sets<br>
2) PR everything about presheafs, unbundled and bundled, to mathlib<br>
3) dump the stuff about stalks, and structured stalks, into perfectoid? (it's not mathlib ready)<br>
4) do pullbacks to open subspaces<br>
5) generalise "stalks with preorders" to "stalks with structure"<br>
6) once we have a <code>has_colimits CommRing</code> instance, everything is already set up to compute stalks in <code>CommRing</code> (or for that matter in <code>TopCommRing</code>)</p>

<a name="162691103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162691103" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162691103">Kevin Buzzard (Apr 06 2019 at 08:16)</a>:</h4>
<p>Presumably the <code>has_colimits CommRing</code> instance will give us the universal property as well?</p>

<a name="162691182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162691182" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162691182">Kevin Buzzard (Apr 06 2019 at 08:18)</a>:</h4>
<p>I know that <span class="user-mention" data-user-id="132858">@Ramon Fernandez Mir</span> made the construction of a general colimit of comm rings (as a quotient of the poly ring over Z in variables corresponding to the disjoint union of the rings) late last year but I can't find it in his schemes repo :-/</p>

<a name="162691792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162691792" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162691792">Scott Morrison (Apr 06 2019 at 08:37)</a>:</h4>
<p>Yes, <code>has_colimits</code> packages the universal property.</p>

<a name="162692160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162692160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162692160">Kevin Buzzard (Apr 06 2019 at 08:49)</a>:</h4>
<p>Actually here's a potential problem. I need to define a preorder on the colimit. In this case (the stalk of a sheaf on a top space) the colimit is actually a direct limit. I would <em>imagine</em> that the universal property is a statement about defining ring homs from the colimit to other rings. But this is not what we have; I want to define a morphism of types from the stalk to some other type (I want to define a valuation on the stalk, and I'll get the preorder from the valuation). The underlying type of a direct limit of commutative rings is equal to the direct limit of the underlying types, so I can use the universal property of direct limits of types to get my function. However it is not true that the underlying type of an arbitrary colimit of commutative rings is equal to the colimit of the underlying types (consider a coproduct of two rings; the underlying type of the coproduct isn't the disjoint union of the two underlying types).</p>

<a name="162692298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162692298" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162692298">Scott Morrison (Apr 06 2019 at 08:53)</a>:</h4>
<p>Yes. :-)</p>

<a name="162692301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162692301" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162692301">Johan Commelin (Apr 06 2019 at 08:53)</a>:</h4>
<p>Luckily Reid pushed some stuff about filtered limits to a branch...</p>

<a name="162692347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162692347" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162692347">Johan Commelin (Apr 06 2019 at 08:54)</a>:</h4>
<p>Once that code is accessible (either in mathlib, or in the perfectoid project) we only need to show that the forgetful functor from <code>CommRing</code> to <code>Type</code> preserves filtered colimits</p>

<a name="162694427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162694427" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162694427">Kevin Buzzard (Apr 06 2019 at 09:57)</a>:</h4>
<p>is "filtered colimits" the same as direct limits?</p>

<a name="162696541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162696541" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162696541">Scott Morrison (Apr 06 2019 at 10:53)</a>:</h4>
<p>yes, a very slight generalisation</p>

<a name="162696543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162696543" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162696543">Scott Morrison (Apr 06 2019 at 10:53)</a>:</h4>
<p>having either implies the other</p>

<a name="162696588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162696588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162696588">Scott Morrison (Apr 06 2019 at 10:54)</a>:</h4>
<p>a category is filtered if every finite diagram admits a cone</p>

<a name="162696592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162696592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162696592">Scott Morrison (Apr 06 2019 at 10:54)</a>:</h4>
<p>in particular, for every two objects X and Y, you can find an object Z with maps X -&gt; Z and Y -&gt; Z</p>

<a name="162696602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162696602" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162696602">Scott Morrison (Apr 06 2019 at 10:55)</a>:</h4>
<p>and for every parallel pair of morphisms <code>f g : X \hom Y</code>, there is a <code>h : Y \hom Z</code> so f h = g h.</p>

<a name="162696607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162696607" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162696607">Scott Morrison (Apr 06 2019 at 10:55)</a>:</h4>
<p>and there is an object!</p>

<a name="162696658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162696658" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162696658">Scott Morrison (Apr 06 2019 at 10:56)</a>:</h4>
<p>Putting the <code>op</code> back in the definition of presheaves is really awful. I have spent hours on it.</p>

<a name="162696670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162696670" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162696670">Scott Morrison (Apr 06 2019 at 10:57)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span>, <span class="user-mention" data-user-id="110032">@Reid Barton</span>, if either of you want to explain why it is so dire to bake it into the source category, that would be great.</p>

<a name="162696680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162696680" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162696680">Scott Morrison (Apr 06 2019 at 10:57)</a>:</h4>
<p>also, if you want to look at my code/screen share, etc, we can try to fix it!</p>

<a name="162697022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162697022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162697022">Scott Morrison (Apr 06 2019 at 11:07)</a>:</h4>
<p>Just in case anyone wants to have a look:</p>
<ul>
<li>deb92bf7c3340e47652206ed64e0933fcfd1cc36 is presheaves (with opens defined with reverse inclusion)</li>
<li>4cb659a3dace959dd9e2ef2ea476066a79d40e57 is stalks (with opens defined with reverse inclusion)</li>
<li>5793683020650371848828bacbbeea8310625c34 is <code>def presheaf (X) := (opens X)ᵒᵖ ⥤ C</code>, pretty much working, but with some proof made grosser</li>
<li>faffe160b9c281e46b6086f0a49da4eaae4ee3ea is stalks based on that, with everything borked and apparently unfixable.</li>
</ul>

<a name="162697551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162697551" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162697551">Johan Commelin (Apr 06 2019 at 11:20)</a>:</h4>
<p>Sorry, to which url should we append these hashes to see the code?</p>

<a name="162698334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162698334" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162698334">Kevin Buzzard (Apr 06 2019 at 11:44)</a>:</h4>
<p>It sounds to me like "you haven't quite got op working yet". So can you just define a new category <code>opens_op</code>?</p>
<p>I am about to embark on a journey to Austria via Germany and will try to get a bunch of work done. I am acutely aware that whilst all the pieces seem to be there for defining adic spaces, it will take some time to glue them together.</p>

<a name="162699596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162699596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162699596">matt rice (Apr 06 2019 at 12:20)</a>:</h4>
<blockquote>
<p>Sorry, to which url should we append these hashes to see the code?</p>
</blockquote>
<p>they are all linked from here it seems,<br>
<a href="https://github.com/leanprover-community/mathlib/compare/stalks-op" target="_blank" title="https://github.com/leanprover-community/mathlib/compare/stalks-op">https://github.com/leanprover-community/mathlib/compare/stalks-op</a><br>
<a href="https://github.com/leanprover-community/mathlib/compare/presheaf" target="_blank" title="https://github.com/leanprover-community/mathlib/compare/presheaf">https://github.com/leanprover-community/mathlib/compare/presheaf</a></p>

<a name="162712054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712054" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712054">Reid Barton (Apr 06 2019 at 17:52)</a>:</h4>
<blockquote>
<p>if either of you want to explain why it is so dire to bake it into the source category, that would be great.</p>
</blockquote>
<p>I guess the core reason is that the morphisms in <code>opens X</code> are not just some bookkeeping device to keep track of the subset relation, they have actual geometric content. A morphism <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi><mo>→</mo><mi>V</mi></mrow><annotation encoding="application/x-tex">U \to V</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10903em;">U</span><span class="mrel">→</span><span class="mord mathit" style="margin-right:0.22222em;">V</span></span></span></span> should really be thought of as a (continuous) map from <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10903em;">U</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span></span></span></span> which is compatible with the inclusions <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi><mo>→</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">U \to X</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10903em;">U</span><span class="mrel">→</span><span class="mord mathit" style="margin-right:0.07847em;">X</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi><mo>→</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">V \to X</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span><span class="mrel">→</span><span class="mord mathit" style="margin-right:0.07847em;">X</span></span></span></span>. Geometrically, it doesn't make sense to think of it as a morphism from <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.22222em;">V</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10903em;">U</span></span></span></span>.</p>

<a name="162712160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712160">Kevin Buzzard (Apr 06 2019 at 17:55)</a>:</h4>
<p>I think it's a great idea to make the category that Scott can work with.</p>

<a name="162712178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712178" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712178">Reid Barton (Apr 06 2019 at 17:55)</a>:</h4>
<p>Also, it might not really matter for what Kevin wants to do for perfectoid spaces, but if you want to define sheaves even in the most classical way, then you're going to talk about covering families which are supposed to be families of maps <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><msub><mi>U</mi><mi>α</mi></msub><mo>→</mo><mi>U</mi><mo>}</mo></mrow><annotation encoding="application/x-tex">\{U_\alpha \to U\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mopen">{</span><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right:0.0037em;">α</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mrel">→</span><span class="mord mathit" style="margin-right:0.10903em;">U</span><span class="mclose">}</span></span></span></span>, not <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><mi>U</mi><mo>→</mo><msub><mi>U</mi><mi>α</mi></msub><mo>}</mo></mrow><annotation encoding="application/x-tex">\{U \to U_\alpha\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mopen">{</span><span class="mord mathit" style="margin-right:0.10903em;">U</span><span class="mrel">→</span><span class="mord"><span class="mord mathit" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight" style="margin-right:0.0037em;">α</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"></span></span></span></span></span><span class="mclose">}</span></span></span></span>.</p>

<a name="162712184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712184" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712184">Kevin Buzzard (Apr 06 2019 at 17:55)</a>:</h4>
<p>I also think it's a great idea to think about why he can't yet work with opposite categories. The opposite category is really closely related to the bake-in-the-maps-the-wrong-way category; I hesitate to say they're isomorphic but they look isomorphic to me.</p>

<a name="162712245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712245" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712245">Kevin Buzzard (Apr 06 2019 at 17:56)</a>:</h4>
<p>As we all know, just because two things are isomorphic and you can prove stuff for one, it doesn't mean that you can deduce stuff for the other, and it certainly doesn't mean that the same techniques that prove stuff for one will prove the same stuff for the other</p>

<a name="162712311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712311" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712311">Kevin Buzzard (Apr 06 2019 at 17:58)</a>:</h4>
<p>This is where Scott seems to be. So ideally at some point someone should figure out why using opposite categories makes stuff so much more like hard work, and of course and ideal candidate would be someone who is moaning about Scott not using opposites ;-) They will either become convinced Scott is right, or they'll show him how to get it working :D</p>

<a name="162712316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712316" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712316">Reid Barton (Apr 06 2019 at 17:58)</a>:</h4>
<p>More generally, the setup is that we have some category of geometric objects which came from somewhere, and we want to formally extend to presheaves. The original category is supposed to embed in the category of presheaves, by the Yoneda embedding. It doesn't work if you don't put <code>op</code> in the definition of presheaves.</p>

<a name="162712320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712320" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712320">Kevin Buzzard (Apr 06 2019 at 17:58)</a>:</h4>
<p>How about functors from usual <code>opens</code> to <code>ring^op</code>? ;-)</p>

<a name="162712333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712333" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712333">Reid Barton (Apr 06 2019 at 17:59)</a>:</h4>
<p>I agree, it seems like something is just missing about the way opposites are set up, maybe some missing simp lemmas.</p>

<a name="162712344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712344" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712344">Reid Barton (Apr 06 2019 at 17:59)</a>:</h4>
<p>I mean Scott can't really be using anything about <code>opens X</code> that changes when we reverse the arrows, right?</p>

<a name="162712346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712346" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712346">Kevin Buzzard (Apr 06 2019 at 17:59)</a>:</h4>
<p>exactly. If Scott has got things working with the arrows baked the wrong way round, it provides a natural starting point for trying to figure out what the hell is going on.</p>

<a name="162712400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712400" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712400">Kevin Buzzard (Apr 06 2019 at 18:00)</a>:</h4>
<p>It could just be a case of Lean not unfolding something.</p>

<a name="162712403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712403" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712403">Reid Barton (Apr 06 2019 at 18:00)</a>:</h4>
<p>somehow it works with <code>opens_op X</code> but not with <code>(opens X)\op</code></p>

<a name="162712430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712430" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712430">Reid Barton (Apr 06 2019 at 18:01)</a>:</h4>
<p>I'm guessing it's an instance of a recurring annoyance for category theory, where we have simp lemmas like <code>f &gt;&gt; 1 X = f</code> which <code>simp</code> is fond of not applying</p>

<a name="162712491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712491" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712491">Reid Barton (Apr 06 2019 at 18:02)</a>:</h4>
<p>because under the hood the simp lemma says <code>comp Y X X f (1 X) = f</code>, but maybe the implicit object arguments in an occurrence of <code>f &gt;&gt; 1 X</code> are not syntactically <code>X</code>, but only something defeq to <code>X</code></p>

<a name="162712675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712675" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712675">Reid Barton (Apr 06 2019 at 18:06)</a>:</h4>
<p>For example, one of the implicit <code>X</code>s might be <code>(functor.id C).obj X</code></p>

<a name="162712694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712694" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712694">Johan Commelin (Apr 06 2019 at 18:07)</a>:</h4>
<p>But that ought to be <code>simp</code>ed away as well, right?</p>

<a name="162712759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712759" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712759">Reid Barton (Apr 06 2019 at 18:08)</a>:</h4>
<p>Well it can't be <code>simp</code>ed because it is in a position where the type of something else depends on it. It can be <code>dsimp</code>ed though. That's why we end up with <code>simp, dsimp, simp</code> stuff</p>

<a name="162712796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712796" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712796">Reid Barton (Apr 06 2019 at 18:09)</a>:</h4>
<p>but if we didn't have the <code>simp</code> lemma for <code>(functor.id C).obj X</code>, we'd be stuck. So hopefully we are just missing some similar <code>simp</code> lemma for opposite stuff.</p>

<a name="162712816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712816" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712816">Reid Barton (Apr 06 2019 at 18:09)</a>:</h4>
<p>It seems like a difficult problem to solve in general though because you are relying on <code>dsimp</code> to be able to put objects into a consistent normal form, but, in general, the objects of your category could be anything</p>

<a name="162712962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162712962" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162712962">Johan Commelin (Apr 06 2019 at 18:12)</a>:</h4>
<p>Which means we need something that is smarter than "try to normalise LHS and RHS and hope that we win". I guess this is where <code>rw_search</code> might become a real hero (-;</p>

<a name="162713173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162713173" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162713173">Reid Barton (Apr 06 2019 at 18:17)</a>:</h4>
<p>Well, I think all we really need here is for <code>simp</code> to match repeated variables in the lemma it is trying to apply using definitional equality, rather than syntactic equality</p>

<a name="162713181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162713181" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162713181">Reid Barton (Apr 06 2019 at 18:17)</a>:</h4>
<p>maybe there's even an option to do that already?</p>

<a name="162735655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162735655" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162735655">Scott Morrison (Apr 07 2019 at 03:50)</a>:</h4>
<p>I had another read over the <code>simp</code> configuration, and I don't think there's anything that does this.</p>

<a name="162735702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162735702" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162735702">Reid Barton (Apr 07 2019 at 03:51)</a>:</h4>
<p>Are the fields of the options record documented somewhere?</p>

<a name="162735753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162735753" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162735753">Scott Morrison (Apr 07 2019 at 03:52)</a>:</h4>
<p>I've got everything working again on the <code>stalks-op</code> branch. There are some ugly proofs, but they are ugly in controlled ways:<br>
1) I need to call <code>  erw category_theory.functor.map_id</code> and <code>erw category.id_comp</code> frequently, when you'd hope that <code>simp</code> works.<br>
2) In one or two places I have a <code>j : (nbhds X)ᵒᵖ</code>, and I have to run an unpleasant little sequence <code>dsimp [opposite] at j, cases j, cases j_val,  dsimp</code> before being able to proceed, so that some things become definitionally true.</p>

<a name="162735760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/bundled%20presheaves%20with%20preorders%20on%20the%20stalks/near/162735760" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21303bundledpresheaveswithpreordersonthestalks.html#162735760">Scott Morrison (Apr 07 2019 at 03:53)</a>:</h4>
<p>No, I've never found documentation for the <code>simp</code> configuration object.</p>


{% endraw %}

{% include archive_update.html %}