---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/87399Icantbuildlean.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html">I can't build lean</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="123457140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123457140" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123457140">Kenny Lau (Mar 08 2018 at 18:44)</a>:</h4>
<p><code>ninja</code> gives me error. here's an excerpt:</p>
<div class="codehilite"><pre><span></span>C:\lean\library\init\algebra\ordered_group.lean:342:7: error: _interaction: trying to evaluate sorry
C:\lean\library\init\algebra\ordered_group.lean:342:7: error: unknown identifier &#39;h&#39;
C:\lean\library\init\algebra\ordered_group.lean:342:9: error: invalid &#39;begin-end&#39; expression, &#39;,&#39; expected
C:\lean\library\init\algebra\ordered_group.lean:343:2: error: sync
C:\lean\library\init\algebra\ordered_group.lean:340:0: error: invalid reference to undefined universe level parameter &#39;u_1&#39;
C:\lean\library\init\algebra\ring.lean:168:11: error: _interaction: trying to evaluate sorry
C:\lean\library\init\algebra\ordered_group.lean:340:0: error: invalid reference to undefined universe level parameter &#39;u_6&#39;
C:\lean\library\init\algebra\ordered_group.lean:343:6: error: unknown identifier &#39;neg_add_cancel_left&#39;
C:\lean\library\init\algebra\ordered_group.lean:343:26: error: invalid &#39;begin-end&#39; expression, &#39;,&#39; expected
C:\lean\library\init\algebra\ordered_group.lean:344:0: error: sync
C:\lean\library\init\algebra\ring.lean:168:11: error: invalid reference to undefined universe level parameter &#39;u_2&#39;
C:\lean\library\init\algebra\ring.lean:168:11: error: invalid reference to undefined universe level parameter &#39;u_4&#39;
C:\lean\library\init\algebra\ring.lean:168:11: error: invalid reference to undefined universe level parameter &#39;u_11&#39;
C:\lean\library\init\algebra\ring.lean:168:11: error: invalid reference to undefined universe level parameter &#39;u_16&#39;
C:\lean\library\init\algebra\ring.lean:168:39: error: invalid reference to undefined universe level parameter &#39;u_1&#39;
C:\lean\library\init\algebra\ring.lean:168:39: error: invalid reference to undefined universe level parameter &#39;u_6&#39;
C:\lean\library\init\algebra\ring.lean:169:22: error: unknown identifier &#39;add_left_cancel&#39;
C:\lean\library\init\algebra\ordered_group.lean:335:0: error: failed to synthesize type class instance for
α : Type u,
_inst_1 : ordered_comm_group α,
a b c : α,
h : b ≤ -a + c
⊢ has_bind tactic
C:\lean\library\init\algebra\ordered_group.lean:335:0: error: failed to synthesize type class instance for
α : Type u,
_inst_1 : ordered_comm_group α,
a b c : α,
h : b ≤ -a + c
⊢ has_bind tactic
C:\lean\library\init\algebra\ordered_group.lean:337:2: error: failed to synthesize type class instance for
α : Type u,
_inst_1 : ordered_comm_group α,
a b c : α,
h : b ≤ -a + c
⊢ has_bind tactic
C:\lean\library\init\algebra\ordered_group.lean:342:2: error: failed to synthesize type class instance for
α : Type u,
_inst_1 : ordered_comm_group α,
a b c : α,
h : a + b ≤ c
⊢ has_bind tactic
C:\lean\library\init\algebra\ring.lean:174:8: error: _interaction: trying to evaluate sorry
C:\lean\library\init\algebra\ring.lean:174:8: error: invalid reference to undefined universe level parameter &#39;u_2&#39;
C:\lean\library\init\algebra\ring.lean:174:8: error: invalid reference to undefined universe level parameter &#39;u_4&#39;
C:\lean\library\init\algebra\ring.lean:174:8: error: invalid reference to undefined universe level parameter &#39;u_11&#39;
C:\lean\library\init\algebra\ordered_group.lean:336:2: error: don&#39;t know how to synthesize placeholder
context:
α : Type u,
_inst_1 : ordered_comm_group α,
a b c : α,
h : b ≤ -a + c
⊢ Type ?
C:\lean\library\init\algebra\ring.lean:174:8: error: invalid reference to undefined universe level parameter &#39;u_16&#39;
C:\lean\library\init\algebra\ordered_group.lean:341:0: error: failed to synthesize type class instance for
α : Type u,
_inst_1 : ordered_comm_group α,
a b c : α,
h : a + b ≤ c
⊢ has_bind tactic
C:\lean\library\init\algebra\ring.lean:174:41: error: invalid reference to undefined universe level parameter &#39;u_1&#39;
C:\lean\library\init\algebra\ring.lean:174:41: error: invalid reference to undefined universe level parameter &#39;u_6&#39;
C:\lean\library\init\algebra\ring.lean:167:36: error: failed to synthesize type class instance for
α : Type u,
_inst_1 : ring α,
a : α
⊢ has_bind tactic
C:\lean\library\init\algebra\ring.lean:175:23: error: unknown identifier &#39;add_left_cancel&#39;
C:\lean\library\init\algebra\ordered_group.lean:341:0: error: failed to synthesize type class instance for
α : Type u,
_inst_1 : ordered_comm_group α,
a b c : α,
h : a + b ≤ c
⊢ has_bind tactic
C:\lean\library\init\algebra\ordered_group.lean:344:0: error: failed to synthesize type class instance for
α : Type u,
_inst_1 : ordered_comm_group α,
a b c : α,
h : a + b ≤ c
⊢ has_bind tactic
C:\lean\library\init\algebra\ring.lean:168:36: error: failed to synthesize type class instance for
α : Type u,
_inst_1 : ring α,
a : α
⊢ has_bind tactic
C:\lean\library\init\algebra\ordered_group.lean:348:7: error: _interaction: trying to evaluate sorry
C:\lean\library\init\algebra\ordered_group.lean:348:7: error: _interaction: trying to evaluate sorry
C:\lean\library\init\algebra\ordered_group.lean:341:0: error: failed to synthesize type class instance for
α : Type u,
</pre></div>

<a name="123457142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123457142" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123457142">Kenny Lau (Mar 08 2018 at 18:44)</a>:</h4>
<p>The error is kinda long and I don't know where to copy it from</p>

<a name="123457453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123457453" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123457453">Kenny Lau (Mar 08 2018 at 18:52)</a>:</h4>
<p><a href="https://github.com/leanprover/lean" target="_blank" title="https://github.com/leanprover/lean">https://github.com/leanprover/lean</a></p>

<a name="123457454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123457454" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123457454">Kenny Lau (Mar 08 2018 at 18:52)</a>:</h4>
<p>nvm lean is still building</p>

<a name="123457457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123457457" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123457457">Simon Hudon (Mar 08 2018 at 18:52)</a>:</h4>
<p>When you install Lean, where does it put the library? Try deleting that</p>

<a name="123457613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123457613" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123457613">Kenny Lau (Mar 08 2018 at 18:56)</a>:</h4>
<p>I've got a new error</p>

<a name="123457614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123457614" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123457614">Kenny Lau (Mar 08 2018 at 18:56)</a>:</h4>
<div class="codehilite"><pre><span></span>[36/40] Building CXX object shell/CMakeFiles/lean.dir/server.cpp.obj
[37/40] Linking CXX executable shell\lean_js.exe
[38/40] Linking CXX executable shell\lean.exe
FAILED: shell/lean.exe
cmd.exe /C &quot;cd . &amp;&amp; C:\msys64\mingw64\bin\c++.exe  -Wall -Wextra -std=c++11  -D LEAN_WINDOWS -D LEAN_WIN_STACK_SIZE=104857600 -D LEAN_JSON -D_GLIBCXX_USE_CXX11_ABI=0 -D LEAN_MULTI_THREAD -D LEAN_AUTO_THREAD_FINALIZATION -DLEAN_BUILD_TYPE=&quot;RELEASE&quot; -O3 -DNDEBUG  -Wl,--stack,104857600 -pthread shell/CMakeFiles/lean.dir/lean.cpp.obj shell/CMakeFiles/lean.dir/server.cpp.obj shell/CMakeFiles/lean.dir/leandoc.cpp.obj  -o shell\lean.exe -Wl,--major-image-version,0,--minor-image-version,0  libleanstatic.a -lgmp -lpsapi -lkernel32 -luser32 -lgdi32 -lwinspool -lshell32 -lole32 -loleaut32 -luuid -lcomdlg32 -ladvapi32 &amp;&amp; cmd.exe /C &quot;cd /D C:\lean\build\release\shell &amp;&amp; C:\msys64\mingw64\bin\cmake.exe -E remove -f C:/lean/src/../bin/lean.exe &amp;&amp; C:\msys64\mingw64\bin\cmake.exe -E copy C:/lean/build/release/shell/lean.exe C:/lean/src/../bin/&quot;&quot;
Error copying file &quot;C:/lean/build/release/shell/lean.exe&quot; to &quot;C:/lean/src/../bin/&quot;.
ninja: build stopped: subcommand failed.
</pre></div>

<a name="123457639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123457639" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123457639">Kenny Lau (Mar 08 2018 at 18:57)</a>:</h4>
<p>I've reverted to an older version by <code>git checkout</code></p>

<a name="123457641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123457641" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123457641">Kenny Lau (Mar 08 2018 at 18:57)</a>:</h4>
<p>and then I tried to build it again</p>

<a name="123457693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123457693" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123457693">Simon Hudon (Mar 08 2018 at 18:58)</a>:</h4>
<p>Did you pick a revision which builds on Travis and AppVeyor?</p>

<a name="123457699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123457699" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123457699">Kenny Lau (Mar 08 2018 at 18:58)</a>:</h4>
<p>I used <code>832d235</code> because Kevin Buzzard is currently running on that</p>

<a name="123457703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123457703" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123457703">Kenny Lau (Mar 08 2018 at 18:59)</a>:</h4>
<p>how do I check if it builds on Travis and AppVeyor?</p>

<a name="123457826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123457826" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123457826">Simon Hudon (Mar 08 2018 at 19:01)</a>:</h4>
<p>You can go: <a href="https://github.com/leanprover/lean/commits/master" target="_blank" title="https://github.com/leanprover/lean/commits/master">https://github.com/leanprover/lean/commits/master</a></p>
<p>The commits that pass both have a green check mark</p>

<a name="123457889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123457889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123457889">Kenny Lau (Mar 08 2018 at 19:02)</a>:</h4>
<p>the last green check mark is March 2 :o</p>

<a name="123457903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123457903" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123457903">Mario Carneiro (Mar 08 2018 at 19:03)</a>:</h4>
<p><span class="user-mention" data-user-email="kc_kennylau@yahoo.com.hk" data-user-id="110064">@Kenny Lau</span> The last error you posted usually indicates that <code>lean.exe</code>is locked (usually because it is running somewhere), so the copy command fails. I have had success with deleting <code>lean.exe</code> and then running <code>ninja</code> again</p>

<a name="123457913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123457913" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123457913">Kenny Lau (Mar 08 2018 at 19:03)</a>:</h4>
<p>oh thanks, lemme try</p>

<a name="123457963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123457963" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123457963">Kenny Lau (Mar 08 2018 at 19:04)</a>:</h4>
<p>but should I just go with the green check marks</p>

<a name="123458050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123458050" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123458050">Mario Carneiro (Mar 08 2018 at 19:06)</a>:</h4>
<p>Sometimes this fails as well because <code>ninja</code> fails to detect that <code>lean.exe</code> has been deleted, and starts running the build script from after when the file should already exist. When this happens I just touch any cpp file and run <code>ninja</code> again to force recompilation</p>

<a name="123458375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123458375" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123458375">Kenny Lau (Mar 08 2018 at 19:15)</a>:</h4>
<p><span class="user-mention" data-user-email="di.gama@gmail.com" data-user-id="110049">@Mario Carneiro</span> I deleted lean.exe, now it's complaining that lean.exe isn't there</p>

<a name="123458388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123458388" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123458388">Mario Carneiro (Mar 08 2018 at 19:15)</a>:</h4>
<p>see my last comment</p>

<a name="123458408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123458408" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123458408">Mario Carneiro (Mar 08 2018 at 19:15)</a>:</h4>
<p>open any cpp file, add and delete a space somewhere, and save, then run ninja again</p>

<a name="123458452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123458452" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123458452">Kenny Lau (Mar 08 2018 at 19:16)</a>:</h4>
<p>oh</p>

<a name="123458456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123458456" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123458456">Kenny Lau (Mar 08 2018 at 19:16)</a>:</h4>
<p>nice</p>

<a name="123458579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123458579" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123458579">Kenny Lau (Mar 08 2018 at 19:19)</a>:</h4>
<p>parabens por mim, it worked</p>

<a name="123458722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/I%20can%27t%20build%20lean/near/123458722" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/87399Icantbuildlean.html#123458722">Kevin Buzzard (Mar 08 2018 at 19:22)</a>:</h4>
<p>I just built lean head on Ubuntu 16.04 -- hopefully no memory leaks any more!</p>


{% endraw %}

{% include archive_update.html %}