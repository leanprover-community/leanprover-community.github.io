---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/20999cachingproofs.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html">caching proofs</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="134150227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150227" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150227">Scott Morrison (Sep 18 2018 at 07:25)</a>:</h4>
<p>So I'm moving it here.</p>

<a name="134150232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150232" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150232">Sean Leather (Sep 18 2018 at 07:25)</a>:</h4>
<p>From <a href="#narrow/stream/113489-new-members/subject/caching.20proofs/near/134150221" title="#narrow/stream/113489-new-members/subject/caching.20proofs/near/134150221">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/subject/caching.20proofs/near/134150221</a></p>

<a name="134150236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150236" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150236">Scott Morrison (Sep 18 2018 at 07:25)</a>:</h4>
<p>Thanks.</p>

<a name="134150273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150273" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150273">Scott Morrison (Sep 18 2018 at 07:26)</a>:</h4>
<p>Yes, that second pass is just unavoidably slow.</p>

<a name="134150280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150280" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150280">Johan Commelin (Sep 18 2018 at 07:26)</a>:</h4>
<p>So I'm fine if Travis does that, and I never do it.</p>

<a name="134150281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150281" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150281">Scott Morrison (Sep 18 2018 at 07:26)</a>:</h4>
<p>But I think there's still useful information for the user in seeing the first pass succeed.</p>

<a name="134150282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150282" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150282">Johan Commelin (Sep 18 2018 at 07:26)</a>:</h4>
<p>Or almost never...</p>

<a name="134150283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150283" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150283">Scott Morrison (Sep 18 2018 at 07:26)</a>:</h4>
<p>Yes.</p>

<a name="134150286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150286" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150286">Sean Leather (Sep 18 2018 at 07:26)</a>:</h4>
<p>What exactly are you guys referring to when you say “proof cache”?</p>

<a name="134150288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150288" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150288">Scott Morrison (Sep 18 2018 at 07:26)</a>:</h4>
<p>The point of course is to get back as quickly as possible to responsive editing.</p>

<a name="134150295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150295" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150295">Scott Morrison (Sep 18 2018 at 07:27)</a>:</h4>
<p>(For us poor idiots who use interactive mode, and <em>can't</em>, like some people here, write Lean code while offline. :-)</p>

<a name="134150308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150308">Scott Morrison (Sep 18 2018 at 07:27)</a>:</h4>
<p>Of course, olean files _are_ a proof cache.</p>

<a name="134150312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150312" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150312">Scott Morrison (Sep 18 2018 at 07:28)</a>:</h4>
<p>So the idea might be merely this:</p>

<a name="134150353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150353" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150353">Scott Morrison (Sep 18 2018 at 07:28)</a>:</h4>
<p>if Lean notices that an olean file is outdated (i.e. the source file, or a dependency source file, is newer)</p>

<a name="134150356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150356" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150356">Patrick Massot (Sep 18 2018 at 07:28)</a>:</h4>
<p>Do you know about <a href="https://github.com/leanprover/lean/issues/1601" target="_blank" title="https://github.com/leanprover/lean/issues/1601">https://github.com/leanprover/lean/issues/1601</a>? Fixing this issue is part of the Lean 4 plan ifI understand correctly</p>

<a name="134150364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150364" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150364">Scott Morrison (Sep 18 2018 at 07:28)</a>:</h4>
<p><em>before</em> disposing of the olean file it loads it one last time</p>

<a name="134150380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150380" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150380">Scott Morrison (Sep 18 2018 at 07:29)</a>:</h4>
<p>and tries to use existing proofs for the current set of lemmas, ignoring on the first pass the actual proof term written in the source file (whether generated in term or tactic mode)</p>

<a name="134150386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150386" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150386">Scott Morrison (Sep 18 2018 at 07:29)</a>:</h4>
<p>but of course eventually there does have to be a second pass that reverifies what the user has written and constructs a new olean.</p>

<a name="134150446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150446" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150446">Kevin Buzzard (Sep 18 2018 at 07:30)</a>:</h4>
<blockquote>
<p>(For us poor idiots who use interactive mode, and <em>can't</em>, like some people here, write Lean code while offline. :-)</p>
</blockquote>
<p>Q1 What's "offline"? Q2 why can't you write code offline? What is interactive mode?</p>

<a name="134150523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150523" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150523">Johan Commelin (Sep 18 2018 at 07:32)</a>:</h4>
<p>I think "offline" here means: Writing code without Lean responding to what you write. (Just using your internal elaborater/kernel to verify your own code.)</p>

<a name="134150545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150545" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150545">Kevin Buzzard (Sep 18 2018 at 07:33)</a>:</h4>
<p>eew.</p>

<a name="134150547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150547" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150547">Scott Morrison (Sep 18 2018 at 07:33)</a>:</h4>
<p>In particular <span class="user-mention" data-user-id="110026">@Simon Hudon</span> appears to have written working code for me without ever running Lean...!</p>

<a name="134150599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150599" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150599">Scott Morrison (Sep 18 2018 at 07:34)</a>:</h4>
<p>(Sometimes I've been able to tell because of some minor typo, meaning it just barely missed actually compiling. :-)</p>

<a name="134150602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150602" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150602">Johan Commelin (Sep 18 2018 at 07:34)</a>:</h4>
<p>In Orsay I witnessed Mario writing half a proof while Lean was thinking. He didn't need to go back and change those 5 lines after Lean caught up with him.</p>

<a name="134150603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150603">Scott Morrison (Sep 18 2018 at 07:34)</a>:</h4>
<p>It's terrifying, isn't it? :-)</p>

<a name="134150610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150610" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150610">Scott Morrison (Sep 18 2018 at 07:34)</a>:</h4>
<p>Yellow bars just cause my brain to freeze up. :-)</p>

<a name="134150678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150678" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150678">Sean Leather (Sep 18 2018 at 07:36)</a>:</h4>
<p>I don't use interactive mode, so I just see walls of errors, not yellow bars.</p>

<a name="134150700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150700" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150700">Johan Commelin (Sep 18 2018 at 07:37)</a>:</h4>
<blockquote>
<p>I don't use interactive mode, so I just see walls of errors, not yellow bars.</p>
</blockquote>
<p>Wait... do you mean that you write Lean the way I would write C or Python?</p>

<a name="134150744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150744" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150744">Johan Commelin (Sep 18 2018 at 07:38)</a>:</h4>
<p>Edit file → Save → Compile/run the file in terminal → Parse errors → Go back to step 1</p>

<a name="134150745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150745" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150745">Scott Morrison (Sep 18 2018 at 07:38)</a>:</h4>
<p>Well... presumably he doesn't actually ever <em>execute</em> any code.</p>

<a name="134150748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150748" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150748">Sean Leather (Sep 18 2018 at 07:38)</a>:</h4>
<p>Yep.</p>

<a name="134150750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150750" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150750">Scott Morrison (Sep 18 2018 at 07:38)</a>:</h4>
<p>Well, Sean might, actually. :-)</p>

<a name="134150751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150751" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150751">Sean Leather (Sep 18 2018 at 07:38)</a>:</h4>
<p><span class="emoji emoji-1f604" title="big smile">:big_smile:</span></p>

<a name="134150756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150756" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150756">Johan Commelin (Sep 18 2018 at 07:38)</a>:</h4>
<p>Aaahrg... <span class="emoji emoji-1f631" title="scream">:scream:</span> you guys are really crazy...</p>

<a name="134150807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150807" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150807">Sean Leather (Sep 18 2018 at 07:40)</a>:</h4>
<p>Anyway, I'm not sure if it's the same problem as in interactive mode: I'd like to speed up <code>lean --make</code>.</p>

<a name="134150822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150822" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150822">Sean Leather (Sep 18 2018 at 07:40)</a>:</h4>
<p>So, it would be nice if I had all of the generated proof terms for, say, mathlib. So, if I make one change, <code>lean</code> doesn't have to recheck entire files.</p>

<a name="134150823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150823" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150823">Johan Commelin (Sep 18 2018 at 07:40)</a>:</h4>
<p>I guess it is the same bottleneck that we are hitting.</p>

<a name="134150835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150835" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150835">Sean Leather (Sep 18 2018 at 07:41)</a>:</h4>
<p>On the other hand, as Scott said, one small change can change tactics. But I think that should be checked at “release” time.</p>

<a name="134150836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150836" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150836">Sean Leather (Sep 18 2018 at 07:41)</a>:</h4>
<p>... as opposed to “interactive” time.</p>

<a name="134150846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150846" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150846">Sean Leather (Sep 18 2018 at 07:41)</a>:</h4>
<p>So, at the very least, I know proof works. But I may need to go back and check a tactic somewhere afterwards.</p>

<a name="134150900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150900" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150900">Sean Leather (Sep 18 2018 at 07:42)</a>:</h4>
<p>I envision it like having a <code>--fast</code> mode and a <code>--release</code> mode. Names up for debate.</p>

<a name="134150912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150912" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150912">Johan Commelin (Sep 18 2018 at 07:43)</a>:</h4>
<p>We already have trust levels...</p>

<a name="134150918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150918" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150918">Sean Leather (Sep 18 2018 at 07:43)</a>:</h4>
<p>Or <code>--fast</code> and <code>--full</code> to use alliteration.</p>

<a name="134150922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150922" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150922">Sean Leather (Sep 18 2018 at 07:43)</a>:</h4>
<p>How do trust levels come into the picture here?</p>

<a name="134150934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150934" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150934">Johan Commelin (Sep 18 2018 at 07:43)</a>:</h4>
<p>Well, you are putting "trust" in the cache, right?</p>

<a name="134150977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150977" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150977">Johan Commelin (Sep 18 2018 at 07:44)</a>:</h4>
<p>I could envision a new trust level, that will trust cached proofs.</p>

<a name="134150983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150983" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150983">Johan Commelin (Sep 18 2018 at 07:44)</a>:</h4>
<p>Does that make sense?</p>

<a name="134150989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134150989" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134150989">Sean Leather (Sep 18 2018 at 07:44)</a>:</h4>
<p>Perhaps. I don't have a clear picture of what that means.</p>

<a name="134151006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134151006" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134151006">Sean Leather (Sep 18 2018 at 07:45)</a>:</h4>
<p>I'm not thinking of trust. I'm thinking of checking only what changed within a single file (to simplify the problem).</p>

<a name="134151145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134151145" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134151145">Sean Leather (Sep 18 2018 at 07:49)</a>:</h4>
<p>Here's something that doesn't work for all changes, but might work for some: run a quick pass over the interfaces of a file's cached proof terms, check if they differ from the source file, build the ones that differ or are not found in the cache.</p>

<a name="134151220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134151220" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134151220">Sean Leather (Sep 18 2018 at 07:50)</a>:</h4>
<p>After that, perhaps you could more lazily regenerate the other proof terms of the file.</p>

<a name="134151306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134151306" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134151306">Sean Leather (Sep 18 2018 at 07:52)</a>:</h4>
<p>Also, perhaps the generated proof cache could keep track of failed proofs and Lean would try to rebuild those first.</p>

<a name="134151318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134151318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134151318">Sean Leather (Sep 18 2018 at 07:52)</a>:</h4>
<p>That might improve interactive responsiveness.</p>

<a name="134151328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134151328" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134151328">Johan Commelin (Sep 18 2018 at 07:53)</a>:</h4>
<p>I wouldn't mind if Lean did low-priority (in the sense of CPU scheduler) checks to see if my new <code>@[simp]</code> lemma broke a proof <code>by tidy</code> in some files that I didn't have open. But as soon as I make a change in my file the <code>--fast</code> Lean should do a high-priority check to get me back to responsive editing as soon as possible.</p>

<a name="134151406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134151406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134151406">Sean Leather (Sep 18 2018 at 07:55)</a>:</h4>
<p>Yeah, that's the idea, though I was actually thinking <code>--fast</code> wouldn't even try to check the effect of <code>@[simp]</code> lemmas or other things that change how tactics work. But I could see it going either way.</p>

<a name="134151413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134151413" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134151413">Johan Commelin (Sep 18 2018 at 07:55)</a>:</h4>
<blockquote>
<p>Do you know about <a href="https://github.com/leanprover/lean/issues/1601" target="_blank" title="https://github.com/leanprover/lean/issues/1601">https://github.com/leanprover/lean/issues/1601</a>? Fixing this issue is part of the Lean 4 plan ifI understand correctly</p>
</blockquote>
<p>That definitely looks relevant! Thanks <span class="user-mention" data-user-id="110031">@Patrick Massot</span></p>

<a name="134151538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134151538" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134151538">Sean Leather (Sep 18 2018 at 07:58)</a>:</h4>
<p>Here are two possibilities:</p>
<p>1. An interactive mode that optimizes for checking work-in-progress proofs and reduces the priority of full-file and full-library builds.<br>
2. A fast mode that only checks for work-in-progress proofs and builds a single file at a time and a full mode that builds everything.</p>

<a name="134200810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134200810" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134200810">Simon Hudon (Sep 18 2018 at 23:40)</a>:</h4>
<p><span class="user-mention" data-user-id="110045">@Sean Leather</span> Isn't that already what the ideas do? I feel like lean-mode does it at least.</p>
<p><span class="user-mention" data-user-id="110524">@Scott Morrison</span> I do use the interactive modes but sometimes I'm too lazy to go back to emacs to write my code snippets. I'm glad I don't have too bad a track record :)</p>

<a name="134212305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134212305" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134212305">Sean Leather (Sep 19 2018 at 05:40)</a>:</h4>
<blockquote>
<p>Isn't that already what the ideas do? I feel like lean-mode does it at least.</p>
</blockquote>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> What are “the ideas”?</p>
<p>I don't know exactly what does what, so I'm just throwing out some thoughts. I do know that if I make a change in a large file in mathlib and build with <code>lean --make</code>, I see that the entire file has to be built before it gets to my change. That's what I would propose improving.</p>
<p>As I said above, I don't use the interactive approach, and I don't know if the problem I have is the same problem others are discussing.</p>

<a name="134213789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134213789" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134213789">Simon Hudon (Sep 19 2018 at 06:25)</a>:</h4>
<p>I misspelled IDE</p>

<a name="134213795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134213795" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134213795">Simon Hudon (Sep 19 2018 at 06:25)</a>:</h4>
<p>So what is your workflow like if you don't use them?</p>

<a name="134213841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134213841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134213841">Sean Leather (Sep 19 2018 at 06:26)</a>:</h4>
<p>Edit in <code>vim</code>, run <code>leanpkg build</code>.</p>

<a name="134214709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134214709" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134214709">Simon Hudon (Sep 19 2018 at 06:52)</a>:</h4>
<p>That sounds painful</p>

<a name="134214720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134214720" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134214720">Sean Leather (Sep 19 2018 at 06:53)</a>:</h4>
<p><span class="emoji emoji-1f937" title="shrug">:shrug:</span> Works well for me.</p>

<a name="134214780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134214780" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134214780">Kevin Buzzard (Sep 19 2018 at 06:55)</a>:</h4>
<p>I print the files out, cross out some lines in pencil and add others in, then compile in my head.</p>

<a name="134214784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134214784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134214784">Kevin Buzzard (Sep 19 2018 at 06:55)</a>:</h4>
<p>that's how we did it in the old days before computers</p>

<a name="134214792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134214792" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134214792">Sean Leather (Sep 19 2018 at 06:56)</a>:</h4>
<p>How did you print files without computers? <span class="emoji emoji-1f4bb" title="computer">:computer:</span> <span class="emoji emoji-27a1" title="right">:right:</span> <span class="emoji emoji-1f5a8" title="printer">:printer:</span></p>

<a name="134214831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134214831" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134214831">Kevin Buzzard (Sep 19 2018 at 06:56)</a>:</h4>
<p>I use my typewriter</p>

<a name="134214849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134214849" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134214849">Sean Leather (Sep 19 2018 at 06:56)</a>:</h4>
<p>Oh, they usually refer to that as typing, not printing, right?</p>

<a name="134214864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134214864" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134214864">Johan Commelin (Sep 19 2018 at 06:56)</a>:</h4>
<p>He has a printing press à la Gutenberg in his cellar (-;</p>

<a name="134214865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134214865" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134214865">Kevin Buzzard (Sep 19 2018 at 06:56)</a>:</h4>
<p>I guess they call it that nowadays.</p>

<a name="134214929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134214929" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134214929">Simon Hudon (Sep 19 2018 at 06:58)</a>:</h4>
<p>Amateurs. Here's my workflow: <a href="https://xkcd.com/378/" target="_blank" title="https://xkcd.com/378/">https://xkcd.com/378/</a></p>

<a name="134215138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134215138" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134215138">Johan Commelin (Sep 19 2018 at 07:03)</a>:</h4>
<p><code>C-x M-c M-butterfly</code></p>

<a name="134256955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/caching%20proofs/near/134256955" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/20999cachingproofs.html#134256955">Simon Hudon (Sep 19 2018 at 17:40)</a>:</h4>
<p><span class="user-mention" data-user-id="110045">@Sean Leather</span> I think this is a case in which, before you see what you're missing out on, you don't know that you're missing out. I find it incredibly useful when writing tactic that, as I type and change my scripts, I can see the print out of the example I'm using the tactic on. That save a whole lot of time</p>


{% endraw %}
