---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/56247localnotationforfinn1.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html">local notation for fin (n+1)</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="127019139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127019139" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127019139">Johan Commelin (May 24 2018 at 18:38)</a>:</h4>
<p>How do I make the following work?</p>
<div class="codehilite"><pre><span></span><span class="n">local</span> <span class="kn">notation</span> <span class="bp">`</span> <span class="o">[</span><span class="n">n</span><span class="o">]</span> <span class="bp">`</span> <span class="o">:=</span> <span class="n">fin</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>
</pre></div>


<p>I need this notation a lot, and all the explicit <code>fin (n+1)</code>'s are driving me crazy. Plus all the off-by-one errors that creep into my code...</p>

<a name="127019201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127019201" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127019201">Kevin Buzzard (May 24 2018 at 18:40)</a>:</h4>
<p>hmm</p>

<a name="127019204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127019204" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127019204">Kevin Buzzard (May 24 2018 at 18:40)</a>:</h4>
<p><code>[n]</code> already means something else</p>

<a name="127019208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127019208" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127019208">Kevin Buzzard (May 24 2018 at 18:40)</a>:</h4>
<p>Oh -- I think that the n in quotes is a literal n</p>

<a name="127019213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127019213" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127019213">Kevin Buzzard (May 24 2018 at 18:41)</a>:</h4>
<p>so at the very least you'll want <code> ` [ ` n ` ] ` </code></p>

<a name="127019219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127019219" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127019219">Kevin Buzzard (May 24 2018 at 18:41)</a>:</h4>
<p>but I am not sure how over-riding already-used notation works</p>

<a name="127019343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127019343" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127019343">Johan Commelin (May 24 2018 at 18:45)</a>:</h4>
<p>Thanks, it is working now. I didn't know about the existing notation; but using <code>local notation</code> I can override it just fine (-;</p>

<a name="127019774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127019774" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127019774">Kevin Buzzard (May 24 2018 at 18:58)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">variable</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="bp">#</span><span class="kn">check</span> <span class="o">[</span><span class="n">n</span><span class="o">]</span> <span class="c1">-- list ℕ</span>
</pre></div>

<a name="127019779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127019779" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127019779">Kevin Buzzard (May 24 2018 at 18:58)</a>:</h4>
<p>you just broke list ;-)</p>

<a name="127019780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127019780" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127019780">Kevin Buzzard (May 24 2018 at 18:58)</a>:</h4>
<p>at least locally</p>

<a name="127019783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127019783" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127019783">Kevin Buzzard (May 24 2018 at 18:58)</a>:</h4>
<p>of course, this might be clever :-)</p>

<a name="127019795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127019795" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127019795">Kevin Buzzard (May 24 2018 at 18:59)</a>:</h4>
<p>although given your smiley convention I think I would have recommended <code> ` (-; ` n ` ;-) ` </code></p>

<a name="127020026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127020026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127020026">Johan Commelin (May 24 2018 at 19:07)</a>:</h4>
<p>Hmm, but I guess that the <code>local</code> prefix means that I am still safe. I'm not using lists...</p>

<a name="127020289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127020289" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127020289">Patrick Massot (May 24 2018 at 19:16)</a>:</h4>
<p>Johan, there are plenty of brackets available. See how I use brackets for commutators in <a href="https://github.com/PatrickMassot/lean-scratchpad/blob/master/src/support.lean#L115" target="_blank" title="https://github.com/PatrickMassot/lean-scratchpad/blob/master/src/support.lean#L115">https://github.com/PatrickMassot/lean-scratchpad/blob/master/src/support.lean#L115</a> for instance</p>

<a name="127020333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127020333" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127020333">Kevin Buzzard (May 24 2018 at 19:16)</a>:</h4>
<p>But <code>[n]</code> is standard in this game, isn't it?</p>

<a name="127020336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127020336" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127020336">Patrick Massot (May 24 2018 at 19:16)</a>:</h4>
<p>Sure. <code>[a, b]</code> for commutators is also standard</p>

<a name="127020337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127020337" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127020337">Kevin Buzzard (May 24 2018 at 19:16)</a>:</h4>
<p>CS : "overloading is bad"; Math "but we do it so well!"</p>

<a name="127020344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127020344" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127020344">Patrick Massot (May 24 2018 at 19:17)</a>:</h4>
<p>But waiting for CS people to change their notation for lists won't help</p>

<a name="127020345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127020345" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127020345">Kevin Buzzard (May 24 2018 at 19:17)</a>:</h4>
<p>I don't think Johan should even make the notation local</p>

<a name="127020348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127020348" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127020348">Kevin Buzzard (May 24 2018 at 19:17)</a>:</h4>
<p>I think Lean should just infer which notation is being used</p>

<a name="127020350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127020350" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127020350">Kevin Buzzard (May 24 2018 at 19:17)</a>:</h4>
<p>it has an elaborator, right?</p>

<a name="127020351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127020351" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127020351">Patrick Massot (May 24 2018 at 19:17)</a>:</h4>
<p>Sometimes it does</p>

<a name="127020406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127020406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127020406">Patrick Massot (May 24 2018 at 19:19)</a>:</h4>
<p>Sean, I meant: "sometimes it infers which notation is being used", not "sometimes it has an elaborator"...</p>

<a name="127020458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127020458" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127020458">Sean Leather (May 24 2018 at 19:20)</a>:</h4>
<p>Patrick: Aww, I liked the latter interpretation better.</p>

<a name="127020591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127020591" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127020591">Kevin Buzzard (May 24 2018 at 19:25)</a>:</h4>
<p>Man, that would be a pretty crazy Lean 4 development</p>

<a name="127020594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127020594" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127020594">Kevin Buzzard (May 24 2018 at 19:25)</a>:</h4>
<p>"we removed the elaborator to encourage users to write better code"</p>

<a name="127020596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127020596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127020596">Kevin Buzzard (May 24 2018 at 19:25)</a>:</h4>
<p>the metamath approach</p>

<a name="127020637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127020637" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127020637">Patrick Massot (May 24 2018 at 19:26)</a>:</h4>
<p>This time we are happy Mario isn't working on Lean 4</p>

<a name="127020640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127020640" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127020640">Sean Leather (May 24 2018 at 19:26)</a>:</h4>
<p>Slogan: How To Be Lean: Elaborate It Yourself!</p>

<a name="127041620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127041620" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127041620">Reid Barton (May 25 2018 at 04:18)</a>:</h4>
<p>I wish there was something between <code>notation</code> and <code>local notation</code>, so that modules could export notation without forcing every downstream client to see it.<br>
For example, something like notation which is tied to the current namespace, so that it is only visible when that namespace is open.</p>

<a name="127041638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127041638" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127041638">Reid Barton (May 25 2018 at 04:18)</a>:</h4>
<p>(I think that exact idea is probably not very good, but something of that flavor.)</p>

<a name="127041848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127041848" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127041848">Mario Carneiro (May 25 2018 at 04:22)</a>:</h4>
<p>This is exactly how lean 2 notation used to work. Why it changed, I don't know, and I'm not clear on whether to expect this to be different in lean 4.</p>

<a name="127041932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127041932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127041932">Mario Carneiro (May 25 2018 at 04:24)</a>:</h4>
<p>I think that lean 3 notation is not handled very well at all, this is why I avoid all notation overloading in mathlib</p>

<a name="127041951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127041951" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127041951">Johan Commelin (May 25 2018 at 04:25)</a>:</h4>
<p>Hmmm, ok. Does that mean that my <code>local notation</code> for <code>fin (n+1)</code> is dangerous?</p>

<a name="127041964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127041964" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127041964">Mario Carneiro (May 25 2018 at 04:25)</a>:</h4>
<p>A local notation is fine, assuming you never use lists in that file</p>

<a name="127042026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127042026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127042026">Mario Carneiro (May 25 2018 at 04:26)</a>:</h4>
<p>but global notations require global coordination</p>

<a name="127042033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/local%20notation%20for%20fin%20%28n%2B1%29/near/127042033" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56247localnotationforfinn1.html#127042033">Johan Commelin (May 25 2018 at 04:26)</a>:</h4>
<p>Ok, understood</p>


{% endraw %}
