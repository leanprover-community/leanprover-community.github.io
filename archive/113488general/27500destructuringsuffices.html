---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/27500destructuringsuffices.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html">destructuring `suffices`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="194034769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194034769" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194034769">Reid Barton (Apr 15 2020 at 14:02)</a>:</h4>
<p><code>obtain</code> is basically a destructuring <code>have</code>, that is, a combination of <code>have</code> and <code>rcases</code>, right?<br>
Would it be sensible to have a matching destructuring <code>suffices</code>?</p>

<a name="194034968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194034968" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194034968">Mario Carneiro (Apr 15 2020 at 14:03)</a>:</h4>
<p>It's the same thing but with the goals in another order, right? It would have n+1 goals with n "conclusions" following the case split and then 1 proof of the target type</p>

<a name="194035115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194035115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194035115">Mario Carneiro (Apr 15 2020 at 14:04)</a>:</h4>
<p>Do we have a <code>rotate 1</code> tactic? Because it should have the same effect</p>

<a name="194035153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194035153" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194035153">Mario Carneiro (Apr 15 2020 at 14:04)</a>:</h4>
<p>that is, move the first goal to the end and move everything else up by one</p>

<a name="194035248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194035248" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194035248">Mario Carneiro (Apr 15 2020 at 14:05)</a>:</h4>
<p>I actually would like to rename <code>obtain</code> to <code>let</code></p>

<a name="194035370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194035370" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194035370">Mario Carneiro (Apr 15 2020 at 14:06)</a>:</h4>
<p>or possibly <code>have</code>; <code>have</code> is more correct but <code>let</code> lines up with term mode better</p>

<a name="194035569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194035569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194035569">Mario Carneiro (Apr 15 2020 at 14:07)</a>:</h4>
<p>If we did rename <code>obtain</code> to <code>have</code>, then destructuring <code>suffices</code> could be called just <code>suffices</code></p>

<a name="194035675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194035675" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194035675">Patrick Massot (Apr 15 2020 at 14:08)</a>:</h4>
<p><code>obtain</code> is called obtain instead of have because <code>have</code> was locked in core. <code>obtain</code> is what <code>have</code> should be, in the very same way that <code>rintro</code> is what <code>intro</code> should be, and <code>rcases</code> is what <code>cases</code> should be.</p>

<a name="194035758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194035758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194035758">Mario Carneiro (Apr 15 2020 at 14:08)</a>:</h4>
<p>Unlike <code>rcases</code>, <code>obtain</code> backwards compatibly extends <code>have</code> syntax</p>

<a name="194035819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194035819" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194035819">Mario Carneiro (Apr 15 2020 at 14:09)</a>:</h4>
<p><code>rintro</code> is also backward compatible</p>

<a name="194035900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194035900" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194035900">Patrick Massot (Apr 15 2020 at 14:09)</a>:</h4>
<p>I also with <code>rcases</code> and <code>rintros</code> could clear all autogenerated names after doing their <code>rfl</code> magic. When I replace one name of <code>rcases</code> with <code>_</code> it is either because a later <code>rfl</code> will discard it or because I don't plan to use it.</p>

<a name="194035987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194035987" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194035987">Patrick Massot (Apr 15 2020 at 14:10)</a>:</h4>
<p>Lean doesn't care about backward compatibility, right?</p>

<a name="194036041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194036041" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194036041">Reid Barton (Apr 15 2020 at 14:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/destructuring.20.60suffices.60/near/194035370" title="#narrow/stream/113488-general/topic/destructuring.20.60suffices.60/near/194035370">said</a>:</p>
<blockquote>
<p>or possibly <code>have</code>; <code>have</code> is more correct but <code>let</code> lines up with term mode better</p>
</blockquote>
<p>Yeah, this is annoying</p>

<a name="194036080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194036080" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194036080">Reid Barton (Apr 15 2020 at 14:10)</a>:</h4>
<p>I think it's term mode's fault though</p>

<a name="194036100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194036100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194036100">Reid Barton (Apr 15 2020 at 14:11)</a>:</h4>
<p>and so <code>have</code> is better</p>

<a name="194036325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194036325" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194036325">Mario Carneiro (Apr 15 2020 at 14:12)</a>:</h4>
<p>I often use <code>rcases</code> with a lot of underscores, but only half the time they are unnamed because of later <code>rfl</code>, the other half of the time they are just not going to be referred to, even if they appear in the goals or something</p>

<a name="194036433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194036433" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194036433">Mario Carneiro (Apr 15 2020 at 14:13)</a>:</h4>
<p>and given stuff like <code>assumption</code> or <code>simp *</code> I think it would be a breaking change to delete auto named variables</p>

<a name="194036727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194036727" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194036727">Reid Barton (Apr 15 2020 at 14:15)</a>:</h4>
<p>or <code>tidy</code></p>

<a name="194036762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194036762" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194036762">Reid Barton (Apr 15 2020 at 14:15)</a>:</h4>
<p>though <code>tidy</code> could adapt I suppose</p>

<a name="194036800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194036800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194036800">Mario Carneiro (Apr 15 2020 at 14:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113488-general/topic/destructuring.20.60suffices.60/near/194035987" title="#narrow/stream/113488-general/topic/destructuring.20.60suffices.60/near/194035987">said</a>:</p>
<blockquote>
<p>Lean doesn't care about backward compatibility, right?</p>
</blockquote>
<p>Leo will do what he does, but I care about backward compatibility, at least to the extent that I feel the pain of updating a large codebase like mathlib following a big change. That is to say, changes are not verboten but they must be weighed against the cost of updating many proof scripts</p>

<a name="194036967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194036967" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194036967">Mario Carneiro (Apr 15 2020 at 14:16)</a>:</h4>
<p>If you want to shoulder that responsibility, well okay then</p>

<a name="194037041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194037041" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194037041">Reid Barton (Apr 15 2020 at 14:17)</a>:</h4>
<p><code>git grep '\bcases.*with' | wc -l</code> is obviously a bit crude, but it's around 1000 lines which is indeed quite a lot</p>

<a name="194037061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194037061" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194037061">Reid Barton (Apr 15 2020 at 14:17)</a>:</h4>
<p>and some uses without <code>with</code> would be affected as well</p>

<a name="194037185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194037185" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194037185">Patrick Massot (Apr 15 2020 at 14:17)</a>:</h4>
<p>I think this is bad style to have useful autogenerated names, but ok.</p>

<a name="194037312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194037312" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194037312">Patrick Massot (Apr 15 2020 at 14:18)</a>:</h4>
<p>Of course such a change would be much easier for the Lean 4 refactoring tools.</p>

<a name="194037318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194037318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194037318">Mario Carneiro (Apr 15 2020 at 14:18)</a>:</h4>
<p>I think that in isabelle style you don't name anything and just use assumption or lookup by type</p>

<a name="194037454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194037454" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194037454">Reid Barton (Apr 15 2020 at 14:19)</a>:</h4>
<p>More precisely what is bad style is to refer to an autogenerated name by name</p>

<a name="194037605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194037605" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194037605">Johan Commelin (Apr 15 2020 at 14:20)</a>:</h4>
<p>Why is <code>rcases</code> incompatible with <code>cases</code>? Can't the parser check whether we have <code>\&lt;</code> or not?</p>

<a name="194037660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194037660" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194037660">Mario Carneiro (Apr 15 2020 at 14:20)</a>:</h4>
<p>I recall some discussion about that</p>

<a name="194037671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194037671" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194037671">Johan Commelin (Apr 15 2020 at 14:21)</a>:</h4>
<p>If the stuff following <code>with</code> starts with <code>\&lt;</code> then use <code>rcases</code>, otherwise use ancient <code>cases</code></p>

<a name="194037711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194037711" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194037711">Mario Carneiro (Apr 15 2020 at 14:21)</a>:</h4>
<p>The only questionable spot is <code>rcases _ with a</code></p>

<a name="194037731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194037731" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194037731">Mario Carneiro (Apr 15 2020 at 14:21)</a>:</h4>
<p>because that fits in both grammars</p>

<a name="194037839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194037839" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194037839">Reid Barton (Apr 15 2020 at 14:22)</a>:</h4>
<p>(oh, maybe that's what Patrick meant by "useful")</p>

<a name="194037892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194037892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194037892">Mario Carneiro (Apr 15 2020 at 14:22)</a>:</h4>
<p>Currently, I think both <code>rcases</code> and <code>cases</code> treat that as one case split, but compatibility with <code>have</code> and friends would require that to behave the same as <code>have a := _</code></p>

<a name="194038170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194038170" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194038170">Patrick Massot (Apr 15 2020 at 14:24)</a>:</h4>
<p>I wouldn't care if <code>cases _ with a</code> is broken. I would never write that.</p>

<a name="194038191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194038191" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194038191">Mario Carneiro (Apr 15 2020 at 14:24)</a>:</h4>
<p>this is especially problematic for destructuring something like <code>inhabited A</code> using <code>cases</code> because <code>cases h with a</code> is the only reasonable way to write it</p>

<a name="194038284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194038284" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194038284">Johan Commelin (Apr 15 2020 at 14:25)</a>:</h4>
<p>Why not <code>cases h with \&lt;a\&gt;</code>?</p>

<a name="194038333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194038333" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194038333">Reid Barton (Apr 15 2020 at 14:25)</a>:</h4>
<p><code>cases</code> definitely treats it as one case split, <code>rcases</code> is rarely used with this syntax (I found a couple uses by Sebastien)</p>

<a name="194038351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194038351" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194038351">Johan Commelin (Apr 15 2020 at 14:25)</a>:</h4>
<p>Anyway, we can make a choice in that corner case, and fix the breakage. It will be a lot less then the 1000 results from Reid's grep.</p>

<a name="194038471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194038471" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194038471">Reid Barton (Apr 15 2020 at 14:26)</a>:</h4>
<p>There's ~125 uses of <code>cases _ with a</code> for single-letter variables <code>a</code></p>

<a name="194038704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194038704" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194038704">Mario Carneiro (Apr 15 2020 at 14:27)</a>:</h4>
<p>What if we remove <code>rcases</code> and just use <code>obtain</code>/<code>have</code>?</p>

<a name="194038801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194038801" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194038801">Reid Barton (Apr 15 2020 at 14:28)</a>:</h4>
<p>there's also <code>rcases with a | b</code> to consider so determining which case you're in is not quite as simple as described above</p>

<a name="194038841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194038841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194038841">Johan Commelin (Apr 15 2020 at 14:28)</a>:</h4>
<p>Hmmm, good point</p>

<a name="194038919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194038919" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194038919">Mario Carneiro (Apr 15 2020 at 14:28)</a>:</h4>
<p><code>cases</code> still needs to exist for the non-<code>with</code> version, and it can also be used as the lower level single split version</p>

<a name="194039144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194039144" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194039144">Mario Carneiro (Apr 15 2020 at 14:30)</a>:</h4>
<p>I wonder if there are cases where the <code>rcases</code> order is more readable. I know I have written some mile long <code>rcases</code> patterns</p>

<a name="194039204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194039204" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194039204">Reid Barton (Apr 15 2020 at 14:30)</a>:</h4>
<p>I like this but actually removing <code>rcases</code> would have the largest maintenance burden so far. I suppose we could just deprecate it (in which case what has changed really?)</p>

<a name="194039292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194039292" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194039292">Mario Carneiro (Apr 15 2020 at 14:31)</a>:</h4>
<p>It has a weird name so deprecating it shouldn't be a problem</p>

<a name="194039301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194039301" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194039301">Andrew Ashworth (Apr 15 2020 at 14:31)</a>:</h4>
<p>I imagine when Lean 4 comes around and all of mathlib is rewritten, it being deprecated means you'll get the transition for free</p>

<a name="194039381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194039381" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194039381">Reid Barton (Apr 15 2020 at 14:32)</a>:</h4>
<p>Is it possible to do something like <code>open tactic.interactive.core</code> to cause <code>foo</code> in interactive mode to be understood as <code>tactic.interactive.core.foo</code>?</p>

<a name="194039440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194039440" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194039440">Mario Carneiro (Apr 15 2020 at 14:32)</a>:</h4>
<p>no, the only thing that affects this lookup is <code>begin [foo] end</code></p>

<a name="194039523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194039523" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194039523">Reid Barton (Apr 15 2020 at 14:33)</a>:</h4>
<p>hmm. Presumably we'd need <code>have</code> for a while before <code>rcases</code> is available (for example, in the core library)</p>

<a name="194039552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194039552" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194039552">Reid Barton (Apr 15 2020 at 14:33)</a>:</h4>
<p>I was hoping we could play with the namespaces in the core library</p>

<a name="194039565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194039565" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194039565">Mario Carneiro (Apr 15 2020 at 14:33)</a>:</h4>
<p>I was planning to move <code>rcases</code> into the core library for this</p>

<a name="194039575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194039575" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194039575">Reid Barton (Apr 15 2020 at 14:33)</a>:</h4>
<p>rather than renaming all <code>have</code> to <code>have_</code> or whatever</p>

<a name="194039607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194039607" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194039607">Reid Barton (Apr 15 2020 at 14:34)</a>:</h4>
<p>ahh, hmm</p>

<a name="194039645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194039645" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194039645">Mario Carneiro (Apr 15 2020 at 14:34)</a>:</h4>
<p>because it involves replacing <code>have</code></p>

<a name="194039766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194039766" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194039766">Mario Carneiro (Apr 15 2020 at 14:35)</a>:</h4>
<p>I wonder if kenny will start a "have is slow" thread after this change though</p>

<a name="194039894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194039894" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194039894">Patrick Massot (Apr 15 2020 at 14:36)</a>:</h4>
<p>I was also worried about that. Those are very core tactics, and maybe slowing them down is a bad idea.</p>

<a name="194039902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194039902" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194039902">Mario Carneiro (Apr 15 2020 at 14:36)</a>:</h4>
<p>we definitely need to make sure that <code>have x := foo</code> and such are fast-pathed</p>

<a name="194039932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194039932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194039932">Reid Barton (Apr 15 2020 at 14:36)</a>:</h4>
<p>so is the summary:</p>
<ul>
<li>Leave <code>cases</code> alone</li>
<li>Move <code>rcases</code> into core</li>
<li>Deprecate <code>rcases</code> but incorporate its functionality into <code>have</code> (effectively replacing <code>obtain</code>) and <code>suffices</code></li>
</ul>

<a name="194040258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194040258" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194040258">Mario Carneiro (Apr 15 2020 at 14:38)</a>:</h4>
<p>Currently, <code>obtain h,</code> fails</p>

<a name="194044111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194044111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194044111">Johan Commelin (Apr 15 2020 at 15:02)</a>:</h4>
<p>Are these remarks by Keeley relevant: <a href="https://github.com/leanprover-community/mathlib/pull/2300#discussion_r408577486" title="https://github.com/leanprover-community/mathlib/pull/2300#discussion_r408577486">https://github.com/leanprover-community/mathlib/pull/2300#discussion_r408577486</a> ?</p>

<a name="194044262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194044262" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194044262">Johan Commelin (Apr 15 2020 at 15:03)</a>:</h4>
<p>It sounds like we can transparently repurpose all <code>begin ... end</code> block to be <code>begin [foo] ... end</code></p>

<a name="194044472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194044472" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194044472">Reid Barton (Apr 15 2020 at 15:04)</a>:</h4>
<p>Well, it's no longer relevant if the plan is to move <code>have</code> into core</p>

<a name="194044775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194044775" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194044775">Patrick Massot (Apr 15 2020 at 15:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/destructuring.20.60suffices.60/near/194044111" title="#narrow/stream/113488-general/topic/destructuring.20.60suffices.60/near/194044111">said</a>:</p>
<blockquote>
<p>Are these remarks by Keeley relevant: <a href="https://github.com/leanprover-community/mathlib/pull/2300#discussion_r408577486" title="https://github.com/leanprover-community/mathlib/pull/2300#discussion_r408577486">https://github.com/leanprover-community/mathlib/pull/2300#discussion_r408577486</a> ?</p>
</blockquote>
<p>Oh, <span class="user-mention" data-user-id="110111">@Keeley Hoek</span> is back! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>

<a name="194045189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194045189" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194045189">Keeley Hoek (Apr 15 2020 at 15:09)</a>:</h4>
<p>But yes, to be clear, you could already do the <code>[foo]</code> thing by <code>local instance</code>-ing a particular <code>interactive.executor</code></p>

<a name="194045426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194045426" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194045426">Keeley Hoek (Apr 15 2020 at 15:11)</a>:</h4>
<p>(Maybe with a command or something to add sugar to make it look nicer)</p>

<a name="194045505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/destructuring%20%60suffices%60/near/194045505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/27500destructuringsuffices.html#194045505">Keeley Hoek (Apr 15 2020 at 15:11)</a>:</h4>
<p>(And as a result the namespace under which the interactive tactics are resolved is changed---I think, at any rate it should do this)</p>


{% endraw %}

{% include archive_update.html %}