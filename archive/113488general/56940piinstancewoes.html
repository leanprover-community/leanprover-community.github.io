---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/56940piinstancewoes.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html">pi_instance woes</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="128076746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076746" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076746">Kevin Buzzard (Jun 14 2018 at 17:47)</a>:</h4>
<p>A product of topological groups is a topological group.</p>

<a name="128076751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076751" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076751">Kevin Buzzard (Jun 14 2018 at 17:47)</a>:</h4>
<p>That doesn't sound too hard!</p>

<a name="128076814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076814" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076814">Kevin Buzzard (Jun 14 2018 at 17:48)</a>:</h4>
<p>Attempt 1:</p>

<a name="128076840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076840" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076840">Kevin Buzzard (Jun 14 2018 at 17:48)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">topology</span><span class="bp">.</span><span class="n">topological_structures</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="kt">Type</span><span class="o">)</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">topological_group</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span> <span class="o">:</span> <span class="bp">...</span>
</pre></div>

<a name="128076846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076846" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076846">Kevin Buzzard (Jun 14 2018 at 17:49)</a>:</h4>
<p>unknown identifier: topological_group!</p>

<a name="128076852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076852" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076852">Kevin Buzzard (Jun 14 2018 at 17:49)</a>:</h4>
<p>We have topological monoids, topological rings...</p>

<a name="128076856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076856" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076856">Kevin Buzzard (Jun 14 2018 at 17:49)</a>:</h4>
<p>but no topological groups :-)</p>

<a name="128076863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076863" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076863">Kevin Buzzard (Jun 14 2018 at 17:49)</a>:</h4>
<p>After some digging, I find that we have <code>topological_add_group</code></p>

<a name="128076866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076866" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076866">Kevin Buzzard (Jun 14 2018 at 17:49)</a>:</h4>
<p>and given that we also have the insane convention that addition isn't commutative</p>

<a name="128076869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076869" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076869">Kevin Buzzard (Jun 14 2018 at 17:49)</a>:</h4>
<p>this will do</p>

<a name="128076883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076883" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076883">Kevin Buzzard (Jun 14 2018 at 17:49)</a>:</h4>
<p>Attempt 2:</p>

<a name="128076925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076925" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076925">Kevin Buzzard (Jun 14 2018 at 17:50)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">topology</span><span class="bp">.</span><span class="n">topological_structures</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="kt">Type</span><span class="o">)</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">topological_add_group</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span> <span class="o">:</span> <span class="bp">...</span>
</pre></div>

<a name="128076937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076937" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076937">Kevin Buzzard (Jun 14 2018 at 17:50)</a>:</h4>
<div class="codehilite"><pre><span></span>failed to synthesize type class instance for
γ : Type,
F : γ → Type,
i : γ
⊢ add_group (F i)
</pre></div>

<a name="128076940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076940" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076940">Kevin Buzzard (Jun 14 2018 at 17:50)</a>:</h4>
<p>(and topological_space too)</p>

<a name="128076941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076941" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076941">Kevin Buzzard (Jun 14 2018 at 17:50)</a>:</h4>
<p><em>sigh</em></p>

<a name="128076965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076965">Kevin Buzzard (Jun 14 2018 at 17:51)</a>:</h4>
<p>Attempt 3:</p>

<a name="128076968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076968" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076968">Kevin Buzzard (Jun 14 2018 at 17:51)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">topology</span><span class="bp">.</span><span class="n">topological_structures</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="kt">Type</span><span class="o">)</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">add_group</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">topological_add_group</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span> <span class="o">:</span>
<span class="n">topological_add_group</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">i</span><span class="o">,</span> <span class="n">F</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="128076979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076979" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076979">Kevin Buzzard (Jun 14 2018 at 17:51)</a>:</h4>
<div class="codehilite"><pre><span></span>failed to synthesize type class instance for
γ : Type,
F : γ → Type,
_inst_1 : Π (i : γ), topological_space (F i),
_inst_2 : Π (i : γ), add_group (F i),
_inst_3 : ∀ (i : γ), topological_add_group (F i)
⊢ add_group (Π (i : γ), F i)
</pre></div>

<a name="128076981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076981" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076981">Kevin Buzzard (Jun 14 2018 at 17:51)</a>:</h4>
<p>gaargh</p>

<a name="128076994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076994" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076994">Kevin Buzzard (Jun 14 2018 at 17:51)</a>:</h4>
<p>Oh but this is done in pi_instances, right?</p>

<a name="128076996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128076996" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128076996">Kevin Buzzard (Jun 14 2018 at 17:51)</a>:</h4>
<p>Attempt 4</p>

<a name="128077047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128077047" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128077047">Kevin Buzzard (Jun 14 2018 at 17:52)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">topology</span><span class="bp">.</span><span class="n">topological_structures</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">pi_instances</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="kt">Type</span><span class="o">)</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">add_group</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">topological_add_group</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span> <span class="o">:</span>
<span class="n">topological_add_group</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">i</span><span class="o">,</span> <span class="n">F</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{}</span>
</pre></div>

<a name="128077058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128077058" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128077058">Kevin Buzzard (Jun 14 2018 at 17:52)</a>:</h4>
<div class="codehilite"><pre><span></span>maximum class-instance resolution depth has been reached (the limit can be increased by setting option &#39;class.instance_max_depth&#39;) (the class-instance resolution trace can be visualized by setting option &#39;trace.class_instances&#39;)
</pre></div>

<a name="128077062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128077062" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128077062">Kevin Buzzard (Jun 14 2018 at 17:52)</a>:</h4>
<p><em>bangs head on table</em></p>

<a name="128077199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128077199" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128077199">Kevin Buzzard (Jun 14 2018 at 17:55)</a>:</h4>
<p>Here's how far I have got:</p>

<a name="128077205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128077205" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128077205">Kevin Buzzard (Jun 14 2018 at 17:55)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">topology</span><span class="bp">.</span><span class="n">topological_structures</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">pi_instances</span>

<span class="kn">set_option</span> <span class="n">trace</span><span class="bp">.</span><span class="n">class_instances</span> <span class="n">true</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="kt">Type</span><span class="o">)</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">add_group</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">topological_add_group</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span> <span class="o">:</span>
<span class="n">topological_add_group</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">i</span><span class="o">,</span> <span class="n">F</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span>
<span class="n">continuous_neg</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="o">}</span>
</pre></div>

<a name="128077213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128077213" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128077213">Kevin Buzzard (Jun 14 2018 at 17:55)</a>:</h4>
<p>and the trace looks like this:</p>

<a name="128077316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128077316" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128077316">Kevin Buzzard (Jun 14 2018 at 17:57)</a>:</h4>
<p><a href="https://gist.github.com/kbuzzard/762adae68d4cbe240f4098968b14fe2e" target="_blank" title="https://gist.github.com/kbuzzard/762adae68d4cbe240f4098968b14fe2e">https://gist.github.com/kbuzzard/762adae68d4cbe240f4098968b14fe2e</a></p>

<a name="128078022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078022">Kevin Buzzard (Jun 14 2018 at 18:08)</a>:</h4>
<p>Oh!</p>

<a name="128078031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078031">Kevin Buzzard (Jun 14 2018 at 18:09)</a>:</h4>
<p>That trace is just tracing along not looking like anything too serious is happening in terms of loops</p>

<a name="128078038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078038" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078038">Kevin Buzzard (Jun 14 2018 at 18:09)</a>:</h4>
<p>and then right at the end it randomly explodes</p>

<a name="128078061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078061" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078061">Kevin Buzzard (Jun 14 2018 at 18:09)</a>:</h4>
<div class="codehilite"><pre><span></span>[class_instances] (4) ?x_28 : ring ?x_27 := @pi.ring ?x_30 ?x_31 ?x_32
[class_instances] (5) ?x_32 i : ring (?x_31 i) := @pi.ring (?x_33 i) (?x_34 i) (?x_35 i)
[class_instances] (6) ?x_35 i i_1 : ring (?x_34 i i_1) := @pi.ring (?x_36 i i_1) (?x_37 i i_1) (?x_38 i i_1)
[class_instances] (7) ?x_38 i i_1 i_2 : ring (?x_37 i i_1 i_2) := @pi.ring (?x_39 i i_1 i_2) (?x_40 i i_1 i_2) (?x_41 i i_1 i_2)
</pre></div>

<a name="128078080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078080" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078080">Kevin Buzzard (Jun 14 2018 at 18:10)</a>:</h4>
<p>and it just keeps getting bigger and bigger</p>

<a name="128078153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078153" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078153">Simon Hudon (Jun 14 2018 at 18:11)</a>:</h4>
<p>What instance are you expecting will resolve this?</p>

<a name="128078207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078207" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078207">Kevin Buzzard (Jun 14 2018 at 18:12)</a>:</h4>
<p>you are that instance</p>

<a name="128078218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078218" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078218">Kevin Buzzard (Jun 14 2018 at 18:12)</a>:</h4>
<p>my question certainly seems to have nothing to do with rings</p>

<a name="128078250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078250" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078250">Simon Hudon (Jun 14 2018 at 18:13)</a>:</h4>
<p><code>apply_instance</code> doesn't have my phone number ;-)</p>

<a name="128078253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078253" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078253">Kevin Buzzard (Jun 14 2018 at 18:13)</a>:</h4>
<p>I want to prove that the product of top groups is a top group</p>

<a name="128078256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078256" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078256">Kevin Buzzard (Jun 14 2018 at 18:13)</a>:</h4>
<p>The instance isn't there yet</p>

<a name="128078261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078261" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078261">Kevin Buzzard (Jun 14 2018 at 18:14)</a>:</h4>
<p>but I haven't even got to defining the instance</p>

<a name="128078303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078303" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078303">Kevin Buzzard (Jun 14 2018 at 18:14)</a>:</h4>
<p>because of some random type class explosion</p>

<a name="128078305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078305" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078305">Simon Hudon (Jun 14 2018 at 18:14)</a>:</h4>
<p>You can try <code>by pi_instance</code></p>

<a name="128078339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078339" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078339">Simon Hudon (Jun 14 2018 at 18:15)</a>:</h4>
<p>You will need more arguments, we'll see what errors we get</p>

<a name="128078402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078402" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078402">Kevin Buzzard (Jun 14 2018 at 18:16)</a>:</h4>
<p>I'm on it</p>

<a name="128078425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078425" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078425">Simon Hudon (Jun 14 2018 at 18:17)</a>:</h4>
<p>If you use my <code>refine_struct</code> branch, that should be all you need.</p>

<a name="128078439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078439" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078439">Kevin Buzzard (Jun 14 2018 at 18:17)</a>:</h4>
<p>ooh</p>

<a name="128078442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078442" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078442">Kevin Buzzard (Jun 14 2018 at 18:18)</a>:</h4>
<p>so you mean don't use algebra.pi_instances?</p>

<a name="128078486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078486" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078486">Kevin Buzzard (Jun 14 2018 at 18:18)</a>:</h4>
<p>Apparently I should prove pi.topological_add_monoid first</p>

<a name="128078495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078495" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078495">Simon Hudon (Jun 14 2018 at 18:18)</a>:</h4>
<p>No I mean you write <code>by pi_instance</code> and it figures it all out on its own without you having to give more information</p>

<a name="128078506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078506" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078506">Simon Hudon (Jun 14 2018 at 18:19)</a>:</h4>
<p>(if you use <code>refine_struct</code>)</p>

<a name="128078695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078695" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078695">Kevin Buzzard (Jun 14 2018 at 18:23)</a>:</h4>
<p>so can you give me more clues about exactly what to type, so I can "use <code>refine_struct</code>"?</p>

<a name="128078748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078748" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078748">Simon Hudon (Jun 14 2018 at 18:24)</a>:</h4>
<p>certainly</p>

<a name="128078852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078852" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078852">Simon Hudon (Jun 14 2018 at 18:26)</a>:</h4>
<p>1. delete your <code>_target</code> directory<br>
2. go in your <code>leanpkg.toml</code> file<br>
3. replace the <code>mathlib</code> entry with<br>
<code>mathlib = {git = "https://github.com/cipher1024/mathlib", rev = "e1c15f02a62a0343e5497ae380355e966be9b3e4"}</code><br>
4. in a terminal, call <code>leanpkg build</code> on your project</p>

<a name="128078880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078880" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078880">Kevin Buzzard (Jun 14 2018 at 18:27)</a>:</h4>
<p>You know what</p>

<a name="128078881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078881" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078881">Kevin Buzzard (Jun 14 2018 at 18:27)</a>:</h4>
<p>I think the problem might be</p>

<a name="128078883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078883" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078883">Kevin Buzzard (Jun 14 2018 at 18:27)</a>:</h4>
<p>that pi_instances doesn't do any topology</p>

<a name="128078887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078887" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078887">Kevin Buzzard (Jun 14 2018 at 18:28)</a>:</h4>
<p>and I rather think that putting a topological space structure on a product of types</p>

<a name="128078926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078926" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078926">Kevin Buzzard (Jun 14 2018 at 18:28)</a>:</h4>
<p>is actually something which requires an idea</p>

<a name="128078933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078933" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078933">Kevin Buzzard (Jun 14 2018 at 18:28)</a>:</h4>
<p>at least if you want to put the correct top space structure on it</p>

<a name="128078941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078941" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078941">Kevin Buzzard (Jun 14 2018 at 18:28)</a>:</h4>
<p>Aah sorry</p>

<a name="128078950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078950" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078950">Kevin Buzzard (Jun 14 2018 at 18:28)</a>:</h4>
<p>By "don't use algebra.pi_instances"</p>

<a name="128078959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078959" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078959">Kevin Buzzard (Jun 14 2018 at 18:29)</a>:</h4>
<p>I mean "don't use official mathlib's algebra.pi_instances"?</p>

<a name="128078966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078966" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078966">Kevin Buzzard (Jun 14 2018 at 18:29)</a>:</h4>
<p>OK I will switch.</p>

<a name="128078972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128078972" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128078972">Kevin Buzzard (Jun 14 2018 at 18:29)</a>:</h4>
<p>It will be interesting to see what happens!</p>

<a name="128079136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128079136" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128079136">Kevin Buzzard (Jun 14 2018 at 18:32)</a>:</h4>
<p>building</p>

<a name="128079149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128079149" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128079149">Kevin Buzzard (Jun 14 2018 at 18:33)</a>:</h4>
<p>But I don't think your pi_instances tactic is going to put a topological space structure on a product of topological spaces</p>

<a name="128079154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128079154" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128079154">Kevin Buzzard (Jun 14 2018 at 18:33)</a>:</h4>
<p>This isn't formal, like a ring structure on a product of rings</p>

<a name="128079165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128079165" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128079165">Kevin Buzzard (Jun 14 2018 at 18:33)</a>:</h4>
<p>I think this needs to be written by hand.</p>

<a name="128079374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128079374" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128079374">Simon Hudon (Jun 14 2018 at 18:38)</a>:</h4>
<p>Yes, that's right. If the instance relies on any kind of insight that is not already present in the more basic instance, my tactic won't do.</p>

<a name="128079509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128079509" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128079509">Simon Hudon (Jun 14 2018 at 18:41)</a>:</h4>
<p><code>refine_struct</code> might still be helpful, especially if many of the proofs are of the same shape</p>

<a name="128080056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080056" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080056">Kevin Buzzard (Jun 14 2018 at 18:52)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">topological_space</span> <span class="o">[</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">topological_space</span> <span class="err">$</span> <span class="n">f</span> <span class="n">i</span><span class="o">]</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">i</span> <span class="o">:</span> <span class="n">I</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">topological_space</span><span class="bp">.</span><span class="n">generate_from</span> <span class="o">{</span> <span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">i</span> <span class="o">:</span> <span class="n">I</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">u</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">i</span> <span class="o">:</span> <span class="n">I</span><span class="o">,</span> <span class="n">set</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">),</span>
<span class="n">set</span><span class="bp">.</span><span class="n">finite</span> <span class="o">{</span><span class="n">i</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">|</span> <span class="n">u</span> <span class="n">i</span> <span class="bp">≠</span> <span class="n">set</span><span class="bp">.</span><span class="n">univ</span><span class="o">}</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">g</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">i</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span><span class="o">,</span> <span class="n">U</span> <span class="n">g</span> <span class="bp">=</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">g</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">u</span> <span class="n">i</span><span class="o">}</span>
</pre></div>

<a name="128080077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080077" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080077">Kevin Buzzard (Jun 14 2018 at 18:53)</a>:</h4>
<p>But now I have this -- assuming I got it right (and I am not entirely sure that introducing both U and u was necessary) -- I wonder if I can persuade pi_instances to go further.</p>

<a name="128080143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080143" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080143">Simon Hudon (Jun 14 2018 at 18:54)</a>:</h4>
<p>Now I think there's a chance</p>

<a name="128080147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080147" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080147">Kevin Buzzard (Jun 14 2018 at 18:54)</a>:</h4>
<p>Actually this might just be hard. Now I can prove that a product of topological groups is a topological space and a group</p>

<a name="128080150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080150" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080150">Kevin Buzzard (Jun 14 2018 at 18:54)</a>:</h4>
<p>but a topological group is more than this</p>

<a name="128080163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080163" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080163">Kevin Buzzard (Jun 14 2018 at 18:55)</a>:</h4>
<p>you want the group structure maps like product and inverse to be continuous</p>

<a name="128080174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080174" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080174">Kevin Buzzard (Jun 14 2018 at 18:55)</a>:</h4>
<p>and these might be lemmas rather than stuff which is formally true</p>

<a name="128080184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080184" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080184">Reid Barton (Jun 14 2018 at 18:55)</a>:</h4>
<p>That Pi type topological space instance is already in <code>topological_space.lean</code> isn't it?</p>

<a name="128080241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080241" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080241">Reid Barton (Jun 14 2018 at 18:56)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="k">Pi</span><span class="bp">.</span><span class="n">topological_space</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">t₂</span> <span class="o">:</span> <span class="bp">Π</span><span class="n">a</span><span class="o">,</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">β</span> <span class="n">a</span><span class="o">)]</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="o">(</span><span class="bp">Π</span><span class="n">a</span><span class="o">,</span> <span class="n">β</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="err">⨆</span><span class="n">a</span><span class="o">,</span> <span class="n">induced</span> <span class="o">(</span><span class="bp">λ</span><span class="n">f</span><span class="o">,</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">t₂</span> <span class="n">a</span><span class="o">)</span>
</pre></div>

<a name="128080249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080249" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080249">Kevin Buzzard (Jun 14 2018 at 18:56)</a>:</h4>
<p>Oh did I miss it?</p>

<a name="128080258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080258" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080258">Kevin Buzzard (Jun 14 2018 at 18:57)</a>:</h4>
<p>Oh it's not in pi_instances!</p>

<a name="128080261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080261" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080261">Reid Barton (Jun 14 2018 at 18:57)</a>:</h4>
<p>But it's in the same module that defines <code>topological_space</code></p>

<a name="128080275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080275" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080275">Reid Barton (Jun 14 2018 at 18:58)</a>:</h4>
<p>Oh okay, it looks like Lean never actually claimed it was missing?</p>

<a name="128080318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080318">Kevin Buzzard (Jun 14 2018 at 18:58)</a>:</h4>
<p>No it just gave me terrifying errors</p>

<a name="128080358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080358" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080358">Kevin Buzzard (Jun 14 2018 at 18:59)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">pi_topological_monoid</span> <span class="o">(</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="kt">Type</span><span class="o">)</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">add_monoid</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">topological_add_monoid</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span> <span class="o">:</span>
<span class="n">topological_add_monoid</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">i</span><span class="o">,</span> <span class="n">F</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="128080370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080370" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080370">Kevin Buzzard (Jun 14 2018 at 18:59)</a>:</h4>
<p>I get these <code>maximum class-instance resolution depth has been reached </code> errors</p>

<a name="128080442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080442" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080442">Reid Barton (Jun 14 2018 at 19:00)</a>:</h4>
<p>I see</p>

<a name="128080848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080848" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080848">Kevin Buzzard (Jun 14 2018 at 19:09)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">pi_topological_add_monoid</span> <span class="o">(</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="kt">Type</span><span class="o">)</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">add_monoid</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">topological_add_monoid</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span> <span class="o">:</span>
<span class="n">topological_add_monoid</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">i</span><span class="o">,</span> <span class="n">F</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">pi_instance</span> <span class="o">[</span><span class="n">pi</span><span class="bp">.</span><span class="n">add_monoid</span><span class="o">,</span><span class="k">Pi</span><span class="bp">.</span><span class="n">topological_space</span><span class="o">]</span>
</pre></div>

<a name="128080900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080900" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080900">Reid Barton (Jun 14 2018 at 19:10)</a>:</h4>
<p>I don't know what is to be done about that instance resolution loop (I'm pretty sure it has been discussed here before), but as a workaround you can specify the instance you want:</p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">pi_topological_monoid</span> <span class="o">(</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="kt">Type</span><span class="o">)</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">add_group</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">topological_add_group</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span> <span class="o">:</span>
<span class="bp">@</span><span class="n">topological_add_group</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">i</span><span class="o">,</span> <span class="n">F</span> <span class="n">i</span><span class="o">)</span> <span class="bp">_</span> <span class="o">(</span><span class="n">pi</span><span class="bp">.</span><span class="n">add_group</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="128080902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080902" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080902">Kevin Buzzard (Jun 14 2018 at 19:10)</a>:</h4>
<p>my suggestion doesn't work</p>

<a name="128080925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080925" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080925">Reid Barton (Jun 14 2018 at 19:10)</a>:</h4>
<p><code>pi.add_monoid</code> doesn't actually exist, that's why I switched back to <code>add_group</code></p>

<a name="128080931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128080931" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128080931">Reid Barton (Jun 14 2018 at 19:10)</a>:</h4>
<p>Of course, you could probably add it</p>

<a name="128081015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128081015" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128081015">Kevin Buzzard (Jun 14 2018 at 19:12)</a>:</h4>
<p>If you replace your sorry with <code>{}</code> do you get the runaway typeclass?</p>

<a name="128081038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128081038" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128081038">Reid Barton (Jun 14 2018 at 19:12)</a>:</h4>
<p>Yes</p>

<a name="128081074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128081074" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128081074">Reid Barton (Jun 14 2018 at 19:13)</a>:</h4>
<p>I guess that's because it tried to look up a <code>topological_add_monoid</code> "parent" instance to extend, and then that fell into the same loop</p>

<a name="128081137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128081137" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128081137">Reid Barton (Jun 14 2018 at 19:14)</a>:</h4>
<p>If I specify both <code>continuous_add</code> and <code>continuous_neg</code> (as <code>sorry</code>) then I don't get a loop.</p>

<a name="128081299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128081299" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128081299">Kevin Buzzard (Jun 14 2018 at 19:18)</a>:</h4>
<p>you're right :-)</p>

<a name="128081300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128081300" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128081300">Kevin Buzzard (Jun 14 2018 at 19:18)</a>:</h4>
<p>I love living life on the edge</p>

<a name="128081302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128081302" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128081302">Kevin Buzzard (Jun 14 2018 at 19:18)</a>:</h4>
<p>one false move</p>

<a name="128081303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128081303" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128081303">Kevin Buzzard (Jun 14 2018 at 19:18)</a>:</h4>
<p>runaway typeclass</p>

<a name="128081317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128081317" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128081317">Reid Barton (Jun 14 2018 at 19:19)</a>:</h4>
<p>actually, that was apparently the original issue, too.</p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">pi_topological_monoid</span> <span class="o">(</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="kt">Type</span><span class="o">)</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">add_group</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">topological_add_group</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span> <span class="o">:</span>
<span class="n">topological_add_group</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">i</span><span class="o">,</span> <span class="n">F</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span>
  <span class="n">continuous_add</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">continuous_neg</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
<span class="o">}</span>
</pre></div>


<p>also works</p>

<a name="128081464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128081464" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128081464">Kenny Lau (Jun 14 2018 at 19:23)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">continuous_pi</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="bp">∀</span><span class="n">i</span><span class="o">,</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">π</span> <span class="n">i</span><span class="o">)]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="bp">Π</span><span class="n">i</span><span class="o">:</span><span class="n">ι</span><span class="o">,</span> <span class="n">π</span> <span class="n">i</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span><span class="n">i</span><span class="o">,</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span><span class="n">a</span><span class="o">,</span> <span class="n">f</span> <span class="n">a</span> <span class="n">i</span><span class="o">))</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span> <span class="o">:=</span>
<span class="n">continuous_supr_rng</span> <span class="err">$</span> <span class="k">assume</span> <span class="n">i</span><span class="o">,</span> <span class="n">continuous_induced_rng</span> <span class="err">$</span> <span class="n">h</span> <span class="n">i</span>
</pre></div>

<a name="128081466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128081466" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128081466">Kenny Lau (Jun 14 2018 at 19:23)</a>:</h4>
<p>might be useful</p>

<a name="128081723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128081723" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128081723">Reid Barton (Jun 14 2018 at 19:28)</a>:</h4>
<p>I tried writing the actual instance but the loop came back :(</p>

<a name="128081810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128081810" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128081810">Reid Barton (Jun 14 2018 at 19:30)</a>:</h4>
<p>It should just be <code>continuous_add := continuous_pi $ λ i, continuous.comp continuous_add' (continuous_apply i)</code></p>

<a name="128081827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128081827" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128081827">Reid Barton (Jun 14 2018 at 19:30)</a>:</h4>
<p>Er wait, no</p>

<a name="128081851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128081851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128081851">Reid Barton (Jun 14 2018 at 19:31)</a>:</h4>
<p>that's totally wrong</p>

<a name="128082090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128082090" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128082090">Reid Barton (Jun 14 2018 at 19:36)</a>:</h4>
<p>OK</p>

<a name="128082107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128082107" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128082107">Reid Barton (Jun 14 2018 at 19:37)</a>:</h4>
<p><code>continuous_apply</code> has a totally extraneous argument <code>α</code> which makes it unusable. It should be</p>
<div class="codehilite"><pre><span></span><span class="kn">section</span> <span class="n">pi</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">π</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kn">lemma</span> <span class="n">continuous_apply&#39;</span> <span class="o">[</span><span class="bp">∀</span><span class="n">i</span><span class="o">,</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">π</span> <span class="n">i</span><span class="o">)]</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">ι</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span><span class="n">p</span><span class="o">:</span><span class="bp">Π</span><span class="n">i</span><span class="o">,</span> <span class="n">π</span> <span class="n">i</span><span class="o">,</span> <span class="n">p</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">continuous_supr_dom</span> <span class="n">continuous_induced_dom</span>
<span class="kn">end</span> <span class="n">pi</span>
</pre></div>

<a name="128082114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128082114" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128082114">Reid Barton (Jun 14 2018 at 19:37)</a>:</h4>
<div class="codehilite"><pre><span></span>  <span class="n">continuous_add</span> <span class="o">:=</span> <span class="n">continuous_pi</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span>
    <span class="n">continuous_add</span>
      <span class="o">(</span><span class="n">continuous</span><span class="bp">.</span><span class="n">comp</span> <span class="n">continuous_fst</span> <span class="o">(</span><span class="n">continuous_apply&#39;</span> <span class="n">i</span><span class="o">))</span>
      <span class="o">(</span><span class="n">continuous</span><span class="bp">.</span><span class="n">comp</span> <span class="n">continuous_snd</span> <span class="o">(</span><span class="n">continuous_apply&#39;</span> <span class="n">i</span><span class="o">))</span>
</pre></div>

<a name="128082327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128082327" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128082327">Reid Barton (Jun 14 2018 at 19:42)</a>:</h4>
<p>Alternatively,</p>
<div class="codehilite"><pre><span></span>  <span class="n">continuous_add</span> <span class="o">:=</span> <span class="n">continuous_pi</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span>
    <span class="n">continuous</span><span class="bp">.</span><span class="n">comp</span>
      <span class="o">(</span><span class="n">continuous</span><span class="bp">.</span><span class="n">prod_mk</span>
        <span class="o">(</span><span class="n">continuous</span><span class="bp">.</span><span class="n">comp</span> <span class="n">continuous_fst</span> <span class="o">(</span><span class="n">continuous_apply&#39;</span> <span class="n">i</span><span class="o">))</span>
        <span class="o">(</span><span class="n">continuous</span><span class="bp">.</span><span class="n">comp</span> <span class="n">continuous_snd</span> <span class="o">(</span><span class="n">continuous_apply&#39;</span> <span class="n">i</span><span class="o">)))</span>
      <span class="n">continuous_add&#39;</span>
</pre></div>


<p>shows the formal structure a little better, because <code>continuous_add'</code> is the actual class method <code>topological_add_monoid.continuous_add</code></p>

<a name="128082403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128082403" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128082403">Reid Barton (Jun 14 2018 at 19:44)</a>:</h4>
<p><code>continuous.comp</code> reads from left to right. First you build a pair by (first taking the first component, and then the <code>i</code>th component of that; first taking the second component, and then the <code>i</code>th component of that), and then you add them.</p>

<a name="128082567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128082567" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128082567">Kevin Buzzard (Jun 14 2018 at 19:48)</a>:</h4>
<p><code>continuous_neg := continuous_pi (λ i, continuous.comp _ (continuous_neg continuous_id)</code></p>

<a name="128082573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128082573" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128082573">Kevin Buzzard (Jun 14 2018 at 19:49)</a>:</h4>
<p>but I need to fill in the <code>_</code></p>

<a name="128082585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128082585" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128082585">Kevin Buzzard (Jun 14 2018 at 19:49)</a>:</h4>
<p><code>continuous (λ (x : Π (i : γ), F i), x i)</code></p>

<a name="128082586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128082586" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128082586">Kevin Buzzard (Jun 14 2018 at 19:49)</a>:</h4>
<p>Projection is continuous</p>

<a name="128082588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128082588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128082588">Kevin Buzzard (Jun 14 2018 at 19:49)</a>:</h4>
<p>is what I need</p>

<a name="128082764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128082764" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128082764">Kevin Buzzard (Jun 14 2018 at 19:53)</a>:</h4>
<p>and then we're either done</p>

<a name="128082771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128082771" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128082771">Kevin Buzzard (Jun 14 2018 at 19:53)</a>:</h4>
<p>or we have a runaway instance</p>

<a name="128082791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128082791" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128082791">Kevin Buzzard (Jun 14 2018 at 19:54)</a>:</h4>
<p>The topological structure on the product is defined as the coarsest topology which makes all the projection maps continuous</p>

<a name="128083035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128083035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128083035">Kevin Buzzard (Jun 14 2018 at 19:59)</a>:</h4>
<p>aah I see this is exactly this apply'</p>

<a name="128083037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128083037" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128083037">Kevin Buzzard (Jun 14 2018 at 19:59)</a>:</h4>
<p>what is going on with apply? :-)</p>

<a name="128083126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128083126" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128083126">Kevin Buzzard (Jun 14 2018 at 20:00)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">pi_topological_group</span> <span class="o">(</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">γ</span> <span class="bp">→</span> <span class="kt">Type</span><span class="o">)</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">add_group</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span>
<span class="o">[</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">topological_add_group</span> <span class="o">(</span><span class="n">F</span> <span class="n">i</span><span class="o">)]</span> <span class="o">:</span>
<span class="bp">@</span><span class="n">topological_add_group</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">i</span><span class="o">,</span> <span class="n">F</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="k">Pi</span><span class="bp">.</span><span class="n">topological_space</span><span class="o">)</span> <span class="o">(</span><span class="n">pi</span><span class="bp">.</span><span class="n">add_group</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span>
<span class="n">continuous_add</span> <span class="o">:=</span> <span class="n">continuous_pi</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span>
    <span class="n">continuous_add</span>
      <span class="o">(</span><span class="n">continuous</span><span class="bp">.</span><span class="n">comp</span> <span class="n">continuous_fst</span> <span class="o">(</span><span class="n">continuous_apply&#39;</span> <span class="n">i</span><span class="o">))</span>
      <span class="o">(</span><span class="n">continuous</span><span class="bp">.</span><span class="n">comp</span> <span class="n">continuous_snd</span> <span class="o">(</span><span class="n">continuous_apply&#39;</span> <span class="n">i</span><span class="o">)),</span>
<span class="n">continuous_neg</span> <span class="o">:=</span> <span class="n">continuous_pi</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">continuous</span><span class="bp">.</span><span class="n">comp</span> <span class="o">(</span><span class="n">continuous_apply&#39;</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">continuous_neg</span> <span class="n">continuous_id</span><span class="o">)</span>
<span class="o">)</span>
<span class="o">}</span>
</pre></div>

<a name="128083155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128083155" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128083155">Kevin Buzzard (Jun 14 2018 at 20:01)</a>:</h4>
<p>rofl</p>

<a name="128083197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128083197" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128083197">Kevin Buzzard (Jun 14 2018 at 20:02)</a>:</h4>
<div class="codehilite"><pre><span></span>continuous_apply :
  ∀ {α : Type u_1} {ι : Type u_2} {π : ι → Type u_3} [_inst_1 : topological_space α]
  [_inst_2 : Π (i : ι), topological_space (π i)] (i : ι), continuous (λ (p : Π (i : ι), π i), p i)
</pre></div>

<a name="128083198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128083198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128083198">Kevin Buzzard (Jun 14 2018 at 20:02)</a>:</h4>
<p>I see what Reid means</p>

<a name="128083202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128083202" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128083202">Kevin Buzzard (Jun 14 2018 at 20:02)</a>:</h4>
<p>It's going to be pretty tough inferring what alpha is given that it's never mentioned :-)</p>

<a name="128106193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pi_instance%20woes/near/128106193" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56940piinstancewoes.html#128106193">Johan Commelin (Jun 15 2018 at 06:52)</a>:</h4>
<blockquote>
<p>It's going to be pretty tough inferring what alpha is given that it's never mentioned :-)</p>
</blockquote>
<p>I fixed this in my simplicial branch. But it hasn't made it into mathlib yet.</p>


{% endraw %}

{% include archive_update.html %}