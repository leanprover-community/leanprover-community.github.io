---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/97359updatingmathlibwithoutcompilingishard.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html">updating mathlib without compiling is hard</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="160483552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160483552" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160483552">Kevin Buzzard (Mar 11 2019 at 14:33)</a>:</h4>
<p>I have a project with a dependency on mathlib. I want Patrick's lovely <code>has_mem (set ℝ) (filter ℝ)</code>, which is in a recent mathlib. So I go to my project, type <code>leanpkg upgrade</code> and I find that mathlib is now back at Feb 23rd. </p>
<p>So I go into <code>_target/deps/mathlib</code>, checkout master, pull, look at the latest commit, edit my leanpkg.toml to point to this commit, then type <code>update-mathlib</code> and it says "no nightly archive found".</p>
<p>Now I don't know what to do.  I know that it will be much better when someone who can build the infrastructure builds the infrastructure but I just want to get something working quickly now, and I'm sure this should be possible with a bit of hacking around.</p>
<p>How do I painlessly figure out the most recent commit that will make <code>update-mathlib</code> work? And once I've figured it out, which of (a) manually editing my toml so that it points to this mathlib commit and (b) manually switching to the correct commit in _target/deps/mathlib do I need to do, in order to get update-mathlib to work?</p>
<p>I just want the most recent commit for which I don't have to compile mathlib.</p>

<a name="160484025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160484025" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160484025">Kevin Buzzard (Mar 11 2019 at 14:39)</a>:</h4>
<p>Oh! <code>update-mathlib</code> now works! So was I just unlucky somehow? I coincidentally pulled very quickly after a commit or something?</p>

<a name="160484101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160484101" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160484101">Chris Hughes (Mar 11 2019 at 14:39)</a>:</h4>
<p>There was a commit very recently, so that may be the case.</p>

<a name="160484428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160484428" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160484428">Patrick Massot (Mar 11 2019 at 14:43)</a>:</h4>
<p>Indeed the latest nighly is 14 minutes old The answer to the question was: go to <a href="https://github.com/leanprover-community/mathlib-nightly/releases" target="_blank" title="https://github.com/leanprover-community/mathlib-nightly/releases">https://github.com/leanprover-community/mathlib-nightly/releases</a>, get the commit hash, modify the leanpkg.toml of your project, and run upodate-mathlib</p>

<a name="160484495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160484495" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160484495">Patrick Massot (Mar 11 2019 at 14:44)</a>:</h4>
<p>Hopefully this answer will soon become unneeded</p>

<a name="160492717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160492717" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160492717">Simon Hudon (Mar 11 2019 at 16:16)</a>:</h4>
<p><code>leanpkg upgrade</code> followed by <code>update-mathlib</code> should also work.</p>

<a name="160492977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160492977" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160492977">Patrick Massot (Mar 11 2019 at 16:19)</a>:</h4>
<p>No it won't work in general</p>

<a name="160492995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160492995" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160492995">Patrick Massot (Mar 11 2019 at 16:19)</a>:</h4>
<p>unless you are very lucky</p>

<a name="160493069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160493069" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160493069">Patrick Massot (Mar 11 2019 at 16:20)</a>:</h4>
<p>This is why we need a binary release for every commit</p>

<a name="160494177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160494177" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160494177">Simon Hudon (Mar 11 2019 at 16:32)</a>:</h4>
<p>Why doesn't it work?</p>

<a name="160498741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160498741" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160498741">Johan Commelin (Mar 11 2019 at 17:19)</a>:</h4>
<p>Because <code>leanpkg upgrade</code> moves to the latest commit of <code>mathlib</code>. And that one typically doesn't have an olean-release attached to it.</p>

<a name="160499177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160499177" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160499177">Johan Commelin (Mar 11 2019 at 17:25)</a>:</h4>
<p>Ideally, <code>leanpkg upgrade</code> would update to latest mathlib, and call <code>update-mathlib</code>.</p>

<a name="160499244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160499244" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160499244">Johan Commelin (Mar 11 2019 at 17:25)</a>:</h4>
<p>Alternatively, <code>update-mathlib</code> could edit the <code>.toml</code> to point to the latest olean-release of mathlib, and do the rest of its magic.</p>

<a name="160499305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160499305" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160499305">Simon Hudon (Mar 11 2019 at 17:26)</a>:</h4>
<p>It should go to the latest commit on the <code>lean-3.4.2</code> branch which get pushed when we make releases. They should all have a proper olean archive attached</p>

<a name="160499353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160499353" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160499353">Johan Commelin (Mar 11 2019 at 17:26)</a>:</h4>
<p>Hmm... that didn't work when I last tried it.</p>

<a name="160499404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160499404" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160499404">Johan Commelin (Mar 11 2019 at 17:27)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/tree/lean-3.4.2" target="_blank" title="https://github.com/leanprover-community/mathlib/tree/lean-3.4.2">https://github.com/leanprover-community/mathlib/tree/lean-3.4.2</a></p>

<a name="160499409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160499409" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160499409">Johan Commelin (Mar 11 2019 at 17:27)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> <span aria-label="up" class="emoji emoji-2b06" role="img" title="up">:up:</span></p>

<a name="160499530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160499530" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160499530">Simon Hudon (Mar 11 2019 at 17:28)</a>:</h4>
<p>That's odd. I'll have a look</p>

<a name="160518079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160518079" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160518079">Simon Hudon (Mar 11 2019 at 21:08)</a>:</h4>
<p>I think there was probably a non-monotonic rebase about 11 days ago and now Travis fails every time it tries to push to <code>lean-3.4.2</code>. I pushed it manually.</p>

<a name="160518098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160518098" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160518098">Simon Hudon (Mar 11 2019 at 21:08)</a>:</h4>
<p>It should now work if you do <code>leanpkg upgrade</code> and then <code>update-mathlib</code></p>

<a name="160518417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160518417" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160518417">Patrick Massot (Mar 11 2019 at 21:13)</a>:</h4>
<p>I can confirm it works in the perfectoid project (bringing it only 2 commits behind mathlib master)</p>

<a name="160518553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160518553" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160518553">Simon Hudon (Mar 11 2019 at 21:15)</a>:</h4>
<p><span aria-label="fireworks" class="emoji emoji-1f386" role="img" title="fireworks">:fireworks:</span></p>

<a name="160761940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160761940" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160761940">Keeley Hoek (Mar 14 2019 at 08:57)</a>:</h4>
<p>Also if you want to track master you can do <code>branch = 'master'</code> in <code>leanpkg.toml</code></p>

<a name="160762144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762144" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762144">Kevin Buzzard (Mar 14 2019 at 09:00)</a>:</h4>
<p>I don't have any <code>branch = </code> anything in the toml of the perfectoid project.</p>

<a name="160762160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762160">Kevin Buzzard (Mar 14 2019 at 09:01)</a>:</h4>
<p>I am not sure I want to track mathlib master, I want to track "the last release with some olean files" :-)</p>

<a name="160762167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762167" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762167">Patrick Massot (Mar 14 2019 at 09:01)</a>:</h4>
<p>That's what we already do</p>

<a name="160762182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762182" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762182">Kevin Buzzard (Mar 14 2019 at 09:01)</a>:</h4>
<p>hopefully</p>

<a name="160762191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762191" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762191">Patrick Massot (Mar 14 2019 at 09:01)</a>:</h4>
<p>we don't need to change anything here (except we need people to stop pushing outdated tags)</p>

<a name="160762275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762275" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762275">Kevin Buzzard (Mar 14 2019 at 09:03)</a>:</h4>
<p>Probably the next time I push anything I will push an outdated tag</p>

<a name="160762288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762288" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762288">Kevin Buzzard (Mar 14 2019 at 09:03)</a>:</h4>
<p>I have a gazillion copies of community mathlib across various machines</p>

<a name="160762366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762366" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762366">Patrick Massot (Mar 14 2019 at 09:04)</a>:</h4>
<p>running <code>git tag -d 3.4.2</code> in each of them would help</p>

<a name="160762374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762374" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762374">Kevin Buzzard (Mar 14 2019 at 09:04)</a>:</h4>
<p>I typed <code>git branch -d lean-3.4.2</code> and Johan said it wasn't enough</p>

<a name="160762382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762382" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762382">Kevin Buzzard (Mar 14 2019 at 09:04)</a>:</h4>
<p>but then the branch did not show up with <code>git branch</code></p>

<a name="160762383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762383" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762383">Patrick Massot (Mar 14 2019 at 09:04)</a>:</h4>
<p>You need new glasses</p>

<a name="160762392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762392" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762392">Kevin Buzzard (Mar 14 2019 at 09:04)</a>:</h4>
<p>I typed <code>git tag -d 3.4.2</code> and it looked like something succeeded</p>

<a name="160762398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762398">Kevin Buzzard (Mar 14 2019 at 09:05)</a>:</h4>
<p>however Simon said there were a tonne of other tags which needed deleting</p>

<a name="160762408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762408" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762408">Patrick Massot (Mar 14 2019 at 09:05)</a>:</h4>
<p>This is the correct one</p>

<a name="160762409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762409" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762409">Kevin Buzzard (Mar 14 2019 at 09:05)</a>:</h4>
<p>and I can't see any of them in my branches</p>

<a name="160762416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762416" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762416">Kevin Buzzard (Mar 14 2019 at 09:05)</a>:</h4>
<p>Oh so I don't need to worry about the other tags he mentioned?</p>

<a name="160762419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762419" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762419">Patrick Massot (Mar 14 2019 at 09:05)</a>:</h4>
<p>what does <code>git tag</code> says?</p>

<a name="160762433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762433" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762433">Kevin Buzzard (Mar 14 2019 at 09:05)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="err">$</span> <span class="n">git</span> <span class="n">tag</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190207</span><span class="bp">-</span><span class="mi">231626</span><span class="bp">-</span><span class="mi">1</span><span class="n">b7baba</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190208</span><span class="bp">-</span><span class="mi">212100</span><span class="bp">-</span><span class="mi">4227</span><span class="n">f5c</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190208</span><span class="bp">-</span><span class="mi">220606</span><span class="bp">-</span><span class="mi">64065</span><span class="n">f4</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190208</span><span class="bp">-</span><span class="mi">221206</span><span class="bp">-</span><span class="mi">814</span><span class="n">cb03</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190208</span><span class="bp">-</span><span class="mi">222309</span><span class="bp">-</span><span class="mi">650237</span><span class="n">b</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190208</span><span class="bp">-</span><span class="mi">235057</span><span class="bp">-</span><span class="mi">8</span><span class="n">b51017</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190209</span><span class="bp">-</span><span class="mi">020632</span><span class="bp">-</span><span class="mi">22</span><span class="n">c7179</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190209</span><span class="bp">-</span><span class="mi">162751</span><span class="bp">-</span><span class="mi">484</span><span class="n">d864</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190209</span><span class="bp">-</span><span class="mi">163013</span><span class="bp">-</span><span class="mi">088</span><span class="n">f753</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190210</span><span class="bp">-</span><span class="mi">113848</span><span class="bp">-</span><span class="n">ed4c536</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190210</span><span class="bp">-</span><span class="mi">131553</span><span class="bp">-</span><span class="n">d6f84da</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190210</span><span class="bp">-</span><span class="mi">152455</span><span class="bp">-</span><span class="n">c25122b</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190210</span><span class="bp">-</span><span class="mi">171431</span><span class="bp">-</span><span class="mi">9</span><span class="n">b28db0</span>
<span class="n">untagged</span><span class="bp">-</span><span class="mi">9164526</span><span class="n">c5fa59e86918d</span>
</pre></div>

<a name="160762493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762493" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762493">Kevin Buzzard (Mar 14 2019 at 09:06)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="err">$</span> <span class="n">git</span> <span class="n">tag</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190208</span><span class="bp">-</span><span class="mi">212100</span><span class="bp">-</span><span class="mi">4227</span><span class="n">f5c</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190208</span><span class="bp">-</span><span class="mi">220606</span><span class="bp">-</span><span class="mi">64065</span><span class="n">f4</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190208</span><span class="bp">-</span><span class="mi">221206</span><span class="bp">-</span><span class="mi">814</span><span class="n">cb03</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190208</span><span class="bp">-</span><span class="mi">222309</span><span class="bp">-</span><span class="mi">650237</span><span class="n">b</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190208</span><span class="bp">-</span><span class="mi">235057</span><span class="bp">-</span><span class="mi">8</span><span class="n">b51017</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190209</span><span class="bp">-</span><span class="mi">020632</span><span class="bp">-</span><span class="mi">22</span><span class="n">c7179</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190209</span><span class="bp">-</span><span class="mi">162751</span><span class="bp">-</span><span class="mi">484</span><span class="n">d864</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190209</span><span class="bp">-</span><span class="mi">163013</span><span class="bp">-</span><span class="mi">088</span><span class="n">f753</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190210</span><span class="bp">-</span><span class="mi">113848</span><span class="bp">-</span><span class="n">ed4c536</span>
<span class="n">bin</span><span class="bp">-</span><span class="mi">20190210</span><span class="bp">-</span><span class="mi">131553</span><span class="bp">-</span><span class="n">d6f84da</span>
<span class="n">lean</span><span class="bp">-</span><span class="mi">3</span><span class="bp">.</span><span class="mi">4</span><span class="bp">.</span><span class="mi">2</span>
<span class="n">untagged</span><span class="bp">-</span><span class="mi">9164526</span><span class="n">c5fa59e86918d</span>
</pre></div>


<p>in another one</p>

<a name="160762507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762507" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762507">Kevin Buzzard (Mar 14 2019 at 09:06)</a>:</h4>
<p>I can go and find my laptop and give you a couple more</p>

<a name="160762510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762510" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762510">Kevin Buzzard (Mar 14 2019 at 09:06)</a>:</h4>
<p>and then there's my work machine</p>

<a name="160762514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762514" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762514">Kevin Buzzard (Mar 14 2019 at 09:06)</a>:</h4>
<p>they're everywhere</p>

<a name="160762519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762519" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762519">Patrick Massot (Mar 14 2019 at 09:06)</a>:</h4>
<p>I think you can safely <code>git tag | xargs git tag -d</code></p>

<a name="160762532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762532" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762532">Patrick Massot (Mar 14 2019 at 09:07)</a>:</h4>
<p>You don't need any of these tags, they can only hurt</p>

<a name="160762561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762561" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762561">Kevin Buzzard (Mar 14 2019 at 09:07)</a>:</h4>
<p>can there ever be a space in a tag?</p>

<a name="160762565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762565" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762565">Patrick Massot (Mar 14 2019 at 09:07)</a>:</h4>
<p>no</p>

<a name="160762630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160762630" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160762630">Kevin Buzzard (Mar 14 2019 at 09:08)</a>:</h4>
<p>Well this is a good step forward: I am tag-free on my home desktop</p>

<a name="160916245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160916245" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160916245">Kevin Buzzard (Mar 15 2019 at 21:46)</a>:</h4>
<p>hey wait a second:</p>
<div class="codehilite"><pre><span></span>buzzard@bob:~/Lean/lean-projects/mathlib-community-master$ git tag
bin-20190208-212100-4227f5c
bin-20190208-220606-64065f4
bin-20190208-221206-814cb03
bin-20190208-222309-650237b
bin-20190208-235057-8b51017
bin-20190209-020632-22c7179
bin-20190209-162751-484d864
bin-20190209-163013-088f753
bin-20190210-113848-ed4c536
bin-20190210-131553-d6f84da
bin-20190210-152455-c25122b
bin-20190210-171431-9b28db0
untagged-9164526c5fa59e86918d
buzzard@bob:~/Lean/lean-projects/mathlib-community-master$ git tag | xargs git tag -d
Deleted tag &#39;bin-20190208-212100-4227f5c&#39; (was 4227f5c)
Deleted tag &#39;bin-20190208-220606-64065f4&#39; (was 64065f4)
Deleted tag &#39;bin-20190208-221206-814cb03&#39; (was 814cb03)
Deleted tag &#39;bin-20190208-222309-650237b&#39; (was 650237b)
Deleted tag &#39;bin-20190208-235057-8b51017&#39; (was 8b51017)
Deleted tag &#39;bin-20190209-020632-22c7179&#39; (was 22c7179)
Deleted tag &#39;bin-20190209-162751-484d864&#39; (was 484d864)
Deleted tag &#39;bin-20190209-163013-088f753&#39; (was 088f753)
Deleted tag &#39;bin-20190210-113848-ed4c536&#39; (was ed4c536)
Deleted tag &#39;bin-20190210-131553-d6f84da&#39; (was d6f84da)
Deleted tag &#39;bin-20190210-152455-c25122b&#39; (was c25122b)
Deleted tag &#39;bin-20190210-171431-9b28db0&#39; (was 9b28db0)
Deleted tag &#39;untagged-9164526c5fa59e86918d&#39; (was e01e4d8)
buzzard@bob:~/Lean/lean-projects/mathlib-community-master$ git tag
buzzard@bob:~/Lean/lean-projects/mathlib-community-master$ git fetch
From github.com:leanprover-community/mathlib
 * [new tag]         bin-20190208-212100-4227f5c -&gt; bin-20190208-212100-4227f5c
 * [new tag]         bin-20190208-220606-64065f4 -&gt; bin-20190208-220606-64065f4
 * [new tag]         bin-20190208-221206-814cb03 -&gt; bin-20190208-221206-814cb03
 * [new tag]         bin-20190208-222309-650237b -&gt; bin-20190208-222309-650237b
 * [new tag]         bin-20190208-235057-8b51017 -&gt; bin-20190208-235057-8b51017
 * [new tag]         bin-20190209-020632-22c7179 -&gt; bin-20190209-020632-22c7179
 * [new tag]         bin-20190209-162751-484d864 -&gt; bin-20190209-162751-484d864
 * [new tag]         bin-20190209-163013-088f753 -&gt; bin-20190209-163013-088f753
 * [new tag]         bin-20190210-113848-ed4c536 -&gt; bin-20190210-113848-ed4c536
 * [new tag]         bin-20190210-131553-d6f84da -&gt; bin-20190210-131553-d6f84da
 * [new tag]         bin-20190210-152455-c25122b -&gt; bin-20190210-152455-c25122b
 * [new tag]         bin-20190210-171431-9b28db0 -&gt; bin-20190210-171431-9b28db0
 * [new tag]         untagged-9164526c5fa59e86918d -&gt; untagged-9164526c5fa59e86918d
buzzard@bob:~/Lean/lean-projects/mathlib-community-master$ git tag
bin-20190208-212100-4227f5c
bin-20190208-220606-64065f4
bin-20190208-221206-814cb03
bin-20190208-222309-650237b
bin-20190208-235057-8b51017
bin-20190209-020632-22c7179
bin-20190209-162751-484d864
bin-20190209-163013-088f753
bin-20190210-113848-ed4c536
bin-20190210-131553-d6f84da
bin-20190210-152455-c25122b
bin-20190210-171431-9b28db0
untagged-9164526c5fa59e86918d
buzzard@bob:~/Lean/lean-projects/mathlib-community-master$
</pre></div>

<a name="160916366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160916366" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160916366">Kevin Buzzard (Mar 15 2019 at 21:48)</a>:</h4>
<p>the tags have returned!</p>
<blockquote>
<p>we don't need to change anything here (except we need people to stop pushing outdated tags)</p>
</blockquote>
<p>Am I about to push an outdated tag?</p>

<a name="160916422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160916422" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160916422">Chris Hughes (Mar 15 2019 at 21:49)</a>:</h4>
<p>What is a tag?</p>

<a name="160917198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160917198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160917198">Kevin Buzzard (Mar 15 2019 at 22:03)</a>:</h4>
<p>They're the things which completely screw you up when you do <code>leanpkg upgrade</code> and make you downgrade instead.</p>

<a name="160917289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160917289" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160917289">Kevin Buzzard (Mar 15 2019 at 22:04)</a>:</h4>
<p>If your local copy of mathlib has a <code>lean-3.4.2</code> tag then the next time you push it will be back, and then any time I type leanpkg upgrade ever I will end up at the commit which that tag points to.</p>

<a name="160919088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160919088" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160919088">Chris Hughes (Mar 15 2019 at 22:34)</a>:</h4>
<p>Do I need to worry about this?</p>

<a name="160919558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160919558" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160919558">Kevin Buzzard (Mar 15 2019 at 22:43)</a>:</h4>
<p>I <em>think</em> that the fact that one of my tags was <code>lean-3.4.2</code> was somehow a bad thing.</p>

<a name="160919574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160919574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160919574">Kevin Buzzard (Mar 15 2019 at 22:43)</a>:</h4>
<p>This tag was created a while ago, and then when we pull we get it too, and then they remove it, but then when we push we put it back, and it messes things up.</p>

<a name="160919629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160919629" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160919629">Kevin Buzzard (Mar 15 2019 at 22:44)</a>:</h4>
<p>if you have a command line handy you could try <code>git tag -d lean-3.4.2</code></p>

<a name="160919637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160919637" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160919637">Kevin Buzzard (Mar 15 2019 at 22:44)</a>:</h4>
<p>or you could type <code>git tag</code> first to see if you have one</p>

<a name="160919640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20mathlib%20without%20compiling%20is%20hard/near/160919640" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/97359updatingmathlibwithoutcompilingishard.html#160919640">Kevin Buzzard (Mar 15 2019 at 22:44)</a>:</h4>
<p>somewhere in your mathlib repo</p>


{% endraw %}
