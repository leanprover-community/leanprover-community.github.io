---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/47376freegroup.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html">free group</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="124469539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124469539" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124469539">Kenny Lau (Mar 31 2018 at 23:20)</a>:</h4>
<p>I have constructed the free group of a set here: <a href="https://github.com/kckennylau/Lean/blob/master/free_group.lean" target="_blank" title="https://github.com/kckennylau/Lean/blob/master/free_group.lean">https://github.com/kckennylau/Lean/blob/master/free_group.lean</a></p>

<a name="124469545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124469545" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124469545">Kenny Lau (Mar 31 2018 at 23:21)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> what do you think of it?</p>

<a name="124480775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124480775" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124480775">Kenny Lau (Apr 01 2018 at 07:17)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I'm onto something. My construction of the <em>real</em> free group is almost done.</p>

<a name="124481322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124481322" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124481322">Kenny Lau (Apr 01 2018 at 07:41)</a>:</h4>
<p><a href="https://github.com/kckennylau/Lean/blob/master/free_group.lean" target="_blank" title="https://github.com/kckennylau/Lean/blob/master/free_group.lean">https://github.com/kckennylau/Lean/blob/master/free_group.lean</a></p>

<a name="124481323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124481323" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124481323">Kenny Lau (Apr 01 2018 at 07:41)</a>:</h4>
<p><a href="https://github.com/leanprover/mathlib/pull/89" target="_blank" title="https://github.com/leanprover/mathlib/pull/89">https://github.com/leanprover/mathlib/pull/89</a></p>

<a name="124493682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124493682" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124493682">Kevin Buzzard (Apr 01 2018 at 16:19)</a>:</h4>
<p>Why not prove the adjoint functor theorem?</p>

<a name="124493728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124493728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124493728">Kenny Lau (Apr 01 2018 at 16:20)</a>:</h4>
<p>that construction was my first construction</p>

<a name="124493731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124493731" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124493731">Kenny Lau (Apr 01 2018 at 16:21)</a>:</h4>
<p>see <a href="#narrow/stream/113488-general/topic/making.20isomorphism.20class.20a.20group" title="#narrow/stream/113488-general/topic/making.20isomorphism.20class.20a.20group">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/making.20isomorphism.20class.20a.20group</a> for why it fails</p>

<a name="124493781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124493781" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124493781">Kenny Lau (Apr 01 2018 at 16:22)</a>:</h4>
<p>unfortunately I rewrote my second construction over my first</p>

<a name="124493783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124493783" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124493783">Kenny Lau (Apr 01 2018 at 16:22)</a>:</h4>
<p>so see commit history for the construction from adjoint functor theorem</p>

<a name="124499636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124499636" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124499636">Peter Jipsen (Apr 01 2018 at 20:05)</a>:</h4>
<p>Nice construction! Would it be possible to construct the free group directly on an inductive type of the group signature and then quotient by the group axioms (i.e. without using the inverse monoid)?</p>

<a name="124499786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124499786" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124499786">Kenny Lau (Apr 01 2018 at 20:10)</a>:</h4>
<p>I find the divide-and-conquer approach more psychologically comfortable</p>

<a name="124500101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124500101" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124500101">Peter Jipsen (Apr 01 2018 at 20:22)</a>:</h4>
<p>Sure, I agree with that. Was just wondering how a direct (minimal) construction would compare -- I may try that as an exercise</p>

<a name="124500103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124500103" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124500103">Kenny Lau (Apr 01 2018 at 20:23)</a>:</h4>
<p>do let me know afterwards! :)</p>

<a name="124500203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124500203" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124500203">Mario Carneiro (Apr 01 2018 at 20:27)</a>:</h4>
<p>I agree that separating the construction into steps makes it clearer what is happening. Is it possible to use just the second stage to construct the free monoid as well?</p>

<a name="124500247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124500247" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124500247">Kenny Lau (Apr 01 2018 at 20:28)</a>:</h4>
<p>hmm, I don't know</p>

<a name="124500398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124500398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124500398">Kevin Buzzard (Apr 01 2018 at 20:35)</a>:</h4>
<p>free commutative ring = polynomial ring <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi mathvariant="double-struck">Z</mi></mrow><mo>[</mo><mi>S</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">\mathbb{Z}[S]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord"><span class="mord mathbb">Z</span></span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mclose">]</span></span></span></span></p>

<a name="124500404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124500404" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124500404">Kevin Buzzard (Apr 01 2018 at 20:35)</a>:</h4>
<p>might be a nice way to think about it</p>

<a name="124500405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124500405" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124500405">Kenny Lau (Apr 01 2018 at 20:35)</a>:</h4>
<p>feel free to construct it ^^</p>

<a name="124500408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124500408" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124500408">Kevin Buzzard (Apr 01 2018 at 20:35)</a>:</h4>
<p>did you prove the adjoint functor theorem yet? ;-)</p>

<a name="124500452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/124500452" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#124500452">Kenny Lau (Apr 01 2018 at 20:37)</a>:</h4>
<p>heh</p>

<a name="125187323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187323" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187323">Kenny Lau (Apr 17 2018 at 08:16)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">universe</span> <span class="n">u</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span>

<span class="kn">inductive</span> <span class="n">rel</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">refl</span> <span class="o">{</span><span class="n">L</span><span class="o">}</span> <span class="o">:</span> <span class="n">rel</span> <span class="n">L</span> <span class="n">L</span>
<span class="bp">|</span> <span class="n">symm</span> <span class="o">{</span><span class="n">L₁</span> <span class="n">L₂</span><span class="o">}</span> <span class="o">:</span> <span class="n">rel</span> <span class="n">L₁</span> <span class="n">L₂</span> <span class="bp">→</span> <span class="n">rel</span> <span class="n">L₂</span> <span class="n">L₁</span>
<span class="bp">|</span> <span class="n">trans</span> <span class="o">{</span><span class="n">L₁</span> <span class="n">L₂</span> <span class="n">L₃</span><span class="o">}</span> <span class="o">:</span> <span class="n">rel</span> <span class="n">L₁</span> <span class="n">L₂</span> <span class="bp">→</span> <span class="n">rel</span> <span class="n">L₂</span> <span class="n">L₃</span> <span class="bp">→</span> <span class="n">rel</span> <span class="n">L₁</span> <span class="n">L₃</span>
<span class="bp">|</span> <span class="n">append</span> <span class="o">{</span><span class="n">L₁</span> <span class="n">L₂</span> <span class="n">L₃</span> <span class="n">L₄</span><span class="o">}</span> <span class="o">:</span> <span class="n">rel</span> <span class="n">L₁</span> <span class="n">L₃</span> <span class="bp">→</span> <span class="n">rel</span> <span class="n">L₂</span> <span class="n">L₄</span> <span class="bp">→</span> <span class="n">rel</span> <span class="o">(</span><span class="n">L₁</span> <span class="bp">++</span> <span class="n">L₂</span><span class="o">)</span> <span class="o">(</span><span class="n">L₃</span> <span class="bp">++</span> <span class="n">L₄</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">bnot</span> <span class="o">{</span><span class="n">x</span> <span class="n">b</span><span class="o">}</span> <span class="o">:</span> <span class="n">rel</span> <span class="o">[(</span><span class="n">x</span><span class="o">,</span> <span class="n">b</span><span class="o">),</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b</span><span class="o">)]</span> <span class="o">[]</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">rel</span> <span class="n">α</span> <span class="o">[(</span><span class="n">x</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span> <span class="o">[(</span><span class="n">y</span><span class="o">,</span> <span class="n">tt</span><span class="o">)])</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>

<a name="125187324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187324" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187324">Kenny Lau (Apr 17 2018 at 08:16)</a>:</h4>
<p>How might I prove this?</p>

<a name="125187326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187326" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187326">Kenny Lau (Apr 17 2018 at 08:16)</a>:</h4>
<p>looks simple but somehow I can't do it</p>

<a name="125187372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187372" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187372">Johannes Hölzl (Apr 17 2018 at 08:18)</a>:</h4>
<p>You need to generalize <code>[(x, tt)]</code> and <code>[(y, tt)]</code> then you can use induction on it.</p>

<a name="125187383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187383" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187383">Johannes Hölzl (Apr 17 2018 at 08:18)</a>:</h4>
<p>Like</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">rel</span> <span class="n">α</span> <span class="o">[(</span><span class="n">x</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span> <span class="o">[(</span><span class="n">y</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span> <span class="bp">-&gt;</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">generalize</span> <span class="n">h1</span> <span class="o">:</span> <span class="o">[(</span><span class="n">x</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span> <span class="bp">=</span> <span class="n">x1</span><span class="o">,</span>
  <span class="n">generalize</span> <span class="n">h2</span> <span class="o">:</span> <span class="o">[(</span><span class="n">y</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span> <span class="bp">=</span> <span class="n">x2</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">h</span> <span class="n">generalizing</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span>
 <span class="bp">...</span>
<span class="kn">end</span>
</pre></div>

<a name="125187391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187391" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187391">Kenny Lau (Apr 17 2018 at 08:19)</a>:</h4>
<p>can I not do inversion (pattern matching)?</p>

<a name="125187452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187452" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187452">Kenny Lau (Apr 17 2018 at 08:20)</a>:</h4>
<p>your code doesn't work, and after I removed <code>intro h</code>, I get an impossible goal:</p>
<div class="codehilite"><pre><span></span><span class="n">case</span> <span class="n">rel</span><span class="bp">.</span><span class="n">refl</span>
<span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">x1</span> <span class="n">x2</span> <span class="n">H</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">),</span>
<span class="n">h1</span> <span class="o">:</span> <span class="n">H</span> <span class="bp">=</span> <span class="n">x1</span><span class="o">,</span>
<span class="n">h2</span> <span class="o">:</span> <span class="n">H</span> <span class="bp">=</span> <span class="n">x2</span><span class="o">,</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span>
<span class="err">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>

<a name="125187453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187453" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187453">Johannes Hölzl (Apr 17 2018 at 08:20)</a>:</h4>
<p><code>match</code> doesn't work, but <code>cases</code> could work. But I guess you need induction to finally proof it, as the <code>x</code> and <code>y</code> could come from the recursive call.</p>

<a name="125187468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187468" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187468">Kenny Lau (Apr 17 2018 at 08:21)</a>:</h4>
<p>never mind, ignore what I said about your code not working</p>

<a name="125187534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187534" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187534">Kenny Lau (Apr 17 2018 at 08:23)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">case</span> <span class="n">rel</span><span class="bp">.</span><span class="n">symm</span>
<span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span>
<span class="n">X</span> <span class="n">Y</span> <span class="n">L1</span> <span class="n">L2</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">),</span>
<span class="n">H1</span> <span class="o">:</span> <span class="n">rel</span> <span class="n">α</span> <span class="n">L1</span> <span class="n">L2</span><span class="o">,</span>
<span class="n">ih1</span> <span class="o">:</span> <span class="o">[(</span><span class="n">x</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span> <span class="bp">=</span> <span class="n">L1</span> <span class="bp">→</span> <span class="o">[(</span><span class="n">y</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span> <span class="bp">=</span> <span class="n">L2</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="o">[(</span><span class="n">x</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span> <span class="bp">=</span> <span class="n">L2</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="o">[(</span><span class="n">y</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span> <span class="bp">=</span> <span class="n">L1</span>
<span class="err">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>

<a name="125187535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187535" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187535">Kenny Lau (Apr 17 2018 at 08:23)</a>:</h4>
<p>I ran to an impossible goal</p>

<a name="125187539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187539" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187539">Johannes Hölzl (Apr 17 2018 at 08:23)</a>:</h4>
<p>did you use <code>induction h generalizing x y</code>?</p>

<a name="125187581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187581">Johannes Hölzl (Apr 17 2018 at 08:24)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">case</span> <span class="n">rel</span><span class="bp">.</span><span class="n">symm</span>
<span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">x1</span> <span class="n">x2</span> <span class="n">h_L₁</span> <span class="n">h_L₂</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">),</span>
<span class="n">h_a</span> <span class="o">:</span> <span class="n">rel</span> <span class="n">α</span> <span class="n">h_L₁</span> <span class="n">h_L₂</span><span class="o">,</span>
<span class="n">h_ih</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="o">[(</span><span class="n">x</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span> <span class="bp">=</span> <span class="n">h_L₁</span> <span class="bp">→</span> <span class="o">[(</span><span class="n">y</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span> <span class="bp">=</span> <span class="n">h_L₂</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="o">[(</span><span class="n">x</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span> <span class="bp">=</span> <span class="n">h_L₂</span><span class="o">,</span>
<span class="n">h2</span> <span class="o">:</span> <span class="o">[(</span><span class="n">y</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span> <span class="bp">=</span> <span class="n">h_L₁</span>
<span class="err">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>

<a name="125187582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187582" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187582">Kenny Lau (Apr 17 2018 at 08:24)</a>:</h4>
<p>you're right, there's something wrong with me</p>

<a name="125187682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187682" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187682">Johannes Hölzl (Apr 17 2018 at 08:27)</a>:</h4>
<p>If you are working on free groups: you don't need the <code>refl</code>, <code>symm</code> and <code>trans</code> rules. For example I did a experiment a while back:<br>
<a href="https://gist.github.com/johoelzl/7e73916f39e3acef8796bfb6c089a9c9" target="_blank" title="https://gist.github.com/johoelzl/7e73916f39e3acef8796bfb6c089a9c9">https://gist.github.com/johoelzl/7e73916f39e3acef8796bfb6c089a9c9</a><br>
There I used <code>quot</code>, which doesn't require a <code>setoid</code>. Then lifting functions requires less proofs. Other things get a little bit more difficult.</p>

<a name="125187727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187727" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187727">Kenny Lau (Apr 17 2018 at 08:28)</a>:</h4>
<p>I, uh... prefer using setoid :P</p>

<a name="125187734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187734" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187734">Kenny Lau (Apr 17 2018 at 08:29)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">case</span> <span class="n">free_group</span><span class="bp">.</span><span class="n">rel</span><span class="bp">.</span><span class="n">trans</span>
<span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">X</span> <span class="n">Y</span> <span class="n">L1</span> <span class="n">L2</span> <span class="n">L3</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">),</span>
<span class="n">H1</span> <span class="o">:</span> <span class="n">rel</span> <span class="n">α</span> <span class="n">L1</span> <span class="n">L2</span><span class="o">,</span>
<span class="n">H2</span> <span class="o">:</span> <span class="n">rel</span> <span class="n">α</span> <span class="n">L2</span> <span class="n">L3</span><span class="o">,</span>
<span class="n">ih1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="o">[(</span><span class="n">x</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span> <span class="bp">=</span> <span class="n">L1</span> <span class="bp">→</span> <span class="o">[(</span><span class="n">y</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span> <span class="bp">=</span> <span class="n">L2</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">ih2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="o">[(</span><span class="n">x</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span> <span class="bp">=</span> <span class="n">L2</span> <span class="bp">→</span> <span class="o">[(</span><span class="n">y</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span> <span class="bp">=</span> <span class="n">L3</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
<span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span>
<span class="n">hx</span> <span class="o">:</span> <span class="o">[(</span><span class="n">x</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span> <span class="bp">=</span> <span class="n">L1</span><span class="o">,</span>
<span class="n">hy</span> <span class="o">:</span> <span class="o">[(</span><span class="n">y</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span> <span class="bp">=</span> <span class="n">L3</span>
<span class="err">⊢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
</pre></div>

<a name="125187735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187735">Kenny Lau (Apr 17 2018 at 08:29)</a>:</h4>
<p>an impossible goal</p>

<a name="125187776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187776" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187776">Mario Carneiro (Apr 17 2018 at 08:30)</a>:</h4>
<p>that's not impossible</p>

<a name="125187783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187783" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187783">Mario Carneiro (Apr 17 2018 at 08:30)</a>:</h4>
<p>it's just transitivity on the two ih</p>

<a name="125187787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187787" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187787">Kenny Lau (Apr 17 2018 at 08:30)</a>:</h4>
<p>but I can't use the assumption <code>[(y, tt)] = L2</code></p>

<a name="125187788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187788" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187788">Kenny Lau (Apr 17 2018 at 08:30)</a>:</h4>
<p>this can't be proved</p>

<a name="125187802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187802" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187802">Mario Carneiro (Apr 17 2018 at 08:31)</a>:</h4>
<p>Ah, I see</p>

<a name="125187809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187809" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187809">Kenny Lau (Apr 17 2018 at 08:31)</a>:</h4>
<p>is there really no way to use the equation compiler?</p>

<a name="125187810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187810" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187810">Mario Carneiro (Apr 17 2018 at 08:31)</a>:</h4>
<p>Didn't I show you how to solve this with a different representation?</p>

<a name="125187815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187815" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187815">Kenny Lau (Apr 17 2018 at 08:31)</a>:</h4>
<p>because that compiler is smarter than induction</p>

<a name="125187817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187817" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187817">Johannes Hölzl (Apr 17 2018 at 08:31)</a>:</h4>
<p>You first need to prove a stronger inversion rule: <code>rel [x] as -&gt; \exists y, as = [y]</code> (ups, this doesn't hold...)</p>

<a name="125187820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125187820" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125187820">Mario Carneiro (Apr 17 2018 at 08:31)</a>:</h4>
<p>You want to focus on one-directional reduction</p>

<a name="125188017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188017" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188017">Mario Carneiro (Apr 17 2018 at 08:38)</a>:</h4>
<div class="codehilite"><pre><span></span>inductive red : list (α × bool) → list (α × bool) → Prop
| refl {L} : red L L
| trans {L₁ L₂ L₃} : red L₁ L₂ → red L₂ L₃ → red L₁ L₃
| cons {L₁ L₂} (a) : red L₁ L₂ → red (a :: L₁) (a :: L₂)
| bnot {x b L} : red ((x, b) :: (x, bnot b) :: L) L

theorem church_rosser : ∀ L₁ L₂, rel α L₁ L₂ → ∃ L₃, red α L₁ L₃ ∧ red α L₂ L₃ := sorry
</pre></div>

<a name="125188022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188022">Kevin Buzzard (Apr 17 2018 at 08:38)</a>:</h4>
<p>You could prove (easily by induction, I imagine) that for every function from alpha to Z/2Z (the additive group) the induced map from list (alpha x bool) to Z/2Z sending (x,b) to x and sending ++ to + has the property that two things related to each other go to the same place, and deduce it from that.</p>

<a name="125188035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188035">Kenny Lau (Apr 17 2018 at 08:39)</a>:</h4>
<p>seeing the word "church rosser" excites me</p>

<a name="125188036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188036" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188036">Mario Carneiro (Apr 17 2018 at 08:39)</a>:</h4>
<p>but x is in alpha, not Z/2Z</p>

<a name="125188038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188038" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188038">Kevin Buzzard (Apr 17 2018 at 08:39)</a>:</h4>
<p>right</p>

<a name="125188041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188041" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188041">Kevin Buzzard (Apr 17 2018 at 08:39)</a>:</h4>
<p>so if x wasn't y you just write down a function sending x to 1 and y to 0</p>

<a name="125188042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188042" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188042">Mario Carneiro (Apr 17 2018 at 08:39)</a>:</h4>
<p>so how is that a map from list (alpha x bool) to Z/2Z ?</p>

<a name="125188083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188083" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188083">Kevin Buzzard (Apr 17 2018 at 08:40)</a>:</h4>
<p>that's a map from alpha to Z/2Z</p>

<a name="125188086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188086" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188086">Kenny Lau (Apr 17 2018 at 08:40)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> "if x wasn't y"</p>

<a name="125188099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188099" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188099">Kenny Lau (Apr 17 2018 at 08:41)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> how would I prove symm?</p>

<a name="125188100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188100">Mario Carneiro (Apr 17 2018 at 08:41)</a>:</h4>
<p>To finish the proof given <code>church_rosser</code>, note that <code>red A L1 L2</code> implies <code>length L1 &gt;= length L2</code>, and they are the same length mod 2 so if one is a singleton so is the other</p>

<a name="125188101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188101" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188101">Kevin Buzzard (Apr 17 2018 at 08:41)</a>:</h4>
<p>I'm telling you how a mathematician would answer the original question</p>

<a name="125188102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188102" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188102">Mario Carneiro (Apr 17 2018 at 08:41)</a>:</h4>
<p>symm is trivial, since the target property is symmetric</p>

<a name="125188142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188142" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188142">Mario Carneiro (Apr 17 2018 at 08:42)</a>:</h4>
<p>the hard one is trans</p>

<a name="125188143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188143" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188143">Kenny Lau (Apr 17 2018 at 08:42)</a>:</h4>
<p>I don't get what you mean</p>

<a name="125188144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188144" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188144">Kenny Lau (Apr 17 2018 at 08:42)</a>:</h4>
<p><code>bnot</code> is clearly not symmetric</p>

<a name="125188146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188146" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188146">Kevin Buzzard (Apr 17 2018 at 08:42)</a>:</h4>
<p>I'm a bit confused about why a proof of what Mario calls Church Rosser can't just be "let L3 be L2"</p>

<a name="125188149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188149" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188149">Mario Carneiro (Apr 17 2018 at 08:43)</a>:</h4>
<p>note that <code>rel</code> becomes <code>red</code> in the result</p>

<a name="125188153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188153" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188153">Kenny Lau (Apr 17 2018 at 08:43)</a>:</h4>
<p>oh wait what</p>

<a name="125188154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188154" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188154">Mario Carneiro (Apr 17 2018 at 08:43)</a>:</h4>
<p><code>red</code> has no symmetry rule</p>

<a name="125188155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188155" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188155">Kenny Lau (Apr 17 2018 at 08:43)</a>:</h4>
<p>I thought you were telling me to rewrite rel to red lol</p>

<a name="125188157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188157">Kevin Buzzard (Apr 17 2018 at 08:43)</a>:</h4>
<p>oh, I didn't spot rel wasn't red</p>

<a name="125188158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188158" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188158">Kenny Lau (Apr 17 2018 at 08:43)</a>:</h4>
<p>high five</p>

<a name="125188265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188265" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188265">Mario Carneiro (Apr 17 2018 at 08:46)</a>:</h4>
<p>You will need this lemma for the trans case:</p>
<div class="codehilite"><pre><span></span>theorem church_rosser2 : ∀ L₁ L₂ L₃,
  red α L₁ L₂ → red α L₁ L₃ → ∃ L₄, red α L₂ L₄ ∧ red α L₃ L₄ := sorry
</pre></div>


<p>You can prove this by induction on one of the <code>red</code> assumptions</p>

<a name="125188437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188437" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188437">Kenny Lau (Apr 17 2018 at 08:52)</a>:</h4>
<p>which one?</p>

<a name="125188441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188441">Mario Carneiro (Apr 17 2018 at 08:52)</a>:</h4>
<p>it doesn't matter by symmetry</p>

<a name="125188443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188443" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188443">Kenny Lau (Apr 17 2018 at 08:52)</a>:</h4>
<p>but which one would you expand?</p>

<a name="125188445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188445" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188445">Mario Carneiro (Apr 17 2018 at 08:52)</a>:</h4>
<p>?</p>

<a name="125188452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188452" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188452">Kenny Lau (Apr 17 2018 at 08:53)</a>:</h4>
<p>never mind</p>

<a name="125188612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188612" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188612">Kenny Lau (Apr 17 2018 at 08:58)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">case</span> <span class="n">free_group</span><span class="bp">.</span><span class="n">red</span><span class="bp">.</span><span class="n">trans</span>
<span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">L₂</span> <span class="n">L₁</span> <span class="n">L₃</span> <span class="n">L1</span> <span class="n">L2</span> <span class="n">L3</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">),</span>
<span class="n">H1</span> <span class="o">:</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L1</span> <span class="n">L2</span><span class="o">,</span>
<span class="n">H2</span> <span class="o">:</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L2</span> <span class="n">L3</span><span class="o">,</span>
<span class="n">ih1</span> <span class="o">:</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L1</span> <span class="n">L₂</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">L₄</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)),</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L₂</span> <span class="n">L₄</span> <span class="bp">∧</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L2</span> <span class="n">L₄</span><span class="o">),</span>
<span class="n">ih2</span> <span class="o">:</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L2</span> <span class="n">L₂</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">L₄</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)),</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L₂</span> <span class="n">L₄</span> <span class="bp">∧</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L3</span> <span class="n">L₄</span><span class="o">),</span>
<span class="n">H1</span> <span class="o">:</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L1</span> <span class="n">L₂</span>
<span class="err">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">L₄</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)),</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L₂</span> <span class="n">L₄</span> <span class="bp">∧</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L3</span> <span class="n">L₄</span>
</pre></div>

<a name="125188613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188613" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188613">Kenny Lau (Apr 17 2018 at 08:58)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span></p>

<a name="125188681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188681" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188681">Mario Carneiro (Apr 17 2018 at 09:00)</a>:</h4>
<p>that's where <code>church_rosser2</code> comes in (also don't forget to generalize L₂)</p>

<a name="125188683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188683" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188683">Kenny Lau (Apr 17 2018 at 09:00)</a>:</h4>
<p>that's church_rosser2</p>

<a name="125188805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125188805" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125188805">Mario Carneiro (Apr 17 2018 at 09:05)</a>:</h4>
<p>Actually on second thought I think you want to separate the transitivity part from the one-step reduction. That leads to the following proof skeleton:</p>
<div class="codehilite"><pre><span></span>inductive rel : list (α × bool) → list (α × bool) → Prop
| refl {L} : rel L L
| symm {L₁ L₂} : rel L₁ L₂ → rel L₂ L₁
| trans {L₁ L₂ L₃} : rel L₁ L₂ → rel L₂ L₃ → rel L₁ L₃
| append {L₁ L₂ L₃ L₄} : rel L₁ L₃ → rel L₂ L₄ → rel (L₁ ++ L₂) (L₃ ++ L₄)
| bnot {x b} : rel [(x, b), (x, bnot b)] []

inductive trans_gen {α} (R : α → α → Prop) (x : α) : α → Prop
| refl : trans_gen x
| trans {y z} : R y z → trans_gen y → trans_gen z

inductive red : list (α × bool) → list (α × bool) → Prop
| cons {L₁ L₂} (a) : red L₁ L₂ → red (a :: L₁) (a :: L₂)
| bnot {x b L} : red ((x, b) :: (x, bnot b) :: L) L

theorem church_rosser_1 : ∀ L₁ L₂ L₃,
  red α L₁ L₂ → red α L₁ L₃ → ∃ L₄, red α L₂ L₄ ∧ red α L₃ L₄ := sorry

theorem church_rosser_t1 : ∀ L₁ L₂ L₃,
  red α L₁ L₂ → trans_gen (red α) L₁ L₃ → ∃ L₄, trans_gen (red α) L₂ L₄ ∧ red α L₃ L₄ := sorry

theorem church_rosser_t : ∀ L₁ L₂ L₃,
  trans_gen (red α) L₁ L₂ → trans_gen (red α) L₁ L₃ → ∃ L₄, trans_gen (red α) L₂ L₄ ∧ trans_gen (red α) L₃ L₄ := sorry

theorem church_rosser : ∀ L₁ L₂, rel α L₁ L₂ →
  ∃ L₃, trans_gen (red α) L₁ L₃ ∧ trans_gen (red α) L₂ L₃ := sorry
</pre></div>


<p>This is important for the core of the proof, knowing that the one-step diamond property <code>church_rosser_1</code> holds is what allows you to do induction to get to <code>church_rosser_t</code></p>

<a name="125189880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125189880" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125189880">Kenny Lau (Apr 17 2018 at 09:38)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I'm stuck on church_rosser_1</p>

<a name="125189895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125189895" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125189895">Mario Carneiro (Apr 17 2018 at 09:39)</a>:</h4>
<p>You need to do induction on both arguments for that one</p>

<a name="125189899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125189899" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125189899">Kenny Lau (Apr 17 2018 at 09:39)</a>:</h4>
<p>even so</p>

<a name="125189902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125189902" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125189902">Kenny Lau (Apr 17 2018 at 09:39)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">case</span> <span class="n">free_group</span><span class="bp">.</span><span class="n">red</span><span class="bp">.</span><span class="n">cons</span>
<span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">L₁</span> <span class="n">L₃</span> <span class="n">L1</span> <span class="n">L2</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">),</span>
<span class="n">x1</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">,</span>
<span class="n">H3</span> <span class="o">:</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L1</span> <span class="n">L2</span><span class="o">,</span>
<span class="n">ih1</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="o">(</span><span class="n">L₂</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)),</span>
    <span class="n">red</span> <span class="n">α</span> <span class="n">L1</span> <span class="n">L₂</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">L₄</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)),</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L₂</span> <span class="n">L₄</span> <span class="bp">∧</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L2</span> <span class="n">L₄</span><span class="o">),</span>
<span class="n">L₂</span> <span class="n">L3</span> <span class="n">L4</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">),</span>
<span class="n">x2</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">,</span>
<span class="n">H4</span> <span class="o">:</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L3</span> <span class="n">L4</span><span class="o">,</span>
<span class="n">ih2</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">L₄</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)),</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L4</span> <span class="n">L₄</span> <span class="bp">∧</span> <span class="n">red</span> <span class="n">α</span> <span class="o">(</span><span class="n">x1</span> <span class="bp">::</span> <span class="n">L2</span><span class="o">)</span> <span class="n">L₄</span>
<span class="err">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">L₄</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)),</span> <span class="n">red</span> <span class="n">α</span> <span class="o">(</span><span class="n">x2</span> <span class="bp">::</span> <span class="n">L4</span><span class="o">)</span> <span class="n">L₄</span> <span class="bp">∧</span> <span class="n">red</span> <span class="n">α</span> <span class="o">(</span><span class="n">x1</span> <span class="bp">::</span> <span class="n">L2</span><span class="o">)</span> <span class="n">L₄</span>
</pre></div>

<a name="125189947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125189947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125189947">Mario Carneiro (Apr 17 2018 at 09:40)</a>:</h4>
<p>apply ih1?</p>

<a name="125189953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125189953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125189953">Mario Carneiro (Apr 17 2018 at 09:40)</a>:</h4>
<p>and then destruct the exists's</p>

<a name="125189962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125189962" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125189962">Kenny Lau (Apr 17 2018 at 09:41)</a>:</h4>
<p>but I need the same list to clear the goal</p>

<a name="125189966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125189966" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125189966">Kenny Lau (Apr 17 2018 at 09:41)</a>:</h4>
<p>but x1 and x2 are different</p>

<a name="125189992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125189992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125189992">Mario Carneiro (Apr 17 2018 at 09:42)</a>:</h4>
<p>I'm just suggesting to apply <code>ih1</code> to <code>H3</code>, and then open up the assumptions <code>ih1</code> and <code>ih2</code></p>

<a name="125190021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125190021" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125190021">Mario Carneiro (Apr 17 2018 at 09:43)</a>:</h4>
<p>once you have done that you do inversion on <code>red α (x1 :: L2) L₄</code> and there are a few different cases</p>

<a name="125190027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125190027" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125190027">Mario Carneiro (Apr 17 2018 at 09:44)</a>:</h4>
<p>this is the tricky part, since you have to show that the rewriting is confluent meaning different contractions result in the same thing</p>

<a name="125190128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125190128" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125190128">Kenny Lau (Apr 17 2018 at 09:47)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">L₁</span> <span class="n">L₃</span> <span class="n">L1</span> <span class="n">L2</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">),</span>
<span class="n">x1</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">,</span>
<span class="n">H3</span> <span class="o">:</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L1</span> <span class="n">L2</span><span class="o">,</span>
<span class="n">L₂</span> <span class="n">L3</span> <span class="n">L4</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">),</span>
<span class="n">x2</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">,</span>
<span class="n">H4</span> <span class="o">:</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L3</span> <span class="n">L4</span><span class="o">,</span>
<span class="n">ih2</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">L₄</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)),</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L4</span> <span class="n">L₄</span> <span class="bp">∧</span> <span class="n">red</span> <span class="n">α</span> <span class="o">(</span><span class="n">x1</span> <span class="bp">::</span> <span class="n">L2</span><span class="o">)</span> <span class="n">L₄</span><span class="o">,</span>
<span class="n">ih1</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">L₄</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)),</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L2</span> <span class="n">L₄</span> <span class="bp">∧</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L2</span> <span class="n">L₄</span>
<span class="err">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">L₄</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)),</span> <span class="n">red</span> <span class="n">α</span> <span class="o">(</span><span class="n">x2</span> <span class="bp">::</span> <span class="n">L4</span><span class="o">)</span> <span class="n">L₄</span> <span class="bp">∧</span> <span class="n">red</span> <span class="n">α</span> <span class="o">(</span><span class="n">x1</span> <span class="bp">::</span> <span class="n">L2</span><span class="o">)</span> <span class="n">L₄</span>
</pre></div>

<a name="125190129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125190129" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125190129">Kenny Lau (Apr 17 2018 at 09:47)</a>:</h4>
<p>I don't think this is possible</p>

<a name="125190132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125190132" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125190132">Mario Carneiro (Apr 17 2018 at 09:48)</a>:</h4>
<p>It is, do cases on <code>ih1</code> and <code>ih2</code> now</p>

<a name="125190176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125190176" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125190176">Kenny Lau (Apr 17 2018 at 09:48)</a>:</h4>
<p>but I know nothing about <code>x2</code></p>

<a name="125190257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125190257" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125190257">Mario Carneiro (Apr 17 2018 at 09:50)</a>:</h4>
<p>hm, you seem to have forgotten something</p>

<a name="125190266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125190266" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125190266">Mario Carneiro (Apr 17 2018 at 09:51)</a>:</h4>
<p>I think you need to generalize one of the parameters before the secondary induction, or you will lose the relation with x2</p>

<a name="125190843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125190843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125190843">Kenny Lau (Apr 17 2018 at 10:10)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> forgive me, but which parameter?</p>

<a name="125190849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125190849" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125190849">Mario Carneiro (Apr 17 2018 at 10:10)</a>:</h4>
<p>the one that has <code>x2</code> in it</p>

<a name="125190857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125190857" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125190857">Kenny Lau (Apr 17 2018 at 10:11)</a>:</h4>
<p>this is the state before the second induction</p>

<a name="125190858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125190858" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125190858">Kenny Lau (Apr 17 2018 at 10:11)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="n">L₁</span> <span class="n">L₃</span> <span class="n">L1</span> <span class="n">L2</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">),</span>
<span class="n">x1</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">,</span>
<span class="n">H3</span> <span class="o">:</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L1</span> <span class="n">L2</span><span class="o">,</span>
<span class="n">ih1</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="o">(</span><span class="n">L₂</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)),</span>
    <span class="n">red</span> <span class="n">α</span> <span class="n">L1</span> <span class="n">L₂</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">L₄</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)),</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L₂</span> <span class="n">L₄</span> <span class="bp">∧</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L2</span> <span class="n">L₄</span><span class="o">),</span>
<span class="n">L₂</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">),</span>
<span class="n">H1</span> <span class="o">:</span> <span class="n">red</span> <span class="n">α</span> <span class="o">(</span><span class="n">x1</span> <span class="bp">::</span> <span class="n">L1</span><span class="o">)</span> <span class="n">L₂</span>
<span class="err">⊢</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">L₄</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)),</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L₂</span> <span class="n">L₄</span> <span class="bp">∧</span> <span class="n">red</span> <span class="n">α</span> <span class="o">(</span><span class="n">x1</span> <span class="bp">::</span> <span class="n">L2</span><span class="o">)</span> <span class="n">L₄</span>
</pre></div>

<a name="125190859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125190859" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125190859">Mario Carneiro (Apr 17 2018 at 10:11)</a>:</h4>
<p>you want to get an equality constraint in the context so you can do injection on it</p>

<a name="125190863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125190863" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125190863">Mario Carneiro (Apr 17 2018 at 10:11)</a>:</h4>
<p><code>generalize h : x1 :: L1 = xL</code></p>

<a name="125190906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125190906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125190906">Kenny Lau (Apr 17 2018 at 10:12)</a>:</h4>
<p>and then <code>generalizing</code> who?</p>

<a name="125190959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125190959" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125190959">Mario Carneiro (Apr 17 2018 at 10:14)</a>:</h4>
<p>I don't think you need any generalizing here, but you know what to change if the IH isn't strong enough</p>

<a name="125190968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125190968" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125190968">Mario Carneiro (Apr 17 2018 at 10:15)</a>:</h4>
<p>actually you might not even need induction here; see if <code>cases H1</code> works</p>

<a name="125191726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125191726" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125191726">Kevin Buzzard (Apr 17 2018 at 10:41)</a>:</h4>
<p>My way would be so much easier ;-)</p>

<a name="125195531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125195531" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125195531">Kenny Lau (Apr 17 2018 at 12:49)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> except it doesn't even work</p>

<a name="125195584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125195584" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125195584">Kevin Buzzard (Apr 17 2018 at 12:50)</a>:</h4>
<p>Oh rotten luck :-)</p>

<a name="125195585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125195585" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125195585">Kevin Buzzard (Apr 17 2018 at 12:50)</a>:</h4>
<p>It works in maths :-)</p>

<a name="125195606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125195606" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125195606">Kevin Buzzard (Apr 17 2018 at 12:51)</a>:</h4>
<p>first three properties are that = is an equiv relation, fourth is that the map is a group hom, fifth that Z/2 has exponent 2, and bob's your uncle</p>

<a name="125195660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125195660" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125195660">Kenny Lau (Apr 17 2018 at 12:52)</a>:</h4>
<p>oh wait, I misunderstood</p>

<a name="125195661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125195661" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125195661">Kenny Lau (Apr 17 2018 at 12:52)</a>:</h4>
<p>what's your method?</p>

<a name="125195696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125195696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125195696">Kenny Lau (Apr 17 2018 at 12:54)</a>:</h4>
<p>you're using finsupp aren't you</p>

<a name="125195733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125195733" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125195733">Kenny Lau (Apr 17 2018 at 12:54)</a>:</h4>
<p>that's noncomputable</p>

<a name="125195843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125195843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125195843">Kenny Lau (Apr 17 2018 at 12:57)</a>:</h4>
<p>if you form (Z/2Z)^S as a group, your set-theoretic function will be non-computable</p>

<a name="125195924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125195924" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125195924">Johannes Hölzl (Apr 17 2018 at 12:59)</a>:</h4>
<p>since a couple of weeks finsupp is computable</p>

<a name="125195973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125195973" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125195973">Kenny Lau (Apr 17 2018 at 13:00)</a>:</h4>
<p>right, but this instance is still not</p>

<a name="125195992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125195992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125195992">Kenny Lau (Apr 17 2018 at 13:01)</a>:</h4>
<p>in particular, <code>single</code> still needs decidable equality</p>

<a name="125196116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125196116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125196116">Kevin Buzzard (Apr 17 2018 at 13:05)</a>:</h4>
<p>I said it works in maths ;-)</p>

<a name="125196117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125196117" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125196117">Johannes Hölzl (Apr 17 2018 at 13:05)</a>:</h4>
<p>well, then you need to use <code>classical.prop_decidable</code>.</p>

<a name="125196156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125196156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125196156">Kenny Lau (Apr 17 2018 at 13:06)</a>:</h4>
<p>I thought you were talking about the adjoint functor theorem when I said it doesn't even work</p>

<a name="125196159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125196159" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125196159">Kenny Lau (Apr 17 2018 at 13:06)</a>:</h4>
<p><span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> oh I forgot, we aren't on the same side</p>

<a name="125196231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125196231" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125196231">Johannes Hölzl (Apr 17 2018 at 13:08)</a>:</h4>
<p>ok</p>

<a name="125197470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197470" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197470">Kenny Lau (Apr 17 2018 at 13:47)</a>:</h4>
<p>I think the main reason why this is hard is that reduction isn't straightforward</p>

<a name="125197471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197471" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197471">Kenny Lau (Apr 17 2018 at 13:47)</a>:</h4>
<p>if your list is [a,b,c,d]</p>

<a name="125197476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197476" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197476">Kenny Lau (Apr 17 2018 at 13:47)</a>:</h4>
<p>you can eliminate [b,c] or you can eliminate [c,d]</p>

<a name="125197517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197517" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197517">Kenny Lau (Apr 17 2018 at 13:48)</a>:</h4>
<p>then somehow you need to prove that [a,d] = [a,b]</p>

<a name="125197521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197521" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197521">Kenny Lau (Apr 17 2018 at 13:48)</a>:</h4>
<p>on the outside we know that to be true intuitively, but that doesn't mean this translates well on the inside</p>

<a name="125197599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197599" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197599">Kenny Lau (Apr 17 2018 at 13:51)</a>:</h4>
<p><a href="https://gist.github.com/johoelzl/7e73916f39e3acef8796bfb6c089a9c9" target="_blank" title="https://gist.github.com/johoelzl/7e73916f39e3acef8796bfb6c089a9c9">https://gist.github.com/johoelzl/7e73916f39e3acef8796bfb6c089a9c9</a></p>

<a name="125197603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197603">Kenny Lau (Apr 17 2018 at 13:51)</a>:</h4>
<p><span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> oh and why don't you just put this onto mathlib lol</p>

<a name="125197789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197789" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197789">Johannes Hölzl (Apr 17 2018 at 13:56)</a>:</h4>
<p>Yours is slightly more general. I thought you want to fix your pull request and still try to get it into mathlib.</p>

<a name="125197801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197801" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197801">Kenny Lau (Apr 17 2018 at 13:57)</a>:</h4>
<p>actually I've written another free_group today, before this thread even started</p>

<a name="125197803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197803" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197803">Johannes Hölzl (Apr 17 2018 at 13:57)</a>:</h4>
<p>But as it looks it will take a little bit longer, so I can add my stuff first.</p>

<a name="125197804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197804">Kenny Lau (Apr 17 2018 at 13:57)</a>:</h4>
<p>(I live in GMT+8, so "today" started like 10 hours ago)</p>

<a name="125197809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197809" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197809">Kenny Lau (Apr 17 2018 at 13:57)</a>:</h4>
<p>and all this fuss is about I can't prove that the set-theoretic function is injective</p>

<a name="125197865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197865" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197865">Kenny Lau (Apr 17 2018 at 13:58)</a>:</h4>
<p><a href="https://gist.github.com/kckennylau/cda1c6c6bc781fe669692b8d725f43d0" target="_blank" title="https://gist.github.com/kckennylau/cda1c6c6bc781fe669692b8d725f43d0">https://gist.github.com/kckennylau/cda1c6c6bc781fe669692b8d725f43d0</a></p>

<a name="125197868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197868" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197868">Kenny Lau (Apr 17 2018 at 13:58)</a>:</h4>
<p>this is what the working part of my file looks like</p>

<a name="125197873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197873" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197873">Kenny Lau (Apr 17 2018 at 13:59)</a>:</h4>
<p>I think your file is slightly more general lol</p>

<a name="125197947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197947">Kenny Lau (Apr 17 2018 at 14:00)</a>:</h4>
<p>anyway, [a,d] and [a,b] aren't definitionally equal</p>

<a name="125197950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197950" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197950">Kenny Lau (Apr 17 2018 at 14:00)</a>:</h4>
<p>it just so happens that d=b</p>

<a name="125197952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197952" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197952">Kenny Lau (Apr 17 2018 at 14:00)</a>:</h4>
<p>but how am I supposed to know that</p>

<a name="125197963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197963" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197963">Kenny Lau (Apr 17 2018 at 14:01)</a>:</h4>
<p>I doubt church-rosser can be proved by me</p>

<a name="125197970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125197970" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125197970">Johannes Hölzl (Apr 17 2018 at 14:01)</a>:</h4>
<p>So you don't want to follow the approach from stack overvlow anymore?</p>

<a name="125198007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125198007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125198007">Kenny Lau (Apr 17 2018 at 14:02)</a>:</h4>
<p>nope</p>

<a name="125198018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125198018" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125198018">Kenny Lau (Apr 17 2018 at 14:02)</a>:</h4>
<p>I don't see any point</p>

<a name="125198021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125198021" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125198021">Kenny Lau (Apr 17 2018 at 14:02)</a>:</h4>
<p>I was overwhelmed by fear</p>

<a name="125198027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125198027" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125198027">Kenny Lau (Apr 17 2018 at 14:02)</a>:</h4>
<p>that I couldn't ever possibly define free group in one step</p>

<a name="125198125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125198125" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125198125">Johannes Hölzl (Apr 17 2018 at 14:04)</a>:</h4>
<p>don't worry, while theorem proving is a steep learning curve, it is a continuous curve after all</p>

<a name="125198145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125198145" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125198145">Kenny Lau (Apr 17 2018 at 14:05)</a>:</h4>
<p>you won't believe me if I told you that I prove limit commutes with multiplication in three steps</p>

<a name="125198146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125198146" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125198146">Kenny Lau (Apr 17 2018 at 14:05)</a>:</h4>
<p>divide and conquer</p>

<a name="125199051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199051">Kenny Lau (Apr 17 2018 at 14:30)</a>:</h4>
<p>if <code>[(x,tt)]</code> is related to <code>[(y,tt)]</code>, part of the reason why it is so hard to prove <code>x=y</code> is that the reason they are related can be complicated</p>

<a name="125199070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199070" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199070">Kenny Lau (Apr 17 2018 at 14:30)</a>:</h4>
<p>since one can have <code>[(x,tt)] ~ [(x,tt), (x,ff), (x,tt)] ~ [(x,tt)]</code></p>

<a name="125199077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199077" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199077">Kenny Lau (Apr 17 2018 at 14:31)</a>:</h4>
<p>where the two <code>~</code>s deal with different pairs</p>

<a name="125199099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199099" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199099">Kenny Lau (Apr 17 2018 at 14:31)</a>:</h4>
<p>so this is hardly well-founded</p>

<a name="125199108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199108" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199108">Kenny Lau (Apr 17 2018 at 14:31)</a>:</h4>
<p><span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> what do you think?</p>

<a name="125199232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199232" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199232">Johannes Hölzl (Apr 17 2018 at 14:34)</a>:</h4>
<p>it is not well-founded. but the non-symmetric reduction is well founded. as Mario mentioned the hard part is to proof the existence of diamonds</p>

<a name="125199240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199240" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199240">Kenny Lau (Apr 17 2018 at 14:34)</a>:</h4>
<p>would you have insights for the diamond?</p>

<a name="125199339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199339" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199339">Kenny Lau (Apr 17 2018 at 14:37)</a>:</h4>
<p><span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> maybe give me more time to prove the diamonds?</p>

<a name="125199382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199382" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199382">Kenny Lau (Apr 17 2018 at 14:38)</a>:</h4>
<p>I'll see if I can incorporate other theorems you proved</p>

<a name="125199384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199384" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199384">Kenny Lau (Apr 17 2018 at 14:38)</a>:</h4>
<p>i.e. free_group of empty is unit</p>

<a name="125199385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199385" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199385">Kenny Lau (Apr 17 2018 at 14:38)</a>:</h4>
<p>free_group of unit is int</p>

<a name="125199467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199467" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199467">Kenny Lau (Apr 17 2018 at 14:40)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">|</span> <span class="n">bnot</span> <span class="o">{</span><span class="n">x</span> <span class="n">b</span> <span class="n">L₁</span> <span class="n">L₂</span><span class="o">}</span> <span class="o">:</span> <span class="n">red</span> <span class="o">(</span><span class="n">L₁</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L₂</span><span class="o">)</span> <span class="o">(</span><span class="n">L₁</span> <span class="bp">++</span> <span class="n">L₂</span><span class="o">)</span>
</pre></div>

<a name="125199478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199478" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199478">Kenny Lau (Apr 17 2018 at 14:41)</a>:</h4>
<p>(I know this is essentially what you did, but I hadn't looked at your file when I came up with this, somehow)</p>

<a name="125199483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199483" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199483">Kenny Lau (Apr 17 2018 at 14:41)</a>:</h4>
<p>it's hard proving diamond even for one step bnot</p>

<a name="125199492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199492" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199492">Kenny Lau (Apr 17 2018 at 14:41)</a>:</h4>
<p>i.e. if L1 bnot L2, L1 bnot L3, then there is L4 such that L2 bnot L4 and L3 bnot L4</p>

<a name="125199555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199555" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199555">Kenny Lau (Apr 17 2018 at 14:42)</a>:</h4>
<p><span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> what do you think?</p>

<a name="125199581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199581">Johannes Hölzl (Apr 17 2018 at 14:43)</a>:</h4>
<p>I didn't look into this, yet. I will see if I find some time to understand it.</p>

<a name="125199632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199632" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199632">Kenny Lau (Apr 17 2018 at 14:44)</a>:</h4>
<p>I mean, don't put your freegroup into mathlib yet</p>

<a name="125199694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199694" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199694">Johannes Hölzl (Apr 17 2018 at 14:46)</a>:</h4>
<p>okay. but mathlib seams to be broken anyway currently (EDIT: sorry, mathlib is not broken)</p>

<a name="125199706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199706" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199706">Kenny Lau (Apr 17 2018 at 14:47)</a>:</h4>
<p><span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> which one would you use? <code>n+n</code>, <code>n*2</code>, <code>2*n</code></p>

<a name="125199708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199708" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199708">Kenny Lau (Apr 17 2018 at 14:47)</a>:</h4>
<p>for usability</p>

<a name="125199711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199711" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199711">Kenny Lau (Apr 17 2018 at 14:47)</a>:</h4>
<p>I think<code> 2*n</code> is maximum usability</p>

<a name="125199714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199714" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199714">Johannes Hölzl (Apr 17 2018 at 14:47)</a>:</h4>
<p>yes, looks good</p>

<a name="125199742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125199742" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125199742">Kenny Lau (Apr 17 2018 at 14:48)</a>:</h4>
<p>I just answered my own question</p>

<a name="125204798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125204798" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125204798">Kenny Lau (Apr 17 2018 at 17:03)</a>:</h4>
<p>I changed anew the definition:</p>

<a name="125204801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125204801" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125204801">Kenny Lau (Apr 17 2018 at 17:03)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">red</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">refl</span> <span class="o">{</span><span class="n">L</span><span class="o">}</span> <span class="o">:</span> <span class="n">red</span> <span class="n">L</span> <span class="n">L</span>
<span class="bp">|</span> <span class="n">trans_bnot</span> <span class="o">{</span><span class="n">L₁</span> <span class="n">L₂</span> <span class="n">L₃</span> <span class="n">x</span> <span class="n">b</span><span class="o">}</span> <span class="o">:</span> <span class="n">red</span> <span class="o">(</span><span class="n">L₁</span> <span class="bp">++</span> <span class="n">L₂</span><span class="o">)</span> <span class="n">L₃</span> <span class="bp">→</span> <span class="n">red</span> <span class="o">(</span><span class="n">L₁</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L₂</span><span class="o">)</span> <span class="n">L₃</span>
</pre></div>

<a name="125204804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125204804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125204804">Kenny Lau (Apr 17 2018 at 17:03)</a>:</h4>
<p>hopefully this will be more usable</p>

<a name="125204805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125204805" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125204805">Kenny Lau (Apr 17 2018 at 17:03)</a>:</h4>
<p>I still can't prove church-rosser though</p>

<a name="125204811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125204811" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125204811">Kenny Lau (Apr 17 2018 at 17:03)</a>:</h4>
<p>I suspect I shouldn't do church-rosser in one step</p>

<a name="125205016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205016" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205016">Kenny Lau (Apr 17 2018 at 17:09)</a>:</h4>
<p><a href="/user_uploads/3121/SwM98KnlFnJesSDVnNnSYJK1/church-rosser-1.png" target="_blank" title="church-rosser-1.png">church-rosser-1.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/SwM98KnlFnJesSDVnNnSYJK1/church-rosser-1.png" target="_blank" title="church-rosser-1.png"><img src="/user_uploads/3121/SwM98KnlFnJesSDVnNnSYJK1/church-rosser-1.png"></a></div>

<a name="125205188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205188" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205188">Kenny Lau (Apr 17 2018 at 17:13)</a>:</h4>
<p>and induction on the rightmost solid arrow amounts to doing this:</p>

<a name="125205234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205234" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205234">Kenny Lau (Apr 17 2018 at 17:14)</a>:</h4>
<p><a href="/user_uploads/3121/HY4gl0SQ4kObK_7zXbz_B1e3/church-rosser-1.png" target="_blank" title="church-rosser-1.png">church-rosser-1.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/HY4gl0SQ4kObK_7zXbz_B1e3/church-rosser-1.png" target="_blank" title="church-rosser-1.png"><img src="/user_uploads/3121/HY4gl0SQ4kObK_7zXbz_B1e3/church-rosser-1.png"></a></div>

<a name="125205244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205244" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205244">Kenny Lau (Apr 17 2018 at 17:14)</a>:</h4>
<p>where <code>wordIH</code> is the word given by induction hypothesis</p>

<a name="125205252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205252" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205252">Kenny Lau (Apr 17 2018 at 17:15)</a>:</h4>
<p>my new definition makes sure that it is decomposed into steps</p>

<a name="125205254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205254" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205254">Kenny Lau (Apr 17 2018 at 17:15)</a>:</h4>
<p>whereas the old definition splits the arrow randomly in half</p>

<a name="125205260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205260" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205260">Kenny Lau (Apr 17 2018 at 17:15)</a>:</h4>
<p>my new definition guarantees that it is split at the tail</p>

<a name="125205266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205266" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205266">Kenny Lau (Apr 17 2018 at 17:15)</a>:</h4>
<p>oh no, my new definition splits it at the head</p>

<a name="125205268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205268" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205268">Kenny Lau (Apr 17 2018 at 17:15)</a>:</h4>
<p>brb</p>

<a name="125205402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205402" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205402">Kenny Lau (Apr 17 2018 at 17:19)</a>:</h4>
<p>I mean, even if I corrected the definition, I still don't know how to build <code>word4</code> from <code>wordIH</code></p>

<a name="125205405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205405" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205405">Kenny Lau (Apr 17 2018 at 17:20)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> any insight?</p>

<a name="125205454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205454" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205454">Kevin Buzzard (Apr 17 2018 at 17:20)</a>:</h4>
<p>I told you how I'd do it ;-)</p>

<a name="125205456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205456" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205456">Kevin Buzzard (Apr 17 2018 at 17:20)</a>:</h4>
<p>I've not thought about the constructive approach</p>

<a name="125205458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205458" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205458">Kevin Buzzard (Apr 17 2018 at 17:20)</a>:</h4>
<p>I've not been following the conversation here.</p>

<a name="125205466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205466" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205466">Kevin Buzzard (Apr 17 2018 at 17:20)</a>:</h4>
<p>My daughter is sick so I've not had much time today, and what little time I did have I spent thinking about Spec(R) being compact</p>

<a name="125205520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205520" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205520">Kenny Lau (Apr 17 2018 at 17:22)</a>:</h4>
<p>you just need to look at my latest picture</p>

<a name="125205521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205521" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205521">Kenny Lau (Apr 17 2018 at 17:22)</a>:</h4>
<p>"step" means a one-step reduction, i.e. reducing <code>w1++[a,a^-1]++w2</code> to <code>w1++w2</code></p>

<a name="125205528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205528" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205528">Kenny Lau (Apr 17 2018 at 17:22)</a>:</h4>
<p><code>wordIH</code> is given, and I would like to construct <code>word4</code></p>

<a name="125205531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205531" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205531">Kenny Lau (Apr 17 2018 at 17:22)</a>:</h4>
<p>I might have to destruct the bottom right solid arrow</p>

<a name="125205601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205601" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205601">Kenny Lau (Apr 17 2018 at 17:24)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I'm astonished by the fact that I'm drawing a diagram to represent induction and that I'm drawing a diagram (the same diagram) to deal with free groups</p>

<a name="125205605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205605" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205605">Kenny Lau (Apr 17 2018 at 17:25)</a>:</h4>
<p>I've never looked into free group this deeply</p>

<a name="125205629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125205629" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125205629">Kenny Lau (Apr 17 2018 at 17:25)</a>:</h4>
<p>I'll destruct the arrow I mentioned and see what comes up</p>

<a name="125206778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125206778" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125206778">Mario Carneiro (Apr 17 2018 at 17:55)</a>:</h4>
<p>The construction of many step CR from one step CR is like building a checkerboard of diamonds</p>

<a name="125206830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125206830" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125206830">Kenny Lau (Apr 17 2018 at 17:56)</a>:</h4>
<p>oh and I've changed to the "correct" definition now</p>

<a name="125206833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125206833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125206833">Kenny Lau (Apr 17 2018 at 17:56)</a>:</h4>
<p>did you look at my picture?</p>

<a name="125206835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125206835" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125206835">Mario Carneiro (Apr 17 2018 at 17:56)</a>:</h4>
<p>You do induction on one of the <code>trans_rel</code> arguments to reduce to a line of diamonds, and then the other one to get one step out, one step back together</p>

<a name="125206861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125206861" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125206861">Mario Carneiro (Apr 17 2018 at 17:57)</a>:</h4>
<p>You want to use the IH to move the base point of the bottom diamond to wordIH</p>

<a name="125206878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125206878" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125206878">Kenny Lau (Apr 17 2018 at 17:57)</a>:</h4>
<p>base point?</p>

<a name="125206917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125206917" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125206917">Mario Carneiro (Apr 17 2018 at 17:58)</a>:</h4>
<p>You have word1''' -&gt; word3 and word1''' -&gt; wordIH, so wordIH -&gt; word4 &lt;- word3 for some word4</p>

<a name="125206925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125206925" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125206925">Kenny Lau (Apr 17 2018 at 17:58)</a>:</h4>
<p>right, that's what I intend to do also</p>

<a name="125206933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125206933" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125206933">Kenny Lau (Apr 17 2018 at 17:58)</a>:</h4>
<p>I proved transitivity independently</p>

<a name="125206942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125206942" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125206942">Kenny Lau (Apr 17 2018 at 17:58)</a>:</h4>
<p>so I only need to focus on that diamond</p>

<a name="125206947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125206947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125206947">Kenny Lau (Apr 17 2018 at 17:58)</a>:</h4>
<p>and destruct the bottom right solid arrow</p>

<a name="125206953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125206953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125206953">Kenny Lau (Apr 17 2018 at 17:58)</a>:</h4>
<p>right?</p>

<a name="125206968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125206968" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125206968">Mario Carneiro (Apr 17 2018 at 17:59)</a>:</h4>
<p>I'm not sure I follod</p>

<a name="125206978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125206978" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125206978">Mario Carneiro (Apr 17 2018 at 17:59)</a>:</h4>
<p>Do you still have the three theorems <code>church_rosser_(1,t1,t)</code> or something similar?</p>

<a name="125207035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125207035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125207035">Kenny Lau (Apr 17 2018 at 18:00)</a>:</h4>
<p>oh I am not using your definition now...</p>

<a name="125207049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125207049" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125207049">Mario Carneiro (Apr 17 2018 at 18:00)</a>:</h4>
<p>but do you have the thing with transitive closure of one step reduction</p>

<a name="125207067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125207067" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125207067">Kenny Lau (Apr 17 2018 at 18:01)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">red</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">refl</span> <span class="o">{</span><span class="n">L</span><span class="o">}</span> <span class="o">:</span> <span class="n">red</span> <span class="n">L</span> <span class="n">L</span>
<span class="bp">|</span> <span class="n">trans_bnot</span> <span class="o">{</span><span class="n">L₁</span> <span class="n">L₂</span> <span class="n">L₃</span> <span class="n">x</span> <span class="n">b</span><span class="o">}</span> <span class="o">:</span> <span class="n">red</span> <span class="n">L₁</span> <span class="o">(</span><span class="n">L₂</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L₃</span><span class="o">)</span> <span class="bp">→</span> <span class="n">red</span> <span class="n">L₁</span> <span class="o">(</span><span class="n">L₂</span> <span class="bp">++</span> <span class="n">L₃</span><span class="o">)</span>

<span class="kn">lemma</span> <span class="n">red</span><span class="bp">.</span><span class="n">trans</span> <span class="o">{</span><span class="n">L₁</span> <span class="n">L₂</span> <span class="n">L₃</span><span class="o">}</span> <span class="o">(</span><span class="n">H12</span> <span class="o">:</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L₁</span> <span class="n">L₂</span><span class="o">)</span> <span class="o">(</span><span class="n">H23</span> <span class="o">:</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L₂</span> <span class="n">L₃</span><span class="o">)</span> <span class="o">:</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L₁</span> <span class="n">L₃</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">induction</span> <span class="n">H23</span> <span class="k">with</span> <span class="n">L1</span> <span class="n">L1</span> <span class="n">L2</span> <span class="n">L3</span> <span class="n">x</span> <span class="n">b</span> <span class="n">H</span> <span class="n">ih</span> <span class="n">generalizing</span> <span class="n">L₁</span><span class="o">,</span>
  <span class="n">case</span> <span class="n">red</span><span class="bp">.</span><span class="n">refl</span>
  <span class="o">{</span> <span class="n">assumption</span> <span class="o">},</span>
  <span class="n">case</span> <span class="n">red</span><span class="bp">.</span><span class="n">trans_bnot</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">red</span><span class="bp">.</span><span class="n">trans_bnot</span> <span class="o">(</span><span class="n">ih</span> <span class="n">H12</span><span class="o">)</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>

<a name="125207071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125207071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125207071">Kenny Lau (Apr 17 2018 at 18:01)</a>:</h4>
<p>this is what i'm using</p>

<a name="125207086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125207086" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125207086">Kenny Lau (Apr 17 2018 at 18:01)</a>:</h4>
<p>and unfinished church rosser:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">church_rosser</span> <span class="o">{</span><span class="n">L₁</span> <span class="n">L₂</span> <span class="n">L₃</span><span class="o">}</span> <span class="o">(</span><span class="n">H12</span> <span class="o">:</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L₁</span> <span class="n">L₂</span><span class="o">)</span> <span class="o">(</span><span class="n">H13</span><span class="o">:</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L₁</span> <span class="n">L₃</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="n">L₄</span><span class="o">,</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L₂</span> <span class="n">L₄</span> <span class="bp">∧</span> <span class="n">red</span> <span class="n">α</span> <span class="n">L₃</span> <span class="n">L₄</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">induction</span> <span class="n">H12</span> <span class="k">with</span> <span class="n">L1</span> <span class="n">L1</span> <span class="n">L2</span> <span class="n">L3</span> <span class="n">x1</span> <span class="n">b1</span> <span class="n">H1</span> <span class="n">ih1</span> <span class="n">generalizing</span> <span class="n">L₃</span><span class="o">,</span>
  <span class="n">case</span> <span class="n">red</span><span class="bp">.</span><span class="n">refl</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="bp">⟨</span><span class="n">L₃</span><span class="o">,</span> <span class="n">H13</span><span class="o">,</span> <span class="n">red</span><span class="bp">.</span><span class="n">refl</span> <span class="bp">_⟩</span> <span class="o">},</span>
  <span class="n">case</span> <span class="n">red</span><span class="bp">.</span><span class="n">trans_bnot</span>
  <span class="o">{</span> <span class="n">specialize</span> <span class="n">ih1</span> <span class="n">H13</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">ih1</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">L₄</span><span class="o">,</span> <span class="n">H24</span><span class="o">,</span> <span class="n">H34</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">revert</span> <span class="n">H24</span><span class="o">,</span>
    <span class="n">generalize</span> <span class="n">HL23</span> <span class="o">:</span> <span class="n">L2</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x1</span><span class="o">,</span> <span class="n">b1</span><span class="o">)</span> <span class="bp">::</span> <span class="o">(</span><span class="n">x1</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b1</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L3</span> <span class="bp">=</span> <span class="n">L23</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">H24</span><span class="o">,</span>
    <span class="n">induction</span> <span class="n">H24</span> <span class="k">with</span> <span class="n">L4</span> <span class="n">L4</span> <span class="n">L5</span> <span class="n">L6</span> <span class="n">x2</span> <span class="n">b2</span> <span class="n">H2</span> <span class="n">ih2</span><span class="o">,</span>
    <span class="n">case</span> <span class="n">red</span><span class="bp">.</span><span class="n">refl</span>
    <span class="o">{</span> <span class="n">subst</span> <span class="n">HL23</span><span class="o">,</span>
      <span class="n">exact</span> <span class="bp">⟨_</span><span class="o">,</span> <span class="n">red</span><span class="bp">.</span><span class="n">refl</span> <span class="bp">_</span><span class="o">,</span> <span class="n">red</span><span class="bp">.</span><span class="n">trans_bnot</span> <span class="n">H34</span><span class="bp">⟩</span> <span class="o">},</span>
    <span class="n">case</span> <span class="n">red</span><span class="bp">.</span><span class="n">trans_bnot</span>
    <span class="o">{</span> <span class="n">subst</span> <span class="n">HL23</span><span class="o">,</span>
      <span class="n">admit</span> <span class="o">}</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>

<a name="125207167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125207167" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125207167">Mario Carneiro (Apr 17 2018 at 18:03)</a>:</h4>
<p>I think that trying to do it all at once will be harder, because then you have to commute a whole sequence of reductions past another</p>

<a name="125207318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125207318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125207318">Mario Carneiro (Apr 17 2018 at 18:06)</a>:</h4>
<p>With one step reduction, the core of the proof is this: Suppose L -&gt; L1 and L -&gt; L2. Then L = A1 ++ [(x,b), (x, !b)] ++ A2 = B1 ++ [(y,c),(y,!c)] ++ B2 and L1 = A1 ++ A2, L2 = B1 ++ B2. There are three cases depending on whether |A1| = |B1|, |A1| = |B1| +- 1, or | |A1| - |B1| | &gt;= 2, but in each case the results are either equal or can be put together with a single step on each side.</p>

<a name="125207342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125207342" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125207342">Kenny Lau (Apr 17 2018 at 18:07)</a>:</h4>
<p>that's the hardest part of the theorem</p>

<a name="125207348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125207348" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125207348">Mario Carneiro (Apr 17 2018 at 18:07)</a>:</h4>
<p>So I guess you want <code>red</code> to be reflexive but not transitive, and then take its transitive closure to put the diamonds together</p>

<a name="125207393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125207393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125207393">Kenny Lau (Apr 17 2018 at 18:08)</a>:</h4>
<p>I don't think I need to change my definition</p>

<a name="125207524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125207524" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125207524">Mario Carneiro (Apr 17 2018 at 18:11)</a>:</h4>
<p>One word of warning: the confluence property B &lt;- A -&gt; C implies \ex D s.t. B -&gt;* D &lt;-* C does <em>not</em> imply church rosser in general. It does if you have strong normalization, but that's a harder proof. That's why I'm wary of building transitivity into the -&gt; relation</p>

<a name="125207545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125207545" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125207545">Kenny Lau (Apr 17 2018 at 18:11)</a>:</h4>
<p>isn't that church rosser?</p>

<a name="125207550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125207550" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125207550">Mario Carneiro (Apr 17 2018 at 18:11)</a>:</h4>
<p>Note the location of the stars</p>

<a name="125207554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125207554" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125207554">Kenny Lau (Apr 17 2018 at 18:11)</a>:</h4>
<p>what are those?</p>

<a name="125207557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125207557" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125207557">Mario Carneiro (Apr 17 2018 at 18:11)</a>:</h4>
<p>one step out, many steps back in</p>

<a name="125207595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125207595" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125207595">Mario Carneiro (Apr 17 2018 at 18:12)</a>:</h4>
<p>that's notation for transitive closure</p>

<a name="125207598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125207598" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125207598">Kenny Lau (Apr 17 2018 at 18:12)</a>:</h4>
<p>hmm</p>

<a name="125224401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125224401" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125224401">Kenny Lau (Apr 18 2018 at 00:13)</a>:</h4>
<blockquote>
<p>With one step reduction, the core of the proof is this: Suppose L -&gt; L1 and L -&gt; L2. Then L = A1 ++ [(x,b), (x, !b)] ++ A2 = B1 ++ [(y,c),(y,!c)] ++ B2 and L1 = A1 ++ A2, L2 = B1 ++ B2. There are three cases depending on whether |A1| = |B1|, |A1| = |B1| +- 1, or | |A1| - |B1| | &gt;= 2, but in each case the results are either equal or can be put together with a single step on each side.</p>
</blockquote>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> what is the best way to prove that there are three cases?</p>

<a name="125224462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125224462" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125224462">Mario Carneiro (Apr 18 2018 at 00:14)</a>:</h4>
<p><code>wlog</code> length A1 &lt;= length B1</p>

<a name="125224549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125224549" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125224549">Kenny Lau (Apr 18 2018 at 00:17)</a>:</h4>
<p>aha, i never tried wlog before</p>

<a name="125224592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125224592" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125224592">Mario Carneiro (Apr 18 2018 at 00:18)</a>:</h4>
<p>me neither, but this looks like a good use case</p>

<a name="125224731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125224731" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125224731">Kenny Lau (Apr 18 2018 at 00:23)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">partition</span> <span class="o">{</span><span class="n">L1</span> <span class="n">L2</span> <span class="n">L3</span> <span class="n">L4</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)}</span> <span class="o">{</span><span class="n">x1</span> <span class="n">b1</span> <span class="n">x2</span> <span class="n">b2</span><span class="o">}</span>
  <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">L1</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x1</span><span class="o">,</span> <span class="n">b1</span><span class="o">)</span> <span class="bp">::</span> <span class="o">(</span><span class="n">x1</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b1</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L2</span> <span class="bp">=</span> <span class="n">L3</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x2</span><span class="o">,</span> <span class="n">b2</span><span class="o">)</span> <span class="bp">::</span> <span class="o">(</span><span class="n">x2</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b2</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L4</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">L1</span> <span class="bp">=</span> <span class="n">L3</span> <span class="bp">∧</span> <span class="n">x1</span> <span class="bp">=</span> <span class="n">x2</span> <span class="bp">∧</span> <span class="n">b1</span> <span class="bp">=</span> <span class="n">b2</span> <span class="bp">∧</span> <span class="n">L2</span> <span class="bp">=</span> <span class="n">L4</span><span class="o">)</span> <span class="bp">∨</span>
  <span class="o">(</span><span class="n">L1</span> <span class="bp">=</span> <span class="n">L3</span> <span class="bp">++</span> <span class="o">[(</span><span class="n">x2</span><span class="o">,</span> <span class="n">b2</span><span class="o">)]</span> <span class="bp">∧</span> <span class="n">x1</span> <span class="bp">=</span> <span class="n">x2</span> <span class="bp">∧</span> <span class="n">b1</span> <span class="bp">=</span> <span class="n">bnot</span> <span class="n">b2</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">x1</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b1</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L2</span> <span class="bp">=</span> <span class="n">L4</span><span class="o">)</span> <span class="bp">∨</span>
  <span class="o">(</span><span class="n">L1</span> <span class="bp">++</span> <span class="o">[(</span><span class="n">x1</span><span class="o">,</span> <span class="n">b1</span><span class="o">)]</span> <span class="bp">=</span> <span class="n">L3</span> <span class="bp">∧</span> <span class="n">x1</span> <span class="bp">=</span> <span class="n">x2</span> <span class="bp">∧</span> <span class="n">b1</span> <span class="bp">=</span> <span class="n">bnot</span> <span class="n">b2</span> <span class="bp">∧</span> <span class="n">L2</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x2</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b2</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L4</span><span class="o">)</span> <span class="bp">∨</span>
  <span class="o">(</span><span class="bp">∃</span> <span class="n">L5</span> <span class="n">L6</span><span class="o">,</span> <span class="n">L1</span> <span class="bp">=</span> <span class="n">L3</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x2</span><span class="o">,</span> <span class="n">b2</span><span class="o">)</span> <span class="bp">::</span> <span class="o">(</span><span class="n">x2</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b2</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L5</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">x1</span><span class="o">,</span> <span class="n">b1</span><span class="o">)</span> <span class="bp">::</span> <span class="o">(</span><span class="n">x1</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b1</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L2</span> <span class="bp">=</span> <span class="n">L6</span><span class="o">)</span> <span class="bp">∨</span>
  <span class="o">(</span><span class="bp">∃</span> <span class="n">L5</span> <span class="n">L6</span><span class="o">,</span> <span class="n">L1</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x1</span><span class="o">,</span> <span class="n">b1</span><span class="o">)</span> <span class="bp">::</span> <span class="o">(</span><span class="n">x1</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b1</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L5</span> <span class="bp">=</span> <span class="n">L3</span> <span class="bp">∧</span> <span class="n">L2</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x2</span><span class="o">,</span> <span class="n">b2</span><span class="o">)</span> <span class="bp">::</span> <span class="o">(</span><span class="n">x2</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b2</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L6</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">admit</span>
<span class="kn">end</span>
</pre></div>

<a name="125224732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125224732" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125224732">Kenny Lau (Apr 18 2018 at 00:23)</a>:</h4>
<p>how is this?</p>

<a name="125224734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125224734" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125224734">Kenny Lau (Apr 18 2018 at 00:23)</a>:</h4>
<p>I don't think <code>length</code> is very usable</p>

<a name="125224774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125224774" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125224774">Kenny Lau (Apr 18 2018 at 00:24)</a>:</h4>
<p>it's obvious to mathematicians, but Lean doesn't really know how to count well</p>

<a name="125224776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125224776" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125224776">Kenny Lau (Apr 18 2018 at 00:24)</a>:</h4>
<p>it's just translating one inductive type into another</p>

<a name="125224834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125224834" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125224834">Mario Carneiro (Apr 18 2018 at 00:26)</a>:</h4>
<p>You can simplify this by assuming <code>length L1 &lt;= length L3</code>, and then two of the cases can be proven impossible (it's not hard to show that if L1 = L3 ++ [(x2, b2)] then length L3 &lt; length L1, and that's all you need)</p>

<a name="125224847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125224847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125224847">Kenny Lau (Apr 18 2018 at 00:27)</a>:</h4>
<p>are you saying I don't need induction?</p>

<a name="125224850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125224850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125224850">Mario Carneiro (Apr 18 2018 at 00:27)</a>:</h4>
<p>induction on what? To prove partition?</p>

<a name="125224851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125224851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125224851">Kenny Lau (Apr 18 2018 at 00:27)</a>:</h4>
<p>right</p>

<a name="125224856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125224856" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125224856">Kenny Lau (Apr 18 2018 at 00:28)</a>:</h4>
<p>on the lists</p>

<a name="125224895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125224895" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125224895">Mario Carneiro (Apr 18 2018 at 00:28)</a>:</h4>
<p>You can use <code>append_inj</code> to use length information to get the decomposition</p>

<a name="125224905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125224905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125224905">Mario Carneiro (Apr 18 2018 at 00:29)</a>:</h4>
<p>But you can also prove it by induction on one of the lists (generalizing everything else)</p>

<a name="125224956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125224956" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125224956">Kenny Lau (Apr 18 2018 at 00:30)</a>:</h4>
<p>I think I would need more lemmas than <code>append_inj</code> if I want to avoid induction completely</p>

<a name="125224961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125224961" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125224961">Kenny Lau (Apr 18 2018 at 00:30)</a>:</h4>
<p><code>append_inj</code> doesn't seem to help in the case where <code>|A.length - B.length| &gt;= 2</code></p>

<a name="125225016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225016" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225016">Mario Carneiro (Apr 18 2018 at 00:32)</a>:</h4>
<p>hm, you could use <code>take_drop</code> but I agree it is probably messier than induction on the list</p>

<a name="125225031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225031">Kenny Lau (Apr 18 2018 at 00:33)</a>:</h4>
<p>I think a useful lemma if I want to avoid length and induction completely is <code>A++B=C++D -&gt; (exists F, A=C++F) or (exists F, A++F=C)</code></p>

<a name="125225036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225036" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225036">Mario Carneiro (Apr 18 2018 at 00:33)</a>:</h4>
<p>I think you can get that by using <code>prefix</code> appropriately</p>

<a name="125225079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225079" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225079">Kenny Lau (Apr 18 2018 at 00:34)</a>:</h4>
<p>I have never heard of prefix before. I've just learnt something new lol</p>

<a name="125225146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225146" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225146">Kenny Lau (Apr 18 2018 at 00:36)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I'm not seeing anything useful from the prefix lemmas</p>

<a name="125225157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225157">Mario Carneiro (Apr 18 2018 at 00:37)</a>:</h4>
<p>Here's what I'm thinking:</p>
<div class="codehilite"><pre><span></span>theorem prefix_of_prefix_length_le {l₁ l₂ l₃ : list α} : l₁ &lt;+: l₃ → l₂ &lt;+: l₃ → length l₁ ≤ length l₂ → l₁ &lt;+: l₂ :=
sorry
</pre></div>

<a name="125225161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225161" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225161">Kenny Lau (Apr 18 2018 at 00:37)</a>:</h4>
<p>let's just focus on my lemma</p>

<a name="125225163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225163" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225163">Mario Carneiro (Apr 18 2018 at 00:37)</a>:</h4>
<p>and from that you get the version with the or</p>

<a name="125225164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225164" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225164">Kenny Lau (Apr 18 2018 at 00:38)</a>:</h4>
<p>aha</p>

<a name="125225204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225204" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225204">Kenny Lau (Apr 18 2018 at 00:38)</a>:</h4>
<p>totality of prefix descends from totality of natural numbers</p>

<a name="125225207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225207" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225207">Mario Carneiro (Apr 18 2018 at 00:38)</a>:</h4>
<p>exactly</p>

<a name="125225210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225210" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225210">Kenny Lau (Apr 18 2018 at 00:38)</a>:</h4>
<p>that's a very convoluted way of doing stuff</p>

<a name="125225213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225213" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225213">Kenny Lau (Apr 18 2018 at 00:38)</a>:</h4>
<p>I would rather use induction to prove my lemma</p>

<a name="125225271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225271" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225271">Kenny Lau (Apr 18 2018 at 00:40)</a>:</h4>
<p>disregarding this</p>

<a name="125225274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225274" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225274">Kenny Lau (Apr 18 2018 at 00:40)</a>:</h4>
<p>how would you prove your lemma</p>

<a name="125225622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225622" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225622">Mario Carneiro (Apr 18 2018 at 00:53)</a>:</h4>
<p>working on it</p>

<a name="125225623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225623" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225623">Kenny Lau (Apr 18 2018 at 00:53)</a>:</h4>
<p>me too</p>

<a name="125225624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225624" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225624">Kenny Lau (Apr 18 2018 at 00:53)</a>:</h4>
<p>I think I can do that, thanks</p>

<a name="125225729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225729" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225729">Mario Carneiro (Apr 18 2018 at 00:57)</a>:</h4>
<div class="codehilite"><pre><span></span>theorem prefix_of_prefix_length_le : ∀ {l₁ l₂ l₃ : list α},
 l₁ &lt;+: l₃ → l₂ &lt;+: l₃ → length l₁ ≤ length l₂ → l₁ &lt;+: l₂
| []      l₂ l₃ h₁ h₂ _ := nil_prefix _
| (a::l₁) (b::l₂) _ ⟨r₁, rfl⟩ ⟨r₂, e⟩ ll := begin
  injection e with _ e&#39;, subst b,
  rcases prefix_of_prefix_length_le ⟨_, rfl⟩ ⟨_, e&#39;⟩
    (le_of_succ_le_succ ll) with ⟨r₃, rfl⟩,
  exact ⟨r₃, rfl⟩
end

theorem prefix_or_prefix_of_prefix {l₁ l₂ l₃ : list α}
 (h₁ : l₁ &lt;+: l₃) (h₂ : l₂ &lt;+: l₃) : l₁ &lt;+: l₂ ∨ l₂ &lt;+: l₁ :=
(le_total (length l₁) (length l₂)).imp
  (prefix_of_prefix_length_le h₁ h₂)
  (prefix_of_prefix_length_le h₂ h₁)
</pre></div>

<a name="125225731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225731" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225731">Kenny Lau (Apr 18 2018 at 00:57)</a>:</h4>
<p>oh nice thanks</p>

<a name="125225737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225737" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225737">Kenny Lau (Apr 18 2018 at 00:57)</a>:</h4>
<p>who is <code>nil_prefix</code>?</p>

<a name="125225740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225740">Mario Carneiro (Apr 18 2018 at 00:57)</a>:</h4>
<div class="codehilite"><pre><span></span>theorem nil_prefix (l : list α) : [] &lt;+: l := ⟨l, rfl⟩
</pre></div>

<a name="125225742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225742" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225742">Kenny Lau (Apr 18 2018 at 00:58)</a>:</h4>
<p>did you just make it up?</p>

<a name="125225772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225772">Mario Carneiro (Apr 18 2018 at 00:58)</a>:</h4>
<p>yes</p>

<a name="125225787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225787" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225787">Kenny Lau (Apr 18 2018 at 00:58)</a>:</h4>
<p>thanks</p>

<a name="125225936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125225936" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125225936">Kenny Lau (Apr 18 2018 at 01:03)</a>:</h4>
<p>does <code>A++B=A++C -&gt; B=C</code> have a name?</p>

<a name="125226008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125226008" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125226008">Mario Carneiro (Apr 18 2018 at 01:05)</a>:</h4>
<p><code>append_right_cancel</code></p>

<a name="125226009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125226009" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125226009">Kenny Lau (Apr 18 2018 at 01:05)</a>:</h4>
<p>oh, didn't think of cancel</p>

<a name="125226011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125226011" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125226011">Kenny Lau (Apr 18 2018 at 01:05)</a>:</h4>
<p>oh, and do you know that the lists form a monoid?</p>

<a name="125226013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125226013" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125226013">Kenny Lau (Apr 18 2018 at 01:05)</a>:</h4>
<p>by "you" I of course mean "Lean"</p>

<a name="125226137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125226137" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125226137">Mario Carneiro (Apr 18 2018 at 01:09)</a>:</h4>
<p>No, although all the lemmas are there, because I don't think we want <code>*</code> to mean append on lists</p>

<a name="125226138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125226138" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125226138">Kenny Lau (Apr 18 2018 at 01:09)</a>:</h4>
<p>I see</p>

<a name="125226191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125226191" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125226191">Mario Carneiro (Apr 18 2018 at 01:10)</a>:</h4>
<p>That was one of the main motivations Leo had for introducing the whole "notation free" algebraic hierarchy like <code>is_associative</code></p>

<a name="125226198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125226198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125226198">Kenny Lau (Apr 18 2018 at 01:11)</a>:</h4>
<p>I'm not aware of what you're talking about</p>

<a name="125226205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125226205" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125226205">Mario Carneiro (Apr 18 2018 at 01:11)</a>:</h4>
<p>look at <code>is_associative</code> and friends</p>

<a name="125226208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125226208" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125226208">Kenny Lau (Apr 18 2018 at 01:12)</a>:</h4>
<p>where is it used?</p>

<a name="125226250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125226250" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125226250">Mario Carneiro (Apr 18 2018 at 01:12)</a>:</h4>
<p>that's probably what lean 4 algebraic hierarchy will look like</p>

<a name="125226258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125226258" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125226258">Mario Carneiro (Apr 18 2018 at 01:12)</a>:</h4>
<p>I'm not sold on it yet, and I don't think the tool support is there yet, so I'm sticking to "old style" structures like <code>monoid</code></p>

<a name="125226264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125226264" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125226264">Kenny Lau (Apr 18 2018 at 01:13)</a>:</h4>
<p>oh</p>

<a name="125226267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125226267" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125226267">Mario Carneiro (Apr 18 2018 at 01:13)</a>:</h4>
<p>but it gets used in some core lean stuff like <code>rb_map</code></p>

<a name="125226269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125226269" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125226269">Kenny Lau (Apr 18 2018 at 01:13)</a>:</h4>
<p>another thing I've never heard of :D</p>

<a name="125226857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125226857" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125226857">Kenny Lau (Apr 18 2018 at 01:33)</a>:</h4>
<p>what's the fastest way to destruct <code>L5 ++ L6 = [(x1, bnot b1)]</code>?</p>

<a name="125226907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125226907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125226907">Kenny Lau (Apr 18 2018 at 01:34)</a>:</h4>
<p>cases L5, lol</p>

<a name="125228253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125228253" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125228253">Kenny Lau (Apr 18 2018 at 02:21)</a>:</h4>
<p>I proved church rosser!!</p>

<a name="125228296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125228296" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125228296">Kenny Lau (Apr 18 2018 at 02:22)</a>:</h4>
<p>thanks for your help all along <span class="user-mention" data-user-id="110049">@Mario Carneiro</span></p>

<a name="125228390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125228390" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125228390">Mario Carneiro (Apr 18 2018 at 02:24)</a>:</h4>
<p>That theorem can of course also be used to show the existence and uniqueness of reduced words</p>

<a name="125228394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125228394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125228394">Kenny Lau (Apr 18 2018 at 02:24)</a>:</h4>
<p>right, since I proved that red is decreasing in length</p>

<a name="125228481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125228481" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125228481">Mario Carneiro (Apr 18 2018 at 02:26)</a>:</h4>
<p>You need decidable equality for it to be constructive, but you can just remove matching pairs until you can't find any more, and that will be the unique representative of its equivalence class by church rosser</p>

<a name="125228558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125228558" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125228558">Mario Carneiro (Apr 18 2018 at 02:29)</a>:</h4>
<p>Here's a fun trick showing that the converse also holds: assuming [(x,tt), (y,ff)] has a reduced word representative, if it has length zero then x=y, and if it has length 2 then x != y</p>

<a name="125228564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125228564" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125228564">Kenny Lau (Apr 18 2018 at 02:29)</a>:</h4>
<p>aha</p>

<a name="125228567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125228567" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125228567">Kenny Lau (Apr 18 2018 at 02:30)</a>:</h4>
<p>nice trick</p>

<a name="125231206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125231206" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125231206">Kenny Lau (Apr 18 2018 at 03:45)</a>:</h4>
<div class="codehilite"><pre><span></span>inductive red : list (α × bool) → list (α × bool) → Prop
| refl {L} : red L L
| trans_bnot {L₁ L₂ L₃ x b} : red L₁ (L₂ ++ (x, b) :: (x, bnot b) :: L₃) → red L₁ (L₂ ++ L₃)
</pre></div>

<a name="125231212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125231212" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125231212">Kenny Lau (Apr 18 2018 at 03:45)</a>:</h4>
<p>how do I use the equation compiler to destruct this?</p>

<a name="125232619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125232619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125232619">Mario Carneiro (Apr 18 2018 at 04:30)</a>:</h4>
<div class="codehilite"><pre><span></span>theorem T : ∀ L₁ L₂, red α L₁ L₂ → true
| L _ (red.refl _) := trivial
| _ _ (@red.trans_bnot _ L₁ L₂ L₃ x b IH) := trivial
</pre></div>

<a name="125232627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125232627" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125232627">Kenny Lau (Apr 18 2018 at 04:31)</a>:</h4>
<p>oh, I get error because I didn't type <code>L</code>?</p>

<a name="125232629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125232629" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125232629">Mario Carneiro (Apr 18 2018 at 04:31)</a>:</h4>
<p>no, without the L you just get a placeholder name</p>

<a name="125232669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125232669" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125232669">Mario Carneiro (Apr 18 2018 at 04:32)</a>:</h4>
<p>You can also use <code>(@red.refl _ L)</code> to name the parameters</p>

<a name="125232671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125232671" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125232671">Kenny Lau (Apr 18 2018 at 04:32)</a>:</h4>
<p>then why do I always get error lol</p>

<a name="125232674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125232674" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125232674">Kenny Lau (Apr 18 2018 at 04:32)</a>:</h4>
<p>oh and I can't use recursion because this is a Prop, right</p>

<a name="125232675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125232675" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125232675">Mario Carneiro (Apr 18 2018 at 04:32)</a>:</h4>
<p>You can use recursion</p>

<a name="125232681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125232681" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125232681">Kenny Lau (Apr 18 2018 at 04:33)</a>:</h4>
<p>but I would have to provide custom well-founded proof?</p>

<a name="125232682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125232682" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125232682">Mario Carneiro (Apr 18 2018 at 04:33)</a>:</h4>
<p>but you can't generate a data type</p>

<a name="125232684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125232684" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125232684">Mario Carneiro (Apr 18 2018 at 04:33)</a>:</h4>
<p>maybe that's what you meant</p>

<a name="125232743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125232743" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125232743">Mario Carneiro (Apr 18 2018 at 04:34)</a>:</h4>
<p>it doesn't work for wellfounded either because the inductive type has two constructors, so there are multiple ways to prove a <code>red</code> statement</p>

<a name="125232802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125232802" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125232802">Kenny Lau (Apr 18 2018 at 04:36)</a>:</h4>
<p><a href="https://gist.github.com/johoelzl/7e73916f39e3acef8796bfb6c089a9c9" target="_blank" title="https://gist.github.com/johoelzl/7e73916f39e3acef8796bfb6c089a9c9">https://gist.github.com/johoelzl/7e73916f39e3acef8796bfb6c089a9c9</a></p>

<a name="125232806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125232806" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125232806">Kenny Lau (Apr 18 2018 at 04:36)</a>:</h4>
<p>this is interesting</p>

<a name="125232811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125232811" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125232811">Kenny Lau (Apr 18 2018 at 04:37)</a>:</h4>
<p>"map" and "prod" together give the UMP</p>

<a name="125232812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125232812" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125232812">Kenny Lau (Apr 18 2018 at 04:37)</a>:</h4>
<p>but I can also prove "map" and "prod" using UMP</p>

<a name="125232813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125232813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125232813">Kenny Lau (Apr 18 2018 at 04:37)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> what would you prefer? or should I prove all three?</p>

<a name="125233054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125233054" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125233054">Mario Carneiro (Apr 18 2018 at 04:44)</a>:</h4>
<p>I think you should state the UMP just for "completeness", but I expect <code>map</code> and <code>prod</code> and their lemmas are the more useful version</p>

<a name="125233057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125233057" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125233057">Kenny Lau (Apr 18 2018 at 04:44)</a>:</h4>
<p>not just for completeness</p>

<a name="125233058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125233058" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125233058">Kenny Lau (Apr 18 2018 at 04:44)</a>:</h4>
<p>I'll actually prove map and prod from UMP</p>

<a name="125233061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125233061" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125233061">Kenny Lau (Apr 18 2018 at 04:44)</a>:</h4>
<p>then I don't need any induction again</p>

<a name="125233064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125233064" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125233064">Mario Carneiro (Apr 18 2018 at 04:44)</a>:</h4>
<p>The definitions of map and prod are constructive and done reasonably, I wouldn't want to make it more complicated</p>

<a name="125233072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125233072" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125233072">Kenny Lau (Apr 18 2018 at 04:45)</a>:</h4>
<p>everything in my file is constructive</p>

<a name="125233089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125233089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125233089">Kenny Lau (Apr 18 2018 at 04:45)</a>:</h4>
<p>but you're right, I shouldn't use UMP to define map</p>

<a name="125233094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125233094" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125233094">Mario Carneiro (Apr 18 2018 at 04:45)</a>:</h4>
<p>I mean, you can compute with <code>map</code> there. Don't make the program slower</p>

<a name="125233097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125233097" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125233097">Kenny Lau (Apr 18 2018 at 04:45)</a>:</h4>
<p>oh</p>

<a name="125233344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125233344" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125233344">Kenny Lau (Apr 18 2018 at 04:53)</a>:</h4>
<div class="codehilite"><pre><span></span>instance is_group_hom.id [group α] : is_group_hom (@id α) :=
λ _ _, rfl
</pre></div>

<a name="125233383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125233383" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125233383">Kenny Lau (Apr 18 2018 at 04:54)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> could you add this to mathlib?</p>

<a name="125233403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125233403" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125233403">Mario Carneiro (Apr 18 2018 at 04:55)</a>:</h4>
<p>K</p>

<a name="125233430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125233430" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125233430">Kenny Lau (Apr 18 2018 at 04:56)</a>:</h4>
<p>obrigad</p>

<a name="125235275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235275" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235275">Kenny Lau (Apr 18 2018 at 05:59)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> <code>prod</code> is really a specialization of the UMP though</p>

<a name="125235287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235287">Kenny Lau (Apr 18 2018 at 05:59)</a>:</h4>
<p>I mean, the definition would be identical</p>

<a name="125235290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235290" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235290">Kenny Lau (Apr 18 2018 at 05:59)</a>:</h4>
<p>defining <code>prod</code> using the UMP won't make anything slower</p>

<a name="125235342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235342" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235342">Mario Carneiro (Apr 18 2018 at 06:01)</a>:</h4>
<p>what is your def of ump?</p>

<a name="125235346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235346" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235346">Kenny Lau (Apr 18 2018 at 06:01)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">to_group</span><span class="bp">.</span><span class="n">aux</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="n">β</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">L</span><span class="o">,</span> <span class="n">list</span><span class="bp">.</span><span class="n">prod</span> <span class="err">$</span> <span class="n">L</span><span class="bp">.</span><span class="n">map</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">bool</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">x</span><span class="bp">.</span><span class="mi">2</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="bp">.</span><span class="mi">1</span><span class="o">)</span><span class="bp">⁻¹</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="bp">.</span><span class="mi">1</span><span class="o">)</span>

<span class="n">def</span> <span class="n">to_group</span> <span class="o">:</span> <span class="n">free_group</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span> <span class="o">:=</span>
<span class="n">quotient</span><span class="bp">.</span><span class="n">lift</span> <span class="o">(</span><span class="n">to_group</span><span class="bp">.</span><span class="n">aux</span> <span class="n">f</span><span class="o">)</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">L₁</span> <span class="n">L₂</span> <span class="bp">⟨</span><span class="n">L₃</span><span class="o">,</span> <span class="n">H13</span><span class="o">,</span> <span class="n">H23</span><span class="bp">⟩</span><span class="o">,</span>
<span class="o">(</span><span class="n">red</span><span class="bp">.</span><span class="n">to_group</span> <span class="n">H13</span><span class="o">)</span><span class="bp">.</span><span class="n">trans</span> <span class="o">(</span><span class="n">red</span><span class="bp">.</span><span class="n">to_group</span> <span class="n">H23</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>
</pre></div>

<a name="125235388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235388" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235388">Mario Carneiro (Apr 18 2018 at 06:02)</a>:</h4>
<p>looks good</p>

<a name="125235392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235392" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235392">Kenny Lau (Apr 18 2018 at 06:02)</a>:</h4>
<p>update:</p>

<a name="125235393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235393">Kenny Lau (Apr 18 2018 at 06:03)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">to_group</span><span class="bp">.</span><span class="n">aux</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="n">β</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">L</span><span class="o">,</span> <span class="n">list</span><span class="bp">.</span><span class="n">prod</span> <span class="err">$</span> <span class="n">L</span><span class="bp">.</span><span class="n">map</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">cond</span> <span class="n">x</span><span class="bp">.</span><span class="mi">2</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="bp">.</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="bp">.</span><span class="mi">1</span><span class="o">)</span><span class="bp">⁻¹</span>
</pre></div>

<a name="125235401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235401" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235401">Mario Carneiro (Apr 18 2018 at 06:03)</a>:</h4>
<p>I guess <code>prod</code> is this specialized to id?\</p>

<a name="125235403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235403" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235403">Kenny Lau (Apr 18 2018 at 06:03)</a>:</h4>
<p>correct</p>

<a name="125235446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235446" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235446">Mario Carneiro (Apr 18 2018 at 06:04)</a>:</h4>
<p>ok, seems reasonable</p>

<a name="125235447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235447" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235447">Kenny Lau (Apr 18 2018 at 06:04)</a>:</h4>
<p>orbigad</p>

<a name="125235449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235449" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235449">Mario Carneiro (Apr 18 2018 at 06:04)</a>:</h4>
<p>the spelling keeps getting weirder :)</p>

<a name="125235450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235450" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235450">Kenny Lau (Apr 18 2018 at 06:05)</a>:</h4>
<p>sim</p>

<a name="125235518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235518" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235518">Kenny Lau (Apr 18 2018 at 06:07)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">prod</span><span class="bp">.</span><span class="n">eq_to_group</span> <span class="o">:</span> <span class="n">prod</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">to_group</span> <span class="n">id</span> <span class="n">x</span> <span class="o">:=</span>
<span class="n">rfl</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">prod</span><span class="bp">.</span><span class="n">mk</span> <span class="o">:</span> <span class="n">prod</span> <span class="err">⟦</span><span class="n">L</span><span class="err">⟧</span> <span class="bp">=</span> <span class="n">list</span><span class="bp">.</span><span class="n">prod</span> <span class="o">(</span><span class="n">L</span><span class="bp">.</span><span class="n">map</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">cond</span> <span class="n">x</span><span class="bp">.</span><span class="mi">2</span> <span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="n">x</span><span class="bp">.</span><span class="mi">1</span><span class="bp">⁻¹</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">rfl</span>
</pre></div>

<a name="125235519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235519" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235519">Kenny Lau (Apr 18 2018 at 06:07)</a>:</h4>
<p>which one should I keep?</p>

<a name="125235583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235583" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235583">Mario Carneiro (Apr 18 2018 at 06:09)</a>:</h4>
<p><code>prod.eq_to_group </code> can be the definition, the other one should still be refl</p>

<a name="125235630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235630" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235630">Kenny Lau (Apr 18 2018 at 06:10)</a>:</h4>
<p>it is the definition, but I still want a simp lemma</p>

<a name="125235633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235633" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235633">Mario Carneiro (Apr 18 2018 at 06:10)</a>:</h4>
<p>it shouldnt be a simp lemma though</p>

<a name="125235634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235634" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235634">Mario Carneiro (Apr 18 2018 at 06:10)</a>:</h4>
<p>prod.eq_to_group  that is</p>

<a name="125235638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235638" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235638">Kenny Lau (Apr 18 2018 at 06:10)</a>:</h4>
<p>why not?</p>

<a name="125235654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235654" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235654">Mario Carneiro (Apr 18 2018 at 06:11)</a>:</h4>
<p>because it has its own lemmas</p>

<a name="125235661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235661" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235661">Kenny Lau (Apr 18 2018 at 06:11)</a>:</h4>
<p><a href="https://gist.github.com/johoelzl/7e73916f39e3acef8796bfb6c089a9c9#file-free_group-lean-L119" target="_blank" title="https://gist.github.com/johoelzl/7e73916f39e3acef8796bfb6c089a9c9#file-free_group-lean-L119">https://gist.github.com/johoelzl/7e73916f39e3acef8796bfb6c089a9c9#file-free_group-lean-L119</a></p>

<a name="125235662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235662">Kenny Lau (Apr 18 2018 at 06:11)</a>:</h4>
<p>why isn't this an instance?</p>

<a name="125235705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235705" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235705">Mario Carneiro (Apr 18 2018 at 06:12)</a>:</h4>
<p>it can be</p>

<a name="125235720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235720" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235720">Johannes Hölzl (Apr 18 2018 at 06:13)</a>:</h4>
<p>Yup, I wrote this before <code>is_group_hom</code> was a class.</p>

<a name="125235724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235724" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235724">Kenny Lau (Apr 18 2018 at 06:13)</a>:</h4>
<p>I see</p>

<a name="125235766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235766" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235766">Kenny Lau (Apr 18 2018 at 06:14)</a>:</h4>
<p>anyway, <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> I proved of.inj constructively :D</p>

<a name="125235773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235773" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235773">Kenny Lau (Apr 18 2018 at 06:15)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> oh, do you know that for any type <code>X</code>, <code>set X</code> is a group?</p>

<a name="125235774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235774" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235774">Johannes Hölzl (Apr 18 2018 at 06:15)</a>:</h4>
<p>you  mean with out assuming decidability of α?</p>

<a name="125235775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235775" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235775">Kenny Lau (Apr 18 2018 at 06:15)</a>:</h4>
<p>right</p>

<a name="125235819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235819" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235819">Kenny Lau (Apr 18 2018 at 06:16)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">#</span><span class="kn">print</span> <span class="n">of</span>
<span class="bp">#</span><span class="kn">check</span> <span class="bp">@</span><span class="n">of</span><span class="bp">.</span><span class="n">inj</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">axioms</span> <span class="n">of</span><span class="bp">.</span><span class="n">inj</span>

<span class="n">def</span> <span class="n">free_group</span><span class="bp">.</span><span class="n">of</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">},</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">free_group</span> <span class="n">α</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="err">⟦</span><span class="o">[(</span><span class="n">x</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span><span class="err">⟧</span>

<span class="n">of</span><span class="bp">.</span><span class="n">inj</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span> <span class="n">of</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">of</span> <span class="n">y</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>

<span class="n">propext</span>
</pre></div>

<a name="125235848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235848" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235848">Johannes Hölzl (Apr 18 2018 at 06:17)</a>:</h4>
<p>as long as the proof isn't longer</p>

<a name="125235859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235859" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235859">Kenny Lau (Apr 18 2018 at 06:17)</a>:</h4>
<p>aha</p>

<a name="125235860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235860" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235860">Kenny Lau (Apr 18 2018 at 06:17)</a>:</h4>
<p>our different values are reflected in as short as two lines</p>

<a name="125235903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235903" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235903">Kenny Lau (Apr 18 2018 at 06:18)</a>:</h4>
<p>the only lengthy part of my file is church rosser</p>

<a name="125235905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235905">Kenny Lau (Apr 18 2018 at 06:18)</a>:</h4>
<p>which your file doesn't even have</p>

<a name="125235912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235912" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235912">Mario Carneiro (Apr 18 2018 at 06:19)</a>:</h4>
<p>a group? With what, symmetric difference and complement?</p>

<a name="125235913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235913" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235913">Kenny Lau (Apr 18 2018 at 06:19)</a>:</h4>
<p>right</p>

<a name="125235914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235914" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235914">Kenny Lau (Apr 18 2018 at 06:19)</a>:</h4>
<p>it even forms a ring with multiplication being intersection</p>

<a name="125235969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235969" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235969">Mario Carneiro (Apr 18 2018 at 06:20)</a>:</h4>
<p>that seems more like bool -&gt; X</p>

<a name="125235970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235970" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235970">Kenny Lau (Apr 18 2018 at 06:20)</a>:</h4>
<p>X -&gt; bool</p>

<a name="125235972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235972" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235972">Mario Carneiro (Apr 18 2018 at 06:20)</a>:</h4>
<p>yeah that</p>

<a name="125235980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125235980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125235980">Mario Carneiro (Apr 18 2018 at 06:21)</a>:</h4>
<p>it's the indexed ring product of Z/2Z</p>

<a name="125236022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236022">Kenny Lau (Apr 18 2018 at 06:22)</a>:</h4>
<p>is there any easy way to prove that an add_group is a group?</p>

<a name="125236024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236024" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236024">Mario Carneiro (Apr 18 2018 at 06:22)</a>:</h4>
<p><code>multiplicative</code></p>

<a name="125236025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236025" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236025">Kenny Lau (Apr 18 2018 at 06:22)</a>:</h4>
<p>should I use it to define sum?</p>

<a name="125236026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236026">Kenny Lau (Apr 18 2018 at 06:22)</a>:</h4>
<p><a href="https://gist.github.com/johoelzl/7e73916f39e3acef8796bfb6c089a9c9#file-free_group-lean-L168" target="_blank" title="https://gist.github.com/johoelzl/7e73916f39e3acef8796bfb6c089a9c9#file-free_group-lean-L168">https://gist.github.com/johoelzl/7e73916f39e3acef8796bfb6c089a9c9#file-free_group-lean-L168</a></p>

<a name="125236027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236027" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236027">Mario Carneiro (Apr 18 2018 at 06:22)</a>:</h4>
<p>sure</p>

<a name="125236029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236029" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236029">Kenny Lau (Apr 18 2018 at 06:22)</a>:</h4>
<p>wonderful</p>

<a name="125236035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236035" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236035">Mario Carneiro (Apr 18 2018 at 06:23)</a>:</h4>
<p>I am currently using it to define add_group.smul</p>

<a name="125236036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236036" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236036">Kenny Lau (Apr 18 2018 at 06:23)</a>:</h4>
<p>I see</p>

<a name="125236040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236040" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236040">Mario Carneiro (Apr 18 2018 at 06:23)</a>:</h4>
<p>it makes it easy to transfer theorems from additive to multiplicative and vice versa using <code>additive</code></p>

<a name="125236082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236082" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236082">Mario Carneiro (Apr 18 2018 at 06:24)</a>:</h4>
<p>this method is in contrast with <code>transport_to_additive</code>, which translates the whole theorem to additive land</p>

<a name="125236083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236083" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236083">Mario Carneiro (Apr 18 2018 at 06:24)</a>:</h4>
<p>rather than just applying the theorem with a funny instance</p>

<a name="125236102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236102" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236102">Kenny Lau (Apr 18 2018 at 06:25)</a>:</h4>
<p>how does it know to transfer list.prod to list.sum :o</p>

<a name="125236153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236153" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236153">Mario Carneiro (Apr 18 2018 at 06:27)</a>:</h4>
<p>LOTS of definitional unfolding</p>

<a name="125236154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236154" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236154">Kenny Lau (Apr 18 2018 at 06:27)</a>:</h4>
<p>but not 1 to 0</p>

<a name="125236156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236156">Mario Carneiro (Apr 18 2018 at 06:27)</a>:</h4>
<p>I was surprised by the same thing</p>

<a name="125236158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236158" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236158">Mario Carneiro (Apr 18 2018 at 06:27)</a>:</h4>
<p>1 should go to 0</p>

<a name="125236200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236200" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236200">Kenny Lau (Apr 18 2018 at 06:28)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">sum</span><span class="bp">.</span><span class="n">sum</span> <span class="o">:</span> <span class="n">sum</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">sum</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">sum</span> <span class="n">y</span> <span class="o">:=</span>
<span class="n">to_group</span><span class="bp">.</span><span class="n">mul</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">sum</span><span class="bp">.</span><span class="n">one</span> <span class="o">:</span> <span class="n">sum</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">free_group</span> <span class="n">α</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="n">to_group</span><span class="bp">.</span><span class="n">one</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">sum</span><span class="bp">.</span><span class="n">inv</span> <span class="o">:</span> <span class="n">sum</span> <span class="n">x</span><span class="bp">⁻¹</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">sum</span> <span class="n">x</span> <span class="o">:=</span>
<span class="n">to_group</span><span class="bp">.</span><span class="n">inv</span>
</pre></div>

<a name="125236202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236202" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236202">Kenny Lau (Apr 18 2018 at 06:28)</a>:</h4>
<p>the middle one errors</p>

<a name="125236204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236204" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236204">Mario Carneiro (Apr 18 2018 at 06:28)</a>:</h4>
<p>you may need to specify the type</p>

<a name="125236205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236205" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236205">Kenny Lau (Apr 18 2018 at 06:28)</a>:</h4>
<p>nvm, this worked</p>

<a name="125236218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236218" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236218">Kenny Lau (Apr 18 2018 at 06:29)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">sum</span><span class="bp">.</span><span class="n">of</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="n">sum</span> <span class="o">(</span><span class="n">of</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="n">prod</span><span class="bp">.</span><span class="n">of</span>

<span class="kn">instance</span> <span class="n">sum</span><span class="bp">.</span><span class="n">is_group_hom</span> <span class="o">:</span> <span class="n">is_group_hom</span> <span class="o">(</span><span class="bp">@</span><span class="n">sum</span> <span class="n">α</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">prod</span><span class="bp">.</span><span class="n">is_group_hom</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">sum</span><span class="bp">.</span><span class="n">sum</span> <span class="o">:</span> <span class="n">sum</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">sum</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">sum</span> <span class="n">y</span> <span class="o">:=</span>
<span class="n">prod</span><span class="bp">.</span><span class="n">mul</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">sum</span><span class="bp">.</span><span class="n">one</span> <span class="o">:</span> <span class="n">sum</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">free_group</span> <span class="n">α</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="n">prod</span><span class="bp">.</span><span class="n">one</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">sum</span><span class="bp">.</span><span class="n">inv</span> <span class="o">:</span> <span class="n">sum</span> <span class="n">x</span><span class="bp">⁻¹</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">sum</span> <span class="n">x</span> <span class="o">:=</span>
<span class="n">prod</span><span class="bp">.</span><span class="n">inv</span>
</pre></div>

<a name="125236221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236221" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236221">Kenny Lau (Apr 18 2018 at 06:29)</a>:</h4>
<p>shortwiring everything to prod</p>

<a name="125236222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236222" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236222">Kenny Lau (Apr 18 2018 at 06:29)</a>:</h4>
<p>did I say short wiring</p>

<a name="125236223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236223" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236223">Kenny Lau (Apr 18 2018 at 06:29)</a>:</h4>
<p>I mean short-circuiting</p>

<a name="125236224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125236224" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125236224">Kenny Lau (Apr 18 2018 at 06:29)</a>:</h4>
<p>I had to google for this one. my english.</p>

<a name="125237946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125237946" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125237946">Kenny Lau (Apr 18 2018 at 07:24)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">group</span><span class="bp">.</span><span class="n">gen</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="o">:=</span>
<span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="err">$</span> <span class="bp">@</span><span class="n">free_group</span><span class="bp">.</span><span class="n">to_group</span> <span class="n">s</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">val</span>
</pre></div>

<a name="125237947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125237947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125237947">Kenny Lau (Apr 18 2018 at 07:24)</a>:</h4>
<p>completely pointless usage</p>

<a name="125237949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125237949" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125237949">Kenny Lau (Apr 18 2018 at 07:24)</a>:</h4>
<p>(I know we have <code>group.closure</code> already)</p>

<a name="125238075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238075" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238075">Mario Carneiro (Apr 18 2018 at 07:29)</a>:</h4>
<p>maybe you should prove this as a theorem about <code>group.closure</code> then</p>

<a name="125238076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238076" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238076">Kenny Lau (Apr 18 2018 at 07:29)</a>:</h4>
<p>fazendo :)</p>

<a name="125238144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238144" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238144">Kenny Lau (Apr 18 2018 at 07:31)</a>:</h4>
<p>what is the idiomatic way to use the fact that 1 is in a subgroup?</p>

<a name="125238197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238197" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238197">Mario Carneiro (Apr 18 2018 at 07:32)</a>:</h4>
<p>isn't that a theorem?</p>

<a name="125238199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238199" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238199">Kenny Lau (Apr 18 2018 at 07:32)</a>:</h4>
<p>what is the name?</p>

<a name="125238200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238200" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238200">Mario Carneiro (Apr 18 2018 at 07:32)</a>:</h4>
<p>presumably <code>is_subgroup.ome_mem</code> or similar</p>

<a name="125238201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238201" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238201">Kenny Lau (Apr 18 2018 at 07:33)</a>:</h4>
<p>it isn't</p>

<a name="125238208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238208" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238208">Mario Carneiro (Apr 18 2018 at 07:33)</a>:</h4>
<p>it should be a field of <code>is_submonoid</code></p>

<a name="125238209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238209" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238209">Kenny Lau (Apr 18 2018 at 07:33)</a>:</h4>
<p>it is</p>

<a name="125238249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238249" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238249">Mario Carneiro (Apr 18 2018 at 07:34)</a>:</h4>
<p>so <code>is_submonoid.one_mem s</code> then</p>

<a name="125238251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238251" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238251">Kenny Lau (Apr 18 2018 at 07:34)</a>:</h4>
<p>but it doesn't look idiomatic</p>

<a name="125238255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238255" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238255">Mario Carneiro (Apr 18 2018 at 07:35)</a>:</h4>
<p>the group files seem to open <code>is_submonoid</code> to clean it up a bit</p>

<a name="125238305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238305" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238305">Mario Carneiro (Apr 18 2018 at 07:36)</a>:</h4>
<p>I guess it could go in the root namespace, but <code>one_mem</code> sounds a bit generic</p>

<a name="125238364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238364" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238364">Johannes Hölzl (Apr 18 2018 at 07:39)</a>:</h4>
<p>I never used <code>export</code>, but maybe it works to <code>export is_submonoid</code>in <code>is_subgroup</code>?</p>

<a name="125238453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238453" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238453">Mario Carneiro (Apr 18 2018 at 07:42)</a>:</h4>
<p><code>export</code> is like permanent <code>open</code></p>

<a name="125238454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238454" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238454">Mario Carneiro (Apr 18 2018 at 07:42)</a>:</h4>
<p>for example, <code>option.some</code> is <code>export</code>ed</p>

<a name="125238468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238468" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238468">Mario Carneiro (Apr 18 2018 at 07:43)</a>:</h4>
<p>I don't think it's namespaced, but I could be wrong</p>

<a name="125238509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238509" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238509">Kenny Lau (Apr 18 2018 at 07:44)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">useless</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="bp">@</span><span class="n">free_group</span><span class="bp">.</span><span class="n">to_group</span> <span class="n">s</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">val</span><span class="o">)</span> <span class="bp">=</span> <span class="n">group</span><span class="bp">.</span><span class="n">closure</span> <span class="n">s</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">apply</span> <span class="n">set</span><span class="bp">.</span><span class="n">ext</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">z</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">h</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">H</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">subst</span> <span class="n">H</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">induction_on</span> <span class="n">x</span><span class="o">,</span> <span class="n">clear</span> <span class="n">x</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">L</span><span class="o">,</span>
    <span class="n">induction</span> <span class="n">L</span> <span class="k">with</span> <span class="n">hd</span> <span class="n">tl</span> <span class="n">ih</span><span class="o">,</span>
    <span class="n">case</span> <span class="n">list</span><span class="bp">.</span><span class="n">nil</span>
    <span class="o">{</span> <span class="n">simp</span> <span class="o">[</span><span class="n">is_submonoid</span><span class="bp">.</span><span class="n">one_mem</span><span class="o">]</span> <span class="o">},</span>
    <span class="n">case</span> <span class="n">list</span><span class="bp">.</span><span class="n">cons</span>
    <span class="o">{</span> <span class="n">simp</span> <span class="n">at</span> <span class="n">ih</span> <span class="err">⊢</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">is_submonoid</span><span class="bp">.</span><span class="n">mul_mem</span><span class="o">,</span>
      <span class="o">{</span> <span class="n">rcases</span> <span class="n">hd</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="bp">_</span> <span class="bp">|</span> <span class="bp">_⟩</span><span class="o">,</span>
        <span class="o">{</span> <span class="n">simp</span> <span class="o">[</span><span class="n">is_subgroup</span><span class="bp">.</span><span class="n">inv_mem</span> <span class="o">(</span><span class="n">group</span><span class="bp">.</span><span class="n">subset_closure</span> <span class="n">x</span><span class="bp">.</span><span class="mi">2</span><span class="o">)]</span> <span class="o">},</span>
        <span class="o">{</span> <span class="n">simp</span> <span class="o">[</span><span class="n">group</span><span class="bp">.</span><span class="n">subset_closure</span> <span class="n">x</span><span class="bp">.</span><span class="mi">2</span><span class="o">]</span> <span class="o">}</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">assumption</span> <span class="o">}</span> <span class="o">}</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">H</span><span class="o">,</span>
    <span class="n">induction</span> <span class="n">H</span> <span class="k">with</span> <span class="n">x</span> <span class="n">H</span> <span class="n">x</span> <span class="n">H</span> <span class="n">ih</span> <span class="n">x1</span> <span class="n">x2</span> <span class="n">H1</span> <span class="n">H2</span> <span class="n">ih1</span> <span class="n">ih2</span><span class="o">,</span>
    <span class="n">case</span> <span class="n">group</span><span class="bp">.</span><span class="n">in_closure</span><span class="bp">.</span><span class="n">basic</span>
    <span class="o">{</span> <span class="n">existsi</span> <span class="o">(</span><span class="n">of</span> <span class="o">(</span><span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">H</span><span class="bp">⟩</span> <span class="o">:</span> <span class="n">s</span><span class="o">)),</span>
      <span class="n">simp</span> <span class="o">},</span>
    <span class="n">case</span> <span class="n">group</span><span class="bp">.</span><span class="n">in_closure</span><span class="bp">.</span><span class="n">one</span>
    <span class="o">{</span> <span class="n">existsi</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">free_group</span> <span class="n">s</span><span class="o">),</span>
      <span class="n">simp</span> <span class="o">},</span>
    <span class="n">case</span> <span class="n">group</span><span class="bp">.</span><span class="n">in_closure</span><span class="bp">.</span><span class="n">inv</span>
    <span class="o">{</span> <span class="n">cases</span> <span class="n">ih</span> <span class="k">with</span> <span class="n">y</span> <span class="n">h</span><span class="o">,</span>
      <span class="n">existsi</span> <span class="n">y</span><span class="bp">⁻¹</span><span class="o">,</span>
      <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="o">},</span>
    <span class="n">case</span> <span class="n">group</span><span class="bp">.</span><span class="n">in_closure</span><span class="bp">.</span><span class="n">mul</span>
    <span class="o">{</span> <span class="n">cases</span> <span class="n">ih1</span> <span class="k">with</span> <span class="n">y1</span> <span class="n">h1</span><span class="o">,</span>
      <span class="n">cases</span> <span class="n">ih2</span> <span class="k">with</span> <span class="n">y2</span> <span class="n">h2</span><span class="o">,</span>
      <span class="n">existsi</span> <span class="n">y1</span> <span class="bp">*</span> <span class="n">y2</span><span class="o">,</span>
      <span class="n">simp</span> <span class="o">[</span><span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="o">]</span> <span class="o">}</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>

<a name="125238562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238562" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238562">Mario Carneiro (Apr 18 2018 at 07:46)</a>:</h4>
<p>isn't there a more "universal" kind of proof?</p>

<a name="125238569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238569">Kenny Lau (Apr 18 2018 at 07:47)</a>:</h4>
<p>you're right</p>

<a name="125238570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125238570" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125238570">Mario Carneiro (Apr 18 2018 at 07:47)</a>:</h4>
<p>both <code>group.closure</code> and <code>free_group.to_group</code> have universal properties</p>

<a name="125239184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239184" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239184">Kenny Lau (Apr 18 2018 at 08:04)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">red</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">refl</span> <span class="o">{</span><span class="n">L</span><span class="o">}</span> <span class="o">:</span> <span class="n">red</span> <span class="n">L</span> <span class="n">L</span>
<span class="bp">|</span> <span class="n">trans_bnot</span> <span class="o">{</span><span class="n">L₁</span> <span class="n">L₂</span> <span class="n">L₃</span> <span class="n">x</span> <span class="n">b</span><span class="o">}</span> <span class="o">:</span> <span class="n">red</span> <span class="n">L₁</span> <span class="o">(</span><span class="n">L₂</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L₃</span><span class="o">)</span> <span class="bp">→</span> <span class="n">red</span> <span class="n">L₁</span> <span class="o">(</span><span class="n">L₂</span> <span class="bp">++</span> <span class="n">L₃</span><span class="o">)</span>

<span class="n">def</span> <span class="n">reduce</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">((</span><span class="n">x1</span><span class="o">,</span><span class="n">b1</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">x2</span><span class="o">,</span><span class="n">b2</span><span class="o">)</span><span class="bp">::</span><span class="n">tl</span><span class="o">)</span> <span class="o">:=</span> <span class="n">cond</span> <span class="n">b1</span>
    <span class="o">(</span><span class="n">cond</span> <span class="n">b2</span>
      <span class="o">((</span><span class="n">x1</span><span class="o">,</span><span class="n">b1</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">reduce</span> <span class="err">$</span> <span class="o">(</span><span class="n">x2</span><span class="o">,</span><span class="n">b2</span><span class="o">)</span><span class="bp">::</span><span class="n">tl</span><span class="o">))</span>
      <span class="o">(</span><span class="k">if</span> <span class="n">x1</span> <span class="bp">=</span> <span class="n">x2</span> <span class="k">then</span> <span class="n">reduce</span> <span class="n">tl</span> <span class="k">else</span> <span class="o">(</span><span class="n">x1</span><span class="o">,</span><span class="n">b1</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">x2</span><span class="o">,</span><span class="n">b2</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">reduce</span> <span class="n">tl</span><span class="o">)))</span>
    <span class="o">(</span><span class="n">cond</span> <span class="n">b2</span>
      <span class="o">(</span><span class="k">if</span> <span class="n">x1</span> <span class="bp">=</span> <span class="n">x2</span> <span class="k">then</span> <span class="n">reduce</span> <span class="n">tl</span> <span class="k">else</span> <span class="o">(</span><span class="n">x1</span><span class="o">,</span><span class="n">b1</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">x2</span><span class="o">,</span><span class="n">b2</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">reduce</span> <span class="n">tl</span><span class="o">))</span>
      <span class="o">((</span><span class="n">x1</span><span class="o">,</span><span class="n">b1</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">reduce</span> <span class="err">$</span> <span class="o">(</span><span class="n">x2</span><span class="o">,</span><span class="n">b2</span><span class="o">)</span><span class="bp">::</span><span class="n">tl</span><span class="o">)))</span>
<span class="bp">|</span> <span class="n">L</span> <span class="o">:=</span> <span class="n">L</span>

<span class="kn">theorem</span> <span class="n">reduce</span><span class="bp">.</span><span class="n">eq_of_red</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">red</span> <span class="n">L₁</span> <span class="n">L₂</span><span class="o">)</span> <span class="o">:</span> <span class="n">reduce</span> <span class="n">L₁</span> <span class="bp">=</span> <span class="n">reduce</span> <span class="n">L₂</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="125239185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239185" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239185">Kenny Lau (Apr 18 2018 at 08:04)</a>:</h4>
<p>would you have some insights?</p>

<a name="125239187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239187" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239187">Kenny Lau (Apr 18 2018 at 08:04)</a>:</h4>
<p>on how to prove the theorem at the bottom?</p>

<a name="125239239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239239" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239239">Kenny Lau (Apr 18 2018 at 08:05)</a>:</h4>
<p>oh nvm I'll just use induction</p>

<a name="125239247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239247" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239247">Mario Carneiro (Apr 18 2018 at 08:05)</a>:</h4>
<p>you could use <code>b1 = b2</code> instead of four cases there</p>

<a name="125239306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239306" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239306">Kenny Lau (Apr 18 2018 at 08:06)</a>:</h4>
<p>I don't like unfolding <code>ite</code>s</p>

<a name="125239308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239308">Johannes Hölzl (Apr 18 2018 at 08:06)</a>:</h4>
<p>I also played around with free_groups: <a href="https://gist.github.com/johoelzl/4238422b0810a9d04bb41cfdb682e8ff#file-free_groups-lean-L426" target="_blank" title="https://gist.github.com/johoelzl/4238422b0810a9d04bb41cfdb682e8ff#file-free_groups-lean-L426">https://gist.github.com/johoelzl/4238422b0810a9d04bb41cfdb682e8ff#file-free_groups-lean-L426</a> <br>
Now it includes <code>normalize</code>.</p>

<a name="125239309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239309" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239309">Kenny Lau (Apr 18 2018 at 08:06)</a>:</h4>
<p>you win</p>

<a name="125239310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239310" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239310">Johannes Hölzl (Apr 18 2018 at 08:06)</a>:</h4>
<p>Using <code>if _ then _ else _ </code> makes <code>normalize.step</code> much smaller.</p>

<a name="125239333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239333" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239333">Kenny Lau (Apr 18 2018 at 08:07)</a>:</h4>
<p>aha, I like your approach</p>

<a name="125239336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239336" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239336">Mario Carneiro (Apr 18 2018 at 08:07)</a>:</h4>
<p>you use <code>list.sizeof</code>? Why?</p>

<a name="125239337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239337" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239337">Kenny Lau (Apr 18 2018 at 08:07)</a>:</h4>
<p>do it one step first, and then the whole thing</p>

<a name="125239343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239343" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239343">Kenny Lau (Apr 18 2018 at 08:07)</a>:</h4>
<p>now I'm confused as to what I should do</p>

<a name="125239400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239400" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239400">Kenny Lau (Apr 18 2018 at 08:08)</a>:</h4>
<blockquote>
<p>you use <code>list.sizeof</code>? Why?</p>
</blockquote>
<p>to justify that the recursion is well-founded?</p>

<a name="125239403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239403" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239403">Johannes Hölzl (Apr 18 2018 at 08:08)</a>:</h4>
<p>I never used well founded recursion before. <code>list.sizeof</code> was what the equation compiler proposed. Is there an easier way?</p>

<a name="125239431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239431" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239431">Mario Carneiro (Apr 18 2018 at 08:09)</a>:</h4>
<p>You (Johannes) didn't prove that <code>normalize</code> is related to the original input though, or that the result is unique in the equivalence class (it can be defined as a function on the free group itself)</p>

<a name="125239434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239434">Mario Carneiro (Apr 18 2018 at 08:09)</a>:</h4>
<p>so there's that if you want it kenny</p>

<a name="125239435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239435" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239435">Johannes Hölzl (Apr 18 2018 at 08:09)</a>:</h4>
<p>well its not finished yet</p>

<a name="125239437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239437" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239437">Kenny Lau (Apr 18 2018 at 08:09)</a>:</h4>
<p>this is not good</p>

<a name="125239439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239439" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239439">Mario Carneiro (Apr 18 2018 at 08:09)</a>:</h4>
<p>You can use <code>list.length</code> instead of <code>sizeof</code></p>

<a name="125239440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239440" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239440">Kenny Lau (Apr 18 2018 at 08:09)</a>:</h4>
<p>we are writing our own free groups separately</p>

<a name="125239443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239443" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239443">Kenny Lau (Apr 18 2018 at 08:09)</a>:</h4>
<p>this is not good</p>

<a name="125239445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239445" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239445">Mario Carneiro (Apr 18 2018 at 08:09)</a>:</h4>
<p>they seem pretty similar</p>

<a name="125239514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239514" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239514">Kenny Lau (Apr 18 2018 at 08:10)</a>:</h4>
<p>they're different enough</p>

<a name="125239515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239515" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239515">Johannes Hölzl (Apr 18 2018 at 08:10)</a>:</h4>
<p>I'm sure we ca merge them later</p>

<a name="125239518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239518" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239518">Kenny Lau (Apr 18 2018 at 08:11)</a>:</h4>
<p>I don't believe in hope</p>

<a name="125239525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239525" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239525">Mario Carneiro (Apr 18 2018 at 08:11)</a>:</h4>
<p>Oh, I see Johannes also proved church rosser</p>

<a name="125239587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239587" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239587">Johannes Hölzl (Apr 18 2018 at 08:12)</a>:</h4>
<p>Yeah, the question was how to prove it. And then I couldn't sleep and remembered Tobias book on Term Rewriting and All That.</p>

<a name="125239601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239601" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239601">Kenny Lau (Apr 18 2018 at 08:13)</a>:</h4>
<p>this is not good</p>

<a name="125239603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239603">Mario Carneiro (Apr 18 2018 at 08:13)</a>:</h4>
<p>you should see how it compares to Kenny's proof</p>

<a name="125239607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239607" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239607">Kenny Lau (Apr 18 2018 at 08:13)</a>:</h4>
<p>I'm ashamed</p>

<a name="125239609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239609" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239609">Kenny Lau (Apr 18 2018 at 08:13)</a>:</h4>
<p>I need to work very hard to shorten my proof</p>

<a name="125239678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239678" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239678">Johannes Hölzl (Apr 18 2018 at 08:14)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> why not incorporate both proofs? I think merging both would be helpful.</p>

<a name="125239686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239686" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239686">Kenny Lau (Apr 18 2018 at 08:15)</a>:</h4>
<p>our proofs are different enough</p>

<a name="125239688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239688" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239688">Kenny Lau (Apr 18 2018 at 08:15)</a>:</h4>
<p>our definitions are different enough</p>

<a name="125239689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239689" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239689">Kenny Lau (Apr 18 2018 at 08:15)</a>:</h4>
<p>this will be a disaster</p>

<a name="125239696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239696">Mario Carneiro (Apr 18 2018 at 08:15)</a>:</h4>
<p>they aren't that different, if I'm following the discussion well enough</p>

<a name="125239698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239698" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239698">Kenny Lau (Apr 18 2018 at 08:15)</a>:</h4>
<p>you haven't even seen my file</p>

<a name="125239701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239701" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239701">Mario Carneiro (Apr 18 2018 at 08:15)</a>:</h4>
<p>I am reading it from your posts</p>

<a name="125239702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239702" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239702">Kenny Lau (Apr 18 2018 at 08:16)</a>:</h4>
<p>I can see that</p>

<a name="125239749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239749" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239749">Mario Carneiro (Apr 18 2018 at 08:16)</a>:</h4>
<p>Why don't you post what you have and then we can compare and see what parts are better in each file?</p>

<a name="125239752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239752" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239752">Kenny Lau (Apr 18 2018 at 08:16)</a>:</h4>
<p>lemme finish my <code>reduce</code> first</p>

<a name="125239810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239810" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239810">Mario Carneiro (Apr 18 2018 at 08:18)</a>:</h4>
<p>here's what I use to do induction on <code>length</code>:</p>
<div class="codehilite"><pre><span></span>using_well_founded {
  rel_tac := λ_ _, `[exact ⟨_, inv_image.wf length nat.lt_wf⟩],
  dec_tac := tactic.assumption }
</pre></div>

<a name="125239813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239813">Johannes Hölzl (Apr 18 2018 at 08:19)</a>:</h4>
<p>Ah! that's perfect</p>

<a name="125239886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239886" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239886">Johannes Hölzl (Apr 18 2018 at 08:20)</a>:</h4>
<p>I guess what we also want: a induction method which generalizes all indices of the major hypotheses. I often needed to write something like this:</p>
<div class="codehilite"><pre><span></span><span class="n">revert</span> <span class="n">h</span><span class="o">,</span>
<span class="n">generalize</span> <span class="n">eq_t</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">::</span> <span class="n">xs</span><span class="o">)</span> <span class="bp">=</span> <span class="n">t</span><span class="o">,</span>
<span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
<span class="n">induction</span> <span class="n">h</span><span class="o">,</span>
<span class="bp">...</span>
</pre></div>


<p>Or is there a better variant already available?</p>

<a name="125239899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239899" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239899">Kenny Lau (Apr 18 2018 at 08:21)</a>:</h4>
<p>same here</p>

<a name="125239965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239965">Mario Carneiro (Apr 18 2018 at 08:22)</a>:</h4>
<p>I recall discussing this with Sebastian. The problem with this is that it often cripples the inductive hypothesis (since the index can't get smaller or whatever), and it's hard to say what to generalize to recover it</p>

<a name="125239973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125239973" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125239973">Mario Carneiro (Apr 18 2018 at 08:22)</a>:</h4>
<p>which makes it unclear how to proceed in general</p>

<a name="125240027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240027" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240027">Johannes Hölzl (Apr 18 2018 at 08:24)</a>:</h4>
<p>I see. We surely don't want to do it in all cases. But something along the lines <code>induction h generalizing (t_eq : (a :: xs) = t)</code>. At least would be shorter to write.</p>

<a name="125240082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240082" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240082">Mario Carneiro (Apr 18 2018 at 08:26)</a>:</h4>
<p>hm, I guess there's no point in the <code>t</code> there since it will disappear after the induction. The form of the index is also unnecessary, unless you only want to generalize some indices and leave other index expressions</p>

<a name="125240093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240093" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240093">Mario Carneiro (Apr 18 2018 at 08:27)</a>:</h4>
<p>So it would suffice to just say <code>generalizing indices</code> or something</p>

<a name="125240158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240158" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240158">Mario Carneiro (Apr 18 2018 at 08:28)</a>:</h4>
<p>or equivalently, just have a <code>induction_g</code> command (name TBD) with the same syntax as <code>induction</code> that does this</p>

<a name="125240172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240172" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240172">Kenny Lau (Apr 18 2018 at 08:29)</a>:</h4>
<p>how do you destruct ite in equation compiler?</p>

<a name="125240255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240255" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240255">Johannes Hölzl (Apr 18 2018 at 08:31)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I'm fine with <code>induction_g</code> or <code>generalizing indices</code>. I will take a look into this.</p>

<a name="125240296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240296" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240296">Kenny Lau (Apr 18 2018 at 08:32)</a>:</h4>
<p>how do you destruct ite in term mode at all?</p>

<a name="125240297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240297" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240297">Kenny Lau (Apr 18 2018 at 08:32)</a>:</h4>
<p>I recall asking this a long time ago</p>

<a name="125240298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240298" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240298">Kenny Lau (Apr 18 2018 at 08:32)</a>:</h4>
<p>I can only destruct it in tactic mode</p>

<a name="125240305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240305" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240305">Kenny Lau (Apr 18 2018 at 08:32)</a>:</h4>
<p>because it is <code>decidable.rec_on</code> something obscure</p>

<a name="125240307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240307" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240307">Kenny Lau (Apr 18 2018 at 08:32)</a>:</h4>
<p>i.e. a proof that the condition is decidable</p>

<a name="125240308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240308">Mario Carneiro (Apr 18 2018 at 08:32)</a>:</h4>
<p>it's easier in tactic mode to be sure</p>

<a name="125240310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240310" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240310">Johannes Hölzl (Apr 18 2018 at 08:33)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> do you mean rewriting with "destruct"? This is surely one thing where tactic mode is prefered.</p>

<a name="125240327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240327" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240327">Kenny Lau (Apr 18 2018 at 08:33)</a>:</h4>
<p>that's why I don't like using <code>ite</code></p>

<a name="125240330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240330" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240330">Mario Carneiro (Apr 18 2018 at 08:33)</a>:</h4>
<p>but you can <code>match (by apply_instance : decidable p) with ...</code> and then just use <code>show</code> to get rid of the ite in the branches</p>

<a name="125240342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240342" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240342">Kenny Lau (Apr 18 2018 at 08:33)</a>:</h4>
<p>hmm</p>

<a name="125240394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240394">Mario Carneiro (Apr 18 2018 at 08:34)</a>:</h4>
<p>this is what I used to do before <code>by_cases</code> got good</p>

<a name="125240545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240545" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240545">Kenny Lau (Apr 18 2018 at 08:39)</a>:</h4>
<p>I've got myself into certain trouble</p>

<a name="125240549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240549" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240549">Kenny Lau (Apr 18 2018 at 08:39)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">reduce</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">((</span><span class="n">x1</span><span class="o">,</span><span class="n">b1</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">x2</span><span class="o">,</span><span class="n">b2</span><span class="o">)</span><span class="bp">::</span><span class="n">tl</span><span class="o">)</span> <span class="o">:=</span> <span class="n">cond</span> <span class="n">b1</span>
    <span class="o">(</span><span class="n">cond</span> <span class="n">b2</span>
      <span class="o">((</span><span class="n">x1</span><span class="o">,</span><span class="n">b1</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">reduce</span> <span class="err">$</span> <span class="o">(</span><span class="n">x2</span><span class="o">,</span><span class="n">b2</span><span class="o">)</span><span class="bp">::</span><span class="n">tl</span><span class="o">))</span>
      <span class="o">(</span><span class="k">if</span> <span class="n">x1</span> <span class="bp">=</span> <span class="n">x2</span> <span class="k">then</span> <span class="n">reduce</span> <span class="n">tl</span> <span class="k">else</span> <span class="o">(</span><span class="n">x1</span><span class="o">,</span><span class="n">b1</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">x2</span><span class="o">,</span><span class="n">b2</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">reduce</span> <span class="n">tl</span><span class="o">)))</span>
    <span class="o">(</span><span class="n">cond</span> <span class="n">b2</span>
      <span class="o">(</span><span class="k">if</span> <span class="n">x1</span> <span class="bp">=</span> <span class="n">x2</span> <span class="k">then</span> <span class="n">reduce</span> <span class="n">tl</span> <span class="k">else</span> <span class="o">(</span><span class="n">x1</span><span class="o">,</span><span class="n">b1</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">x2</span><span class="o">,</span><span class="n">b2</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">reduce</span> <span class="n">tl</span><span class="o">))</span>
      <span class="o">((</span><span class="n">x1</span><span class="o">,</span><span class="n">b1</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">reduce</span> <span class="err">$</span> <span class="o">(</span><span class="n">x2</span><span class="o">,</span><span class="n">b2</span><span class="o">)</span><span class="bp">::</span><span class="n">tl</span><span class="o">)))</span>
<span class="bp">|</span> <span class="n">L</span> <span class="o">:=</span> <span class="n">L</span>

<span class="err">⊢</span> <span class="n">reduce</span> <span class="o">(</span><span class="n">L2</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L3</span><span class="o">)</span> <span class="bp">=</span> <span class="n">reduce</span> <span class="o">(</span><span class="n">L2</span> <span class="bp">++</span> <span class="n">L3</span><span class="o">)</span>
</pre></div>

<a name="125240590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240590" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240590">Mario Carneiro (Apr 18 2018 at 08:40)</a>:</h4>
<p>do you still have that church rosser proof?</p>

<a name="125240601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240601" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240601">Kenny Lau (Apr 18 2018 at 08:40)</a>:</h4>
<p>yes</p>

<a name="125240602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240602" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240602">Kenny Lau (Apr 18 2018 at 08:41)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">church_rosser</span> <span class="o">:</span> <span class="n">red</span> <span class="err">?</span><span class="n">M_2</span> <span class="err">?</span><span class="n">M_3</span> <span class="bp">→</span> <span class="n">red</span> <span class="err">?</span><span class="n">M_2</span> <span class="err">?</span><span class="n">M_4</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">L₄</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="err">?</span><span class="n">M_1</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)),</span> <span class="n">red</span> <span class="err">?</span><span class="n">M_3</span> <span class="n">L₄</span> <span class="bp">∧</span> <span class="n">red</span> <span class="err">?</span><span class="n">M_4</span> <span class="n">L₄</span><span class="o">)</span>
</pre></div>

<a name="125240603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240603">Mario Carneiro (Apr 18 2018 at 08:41)</a>:</h4>
<p>It suffices to show that reduce is following <em>some</em> reduction sequence</p>

<a name="125240609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240609" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240609">Mario Carneiro (Apr 18 2018 at 08:41)</a>:</h4>
<p>and that when it gets to the end there is no other possible reduction</p>

<a name="125240611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240611" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240611">Kenny Lau (Apr 18 2018 at 08:41)</a>:</h4>
<p>I've shown the former</p>

<a name="125240657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240657">Kenny Lau (Apr 18 2018 at 08:42)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">reduce</span><span class="bp">.</span><span class="n">min</span> <span class="o">:</span> <span class="n">red</span> <span class="o">(</span><span class="n">reduce</span> <span class="n">L₁</span><span class="o">)</span> <span class="n">L₂</span> <span class="bp">→</span> <span class="n">reduce</span> <span class="n">L₁</span> <span class="bp">=</span> <span class="n">L₂</span> <span class="o">:=</span>
</pre></div>

<a name="125240658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240658" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240658">Kenny Lau (Apr 18 2018 at 08:42)</a>:</h4>
<p>issue?</p>

<a name="125240660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240660" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240660">Mario Carneiro (Apr 18 2018 at 08:42)</a>:</h4>
<p>Then if A ~ B then reduce A ~ A ~ B ~ reduce B, so by C-R there exists C such that reduce A -&gt; C &lt;- reduce B; but reduce A is minimal so reduce A = C = reduce B</p>

<a name="125240670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240670" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240670">Kenny Lau (Apr 18 2018 at 08:43)</a>:</h4>
<p>nice</p>

<a name="125240723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240723" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240723">Kenny Lau (Apr 18 2018 at 08:44)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> which list should I destruct?</p>

<a name="125240725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240725" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240725">Mario Carneiro (Apr 18 2018 at 08:44)</a>:</h4>
<p>where</p>

<a name="125240727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240727" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240727">Kenny Lau (Apr 18 2018 at 08:44)</a>:</h4>
<p>common sense would say the former, but I'm asking if I need to destruct the latter as well</p>

<a name="125240730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240730" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240730">Kenny Lau (Apr 18 2018 at 08:44)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">reduce</span><span class="bp">.</span><span class="n">min</span> <span class="o">:</span> <span class="n">red</span> <span class="o">(</span><span class="n">reduce</span> <span class="n">L₁</span><span class="o">)</span> <span class="n">L₂</span> <span class="bp">→</span> <span class="n">reduce</span> <span class="n">L₁</span> <span class="bp">=</span> <span class="n">L₂</span> <span class="o">:=</span>
</pre></div>

<a name="125240741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240741" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240741">Mario Carneiro (Apr 18 2018 at 08:45)</a>:</h4>
<p><code>red</code> means that you have some representation as append of stuff, right?</p>

<a name="125240744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240744" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240744">Kenny Lau (Apr 18 2018 at 08:45)</a>:</h4>
<p>not sure what you mean; don't think it's right anyway</p>

<a name="125240785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240785" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240785">Kenny Lau (Apr 18 2018 at 08:46)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">red</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">refl</span> <span class="o">{</span><span class="n">L</span><span class="o">}</span> <span class="o">:</span> <span class="n">red</span> <span class="n">L</span> <span class="n">L</span>
<span class="bp">|</span> <span class="n">trans_bnot</span> <span class="o">{</span><span class="n">L₁</span> <span class="n">L₂</span> <span class="n">L₃</span> <span class="n">x</span> <span class="n">b</span><span class="o">}</span> <span class="o">:</span> <span class="n">red</span> <span class="n">L₁</span> <span class="o">(</span><span class="n">L₂</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L₃</span><span class="o">)</span> <span class="bp">→</span> <span class="n">red</span> <span class="n">L₁</span> <span class="o">(</span><span class="n">L₂</span> <span class="bp">++</span> <span class="n">L₃</span><span class="o">)</span>
</pre></div>

<a name="125240786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240786" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240786">Mario Carneiro (Apr 18 2018 at 08:46)</a>:</h4>
<p>I think you want to do induction on L1, along the same lines as the definition of <code>reduce</code></p>

<a name="125240787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240787" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240787">Kenny Lau (Apr 18 2018 at 08:46)</a>:</h4>
<p>right, but I'm asking if I need to destruct L2 as well</p>

<a name="125240793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240793" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240793">Mario Carneiro (Apr 18 2018 at 08:47)</a>:</h4>
<p>no, generalize it in the induction</p>

<a name="125240796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240796" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240796">Kenny Lau (Apr 18 2018 at 08:47)</a>:</h4>
<p>why shouldn't I do it in term mode?</p>

<a name="125240797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125240797" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125240797">Mario Carneiro (Apr 18 2018 at 08:47)</a>:</h4>
<p>you can</p>

<a name="125241458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125241458" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125241458">Kenny Lau (Apr 18 2018 at 09:05)</a>:</h4>
<p>I give up using term mode</p>

<a name="125241867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125241867" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125241867">Mario Carneiro (Apr 18 2018 at 09:17)</a>:</h4>
<p>Here's a proof strategy: if <code>red (reduce L1) L2</code>, then by cases either <code>reduce L1 = L2</code> or <code>reduce L1 = L3 ++ (x, b) :: (x, bnot b) :: L4</code> and <code>L2 = L3 ++ L4</code>; so it suffices to prove the second case is impossible. Prove <code>\forall L3 L4 x b, reduce L1 != L3 ++ (x, b) :: (x, bnot b) :: L4</code> by induction on L1, which you can do in term mode so that the equation compiler sets up the weird induction</p>

<a name="125241913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125241913" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125241913">Kenny Lau (Apr 18 2018 at 09:18)</a>:</h4>
<p>aha</p>

<a name="125241914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125241914" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125241914">Kenny Lau (Apr 18 2018 at 09:18)</a>:</h4>
<p>muit obrigad</p>

<a name="125241923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125241923" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125241923">Kenny Lau (Apr 18 2018 at 09:19)</a>:</h4>
<p>that will be the first "not" I'm using in a while</p>

<a name="125241976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125241976" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125241976">Kenny Lau (Apr 18 2018 at 09:21)</a>:</h4>
<p>are you sure I can do that by induction on L1 alone?</p>

<a name="125243339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125243339" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125243339">Kenny Lau (Apr 18 2018 at 09:58)</a>:</h4>
<p>my function is wrong</p>

<a name="125243343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125243343" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125243343">Kenny Lau (Apr 18 2018 at 09:58)</a>:</h4>
<p>hmm...</p>

<a name="125243417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125243417" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125243417">Kenny Lau (Apr 18 2018 at 10:00)</a>:</h4>
<p>reducing a word is more difficult than it seems</p>

<a name="125243624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125243624" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125243624">Kenny Lau (Apr 18 2018 at 10:06)</a>:</h4>
<p>I don't think there's an online algorithm to reduce a word</p>

<a name="125243629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125243629" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125243629">Kenny Lau (Apr 18 2018 at 10:06)</a>:</h4>
<p>so my function is bound to fail</p>

<a name="125243632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125243632" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125243632">Kenny Lau (Apr 18 2018 at 10:06)</a>:</h4>
<p>I'm using the CS usage of "online"</p>

<a name="125243809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125243809" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125243809">Kevin Buzzard (Apr 18 2018 at 10:11)</a>:</h4>
<p>just use greedy?</p>

<a name="125243849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125243849" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125243849">Kenny Lau (Apr 18 2018 at 10:12)</a>:</h4>
<p>is your greedy algorithm online?</p>

<a name="125243850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125243850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125243850">Kevin Buzzard (Apr 18 2018 at 10:12)</a>:</h4>
<p>and remember to backtrack slightly when you kill <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>∗</mo><msup><mi>x</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">x * x^{-1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">x</span><span class="mbin">∗</span><span class="mord"><span class="mord mathit">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathrm mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></p>

<a name="125243851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125243851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125243851">Kenny Lau (Apr 18 2018 at 10:12)</a>:</h4>
<p>right, that's my new plan now</p>

<a name="125243852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125243852" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125243852">Kenny Lau (Apr 18 2018 at 10:12)</a>:</h4>
<p>how am I writing program in Lean</p>

<a name="125243854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125243854" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125243854">Kevin Buzzard (Apr 18 2018 at 10:12)</a>:</h4>
<p>...when you should be revising?</p>

<a name="125243856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125243856" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125243856">Kenny Lau (Apr 18 2018 at 10:12)</a>:</h4>
<p>well</p>

<a name="125243857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125243857" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125243857">Kevin Buzzard (Apr 18 2018 at 10:12)</a>:</h4>
<p>;-)</p>

<a name="125244111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125244111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125244111">Kevin Buzzard (Apr 18 2018 at 10:20)</a>:</h4>
<blockquote>
<p>this will be a disaster</p>
</blockquote>
<p>No, it's great! Two smart people doing the same thing means that you can take the union of their ideas at the end -- either that, or you get two different ways of doing the same thing, each with their own benefits. Either way it's a win.</p>

<a name="125244117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125244117" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125244117">Kenny Lau (Apr 18 2018 at 10:21)</a>:</h4>
<p>there will be only one version in mathlib</p>

<a name="125244165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125244165" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125244165">Kevin Buzzard (Apr 18 2018 at 10:22)</a>:</h4>
<p>If the two approaches are sufficiently different and both have their uses, then they might both end up in there. If they are sufficiently similar then we end up with the best of both pieces of code. It's just a collaborative open source situation. I ask 200 people to do the same question when I'm teaching them and I don't worry about this at all. Every year I see an answer I haven't seen before, e.g. Chris' modal logic proof of the islanders question this year.</p>

<a name="125244170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125244170" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125244170">Kenny Lau (Apr 18 2018 at 10:23)</a>:</h4>
<p>there can't be two definitions of a free group</p>

<a name="125244173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125244173" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125244173">Kevin Buzzard (Apr 18 2018 at 10:23)</a>:</h4>
<p>There is generate and span</p>

<a name="125244175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125244175" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125244175">Kevin Buzzard (Apr 18 2018 at 10:23)</a>:</h4>
<p>two definitions of the submodule generated/spanned by a subset</p>

<a name="125244176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125244176" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125244176">Kenny Lau (Apr 18 2018 at 10:23)</a>:</h4>
<p>in my files</p>

<a name="125244181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125244181" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125244181">Kenny Lau (Apr 18 2018 at 10:23)</a>:</h4>
<p>only span is in mathlib</p>

<a name="125244346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125244346" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125244346">Kenny Lau (Apr 18 2018 at 10:28)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">reduce</span><span class="bp">.</span><span class="n">core</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">L</span> <span class="o">[]</span> <span class="o">:=</span> <span class="n">L</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="o">(</span><span class="n">h</span><span class="bp">::</span><span class="n">t</span><span class="o">)</span> <span class="o">:=</span> <span class="n">reduce</span><span class="bp">.</span><span class="n">core</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="n">t</span>
<span class="bp">|</span> <span class="o">((</span><span class="n">x1</span><span class="o">,</span><span class="n">tt</span><span class="o">)</span><span class="bp">::</span><span class="n">tl1</span><span class="o">)</span> <span class="o">((</span><span class="n">x2</span><span class="o">,</span><span class="n">tt</span><span class="o">)</span><span class="bp">::</span><span class="n">tl2</span><span class="o">)</span> <span class="o">:=</span>
    <span class="n">reduce</span><span class="bp">.</span><span class="n">core</span> <span class="o">((</span><span class="n">x2</span><span class="o">,</span><span class="n">tt</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">x1</span><span class="o">,</span><span class="n">tt</span><span class="o">)</span><span class="bp">::</span><span class="n">tl1</span><span class="o">)</span> <span class="n">tl2</span>
<span class="bp">|</span> <span class="o">((</span><span class="n">x1</span><span class="o">,</span><span class="n">tt</span><span class="o">)</span><span class="bp">::</span><span class="n">tl1</span><span class="o">)</span> <span class="o">((</span><span class="n">x2</span><span class="o">,</span><span class="n">ff</span><span class="o">)</span><span class="bp">::</span><span class="n">tl2</span><span class="o">)</span> <span class="o">:=</span>
    <span class="k">if</span> <span class="n">x1</span> <span class="bp">=</span> <span class="n">x2</span>
    <span class="k">then</span> <span class="n">reduce</span><span class="bp">.</span><span class="n">core</span> <span class="n">tl1</span> <span class="n">tl2</span>
    <span class="k">else</span> <span class="n">reduce</span><span class="bp">.</span><span class="n">core</span> <span class="o">((</span><span class="n">x2</span><span class="o">,</span><span class="n">ff</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">x1</span><span class="o">,</span><span class="n">tt</span><span class="o">)</span><span class="bp">::</span><span class="n">tl1</span><span class="o">)</span> <span class="n">tl2</span>
<span class="bp">|</span> <span class="o">((</span><span class="n">x1</span><span class="o">,</span><span class="n">ff</span><span class="o">)</span><span class="bp">::</span><span class="n">tl1</span><span class="o">)</span> <span class="o">((</span><span class="n">x2</span><span class="o">,</span><span class="n">tt</span><span class="o">)</span><span class="bp">::</span><span class="n">tl2</span><span class="o">)</span> <span class="o">:=</span>
    <span class="k">if</span> <span class="n">x1</span> <span class="bp">=</span> <span class="n">x2</span>
    <span class="k">then</span> <span class="n">reduce</span><span class="bp">.</span><span class="n">core</span> <span class="n">tl1</span> <span class="n">tl2</span>
    <span class="k">else</span> <span class="n">reduce</span><span class="bp">.</span><span class="n">core</span> <span class="o">((</span><span class="n">x2</span><span class="o">,</span><span class="n">tt</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">x1</span><span class="o">,</span><span class="n">ff</span><span class="o">)</span><span class="bp">::</span><span class="n">tl1</span><span class="o">)</span> <span class="n">tl2</span>
<span class="bp">|</span> <span class="o">((</span><span class="n">x1</span><span class="o">,</span><span class="n">ff</span><span class="o">)</span><span class="bp">::</span><span class="n">tl1</span><span class="o">)</span> <span class="o">((</span><span class="n">x2</span><span class="o">,</span><span class="n">ff</span><span class="o">)</span><span class="bp">::</span><span class="n">tl2</span><span class="o">)</span> <span class="o">:=</span>
    <span class="n">reduce</span><span class="bp">.</span><span class="n">core</span> <span class="o">((</span><span class="n">x2</span><span class="o">,</span><span class="n">ff</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">x1</span><span class="o">,</span><span class="n">ff</span><span class="o">)</span><span class="bp">::</span><span class="n">tl1</span><span class="o">)</span> <span class="n">tl2</span>

<span class="n">def</span> <span class="n">reduce</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">))</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">reduce</span><span class="bp">.</span><span class="n">core</span> <span class="o">[]</span> <span class="n">L</span><span class="o">)</span><span class="bp">.</span><span class="n">reverse</span>
</pre></div>

<a name="125244347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125244347" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125244347">Kenny Lau (Apr 18 2018 at 10:28)</a>:</h4>
<p>this should be correct</p>

<a name="125244461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125244461" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125244461">Kenny Lau (Apr 18 2018 at 10:31)</a>:</h4>
<p>but it would be difficult to prove anything about it</p>

<a name="125254855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125254855" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125254855">Kevin Buzzard (Apr 18 2018 at 14:57)</a>:</h4>
<p>heh</p>

<a name="125254858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125254858" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125254858">Kevin Buzzard (Apr 18 2018 at 14:57)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="n">is_comm_ring_hom</span><span class="bp">.</span><span class="n">id</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">is_ring_hom</span> <span class="o">(</span><span class="bp">@</span><span class="n">id</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">map_add</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span><span class="n">rfl</span><span class="o">,</span><span class="n">map_mul</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span><span class="n">rfl</span><span class="o">,</span><span class="n">map_one</span> <span class="o">:=</span> <span class="n">rfl</span><span class="o">}</span>
</pre></div>

<a name="125254868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125254868" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125254868">Kevin Buzzard (Apr 18 2018 at 14:57)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> could you add this to mathlib? ;-)</p>

<a name="125254923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125254923" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125254923">Kevin Buzzard (Apr 18 2018 at 14:58)</a>:</h4>
<p>Or tell me where to put it.</p>

<a name="125254943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125254943" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125254943">Kevin Buzzard (Apr 18 2018 at 14:58)</a>:</h4>
<p>in ring.lean, just after definition of is_ring_hom?</p>

<a name="125254960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125254960" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125254960">Kevin Buzzard (Apr 18 2018 at 14:59)</a>:</h4>
<p>Is there a better proof? Some "meta-rfl" tactic?</p>

<a name="125255008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255008" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255008">Patrick Massot (Apr 18 2018 at 15:00)</a>:</h4>
<p>Sounds like a job for Scott's <code>obviously</code> tactic</p>

<a name="125255033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255033" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255033">Patrick Massot (Apr 18 2018 at 15:01)</a>:</h4>
<p>but it's not yet in mathlib</p>

<a name="125255041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255041" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255041">Kevin Buzzard (Apr 18 2018 at 15:01)</a>:</h4>
<p>Patrick, this is what the world has come to. Kenny has defined localization maps and of course there are equivalence classes everywhere, and I'm not very experienced with using them. But Kenny has written a sufficiently good interface (universal properties of localization, basically guided by the needs I had for schemes) that I can work with localizations without ever needing to think about quotient types.</p>

<a name="125255053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255053" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255053">Kevin Buzzard (Apr 18 2018 at 15:01)</a>:</h4>
<p>So I need to prove that the canonical map R[1/S] -&gt; R[1/S] is the identity map</p>

<a name="125255113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255113" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255113">Kevin Buzzard (Apr 18 2018 at 15:02)</a>:</h4>
<p>and I can either attempt to do this by unravelling the definition and getting my hands dirty</p>

<a name="125255123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255123" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255123">Kevin Buzzard (Apr 18 2018 at 15:02)</a>:</h4>
<p>or I can do it by observing that the identity map is an R-algebra homomorphism R[1/S] -&gt; R[1/S] and hence it's the canonical map, by some universal property :P</p>

<a name="125255126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255126" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255126">Patrick Massot (Apr 18 2018 at 15:02)</a>:</h4>
<p>one could also take this as an exercise in tactic writing: write a tactic doing that kind of proof that <code>id</code> is a morphism of anything (this should be easy after reading <span class="user-mention" data-user-id="110026">@Simon Hudon</span> 's tutorial about how he wrote the pi instance tactic)</p>

<a name="125255147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255147" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255147">Kevin Buzzard (Apr 18 2018 at 15:03)</a>:</h4>
<p>and because I don't like quotient types I will use the universal property.</p>

<a name="125255155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255155" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255155">Patrick Massot (Apr 18 2018 at 15:03)</a>:</h4>
<p>Nice</p>

<a name="125255159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255159" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255159">Kevin Buzzard (Apr 18 2018 at 15:03)</a>:</h4>
<p>And I think this shows exactly the point that Mario was explaining to me the other day.</p>

<a name="125255176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255176" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255176">Patrick Massot (Apr 18 2018 at 15:03)</a>:</h4>
<p>About interfaces?</p>

<a name="125255179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255179" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255179">Patrick Massot (Apr 18 2018 at 15:03)</a>:</h4>
<p>Yes</p>

<a name="125255182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255182" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255182">Kevin Buzzard (Apr 18 2018 at 15:03)</a>:</h4>
<p>If the interface (which he did actually describe as "a bunch of universal properties" at the time) is good enough</p>

<a name="125255185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255185" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255185">Kevin Buzzard (Apr 18 2018 at 15:03)</a>:</h4>
<p>then you don't ever need to worry about the details</p>

<a name="125255226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255226" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255226">Kevin Buzzard (Apr 18 2018 at 15:04)</a>:</h4>
<p>of how it is implemented</p>

<a name="125255247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255247" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255247">Kevin Buzzard (Apr 18 2018 at 15:04)</a>:</h4>
<p>and indeed I can believe that any direct proof that it's the identity might break if some underlying way of implementing equivalence relations changed</p>

<a name="125255255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255255" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255255">Kevin Buzzard (Apr 18 2018 at 15:04)</a>:</h4>
<p>but my universal property definition will never break</p>

<a name="125255257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255257" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255257">Kevin Buzzard (Apr 18 2018 at 15:04)</a>:</h4>
<p>That is crazy.</p>

<a name="125255279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255279" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255279">Patrick Massot (Apr 18 2018 at 15:05)</a>:</h4>
<p>yes, it's great</p>

<a name="125255306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255306" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255306">Kevin Buzzard (Apr 18 2018 at 15:05)</a>:</h4>
<p>tactic tutorial did you say??</p>

<a name="125255358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255358" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255358">Patrick Massot (Apr 18 2018 at 15:06)</a>:</h4>
<p>I think maths papers should also be written like this. Many math papers lack encapsulation of technical details</p>

<a name="125255370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255370" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255370">Kevin Buzzard (Apr 18 2018 at 15:06)</a>:</h4>
<p>I don't know if we are the mad ones or the sane ones</p>

<a name="125255385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255385" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255385">Patrick Massot (Apr 18 2018 at 15:06)</a>:</h4>
<p>Yes, Simon is writing some tutorial</p>

<a name="125255395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255395" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255395">Patrick Massot (Apr 18 2018 at 15:07)</a>:</h4>
<p>Or at least he intends to do it, and I remind him from time to time.</p>

<a name="125255407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255407" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255407">Patrick Massot (Apr 18 2018 at 15:07)</a>:</h4>
<p>Which is really unfair because I lack time for all my Lean projects</p>

<a name="125255426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255426" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255426">Patrick Massot (Apr 18 2018 at 15:07)</a>:</h4>
<p>But in three weeks I'll be done with teaching and I hope I'll be able to work more seriously on Lean stuff</p>

<a name="125255520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255520" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255520">Sean Leather (Apr 18 2018 at 15:09)</a>:</h4>
<blockquote>
<p>If the interface (which he did actually describe as "a bunch of universal properties" at the time) is good enough<br>
then you don't ever need to worry about the details<br>
of how it is implemented</p>
</blockquote>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I think I agree with this. But, just for my education, what is the definition of “universal” here?</p>

<a name="125255607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255607" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255607">Patrick Massot (Apr 18 2018 at 15:11)</a>:</h4>
<p>I'm giving a graduate course and tomorrow and next lecture are about <a href="https://arxiv.org/abs/1201.2245" target="_blank" title="https://arxiv.org/abs/1201.2245">https://arxiv.org/abs/1201.2245</a> And a new version came out on arXiv on Monday, after five years without moving. Since then I've been reading like crazy to understand why she changed so many things</p>

<a name="125255629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255629" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255629">Patrick Massot (Apr 18 2018 at 15:11)</a>:</h4>
<p>Good news is the new version contains something which is much closer to an actual proof of the main theorem</p>

<a name="125255687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255687" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255687">Patrick Massot (Apr 18 2018 at 15:12)</a>:</h4>
<p>But that doesn't leave much time for Lean</p>

<a name="125255757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255757" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255757">Patrick Massot (Apr 18 2018 at 15:14)</a>:</h4>
<p>Sean: <a href="https://en.wikipedia.org/wiki/Universal_property" target="_blank" title="https://en.wikipedia.org/wiki/Universal_property">https://en.wikipedia.org/wiki/Universal_property</a></p>

<a name="125255801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255801" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255801">Kevin Buzzard (Apr 18 2018 at 15:14)</a>:</h4>
<p>Sean -- I asked Kenny to type up some basic constructions of localization of rings at multiplicative sets in Lean. Kenny read a book on commutative algebra and did it</p>

<a name="125255811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255811" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255811">Kevin Buzzard (Apr 18 2018 at 15:14)</a>:</h4>
<p>I then realised I couldn't use his constructions at all because to access any element of the localized ring I needed to start playing around with quotient types</p>

<a name="125255845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255845">Kevin Buzzard (Apr 18 2018 at 15:15)</a>:</h4>
<p>so I asked him if he could also prove various results of the form "if some situation is true, then there's a map from some ring to a localized ring"</p>

<a name="125255848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255848" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255848">Kevin Buzzard (Apr 18 2018 at 15:15)</a>:</h4>
<p>or "if some situation is true, then there's a map from a localized ring to some ring"</p>

<a name="125255849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255849" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255849">Kevin Buzzard (Apr 18 2018 at 15:15)</a>:</h4>
<p>and he did this</p>

<a name="125255853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255853" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255853">Kevin Buzzard (Apr 18 2018 at 15:15)</a>:</h4>
<p>and then I realised that I still couldn't prove half the things I wanted to prove</p>

<a name="125255911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255911" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255911">Kevin Buzzard (Apr 18 2018 at 15:16)</a>:</h4>
<p>so I asked him if he could prove various results of the form "if some situation is true, then there's a map from some ring to some localized ring and furthermore it is the unique map with some property"</p>

<a name="125255915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255915" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255915">Kevin Buzzard (Apr 18 2018 at 15:16)</a>:</h4>
<p>and similarly the other way around</p>

<a name="125255920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255920" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255920">Kevin Buzzard (Apr 18 2018 at 15:16)</a>:</h4>
<p>and then I could prove everything I needed</p>

<a name="125255922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255922" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255922">Kevin Buzzard (Apr 18 2018 at 15:17)</a>:</h4>
<p>but then to my surprise</p>

<a name="125255938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255938" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255938">Kevin Buzzard (Apr 18 2018 at 15:17)</a>:</h4>
<p>I realised that statements of the form "this map that Kenny defined is the identity map"</p>

<a name="125255941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255941" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255941">Kevin Buzzard (Apr 18 2018 at 15:17)</a>:</h4>
<p>which I needed to prove</p>

<a name="125255953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125255953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125255953">Kevin Buzzard (Apr 18 2018 at 15:17)</a>:</h4>
<p>even such statements as that, which my gut instinct said "this proof should be refl"</p>

<a name="125256011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256011" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256011">Kevin Buzzard (Apr 18 2018 at 15:18)</a>:</h4>
<p>I realised I was proving by showing that the identity map had the property required of Kenny's map, and hence was Kenny's map</p>

<a name="125256017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256017" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256017">Kevin Buzzard (Apr 18 2018 at 15:18)</a>:</h4>
<p>and this has had the joyous consequence</p>

<a name="125256020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256020">Kevin Buzzard (Apr 18 2018 at 15:18)</a>:</h4>
<p>that I never once have to write an equivalence class</p>

<a name="125256021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256021" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256021">Kevin Buzzard (Apr 18 2018 at 15:18)</a>:</h4>
<p>which is great</p>

<a name="125256023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256023" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256023">Kevin Buzzard (Apr 18 2018 at 15:18)</a>:</h4>
<p>because I don't know if it's just me</p>

<a name="125256029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256029" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256029">Kevin Buzzard (Apr 18 2018 at 15:19)</a>:</h4>
<p>but whenever I type <code>\[[</code> it doesn't work properly</p>

<a name="125256036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256036" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256036">Kevin Buzzard (Apr 18 2018 at 15:19)</a>:</h4>
<p>I get <code>\[[]]</code></p>

<a name="125256042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256042" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256042">Kenny Lau (Apr 18 2018 at 15:19)</a>:</h4>
<p>so you manually delete the extra closing brackets and press space to enter it</p>

<a name="125256053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256053" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256053">Kevin Buzzard (Apr 18 2018 at 15:19)</a>:</h4>
<p>instead of <code>⟦</code></p>

<a name="125256058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256058" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256058">Kevin Buzzard (Apr 18 2018 at 15:19)</a>:</h4>
<p>aah, you are an equivalence relation expert</p>

<a name="125256064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256064" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256064">Kevin Buzzard (Apr 18 2018 at 15:19)</a>:</h4>
<p>instead of doing that</p>

<a name="125256068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256068" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256068">Kevin Buzzard (Apr 18 2018 at 15:20)</a>:</h4>
<p>I get you to write me an interface ;-)</p>

<a name="125256142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256142" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256142">Sean Leather (Apr 18 2018 at 15:21)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> So, am I right in that you are describing a sort of minimum set of properties for a given definition that allow you to prove something without having to unfold the given definition?</p>

<a name="125256146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256146" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256146">Kevin Buzzard (Apr 18 2018 at 15:21)</a>:</h4>
<p>right</p>

<a name="125256204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256204" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256204">Kevin Buzzard (Apr 18 2018 at 15:22)</a>:</h4>
<p>but somehow in the past I knew that this sort of thing was sometimes possible</p>

<a name="125256208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256208" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256208">Sean Leather (Apr 18 2018 at 15:22)</a>:</h4>
<p>That's what I thought. Is that the same thing as <a href="https://en.wikipedia.org/wiki/Universal_property" target="_blank" title="https://en.wikipedia.org/wiki/Universal_property">https://en.wikipedia.org/wiki/Universal_property</a> as <span class="user-mention" data-user-id="110031">@Patrick Massot</span> referred to? I didn't think so.</p>

<a name="125256211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256211" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256211">Kevin Buzzard (Apr 18 2018 at 15:22)</a>:</h4>
<p>but when it came to the identity map, I didn't care</p>

<a name="125256219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256219" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256219">Kevin Buzzard (Apr 18 2018 at 15:22)</a>:</h4>
<p>because "one can easily check that this map is the identity map from the construction"</p>

<a name="125256226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256226" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256226">Kevin Buzzard (Apr 18 2018 at 15:22)</a>:</h4>
<p>at least, I would not be scared to write that in a maths paper</p>

<a name="125256230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256230" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256230">Kevin Buzzard (Apr 18 2018 at 15:22)</a>:</h4>
<p>but in this situation I am so scared to prove anything directly from the construction</p>

<a name="125256240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256240" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256240">Patrick Massot (Apr 18 2018 at 15:23)</a>:</h4>
<p>Kevin, that's also the same idea in <a href="#narrow/stream/113488-general/subject/.60_.60.20style.20and.20order.20of.20goals/near/125119384" title="#narrow/stream/113488-general/subject/.60_.60.20style.20and.20order.20of.20goals/near/125119384">https://leanprover.zulipchat.com/#narrow/stream/113488-general/subject/.60_.60.20style.20and.20order.20of.20goals/near/125119384</a></p>

<a name="125256243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256243" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256243">Kevin Buzzard (Apr 18 2018 at 15:23)</a>:</h4>
<p>that it has only now dawned on me that even trivial things which I would usually prove directly from the construction can be done via the interface</p>

<a name="125256246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256246" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256246">Kevin Buzzard (Apr 18 2018 at 15:23)</a>:</h4>
<p>Oh is it?</p>

<a name="125256248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256248" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256248">Kevin Buzzard (Apr 18 2018 at 15:23)</a>:</h4>
<p>I didn't understand that comment</p>

<a name="125256256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256256" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256256">Patrick Massot (Apr 18 2018 at 15:23)</a>:</h4>
<p>I guessed so, that's why I'm referring to it now</p>

<a name="125256297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256297" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256297">Kevin Buzzard (Apr 18 2018 at 15:24)</a>:</h4>
<p>That comment is starred for "come back to this when your daughter is not off school sick"</p>

<a name="125256299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256299" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256299">Patrick Massot (Apr 18 2018 at 15:24)</a>:</h4>
<p>I'm talking about the first bullet</p>

<a name="125256318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256318">Kevin Buzzard (Apr 18 2018 at 15:25)</a>:</h4>
<p>I kind of think/hope that the general technique I picked up when working on those proofs was the thing Mario was trying to explain to me there</p>

<a name="125256330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256330" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256330">Kevin Buzzard (Apr 18 2018 at 15:25)</a>:</h4>
<p>but I've not had time to internalise it yet.</p>

<a name="125256336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256336" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256336">Kevin Buzzard (Apr 18 2018 at 15:25)</a>:</h4>
<p>I can really see the light at the end of the tunnel for affine schemes now.</p>

<a name="125256346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256346" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256346">Patrick Massot (Apr 18 2018 at 15:25)</a>:</h4>
<p>Great!</p>

<a name="125256348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256348" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256348">Kevin Buzzard (Apr 18 2018 at 15:25)</a>:</h4>
<p>Chris did the ghastly ring theory multinomial theorem lemma which I was putting off</p>

<a name="125256394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256394">Kevin Buzzard (Apr 18 2018 at 15:26)</a>:</h4>
<p>and what is left, I believe, is the kind of mathematics which is really good fun to type into Lean</p>

<a name="125256403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256403" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256403">Kevin Buzzard (Apr 18 2018 at 15:26)</a>:</h4>
<p>i.e. it's just universal property after universal property</p>

<a name="125256425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256425" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256425">Kevin Buzzard (Apr 18 2018 at 15:26)</a>:</h4>
<p>The last 5 theorems I proved had proofs of the form <code>name_of_universal_property_theorem _ _ _ _</code></p>

<a name="125256441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256441">Kevin Buzzard (Apr 18 2018 at 15:27)</a>:</h4>
<p>i.e. exactly what one would write in mathematics:</p>

<a name="125256446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256446" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256446">Kevin Buzzard (Apr 18 2018 at 15:27)</a>:</h4>
<p>"this follows from the universal property"</p>

<a name="125256456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256456" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256456">Kevin Buzzard (Apr 18 2018 at 15:28)</a>:</h4>
<p>except that one failed because Lean didn't know the identity was a ring hom ;-)</p>

<a name="125256511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256511" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256511">Simon Hudon (Apr 18 2018 at 15:28)</a>:</h4>
<p>Have I already published the tutorial?</p>

<a name="125256532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256532" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256532">Patrick Massot (Apr 18 2018 at 15:29)</a>:</h4>
<p>Not yet</p>

<a name="125256533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256533" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256533">Patrick Massot (Apr 18 2018 at 15:29)</a>:</h4>
<p>You are about to do it</p>

<a name="125256542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125256542" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125256542">Simon Hudon (Apr 18 2018 at 15:29)</a>:</h4>
<p>Oh! Thanks for keeping me up-to-date!</p>

<a name="125267684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125267684" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125267684">Kenny Lau (Apr 18 2018 at 19:27)</a>:</h4>
<p>Done!</p>

<a name="125267686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125267686" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125267686">Kenny Lau (Apr 18 2018 at 19:27)</a>:</h4>
<p><a href="https://github.com/kckennylau/Lean/blob/master/free_group.lean" target="_blank" title="https://github.com/kckennylau/Lean/blob/master/free_group.lean">https://github.com/kckennylau/Lean/blob/master/free_group.lean</a></p>

<a name="125267689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125267689" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125267689">Kenny Lau (Apr 18 2018 at 19:27)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> do you see how to shorten my proofs?</p>

<a name="125267750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125267750" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125267750">Kenny Lau (Apr 18 2018 at 19:28)</a>:</h4>
<p><span class="user-mention" data-user-id="110294">@Johannes Hölzl</span></p>

<a name="125267882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125267882" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125267882">Johannes Hölzl (Apr 18 2018 at 19:31)</a>:</h4>
<p>What helped in my approach: not using <code>setoid</code> and <code>quotient</code> but <code>quot</code>. Also I introduced a <code>refl_trans</code> and <code>refl_cl</code> to handle the relations and a general version of Church-Rosser. I guess using <code>append_eq_append_iff</code>, together with <code>case_matching*</code> was useful automation.</p>

<a name="125268207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125268207" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125268207">Johannes Hölzl (Apr 18 2018 at 19:39)</a>:</h4>
<p>I don't combine the transitive closure and the reduction relation.</p>

<a name="125290928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125290928" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125290928">Kenny Lau (Apr 19 2018 at 06:14)</a>:</h4>
<p><span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> do we mind reversing the direction of <code>red</code> to conform with wf conventions?</p>

<a name="125290929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125290929" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125290929">Johannes Hölzl (Apr 19 2018 at 06:14)</a>:</h4>
<p>no</p>

<a name="125290933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125290933" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125290933">Mario Carneiro (Apr 19 2018 at 06:15)</a>:</h4>
<p>I'm disinclined to because it would break reduction conventions</p>

<a name="125290939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125290939" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125290939">Mario Carneiro (Apr 19 2018 at 06:15)</a>:</h4>
<p>i.e. church rosser is completely different the other way around</p>

<a name="125290943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125290943" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125290943">Kenny Lau (Apr 19 2018 at 06:15)</a>:</h4>
<p>the automater doesn’t work well though</p>

<a name="125290944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125290944" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125290944">Mario Carneiro (Apr 19 2018 at 06:15)</a>:</h4>
<p>(it's called something like noetherian in this case)</p>

<a name="125290988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125290988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125290988">Mario Carneiro (Apr 19 2018 at 06:16)</a>:</h4>
<p>If you use <code>tactic.assumption</code> as the discharger, it should reduce the <code>swap</code></p>

<a name="125290990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125290990" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125290990">Mario Carneiro (Apr 19 2018 at 06:16)</a>:</h4>
<p>you could also state your hypothesis with <code>swap</code></p>

<a name="125291017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125291017" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125291017">Kenny Lau (Apr 19 2018 at 06:17)</a>:</h4>
<p>this is the problem</p>

<a name="125291018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125291018" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125291018">Kenny Lau (Apr 19 2018 at 06:17)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">bnot</span> <span class="o">{</span><span class="n">L₁</span> <span class="n">L₂</span> <span class="n">x</span> <span class="n">b</span><span class="o">}</span> <span class="o">:</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="o">(</span><span class="n">L₁</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L₂</span><span class="o">)</span> <span class="o">(</span><span class="n">L₁</span> <span class="bp">++</span> <span class="n">L₂</span><span class="o">)</span>

<span class="kn">inductive</span> <span class="n">red</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">refl</span> <span class="o">{</span><span class="n">L</span><span class="o">}</span> <span class="o">:</span> <span class="n">red</span> <span class="n">L</span> <span class="n">L</span>
<span class="bp">|</span> <span class="n">trans_step</span> <span class="o">{</span><span class="n">L₁</span> <span class="n">L₂</span> <span class="n">L₃</span><span class="o">}</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">free_group</span><span class="bp">.</span><span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="n">L₂</span> <span class="n">L₃</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">red</span> <span class="n">L₁</span> <span class="n">L₂</span> <span class="bp">→</span> <span class="n">red</span> <span class="n">L₁</span> <span class="n">L₃</span>
</pre></div>

<a name="125291019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125291019" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125291019">Kenny Lau (Apr 19 2018 at 06:18)</a>:</h4>
<p>so I defined things like this</p>

<a name="125291060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125291060" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125291060">Kenny Lau (Apr 19 2018 at 06:18)</a>:</h4>
<p>now I'm in this stage:</p>
<div class="codehilite"><pre><span></span><span class="n">H1</span> <span class="o">:</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="n">L2</span> <span class="n">L₂</span><span class="o">,</span>
<span class="n">H2</span> <span class="o">:</span> <span class="n">red</span> <span class="n">L₁</span> <span class="n">L2</span>
</pre></div>

<a name="125291064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125291064" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125291064">Kenny Lau (Apr 19 2018 at 06:18)</a>:</h4>
<p>so if I want to prove something with <code>L₁</code> and <code>L₂</code>, then I would recursion on <code>H2</code> right</p>

<a name="125291073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125291073" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125291073">Kenny Lau (Apr 19 2018 at 06:19)</a>:</h4>
<p>then somehow the automater wants me to prove this:</p>
<div class="codehilite"><pre><span></span><span class="err">⊢</span> <span class="n">function</span><span class="bp">.</span><span class="n">swap</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="n">L₁</span> <span class="n">L₁</span>
</pre></div>

<a name="125291111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125291111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125291111">Mario Carneiro (Apr 19 2018 at 06:20)</a>:</h4>
<p>What is the setup of your induction?</p>

<a name="125291122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125291122" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125291122">Kenny Lau (Apr 19 2018 at 06:21)</a>:</h4>
<p>I want to prove that red L1 L2 -&gt; red (inv L1) (inv L2)</p>

<a name="125291130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125291130" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125291130">Kenny Lau (Apr 19 2018 at 06:21)</a>:</h4>
<p>I’m starting to believe that my approach won’t work because it’s in the wrong direction</p>

<a name="125291252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125291252" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125291252">Kenny Lau (Apr 19 2018 at 06:24)</a>:</h4>
<p>I’ll just define red differently then</p>

<a name="125304550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125304550" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125304550">Kenny Lau (Apr 19 2018 at 13:06)</a>:</h4>
<p>I have renamed this thread to "free group"</p>

<a name="125304556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125304556" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125304556">Kenny Lau (Apr 19 2018 at 13:06)</a>:</h4>
<p>in other news, I shortened the file a bit more: <a href="https://github.com/kckennylau/Lean/blob/master/free_group.lean" target="_blank" title="https://github.com/kckennylau/Lean/blob/master/free_group.lean">https://github.com/kckennylau/Lean/blob/master/free_group.lean</a></p>

<a name="125304562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125304562" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125304562">Kenny Lau (Apr 19 2018 at 13:06)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> could you have a look?</p>

<a name="125304769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125304769" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125304769">Kenny Lau (Apr 19 2018 at 13:11)</a>:</h4>
<p>not a single negation in my file :P</p>

<a name="125306426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125306426" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125306426">Johannes Hölzl (Apr 19 2018 at 13:52)</a>:</h4>
<p>Just looking at the proof: it looks like <code>red.step.church_rosser</code> could be made smaller by wlog after the case <code>list.prefix_or_prefix_of_append_eq_append </code>? At least the proof structure looks very similar.</p>

<a name="125306474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125306474" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125306474">Kenny Lau (Apr 19 2018 at 13:52)</a>:</h4>
<p><span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> I just shortened red.step.church_rosser by 10 lines</p>

<a name="125306477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125306477" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125306477">Kenny Lau (Apr 19 2018 at 13:52)</a>:</h4>
<p>now it spans 34 lines and does not depend on <code>list.prefix_or_prefix_of_append_eq_append</code></p>

<a name="125306478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125306478" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125306478">Kenny Lau (Apr 19 2018 at 13:52)</a>:</h4>
<p>I feel good</p>

<a name="125306483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125306483" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125306483">Johannes Hölzl (Apr 19 2018 at 13:53)</a>:</h4>
<p>nice</p>

<a name="125306484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125306484" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125306484">Kenny Lau (Apr 19 2018 at 13:53)</a>:</h4>
<p>this means I can now convert it to equation compiler and save more lines</p>

<a name="125306553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125306553" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125306553">Kenny Lau (Apr 19 2018 at 13:54)</a>:</h4>
<blockquote>
<p>Just looking at the proof: it looks like <code>red.step.church_rosser</code> could be made smaller by wlog after the case <code>list.prefix_or_prefix_of_append_eq_append </code>? At least the proof structure looks very similar.</p>
</blockquote>
<p>right, but I just can't find a way for wlog to work</p>

<a name="125306564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125306564" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125306564">Kenny Lau (Apr 19 2018 at 13:55)</a>:</h4>
<p><a href="#narrow/stream/113488-general/topic/wlog.20example" title="#narrow/stream/113488-general/topic/wlog.20example">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/wlog.20example</a></p>

<a name="125306566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125306566" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125306566">Kenny Lau (Apr 19 2018 at 13:55)</a>:</h4>
<p>nobody replied</p>

<a name="125306654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125306654" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125306654">Johannes Hölzl (Apr 19 2018 at 13:57)</a>:</h4>
<p>I didn't mean to use directly the <code>wlog</code> tactic. I meant to do the following: state the theorem, and use it to proof one direction, and then the second one by the corresponding application of symmetry and AC (associativity and commutativity of append, and etc)</p>

<a name="125306704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125306704" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125306704">Kenny Lau (Apr 19 2018 at 13:58)</a>:</h4>
<p>that's disgusting</p>

<a name="125306709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125306709" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125306709">Kenny Lau (Apr 19 2018 at 13:58)</a>:</h4>
<p>I would rather wait for them to fix wlog</p>

<a name="125306788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125306788" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125306788">Kenny Lau (Apr 19 2018 at 14:00)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="o">{</span> <span class="n">injections</span><span class="o">,</span> <span class="n">subst_vars</span><span class="o">,</span> <span class="n">simp</span> <span class="o">}</span>
</pre></div>

<a name="125306791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125306791" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125306791">Kenny Lau (Apr 19 2018 at 14:00)</a>:</h4>
<p>I used this so much, this should be a tactic</p>

<a name="125306820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125306820" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125306820">Johannes Hölzl (Apr 19 2018 at 14:01)</a>:</h4>
<p>What? Why is it <strong>disgusting</strong>? That's how you do it. You can work on changing wlog yourself!</p>

<a name="125306844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125306844" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125306844">Kenny Lau (Apr 19 2018 at 14:01)</a>:</h4>
<p>anyway</p>

<a name="125308690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125308690" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125308690">Kenny Lau (Apr 19 2018 at 14:46)</a>:</h4>
<p>13 lines lost!</p>

<a name="125308693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125308693" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125308693">Kenny Lau (Apr 19 2018 at 14:46)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span><span class="bp">.</span><span class="n">church_rosser</span><span class="bp">.</span><span class="n">aux2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">L₁</span> <span class="n">L₂</span> <span class="n">L₃</span> <span class="n">L₄</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)}</span> <span class="o">{</span><span class="n">x1</span> <span class="n">b1</span> <span class="n">x2</span> <span class="n">b2</span><span class="o">},</span>
  <span class="n">L₁</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x1</span><span class="o">,</span> <span class="n">b1</span><span class="o">)</span> <span class="bp">::</span> <span class="o">(</span><span class="n">x1</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b1</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L₂</span> <span class="bp">=</span> <span class="n">L₃</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x2</span><span class="o">,</span> <span class="n">b2</span><span class="o">)</span> <span class="bp">::</span> <span class="o">(</span><span class="n">x2</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b2</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L₄</span> <span class="bp">→</span>
  <span class="n">L₁</span> <span class="bp">++</span> <span class="n">L₂</span> <span class="bp">=</span> <span class="n">L₃</span> <span class="bp">++</span> <span class="n">L₄</span> <span class="bp">∨</span> <span class="bp">∃</span> <span class="n">L₅</span><span class="o">,</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="o">(</span><span class="n">L₁</span> <span class="bp">++</span> <span class="n">L₂</span><span class="o">)</span> <span class="n">L₅</span> <span class="bp">∧</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="o">(</span><span class="n">L₃</span> <span class="bp">++</span> <span class="n">L₄</span><span class="o">)</span> <span class="n">L₅</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="bp">_</span> <span class="o">[]</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">H</span>  <span class="o">:=</span>
  <span class="k">by</span> <span class="n">injections</span><span class="bp">;</span> <span class="n">subst_vars</span><span class="bp">;</span> <span class="n">simp</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="bp">_</span> <span class="o">[(</span><span class="n">x3</span><span class="o">,</span><span class="n">b3</span><span class="o">)]</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">H</span> <span class="o">:=</span>
  <span class="k">by</span> <span class="n">injections</span><span class="bp">;</span> <span class="n">subst_vars</span><span class="bp">;</span> <span class="n">simp</span>
<span class="bp">|</span> <span class="o">[(</span><span class="n">x3</span><span class="o">,</span><span class="n">b3</span><span class="o">)]</span> <span class="bp">_</span> <span class="o">[]</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">H</span> <span class="o">:=</span>
  <span class="k">by</span> <span class="n">injections</span><span class="bp">;</span> <span class="n">subst_vars</span><span class="bp">;</span> <span class="n">simp</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="bp">_</span> <span class="o">((</span><span class="n">x3</span><span class="o">,</span><span class="n">b3</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">x4</span><span class="o">,</span><span class="n">b4</span><span class="o">)</span><span class="bp">::</span><span class="n">tl</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">H</span> <span class="o">:=</span>
  <span class="k">by</span> <span class="n">injections</span><span class="bp">;</span> <span class="n">subst_vars</span><span class="bp">;</span> <span class="n">simp</span><span class="bp">;</span> <span class="n">right</span><span class="bp">;</span> <span class="n">exact</span> <span class="bp">⟨_</span><span class="o">,</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span><span class="bp">.</span><span class="n">bnot</span><span class="o">,</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span><span class="bp">.</span><span class="n">cons_bnot</span><span class="bp">⟩</span>
<span class="bp">|</span> <span class="o">((</span><span class="n">x3</span><span class="o">,</span><span class="n">b3</span><span class="o">)</span><span class="bp">::</span><span class="o">(</span><span class="n">x4</span><span class="o">,</span><span class="n">b4</span><span class="o">)</span><span class="bp">::</span><span class="n">tl</span><span class="o">)</span> <span class="bp">_</span> <span class="o">[]</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">H</span> <span class="o">:=</span>
  <span class="k">by</span> <span class="n">injections</span><span class="bp">;</span> <span class="n">subst_vars</span><span class="bp">;</span> <span class="n">simp</span><span class="bp">;</span> <span class="n">right</span><span class="bp">;</span> <span class="n">exact</span> <span class="bp">⟨_</span><span class="o">,</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span><span class="bp">.</span><span class="n">cons_bnot</span><span class="o">,</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span><span class="bp">.</span><span class="n">bnot</span><span class="bp">⟩</span>
<span class="bp">|</span> <span class="o">((</span><span class="n">x3</span><span class="o">,</span><span class="n">b3</span><span class="o">)</span><span class="bp">::</span><span class="n">tl</span><span class="o">)</span> <span class="bp">_</span> <span class="o">((</span><span class="n">x4</span><span class="o">,</span><span class="n">b4</span><span class="o">)</span><span class="bp">::</span><span class="n">tl2</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">H</span> <span class="o">:=</span>
  <span class="k">let</span> <span class="bp">⟨</span><span class="n">H1</span><span class="o">,</span> <span class="n">H2</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">list</span><span class="bp">.</span><span class="n">cons</span><span class="bp">.</span><span class="n">inj</span> <span class="n">H</span> <span class="k">in</span>
  <span class="k">match</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span><span class="bp">.</span><span class="n">church_rosser</span><span class="bp">.</span><span class="n">aux2</span> <span class="n">H2</span> <span class="k">with</span>
    <span class="bp">|</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span> <span class="n">H3</span> <span class="o">:=</span> <span class="n">or</span><span class="bp">.</span><span class="n">inl</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">H1</span><span class="o">,</span> <span class="n">H3</span><span class="o">]</span>
    <span class="bp">|</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span> <span class="bp">⟨</span><span class="n">L₅</span><span class="o">,</span> <span class="n">H3</span><span class="o">,</span> <span class="n">H4</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">or</span><span class="bp">.</span><span class="n">inr</span> <span class="bp">⟨_</span><span class="o">,</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span><span class="bp">.</span><span class="n">cons</span> <span class="n">H3</span><span class="o">,</span> <span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">H1</span><span class="o">]</span> <span class="kn">using</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span><span class="bp">.</span><span class="n">cons</span> <span class="n">H4</span><span class="bp">⟩</span>
  <span class="kn">end</span>

<span class="kn">theorem</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span><span class="bp">.</span><span class="n">church_rosser</span><span class="bp">.</span><span class="n">aux</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">L₁</span> <span class="n">L₂</span> <span class="n">L₃</span> <span class="n">L₄</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)},</span>
  <span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="n">L₁</span> <span class="n">L₃</span> <span class="bp">→</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="n">L₂</span> <span class="n">L₄</span> <span class="bp">→</span> <span class="n">L₁</span> <span class="bp">=</span> <span class="n">L₂</span> <span class="bp">→</span>
  <span class="n">L₃</span> <span class="bp">=</span> <span class="n">L₄</span> <span class="bp">∨</span> <span class="bp">∃</span> <span class="n">L₅</span><span class="o">,</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="n">L₃</span> <span class="n">L₅</span> <span class="bp">∧</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="n">L₄</span> <span class="n">L₅</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span><span class="bp">.</span><span class="n">bnot</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span><span class="bp">.</span><span class="n">bnot</span> <span class="n">H</span> <span class="o">:=</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span><span class="bp">.</span><span class="n">church_rosser</span><span class="bp">.</span><span class="n">aux2</span> <span class="n">H</span>

<span class="kn">theorem</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span><span class="bp">.</span><span class="n">church_rosser</span> <span class="o">(</span><span class="n">H12</span> <span class="o">:</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="n">L₁</span> <span class="n">L₂</span><span class="o">)</span> <span class="o">(</span><span class="n">H13</span> <span class="o">:</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="n">L₁</span> <span class="n">L₃</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">L₂</span> <span class="bp">=</span> <span class="n">L₃</span> <span class="bp">∨</span> <span class="bp">∃</span> <span class="n">L₄</span><span class="o">,</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="n">L₂</span> <span class="n">L₄</span> <span class="bp">∧</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="n">L₃</span> <span class="n">L₄</span> <span class="o">:=</span>
<span class="n">red</span><span class="bp">.</span><span class="n">step</span><span class="bp">.</span><span class="n">church_rosser</span><span class="bp">.</span><span class="n">aux</span> <span class="n">H12</span> <span class="n">H13</span> <span class="n">rfl</span>
</pre></div>

<a name="125308696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125308696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125308696">Patrick Massot (Apr 19 2018 at 14:46)</a>:</h4>
<p>Be careful not to drop to zero</p>

<a name="125308698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125308698" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125308698">Kenny Lau (Apr 19 2018 at 14:46)</a>:</h4>
<p>probably can delete some newlines</p>

<a name="125308713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125308713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125308713">Patrick Massot (Apr 19 2018 at 14:47)</a>:</h4>
<p>That's what my PhD advisor used to say</p>

<a name="125340029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125340029" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125340029">Kenny Lau (Apr 20 2018 at 04:28)</a>:</h4>
<p><a href="https://github.com/kckennylau/Lean/blob/master/free_group.lean" target="_blank" title="https://github.com/kckennylau/Lean/blob/master/free_group.lean">https://github.com/kckennylau/Lean/blob/master/free_group.lean</a></p>

<a name="125340064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125340064" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125340064">Kenny Lau (Apr 20 2018 at 04:28)</a>:</h4>
<p>now it is 531 lines</p>

<a name="125340072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125340072" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125340072">Kenny Lau (Apr 20 2018 at 04:28)</a>:</h4>
<p>Johannes's file is 486 lines</p>

<a name="125340073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125340073" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125340073">Kenny Lau (Apr 20 2018 at 04:28)</a>:</h4>
<p>only 45 lines to go :P</p>

<a name="125342476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125342476" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125342476">Johannes Hölzl (Apr 20 2018 at 05:58)</a>:</h4>
<p>But my file is not finished! There are a couple of proofs missing... So i guess 531 lines are good enough</p>

<a name="125342482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125342482" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125342482">Kenny Lau (Apr 20 2018 at 05:58)</a>:</h4>
<p>Could I insist to use <code>quotient</code>? <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span></p>

<a name="125342490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125342490" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125342490">Kenny Lau (Apr 20 2018 at 05:59)</a>:</h4>
<p>you seem to have developed some theories of the transitive and reflexive closure of general reduction propositions though</p>

<a name="125342492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125342492" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125342492">Kenny Lau (Apr 20 2018 at 05:59)</a>:</h4>
<p>maybe you could put that theories in another file and I can use it?</p>

<a name="125342550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125342550" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125342550">Johannes Hölzl (Apr 20 2018 at 06:01)</a>:</h4>
<p>Yes, I will put <code>refl_trans</code> and <code>refl_cl</code> somewhere in mathlib. I'm not sure yet about the naming.</p>

<a name="125342551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125342551" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125342551">Kenny Lau (Apr 20 2018 at 06:01)</a>:</h4>
<p>I would love it if you could prove that the result is a setoid ^^</p>

<a name="125342553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125342553" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125342553">Kenny Lau (Apr 20 2018 at 06:01)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="o">:</span> <span class="n">setoid</span> <span class="o">(</span><span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">))</span> <span class="o">:=</span>
<span class="bp">⟨λ</span> <span class="n">L₁</span> <span class="n">L₂</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">L₃</span><span class="o">,</span> <span class="n">red</span> <span class="n">L₁</span> <span class="n">L₃</span> <span class="bp">∧</span> <span class="n">red</span> <span class="n">L₂</span> <span class="n">L₃</span><span class="o">,</span>
 <span class="bp">λ</span> <span class="n">L</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">L</span><span class="o">,</span> <span class="n">red</span><span class="bp">.</span><span class="n">refl</span><span class="o">,</span> <span class="n">red</span><span class="bp">.</span><span class="n">refl</span><span class="bp">⟩</span><span class="o">,</span>
 <span class="bp">λ</span> <span class="n">L₁</span> <span class="n">L₂</span> <span class="bp">⟨</span><span class="n">L₃</span><span class="o">,</span> <span class="n">H13</span><span class="o">,</span> <span class="n">H23</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">L₃</span><span class="o">,</span> <span class="n">H23</span><span class="o">,</span> <span class="n">H13</span><span class="bp">⟩</span><span class="o">,</span>
 <span class="bp">λ</span> <span class="n">L₁</span> <span class="n">L₂</span> <span class="n">L₃</span> <span class="bp">⟨</span><span class="n">L₄</span><span class="o">,</span> <span class="n">H14</span><span class="o">,</span> <span class="n">H24</span><span class="bp">⟩</span> <span class="bp">⟨</span><span class="n">L₅</span><span class="o">,</span> <span class="n">H25</span><span class="o">,</span> <span class="n">H35</span><span class="bp">⟩</span><span class="o">,</span>
   <span class="k">let</span> <span class="bp">⟨</span><span class="n">L₆</span><span class="o">,</span> <span class="n">H46</span><span class="o">,</span> <span class="n">H56</span><span class="bp">⟩</span> <span class="o">:=</span> <span class="n">church_rosser</span> <span class="n">H24</span> <span class="n">H25</span> <span class="k">in</span>
   <span class="bp">⟨</span><span class="n">L₆</span><span class="o">,</span> <span class="n">red</span><span class="bp">.</span><span class="n">trans</span> <span class="n">H14</span> <span class="n">H46</span><span class="o">,</span> <span class="n">red</span><span class="bp">.</span><span class="n">trans</span> <span class="n">H35</span> <span class="n">H56</span><span class="bp">⟩⟩</span>
</pre></div>

<a name="125342590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125342590" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125342590">Kenny Lau (Apr 20 2018 at 06:02)</a>:</h4>
<p>the relation being "there is a common reduction"</p>

<a name="125342703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125342703" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125342703">Johannes Hölzl (Apr 20 2018 at 06:06)</a>:</h4>
<p>yep, makes sense.</p>

<a name="125342710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125342710" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125342710">Kenny Lau (Apr 20 2018 at 06:07)</a>:</h4>
<p>and I think this is better than the refl-symm-trans closure, because things are easier to prove</p>

<a name="125342711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125342711" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125342711">Kenny Lau (Apr 20 2018 at 06:07)</a>:</h4>
<p>the symm makes everything work no well</p>

<a name="125477808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125477808" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125477808">Kenny Lau (Apr 21 2018 at 02:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I just proved that <code>red</code> is a partial order</p>

<a name="125477809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125477809" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125477809">Kenny Lau (Apr 21 2018 at 02:39)</a>:</h4>
<p>Should I be using <code>\le</code>?</p>

<a name="125477851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125477851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125477851">Mario Carneiro (Apr 21 2018 at 02:40)</a>:</h4>
<p>No, it's not really a less-than kind of thing</p>

<a name="125477852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125477852" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125477852">Kenny Lau (Apr 21 2018 at 02:40)</a>:</h4>
<p>should I remove the proof?</p>

<a name="125477853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125477853" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125477853">Mario Carneiro (Apr 21 2018 at 02:41)</a>:</h4>
<p>I would prefer ~&gt;* if you want notation for red</p>

<a name="125477859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125477859" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125477859">Kenny Lau (Apr 21 2018 at 02:41)</a>:</h4>
<p>is there unicode?</p>

<a name="125477860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125477860" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125477860">Kenny Lau (Apr 21 2018 at 02:41)</a>:</h4>
<p>also, it kinda looks like something not nice, so you might want to think twice</p>

<a name="125477862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125477862" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125477862">Mario Carneiro (Apr 21 2018 at 02:41)</a>:</h4>
<p>That's a right squiggle arrow with a star</p>

<a name="125477863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125477863" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125477863">Mario Carneiro (Apr 21 2018 at 02:41)</a>:</h4>
<p>the right squiggle arrow is <code>red.step</code>, and the star is its reflexive transitive closure</p>

<a name="125477904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125477904" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125477904">Kenny Lau (Apr 21 2018 at 02:42)</a>:</h4>
<p>eh, is that an answer to any of my two questions...</p>

<a name="125477953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125477953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125477953">Mario Carneiro (Apr 21 2018 at 02:44)</a>:</h4>
<p>there is unicode for the right squig arrow, pretty sure</p>

<a name="125477955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125477955" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125477955">Mario Carneiro (Apr 21 2018 at 02:44)</a>:</h4>
<p>I was explaining the notation in response to "not so nice" comment</p>

<a name="125477956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125477956" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125477956">Kenny Lau (Apr 21 2018 at 02:44)</a>:</h4>
<p>so you're saying I should define reflexive transitive closure?</p>

<a name="125477959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125477959" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125477959">Mario Carneiro (Apr 21 2018 at 02:44)</a>:</h4>
<p>you sort of did</p>

<a name="125477967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125477967" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125477967">Kenny Lau (Apr 21 2018 at 02:45)</a>:</h4>
<p>I mean define <code>~&gt;</code> and <code>*</code> separately</p>

<a name="125477969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125477969" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125477969">Mario Carneiro (Apr 21 2018 at 02:45)</a>:</h4>
<p>You could do like Johannes did and prove C-R generically over r.t. closure</p>

<a name="125478010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478010" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478010">Kenny Lau (Apr 21 2018 at 02:46)</a>:</h4>
<p>would the notations work?</p>

<a name="125478017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478017" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478017">Mario Carneiro (Apr 21 2018 at 02:47)</a>:</h4>
<p>I doubt it, but you could locally define ~&gt;* to mean <code>rt_closure red.step</code> or something</p>

<a name="125478165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478165" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478165">Mario Carneiro (Apr 21 2018 at 02:52)</a>:</h4>
<p>I found this in unicode: ⇝ , but it's a bit hard to distinguish from the regular arrow in my font on vscode</p>

<a name="125478168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478168" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478168">Kenny Lau (Apr 21 2018 at 02:52)</a>:</h4>
<p>let's just stick with <code>red</code></p>

<a name="125478173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478173" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478173">Kenny Lau (Apr 21 2018 at 02:53)</a>:</h4>
<p>should I remove the proof?</p>

<a name="125478175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478175" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478175">Mario Carneiro (Apr 21 2018 at 02:53)</a>:</h4>
<p>are you using it?</p>

<a name="125478176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478176" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478176">Kenny Lau (Apr 21 2018 at 02:53)</a>:</h4>
<p>not really, as you said we don't want to use <code>\le</code></p>

<a name="125478177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478177" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478177">Kenny Lau (Apr 21 2018 at 02:53)</a>:</h4>
<p>I have the other theorems</p>

<a name="125478217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478217" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478217">Kenny Lau (Apr 21 2018 at 02:54)</a>:</h4>
<p>my proof is literally</p>
<div class="codehilite"><pre><span></span><span class="kn">instance</span> <span class="o">:</span> <span class="n">partial_order</span> <span class="o">(</span><span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">))</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">le</span> <span class="o">:=</span> <span class="n">red</span><span class="o">,</span>
  <span class="n">le_refl</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">_</span><span class="o">,</span> <span class="n">red</span><span class="bp">.</span><span class="n">refl</span><span class="o">,</span>
  <span class="n">le_trans</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span> <span class="n">red</span><span class="bp">.</span><span class="n">trans</span><span class="o">,</span>
  <span class="n">le_antisymm</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span> <span class="n">red</span><span class="bp">.</span><span class="n">antisymm</span> <span class="o">}</span>
</pre></div>

<a name="125478218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478218" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478218">Mario Carneiro (Apr 21 2018 at 02:54)</a>:</h4>
<p>yeah, skip it</p>

<a name="125478219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478219" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478219">Kenny Lau (Apr 21 2018 at 02:54)</a>:</h4>
<p>ok</p>

<a name="125478477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478477" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478477">Kenny Lau (Apr 21 2018 at 03:05)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">inductive</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">bnot</span> <span class="o">{</span><span class="n">L₁</span> <span class="n">L₂</span> <span class="n">x</span> <span class="n">b</span><span class="o">}</span> <span class="o">:</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="o">(</span><span class="n">L₁</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">bnot</span> <span class="n">b</span><span class="o">)</span> <span class="bp">::</span> <span class="n">L₂</span><span class="o">)</span> <span class="o">(</span><span class="n">L₁</span> <span class="bp">++</span> <span class="n">L₂</span><span class="o">)</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">fintype</span> <span class="o">{</span> <span class="n">L₂</span> <span class="bp">//</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="n">L₁</span> <span class="n">L₂</span> <span class="o">}</span> <span class="o">:=</span>
<span class="bp">_</span>
</pre></div>

<a name="125478481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478481" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478481">Kenny Lau (Apr 21 2018 at 03:05)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> <span class="user-mention" data-user-id="110044">@Chris Hughes</span> would you have some insights as to how I would prove this?</p>

<a name="125478522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478522" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478522">Mario Carneiro (Apr 21 2018 at 03:06)</a>:</h4>
<p>Even stronger, the set of all lists that are <code>red</code> related to the original is finite</p>

<a name="125478523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478523" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478523">Kenny Lau (Apr 21 2018 at 03:07)</a>:</h4>
<p>right, but this is the inductive step</p>

<a name="125478528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478528" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478528">Mario Carneiro (Apr 21 2018 at 03:07)</a>:</h4>
<p>because if <code>red L1 L2</code> then <code>L2 &lt;+ L1</code></p>

<a name="125478530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478530" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478530">Kenny Lau (Apr 21 2018 at 03:07)</a>:</h4>
<p>and then?</p>

<a name="125478531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478531" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478531">Mario Carneiro (Apr 21 2018 at 03:07)</a>:</h4>
<p>use <code>sublists</code></p>

<a name="125478557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478557" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478557">Kenny Lau (Apr 21 2018 at 03:08)</a>:</h4>
<p>but it is not in mathlib that sublists are finite</p>

<a name="125478572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478572">Mario Carneiro (Apr 21 2018 at 03:08)</a>:</h4>
<p>yes, that's <code>sublists</code></p>

<a name="125478574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478574">Mario Carneiro (Apr 21 2018 at 03:08)</a>:</h4>
<p>it's literally a list of all sublists of another</p>

<a name="125478575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478575" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478575">Mario Carneiro (Apr 21 2018 at 03:08)</a>:</h4>
<p>hence finite</p>

<a name="125478577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478577" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478577">Kenny Lau (Apr 21 2018 at 03:08)</a>:</h4>
<p>aha</p>

<a name="125478587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478587" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478587">Mario Carneiro (Apr 21 2018 at 03:09)</a>:</h4>
<p>then again it's probably not the most efficient enumeration strategy</p>

<a name="125478635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478635" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478635">Mario Carneiro (Apr 21 2018 at 03:11)</a>:</h4>
<p>have you proven that <code>red L1 L2</code> is decidable?</p>

<a name="125478636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478636" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478636">Kenny Lau (Apr 21 2018 at 03:11)</a>:</h4>
<p>let's say I have</p>

<a name="125478637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478637" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478637">Kenny Lau (Apr 21 2018 at 03:11)</a>:</h4>
<p>(I have not, but I will)</p>

<a name="125478677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478677" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478677">Mario Carneiro (Apr 21 2018 at 03:12)</a>:</h4>
<p>it's easier to prove that the free group relation (including symmetry) Is decidable, since then you can use <code>reduce</code></p>

<a name="125478681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478681" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478681">Kenny Lau (Apr 21 2018 at 03:12)</a>:</h4>
<p>I don't understand, sorry</p>

<a name="125478687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478687" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478687">Kenny Lau (Apr 21 2018 at 03:13)</a>:</h4>
<p>how would I use reduce to prove that red L1 L2 is decidable?</p>

<a name="125478688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478688" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478688">Mario Carneiro (Apr 21 2018 at 03:13)</a>:</h4>
<p>you can decide if L1 ~ L2 by just reducing both sides and testing for equality</p>

<a name="125478691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478691" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478691">Kenny Lau (Apr 21 2018 at 03:13)</a>:</h4>
<p>but that doesn't mean red is decidable</p>

<a name="125478693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478693" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478693">Mario Carneiro (Apr 21 2018 at 03:13)</a>:</h4>
<p>that doesn't give you decidability of <code>red</code> though</p>

<a name="125478788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478788" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478788">Kenny Lau (Apr 21 2018 at 03:16)</a>:</h4>
<p>how would that help?</p>

<a name="125478797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478797" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478797">Mario Carneiro (Apr 21 2018 at 03:17)</a>:</h4>
<p>I'm not sure how important it is to know that red is decidable, but you need that to build a fintype using filter and sublists the way I described</p>

<a name="125478798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478798" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478798">Kenny Lau (Apr 21 2018 at 03:17)</a>:</h4>
<p>aha</p>

<a name="125478800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478800">Mario Carneiro (Apr 21 2018 at 03:17)</a>:</h4>
<p>you could also directly enumerate the red related lists</p>

<a name="125478803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478803" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478803">Kenny Lau (Apr 21 2018 at 03:18)</a>:</h4>
<p>which amounts to writing another reduce-like function</p>

<a name="125478840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478840" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478840">Kenny Lau (Apr 21 2018 at 03:18)</a>:</h4>
<p>i.e. with a core</p>

<a name="125478843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478843" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478843">Kenny Lau (Apr 21 2018 at 03:18)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">reduce</span><span class="bp">.</span><span class="n">step</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">hd</span><span class="bp">::</span><span class="n">tl</span><span class="o">)</span> <span class="n">x</span> <span class="o">:=</span> <span class="k">if</span> <span class="n">hd</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">=</span> <span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">∧</span> <span class="n">hd</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">=</span> <span class="n">bnot</span> <span class="n">x</span><span class="bp">.</span><span class="mi">2</span> <span class="k">then</span> <span class="n">tl</span> <span class="k">else</span> <span class="n">x</span><span class="bp">::</span><span class="n">hd</span><span class="bp">::</span><span class="n">tl</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="n">x</span> <span class="o">:=</span> <span class="o">[</span><span class="n">x</span><span class="o">]</span>

<span class="n">def</span> <span class="n">reduce</span><span class="bp">.</span><span class="n">core</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="bp">→</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">L</span> <span class="o">[]</span>       <span class="o">:=</span> <span class="n">L</span>
<span class="bp">|</span> <span class="n">L</span> <span class="o">(</span><span class="n">hd</span><span class="bp">::</span><span class="n">tl</span><span class="o">)</span> <span class="o">:=</span> <span class="n">reduce</span><span class="bp">.</span><span class="n">core</span> <span class="o">(</span><span class="n">reduce</span><span class="bp">.</span><span class="n">step</span> <span class="n">L</span> <span class="n">hd</span><span class="o">)</span> <span class="n">tl</span>

<span class="n">def</span> <span class="n">reduce</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">))</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">reduce</span><span class="bp">.</span><span class="n">core</span> <span class="o">[]</span> <span class="n">L</span><span class="bp">.</span><span class="n">reverse</span>
</pre></div>

<a name="125478845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478845">Mario Carneiro (Apr 21 2018 at 03:18)</a>:</h4>
<p>speaking of which, I don't understand why your definition is so convoluted</p>

<a name="125478846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478846" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478846">Mario Carneiro (Apr 21 2018 at 03:18)</a>:</h4>
<p>why the reverse?</p>

<a name="125478848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478848" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478848">Kenny Lau (Apr 21 2018 at 03:18)</a>:</h4>
<p>because it gets reversed</p>

<a name="125478849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478849" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478849">Mario Carneiro (Apr 21 2018 at 03:18)</a>:</h4>
<p>...</p>

<a name="125478850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478850">Kenny Lau (Apr 21 2018 at 03:18)</a>:</h4>
<p>so I have a word <code>[a,b,c,d,e,f,g,h]</code></p>

<a name="125478852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478852" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478852">Kenny Lau (Apr 21 2018 at 03:19)</a>:</h4>
<p>my pointer goes from left to right</p>

<a name="125478857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478857" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478857">Kenny Lau (Apr 21 2018 at 03:19)</a>:</h4>
<p>and the left of the pointer gets reversed</p>

<a name="125478859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478859" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478859">Kenny Lau (Apr 21 2018 at 03:19)</a>:</h4>
<p>because the heads are at <code>d</code> and <code>e</code> respectively</p>

<a name="125478860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478860" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478860">Mario Carneiro (Apr 21 2018 at 03:19)</a>:</h4>
<p>you can output either reversed or not, depending on how you structure the recursive call</p>

<a name="125478861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478861" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478861">Kenny Lau (Apr 21 2018 at 03:19)</a>:</h4>
<p>after the traversal of the list, it will become <code>[h,g,f,c,b,a]</code></p>

<a name="125478863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478863" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478863">Mario Carneiro (Apr 21 2018 at 03:19)</a>:</h4>
<p>look at how <code>list.foldl</code> and <code>list.foldr</code> are defined</p>

<a name="125478898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478898" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478898">Kenny Lau (Apr 21 2018 at 03:20)</a>:</h4>
<p>basically</p>

<a name="125478907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478907">Kenny Lau (Apr 21 2018 at 03:20)</a>:</h4>
<p>I destructed the list once, so it has to get reversed</p>

<a name="125478908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478908" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478908">Mario Carneiro (Apr 21 2018 at 03:20)</a>:</h4>
<p>What's wrong with Johannes's definition of reduce?</p>

<a name="125478910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478910" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478910">Kenny Lau (Apr 21 2018 at 03:20)</a>:</h4>
<p>it's less efficient</p>

<a name="125478914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478914" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478914">Kenny Lau (Apr 21 2018 at 03:20)</a>:</h4>
<p>my algorithm is O(n)</p>

<a name="125478916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478916" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478916">Kenny Lau (Apr 21 2018 at 03:21)</a>:</h4>
<p>his algorithm is O(n^2)</p>

<a name="125478921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125478921" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125478921">Kenny Lau (Apr 21 2018 at 03:21)</a>:</h4>
<p>[don't quote me on this]</p>

<a name="125479008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125479008" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125479008">Mario Carneiro (Apr 21 2018 at 03:24)</a>:</h4>
<p>To be clear, I'm talking about the following definition:</p>
<div class="codehilite"><pre><span></span>def reduce {α} [decidable_eq α] : list (α × bool) → list (α × bool)
| ((a₁, p) :: (a₂, n) :: xs) :=
  if a₁ = a₂ ∧ p ≠ n then reduce xs
  else (a₁, p) :: reduce ((a₂, n) :: xs)
| l := l
</pre></div>

<a name="125479010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125479010" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125479010">Kenny Lau (Apr 21 2018 at 03:24)</a>:</h4>
<p>that's wrong</p>

<a name="125479011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125479011" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125479011">Kenny Lau (Apr 21 2018 at 03:24)</a>:</h4>
<p>as I painfully realized two days ago</p>

<a name="125479014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125479014" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125479014">Kenny Lau (Apr 21 2018 at 03:25)</a>:</h4>
<p>because <code>[a,b,b^-1,a^-1]</code> becomes <code>[a,a^-1]</code></p>

<a name="125479112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125479112" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125479112">Mario Carneiro (Apr 21 2018 at 03:29)</a>:</h4>
<p>Fair enough. What about this then:</p>
<div class="codehilite"><pre><span></span>def reduce {α} [decidable_eq α] : list (α × bool) → list (α × bool)
| ((a₁, p) :: xs) :=
  match reduce xs with
  | (a₂, n) :: xs&#39; :=
    if a₁ = a₂ ∧ p ≠ n then xs&#39;
    else (a₁, p) :: (a₂, n) :: xs&#39;
  | [] := [(a₁, p)]
  end
| l := l
</pre></div>

<a name="125479117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125479117" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125479117">Kenny Lau (Apr 21 2018 at 03:29)</a>:</h4>
<p>(deleted)</p>

<a name="125479119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125479119" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125479119">Kenny Lau (Apr 21 2018 at 03:29)</a>:</h4>
<p>aha</p>

<a name="125479162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125479162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125479162">Kenny Lau (Apr 21 2018 at 03:30)</a>:</h4>
<p>somehow my gut says this is n^2 also</p>

<a name="125479164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125479164" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125479164">Mario Carneiro (Apr 21 2018 at 03:30)</a>:</h4>
<p>it seems to work</p>
<div class="codehilite"><pre><span></span>#eval reduce [(0, tt), (1, tt), (1, ff), (0, ff), (0, tt), (0, ff)]
</pre></div>

<a name="125479165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125479165" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125479165">Kenny Lau (Apr 21 2018 at 03:30)</a>:</h4>
<p>my gut might be wrong</p>

<a name="125479166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125479166" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125479166">Mario Carneiro (Apr 21 2018 at 03:30)</a>:</h4>
<p>I don't think it is since it's one-pass</p>

<a name="125479173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125479173" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125479173">Mario Carneiro (Apr 21 2018 at 03:31)</a>:</h4>
<p>this is what I mean by "depending on how you use the IH"</p>

<a name="125479174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125479174" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125479174">Kenny Lau (Apr 21 2018 at 03:31)</a>:</h4>
<p>interesting</p>

<a name="125479175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125479175" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125479175">Kenny Lau (Apr 21 2018 at 03:31)</a>:</h4>
<p>that's clever</p>

<a name="125479176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125479176" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125479176">Mario Carneiro (Apr 21 2018 at 03:31)</a>:</h4>
<p>you can either process and then call the IH, or call the IH and then process, or both</p>

<a name="125479177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125479177" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125479177">Mario Carneiro (Apr 21 2018 at 03:31)</a>:</h4>
<p>that's how <code>foldl</code> and <code>foldr</code> get different results</p>

<a name="125479265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125479265" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125479265">Kenny Lau (Apr 21 2018 at 03:34)</a>:</h4>
<p>I have much more to learn</p>

<a name="125481027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481027" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481027">Kenny Lau (Apr 21 2018 at 04:47)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> the lifting theorem is really a pain</p>

<a name="125481028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481028" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481028">Kenny Lau (Apr 21 2018 at 04:47)</a>:</h4>
<p>I need some guidance from you</p>

<a name="125481029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481029" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481029">Kenny Lau (Apr 21 2018 at 04:48)</a>:</h4>
<p>it isn't really straightforward</p>

<a name="125481070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481070" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481070">Kenny Lau (Apr 21 2018 at 04:48)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">L₂</span> <span class="n">L4</span> <span class="n">L5</span> <span class="n">L6</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">bool</span><span class="o">),</span>
<span class="n">H45</span> <span class="o">:</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="n">L4</span> <span class="n">L5</span><span class="o">,</span>
<span class="n">H56</span> <span class="o">:</span> <span class="n">red</span> <span class="n">L5</span> <span class="n">L6</span><span class="o">,</span>
<span class="n">H26</span> <span class="o">:</span> <span class="n">red</span><span class="bp">.</span><span class="n">step</span> <span class="n">L₂</span> <span class="n">L6</span><span class="o">,</span>
<span class="n">H24</span> <span class="o">:</span> <span class="n">L₂</span> <span class="bp">&lt;+</span> <span class="n">L4</span><span class="o">,</span>
<span class="n">ih</span> <span class="o">:</span> <span class="n">L₂</span> <span class="bp">&lt;+</span> <span class="n">L5</span> <span class="bp">→</span> <span class="n">red</span> <span class="n">L5</span> <span class="n">L₂</span>
<span class="err">⊢</span> <span class="n">red</span> <span class="n">L4</span> <span class="n">L₂</span>
</pre></div>

<a name="125481071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481071">Mario Carneiro (Apr 21 2018 at 04:48)</a>:</h4>
<p>wrong thread</p>

<a name="125481077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481077" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481077">Kenny Lau (Apr 21 2018 at 04:49)</a>:</h4>
<p>this is the hardest part of the proof</p>

<a name="125481078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481078" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481078">Kenny Lau (Apr 21 2018 at 04:49)</a>:</h4>
<p>the rest is just induction</p>

<a name="125481129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481129" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481129">Mario Carneiro (Apr 21 2018 at 04:51)</a>:</h4>
<p>wait, I'm confused. What's the statement and proof so far?</p>

<a name="125481132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481132" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481132">Kenny Lau (Apr 21 2018 at 04:51)</a>:</h4>
<p>the thing I sent you just there</p>

<a name="125481133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481133" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481133">Kenny Lau (Apr 21 2018 at 04:51)</a>:</h4>
<p>is the inductive step</p>

<a name="125481135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481135" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481135">Kenny Lau (Apr 21 2018 at 04:51)</a>:</h4>
<p>the rest is just induction that I can do</p>

<a name="125481137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481137" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481137">Mario Carneiro (Apr 21 2018 at 04:51)</a>:</h4>
<p>I know, but it doesn't make any sense</p>

<a name="125481138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481138" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481138">Kenny Lau (Apr 21 2018 at 04:51)</a>:</h4>
<p>oh, the lifting theorem</p>

<a name="125481139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481139" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481139">Mario Carneiro (Apr 21 2018 at 04:51)</a>:</h4>
<p>I don't understand what got you to this point</p>

<a name="125481178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481178" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481178">Kenny Lau (Apr 21 2018 at 04:52)</a>:</h4>
<p>if reduce L1 = reduce L2 and L2 is a sublist of L1, then red L1 L2</p>

<a name="125481181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481181" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481181">Mario Carneiro (Apr 21 2018 at 04:52)</a>:</h4>
<p>ah, I was thinking about that but I'm not sure it's a theorem</p>

<a name="125481182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481182" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481182">Kenny Lau (Apr 21 2018 at 04:52)</a>:</h4>
<p>aha</p>

<a name="125481183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481183" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481183">Kenny Lau (Apr 21 2018 at 04:52)</a>:</h4>
<p>I thought it's true</p>

<a name="125481184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481184" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481184">Kenny Lau (Apr 21 2018 at 04:52)</a>:</h4>
<p>my gut tells me so</p>

<a name="125481190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481190" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481190">Kenny Lau (Apr 21 2018 at 04:53)</a>:</h4>
<p>now to make it more like the lifting theorem, we restate it:</p>

<a name="125481191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481191" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481191">Kenny Lau (Apr 21 2018 at 04:53)</a>:</h4>
<p>if red L1 L3 and red L2 L3, and that L2 is a sublist of L1, then red L1 L2</p>

<a name="125481233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481233" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481233">Kenny Lau (Apr 21 2018 at 04:54)</a>:</h4>
<p>I can't really come up with a counter-example</p>

<a name="125481234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481234" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481234">Kenny Lau (Apr 21 2018 at 04:54)</a>:</h4>
<p>I can think of examples where the lift is not really trivial</p>

<a name="125481761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481761" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481761">Mario Carneiro (Apr 21 2018 at 05:16)</a>:</h4>
<p>Okay, I'm still not on board with saying it's definitely true but we can try to prove it anyway. Let's show that if <code>red L1 L3</code> and <code>red L2 L3</code>, then <code>L2 &lt;+ L1</code> implies <code>red L1 L2</code>. Proof by induction on <code>red L2 L3</code>, reducing to the following lemma: if <code>red L1 L3</code> and <code>red.step L2 L3</code> and <code>L2 &lt;+ L1</code> then <code>red L1 L2</code>. Now you have some list details by comparing <code>red.step</code> with <code>&lt;+</code></p>

<a name="125481943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125481943" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125481943">Mario Carneiro (Apr 21 2018 at 05:24)</a>:</h4>
<p>aha, counterexample: <code>abb⁻¹a⁻¹</code> has a sublist <code>bb⁻¹</code> which reduces to <code>[]</code>, but <code>abb⁻¹a⁻¹</code> does not reduce to <code>bb⁻¹</code></p>

<a name="125482387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125482387" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125482387">Kenny Lau (Apr 21 2018 at 05:42)</a>:</h4>
<p>aha!</p>

<a name="125482389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125482389" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125482389">Kenny Lau (Apr 21 2018 at 05:42)</a>:</h4>
<p>nice, thanks</p>

<a name="125482394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125482394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125482394">Kenny Lau (Apr 21 2018 at 05:43)</a>:</h4>
<p>so, how might we prove that red is decidable?</p>

<a name="125482941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125482941" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125482941">Mario Carneiro (Apr 21 2018 at 06:04)</a>:</h4>
<div class="codehilite"><pre><span></span>def is_red {α} [decidable_eq α] : list (α × bool) → list (α × bool) → bool
| [] [] := tt
| [] ((b, q) :: ys) := ff
| ((a, p) :: xs) [] := is_red xs [(a, bnot p)]
| ((a, p) :: xs) ((b, q) :: ys) :=
  if (a, p) = (b, q) then is_red xs ys else
  is_red xs ((a, bnot p) :: (b, q) :: ys)
</pre></div>


<p>replace <code>bool</code> with <code>decidable</code> and insert proofs</p>

<a name="125482944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125482944" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125482944">Kenny Lau (Apr 21 2018 at 06:04)</a>:</h4>
<p>aha</p>

<a name="125484985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125484985" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125484985">Kenny Lau (Apr 21 2018 at 07:27)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> should I inject your name onto the top of the file</p>

<a name="125485472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125485472" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125485472">Mario Carneiro (Apr 21 2018 at 07:49)</a>:</h4>
<p>If you want... I've got enough credits on mathlib already, I don't need to be stealing it from others ;)</p>

<a name="125485519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125485519" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125485519">Mario Carneiro (Apr 21 2018 at 07:50)</a>:</h4>
<p>I guess the full combined file on free groups when it gets finished will be joint work of all three of us, there's been a lot of collaboration on it</p>

<a name="125492272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125492272" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125492272">Kenny Lau (Apr 21 2018 at 12:35)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">red</span><span class="bp">.</span><span class="n">of_cons</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span> <span class="o">:</span> <span class="n">red</span> <span class="o">(</span><span class="n">x</span> <span class="bp">::</span> <span class="n">L₁</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="bp">::</span> <span class="n">L₂</span><span class="o">)</span> <span class="bp">→</span> <span class="n">red</span> <span class="n">L₁</span> <span class="n">L₂</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">generalize</span> <span class="n">H1</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">::</span> <span class="n">L₁</span> <span class="o">:</span> <span class="n">list</span> <span class="bp">_</span><span class="o">)</span> <span class="bp">=</span> <span class="n">L1</span><span class="o">,</span>
  <span class="n">generalize</span> <span class="n">H2</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">::</span> <span class="n">L₂</span> <span class="o">:</span> <span class="n">list</span> <span class="bp">_</span><span class="o">)</span> <span class="bp">=</span> <span class="n">L2</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">H</span> <span class="k">with</span> <span class="n">L3</span> <span class="n">L3</span> <span class="n">L4</span> <span class="n">L5</span> <span class="n">H3</span> <span class="n">H4</span> <span class="n">ih</span> <span class="n">generalizing</span> <span class="n">x</span> <span class="n">L₁</span> <span class="n">L₂</span><span class="o">,</span>
  <span class="n">case</span> <span class="n">red</span><span class="bp">.</span><span class="n">refl</span>
  <span class="o">{</span> <span class="n">subst</span> <span class="n">H1</span><span class="bp">;</span> <span class="n">injections</span><span class="bp">;</span> <span class="n">subst_vars</span> <span class="o">},</span>
  <span class="n">case</span> <span class="n">red</span><span class="bp">.</span><span class="n">step_trans</span>
  <span class="o">{</span> <span class="n">cases</span> <span class="n">H3</span> <span class="k">with</span> <span class="n">L6</span> <span class="n">L7</span> <span class="n">x1</span> <span class="n">b1</span><span class="o">,</span>
    <span class="n">subst_vars</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">L6</span> <span class="k">with</span> <span class="n">hd</span> <span class="n">tl</span><span class="o">,</span>
    <span class="n">case</span> <span class="n">list</span><span class="bp">.</span><span class="n">nil</span>
    <span class="o">{</span> <span class="n">injection</span> <span class="n">H1</span> <span class="k">with</span> <span class="n">H5</span> <span class="n">H6</span><span class="o">,</span>
      <span class="n">substs</span> <span class="n">H5</span> <span class="n">H6</span><span class="o">,</span>
      <span class="n">clear</span> <span class="n">H1</span> <span class="n">H3</span><span class="o">,</span>
      <span class="n">transitivity</span><span class="o">,</span>
      <span class="o">{</span> <span class="n">exact</span> <span class="n">red</span><span class="bp">.</span><span class="n">cons</span> <span class="n">H4</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">simp</span> <span class="o">}</span> <span class="o">},</span>
    <span class="n">case</span> <span class="n">list</span><span class="bp">.</span><span class="n">cons</span>
    <span class="o">{</span> <span class="n">injection</span> <span class="n">H1</span> <span class="k">with</span> <span class="n">H5</span> <span class="n">H6</span><span class="o">,</span>
      <span class="n">substs</span> <span class="n">H5</span> <span class="n">H6</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">red</span><span class="bp">.</span><span class="n">trans</span> <span class="n">red</span><span class="bp">.</span><span class="n">bnot</span> <span class="o">(</span><span class="n">ih</span> <span class="n">rfl</span> <span class="n">rfl</span><span class="o">)</span> <span class="o">}</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>

<a name="125492273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/free%20group/near/125492273" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/47376freegroup.html#125492273">Kenny Lau (Apr 21 2018 at 12:35)</a>:</h4>
<p>why so long</p>


{% endraw %}

{% include archive_update.html %}