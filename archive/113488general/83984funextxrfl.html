---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/83984funextxrfl.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html">funext $ λ x, rfl</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="124521378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124521378" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124521378">Kenny Lau (Apr 02 2018 at 10:16)</a>:</h4>
<p>conjecture: everything that can be proven using <code>funext $ λ x, rfl</code> can be proven using <code>rfl</code></p>

<a name="124521441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124521441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124521441">Mario Carneiro (Apr 02 2018 at 10:19)</a>:</h4>
<p>that's correct (modulo funny business regarding algorithmic equality not really being definitional equality)</p>

<a name="124521443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124521443" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124521443">Kenny Lau (Apr 02 2018 at 10:19)</a>:</h4>
<p>could you expand on your parentheses</p>

<a name="124521482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124521482" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124521482">Mario Carneiro (Apr 02 2018 at 10:20)</a>:</h4>
<p>Sometimes lean doesn't know when to eta expand stuff</p>

<a name="124521492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124521492" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124521492">Kenny Lau (Apr 02 2018 at 10:20)</a>:</h4>
<p>could you provide an example</p>

<a name="124521603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124521603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124521603">Mario Carneiro (Apr 02 2018 at 10:24)</a>:</h4>
<div class="codehilite"><pre><span></span>def foo : true = true → plift true := @eq.rec Prop true (λ p, plift true) ⟨trivial⟩ true
def bar : true = true → plift true := @eq.rec Prop true (λ p, plift p) ⟨trivial⟩ true
example : foo = bar := funext $ λ x, rfl
example : foo = bar := rfl
</pre></div>

<a name="124521611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124521611" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124521611">Kenny Lau (Apr 02 2018 at 10:25)</a>:</h4>
<p>ah, that funny <code>rec</code> business</p>

<a name="124521612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124521612" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124521612">Patrick Massot (Apr 02 2018 at 10:25)</a>:</h4>
<p>Mario, aren't you sleeping?</p>

<a name="124521613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124521613" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124521613">Kenny Lau (Apr 02 2018 at 10:25)</a>:</h4>
<p>LOL</p>

<a name="124523564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124523564" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124523564">Kevin Buzzard (Apr 02 2018 at 11:40)</a>:</h4>
<p>I found myself writing this yesterday:</p>

<a name="124523566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124523566" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124523566">Kevin Buzzard (Apr 02 2018 at 11:40)</a>:</h4>
<div class="codehilite"><pre><span></span>Hid :=  λ U OU,funext (λ x,subtype.eq rfl),
Hcomp :=  λ U V W OU OV OW HUV HVW,funext (λ x, subtype.eq rfl)
</pre></div>

<a name="124523568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124523568" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124523568">Kevin Buzzard (Apr 02 2018 at 11:40)</a>:</h4>
<p>and I couldn't move the rfl</p>

<a name="124523572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124523572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124523572">Kenny Lau (Apr 02 2018 at 11:40)</a>:</h4>
<p><code>subtype.eq rfl</code> cannot be replaced by <code>rfl</code></p>

<a name="124523573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124523573" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124523573">Kevin Buzzard (Apr 02 2018 at 11:40)</a>:</h4>
<p>and I could understand why <code>subtype.eq</code> wasn't a simp lemma</p>

<a name="124523579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124523579" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124523579">Kenny Lau (Apr 02 2018 at 11:41)</a>:</h4>
<p>well it's just <code>congr</code></p>

<a name="124523580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124523580" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124523580">Kevin Buzzard (Apr 02 2018 at 11:41)</a>:</h4>
<p>because it's <code> a1.val = a2.val → a1 = a2 </code></p>

<a name="124523581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124523581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124523581">Kevin Buzzard (Apr 02 2018 at 11:41)</a>:</h4>
<p>which doesn't look great for simp</p>

<a name="124523582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124523582" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124523582">Kevin Buzzard (Apr 02 2018 at 11:41)</a>:</h4>
<p>but then I found</p>

<a name="124523584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124523584" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124523584">Kevin Buzzard (Apr 02 2018 at 11:42)</a>:</h4>
<p><code>subtype.mk_eq_mk</code></p>

<a name="124523626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124523626" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124523626">Kevin Buzzard (Apr 02 2018 at 11:42)</a>:</h4>
<p>which is an iff and is marked as a simp lemma</p>

<a name="124523635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/funext%20%24%20%CE%BB%20x%2C%20rfl/near/124523635" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/83984funextxrfl.html#124523635">Kevin Buzzard (Apr 02 2018 at 11:43)</a>:</h4>
<p>so I was hopeful that <code>by simp</code> would work, but I couldn't get it to</p>


{% endraw %}

{% include archive_update.html %}