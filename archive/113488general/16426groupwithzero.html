---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/16426groupwithzero.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html">group with zero</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="191599493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191599493" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191599493">Johan Commelin (Mar 24 2020 at 12:01)</a>:</h4>
<p>For the perfectoid project we need gadgets of the form <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Γ</mi><mo>∪</mo><mo stretchy="false">{</mo><mn>0</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\Gamma \cup \{0\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Γ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mclose">}</span></span></span></span>, and we formalised this using a type class <code>group_with_zero</code>. Examples are (i) fields and division rings, (ii) <code>nnreal</code>, (iii) <code>with_zero G</code> for any group <code>G</code>.</p>
<p>It would be very helpful if we could inject this structure below <code>field</code> in the algebraic hierarchy. What is the best way to do this? Should I make a PR to core lean? Can this be done without touching core? Should fields be moved out of core to mathlib?</p>

<a name="191600159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191600159" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191600159">Mario Carneiro (Mar 24 2020 at 12:10)</a>:</h4>
<p>Would it suffice to have a typeclass instance?</p>

<a name="191600169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191600169" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191600169">Mario Carneiro (Mar 24 2020 at 12:11)</a>:</h4>
<p><code>instance [field F] : group_with_zero F := ...</code></p>

<a name="191600278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191600278" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191600278">Mario Carneiro (Mar 24 2020 at 12:12)</a>:</h4>
<p>(also, I think this should assume <code>division_ring</code> instead, no? <code>field</code> would give you a <code>comm_group_with_zero</code>)</p>

<a name="191600308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191600308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191600308">Johan Commelin (Mar 24 2020 at 12:12)</a>:</h4>
<p>Yes, <code>division_ring</code> is better.</p>

<a name="191600593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191600593" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191600593">Mario Carneiro (Mar 24 2020 at 12:15)</a>:</h4>
<p>what are the axioms of <code>group_with_zero</code>?</p>

<a name="191600662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191600662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191600662">Johan Commelin (Mar 24 2020 at 12:16)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">group_with_zero</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
  <span class="kn">extends</span> <span class="n">monoid</span> <span class="n">α</span><span class="o">,</span> <span class="n">has_inv</span> <span class="n">α</span><span class="o">,</span> <span class="n">zero_ne_one_class</span> <span class="n">α</span><span class="o">,</span> <span class="n">mul_zero_class</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">[</span><span class="n">has_decidable_eq</span> <span class="o">:</span> <span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span>
<span class="o">(</span><span class="n">inv_zero</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span><span class="bp">⁻¹</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
<span class="o">(</span><span class="n">mul_inv_cancel</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span><span class="o">:</span><span class="n">α</span><span class="o">,</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span>
</pre></div>

<a name="191600682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191600682" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191600682">Johan Commelin (Mar 24 2020 at 12:16)</a>:</h4>
<p>The <code>decidable_eq</code> is an artifact</p>

<a name="191600730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191600730" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191600730">Mario Carneiro (Mar 24 2020 at 12:17)</a>:</h4>
<p>I forget where we ended up regarding <code>decidable_eq</code> for <code>division_ring</code></p>

<a name="191600781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191600781" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191600781">Mario Carneiro (Mar 24 2020 at 12:17)</a>:</h4>
<p>I think we just use classical logic, in which case it would be consistent to do the same here</p>

<a name="191600912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191600912" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191600912">Johan Commelin (Mar 24 2020 at 12:18)</a>:</h4>
<p>Yes, this is old code</p>

<a name="191601959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191601959" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191601959">Johan Commelin (Mar 24 2020 at 12:31)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> The reason that it would be really nice to inject it below <code>division_ring</code> is that lemmas like <code>inv_zero</code> could have a nice name and work for both of the cases. Currently we need to use <code>group_with_zero.inv_zero</code> because the assumptions on <code>inv_zero</code> are "too strong".</p>

<a name="191602003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191602003" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191602003">Mario Carneiro (Mar 24 2020 at 12:31)</a>:</h4>
<p>meh, that's already done in core in a few places</p>

<a name="191602009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191602009" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191602009">Johan Commelin (Mar 24 2020 at 12:31)</a>:</h4>
<p>Idem dito for</p>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">mul_inv_cancel&#39;</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="n">group_with_zero</span><span class="bp">.</span><span class="n">mul_inv_cancel</span> <span class="n">a</span> <span class="n">h</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">mul_inv_cancel_assoc_left</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span><span class="bp">⁻¹</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span><span class="bp">⁻¹</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">b</span><span class="bp">⁻¹</span><span class="o">)</span> <span class="o">:</span> <span class="n">mul_assoc</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span>
               <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span>             <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">mul_inv_cancel_assoc_right</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">a</span><span class="bp">⁻¹</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:</span> <span class="o">(</span><span class="n">mul_assoc</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>
               <span class="bp">...</span> <span class="bp">=</span> <span class="n">b</span>             <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span>

<span class="kn">lemma</span> <span class="n">inv_ne_zero&#39;</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">assume</span> <span class="n">a_eq_0</span><span class="o">,</span> <span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">a_eq_0</span><span class="o">]</span> <span class="kn">using</span> <span class="n">mul_inv_cancel&#39;</span> <span class="n">a</span> <span class="n">h</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">inv_mul_cancel&#39;</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="bp">⁻¹⁻¹</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">inv_ne_zero&#39;</span> <span class="bp">_</span> <span class="n">h</span><span class="o">]</span>
         <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="bp">⁻¹⁻¹</span>             <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span>
         <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span>                       <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">inv_ne_zero&#39;</span> <span class="bp">_</span> <span class="n">h</span><span class="o">]</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">inv_mul_cancel_assoc_left</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="bp">⁻¹</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="bp">⁻¹</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">mul_assoc</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span>
               <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span>             <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">inv_mul_cancel_assoc_right</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:</span> <span class="o">(</span><span class="n">mul_assoc</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>
               <span class="bp">...</span> <span class="bp">=</span> <span class="n">b</span>             <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span>
</pre></div>

<a name="191602031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191602031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191602031">Mario Carneiro (Mar 24 2020 at 12:32)</a>:</h4>
<p>for example most of the <code>division_ring</code> lemmas have namespace <code>division_ring</code> because they conflict with group lemmas</p>

<a name="191602076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191602076" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191602076">Johan Commelin (Mar 24 2020 at 12:32)</a>:</h4>
<p>Is there a reason why <code>field</code> and <code>division_ring</code> should stay in core?</p>

<a name="191602107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191602107" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191602107">Johan Commelin (Mar 24 2020 at 12:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/group.20with.20zero/near/191602031" title="#narrow/stream/113488-general/topic/group.20with.20zero/near/191602031">said</a>:</p>
<blockquote>
<p>for example most of the <code>division_ring</code> lemmas have namespace <code>division_ring</code> because they conflict with group lemmas</p>
</blockquote>
<p>Right, and now we'll have a third conflict. Why not reduce them?</p>

<a name="191607630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191607630" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191607630">Johan Commelin (Mar 24 2020 at 13:20)</a>:</h4>
<p><code>mk0</code> will also be duplicated.</p>

<a name="191607685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191607685" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191607685">Johan Commelin (Mar 24 2020 at 13:20)</a>:</h4>
<p>Although that one is in mathlib. So we could deduplicate, I guess.</p>

<a name="191610484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191610484" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191610484">Kevin Buzzard (Mar 24 2020 at 13:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/group.20with.20zero/near/191602107" title="#narrow/stream/113488-general/topic/group.20with.20zero/near/191602107">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/group.20with.20zero/near/191602031" title="#narrow/stream/113488-general/topic/group.20with.20zero/near/191602031">said</a>:</p>
<blockquote>
<p>for example most of the <code>division_ring</code> lemmas have namespace <code>division_ring</code> because they conflict with group lemmas</p>
</blockquote>
<p>Right, and now we'll have a third conflict. Why not reduce them?</p>
</blockquote>
<p>I don't think there will be a third conflict. For lemmas about division there are two kinds -- those that work under no assumptions about zero-ness (perhaps because they are theorems about monoids or groups, which don't have a zero) and those which have explicit assumptions that something has to be non-zero. The group ones v the field ones, basically.</p>
<p>In fact can you just load all the group_with_zero lemmas into <code>monoid</code> but just ask for the typeclass <code>with_zero</code> on your monoid, and also <code>with_inv</code> if you want it to be a group with 0. How many of them work with that set-up?</p>

<a name="191612112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191612112" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191612112">Johan Commelin (Mar 24 2020 at 13:54)</a>:</h4>
<p>I meant a third naming conflict.</p>

<a name="191634786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191634786" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191634786">Johan Commelin (Mar 24 2020 at 16:17)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> We will get two definitions of <code>has_div</code> on division rings...</p>

<a name="191634884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191634884" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191634884">Mario Carneiro (Mar 24 2020 at 16:18)</a>:</h4>
<p>that are defeq?</p>

<a name="191635919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191635919" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191635919">Kevin Buzzard (Mar 24 2020 at 16:24)</a>:</h4>
<p>You can't just do some old structure command magic?</p>

<a name="191636094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191636094" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191636094">Johan Commelin (Mar 24 2020 at 16:25)</a>:</h4>
<p>The fields of the has_div structure are defeq</p>

<a name="191636156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191636156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191636156">Johan Commelin (Mar 24 2020 at 16:25)</a>:</h4>
<p>But that's not good enough, right?</p>

<a name="191636269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191636269" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191636269">Johan Commelin (Mar 24 2020 at 16:26)</a>:</h4>
<p>What is the reason that we try to keep fields in core?</p>

<a name="191636384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191636384" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191636384">Johan Commelin (Mar 24 2020 at 16:26)</a>:</h4>
<p>I understand that <code>nat</code> has to be in core. And hence <code>add_monoid</code> must be in core. But everything starting from rings and beyond?? Could go in mathlib, I think.</p>

<a name="191636700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191636700" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191636700">Yury G. Kudryashov (Mar 24 2020 at 16:28)</a>:</h4>
<p><code>nat</code> is a <code>linear_ordered_semiring</code>. Not sure if core needs to know about this.</p>

<a name="191638154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191638154" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191638154">Bryan Gin-ge Chen (Mar 24 2020 at 16:37)</a>:</h4>
<p>My impression from <a href="#narrow/stream/113488-general/topic/3.2E7.20and.20maths" title="#narrow/stream/113488-general/topic/3.2E7.20and.20maths">this thread</a> is that it's not a big deal to move stuff out of core now and indeed might be a good idea given that Lean 4 core will have much less math. If there's some consensus on what should be done, I'd be happy to help out too.</p>

<a name="191653013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191653013" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191653013">Kevin Buzzard (Mar 24 2020 at 18:24)</a>:</h4>
<p><code>ring</code> is to <code>monoid</code> as <code>division_ring</code> is to <code>group_with_zero</code> as <code>comm_ring</code> is to <code>comm_monoid</code> as <code>field</code> is to <code>comm_group_with_zero</code>. This makes it sound like all of them are fundamental. Johan has just basically discovered a fundamental structure which is often ignored by mathematicians but which is helpful for formalisation.</p>

<a name="191653256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191653256" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191653256">Kevin Buzzard (Mar 24 2020 at 18:26)</a>:</h4>
<p><span class="user-mention" data-user-id="110193">@Cyril Cohen</span> have you ever heard of a group with 0? Could you just drop them into Coq's algebra heirarchy without any difficulty?</p>

<a name="191653399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191653399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191653399">Mario Carneiro (Mar 24 2020 at 18:27)</a>:</h4>
<p>There isn't any problem adding a new element in the middle of the hierarchy later, you just add a couple instances and that's it</p>

<a name="191653537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191653537" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191653537">Mario Carneiro (Mar 24 2020 at 18:28)</a>:</h4>
<p>The main reason you might not want to do this is because some theorems will generalize and there will be duplication there</p>

<a name="191653818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191653818" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191653818">Johan Commelin (Mar 24 2020 at 18:30)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> So you say it's not a problem that there are two paths to <code>has_div</code>?</p>

<a name="191653835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191653835" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191653835">Mario Carneiro (Mar 24 2020 at 18:30)</a>:</h4>
<p>not if they are defeq</p>

<a name="191653842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191653842" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191653842">Johan Commelin (Mar 24 2020 at 18:30)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">div</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">group_with_zero</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">g</span> <span class="n">h</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:=</span> <span class="n">g</span> <span class="bp">*</span> <span class="n">h</span><span class="bp">⁻¹</span>

<span class="c">/-</span><span class="cm">- The division operation on a group with zero element. -/</span>
<span class="kn">instance</span> <span class="n">group_with_zero</span><span class="bp">.</span><span class="n">has_div</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">group_with_zero</span> <span class="n">G</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">has_div</span> <span class="n">G</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">div</span><span class="bp">⟩</span>
</pre></div>

<a name="191653870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191653870" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191653870">Johan Commelin (Mar 24 2020 at 18:31)</a>:</h4>
<p>And exactly the same definition exists for division rings in core.</p>

<a name="191653872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191653872" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191653872">Mario Carneiro (Mar 24 2020 at 18:31)</a>:</h4>
<p>What's the definition in core?</p>

<a name="191654000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191654000" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191654000">Johan Commelin (Mar 24 2020 at 18:32)</a>:</h4>
<p>Also, the "some theorems" turn out to be several hundreds lines of duplication...</p>

<a name="191654001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191654001" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191654001">Mario Carneiro (Mar 24 2020 at 18:32)</a>:</h4>
<p>I think the definition in core could be generalized to a <code>has_mul</code> <code>has_inv</code></p>

<a name="191654089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191654089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191654089">Mario Carneiro (Mar 24 2020 at 18:32)</a>:</h4>
<p>well, that's expensive...</p>

<a name="191654154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191654154" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191654154">Johan Commelin (Mar 24 2020 at 18:33)</a>:</h4>
<p>What do you think of taking all of it out of core and putting it in mathlib?</p>

<a name="191654189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191654189" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191654189">Mario Carneiro (Mar 24 2020 at 18:33)</a>:</h4>
<p>It is used by <code>tactic.norm_num</code></p>

<a name="191654287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191654287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191654287">Mario Carneiro (Mar 24 2020 at 18:34)</a>:</h4>
<p>and possibly some bits of algebraic normalizer that no one has touched in years</p>

<a name="191654329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191654329" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191654329">Johan Commelin (Mar 24 2020 at 18:34)</a>:</h4>
<p>What? <code>division_rings</code> are used in core?</p>

<a name="191654365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191654365" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191654365">Johan Commelin (Mar 24 2020 at 18:34)</a>:</h4>
<p>But can't we move the stuff that uses it to mathlib as well?</p>

<a name="191654401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191654401" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191654401">Johan Commelin (Mar 24 2020 at 18:35)</a>:</h4>
<p>I can't imagine that there is <code>C++</code> code that depends on <code>division_ring</code></p>

<a name="191654582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191654582" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191654582">Mario Carneiro (Mar 24 2020 at 18:36)</a>:</h4>
<p>there is</p>

<a name="191654602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191654602" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191654602">Johan Commelin (Mar 24 2020 at 18:36)</a>:</h4>
<p>Oooh, wow</p>

<a name="191654645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191654645" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191654645">Mario Carneiro (Mar 24 2020 at 18:37)</a>:</h4>
<p>There are examples of using <code>norm_num</code> to do numeric simplification in fields</p>

<a name="191655184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191655184" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191655184">Mario Carneiro (Mar 24 2020 at 18:41)</a>:</h4>
<p><a href="https://github.com/leanprover-community/lean/blob/master/src/library/norm_num.cpp#L380-L390" target="_blank" title="https://github.com/leanprover-community/lean/blob/master/src/library/norm_num.cpp#L380-L390">this bit of C++</a> uses <a href="https://github.com/leanprover-community/lean/blob/master/library/init/algebra/norm_num.lean#L105-L107" target="_blank" title="https://github.com/leanprover-community/lean/blob/master/library/init/algebra/norm_num.lean#L105-L107">this theorem about fields</a></p>

<a name="191722607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191722607" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191722607">Johan Commelin (Mar 25 2020 at 10:05)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/2240" title="https://github.com/leanprover-community/mathlib/issues/2240">#2240</a></p>

<a name="191725305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191725305" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191725305">Bryan Gin-ge Chen (Mar 25 2020 at 10:30)</a>:</h4>
<p>Monoids with zero appear in some approaches to "the field with one element" (see 2.1.1 on page 12 of <a href="https://arxiv.org/abs/1801.05337" title="https://arxiv.org/abs/1801.05337">"F_1 for everyone"</a>). (I found this stuff via <a href="https://arxiv.org/abs/1809.03542" title="https://arxiv.org/abs/1809.03542">a paper by Baker and Lorscheid</a> about the moduli spaces of matroids.)</p>

<a name="191725501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191725501" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191725501">Patrick Massot (Mar 25 2020 at 10:32)</a>:</h4>
<p>By the way, what happened to your matroid formalization? Was it ever PR'ed to mathlib?</p>

<a name="191725665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191725665" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191725665">Bryan Gin-ge Chen (Mar 25 2020 at 10:34)</a>:</h4>
<p>It's still pending some big refactor. I'm still not happy with the way I deal with submatroids.</p>

<a name="191725860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191725860" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191725860">Johan Commelin (Mar 25 2020 at 10:35)</a>:</h4>
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> In <code>group_with_zero</code> I require that <code>0 ≠ 1</code>. Should that also be done for <code>monoid_with_zero</code>?</p>

<a name="191725953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191725953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191725953">Johan Commelin (Mar 25 2020 at 10:36)</a>:</h4>
<p>It seems that the page you linked to doesn't want that requirement.</p>

<a name="191725983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191725983" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191725983">Johan Commelin (Mar 25 2020 at 10:36)</a>:</h4>
<p>But it would be satisfied by <code>F_1</code></p>

<a name="191727399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191727399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191727399">Bryan Gin-ge Chen (Mar 25 2020 at 10:48)</a>:</h4>
<blockquote>
<p>Should that also be done for <code>monoid_with_zero</code>?</p>
</blockquote>
<p>Hmm, I'm not sure. I think ease of doing things in Lean would be most important here, and I don't have enough experience with algebra to say.</p>

<a name="191730534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191730534" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191730534">Bryan Gin-ge Chen (Mar 25 2020 at 11:19)</a>:</h4>
<p>Chapter 3 of <a href="http://oliver.impa.br/2018-Blueprints/versions/lecturenotes180521.pdf" title="http://oliver.impa.br/2018-Blueprints/versions/lecturenotes180521.pdf">Lorscheid's lecture notes "Blueprints and tropical scheme theory"</a> does algebra over monoids with zero, including prime ideals and localization.</p>

<a name="191731064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191731064" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191731064">Johan Commelin (Mar 25 2020 at 11:25)</a>:</h4>
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> Thanks. I can try to refactor to include <code>monoid_with_zero</code> in the hierarchy.</p>

<a name="191732651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191732651" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191732651">Kevin Buzzard (Mar 25 2020 at 11:42)</a>:</h4>
<p>Then you can start on diistrib_with_zero</p>

<a name="191732735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191732735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191732735">Kevin Buzzard (Mar 25 2020 at 11:43)</a>:</h4>
<p>Asking if 0 ne 1 feels a bit like asking if the zero ring is a field</p>

<a name="191732923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191732923" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191732923">Kevin Buzzard (Mar 25 2020 at 11:45)</a>:</h4>
<p>But my instincts are not helping. I guess the idea is that we should just concentrate on the objects which are of use to us, and for group_with_zero we definitely want 0 ne 1 because I don't want to the zero ring to have any valuations</p>

<a name="191734031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191734031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191734031">Kevin Buzzard (Mar 25 2020 at 11:59)</a>:</h4>
<p>For monoid_with_zero I don't think I care -- the issue is simply what people need. I guess if you don't assume it then you can prove that every ring is a monoid with 0</p>

<a name="191734049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191734049" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191734049">Kevin Buzzard (Mar 25 2020 at 11:59)</a>:</h4>
<p>So this seems natural.</p>

<a name="191758987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191758987" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191758987">Johan Commelin (Mar 25 2020 at 15:06)</a>:</h4>
<p>So... I changed some things, and now I get this build error</p>
<div class="codehilite"><pre><span></span>mathlib/src/data/complex/basic.lean:28:4: error: definition &#39;of_real&#39; is noncomputable, it depends on &#39;real.division_ring&#39;
</pre></div>

<a name="191759026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191759026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191759026">Johan Commelin (Mar 25 2020 at 15:07)</a>:</h4>
<p>But as far as I know, I didn't change the computability of anything</p>

<a name="191759059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191759059" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191759059">Johan Commelin (Mar 25 2020 at 15:07)</a>:</h4>
<p>How do I debug this issue?</p>

<a name="191763354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191763354" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191763354">Gabriel Ebner (Mar 25 2020 at 15:28)</a>:</h4>
<p>I think it pulls in the wrong type class instance somewhere.  I'd add noncomputable to <code>of_real</code> and then stare at the term with <code>pp.all</code> enabled.  Is this in the PR that you've just closed?</p>

<a name="191763421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191763421" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191763421">Johan Commelin (Mar 25 2020 at 15:29)</a>:</h4>
<p>Let me try.</p>

<a name="191763994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191763994" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191763994">Johan Commelin (Mar 25 2020 at 15:32)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">noncomputable</span> <span class="n">def</span> <span class="n">complex</span><span class="bp">.</span><span class="n">of_real</span> <span class="o">:</span> <span class="n">real</span> <span class="bp">→</span> <span class="n">complex</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">real</span><span class="o">),</span>
  <span class="o">{</span><span class="n">re</span> <span class="o">:=</span> <span class="n">r</span><span class="o">,</span>
   <span class="n">im</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">has_zero</span><span class="bp">.</span><span class="n">zero</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">real</span>
           <span class="o">(</span><span class="bp">@</span><span class="n">no_zero_divisors</span><span class="bp">.</span><span class="n">to_has_zero</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">real</span>
              <span class="o">(</span><span class="bp">@</span><span class="n">gwz</span><span class="bp">.</span><span class="n">no_zero_divisors</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">real</span> <span class="o">(</span><span class="bp">@</span><span class="n">division_ring</span><span class="bp">.</span><span class="n">to_group_with_zero</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">real</span> <span class="n">real</span><span class="bp">.</span><span class="n">division_ring</span><span class="o">)))}</span>
</pre></div>

<a name="191764041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191764041" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191764041">Johan Commelin (Mar 25 2020 at 15:32)</a>:</h4>
<p>So, it's now using this <code>group_with_zero</code> stuff</p>

<a name="191764205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191764205" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191764205">Johan Commelin (Mar 25 2020 at 15:33)</a>:</h4>
<p>Hmm, I guess I should lower some instance priorities?</p>

<a name="191764376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191764376" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191764376">Gabriel Ebner (Mar 25 2020 at 15:34)</a>:</h4>
<p>We've had similar problems when we removed the <code>decidable_eq</code> parent from fields.</p>

<a name="191764748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191764748" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191764748">Gabriel Ebner (Mar 25 2020 at 15:37)</a>:</h4>
<p>The problem there was that every field with decidable equality is a Euclidean ring (and every Euclidean ring is a ring, etc.).  But if you use this instance with <code>open_locale classical</code>, then you get instances using classical decidability.  And suddenly multiplication is noncomputable.</p>

<a name="191764823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191764823" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191764823">Gabriel Ebner (Mar 25 2020 at 15:37)</a>:</h4>
<p>I've put low priority on that instance and it seems to work.</p>

<a name="191765112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191765112" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191765112">Gabriel Ebner (Mar 25 2020 at 15:39)</a>:</h4>
<p>Ok, this can be a bit subtle.  I lowered the priority of <code>euclidean_domain.to_nonzero_comm_ring</code> instead: <a href="https://github.com/leanprover-community/mathlib/blob/e719f8ee3b0de0f02e3e32ff2a196f9703b63083/src/algebra/euclidean_domain.lean#L14" title="https://github.com/leanprover-community/mathlib/blob/e719f8ee3b0de0f02e3e32ff2a196f9703b63083/src/algebra/euclidean_domain.lean#L14">https://github.com/leanprover-community/mathlib/blob/e719f8ee3b0de0f02e3e32ff2a196f9703b63083/src/algebra/euclidean_domain.lean#L14</a></p>

<a name="191765363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191765363" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191765363">Johan Commelin (Mar 25 2020 at 15:40)</a>:</h4>
<p>Ok, I've lowered some priorities. Let's see what happens</p>

<a name="191766941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191766941" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191766941">Gabriel Ebner (Mar 25 2020 at 15:48)</a>:</h4>
<p>Do you know which one of the instances is noncomputable?  They all seem fine to me.</p>

<a name="191767024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191767024" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191767024">Johan Commelin (Mar 25 2020 at 15:49)</a>:</h4>
<p>I have no clue</p>

<a name="191767050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191767050" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191767050">Johan Commelin (Mar 25 2020 at 15:49)</a>:</h4>
<p>But lowering the priorities helped</p>

<a name="191767058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191767058" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191767058">Gabriel Ebner (Mar 25 2020 at 15:49)</a>:</h4>
<p>That said, both <code>no_zero_divisors.to_has_zero</code> and <code>gwz.no_zero_divisors</code> should have a lower priority.  I believe <code>#lint</code> should complain.</p>

<a name="191812040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191812040" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191812040">Johan Commelin (Mar 25 2020 at 21:15)</a>:</h4>
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> I've factored out monoid with zero. But I didn't prove many lemmas for them.</p>

<a name="191812501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/group%20with%20zero/near/191812501" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/16426groupwithzero.html#191812501">Bryan Gin-ge Chen (Mar 25 2020 at 21:19)</a>:</h4>
<p>OK, thanks! To be quite honest the algebraic hierarchy intimidates me still so I don't know that I'll have any intelligent comments on your code.</p>


{% endraw %}

{% include archive_update.html %}