---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/23851understandingprofileroutput.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html">understanding profiler output</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="126403538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126403538" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126403538">Kevin Buzzard (May 11 2018 at 07:44)</a>:</h4>
<p>So I am 2/3 of the way through a pretty big proof which I am currently reluctant to break up into smaller pieces.</p>

<a name="126403551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126403551" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126403551">Kevin Buzzard (May 11 2018 at 07:45)</a>:</h4>
<p>I might be pushing type class inference quite hard here, because it's a maths proof so everything is a group homomorphism and a ring homomorphism and I want Lean to infer everything.</p>

<a name="126403554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126403554" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126403554">Kevin Buzzard (May 11 2018 at 07:45)</a>:</h4>
<p>It has got to the point when, whenever I type something, I get the orange "thinking" bars for 5 seconds.</p>

<a name="126403595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126403595" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126403595">Kevin Buzzard (May 11 2018 at 07:46)</a>:</h4>
<p>I can live with this, but I wondered if there was an easy way to speed things up.</p>

<a name="126403604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126403604" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126403604">Kevin Buzzard (May 11 2018 at 07:47)</a>:</h4>
<p>[I have other alternatives, such as "plough on" or "break the proof up into two pieces", which will be painful]</p>

<a name="126403613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126403613" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126403613">Kevin Buzzard (May 11 2018 at 07:47)</a>:</h4>
<p>So I typed <code>set_option profiler true</code></p>

<a name="126403618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126403618" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126403618">Kevin Buzzard (May 11 2018 at 07:47)</a>:</h4>
<p>and now I can see a bunch of information and I realise I don't really understand it.</p>

<a name="126403655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126403655" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126403655">Kevin Buzzard (May 11 2018 at 07:48)</a>:</h4>
<p>For example</p>

<a name="126403671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126403671" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126403671">Kevin Buzzard (May 11 2018 at 07:49)</a>:</h4>
<p>it starts</p>

<a name="126403715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126403715" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126403715">Kevin Buzzard (May 11 2018 at 07:50)</a>:</h4>
<div class="codehilite"><pre><span></span>elaboration: tactic execution took 4.96s
num. allocated objects:  5886
num. allocated closures: 6029
 4961ms   100.0%   _interaction._lambda_2
 4960ms   100.0%   tactic.istep
 4960ms   100.0%   scope_trace
 4959ms   100.0%   tactic.istep._lambda_1
 4959ms   100.0%   tactic.step
 3460ms    69.7%   tactic.to_expr
 1388ms    28.0%   tactic.interactive.have._lambda_1
 1055ms    21.3%   tactic.interactive.propagate_tags
 1007ms    20.3%   interaction_monad_orelse
</pre></div>

<a name="126403719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126403719" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126403719">Kevin Buzzard (May 11 2018 at 07:50)</a>:</h4>
<p>so I would be quite happy to get the wait time down to 1 second</p>

<a name="126403727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126403727" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126403727">Kevin Buzzard (May 11 2018 at 07:50)</a>:</h4>
<p>but I now see that the problem might be <code>tactic.to_expr</code> and <code>tactic.step</code> and this doesn't really help me at all in locating the problem</p>

<a name="126403735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126403735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126403735">Kevin Buzzard (May 11 2018 at 07:51)</a>:</h4>
<p>I am envisaging that the problem might be "this simp is taking forever", which I could fix by looking at the proof simp finds and then typing it in directly</p>

<a name="126403740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126403740" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126403740">Kevin Buzzard (May 11 2018 at 07:51)</a>:</h4>
<p>or "this type class inference is taking forever", which again I feel like I might be able to help out with</p>

<a name="126403742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126403742" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126403742">Kevin Buzzard (May 11 2018 at 07:51)</a>:</h4>
<p>How do I diagnose the issue further?</p>

<a name="126403850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126403850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126403850">Mario Carneiro (May 11 2018 at 07:55)</a>:</h4>
<p>The heavy hitters are the ones when the number of ms decreases significantly from the previous line</p>

<a name="126403852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126403852" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126403852">Mario Carneiro (May 11 2018 at 07:55)</a>:</h4>
<p>so <code>tactic.to_expr</code> and <code>tactic.interactive.have</code> here</p>

<a name="126403894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126403894" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126403894">Mario Carneiro (May 11 2018 at 07:56)</a>:</h4>
<p>Basically that means that elaboration is taking up all the time</p>

<a name="126404455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126404455" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126404455">Kevin Buzzard (May 11 2018 at 08:15)</a>:</h4>
<p>so how can I help?</p>

<a name="126404456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126404456" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126404456">Kevin Buzzard (May 11 2018 at 08:15)</a>:</h4>
<p>Can I see explicitly which lines of code are causing the problem?</p>

<a name="126404498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126404498" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126404498">Kevin Buzzard (May 11 2018 at 08:16)</a>:</h4>
<p>ooh I just got an achievement</p>

<a name="126404499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126404499" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126404499">Kevin Buzzard (May 11 2018 at 08:16)</a>:</h4>
<p>"type of sorry macro is not a sort"</p>

<a name="126404500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126404500" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126404500">Kevin Buzzard (May 11 2018 at 08:16)</a>:</h4>
<p>new error message</p>

<a name="126404510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126404510" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126404510">Kevin Buzzard (May 11 2018 at 08:17)</a>:</h4>
<p>heh</p>

<a name="126404511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126404511" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126404511">Kevin Buzzard (May 11 2018 at 08:17)</a>:</h4>
<p>it should have said "you put an extra bracket on that line you dimwit"</p>

<a name="126404553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126404553" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126404553">Kevin Buzzard (May 11 2018 at 08:18)</a>:</h4>
<p>OK so it might be the case that I can help the elaborator out. I have 500 lines of code. Where do I start?</p>

<a name="126436589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126436589" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126436589">Kevin Buzzard (May 11 2018 at 22:11)</a>:</h4>
<p><code>elaboration of zariski.sheaf_of_types_on_standard_basis_for_finite_covers took 20.3s</code></p>

<a name="126436596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126436596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126436596">Kevin Buzzard (May 11 2018 at 22:11)</a>:</h4>
<p>finished :-)</p>

<a name="126436650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126436650" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126436650">Kenny Lau (May 11 2018 at 22:12)</a>:</h4>
<p>wonderful</p>

<a name="126436661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126436661" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126436661">Kevin Buzzard (May 11 2018 at 22:13)</a>:</h4>
<p><code>set_option class.instance_max_depth 75</code></p>

<a name="126436665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126436665" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126436665">Kevin Buzzard (May 11 2018 at 22:13)</a>:</h4>
<p>This is just for one lemma.#</p>

<a name="126436666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126436666" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126436666">Kevin Buzzard (May 11 2018 at 22:13)</a>:</h4>
<p>Obviously my code might be crappy</p>

<a name="126436667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126436667" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126436667">Kevin Buzzard (May 11 2018 at 22:13)</a>:</h4>
<p>Will this whole system really scale?</p>

<a name="126436716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126436716" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126436716">Kevin Buzzard (May 11 2018 at 22:14)</a>:</h4>
<p>max depth 72 is the min for which the code compiles</p>

<a name="126436733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126436733" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126436733">Kevin Buzzard (May 11 2018 at 22:15)</a>:</h4>
<p>It's the proof that an affine scheme satisfies the sheaf axiom for finite covers of basic opens by basic opens</p>

<a name="126436738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126436738" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126436738">Kevin Buzzard (May 11 2018 at 22:15)</a>:</h4>
<p>I've been putting it off for weeks, I knew it would be horrible, but I didn't know it would be this horrible.</p>

<a name="126439771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126439771" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126439771">Andrew Ashworth (May 11 2018 at 23:38)</a>:</h4>
<p>Big proofs are quite wobbly... there's no way you can split the lemma up into something shorter and less complicated?</p>

<a name="126440349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126440349" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126440349">Kevin Buzzard (May 11 2018 at 23:52)</a>:</h4>
<p>Not really. I could break it into some smaller pieces, but the problem is that the pieces other than the "main" piece would have really really complicated statements. Even the statement of the result whose hypotheses are so painful to check involves 13 groups / group homomorphisms which are inferred by type class inference, and the actual groups and homomorphisms involved are very elaborate, coming from some technical ring theory which I built up within the proof. Taking this stuff out into another lemma would involve making some very convoluted definitions and very long statements. On the other hand this is a snapshot of what "deep" mathematics looks like -- when one moves away from stuff like finite groups it does get complicated. Formalising graduate level real analysis (standard results in Hardy and Sobolev spaces) will I imagine be much worse.</p>

<a name="126440571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126440571" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126440571">Mario Carneiro (May 11 2018 at 23:59)</a>:</h4>
<p>If you yearn for the day of explicit <code>is_group_hom</code> assumptions, why don't you make the type <code>group_hom A B</code> of all functions that are group homs between groups A and B? That will make the typeclass problem trivial</p>

<a name="126440582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126440582" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126440582">Mario Carneiro (May 12 2018 at 00:00)</a>:</h4>
<p>It's not clear to me that this is the real issue, but it might help</p>

<a name="126440640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126440640" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126440640">Mario Carneiro (May 12 2018 at 00:00)</a>:</h4>
<p>I am not convinced that the problems you are discovering are unavoidable, but I haven't had much time to look at your formalization in depth</p>

<a name="126448591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126448591" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126448591">Johan Commelin (May 12 2018 at 04:55)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Wow! Congratulations! That must have been a major road block.</p>

<a name="126448638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126448638" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126448638">Johan Commelin (May 12 2018 at 04:56)</a>:</h4>
<p>Can someone explain to me what the pros and cons are of having a type <code>group_hom A B</code> like Mario suggested?</p>

<a name="126455761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126455761" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126455761">Kevin Buzzard (May 12 2018 at 09:34)</a>:</h4>
<p>I personally don't understand the subtleties between the different possibilities for doing this - you could have a definition, or a structure, or a class. If you have a class then you want type class inference to do the donkeywork for you -- you seem to be making a commitment of the form "it should be easy to work out when something is a group hom so we'll make a machine do it for you". Unfortunately as I found out in my scheme work, life is not always so easy: I had a situation with a map f of (finite) types J -&gt; I, groups G i and H j, and group homs c j from G (f j) to H j, and then wanted to define a map from Pi_i G i to Pi_j H j sending (g i) to the element which was c j (g (f j)) at j, and I thought I would be clogging up the type class inference system to write some explicit instance which was supposed to spot this, so I proved it by hand and then had to feed it into the type class inference system manually -- as I'm sure you'll agree Johan, a mathematician would note that this was obviously a group homomorphism -- "none of the G i or H j know anything about each other so they can't interfere with each other" -- and move on.</p>

<a name="126464249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126464249" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126464249">Patrick Massot (May 12 2018 at 15:00)</a>:</h4>
<p>I think this scheme theory effort could be important for the future of maths in Lean. I can't wait to see how Mario or Johannes will clean it</p>

<a name="126464252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126464252" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126464252">Patrick Massot (May 12 2018 at 15:00)</a>:</h4>
<p>I don't believe this monster proof cannot be cut in pieces</p>

<a name="126464255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126464255" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126464255">Patrick Massot (May 12 2018 at 15:00)</a>:</h4>
<p>The issue is to figure out what is the right infrastructure</p>

<a name="126464262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126464262" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126464262">Patrick Massot (May 12 2018 at 15:01)</a>:</h4>
<p>It's not about stating a lemma for each quarter of the proof (which would indeed give very technical statements)</p>

<a name="126464264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126464264" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126464264">Patrick Massot (May 12 2018 at 15:01)</a>:</h4>
<p>It's like my problem with the chain rule, compared to the new Coq proof</p>

<a name="126464307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126464307" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126464307">Patrick Massot (May 12 2018 at 15:02)</a>:</h4>
<p>In this case part of the infrastructure is a clever way of handling little o notations</p>

<a name="126464354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126464354" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126464354">Patrick Massot (May 12 2018 at 15:04)</a>:</h4>
<p>I think figuring out the infrastructure is really a core skill for non-trivial math formalization, and it's certainly normal that we don't get it right on our first try (especially for people with no CS background)</p>

<a name="126467149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126467149" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126467149">Kevin Buzzard (May 12 2018 at 16:51)</a>:</h4>
<p>I just did this scheme thing for fun. I have no idea whether they're interested in it for mathlib. I know that various bits should go in there, like the universal property of localization etc, but I don't know if they want all this sheaf stuff. My impression is that Mario is not that interested in definitions, he would rather have lemmas. I'm of a very different opinion but I was not going to be pushing for schemes to go into mathlib because of this. Mario was like "yeah but what the theorem?" when we talked about it and I was just going "it's schemes, there is no theorem, there are 1000 theorems but the fundamental thing is the definition". Well we'll have a theorem soon, but I'm not sure he'll be interested in it. I must say that this experience has made me deeply skeptical about stuff like <a href="https://blog.deepsense.ai/machine-learning-application-in-automated-reasoning/" target="_blank" title="https://blog.deepsense.ai/machine-learning-application-in-automated-reasoning/">https://blog.deepsense.ai/machine-learning-application-in-automated-reasoning/</a></p>

<a name="126468000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126468000" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126468000">Johan Commelin (May 12 2018 at 17:24)</a>:</h4>
<p>Yes... there is something of a gap to bridge (-; You don't get there with just a bit of NLP.</p>

<a name="126468003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126468003" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126468003">Johan Commelin (May 12 2018 at 17:24)</a>:</h4>
<p>Nevertheless, I sincerely hope that throwing some AI into the mix, the computer can take some of the tedious bits of work out of our hands...</p>

<a name="126468011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126468011" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126468011">Johan Commelin (May 12 2018 at 17:25)</a>:</h4>
<p>And basically this is what we try to do with some tactics...</p>

<a name="126468012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126468012" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126468012">Johan Commelin (May 12 2018 at 17:25)</a>:</h4>
<p>But one could imagine a rigged up version.</p>

<a name="126468709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126468709" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126468709">Kevin Buzzard (May 12 2018 at 17:53)</a>:</h4>
<p>Having spent several days wrestling with a 500 line proof which was of the form "this is completely trivial", it is now a joy to be back writing short proofs of non-trivial statements -- "continuous image of compact is compact", "we already proved a lemma saying what the image of Spec(f) was in this case", "compact iff every open cover has a finite subcover" etc etc -- I feel like I'm making rapid progress in every line now.</p>

<a name="126508258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126508258" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126508258">Patrick Massot (May 13 2018 at 20:11)</a>:</h4>
<p>I really really think you should try to get schemes in mathlib</p>

<a name="126508261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126508261" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126508261">Patrick Massot (May 13 2018 at 20:11)</a>:</h4>
<p>Otherwise we'll never know whether Lean can handle it without type class depth 100</p>

<a name="126508301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126508301" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126508301">Patrick Massot (May 13 2018 at 20:12)</a>:</h4>
<p>And I also think like <a href="https://blog.deepsense.ai/machine-learning-application-in-automated-reasoning/" target="_blank" title="https://blog.deepsense.ai/machine-learning-application-in-automated-reasoning/">https://blog.deepsense.ai/machine-learning-application-in-automated-reasoning/</a> looks like crackpot science</p>

<a name="126508309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/understanding%20profiler%20output/near/126508309" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/23851understandingprofileroutput.html#126508309">Patrick Massot (May 13 2018 at 20:13)</a>:</h4>
<p>Clearly writing this paper without first trying to translate the scheme definition by hand is either stupid or fraud</p>


{% endraw %}

{% include archive_update.html %}