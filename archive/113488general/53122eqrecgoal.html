---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/53122eqrecgoal.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html">eq.rec goal</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="157593938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157593938" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157593938">Kevin Buzzard (Feb 05 2019 at 09:37)</a>:</h4>
<p>If my goal is</p>
<div class="codehilite"><pre><span></span>eq.rec (finsupp.prod g₂ (λ (r : R) (n : ℤ), minimal_value_group.mk v₂ r ^ n)) _ =
    finsupp.prod g₂ (λ (r : R) (n : ℤ), minimal_value_group.mk v₂ r ^ n)
</pre></div>


<p>then did I take a wrong turn or is there some easy way to finish this?</p>

<a name="157594186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157594186" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157594186">Johannes Hölzl (Feb 05 2019 at 09:42)</a>:</h4>
<p>If both sides are definitional equal then you can just apply <code>refl</code>. Proof irrelevance in definitional equality allows<code>eq.rec</code> to compute as long as the data fits.</p>

<a name="157594266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157594266" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157594266">Johannes Hölzl (Feb 05 2019 at 09:44)</a>:</h4>
<p>So the <code>_</code> (before <code>=</code>) may be an arbitrary proof, even a variable. Still <code>eq.rec</code> can reduce by computation, Lean will interpret an arbitrary proof as <code>refl _</code> as this always fits</p>

<a name="157594847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157594847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157594847">Kevin Buzzard (Feb 05 2019 at 09:56)</a>:</h4>
<p>I tried <code>refl</code> and it didn't work, that's why I posted here :-/</p>

<a name="157594962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157594962" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157594962">Kevin Buzzard (Feb 05 2019 at 09:58)</a>:</h4>
<p><code>dsimp</code> takes me to</p>
<div class="codehilite"><pre><span></span>⊢ eq.rec (finsupp.prod g₂ (λ (r : R), pow (minimal_value_group.mk v₂ r))) _ =
    finsupp.prod g₂ (λ (r : R), pow (minimal_value_group.mk v₂ r))
</pre></div>

<a name="157594973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157594973" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157594973">Kevin Buzzard (Feb 05 2019 at 09:59)</a>:</h4>
<p>I haven't got my head around the goal really.</p>

<a name="157594991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157594991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157594991">Kevin Buzzard (Feb 05 2019 at 09:59)</a>:</h4>
<p>There are no weird variable names occurring twice:</p>
<div class="codehilite"><pre><span></span>R : Type u₁,
_inst_4 : comm_ring R,
Γ₁ : Type u₂,
_inst_5 : linear_ordered_comm_group Γ₁,
Γ₂ : Type u₃,
_inst_6 : linear_ordered_comm_group Γ₂,
v₁ : valuation R Γ₁,
v₂ : valuation R Γ₂,
h : is_equiv v₁ v₂,
g₁ g₂ : multiplicative (R →₀ ℤ),
h12 :
  (λ (f : multiplicative (R →₀ ℤ)),
       finsupp.prod f (λ (r : R) (n : ℤ), (λ (r : R), option.get_or_else (⇑v₁ r) 1) r ^ n))
      (g₁⁻¹ * g₂) =
    1,
this :
  finsupp.prod g₁ (λ (r : R) (n : ℤ), minimal_value_group.mk v₂ r ^ n) =
    finsupp.prod g₂ (λ (r : R) (n : ℤ), minimal_value_group.mk v₂ r ^ n)
⊢ eq.rec (finsupp.prod g₂ (λ (r : R), pow (minimal_value_group.mk v₂ r))) _ =
    finsupp.prod g₂ (λ (r : R), pow (minimal_value_group.mk v₂ r))
</pre></div>

<a name="157595134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595134" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595134">Kevin Buzzard (Feb 05 2019 at 10:02)</a>:</h4>
<p>There might be universe issues. Is this possible?</p>

<a name="157595141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595141" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595141">Kevin Buzzard (Feb 05 2019 at 10:02)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> I am scared I am running into problems because of that structure with a new type in the data.</p>

<a name="157595249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595249" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595249">Mario Carneiro (Feb 05 2019 at 10:05)</a>:</h4>
<p>you haven't really said all that is needed to identify the problem</p>

<a name="157595252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595252" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595252">Mario Carneiro (Feb 05 2019 at 10:05)</a>:</h4>
<p><code>eq.rec</code> hides a lot of info</p>

<a name="157595267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595267" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595267">Kevin Buzzard (Feb 05 2019 at 10:05)</a>:</h4>
<p><a href="https://gist.github.com/kbuzzard/75f316bccc64cb17f5217e02e364b4e8" target="_blank" title="https://gist.github.com/kbuzzard/75f316bccc64cb17f5217e02e364b4e8">https://gist.github.com/kbuzzard/75f316bccc64cb17f5217e02e364b4e8</a></p>

<a name="157595319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595319" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595319">Mario Carneiro (Feb 05 2019 at 10:06)</a>:</h4>
<p>what is the type of the argument in the <code>_</code>?</p>

<a name="157595322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595322" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595322">Kevin Buzzard (Feb 05 2019 at 10:06)</a>:</h4>
<p>What's an easy way to find this out?</p>

<a name="157595333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595333" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595333">Kevin Buzzard (Feb 05 2019 at 10:07)</a>:</h4>
<p>I don't understand the goal.</p>

<a name="157595347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595347" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595347">Mario Carneiro (Feb 05 2019 at 10:07)</a>:</h4>
<p>possibly <code>suffices h, change eq.rec (finsupp.prod g₂ (λ (r : R), pow (minimal_value_group.mk v₂ r))) h = _</code></p>

<a name="157595447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595447" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595447">Kevin Buzzard (Feb 05 2019 at 10:09)</a>:</h4>
<div class="codehilite"><pre><span></span>invalid &#39;eq.rec&#39; application, elaborator has special support for this kind of application (it is handled as an &quot;eliminator&quot;), but expected type must not contain metavariables
  ?m_1
</pre></div>

<a name="157595522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595522" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595522">Kevin Buzzard (Feb 05 2019 at 10:10)</a>:</h4>
<p>If you can explain what the goal means then I can think about the maths and try and figure out what I have done.</p>

<a name="157595544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595544" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595544">Kevin Buzzard (Feb 05 2019 at 10:11)</a>:</h4>
<p>The goal appeared when I had a term in a quotient group and I applied the <code>induction</code> tactic on the term.</p>

<a name="157595546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595546" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595546">Mario Carneiro (Feb 05 2019 at 10:11)</a>:</h4>
<p>well this is the problem with <code>eq.rec</code> terms, they don't give enough information to be reconstructible</p>

<a name="157595548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595548" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595548">Kevin Buzzard (Feb 05 2019 at 10:11)</a>:</h4>
<p>Hmm.</p>

<a name="157595555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595555" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595555">Kevin Buzzard (Feb 05 2019 at 10:11)</a>:</h4>
<p>Maybe <code>cases</code> would have been a better tactic.</p>

<a name="157595567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595567" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595567">Mario Carneiro (Feb 05 2019 at 10:11)</a>:</h4>
<p>this is the fault of a <code>simp</code> or <code>rw</code> somewhere</p>

<a name="157595624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595624" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595624">Mario Carneiro (Feb 05 2019 at 10:12)</a>:</h4>
<p>does <code>@@eq.rec (λ
        (g :
          @valuation.minimal_valuation.parametrized_subgroup.Γ.{u₁ u₂} Γ₁ _inst_5
            (@valuation.minimal_value_group.{u₁ u₂} R _inst_4
               (λ (a b : R), classical.prop_decidable (@eq.{u₁+1} R a b))
               Γ₁
               _inst_5
               v₁)),
          @valuation.minimal_valuation.parametrized_subgroup.Γ.{u₁ u₃} Γ₂ _inst_6
            (@valuation.minimal_value_group.{u₁ u₃} R _inst_4
               (λ (a b : R), classical.prop_decidable (@eq.{u₁+1} R a b))
               Γ₂
               _inst_6
               v₂)) _ h = _</code> work?</p>

<a name="157595632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595632" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595632">Kevin Buzzard (Feb 05 2019 at 10:12)</a>:</h4>
<p><code>cases</code> doesn't work but perhaps I need to think about the moment the term appeared and try something less naive.</p>

<a name="157595642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595642" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595642">Mario Carneiro (Feb 05 2019 at 10:12)</a>:</h4>
<p>for the term in the <code>change</code></p>

<a name="157595672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595672" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595672">Mario Carneiro (Feb 05 2019 at 10:13)</a>:</h4>
<p>That looks like a constant function, meaning you tried to cast a term across an equality of types</p>

<a name="157595718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595718" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595718">Kevin Buzzard (Feb 05 2019 at 10:14)</a>:</h4>
<div class="codehilite"><pre><span></span>type mismatch at application
  eq.rec ?m_2 h
term
  h
has type
  is_equiv v₁ v₂
but is expected to have type
  ?m_1 = ?m_2
</pre></div>

<a name="157595725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595725" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595725">Mario Carneiro (Feb 05 2019 at 10:14)</a>:</h4>
<p>did you <code>suffices h,</code>?</p>

<a name="157595750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595750" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595750">Kevin Buzzard (Feb 05 2019 at 10:15)</a>:</h4>
<p>So the goal originally had an <code>eq.rec</code> with one of the g2's replaced by a g1, and I thought "I don't understand that goal, maybe it's just a stupid way of saying the two terms are equal". So I wrote</p>
<div class="codehilite"><pre><span></span>  <span class="n">suffices</span> <span class="o">:</span> <span class="n">finsupp</span><span class="bp">.</span><span class="n">prod</span> <span class="n">g₁</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">),</span> <span class="n">minimal_value_group</span><span class="bp">.</span><span class="n">mk</span> <span class="n">v₂</span> <span class="n">r</span> <span class="err">^</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span>
             <span class="n">finsupp</span><span class="bp">.</span><span class="n">prod</span> <span class="n">g₂</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">),</span> <span class="n">minimal_value_group</span><span class="bp">.</span><span class="n">mk</span> <span class="n">v₂</span> <span class="n">r</span> <span class="err">^</span> <span class="n">n</span><span class="o">),</span>
    <span class="n">rw</span> <span class="n">this</span><span class="o">,</span>
</pre></div>


<p>because I fancied my chances at proving this. So I did a rewrite inside an eq.rec and that's what has burnt me.</p>

<a name="157595809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595809" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595809">Mario Carneiro (Feb 05 2019 at 10:16)</a>:</h4>
<p>can you show more context? What's the proof</p>

<a name="157595834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595834" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595834">Mario Carneiro (Feb 05 2019 at 10:17)</a>:</h4>
<p>that goal doesn't look that bad, you are just proving an equality</p>

<a name="157595836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595836" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595836">Kevin Buzzard (Feb 05 2019 at 10:17)</a>:</h4>
<p>This was the goal:</p>
<div class="codehilite"><pre><span></span><span class="n">eq</span><span class="bp">.</span><span class="n">rec</span> <span class="o">(</span><span class="n">finsupp</span><span class="bp">.</span><span class="n">prod</span> <span class="n">g₁</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">),</span> <span class="n">minimal_value_group</span><span class="bp">.</span><span class="n">mk</span> <span class="n">v₂</span> <span class="n">r</span> <span class="err">^</span> <span class="n">n</span><span class="o">))</span> <span class="bp">_</span> <span class="bp">=</span>
    <span class="n">finsupp</span><span class="bp">.</span><span class="n">prod</span> <span class="n">g₂</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">),</span> <span class="n">minimal_value_group</span><span class="bp">.</span><span class="n">mk</span> <span class="n">v₂</span> <span class="n">r</span> <span class="err">^</span> <span class="n">n</span><span class="o">)</span>
</pre></div>


<p>and then I wrote the "suffices" stuff above</p>

<a name="157595839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595839" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595839">Mario Carneiro (Feb 05 2019 at 10:17)</a>:</h4>
<p>no no, like 6 steps before this</p>

<a name="157595844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595844" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595844">Mario Carneiro (Feb 05 2019 at 10:17)</a>:</h4>
<p>how did we get here</p>

<a name="157595858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595858" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595858">Mario Carneiro (Feb 05 2019 at 10:18)</a>:</h4>
<p>this isn't very MWE so give some more context</p>

<a name="157595899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595899" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595899">Kevin Buzzard (Feb 05 2019 at 10:18)</a>:</h4>
<p><code>induction g</code> was where things started to go wrong.</p>

<a name="157595904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595904" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595904">Kevin Buzzard (Feb 05 2019 at 10:18)</a>:</h4>
<p><code>g</code> is an element of a quotient group.</p>

<a name="157595905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595905">Mario Carneiro (Feb 05 2019 at 10:18)</a>:</h4>
<p>I have no idea what <code>g</code> is or what <code>induction</code> is proving</p>

<a name="157595908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595908" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595908">Kevin Buzzard (Feb 05 2019 at 10:18)</a>:</h4>
<p>but I wanted to get an element of the top group</p>

<a name="157595923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595923" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595923">Kevin Buzzard (Feb 05 2019 at 10:19)</a>:</h4>
<p>and the <code>eq.rec</code> is the assertion that my argument is independent of the choice of lift.</p>

<a name="157595929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595929" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595929">Mario Carneiro (Feb 05 2019 at 10:19)</a>:</h4>
<p>The <code>_</code> argument is a <code>quot.sound</code> according to your pp.all</p>

<a name="157595932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157595932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157595932">Johan Commelin (Feb 05 2019 at 10:19)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Post the entire lemma + proof-attempt + tactic state. I guess that will help more.</p>

<a name="157596007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596007">Kevin Buzzard (Feb 05 2019 at 10:20)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="c1">-- Notes: if v1 equiv v2 then we need a bijection from the image of v1 to the</span>
<span class="c1">-- image of v2; we need that the supports are the same; we need that</span>
<span class="c1">-- the minimal_value_group for v2 is isomorphic to the subgroup of Gamma_2 generated</span>
<span class="c1">-- by the image of the stuff not in the support.</span>

<span class="c1">-- Theorem we almost surely need -- two equivalence valuations have isomorphic</span>
<span class="c1">-- value groups.</span>
<span class="kn">lemma</span> <span class="n">minimal_valuations_biject_of_equiv</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₁</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span>
<span class="o">{</span><span class="err">Γ₁</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₂</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_ordered_comm_group</span> <span class="err">Γ₁</span><span class="o">]</span>
<span class="o">{</span><span class="err">Γ₂</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₃</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_ordered_comm_group</span> <span class="err">Γ₂</span><span class="o">]</span>
<span class="o">(</span><span class="n">v₁</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ₁</span><span class="o">)</span> <span class="o">(</span><span class="n">v₂</span> <span class="o">:</span> <span class="n">valuation</span> <span class="n">R</span> <span class="err">Γ₂</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">is_equiv</span> <span class="n">v₁</span> <span class="n">v₂</span><span class="o">)</span> <span class="o">:</span>
<span class="o">(</span><span class="n">minimal_value_group</span> <span class="n">v₁</span><span class="o">)</span><span class="bp">.</span><span class="err">Γ</span>  <span class="bp">→</span> <span class="o">(</span><span class="n">minimal_value_group</span> <span class="n">v₂</span><span class="o">)</span><span class="bp">.</span><span class="err">Γ</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">g</span><span class="o">,</span> <span class="k">begin</span>
  <span class="n">induction</span> <span class="n">g</span> <span class="k">with</span> <span class="n">g</span> <span class="n">g₁</span> <span class="n">g₂</span> <span class="n">h12</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">finsupp</span><span class="bp">.</span><span class="n">prod</span> <span class="n">g</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">r</span> <span class="n">n</span><span class="o">,(</span><span class="n">minimal_value_group</span><span class="bp">.</span><span class="n">mk</span> <span class="n">v₂</span> <span class="n">r</span><span class="o">)</span> <span class="err">^</span> <span class="n">n</span><span class="o">),</span>
  <span class="n">cases</span> <span class="n">h12</span> <span class="k">with</span> <span class="n">h12</span> <span class="n">hoops</span><span class="o">,</span>
    <span class="n">swap</span><span class="o">,</span><span class="n">cases</span> <span class="n">hoops</span><span class="o">,</span>
  <span class="c1">-- If φ1 is the function from R to Γ1 which is v1 away from the support and</span>
  <span class="c1">-- sends the support to 1, then φ1 extends to a group hom Z[R] -&gt; Γ1 (free ab group on R)</span>
  <span class="c1">-- and h12 is the hypothesis that g₁⁻¹g₂ is in the kernel, so g₁ and g₂ get sent to</span>
  <span class="c1">-- the same element of Γ1. We need the analogous result for φ2.</span>
  <span class="n">convert</span> <span class="n">rfl</span><span class="o">,</span>
  <span class="n">suffices</span> <span class="o">:</span> <span class="n">finsupp</span><span class="bp">.</span><span class="n">prod</span> <span class="n">g₁</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">),</span> <span class="n">minimal_value_group</span><span class="bp">.</span><span class="n">mk</span> <span class="n">v₂</span> <span class="n">r</span> <span class="err">^</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span>
             <span class="n">finsupp</span><span class="bp">.</span><span class="n">prod</span> <span class="n">g₂</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">),</span> <span class="n">minimal_value_group</span><span class="bp">.</span><span class="n">mk</span> <span class="n">v₂</span> <span class="n">r</span> <span class="err">^</span> <span class="n">n</span><span class="o">),</span>
   <span class="n">subst</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">swap</span><span class="o">,</span><span class="n">sorry</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="n">dsimp</span><span class="o">,</span>
  <span class="c1">-- I am in eq.rec hell</span>
<span class="kn">end</span>
</pre></div>

<a name="157596022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596022">Kevin Buzzard (Feb 05 2019 at 10:21)</a>:</h4>
<p>Instead of <code>induction g</code> I could perhaps have used some more suitable approach for working with quotient groups.</p>

<a name="157596030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596030" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596030">Mario Carneiro (Feb 05 2019 at 10:21)</a>:</h4>
<p>you are constructing a function by tactics?</p>

<a name="157596034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596034" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596034">Kevin Buzzard (Feb 05 2019 at 10:21)</a>:</h4>
<p>oh oops</p>

<a name="157596037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596037" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596037">Mario Carneiro (Feb 05 2019 at 10:21)</a>:</h4>
<p>this isn't a lemma</p>

<a name="157596043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596043" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596043">Kevin Buzzard (Feb 05 2019 at 10:21)</a>:</h4>
<p>oh yeah</p>

<a name="157596045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596045" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596045">Kevin Buzzard (Feb 05 2019 at 10:21)</a>:</h4>
<p>good catch. It used to be a lemma.</p>

<a name="157596089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596089">Kevin Buzzard (Feb 05 2019 at 10:22)</a>:</h4>
<p>dammit</p>

<a name="157596091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596091" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596091">Mario Carneiro (Feb 05 2019 at 10:22)</a>:</h4>
<p>I see, you should have used quotient.lift instead of this induction/cases business</p>

<a name="157596093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596093" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596093">Kevin Buzzard (Feb 05 2019 at 10:22)</a>:</h4>
<p>even if this worked I wouldn't be able to prove anything about it.</p>

<a name="157596111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596111">Kevin Buzzard (Feb 05 2019 at 10:22)</a>:</h4>
<p>Yes. Do you remember that a few weeks ago I constructed my own quotient types just by using sets of equivalence classes?</p>

<a name="157596113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596113" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596113">Kevin Buzzard (Feb 05 2019 at 10:22)</a>:</h4>
<p>And I said "look what I did, what's all this quot axiom stuff?"</p>

<a name="157596121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596121" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596121">Kevin Buzzard (Feb 05 2019 at 10:23)</a>:</h4>
<p>and people made comments about computability that I didn't understand.</p>

<a name="157596128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596128" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596128">Mario Carneiro (Feb 05 2019 at 10:24)</a>:</h4>
<p>What is <code>(minimal_value_group v₁).Γ</code>?</p>

<a name="157596168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596168" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596168">Mario Carneiro (Feb 05 2019 at 10:24)</a>:</h4>
<p>is it a quotient?</p>

<a name="157596176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596176" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596176">Mario Carneiro (Feb 05 2019 at 10:24)</a>:</h4>
<p>or more to the point, shouldn't it be hidden behind an API?</p>

<a name="157596177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596177" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596177">Kevin Buzzard (Feb 05 2019 at 10:24)</a>:</h4>
<p>Yes</p>

<a name="157596179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596179" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596179">Kevin Buzzard (Feb 05 2019 at 10:24)</a>:</h4>
<p><a href="#narrow/stream/113488-general/topic/why.20is.20quot.20an.20axiom.3F" title="#narrow/stream/113488-general/topic/why.20is.20quot.20an.20axiom.3F">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/why.20is.20quot.20an.20axiom.3F</a></p>

<a name="157596188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596188" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596188">Kevin Buzzard (Feb 05 2019 at 10:25)</a>:</h4>
<p>Can you see that the proof...erm...construction is full of comments? I was just trying to run at it and make notes to see what API I need.</p>

<a name="157596198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596198" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596198">Kevin Buzzard (Feb 05 2019 at 10:25)</a>:</h4>
<p>The top down approach, frowned upon by you guys.</p>

<a name="157596205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596205" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596205">Kevin Buzzard (Feb 05 2019 at 10:25)</a>:</h4>
<p>I'm not as good as you at working out what API I need, I just try and prove the thing I want and let the API come later when I get stuck.</p>

<a name="157596212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596212" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596212">Mario Carneiro (Feb 05 2019 at 10:25)</a>:</h4>
<p>well, <code>minimal_value_group</code> sounds like a thing you want to have an abstract characterization of</p>

<a name="157596266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596266" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596266">Mario Carneiro (Feb 05 2019 at 10:26)</a>:</h4>
<p>if it's defined as a quotient, then probably there is a lift like theorem about it, possibly slightly different than the one lean gives you</p>

<a name="157596275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596275" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596275">Mario Carneiro (Feb 05 2019 at 10:26)</a>:</h4>
<p>what's the math story here?</p>

<a name="157596276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596276" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596276">Kevin Buzzard (Feb 05 2019 at 10:27)</a>:</h4>
<p>The notes above the theorem are intermediate results which I realised I needed precisely because I was getting stuck. There is more than one sorry in the proof.</p>

<a name="157596287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596287">Kevin Buzzard (Feb 05 2019 at 10:27)</a>:</h4>
<p>There is a set-theoretic issue in the definition of a perfectoid space and it is one that we have already talked about at length.</p>

<a name="157596289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596289" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596289">Mario Carneiro (Feb 05 2019 at 10:27)</a>:</h4>
<p>right</p>

<a name="157596292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596292" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596292">Mario Carneiro (Feb 05 2019 at 10:27)</a>:</h4>
<p><code>minimal_value_group</code> is the resolution, and it has a UMP that you put some blood/sweat/tears into</p>

<a name="157596336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596336" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596336">Mario Carneiro (Feb 05 2019 at 10:28)</a>:</h4>
<p>use it</p>

<a name="157596338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596338" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596338">Kevin Buzzard (Feb 05 2019 at 10:28)</a>:</h4>
<p>A valuation on a ring R is a pair consisting of an abelian group G in an arbitrary universe and, lying slightly, a map from R to G.</p>

<a name="157596357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596357" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596357">Kevin Buzzard (Feb 05 2019 at 10:29)</a>:</h4>
<p>The blood sweat and tears was replacing G by a group G' in the same universe as R and proving that the new valuation was equivalent to the old one.</p>

<a name="157596370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596370" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596370">Kevin Buzzard (Feb 05 2019 at 10:29)</a>:</h4>
<p>I am trying to prove a random thing about this equivalence that I am not ready for, but my idea is that proving it tells me more about the API I need.</p>

<a name="157596390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596390" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596390">Mario Carneiro (Feb 05 2019 at 10:29)</a>:</h4>
<p>So G' is <code>minimal_value_group</code> right?</p>

<a name="157596395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596395" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596395">Mario Carneiro (Feb 05 2019 at 10:29)</a>:</h4>
<p>You say replacing G by G', what is the relation between them</p>

<a name="157596396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596396">Kevin Buzzard (Feb 05 2019 at 10:30)</a>:</h4>
<p>Let's say two valuations on R are <em>isomorphic</em> if the G's are isomorphic and the diagram commutes.</p>

<a name="157596457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596457" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596457">Kevin Buzzard (Feb 05 2019 at 10:30)</a>:</h4>
<p>I am trying to prove that if two valuations are equivalent, then the associated minimal valuations are isomorphic.</p>

<a name="157596472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596472" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596472">Mario Carneiro (Feb 05 2019 at 10:30)</a>:</h4>
<p>aha, okay, that sounds like an easy consequence of the right UMP</p>

<a name="157596486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596486" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596486">Kevin Buzzard (Feb 05 2019 at 10:31)</a>:</h4>
<p>If R were a group and v were a group homomorphism (which it may as well be for the purposes of this discussion) then the minimal valuation group would be the image of R under v</p>

<a name="157596498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596498" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596498">Kevin Buzzard (Feb 05 2019 at 10:31)</a>:</h4>
<p>wait that's exactly wrong</p>

<a name="157596504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596504" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596504">Kevin Buzzard (Feb 05 2019 at 10:31)</a>:</h4>
<p>the minimal valuation group would be the quotient of R by the kernel of v</p>

<a name="157596511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596511" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596511">Kevin Buzzard (Feb 05 2019 at 10:31)</a>:</h4>
<p>which is in R's universe</p>

<a name="157596513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596513" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596513">Mario Carneiro (Feb 05 2019 at 10:31)</a>:</h4>
<p>there should be some kind of commutative diagram here</p>

<a name="157596559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596559" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596559">Mario Carneiro (Feb 05 2019 at 10:32)</a>:</h4>
<p>like a map factors through this minimal valuation</p>

<a name="157596569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596569">Kevin Buzzard (Feb 05 2019 at 10:32)</a>:</h4>
<p>I think what I need is a second "minimal" valuation which is the thing I just said, replace G with the subgroup which is the image of R</p>

<a name="157596574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596574">Mario Carneiro (Feb 05 2019 at 10:32)</a>:</h4>
<p>didn't you already do that?</p>

<a name="157596578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596578" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596578">Kevin Buzzard (Feb 05 2019 at 10:33)</a>:</h4>
<p>I never introduced the second one.</p>

<a name="157596588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596588">Kevin Buzzard (Feb 05 2019 at 10:33)</a>:</h4>
<p>Given R,G,v I made G1 := R/ker(v)</p>

<a name="157596591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596591" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596591">Kevin Buzzard (Feb 05 2019 at 10:33)</a>:</h4>
<p>(here R is a group)</p>

<a name="157596594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596594" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596594">Kevin Buzzard (Feb 05 2019 at 10:33)</a>:</h4>
<p>(and v a group hom)</p>

<a name="157596597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596597" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596597">Kevin Buzzard (Feb 05 2019 at 10:33)</a>:</h4>
<p>but I never made G2 := im(v)</p>

<a name="157596601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596601" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596601">Kevin Buzzard (Feb 05 2019 at 10:33)</a>:</h4>
<p>and I think that I must need it.</p>

<a name="157596603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596603">Mario Carneiro (Feb 05 2019 at 10:33)</a>:</h4>
<p>we don't need it</p>

<a name="157596606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596606" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596606">Kevin Buzzard (Feb 05 2019 at 10:33)</a>:</h4>
<p>Oh great!</p>

<a name="157596607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596607" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596607">Mario Carneiro (Feb 05 2019 at 10:33)</a>:</h4>
<p>they are iso, right?</p>

<a name="157596609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596609" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596609">Kevin Buzzard (Feb 05 2019 at 10:33)</a>:</h4>
<p>Yes</p>

<a name="157596657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596657">Mario Carneiro (Feb 05 2019 at 10:34)</a>:</h4>
<p>what we need is the UMP associated to G1</p>

<a name="157596668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596668">Kevin Buzzard (Feb 05 2019 at 10:34)</a>:</h4>
<p>I see.</p>

<a name="157596675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596675" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596675">Mario Carneiro (Feb 05 2019 at 10:34)</a>:</h4>
<p>if you have a suitable map out of R, it factors through the valuation to make a map out of G1</p>

<a name="157596681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596681" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596681">Kevin Buzzard (Feb 05 2019 at 10:34)</a>:</h4>
<p>I proved that (v,G) and (v1,G1) were equivalent</p>

<a name="157596682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596682" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596682">Mario Carneiro (Feb 05 2019 at 10:34)</a>:</h4>
<p>or something like that</p>

<a name="157596690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596690" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596690">Kevin Buzzard (Feb 05 2019 at 10:34)</a>:</h4>
<p>but I need more.</p>

<a name="157596697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596697" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596697">Kevin Buzzard (Feb 05 2019 at 10:35)</a>:</h4>
<p>This is really annoying. I might need G2.</p>

<a name="157596718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596718" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596718">Mario Carneiro (Feb 05 2019 at 10:35)</a>:</h4>
<p>this should all be a consequence of the fact that you defined G1 := R/ker(v), just unfold what those things mean</p>

<a name="157596724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596724" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596724">Kevin Buzzard (Feb 05 2019 at 10:35)</a>:</h4>
<p>The definition of equivalent is really crappy. v:R-&gt;G and w:R-&gt;H are equivalent if the image of v and the image of w are isomorphic via an isomorphism that makes the diagram commute.</p>

<a name="157596731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596731" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596731">Mario Carneiro (Feb 05 2019 at 10:35)</a>:</h4>
<p>sounds fine to me</p>

<a name="157596777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596777" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596777">Kevin Buzzard (Feb 05 2019 at 10:36)</a>:</h4>
<p>the problem is that this involves images</p>

<a name="157596792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596792" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596792">Mario Carneiro (Feb 05 2019 at 10:36)</a>:</h4>
<p>although maybe it might be good to have the one directional version, make a category kind of setup</p>

<a name="157596795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596795" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596795">Mario Carneiro (Feb 05 2019 at 10:36)</a>:</h4>
<p>because then you can talk about initiality</p>

<a name="157596797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596797" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596797">Kevin Buzzard (Feb 05 2019 at 10:36)</a>:</h4>
<p>Actually, another problem is that not even this is the definition, this is a lemma which I am only now realising I need.</p>

<a name="157596840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596840" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596840">Kevin Buzzard (Feb 05 2019 at 10:37)</a>:</h4>
<p>Dammit the underlying problem is exactly this "mathematicians don't know how to write an API" issue. I write something down and then because so many things are trivially true and their proof does not even need mentioning, I can lecture on it assuming a whole bunch of stuff (like the first isomorphism theorem) and not even notice what I am using.</p>

<a name="157596889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596889">Kevin Buzzard (Feb 05 2019 at 10:38)</a>:</h4>
<p>I can see exactly which lemmas have content and it's those that I prove in a lecture</p>

<a name="157596891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596891" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596891">Mario Carneiro (Feb 05 2019 at 10:38)</a>:</h4>
<p>You have a category of valuations and valuation morphisms, where the homs v -&gt; w are ordered group homs f : G-&gt;H such that v o f = w</p>

<a name="157596893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596893" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596893">Kevin Buzzard (Feb 05 2019 at 10:38)</a>:</h4>
<p>but you want me to prove all the content-free ones.</p>

<a name="157596900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596900" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596900">Kevin Buzzard (Feb 05 2019 at 10:38)</a>:</h4>
<p>Is there an issue with this approach because the valuations can take values in an arbitrary universe?</p>

<a name="157596906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596906">Mario Carneiro (Feb 05 2019 at 10:38)</a>:</h4>
<p>you don't have to define this category explicitly, but you should keep it in mind to state the facts</p>

<a name="157596925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596925" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596925">Kevin Buzzard (Feb 05 2019 at 10:39)</a>:</h4>
<p>But you're right, this is exactly the thing I should be thinking about. I have not defined a morphism of valuations.</p>

<a name="157596927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596927" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596927">Mario Carneiro (Feb 05 2019 at 10:39)</a>:</h4>
<p>as long as you don't try to define the category, the universe thing shouldn't matter</p>

<a name="157596937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596937" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596937">Kevin Buzzard (Feb 05 2019 at 10:39)</a>:</h4>
<p>But I need to define the morphisms because I am using them again and again.</p>

<a name="157596945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596945" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596945">Mario Carneiro (Feb 05 2019 at 10:39)</a>:</h4>
<p>and an iso in this category should be an equivalence of valuations</p>

<a name="157596997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596997" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596997">Kevin Buzzard (Feb 05 2019 at 10:40)</a>:</h4>
<p>It's worse than that</p>

<a name="157596998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157596998" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157596998">Mario Carneiro (Feb 05 2019 at 10:40)</a>:</h4>
<p>and the minimal valuation is an initial object in the category</p>

<a name="157597015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597015" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597015">Kevin Buzzard (Feb 05 2019 at 10:40)</a>:</h4>
<p>An iso in this category is an isomorphism of valuations</p>

<a name="157597020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597020">Kevin Buzzard (Feb 05 2019 at 10:40)</a>:</h4>
<p>The equivalences are the ones for which the underlying map G -&gt; H is an injection</p>

<a name="157597022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597022">Kevin Buzzard (Feb 05 2019 at 10:40)</a>:</h4>
<p>no it's not even that</p>

<a name="157597034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597034" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597034">Kevin Buzzard (Feb 05 2019 at 10:41)</a>:</h4>
<p>the equivalences are ones for which the underlying map G -&gt; H induces an isomorphism v(R) -&gt; w(R)</p>

<a name="157597041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597041" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597041">Kevin Buzzard (Feb 05 2019 at 10:41)</a>:</h4>
<p>The problem is that these groups are "too big" in general</p>

<a name="157597043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597043" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597043">Kevin Buzzard (Feb 05 2019 at 10:41)</a>:</h4>
<p>so isomorphism is too strong</p>

<a name="157597050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597050" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597050">Kevin Buzzard (Feb 05 2019 at 10:41)</a>:</h4>
<p>We only care about the image of R</p>

<a name="157597054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597054" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597054">Kevin Buzzard (Feb 05 2019 at 10:41)</a>:</h4>
<p>hence the notion of equivalence</p>

<a name="157597055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597055" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597055">Mario Carneiro (Feb 05 2019 at 10:41)</a>:</h4>
<p>why isn't that the same as I said?</p>

<a name="157597069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597069" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597069">Kevin Buzzard (Feb 05 2019 at 10:42)</a>:</h4>
<p>Because if G=R and H is a far larger group containing R and both v and w are the obvious maps</p>

<a name="157597108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597108" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597108">Mario Carneiro (Feb 05 2019 at 10:42)</a>:</h4>
<p>for the condition v o f = w only the value on elements of R matters</p>

<a name="157597117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597117" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597117">Kevin Buzzard (Feb 05 2019 at 10:42)</a>:</h4>
<p>but there's no map H -&gt; G</p>

<a name="157597121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597121" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597121">Kevin Buzzard (Feb 05 2019 at 10:42)</a>:</h4>
<p>which is the identity on G. Groups are harder than that.</p>

<a name="157597129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597129" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597129">Mario Carneiro (Feb 05 2019 at 10:42)</a>:</h4>
<p>I see, so you want f : v(R) -&gt; w(R) but otherwise it should be the same</p>

<a name="157597146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597146" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597146">Mario Carneiro (Feb 05 2019 at 10:43)</a>:</h4>
<p>is v(R) a subgroup?</p>

<a name="157597151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597151" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597151">Kevin Buzzard (Feb 05 2019 at 10:43)</a>:</h4>
<p>yes</p>

<a name="157597157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597157">Kevin Buzzard (Feb 05 2019 at 10:43)</a>:</h4>
<p>I am talking about a toy model where R is a group and v is a group hom</p>

<a name="157597168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597168" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597168">Kevin Buzzard (Feb 05 2019 at 10:43)</a>:</h4>
<p>The truth is that R is a ring, G is an ordered group, v goes from R to G union {0} and satisfies some axioms</p>

<a name="157597171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597171" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597171">Kevin Buzzard (Feb 05 2019 at 10:44)</a>:</h4>
<p>but that's not the problem as far as I am concerned.</p>

<a name="157597221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597221" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597221">Kevin Buzzard (Feb 05 2019 at 10:44)</a>:</h4>
<p>I think the underlying problems I have are all present in the toy model.</p>

<a name="157597231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597231" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597231">Mario Carneiro (Feb 05 2019 at 10:44)</a>:</h4>
<p>so does it work like I said? Homs are f : v(R) -&gt; w(R) such that v o f = w</p>

<a name="157597244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597244" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597244">Kevin Buzzard (Feb 05 2019 at 10:45)</a>:</h4>
<p>Yes! But you said homs are f : G -&gt; H such that v o f = w I think</p>

<a name="157597245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597245" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597245">Mario Carneiro (Feb 05 2019 at 10:45)</a>:</h4>
<p>and now isos are equivalences of valuations</p>

<a name="157597247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597247" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597247">Kevin Buzzard (Feb 05 2019 at 10:45)</a>:</h4>
<p>yes</p>

<a name="157597257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597257" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597257">Kevin Buzzard (Feb 05 2019 at 10:45)</a>:</h4>
<p>It's a strange category because the f's are not defined on the full groups but this is the way to think about it I think</p>

<a name="157597318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597318">Mario Carneiro (Feb 05 2019 at 10:46)</a>:</h4>
<p>now there are some issues because functions on images are not nice in lean</p>

<a name="157597322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597322" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597322">Kevin Buzzard (Feb 05 2019 at 10:46)</a>:</h4>
<p>I think it's important to let G and H be as big as you like, because we don't want to write "WLOG v is surjective" everywhere.</p>

<a name="157597337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597337" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597337">Mario Carneiro (Feb 05 2019 at 10:46)</a>:</h4>
<p>that's fine, I think, as long as the homs take this into account</p>

<a name="157597348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597348" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597348">Kevin Buzzard (Feb 05 2019 at 10:47)</a>:</h4>
<p>[in the real model, the "image" is actually the subgroup of G generated by v(R') where R' is the subset of R consisting of elements r such that v(r) is not zero]</p>

<a name="157597350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597350" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597350">Kevin Buzzard (Feb 05 2019 at 10:47)</a>:</h4>
<p>But I have never once used this image, or even defined it.</p>

<a name="157597357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597357" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597357">Mario Carneiro (Feb 05 2019 at 10:47)</a>:</h4>
<p>then what is f?</p>

<a name="157597406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597406">Mario Carneiro (Feb 05 2019 at 10:48)</a>:</h4>
<p>do you let it be 0 outside or something?</p>

<a name="157597407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597407" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597407">Kevin Buzzard (Feb 05 2019 at 10:48)</a>:</h4>
<p>I consistently use the quotient of the free abelian group on R -- the thing in the right universe.</p>

<a name="157597419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597419" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597419">Kevin Buzzard (Feb 05 2019 at 10:48)</a>:</h4>
<p>There's an auxiliary function v' which is defined to be v on R' and if v(r)=0 then v'(r)=1.</p>

<a name="157597433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597433" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597433">Kevin Buzzard (Feb 05 2019 at 10:49)</a>:</h4>
<p>I then look at the map from the free abelian group on R to G extending v' and the minmal value group is the quotient of the free abelian group on R by the kernel of this map.</p>

<a name="157597499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597499" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597499">Kevin Buzzard (Feb 05 2019 at 10:50)</a>:</h4>
<p>I only mention these technicalities because you mentioned the image as being hard to work with and actually we have something more complicated than the image. But note that I never constructed the image. We can look at the subgroup of G generated by v' but this object, which is isomorphic to the minimal value group, has never been mentioned before.</p>

<a name="157597512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597512" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597512">Mario Carneiro (Feb 05 2019 at 10:50)</a>:</h4>
<p>in a lot of ways the coimage is actually easier to work with</p>

<a name="157597515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597515" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597515">Kevin Buzzard (Feb 05 2019 at 10:50)</a>:</h4>
<p>The coimage is what we have, right?</p>

<a name="157597519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597519" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597519">Kevin Buzzard (Feb 05 2019 at 10:51)</a>:</h4>
<p>The quotient of the free ab group by the kernel?</p>

<a name="157597529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597529" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597529">Mario Carneiro (Feb 05 2019 at 10:51)</a>:</h4>
<p>yes, seems like</p>

<a name="157597537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597537" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597537">Kevin Buzzard (Feb 05 2019 at 10:51)</a>:</h4>
<p>When I was saying "pretend R is a group" earlier I was thinking "replace R by the free abelian group on R'"</p>

<a name="157597545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597545" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597545">Mario Carneiro (Feb 05 2019 at 10:51)</a>:</h4>
<p>so it sounds like now instead of f : v(R) -&gt; w(R) we have <code>f : R*/ker(v) -&gt; R*/ker(w)</code> where <code>R*</code> is the free ab group</p>

<a name="157597547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597547" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597547">Kevin Buzzard (Feb 05 2019 at 10:51)</a>:</h4>
<p>So we need the coimage because it's in the right universe.</p>

<a name="157597593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597593" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597593">Kevin Buzzard (Feb 05 2019 at 10:52)</a>:</h4>
<p>yes that's it</p>

<a name="157597633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597633" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597633">Kevin Buzzard (Feb 05 2019 at 10:53)</a>:</h4>
<p>We should make <code>R*</code> the free abelian group on <code>R</code>, because R' depends on v, but this is OK.</p>

<a name="157597646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597646" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597646">Mario Carneiro (Feb 05 2019 at 10:53)</a>:</h4>
<p>and now v o f = w becomes what?</p>

<a name="157597669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597669" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597669">Kevin Buzzard (Feb 05 2019 at 10:53)</a>:</h4>
<p>the obvious diagram commutes</p>

<a name="157597677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597677" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597677">Kevin Buzzard (Feb 05 2019 at 10:53)</a>:</h4>
<p>wait that's true by definition</p>

<a name="157597681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597681" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597681">Kevin Buzzard (Feb 05 2019 at 10:54)</a>:</h4>
<p>no it isn't</p>

<a name="157597732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597732" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597732">Kevin Buzzard (Feb 05 2019 at 10:54)</a>:</h4>
<p>There's a canonical map from <code>R*</code> to <code>R*/ker(v)</code></p>

<a name="157597736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597736" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597736">Kevin Buzzard (Feb 05 2019 at 10:54)</a>:</h4>
<p>and one from <code>R*</code> to <code>R*/ker(w)</code></p>

<a name="157597737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597737" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597737">Kevin Buzzard (Feb 05 2019 at 10:54)</a>:</h4>
<p>and that's the diagram we want to commute</p>

<a name="157597738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597738" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597738">Mario Carneiro (Feb 05 2019 at 10:54)</a>:</h4>
<p>Before, we had v : R -&gt; G which restricts to v : R -&gt; v(R). Now we are using the coimage, which is isomorphic, so there should be another canonical construction</p>

<a name="157597768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597768" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597768">Kevin Buzzard (Feb 05 2019 at 10:55)</a>:</h4>
<p>we are only allowed to write down maps from <code>R*/ker(v)</code> to <code>R*/ker(w)</code> which commute with the two canonical projections</p>

<a name="157597776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597776" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597776">Kevin Buzzard (Feb 05 2019 at 10:55)</a>:</h4>
<p>(projection the way mathematicians use the word)</p>

<a name="157597785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597785" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597785">Mario Carneiro (Feb 05 2019 at 10:55)</a>:</h4>
<p>oh, I see, and that's all that's necessary?</p>

<a name="157597790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597790" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597790">Kevin Buzzard (Feb 05 2019 at 10:55)</a>:</h4>
<p>I think so</p>

<a name="157597853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597853" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597853">Mario Carneiro (Feb 05 2019 at 10:57)</a>:</h4>
<p>okay, so now initiality says that we have <code>v1</code> such that for any other <code>v</code> there is a map <code>R*/ker(v1) -&gt; R*/ker(v)</code></p>

<a name="157597866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597866" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597866">Mario Carneiro (Feb 05 2019 at 10:57)</a>:</h4>
<p>and that should be min_value_group</p>

<a name="157597886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597886" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597886">Kevin Buzzard (Feb 05 2019 at 10:57)</a>:</h4>
<p>I don't think it's quite like that.</p>

<a name="157597933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597933" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597933">Kevin Buzzard (Feb 05 2019 at 10:58)</a>:</h4>
<p>Given v, the min-value-group for v is <code>R*/ker(v)</code></p>

<a name="157597956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597956" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597956">Kevin Buzzard (Feb 05 2019 at 10:58)</a>:</h4>
<p>there's an induced valuation <code>v_min:R-&gt;(R*/ker(v)) union 0</code></p>

<a name="157597962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597962" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597962">Kevin Buzzard (Feb 05 2019 at 10:59)</a>:</h4>
<p>that's the min valuation associated to v. We love it because it lives in a sensible universe.</p>

<a name="157597983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157597983" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157597983">Kevin Buzzard (Feb 05 2019 at 10:59)</a>:</h4>
<p>What I want is that if v and w are equivalent</p>

<a name="157598000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598000" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598000">Kevin Buzzard (Feb 05 2019 at 10:59)</a>:</h4>
<p>which means that the images <code>v(R*)</code> and <code>w(R*)</code> are isomorphic in a way that makes the diagram commute</p>

<a name="157598052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598052" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598052">Kevin Buzzard (Feb 05 2019 at 11:00)</a>:</h4>
<p>then <code>v_min</code> and <code>w_min</code> are now <em>equal</em></p>

<a name="157598068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598068" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598068">Kevin Buzzard (Feb 05 2019 at 11:00)</a>:</h4>
<p>and it was in proving this that I got my <code>eq.rec</code> goal</p>

<a name="157598073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598073" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598073">Kevin Buzzard (Feb 05 2019 at 11:00)</a>:</h4>
<p>No!</p>

<a name="157598075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598075" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598075">Kevin Buzzard (Feb 05 2019 at 11:00)</a>:</h4>
<p>I wasn't proving anything.</p>

<a name="157598090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598090" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598090">Kevin Buzzard (Feb 05 2019 at 11:01)</a>:</h4>
<p>You are telling me that what I should be proving is that <code>ker(v)=ker(w)</code></p>

<a name="157598109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598109" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598109">Kevin Buzzard (Feb 05 2019 at 11:01)</a>:</h4>
<p>but if I follow my nose then I end up proving that the images are isomorphic</p>

<a name="157598112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598112" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598112">Mario Carneiro (Feb 05 2019 at 11:01)</a>:</h4>
<p>So if v : R -&gt; G and w : R -&gt; H, we have the min-value-group <code>R*/ker(v)</code>, and another valuation <code>vmin : R -&gt; R*/ker(v)</code>. Initiality is saying that if w respects v in some sense, then there is a group hom <code>lift w : R*/ker(v) -&gt; H</code></p>

<a name="157598116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598116">Kevin Buzzard (Feb 05 2019 at 11:01)</a>:</h4>
<p>This should translate into a proof that the coimages are isomorphic</p>

<a name="157598177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598177" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598177">Mario Carneiro (Feb 05 2019 at 11:02)</a>:</h4>
<p>I think w respects v should be something like <code>ker(v) &lt;= ker(w)</code>, which can be translated to something about w and v directly</p>

<a name="157598180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598180" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598180">Kevin Buzzard (Feb 05 2019 at 11:02)</a>:</h4>
<p>yes</p>

<a name="157598191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598191" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598191">Kevin Buzzard (Feb 05 2019 at 11:02)</a>:</h4>
<p><code>&lt;=</code> is a set-theoretic containment I assume</p>

<a name="157598209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598209" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598209">Kevin Buzzard (Feb 05 2019 at 11:03)</a>:</h4>
<p>in this free abelian group <code>R*</code></p>

<a name="157598210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598210" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598210">Mario Carneiro (Feb 05 2019 at 11:03)</a>:</h4>
<p>in the lattice of subgroups, yes</p>

<a name="157598215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598215" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598215">Kevin Buzzard (Feb 05 2019 at 11:03)</a>:</h4>
<p>right</p>

<a name="157598224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598224" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598224">Kevin Buzzard (Feb 05 2019 at 11:03)</a>:</h4>
<p>So this more general notion of "respecting v" is defintely not in the repo.</p>

<a name="157598233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598233" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598233">Mario Carneiro (Feb 05 2019 at 11:04)</a>:</h4>
<p>I don't think it needs to be given a name and everything, it's just the side condition on <code>lift</code></p>

<a name="157598277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598277" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598277">Kevin Buzzard (Feb 05 2019 at 11:04)</a>:</h4>
<p>The paper says "two valuations are equivalent if im(v) is isomorphic to im(w) in a way that makes the diagrams commute"</p>

<a name="157598285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598285" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598285">Mario Carneiro (Feb 05 2019 at 11:04)</a>:</h4>
<p>I'm not thinking about equivalent valuations just yet here</p>

<a name="157598288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598288" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598288">Kevin Buzzard (Feb 05 2019 at 11:04)</a>:</h4>
<p>No you're working with a general morphism</p>

<a name="157598313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598313" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598313">Mario Carneiro (Feb 05 2019 at 11:05)</a>:</h4>
<p>once you have this lift function, it should be easy to prove the thing about equivalent valuations, just lift <code>wmin</code></p>

<a name="157598315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598315" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598315">Kevin Buzzard (Feb 05 2019 at 11:05)</a>:</h4>
<p>I read the paper and I read it as "coim(v) is isomorphic to coim(w) in a way that makes the diagrams commute" because I can rewrite canonical isomorphisms -- the mathematician's superpower.</p>

<a name="157598320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598320" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598320">Kevin Buzzard (Feb 05 2019 at 11:05)</a>:</h4>
<p>and "isomorphic in a way that makes the diagrams commute" is the same as "equal"</p>

<a name="157598498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598498" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598498">Kevin Buzzard (Feb 05 2019 at 11:09)</a>:</h4>
<p>It's incredible how much of a kerfuffle it is to get this into dependent type theory. I need to disassociate images and coimages in my mind. Because the coimage is a quotient you have specific tools for writing functions on it and I should use these tools.</p>

<a name="157598576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598576" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598576">Kevin Buzzard (Feb 05 2019 at 11:10)</a>:</h4>
<p>It's like the category of open subsets of a topological space again. It's extremely similar in fact. I regard <code>id' U</code> and <code>U</code> as _equal_ but you regard them as distinct but isomorphic elements of this category.</p>

<a name="157598581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598581">Kevin Buzzard (Feb 05 2019 at 11:10)</a>:</h4>
<p>I am not sure that making this distinction ever helps you in mathematics</p>

<a name="157598590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598590" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598590">Kevin Buzzard (Feb 05 2019 at 11:11)</a>:</h4>
<p>but it certainly helps you in dependent type theory.</p>

<a name="157598609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598609" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598609">Kevin Buzzard (Feb 05 2019 at 11:11)</a>:</h4>
<p>You can write down maps <code>U -&gt; id' U</code> and <code>id' U -&gt; U</code> and prove that they're isomorphisms and two-sided inverses of each other, whilst I watch incredulously.</p>

<a name="157598667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598667" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598667">Kevin Buzzard (Feb 05 2019 at 11:12)</a>:</h4>
<p>Then I try to use the fact that they're _equal_ when defining a map on sheaves and get into all kinds of trouble in dependent type theory, which I do not see in mathematics.</p>

<a name="157598760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598760" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598760">Kevin Buzzard (Feb 05 2019 at 11:14)</a>:</h4>
<p>This has been very helpful, many thanks Mario. I am back thinking seriously about the perfectoid project now and goodness knows how long I would have spent stuck on this issue had your comments not clarified how someone who knows type theory properly thinks about these questions.</p>

<a name="157598807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157598807" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157598807">Kevin Buzzard (Feb 05 2019 at 11:15)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> I think my fears are unfounded. I just don't have enough API yet.</p>

<a name="157599578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157599578" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157599578">Mario Carneiro (Feb 05 2019 at 11:30)</a>:</h4>
<p>The problem with things being <em>equal</em> in the material set theory sense is that it tends to make the <em>wrong</em> distinctions, like id' U = U but coimage(v) != image(v)</p>

<a name="157599609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157599609" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157599609">Mario Carneiro (Feb 05 2019 at 11:31)</a>:</h4>
<p>If you want to be able to talk about equality when you mean isomorphism, you have to have some kind of background formalism that mimics DTT in some ways</p>

<a name="157599659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20goal/near/157599659" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/53122eqrecgoal.html#157599659">Mario Carneiro (Feb 05 2019 at 11:32)</a>:</h4>
<p>because isomorphism doesn't mean unique isomorphism, and there are plenty of examples where the collection of all isomorphisms X -&gt; Y has interesting structure</p>


{% endraw %}
