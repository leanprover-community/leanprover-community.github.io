---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/79105extensionality.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html">extensionality</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="127167357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127167357" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127167357">Kenny Lau (May 27 2018 at 15:06)</a>:</h4>
<p>Now that we have the <code>ext</code> tactic, let's get started tagging every theorem with <code>@[extensionality]</code> :D</p>

<a name="127168051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127168051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127168051">Kevin Buzzard (May 27 2018 at 15:27)</a>:</h4>
<p>All of them?</p>

<a name="127168090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127168090" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127168090">Mario Carneiro (May 27 2018 at 15:28)</a>:</h4>
<p>I'm not sure there are that many to add</p>

<a name="127168094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127168094" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127168094">Kevin Buzzard (May 27 2018 at 15:28)</a>:</h4>
<p><code>unknown identifier 'ext'</code></p>

<a name="127171210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127171210" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127171210">Kenny Lau (May 27 2018 at 17:14)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> trust me, there is a <em>lot</em> to add</p>

<a name="127171211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127171211" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127171211">Mario Carneiro (May 27 2018 at 17:14)</a>:</h4>
<p>then PR them</p>

<a name="127171213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127171213" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127171213">Mario Carneiro (May 27 2018 at 17:14)</a>:</h4>
<p>do you have a nonexhaustive list?</p>

<a name="127171214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127171214" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127171214">Kenny Lau (May 27 2018 at 17:14)</a>:</h4>
<p>not really</p>

<a name="127171222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127171222" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127171222">Kenny Lau (May 27 2018 at 17:15)</a>:</h4>
<p>do you have a estimate of the number of files in mathlib</p>

<a name="127171224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127171224" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127171224">Kenny Lau (May 27 2018 at 17:15)</a>:</h4>
<p>or does <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> have some magic to count that</p>

<a name="127171272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127171272" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127171272">Mario Carneiro (May 27 2018 at 17:16)</a>:</h4>
<p>I mean, just name a few</p>

<a name="127171273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127171273" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127171273">Kenny Lau (May 27 2018 at 17:17)</a>:</h4>
<p>the Z[sqrt(d)] doesn't really have the ext lemma that I want</p>

<a name="127171279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127171279" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127171279">Kenny Lau (May 27 2018 at 17:17)</a>:</h4>
<p>sum, prod</p>

<a name="127171280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127171280" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127171280">Kenny Lau (May 27 2018 at 17:17)</a>:</h4>
<p>I can just name every class I know</p>

<a name="127171296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127171296" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127171296">Mario Carneiro (May 27 2018 at 17:18)</a>:</h4>
<p>"wrong" is a strong word</p>

<a name="127171322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127171322" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127171322">Mario Carneiro (May 27 2018 at 17:18)</a>:</h4>
<p>it's not suitable for the <code>ext</code> tactic</p>

<a name="127171325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127171325" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127171325">Kenny Lau (May 27 2018 at 17:18)</a>:</h4>
<p>my apologies</p>

<a name="127171334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127171334" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127171334">Mario Carneiro (May 27 2018 at 17:19)</a>:</h4>
<p>Actually it would be great if <code>ext</code> could handle the iff style</p>

<a name="127171336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127171336" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127171336">Mario Carneiro (May 27 2018 at 17:19)</a>:</h4>
<p>because that's the form that <code>simp</code> likes</p>

<a name="127525559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127525559" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127525559">Scott Morrison (Jun 04 2018 at 03:09)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span>, what do you think of changing <code>ext</code> so that it fails if it doesn't apply at least one extensionality lemma?  (when given no identifiers)</p>

<a name="127525563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127525563" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127525563">Scott Morrison (Jun 04 2018 at 03:09)</a>:</h4>
<p>(This just follows the general principle that tactics should not "fail silently", as it's harder to manage flow control if they might.)</p>

<a name="127525567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127525567" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127525567">Scott Morrison (Jun 04 2018 at 03:09)</a>:</h4>
<p>(If it seems reasonable, I'm happy to fix it.)</p>

<a name="127525612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127525612" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127525612">Simon Hudon (Jun 04 2018 at 03:10)</a>:</h4>
<p>That makes sense. At the same time, that would differ from the behavior of <code>intros</code></p>

<a name="127525713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127525713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127525713">Simon Hudon (Jun 04 2018 at 03:14)</a>:</h4>
<p>Basically, you'd like to know when you expect an extensionality lemma but that it's not found. Would it make sense to have a special syntax for that? We could do <code>ext+</code> for "apply extensionality once or more" and <code>ext*</code>for "zero or more times"</p>

<a name="127525714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127525714" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127525714">Scott Morrison (Jun 04 2018 at 03:14)</a>:</h4>
<p>My vote would be to change <code>intros</code> too, but it may be too late for that!</p>

<a name="127525728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127525728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127525728">Scott Morrison (Jun 04 2018 at 03:15)</a>:</h4>
<p>Well --- is doing something zero or more times ever actually useful? If you're working interactively, you should just remove it, and if you're working programmatically, it's no hassle to handle a failure, and sometimes helpful to know whether or not progress was made.</p>

<a name="127525769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127525769" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127525769">Simon Hudon (Jun 04 2018 at 03:16)</a>:</h4>
<p>That's a good point</p>

<a name="127525778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127525778" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127525778">Simon Hudon (Jun 04 2018 at 03:16)</a>:</h4>
<p>I'm in</p>

<a name="127525827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127525827" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127525827">Scott Morrison (Jun 04 2018 at 03:18)</a>:</h4>
<p>Shall I do it?</p>

<a name="127525830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127525830" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127525830">Simon Hudon (Jun 04 2018 at 03:18)</a>:</h4>
<p>Yes please</p>

<a name="127525941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/127525941" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#127525941">Scott Morrison (Jun 04 2018 at 03:23)</a>:</h4>
<p><a href="https://github.com/leanprover/mathlib/pull/151" target="_blank" title="https://github.com/leanprover/mathlib/pull/151">https://github.com/leanprover/mathlib/pull/151</a></p>

<a name="128115186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128115186" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128115186">Scott Morrison (Jun 15 2018 at 11:27)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span>, there are lots of lemmas that seem to me natural to have <code>apply</code>d automatically by <code>ext</code>, e.g.:</p>

<a name="128115188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128115188" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128115188">Scott Morrison (Jun 15 2018 at 11:27)</a>:</h4>
<p><code>lemma pair.ext {α : Type u₁} {β : Type u₂} {X Y : α × β} (p1 : X.1 = Y.1) (p2 : X.2 = Y.2) : X = Y</code></p>

<a name="128115239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128115239" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128115239">Scott Morrison (Jun 15 2018 at 11:28)</a>:</h4>
<p>or even <code>lemma sigma.ext {α : Type u₁} (Z : α → Type u₂) (X Y : Σ a : α, Z a) (w1 : X.1 = Y.1) (w2 : @eq.rec_on _ X.1 _ _ w1 X.2 = Y.2) : X = Y</code></p>

<a name="128115251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128115251" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128115251">Scott Morrison (Jun 15 2018 at 11:29)</a>:</h4>
<p>This isn't possible at the moment: <code>ext</code> will happily apply one of these, but then choke because there's nothing to <code>intro</code>.</p>

<a name="128115254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128115254" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128115254">Scott Morrison (Jun 15 2018 at 11:29)</a>:</h4>
<p>What do you think of generalising a little more?</p>

<a name="128115314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128115314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128115314">Mario Carneiro (Jun 15 2018 at 11:30)</a>:</h4>
<p>I thought <code>ext</code> does 0+ intros</p>

<a name="128115378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128115378" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128115378">Scott Morrison (Jun 15 2018 at 11:32)</a>:</h4>
<div class="codehilite"><pre><span></span>import tactic.interactive

universes u₁ u₂

@[extensionality] lemma pair.ext {α : Type u₁} {β : Type u₂} {X Y : α × β} (p1 : X.1 = Y.1) (p2 : X.2 = Y.2) : X = Y :=
begin
  induction X, induction Y, dsimp at *, rw p1, rw p2,
end

lemma P (X Y : ℕ × ℕ) : X = Y :=
begin
  ext,

end
</pre></div>

<a name="128115379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128115379" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128115379">Scott Morrison (Jun 15 2018 at 11:32)</a>:</h4>
<p>The <code>ext</code> here does nothing, even though <code>apply pair.ext</code> succeeds.</p>

<a name="128116141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128116141" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128116141">Simon Hudon (Jun 15 2018 at 11:54)</a>:</h4>
<p>Mario was suggesting we extend <code>ext</code> to support that kind behavior. I think that's doable. I think we'd only have to fix the <code>intro1</code> and change <code>&gt;&gt;</code> for <code>;</code></p>

<a name="128116157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128116157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128116157">Simon Hudon (Jun 15 2018 at 11:55)</a>:</h4>
<p>As you say, the intro is mandatory right now</p>

<a name="128118149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128118149" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128118149">Simon Hudon (Jun 15 2018 at 12:49)</a>:</h4>
<p>I'll have a look</p>

<a name="128120340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128120340" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128120340">Scott Morrison (Jun 15 2018 at 13:40)</a>:</h4>
<p>Another direction to consider is the following:</p>
<div class="codehilite"><pre><span></span>meta def applicable_attribute : user_attribute := {
  name := `applicable,
  descr := &quot;A lemma that should be applied to a goal whenever possible.&quot;
}

run_cmd attribute.register `applicable_attribute

/- Try to apply one of the given lemmas, it succeeds if one of them succeeds. -/
meta def any_apply : list name → tactic name
| []      := failed
| (c::cs) := (mk_const c &gt;&gt;= apply &gt;&gt; pure c) &lt;|&gt; any_apply cs

meta def applicable : tactic name :=
do cs ← attribute.get_instances `applicable,
   (any_apply cs) &lt;|&gt; fail &quot;no @[applicable] lemmas could be applied&quot;
</pre></div>

<a name="128120349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128120349" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128120349">Scott Morrison (Jun 15 2018 at 13:41)</a>:</h4>
<p>I use this pretty widely: it's for marking lemmas which are so useful that you know they are meant to be applied whenever possible.</p>

<a name="128120358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128120358" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128120358">Scott Morrison (Jun 15 2018 at 13:41)</a>:</h4>
<p>(<code>subsingleton.elim</code> is an example)</p>

<a name="128120370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128120370" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128120370">Scott Morrison (Jun 15 2018 at 13:42)</a>:</h4>
<p>I guess there's no reason this can't just coexist with <code>ext</code>, but if you see some reason to try to combine them I'd be interested.</p>

<a name="128120736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128120736" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128120736">Simon Hudon (Jun 15 2018 at 13:50)</a>:</h4>
<p>That's interesting. I think I would like to preserve <code>ext</code> because it has such a precise meaning but it might be useful to mark all extensionality lemmas as applicable. Is there a way to make one attribute subsume the other?</p>

<a name="128120773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128120773" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128120773">Scott Morrison (Jun 15 2018 at 13:51)</a>:</h4>
<p>For me it's not really important that one subsumes the other: my intention is just that the default list of tactics for <code>tidy</code> tries <code>applicable</code> first, and then tries <code>ext</code>.</p>

<a name="128120833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128120833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128120833">Scott Morrison (Jun 15 2018 at 13:52)</a>:</h4>
<p>(I've also got a tactic <code>semiapplicable</code>, which tries applying lemmas marked <code>semiapplicable</code>, only succeeding if it can fulfill any remaining parameters by current hypotheses. That one desperately needs a better name. :-)</p>

<a name="128120854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128120854" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128120854">Scott Morrison (Jun 15 2018 at 13:53)</a>:</h4>
<p>(I've been curious if a case will come up where it's valuable to try applying a <code>semiapplicable</code>, and then using <code>solve_by_elim</code> to fulfill remaining arguments, but I haven't run into this in the wild.)</p>

<a name="128120917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128120917" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128120917">Mario Carneiro (Jun 15 2018 at 13:54)</a>:</h4>
<p>extensionality lemmas are definitely not applicable</p>

<a name="128120932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128120932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128120932">Mario Carneiro (Jun 15 2018 at 13:54)</a>:</h4>
<p>otherwise you would end up unfolding all your equalities on structures</p>

<a name="128120935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128120935" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128120935">Simon Hudon (Jun 15 2018 at 13:55)</a>:</h4>
<blockquote>
<p>(I've also got a tactic <code>semiapplicable</code>, which tries applying lemmas marked <code>semiapplicable</code>, only succeeding if it can fulfill any remaining parameters by current hypotheses. That one desperately needs a better name. :-)</p>
</blockquote>
<p>Your message raises an important question: what are the grammatical rules for smileys and closing brackets?</p>

<a name="128120965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128120965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128120965">Mario Carneiro (Jun 15 2018 at 13:55)</a>:</h4>
<p>(I prefer an additional space with the smiley to keep it clearly delimited :) )</p>

<a name="128121022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128121022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128121022">Simon Hudon (Jun 15 2018 at 13:56)</a>:</h4>
<p>( Me too, but to avoid any ambiguity, I think I might start endorsing "turning your head" (-: )</p>

<a name="128121115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128121115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128121115">Simon Hudon (Jun 15 2018 at 13:58)</a>:</h4>
<p>On the subject of <code>semiapplicable</code>, I think there's a pattern of tactics for killing the current goal and we ought to have a more systematic naming convention.</p>

<a name="128121331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128121331" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128121331">Simon Hudon (Jun 15 2018 at 14:02)</a>:</h4>
<p>Back to <code>ext</code>, if you call it as <code>ext x y z</code> and somewhere, product extensionality is applicable, the number of identifiers provided does not reflect the number of rules applied. If it was the last rule, there's no way to just decide to not apply that level of extensionality ... except if we call <code>ext x y, ext1 z</code>. Are we ok with that?</p>

<a name="128121398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128121398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128121398">Mario Carneiro (Jun 15 2018 at 14:03)</a>:</h4>
<p>How about an optional depth limit like in <code>congr'</code></p>

<a name="128121505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128121505" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128121505">Simon Hudon (Jun 15 2018 at 14:05)</a>:</h4>
<p>Yes, good idea! Do you think we could use one of <code>with</code>, <code>in</code> or <code>at</code> to specify that limit?</p>

<a name="128121759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128121759" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128121759">Mario Carneiro (Jun 15 2018 at 14:11)</a>:</h4>
<p>lol our stockpile of prepositions is quite limited</p>

<a name="128121760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128121760" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128121760">Simon Hudon (Jun 15 2018 at 14:11)</a>:</h4>
<p>How about <code>ext x y z</code> without limit and <code>ext 3 with x y z</code> if we use a limit?</p>

<a name="128121829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128121829" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128121829">Simon Hudon (Jun 15 2018 at 14:12)</a>:</h4>
<p>Otherwise we could also go with <code>ext x y z { depth := 3 }</code></p>

<a name="128121841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128121841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128121841">Mario Carneiro (Jun 15 2018 at 14:12)</a>:</h4>
<p>I'm not sure that will parse</p>

<a name="128122303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128122303" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128122303">Simon Hudon (Jun 15 2018 at 14:22)</a>:</h4>
<p>Yeah, I'm not sure how to make that work either actually</p>

<a name="128137567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128137567" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128137567">Simon Hudon (Jun 15 2018 at 19:44)</a>:</h4>
<p>Here's what I have now:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="bp">×</span> <span class="bp">ℕ</span><span class="o">)</span>  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">X</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">Y</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">=</span> <span class="n">Y</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">ext</span> <span class="mi">1</span> <span class="k">with</span> <span class="n">i</span><span class="o">,</span>
    <span class="n">guard_target</span> <span class="n">X</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">Y</span> <span class="n">i</span><span class="o">,</span>
    <span class="n">admit</span> <span class="o">},</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">=</span> <span class="n">Y</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">ext</span> <span class="n">i</span><span class="o">,</span>
    <span class="n">guard_target</span> <span class="o">(</span><span class="n">X</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">=</span> <span class="o">(</span><span class="n">Y</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">fst</span><span class="o">,</span> <span class="n">admit</span><span class="o">,</span>
    <span class="n">guard_target</span> <span class="o">(</span><span class="n">X</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="o">(</span><span class="n">Y</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="o">,</span> <span class="n">admit</span><span class="o">,</span> <span class="o">},</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">=</span> <span class="n">Y</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">ext</span> <span class="mi">1</span><span class="o">,</span>
    <span class="n">guard_target</span> <span class="n">X</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">Y</span> <span class="n">x</span><span class="o">,</span>
    <span class="n">admit</span> <span class="o">},</span>
  <span class="n">trivial</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>How do you guys like that?</p>

<a name="128137735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128137735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128137735">Mario Carneiro (Jun 15 2018 at 19:47)</a>:</h4>
<p>LGTM</p>

<a name="128138565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128138565" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128138565">Simon Hudon (Jun 15 2018 at 20:04)</a>:</h4>
<p>:) Good, it's coming up</p>

<a name="128145906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128145906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128145906">Scott Morrison (Jun 15 2018 at 22:56)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span>, and if I just call <code>ext</code> with no arguments?</p>

<a name="128145918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128145918" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128145918">Simon Hudon (Jun 15 2018 at 22:57)</a>:</h4>
<p>Then may God have our souls</p>

<a name="128145970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128145970" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128145970">Simon Hudon (Jun 15 2018 at 22:58)</a>:</h4>
<p><span class="emoji emoji-1f61d" title="stuck out tongue closed eyes">:stuck_out_tongue_closed_eyes:</span> But seriously, same behavior as before except it now considers extensionality on products as well</p>

<a name="128145979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128145979" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128145979">Simon Hudon (Jun 15 2018 at 22:58)</a>:</h4>
<p>Also, I fixed extensionality on functions. The attribute was applied to the tactic, not the lemma</p>

<a name="128145991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128145991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128145991">Scott Morrison (Jun 15 2018 at 22:59)</a>:</h4>
<p>Excellent. And if I wrote something <code>@[extensionality] lemma ulift.ext {α : Type u₁} (X Y : ulift.{u₂} α) (w : X.down = Y.down) : X = Y</code> then just plain <code>ext</code> would apply this?</p>

<a name="128145995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128145995" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128145995">Simon Hudon (Jun 15 2018 at 22:59)</a>:</h4>
<p>Exactly</p>

<a name="128145997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128145997" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128145997">Scott Morrison (Jun 15 2018 at 22:59)</a>:</h4>
<p>Yay, thanks!</p>

<a name="128146094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128146094" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128146094">Simon Hudon (Jun 15 2018 at 23:01)</a>:</h4>
<p><span class="emoji emoji-1f44d" title="thumbs up">:thumbs_up:</span></p>

<a name="128146162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128146162" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128146162">Scott Morrison (Jun 15 2018 at 23:02)</a>:</h4>
<p>What should I do with my PR that made <code>ext</code> fail if there were no extensionality lemmas to apply?</p>

<a name="128146230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128146230" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128146230">Simon Hudon (Jun 15 2018 at 23:04)</a>:</h4>
<p>Sorry, I completely spaced out. I should just have added on top of that</p>

<a name="128146241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128146241" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128146241">Scott Morrison (Jun 15 2018 at 23:04)</a>:</h4>
<p>No problem. I could send a PR to your PR, I guess. :-)</p>

<a name="128146254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128146254" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128146254">Simon Hudon (Jun 15 2018 at 23:05)</a>:</h4>
<p>Haha! Yeah! Let's see what actually happens with mine when there's no rules to be applied</p>

<a name="128146297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128146297" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128146297">Scott Morrison (Jun 15 2018 at 23:06)</a>:</h4>
<p>Also --- your commit is failing: &lt;<a href="https://travis-ci.org/leanprover/mathlib/builds/392889071?utm_source=github_status&amp;utm_medium=notification" target="_blank" title="https://travis-ci.org/leanprover/mathlib/builds/392889071?utm_source=github_status&amp;utm_medium=notification">https://travis-ci.org/leanprover/mathlib/builds/392889071?utm_source=github_status&amp;utm_medium=notification</a>&gt;</p>

<a name="128146370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128146370" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128146370">Simon Hudon (Jun 15 2018 at 23:08)</a>:</h4>
<p>The main branch is broken so I'm going to wait for it to be fixed first</p>

<a name="128146596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/128146596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#128146596">Simon Hudon (Jun 15 2018 at 23:15)</a>:</h4>
<p>Actually, I'll just make sure the trouble is not because of <code>ext</code> ...</p>

<a name="135291851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135291851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135291851">Simon Hudon (Oct 06 2018 at 01:00)</a>:</h4>
<p>What is people's opinion of making lemmas like this one <code>extensionality</code> lemmas?</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">subset_ext</span> <span class="o">{</span><span class="n">s₁</span> <span class="n">s₂</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">s₁</span> <span class="bp">→</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">s₂</span><span class="o">)</span> <span class="bp">→</span> <span class="n">s₁</span> <span class="err">⊆</span> <span class="n">s₂</span> <span class="o">:=</span> <span class="bp">...</span>
</pre></div>

<a name="135291905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135291905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135291905">Bryan Gin-ge Chen (Oct 06 2018 at 01:02)</a>:</h4>
<p>Is the idea that <code>ext</code> would do the work of <code>subset_iff</code> automatically?</p>

<a name="135292050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292050" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292050">Simon Hudon (Oct 06 2018 at 01:07)</a>:</h4>
<p>Yes but only in one direction</p>

<a name="135292169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292169" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292169">Mario Carneiro (Oct 06 2018 at 01:10)</a>:</h4>
<p>I'm not sure about this. it makes it less clear to me what <code>extensionality</code> means</p>

<a name="135292176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292176" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292176">Mario Carneiro (Oct 06 2018 at 01:10)</a>:</h4>
<p>is there a specific sense of what kind of lemmas you want to allow here?</p>

<a name="135292245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292245" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292245">Scott Morrison (Oct 06 2018 at 01:12)</a>:</h4>
<p>I guess the idea is "proving things by breaking objects into their constituent parts". I'm on the fence. At first I'm tempted, but I'm not sure where it ends...</p>

<a name="135292316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292316" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292316">Mario Carneiro (Oct 06 2018 at 01:14)</a>:</h4>
<p>This also sounds like "unfold definitions" though which is a bit dangerous</p>

<a name="135292332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292332" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292332">Simon Hudon (Oct 06 2018 at 01:15)</a>:</h4>
<p>I think Scott's definition would make sense. I'm also unsure. One reason is that I'm not clear if those lemmas could be chained</p>

<a name="135292336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292336" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292336">Mario Carneiro (Oct 06 2018 at 01:15)</a>:</h4>
<p>Actually there is a tactic in this area I very much want, which does "definitional unfolding" minus the definitional part</p>

<a name="135292339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292339" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292339">Scott Morrison (Oct 06 2018 at 01:15)</a>:</h4>
<p>What do you mean?</p>

<a name="135292342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292342" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292342">Mario Carneiro (Oct 06 2018 at 01:16)</a>:</h4>
<p>I currently use <code>simp</code> for this but it could be much more deterministic and hence faster</p>

<a name="135292383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292383" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292383">Scott Morrison (Oct 06 2018 at 01:16)</a>:</h4>
<p>This sounds like the sort of thing that I don't know that I want :-)</p>

<a name="135292385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292385" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292385">Mario Carneiro (Oct 06 2018 at 01:16)</a>:</h4>
<p>many functions are "activated" by some argument in which case they simplify to something else</p>

<a name="135292386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292386" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292386">Mario Carneiro (Oct 06 2018 at 01:16)</a>:</h4>
<p>i.e. recursive definitions</p>

<a name="135292395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292395" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292395">Mario Carneiro (Oct 06 2018 at 01:17)</a>:</h4>
<p>If we had a mechanism for emulating call-by-name evaluation, then we could use it as a replacement for simp in these cases</p>

<a name="135292400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292400" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292400">Mario Carneiro (Oct 06 2018 at 01:18)</a>:</h4>
<p><code>simp</code> is also a bit too aggressive in places, e.g. reassociating and commuting additions which can block "computation"</p>

<a name="135292444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292444" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292444">Simon Hudon (Oct 06 2018 at 01:18)</a>:</h4>
<p>You could probably build it by using the <code>simp</code> machinery with only definitional lemmas</p>

<a name="135292451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292451" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292451">Mario Carneiro (Oct 06 2018 at 01:19)</a>:</h4>
<p>But that's the thing, I don't care about them being literally definitional equalities</p>

<a name="135292453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292453" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292453">Simon Hudon (Oct 06 2018 at 01:19)</a>:</h4>
<p>How would you select the lemmas?</p>

<a name="135292454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292454" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292454">Mario Carneiro (Oct 06 2018 at 01:19)</a>:</h4>
<p>An attribute</p>

<a name="135292459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292459" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292459">Simon Hudon (Oct 06 2018 at 01:19)</a>:</h4>
<p>So you need a new simp lemma</p>

<a name="135292500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292500" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292500">Mario Carneiro (Oct 06 2018 at 01:20)</a>:</h4>
<p>For example a corecursor applied to a constructor in a coinductive type</p>

<a name="135292502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292502" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292502">Mario Carneiro (Oct 06 2018 at 01:20)</a>:</h4>
<p>it's "like" a recursive definition but not definitional because lean didn't decide to support it out of the box</p>

<a name="135292503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292503" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292503">Simon Hudon (Oct 06 2018 at 01:20)</a>:</h4>
<p>I was actually about to use that as a counter example</p>

<a name="135292510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292510" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292510">Mario Carneiro (Oct 06 2018 at 01:20)</a>:</h4>
<p>I don't want to be tied to whatever lean decided to support out of the box</p>

<a name="135292517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292517" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292517">Mario Carneiro (Oct 06 2018 at 01:21)</a>:</h4>
<p>it's not extensible</p>

<a name="135292520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292520" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292520">Simon Hudon (Oct 06 2018 at 01:21)</a>:</h4>
<p>Yeah, I agree. I created a <code>pseudo_eqn</code> attribute for my corecursive definitions just for that purpose</p>

<a name="135292561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292561" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292561">Mario Carneiro (Oct 06 2018 at 01:22)</a>:</h4>
<p>Coq has a <code>cbv</code> tactic that has exactly this behavior</p>

<a name="135292565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292565" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292565">Mario Carneiro (Oct 06 2018 at 01:22)</a>:</h4>
<p>I asked for it a long time ago and I think <code>simp</code> was the response</p>

<a name="135292569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292569">Simon Hudon (Oct 06 2018 at 01:22)</a>:</h4>
<p>The issue with <code>simp</code> though is that if you apply it for </p>
<div class="codehilite"><pre><span></span><span class="n">codef</span> <span class="n">diverge</span> <span class="o">:</span> <span class="n">computation</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">think</span> <span class="n">diverge</span>
</pre></div>


<p>"unfolding" will get ugly.</p>

<a name="135292572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292572">Mario Carneiro (Oct 06 2018 at 01:23)</a>:</h4>
<p>but <code>cbv</code> has a much more restricted evaluation behavior that allows you to almost completely skip the "search" part</p>

<a name="135292576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292576" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292576">Mario Carneiro (Oct 06 2018 at 01:23)</a>:</h4>
<p>corecursors are values</p>

<a name="135292581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292581" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292581">Mario Carneiro (Oct 06 2018 at 01:23)</a>:</h4>
<p>they only simplify when you tell them to explicitly</p>

<a name="135292584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292584" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292584">Mario Carneiro (Oct 06 2018 at 01:23)</a>:</h4>
<p>even Coq does this with their builtin coinductives</p>

<a name="135292626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292626" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292626">Simon Hudon (Oct 06 2018 at 01:24)</a>:</h4>
<p>But Coq leaves in the <code>cofix</code> construct and the match statement which kind of blocks the unfolding</p>

<a name="135292627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292627" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292627">Mario Carneiro (Oct 06 2018 at 01:24)</a>:</h4>
<p>I should look up the specifics there though</p>

<a name="135292636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292636" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292636">Mario Carneiro (Oct 06 2018 at 01:25)</a>:</h4>
<p>not sure I follow</p>

<a name="135292687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292687" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292687">Simon Hudon (Oct 06 2018 at 01:26)</a>:</h4>
<p>We can also do very little search though. One way is caching but we can also enforce a naming scheme that gives us only one candidate every time.</p>

<a name="135292708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292708" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292708">Mario Carneiro (Oct 06 2018 at 01:27)</a>:</h4>
<p>I was thinking that when you register a new rule, it analyzes the structure of the lemma to figure out what the active parameter is so that it can have a decision tree based dispatch</p>

<a name="135292754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292754" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292754">Simon Hudon (Oct 06 2018 at 01:28)</a>:</h4>
<blockquote>
<p>not sure I follow</p>
</blockquote>
<p>One of the first difference I noticed between Lean and Coq is that in Lean, unfolding often introduces a match statement because case analysis is a different process than unfolding. It is similar with corecursion</p>

<a name="135292758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292758" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292758">Mario Carneiro (Oct 06 2018 at 01:28)</a>:</h4>
<p>i.e. if you say <code>n + 0 = n</code> and <code>n + succ m = succ (n + m)</code>, then it knows that it starts from <code>has_add.add</code>, checks the <code>nat.has_add</code> argument, then goes to the last parameter and uses one rule if <code>0</code> and another if <code>succ _</code></p>

<a name="135292764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292764" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292764">Mario Carneiro (Oct 06 2018 at 01:29)</a>:</h4>
<p>so there is no big search</p>

<a name="135292768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292768" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292768">Simon Hudon (Oct 06 2018 at 01:29)</a>:</h4>
<p>Yes, I agree with that idea</p>

<a name="135292919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292919" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292919">Mario Carneiro (Oct 06 2018 at 01:33)</a>:</h4>
<p>I think that many uses of <code>simp</code> are actually uses of <code>cbv</code>/<code>cbn</code></p>

<a name="135292980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135292980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135292980">Simon Hudon (Oct 06 2018 at 01:35)</a>:</h4>
<p>I think you're right</p>

<a name="135293175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135293175" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135293175">Simon Hudon (Oct 06 2018 at 01:41)</a>:</h4>
<p>About corecursive definitions, I'm thinking of using a bound on the number of times they can be unfolded</p>

<a name="135293734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/135293734" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#135293734">Mario Carneiro (Oct 06 2018 at 01:57)</a>:</h4>
<p>You could also trigger them "in reverse", i.e. a destructor applied to a corecursor reduces</p>

<a name="148876325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148876325" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148876325">Simon Hudon (Nov 30 2018 at 17:41)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span>  <span class="user-mention" data-user-id="110087">@Scott Morrison</span> I noticed that <code>ext</code> has a weird behavior where with <code>f g : a -&gt; b -&gt; c |- f = g</code> if you call <code>ext i</code> it will apply extensionality twice instead of only once. I believe it is a mistake that I made. Is this a valuable behavior for you guys?</p>

<a name="148876615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148876615" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148876615">Simon Hudon (Nov 30 2018 at 17:46)</a>:</h4>
<p>I'm thinking of fixing it</p>

<a name="148878481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148878481" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148878481">Reid Barton (Nov 30 2018 at 18:19)</a>:</h4>
<p>What exactly are you planning on changing the behavior to?</p>

<a name="148878498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148878498" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148878498">Reid Barton (Nov 30 2018 at 18:19)</a>:</h4>
<p>My understanding is that currently, <code>ext</code> just applies as many extensionality lemmas as possible</p>

<a name="148878616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148878616" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148878616">Reid Barton (Nov 30 2018 at 18:21)</a>:</h4>
<p>Tricky cases: <code>ext</code> lemmas which don't consume any of the names, or which produce multiple goals with different numbers of variables (does <code>ext</code> support this currently?)</p>

<a name="148879897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148879897" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148879897">Simon Hudon (Nov 30 2018 at 18:39)</a>:</h4>
<p>About the tricky case: for the multiple goals scenario, it is currently broken and I'm going to fix that so that ext x y, when it produces multiple goals, will use the same list (x, y) in each goal.</p>

<a name="148880086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148880086" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148880086">Simon Hudon (Nov 30 2018 at 18:42)</a>:</h4>
<p>Currently, when <code>ext x</code> encounters an extensionality rule which does not consume names, it just keeps going until it can't anymore. For instance, with <code>f g : a -&gt; (b x c) |- f = g</code>, <code>ext x</code> will introduce <code>x</code> and use extensionality on pairs. I'd like to change that so that <code>ext x</code> only uses functional extensionality and <code>ext x _</code> will allow the pair extensionality to be used.</p>

<a name="148880091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148880091" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148880091">Reid Barton (Nov 30 2018 at 18:42)</a>:</h4>
<p>I guess the main thing is that currently <code>ext x</code> with an ext lemma that takes 1 name followed by an ext lemma that takes 0 names applies both, and that should not change</p>

<a name="148880114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148880114" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148880114">Simon Hudon (Nov 30 2018 at 18:42)</a>:</h4>
<p>Really? Why not?</p>

<a name="148880135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148880135" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148880135">Reid Barton (Nov 30 2018 at 18:43)</a>:</h4>
<p>Because there are like 1000 uses of <code>ext</code> already</p>

<a name="148880150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148880150" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148880150">Reid Barton (Nov 30 2018 at 18:43)</a>:</h4>
<p>and you can use <code>ext1</code> to apply one lemma</p>

<a name="148880156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148880156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148880156">Simon Hudon (Nov 30 2018 at 18:43)</a>:</h4>
<p>In mathlib or other projects too? I can fix mathlib, no worries.</p>

<a name="148880157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148880157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148880157">Reid Barton (Nov 30 2018 at 18:43)</a>:</h4>
<p>so IMO the current behavior makes sense in that case</p>

<a name="148880236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148880236" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148880236">Simon Hudon (Nov 30 2018 at 18:44)</a>:</h4>
<p>The thing is that, when you want to use three extensionality lemmas and provide variable names for them but that a fourth is possible, you have to limit using numbers. I'd like to avoid that.</p>

<a name="148881908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148881908" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148881908">Simon Hudon (Nov 30 2018 at 19:09)</a>:</h4>
<p>Here is what I did: <a href="https://github.com/leanprover/mathlib/pull/506" target="_blank" title="https://github.com/leanprover/mathlib/pull/506">https://github.com/leanprover/mathlib/pull/506</a></p>

<a name="148884473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148884473" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148884473">Reid Barton (Nov 30 2018 at 19:50)</a>:</h4>
<p>Why not just add some new syntax for this other behavior that you want?</p>

<a name="148884498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148884498" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148884498">Reid Barton (Nov 30 2018 at 19:50)</a>:</h4>
<p>I don't see how it can be worth changing the default behavior, which is easy to understand and probably what you want most of the time</p>

<a name="148884615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148884615" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148884615">Reid Barton (Nov 30 2018 at 19:52)</a>:</h4>
<p>I didn't realize the syntax with <code>: n</code> existed. I'm not sure whether I've ever wanted it. I have used <code>ext1</code> to apply one extensionality lemma and not a second, but I don't know whether I've wanted to apply specifically 2 or more</p>

<a name="148891407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148891407" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148891407">Mario Carneiro (Nov 30 2018 at 21:38)</a>:</h4>
<p>it's an upper bound not a lower bound</p>

<a name="148892238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148892238" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148892238">Reid Barton (Nov 30 2018 at 21:54)</a>:</h4>
<p>I meant "specifically apply a number N, where N &gt;= 2"</p>

<a name="148892283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148892283" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148892283">Mario Carneiro (Nov 30 2018 at 21:55)</a>:</h4>
<p>right, that's not what it does</p>

<a name="148892294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148892294" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148892294">Mario Carneiro (Nov 30 2018 at 21:55)</a>:</h4>
<p>it applies extensionality <em>up to</em> N times</p>

<a name="148892399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148892399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148892399">Reid Barton (Nov 30 2018 at 21:57)</a>:</h4>
<p>Well I would only use it when I didn't want to apply more, right?</p>

<a name="148892405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148892405" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148892405">Reid Barton (Nov 30 2018 at 21:57)</a>:</h4>
<p>It might as well be an exact number</p>

<a name="148893622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148893622" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148893622">Simon Hudon (Nov 30 2018 at 22:18)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> Why do you think <code>ext x _</code> is a bad syntax? Having <code>ext x</code> apply extensionality even when you run out of names for the new variables is inconsistent with what <code>intros</code> does. And instead, you could be writing <code>ext x; ext</code></p>

<a name="148893667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148893667" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148893667">Reid Barton (Nov 30 2018 at 22:19)</a>:</h4>
<p>What is <code>ext x _</code> supposed to mean?</p>

<a name="148893670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148893670" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148893670">Reid Barton (Nov 30 2018 at 22:19)</a>:</h4>
<p>Anyways I don't think I said it was a bad syntax...?</p>

<a name="148893719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148893719" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148893719">Reid Barton (Nov 30 2018 at 22:20)</a>:</h4>
<p>Although I do possibly think it is one, depending on what it is supposed to mean...</p>

<a name="148893770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148893770" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148893770">Reid Barton (Nov 30 2018 at 22:21)</a>:</h4>
<p>What is bad is changing very basic and useful stuff unnecessarily</p>

<a name="148893793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148893793" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148893793">Reid Barton (Nov 30 2018 at 22:21)</a>:</h4>
<p>Also there's lots of stuff which takes a list of names and just makes up more if there aren't enough provided, like <code>cases</code></p>

<a name="148893850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148893850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148893850">Reid Barton (Nov 30 2018 at 22:22)</a>:</h4>
<p>So to me, the current behavior makes perfect sense</p>

<a name="148894062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148894062" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148894062">Simon Hudon (Nov 30 2018 at 22:27)</a>:</h4>
<p><code>ext x</code> would not use extensionality of product after functional extensionality because it runs out of names. <code>ext x _</code> would be to trigger extensionality of product by giving it a name it can throw out.</p>

<a name="148894153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148894153" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148894153">Simon Hudon (Nov 30 2018 at 22:29)</a>:</h4>
<p><code>ext</code> is more similar to <code>intros</code> than cases because, with cases, if you provide more names, it will not apply additional recursors.</p>

<a name="148894263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148894263" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148894263">Reid Barton (Nov 30 2018 at 22:30)</a>:</h4>
<p>That's pretty gross IMO</p>

<a name="148894274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148894274" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148894274">Reid Barton (Nov 30 2018 at 22:30)</a>:</h4>
<p>Also, your next problem will be how to apply one zero-argument extensionality lemma, when there is a second you could apply as well</p>

<a name="148894288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148894288" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148894288">Reid Barton (Nov 30 2018 at 22:31)</a>:</h4>
<p>I really don't understand why you want to make any change at all frankly</p>

<a name="148894290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148894290" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148894290">Simon Hudon (Nov 30 2018 at 22:31)</a>:</h4>
<p>We could make it more like <code>cases</code> (or actually <code>rcases</code>) by using syntax like <code>ext x ⟨ y, z ⟩</code> to apply extensionality (functional, then product, then functional) on <code>f g : a -&gt; (b -&gt; c x b -&gt; c) |- f = g</code></p>

<a name="148894363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148894363" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148894363">Simon Hudon (Nov 30 2018 at 22:32)</a>:</h4>
<blockquote>
<p>Also, your next problem will be how to apply one zero-argument extensionality lemma, when there is a second you could apply as well</p>
</blockquote>
<p>This is where I would need to resort to the <code>ext : n</code> syntax.</p>

<a name="148894477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148894477" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148894477">Simon Hudon (Nov 30 2018 at 22:34)</a>:</h4>
<blockquote>
<p>I really don't understand why you want to make any change at all frankly</p>
</blockquote>
<p>I think it looks ugly to have to write <code>ext x y z : 3</code> and it makes the meaning of <code>ext x y z</code> different from what you would assume. It doesn't mean apply extensionality three times. It means apply extensionality multiple times and the first three arguments should be named <code>x</code> <code>y</code> <code>z</code></p>

<a name="148894511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148894511" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148894511">Reid Barton (Nov 30 2018 at 22:35)</a>:</h4>
<p>How about making it mean "apply extensionality three times" then?</p>

<a name="148894514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148894514" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148894514">Reid Barton (Nov 30 2018 at 22:35)</a>:</h4>
<p>I've never used it and I didn't read the documentation carefully</p>

<a name="148894526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148894526" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148894526">Reid Barton (Nov 30 2018 at 22:35)</a>:</h4>
<p>Oh wait I misparsed</p>

<a name="148894572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148894572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148894572">Reid Barton (Nov 30 2018 at 22:36)</a>:</h4>
<p>Why would someone think <code>ext x y z</code> means extensionality three times?</p>

<a name="148894588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148894588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148894588">Reid Barton (Nov 30 2018 at 22:36)</a>:</h4>
<p>As you can probably tell, this whole conversation is very confusing to me</p>

<a name="148894777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148894777" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148894777">Reid Barton (Nov 30 2018 at 22:41)</a>:</h4>
<p>An extensionality lemma for a relation would consume two names, so the number of names would never be related to the number of lemmas applied anyways</p>

<a name="148894794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148894794" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148894794">Simon Hudon (Nov 30 2018 at 22:41)</a>:</h4>
<p>That's true</p>

<a name="148894895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148894895" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148894895">Simon Hudon (Nov 30 2018 at 22:43)</a>:</h4>
<p>I'd like an easier way of getting <code>ext</code> to stop applying lemmas than <code>ext : n</code></p>

<a name="148895366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148895366" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148895366">Reid Barton (Nov 30 2018 at 22:50)</a>:</h4>
<p>Okay, so how about making <code>ext ... : 0</code> or something mean "apply as few lemmas as possible to use all the names"?</p>

<a name="148895460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148895460" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148895460">Reid Barton (Nov 30 2018 at 22:52)</a>:</h4>
<p>Or it's not that difficult to just use <code>: n</code>, and changing the default behavior just means that some other, probably equally common case (apply as many lemmas as possible) now needs a special syntax instead</p>

<a name="148895661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148895661" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148895661">Simon Hudon (Nov 30 2018 at 22:56)</a>:</h4>
<p>For "as many lemmas as possible", we could go with <code>ext* x y z</code></p>

<a name="148897567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/148897567" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#148897567">Simon Hudon (Nov 30 2018 at 23:31)</a>:</h4>
<p>Or we could also do <code>ext x y z *</code> or <code>ext x y z ... </code></p>

<a name="150725070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/150725070" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#150725070">Reid Barton (Dec 02 2018 at 14:34)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span>  I think the current default behavior (as many lemmas as possible) is better. For one thing, <code>ext</code> is often used with no names.</p>

<a name="150725075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/150725075" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#150725075">Kevin Buzzard (Dec 02 2018 at 14:34)</a>:</h4>
<p>That's true -- I often just type <code>ext</code> and it does exactly what I want it to do.</p>

<a name="150725087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/150725087" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#150725087">Reid Barton (Dec 02 2018 at 14:35)</a>:</h4>
<p>(And in situations where you really don't need the names, because the whole proof is something like <code>by ext; simp</code>.)</p>

<a name="150733721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/150733721" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#150733721">Simon Hudon (Dec 02 2018 at 19:26)</a>:</h4>
<p>I'm not suggesting removing that behavior of <code>ext</code>. That's one reason I compare it with <code>intros</code>. Without names, go nuts, apply <code>ext</code> (or <code>intro</code> ) to your heart's content. But with <code>ext a b c</code>, like with <code>intros a b c</code>, you only go so far as the provided identifiers allow you.</p>

<a name="150733730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/150733730" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#150733730">Simon Hudon (Dec 02 2018 at 19:27)</a>:</h4>
<p>Are you guys only concerned about <code>ext</code> or do you also depend on the case where you provide a few names?</p>

<a name="151129575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/151129575" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#151129575">Reid Barton (Dec 07 2018 at 18:00)</a>:</h4>
<blockquote>
<p>Are you guys only concerned about <code>ext</code> or do you also depend on the case where you provide a few names?</p>
</blockquote>
<p>Honestly, I have no idea. I just use it, and it normally does what I want. I haven't been keeping score of how many times it applied a zero-argument extensionality lemma that I wanted or didn't want.</p>

<a name="151129677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/151129677" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#151129677">Reid Barton (Dec 07 2018 at 18:01)</a>:</h4>
<p>This is a standard problem with <em>changing</em> behavior--it's hard to evaluate how useful the old behavior is, because you just use it implicitly, as a matter of course.</p>

<a name="151129776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/extensionality/near/151129776" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79105extensionality.html#151129776">Reid Barton (Dec 07 2018 at 18:02)</a>:</h4>
<p>In this case, it is hard to imagine any compelling argument for changing the default behavior anyways.</p>


{% endraw %}
