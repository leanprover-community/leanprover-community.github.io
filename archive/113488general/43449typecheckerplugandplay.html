---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/43449typecheckerplugandplay.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html">type checker plug and play</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="183916820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183916820" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183916820">Johan Commelin (Dec 20 2019 at 08:22)</a>:</h4>
<p>Call me type checker curious. Is there some sort of framework where you can easily build your own type checker, by just writing some simple specs. E.g., you specify the judgment rules in some variant of BNF + epsilon and the framework spits out a type checker.</p>

<a name="183917203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183917203" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183917203">Tim Daly (Dec 20 2019 at 08:31)</a>:</h4>
<p>I would dearly love to see this. I have tried to reverse engineer the judgement rules without success.</p>

<a name="183918019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183918019" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183918019">Marc Huisinga (Dec 20 2019 at 08:48)</a>:</h4>
<p>andrej bauer recently gave a talk on a future tool like this at icfp 2019 <a href="https://youtube.com/watch?v=YZqOVsuyQyQ" target="_blank" title="https://youtube.com/watch?v=YZqOVsuyQyQ">https://youtube.com/watch?v=YZqOVsuyQyQ</a></p>
<div class="youtube-video message_inline_image"><a data-id="YZqOVsuyQyQ" href="https://youtube.com/watch?v=YZqOVsuyQyQ" target="_blank" title="https://youtube.com/watch?v=YZqOVsuyQyQ"><img src="https://i.ytimg.com/vi/YZqOVsuyQyQ/default.jpg"></a></div>

<a name="183918034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183918034" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183918034">Johan Commelin (Dec 20 2019 at 08:48)</a>:</h4>
<p>Cool, I'm going to watch this</p>

<a name="183918793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183918793" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183918793">Tim Daly (Dec 20 2019 at 09:01)</a>:</h4>
<p>Bauer also gave a talk on Vimeo "How to Implement Type Theory in an Hour (<a href="https://vimeo.com/286652934" target="_blank" title="https://vimeo.com/286652934">https://vimeo.com/286652934</a>) but I need the rules rules implemented by Lean</p>

<a name="183918852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183918852" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183918852">Johan Commelin (Dec 20 2019 at 09:02)</a>:</h4>
<blockquote>
<p>Bauer also gave a talk on Vimeo "How to Implement Type Theory in an Hour (<a href="https://vimeo.com/286652934" target="_blank" title="https://vimeo.com/286652934">https://vimeo.com/286652934</a>) but I need the rules rules implemented by Lean</p>
</blockquote>
<p>Those rules are in Mario's thesis</p>

<a name="183919070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183919070" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183919070">Sebastian Ullrich (Dec 20 2019 at 09:05)</a>:</h4>
<p>As for perhaps more mature tools, <a href="https://docs.racket-lang.org/redex/tutorial.html" target="_blank" title="https://docs.racket-lang.org/redex/tutorial.html">redex</a> is quite popular. You need to know a bit of Lisp/Racket, but... the good thing about Lisp is that there isn't much to know about it.</p>

<a name="183919851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183919851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183919851">Tim Daly (Dec 20 2019 at 09:20)</a>:</h4>
<p>Has anyone tried to implement Lean's rules in Andromeda?</p>

<a name="183920404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183920404" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183920404">Tim Daly (Dec 20 2019 at 09:28)</a>:</h4>
<p>Meta-theoriy of type theories.... let the recursion begin :-)</p>

<a name="183923370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183923370" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183923370">Tim Daly (Dec 20 2019 at 10:16)</a>:</h4>
<p>Interesting points about humans using type assistants at about minute 35</p>

<a name="183923403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183923403" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183923403">Johan Commelin (Dec 20 2019 at 10:17)</a>:</h4>
<p><span class="user-mention" data-user-id="221921">@Marc Huisinga</span> Thanks for the link to the talk about Andromeda. It's really cool.</p>

<a name="183923937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183923937" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183923937">Marc Huisinga (Dec 20 2019 at 10:25)</a>:</h4>
<p>no problem! <span class="user-mention" data-user-id="126113">@Olli</span> posted it here once before for the comments on itp in general.</p>

<a name="183924099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183924099" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183924099">Tim Daly (Dec 20 2019 at 10:27)</a>:</h4>
<p>It is interesting that these ideas from the proof community show up (in different words) in the computer algebra area. His comment about implicit coercions (especially since Axiom has first class dependent types) has to be handled on an ad-hoc basis in Axiom since it isn't decidable.</p>

<a name="183924651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183924651" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183924651">Tim Daly (Dec 20 2019 at 10:36)</a>:</h4>
<p>Around minute 46 he talks about "callbacks", where the "User code" (in my case Axiom) is used as an Oracle (my term) for things like judgement equality.Equality checking can be  "computed" in Axiom. Computer algebra allows computing equality in many special contexts (e.g. "Is this equal to that" in the current context of a non-abelian domain (e.g. matrix).</p>

<a name="183924786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183924786" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183924786">Tim Daly (Dec 20 2019 at 10:38)</a>:</h4>
<p>You might have a type A as a polynomial with fractional coefficients and need to see if it is equal to type B which is a fraction of polynomials with integer coefficients. Axiom can do this.</p>

<a name="183924859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183924859" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183924859">Mario Carneiro (Dec 20 2019 at 10:40)</a>:</h4>
<p>Note that in Andrej's case, the callback for equal(A,B) is supposed to use functions from the kernel to produce a proof of |- A = B. I don't think your Axiom computations will do this</p>

<a name="183926436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183926436" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183926436">Tim Daly (Dec 20 2019 at 11:05)</a>:</h4>
<p>The andromeda kernel (nucleus) isn't involved in the equal(A,B) interaction with user code, at least from what I can see from his talk. I will be reading his papers.</p>

<a name="183929068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183929068" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183929068">Tim Daly (Dec 20 2019 at 11:50)</a>:</h4>
<p>Even more interesting is his distinction between proof relevant and proof irrelevant rules, such as equality. A conjecture would be that Oracle systems (i.e. computer algebra) are ideal for answering proof irrelevant questions</p>

<a name="183929930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183929930" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183929930">Mario Carneiro (Dec 20 2019 at 12:04)</a>:</h4>
<p>The kernel is the only thing that produces elements of the abstract data type "judgment". This is what ensures soundness and a "small trusted kernel" mentioned earlier in the talk</p>

<a name="183929988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183929988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183929988">Mario Carneiro (Dec 20 2019 at 12:05)</a>:</h4>
<p>So user code that wants to return a proof of |- A = B has to call kernel functions in order to construct the data, that's the whole point</p>

<a name="183930042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183930042" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183930042">Mario Carneiro (Dec 20 2019 at 12:06)</a>:</h4>
<p>you can't just respond "yes" to the query equal(A,B)</p>

<a name="183930172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183930172" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183930172">Tim Daly (Dec 20 2019 at 12:09)</a>:</h4>
<p>The question equal(A,B) question becomes "Is there a (proven) coercion between A and B?". Given a proof of the coercion code in Axiom (already provided by a prior Lean proof) the answer to the question equal(A,B) where A is POLY(FRAC(INT)) and B is FRAC(POLY(INT)) is decideable and proof irrelevant.</p>

<a name="183930603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183930603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183930603">Mario Carneiro (Dec 20 2019 at 12:15)</a>:</h4>
<p>In Andrej's system, equal(A,B) means "please provide a proof of the convertibility of A and B, i.e. |- A = B". This proof can go by any means, including equality reflection on some theorem that you have lying around if the theory supports it, but it needs an actual proof; trusted code doesn't work for this purpose</p>

<a name="183930938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183930938" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183930938">Tim Daly (Dec 20 2019 at 12:20)</a>:</h4>
<p>The Axiom Sane effort is using Lean to prove the coercion code. So the coercion becomes an axiom in Lean. There is an "actual proof" in Lean which is a proof of the Axiom code, the proof can be provided as it is carried with the code.</p>

<a name="183930965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183930965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183930965">Tim Daly (Dec 20 2019 at 12:21)</a>:</h4>
<p>The coercion code is essentially a Lean tactic.</p>

<a name="183931071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183931071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183931071">Tim Daly (Dec 20 2019 at 12:23)</a>:</h4>
<p>Ultimately  the Axiom algorithms can all be used as Lean tactics or Lean axioms once they are proven.</p>

<a name="183931151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/type%20checker%20plug%20and%20play/near/183931151" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/43449typecheckerplugandplay.html#183931151">Tim Daly (Dec 20 2019 at 12:24)</a>:</h4>
<p>One could compute a GCD by calling the Axiom code rather than using Peano</p>


{% endraw %}

{% include archive_update.html %}