---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/6253737andmaths.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/6253737andmaths.html">3.7 and maths</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="189968961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.7%20and%20maths/near/189968961" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/6253737andmaths.html#189968961">Kevin Buzzard (Mar 07 2020 at 12:25)</a>:</h4>
<p>There has been talk of changing various bits of maths in core -- e.g. the definition of a group (to remove the superfluous axiom), and Mario in another thread talking about whether <code>singleton a</code> should change to <code>{x | x = a}</code> (it is currently <code>{x | x = a \or false}</code>). I'm not saying these are good or bad ideas, but I did just want to make the trivial observation that it's far easier to change mathlib than core Lean (unless we're planning on having daily Lean releases) so perhaps it would just be easier to rip all of the maths we can out of core Lean and put it into mathlib? Or are there arguments against this? I have no real idea about how much maths is still in mathlib, or how much it is needed. Did the max amount of maths it's reasonably possible to rip out already get ripped out?</p>

<a name="189969452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.7%20and%20maths/near/189969452" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/6253737andmaths.html#189969452">Gabriel Ebner (Mar 07 2020 at 12:43)</a>:</h4>
<p>I don't have a strong opinion on changes in the core Lean library.  It is not much harder to change core than it is to change mathlib: but it is definitely less convenient.  You manually have to coordinate the changes between Lean and mathlib, while for mathlib-only changes you only need to wait for the green checkmark from the CI.  But I can tell you about my plans for future Lean releases.  Although we probably won't have daily releases, I am aiming for at least a release a month (if we have PRs).  There will be no library changes in 3.7 to keep the mathlib porting effort reasonable.  (The faster we port mathlib to 3.7, the sooner we can release 3.8.)  A hypothetical <code>singleton</code> PR could make it into 3.8 though, which will probably be released in April.</p>

<a name="189969497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.7%20and%20maths/near/189969497" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/6253737andmaths.html#189969497">Mario Carneiro (Mar 07 2020 at 12:44)</a>:</h4>
<p>ooh, a release schedule</p>

<a name="189969798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.7%20and%20maths/near/189969798" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/6253737andmaths.html#189969798">Sebastian Ullrich (Mar 07 2020 at 12:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/3.2E7.20and.20maths/near/189968961" title="#narrow/stream/113488-general/topic/3.2E7.20and.20maths/near/189968961">said</a>:</p>
<blockquote>
<p>so perhaps it would just be easier to rip all of the maths we can out of core Lean and put it into mathlib?</p>
</blockquote>
<p>Seems sensible to me given that it will be similar to that in Lean 4. Note however that the Lean 3 C++ code (e.g. <code>norm_num</code>) has some dependencies on typeclasses etc, which will not be there in Lean 4.</p>

<a name="189969919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.7%20and%20maths/near/189969919" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/6253737andmaths.html#189969919">Patrick Massot (Mar 07 2020 at 12:59)</a>:</h4>
<p>I don't understand: what will not be there in Lean 4?</p>

<a name="189984998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.7%20and%20maths/near/189984998" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/6253737andmaths.html#189984998">Simon Hudon (Mar 07 2020 at 20:30)</a>:</h4>
<p>The Lean core library won't include much in the way of mathematics.</p>

<a name="189985984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.7%20and%20maths/near/189985984" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/6253737andmaths.html#189985984">Kevin Buzzard (Mar 07 2020 at 20:59)</a>:</h4>
<p>I think Patrick was probably referring to the comment about typeclasses not being there?</p>

<a name="189986766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.7%20and%20maths/near/189986766" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/6253737andmaths.html#189986766">Simon Hudon (Mar 07 2020 at 21:23)</a>:</h4>
<p>Oh! The idea for Lean 4 is to hook the automation into more agnostic type classes / indexing systems. Whereas in Lean 3, mathlib uses the notion of group defined in core, we'd be left to define our own notion of group and the Lean automation would use typeclasses like <code>associative_operator Î± (+)</code>. All we have to do is to derive an instance of <code>associative_operator</code> from our notion of group.</p>

<a name="189986816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.7%20and%20maths/near/189986816" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/6253737andmaths.html#189986816">Patrick Massot (Mar 07 2020 at 21:24)</a>:</h4>
<p>Does it mean the indexing issues related to that kind of type classes have been solved?</p>

<a name="189991088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.7%20and%20maths/near/189991088" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/6253737andmaths.html#189991088">Reid Barton (Mar 07 2020 at 23:40)</a>:</h4>
<p>I don't think this is about things like simp, but rather ring</p>

<a name="190009328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.7%20and%20maths/near/190009328" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/6253737andmaths.html#190009328">Sebastian Ullrich (Mar 08 2020 at 10:44)</a>:</h4>
<p>Yes, or <code>norm_num</code> as mentioned. There is no reason to write it in C++ anymore, so it doesn't need to be part of corelib, and neither do its dependencies.</p>

<a name="190010153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.7%20and%20maths/near/190010153" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/6253737andmaths.html#190010153">Mario Carneiro (Mar 08 2020 at 11:12)</a>:</h4>
<p>I think it is about time that <code>norm_num</code> moved to full lean code. It's already a bit awkward that half of <code>norm_num</code> is implemented in c++ (addition, subtraction, multiplication) and the other half is in lean (inequality, division, modulo, primality), and the implementation of real division relies on some typeclasses that are too strong (linear ordered field instead of characteristic zero) which limits applicability.</p>

<a name="190010161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.7%20and%20maths/near/190010161" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/6253737andmaths.html#190010161">Mario Carneiro (Mar 08 2020 at 11:13)</a>:</h4>
<p>I don't think it would be a big problem if we just deleted <code>tactic.norm_num</code> and moved what remains to the mathlib tactic</p>

<a name="190011649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.7%20and%20maths/near/190011649" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/6253737andmaths.html#190011649">Gabriel Ebner (Mar 08 2020 at 12:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/3.2E7.20and.20maths/near/190010161" title="#narrow/stream/113488-general/topic/3.2E7.20and.20maths/near/190010161">said</a>:</p>
<blockquote>
<p>I don't think it would be a big problem if we just deleted <code>tactic.norm_num</code> and moved what remains to the mathlib tactic</p>
</blockquote>
<p>Maybe a performance problem?  In any case, we (=Mario) could reimplement <code>norm_num</code> in mathlib first---this doesn't require any changes in core Lean.</p>

<a name="190462177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.7%20and%20maths/near/190462177" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/6253737andmaths.html#190462177">Yury G. Kudryashov (Mar 13 2020 at 01:13)</a>:</h4>
<p>I have a feature request for Lean (3.7 or later): when you're going to resolve a class instance, would it be hard to see if it can be found by unification first? Then we would be able to remove "use unification" workarounds in <code>algebra/group/hom</code>.</p>

<a name="190478455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/3.7%20and%20maths/near/190478455" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/6253737andmaths.html#190478455">Gabriel Ebner (Mar 13 2020 at 07:48)</a>:</h4>
<p>Is <a href="https://github.com/leanprover-community/lean/pull/135" target="_blank" title="https://github.com/leanprover-community/lean/pull/135">https://github.com/leanprover-community/lean/pull/135</a> what you're looking for?</p>


{% endraw %}

{% include archive_update.html %}