---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/52683unexpectedlylong.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html">unexpectedly long</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="134828020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134828020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134828020">Kenny Lau (Sep 28 2018 at 14:29)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">finset</span>

<span class="kn">open</span> <span class="n">finset</span> <span class="n">lattice</span>

<span class="kn">set_option</span> <span class="n">profiler</span> <span class="n">true</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">semilattice_sup_bot</span> <span class="n">α</span><span class="o">]</span>

<span class="kn">lemma</span> <span class="n">sup_le</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∀</span><span class="n">b</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">b</span> <span class="bp">≤</span> <span class="n">a</span><span class="o">)</span> <span class="bp">→</span> <span class="n">s</span><span class="bp">.</span><span class="n">sup</span> <span class="n">f</span> <span class="bp">≤</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">letI</span> <span class="o">:=</span> <span class="n">classical</span><span class="bp">.</span><span class="n">dec_eq</span> <span class="n">β</span><span class="bp">;</span> <span class="k">from</span>
<span class="n">finset</span><span class="bp">.</span><span class="n">induction_on</span> <span class="n">s</span> <span class="o">(</span><span class="bp">λ</span> <span class="bp">_</span><span class="o">,</span> <span class="n">bot_le</span><span class="o">)</span> <span class="o">(</span><span class="k">by</span> <span class="n">simp</span> <span class="o">{</span><span class="n">contextual</span> <span class="o">:=</span> <span class="n">tt</span><span class="o">})</span>
<span class="c1">-- why so long?</span>
</pre></div>

<a name="134828031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134828031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134828031">Kenny Lau (Sep 28 2018 at 14:29)</a>:</h4>
<p>takes somewhere between 5s and 30s to compile</p>

<a name="134829320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134829320" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134829320">Simon Hudon (Sep 28 2018 at 14:45)</a>:</h4>
<p>Is the time spent on <code>simp</code>?</p>

<a name="134829840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134829840" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134829840">Kenny Lau (Sep 28 2018 at 14:53)</a>:</h4>
<p>I think so</p>

<a name="134829940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134829940" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134829940">Kenny Lau (Sep 28 2018 at 14:54)</a>:</h4>
<p>btw that's <code>finset.sup_le</code></p>

<a name="134829952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134829952" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134829952">Kenny Lau (Sep 28 2018 at 14:54)</a>:</h4>
<p>that's right, a 10s-lemma is inside mathlib</p>

<a name="134839187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134839187" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134839187">Simon Hudon (Sep 28 2018 at 17:26)</a>:</h4>
<p>I'm planning on writing a tactic today <code>squeeze_simp</code> that will call <code>simp</code> and print a minimized <code>simp only</code> version. That might help in your endeavor</p>

<a name="134839219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134839219" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134839219">Simon Hudon (Sep 28 2018 at 17:27)</a>:</h4>
<p>I can automate the application of the suggestion in emacs but I don't know how to do the same with VS code</p>

<a name="134839421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134839421" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134839421">Johan Commelin (Sep 28 2018 at 17:31)</a>:</h4>
<p>Register it as a hole command, like <code>tidy</code> does.</p>

<a name="134839603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134839603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134839603">Simon Hudon (Sep 28 2018 at 17:34)</a>:</h4>
<p>Is that a mechanism of VS Code?</p>

<a name="134840062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134840062" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134840062">Johan Commelin (Sep 28 2018 at 17:42)</a>:</h4>
<p>No, it's a Lean thing</p>

<a name="134840104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134840104" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134840104">Johan Commelin (Sep 28 2018 at 17:42)</a>:</h4>
<p>I think it is a type class</p>

<a name="134840132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134840132" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134840132">Johan Commelin (Sep 28 2018 at 17:42)</a>:</h4>
<p>But I guess IDE's also have to hook into it. But this is a one time thing that has been done already</p>

<a name="134840140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134840140" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134840140">Simon Hudon (Sep 28 2018 at 17:42)</a>:</h4>
<p>Thanks! I'm looking at the <code>tidy</code> code, it's actually an attribute</p>

<a name="134840156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134840156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134840156">Simon Hudon (Sep 28 2018 at 17:43)</a>:</h4>
<p>Cool</p>

<a name="134840173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134840173" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134840173">Reid Barton (Sep 28 2018 at 17:43)</a>:</h4>
<p>Simon have you determined yet whether the emacs mode already supports hole commands? I haven't looked</p>

<a name="134840284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134840284" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134840284">Johan Commelin (Sep 28 2018 at 17:45)</a>:</h4>
<p>I thought emacs always supported the supremum of the features of all other IDE's<br>
By definition</p>

<a name="134840326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134840326" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134840326">Simon Hudon (Sep 28 2018 at 17:45)</a>:</h4>
<p>It is indeed emacs definition</p>

<a name="134840382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134840382" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134840382">Simon Hudon (Sep 28 2018 at 17:46)</a>:</h4>
<p>It does support hole commands, at least three that I have seen</p>

<a name="134840401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134840401" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134840401">Johan Commelin (Sep 28 2018 at 17:46)</a>:</h4>
<p>Since <code>tidy</code> there should be 4</p>

<a name="134840430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134840430" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134840430">Simon Hudon (Sep 28 2018 at 17:47)</a>:</h4>
<p>I confirm that I can now see tidy in that list too</p>

<a name="134840456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134840456" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134840456">Simon Hudon (Sep 28 2018 at 17:47)</a>:</h4>
<p>I like the idea of the type hole but it has a down side: if you're replacing <code>simp</code> in a file, you have to do it one at a time.</p>

<a name="134840547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134840547" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134840547">Reid Barton (Sep 28 2018 at 17:49)</a>:</h4>
<p>Aha I see, I have to be inside the hole and then invoke <code>lean-hole</code>.</p>

<a name="134840568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134840568" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134840568">Reid Barton (Sep 28 2018 at 17:49)</a>:</h4>
<p>I misunderstood the docstring "Ask Lean for a list of holes, then ask the user which to use."</p>

<a name="134840701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134840701" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134840701">Johan Commelin (Sep 28 2018 at 17:51)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> Agreed. Still it could be nice for the future. Because then one can use it during the golfing phase of a proof that one just finished.</p>

<a name="134840725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134840725" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134840725">Johan Commelin (Sep 28 2018 at 17:51)</a>:</h4>
<p>For squeezing entire files you might not even want to focus on editor integration.</p>

<a name="134840941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134840941" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134840941">Simon Hudon (Sep 28 2018 at 17:55)</a>:</h4>
<p>I agree with your first point Johan. For the second point, the reason I'm thinking about editor integration is out of laziness. The slow files are really big and applications of <code>simp</code> vary a lot so search and replace alone doesn't cut it</p>

<a name="134841018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134841018" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134841018">Johan Commelin (Sep 28 2018 at 17:56)</a>:</h4>
<p>Ok, fair enough</p>

<a name="134841064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134841064" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134841064">Simon Hudon (Sep 28 2018 at 17:57)</a>:</h4>
<p>What I want to do is search and replace <code>simp</code> (not preceded by a square bracket) with <code>squeeze_simp</code> which will output all the required substitutions with line numbers and then emacs can do a very targeted replacement of all the <code>squeeze_simp</code></p>

<a name="134841212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unexpectedly%20long/near/134841212" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/52683unexpectedlylong.html#134841212">Simon Hudon (Sep 28 2018 at 17:59)</a>:</h4>
<p>But now that I know about <code>hole_command</code> attributes, I think I might start with that to test out my idea</p>


{% endraw %}
