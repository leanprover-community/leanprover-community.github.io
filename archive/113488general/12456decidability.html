---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/12456decidability.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html">decidability</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="124428848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124428848" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124428848">Kenny Lau (Mar 30 2018 at 20:41)</a>:</h4>
<p>Are there things that are decidable but not yet proven?</p>

<a name="124428850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124428850" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124428850">Kenny Lau (Mar 30 2018 at 20:41)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span></p>

<a name="124428860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124428860" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124428860">Mario Carneiro (Mar 30 2018 at 20:41)</a>:</h4>
<p>Not sure I understand the meta level of the question</p>

<a name="124428902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124428902" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124428902">Kenny Lau (Mar 30 2018 at 20:42)</a>:</h4>
<p>that means, things that should be decidable, but nobody has proved it in Lean yet</p>

<a name="124428905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124428905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124428905">Mario Carneiro (Mar 30 2018 at 20:42)</a>:</h4>
<p>of course</p>

<a name="124428906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124428906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124428906">Kenny Lau (Mar 30 2018 at 20:42)</a>:</h4>
<p>could you list some</p>

<a name="124428908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124428908" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124428908">Mario Carneiro (Mar 30 2018 at 20:42)</a>:</h4>
<p>that's like asking if there are any not yet proven theorems</p>

<a name="124428920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124428920" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124428920">Kenny Lau (Mar 30 2018 at 20:42)</a>:</h4>
<p>well there are only finitely many predicates that have been created in Lean</p>

<a name="124428942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124428942" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124428942">Mario Carneiro (Mar 30 2018 at 20:43)</a>:</h4>
<p>Hm, none comes to mind... I have a definition that I don't have on mathlib yet that is waiting for a proof of decidability</p>

<a name="124428945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124428945" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124428945">Kenny Lau (Mar 30 2018 at 20:44)</a>:</h4>
<p>what is it</p>

<a name="124428987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124428987" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124428987">Mario Carneiro (Mar 30 2018 at 20:44)</a>:</h4>
<p>namely that level (in)equality in lean is decidable</p>

<a name="124428992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124428992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124428992">Kenny Lau (Mar 30 2018 at 20:44)</a>:</h4>
<p>hmm...</p>

<a name="124429012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124429012" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124429012">Mario Carneiro (Mar 30 2018 at 20:45)</a>:</h4>
<p>that is, for expressions made up of <code>max</code>, <code>imax</code> and variables, you can determine if for all values of the variables in <code>nat</code>, one is &lt;= the other or not</p>

<a name="124429027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124429027" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124429027">Mario Carneiro (Mar 30 2018 at 20:45)</a>:</h4>
<p>The proof uses case splitting on any <code>imax</code> expressions that come up</p>

<a name="124429032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124429032" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124429032">Kenny Lau (Mar 30 2018 at 20:45)</a>:</h4>
<p>oh, I should build a decidable version of <code>finsupp</code></p>

<a name="124429086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124429086" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124429086">Mario Carneiro (Mar 30 2018 at 20:46)</a>:</h4>
<p>I think Johannes had a proposal for that on here, where you use a <code>fintype</code> instead of <code>finite</code></p>

<a name="124429095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124429095" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124429095">Kenny Lau (Mar 30 2018 at 20:46)</a>:</h4>
<p>oh wait, I don't work with finite things</p>

<a name="124429096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124429096" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124429096">Kenny Lau (Mar 30 2018 at 20:46)</a>:</h4>
<p>lol</p>

<a name="124429371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124429371" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124429371">Kenny Lau (Mar 30 2018 at 20:53)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> no examples from <code>nat</code> and <code>int</code>?</p>

<a name="124429372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124429372" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124429372">Kenny Lau (Mar 30 2018 at 20:53)</a>:</h4>
<p>i.e. everything about them that should be decidable have been proven to be decidable?</p>

<a name="124429446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124429446" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124429446">Mario Carneiro (Mar 30 2018 at 20:55)</a>:</h4>
<p>yes, there aren't that many interesting predicate to start with</p>

<a name="124429495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124429495" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124429495">Kenny Lau (Mar 30 2018 at 20:56)</a>:</h4>
<p>nice</p>

<a name="124430652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124430652" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124430652">Andrew Ashworth (Mar 30 2018 at 21:27)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> out of curiousity what's up with your commutative algebra pr on mathlib</p>

<a name="124430671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124430671" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124430671">Kenny Lau (Mar 30 2018 at 21:27)</a>:</h4>
<p>I just started reworking it a few minutes ago, what a coincidence</p>

<a name="124433277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124433277" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124433277">Kevin Buzzard (Mar 30 2018 at 22:47)</a>:</h4>
<p>Kenny feel free to PR some of the comm alg stuff in stacks project. Did UMP get PR'd? That's a really important tool I see now.</p>

<a name="124433281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124433281" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124433281">Kenny Lau (Mar 30 2018 at 22:47)</a>:</h4>
<p>I can't PR anything until mathlib builds</p>

<a name="124433282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124433282" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124433282">Kevin Buzzard (Mar 30 2018 at 22:47)</a>:</h4>
<p>Oh I see.</p>

<a name="124433283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124433283" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124433283">Kevin Buzzard (Mar 30 2018 at 22:47)</a>:</h4>
<p>Why don't you roll back?</p>

<a name="124433324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124433324" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124433324">Kenny Lau (Mar 30 2018 at 22:48)</a>:</h4>
<p>I mean, the PR will have a cross</p>

<a name="124433326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124433326" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124433326">Kevin Buzzard (Mar 30 2018 at 22:48)</a>:</h4>
<p>I know it's a bore. Whenever Lean head and mathlib head don't play well together you're suddenly having to look up commits.</p>

<a name="124433332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124433332" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124433332">Kevin Buzzard (Mar 30 2018 at 22:48)</a>:</h4>
<p>I just never upgrade unless I have no red cross and also a thumbs up here</p>

<a name="124433342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124433342" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124433342">Kevin Buzzard (Mar 30 2018 at 22:49)</a>:</h4>
<p>I think Sebastian is seriously looking at making this kind of thing easier with leanpkg.</p>

<a name="124433346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/124433346" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#124433346">Kenny Lau (Mar 30 2018 at 22:49)</a>:</h4>
<p>I still don't know why the latest build fails</p>

<a name="158128820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158128820" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158128820">Hans-Dieter Hiep (Feb 12 2019 at 16:06)</a>:</h4>
<p>Hi, quick question! What tactic would allow me to show decidable equality of records? I need to show:</p>
<div class="codehilite"><pre><span></span>⊢ decidable ({o := x_o, m := x_m, τ := x_τ} = {o := y_o, m := y_m, τ := y_τ})
</pre></div>


<p>where I know <code>decidable(x_o = y_o)</code>, ..., <code>decidable(x_τ = y_τ)</code>.</p>

<a name="158128846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158128846" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158128846">Chris Hughes (Feb 12 2019 at 16:06)</a>:</h4>
<p><code>@[derive decidable_eq]</code> when you define the structure.</p>

<a name="158377477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158377477" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158377477">Hans-Dieter Hiep (Feb 12 2019 at 18:57)</a>:</h4>
<p>Now, I get an unhelpful error message: <code>failed to find a derive handler for ...</code>. What does this mean?</p>

<a name="158377593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158377593" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158377593">Hans-Dieter Hiep (Feb 12 2019 at 18:59)</a>:</h4>
<p>It is related to the fact that I have defined an inductive type <code>value</code>. Is that somehow a protected name?</p>

<a name="158377610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158377610" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158377610">Chris Hughes (Feb 12 2019 at 18:59)</a>:</h4>
<p>Is the inductive type value a field to your structure?</p>

<a name="158377615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158377615" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158377615">Chris Hughes (Feb 12 2019 at 18:59)</a>:</h4>
<p>What does the <code>...</code> say?</p>

<a name="158377744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158377744" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158377744">Reid Barton (Feb 12 2019 at 19:01)</a>:</h4>
<p>Would be easier to say looking at the code and actual error message, but I think <code>...</code> is the class you want to derive, e.g., <code>decidable_eq</code></p>

<a name="158377747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158377747" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158377747">Hans-Dieter Hiep (Feb 12 2019 at 19:01)</a>:</h4>
<p><code>failed to find a derive handler for 'choice decidable_eq value.decidable_eq'</code><br>
Here, choice and decidable_eq are built-in, but value.decidable_eq seems to be related to the generated instance for the type <code>value</code> that I defined earlier.</p>

<a name="158377836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158377836" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158377836">Hans-Dieter Hiep (Feb 12 2019 at 19:02)</a>:</h4>
<div class="codehilite"><pre><span></span>@[derive decidable_eq]
inductive value (β : Type) [objects α β] : type α → Type 1
| object {c : class_name α} (o : β)
    (H : c = class_of α o) : value (ref c)
| null (c : class_name α) : value (ref c)
| term {γ : datatype} : γ → value (data α γ)
</pre></div>


<p>Now, I change the name <code>value</code> to <code>valu</code>. Then the error changes!</p>

<a name="158377933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158377933" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158377933">Hans-Dieter Hiep (Feb 12 2019 at 19:03)</a>:</h4>
<p>Hmmm, never mind. Unable to reproduce that now. It still is: <code>failed to find a derive handler for 'choice decidable_eq valu.decidable_eq'</code></p>

<a name="158377951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158377951" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158377951">Chris Hughes (Feb 12 2019 at 19:03)</a>:</h4>
<p>Is it confused by something you've defined called<code> decidable_eq</code>? I replicated the error.</p>
<div class="codehilite"><pre><span></span><span class="kn">namespace</span> <span class="n">foo</span>

<span class="n">def</span> <span class="n">decidable_eq</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="bp">@</span><span class="o">[</span><span class="n">derive</span> <span class="n">decidable_eq</span><span class="o">]</span> <span class="kn">structure</span> <span class="n">foo</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">bar</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>

<span class="kn">end</span> <span class="n">foo</span>
</pre></div>

<a name="158378030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158378030" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158378030">Reid Barton (Feb 12 2019 at 19:04)</a>:</h4>
<p>maybe a manually-written instance of <code>decidable_eq</code> got a name like that?</p>

<a name="158378069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158378069" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158378069">Hans-Dieter Hiep (Feb 12 2019 at 19:05)</a>:</h4>
<p>Sure, but I have never defined any decidable_eq myself. The <code>value.decidable_eq</code> is not defined by me, but derived.</p>

<a name="158378227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158378227" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158378227">Chris Hughes (Feb 12 2019 at 19:07)</a>:</h4>
<p>What namespaces do you have open? Maybe the error is something you've imported.</p>

<a name="158378302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158378302" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158378302">Hans-Dieter Hiep (Feb 12 2019 at 19:08)</a>:</h4>
<p>If I remove <code>@[derive decidable_eq]</code> from the <code>value</code> definition, the error changes into something more sensible: <code>mk_dec_eq_instance failed, failed to generate instance for
  Π (a b : Π (p : param_name m), value β (param_type p)), decidable (a = b)</code> So it must be caused by the derived instance of <code>value</code>.</p>

<a name="158378497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158378497" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158378497">Chris Hughes (Feb 12 2019 at 19:10)</a>:</h4>
<p>Of course. I'm confused by <code>choice</code> in the error message. Is this <code>classical.choice</code>?</p>

<a name="158378500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158378500" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158378500">Hans-Dieter Hiep (Feb 12 2019 at 19:10)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> Indeed, I have opened the namespace <code>value</code> in which the name <code>decidable_eq</code> was defined by the derivation. Thanks, stupid mistake!</p>

<a name="158378712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158378712" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158378712">Reid Barton (Feb 12 2019 at 19:13)</a>:</h4>
<p>aha!<br>
Maybe <code>choice X.foo Y.foo</code> is how Lean represents "I haven't figured out whether you're talking about <code>X.foo</code> or <code>Y.foo</code> yet"?</p>

<a name="158378829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158378829" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158378829">Hans-Dieter Hiep (Feb 12 2019 at 19:14)</a>:</h4>
<p>I confirm that. You can see that here:</p>
<div class="codehilite"><pre><span></span>namespace foo

def value.decidable_eq : Type := sorry
open value

@[derive decidable_eq] structure foo :=
(bar : ℕ)

end foo
</pre></div>

<a name="158378864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158378864" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158378864">Reid Barton (Feb 12 2019 at 19:15)</a>:</h4>
<p><code>open</code>ing previous inductive types when defining new ones is a totally reasonable thing to do, it's annoying that it causes this <code>derive decidable_eq</code> mechanism to break.</p>

<a name="158378919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158378919" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158378919">Reid Barton (Feb 12 2019 at 19:15)</a>:</h4>
<p>Well, it's a totally reasonable thing to want to do, at any rate.</p>

<a name="158379021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158379021" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158379021">Reid Barton (Feb 12 2019 at 19:16)</a>:</h4>
<p>Seems like <code>value.decidable_eq</code> should have been <code>protected</code>, then I guess this wouldn't have happened.</p>

<a name="158379096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158379096" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158379096">Hans-Dieter Hiep (Feb 12 2019 at 19:17)</a>:</h4>
<p>I agree; if you add <code>protected</code> in the foo snippet above, the derive mechanism works as expected.</p>

<a name="158379363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158379363" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158379363">Reid Barton (Feb 12 2019 at 19:20)</a>:</h4>
<p>I'm surprised the lack of <code>protected</code> doesn't break other things though. Seems like having open an inductive/structure type with derived <code>decidable_eq</code> would be pretty common. Maybe Lean is able to resolve the ambiguity in most other situations</p>

<a name="158385027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158385027" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158385027">Mario Carneiro (Feb 12 2019 at 20:32)</a>:</h4>
<p>yes, <code>choice</code> is how lean represents an overloaded name in pexprs</p>

<a name="158385214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/decidability/near/158385214" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/12456decidability.html#158385214">Reid Barton (Feb 12 2019 at 20:34)</a>:</h4>
<p>what better way to represent an overloaded name than by an overloaded name</p>


{% endraw %}
