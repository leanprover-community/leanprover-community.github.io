---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/58083universeparametersofinstances.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html">universe parameters of instances</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="127507965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127507965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127507965">Reid Barton (Jun 03 2018 at 18:33)</a>:</h4>
<p>Is this a known issue?</p>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">cat</span> <span class="o">(</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">Œ≤</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span>
<span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">Œ≤</span><span class="o">)</span>

<span class="kn">section</span>
<span class="kn">universe</span> <span class="n">u</span>
<span class="c1">-- OK</span>
<span class="kn">example</span> <span class="o">{</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">cat</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">:</span> <span class="n">cat</span><span class="bp">.</span><span class="n">x</span> <span class="n">Œ±</span> <span class="bp">=</span> <span class="n">cat</span><span class="bp">.</span><span class="n">x</span> <span class="n">Œ±</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="kn">end</span>

<span class="kn">section</span>
<span class="kn">universe</span> <span class="n">u</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">cat</span> <span class="n">Œ±</span><span class="o">]</span>
<span class="c1">-- Fails: &quot;invalid reference to undefined universe level parameter &#39;u_1&#39;&quot;</span>
<span class="kn">example</span> <span class="o">:</span> <span class="n">cat</span><span class="bp">.</span><span class="n">x</span> <span class="n">Œ±</span> <span class="bp">=</span> <span class="n">cat</span><span class="bp">.</span><span class="n">x</span> <span class="n">Œ±</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="kn">end</span>
</pre></div>

<a name="127508011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508011" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508011">Simon Hudon (Jun 03 2018 at 18:34)</a>:</h4>
<p>It is known in the sense that it is a design that's hard to work with.</p>

<a name="127508012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508012" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508012">Reid Barton (Jun 03 2018 at 18:34)</a>:</h4>
<p>It seems that the elaborator fails to gather the second universe variable of <code>cat</code></p>

<a name="127508022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508022">Simon Hudon (Jun 03 2018 at 18:35)</a>:</h4>
<p>If you absolutely need to use it, you need to specify the universes as <code>cat.{u v} Œ±</code></p>

<a name="127508024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508024" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508024">Simon Hudon (Jun 03 2018 at 18:35)</a>:</h4>
<p>It makes it unpleasant to use though</p>

<a name="127508025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508025" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508025">Reid Barton (Jun 03 2018 at 18:35)</a>:</h4>
<p>That makes no difference (except the error message complains about <code>v</code> now)</p>

<a name="127508032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508032" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508032">Reid Barton (Jun 03 2018 at 18:35)</a>:</h4>
<p>I think this one is just a bug</p>

<a name="127508073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508073" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508073">Simon Hudon (Jun 03 2018 at 18:36)</a>:</h4>
<p>I don't think so. Can you try <code>cat.{v u} Œ±</code> instead?</p>

<a name="127508077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508077" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508077">Reid Barton (Jun 03 2018 at 18:36)</a>:</h4>
<p>why <code>{v u}</code>?</p>

<a name="127508082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508082" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508082">Reid Barton (Jun 03 2018 at 18:37)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">section</span>
<span class="n">universes</span> <span class="n">u</span> <span class="n">v</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">cat</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">Œ±</span><span class="o">]</span>
<span class="c1">-- Fails: &quot;invalid reference to undefined universe level parameter &#39;v&#39;&quot;</span>
<span class="kn">example</span> <span class="o">:</span> <span class="n">cat</span><span class="bp">.</span><span class="n">x</span> <span class="n">Œ±</span> <span class="bp">=</span> <span class="n">cat</span><span class="bp">.</span><span class="n">x</span> <span class="n">Œ±</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="kn">end</span>
</pre></div>

<a name="127508083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508083" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508083">Simon Hudon (Jun 03 2018 at 18:37)</a>:</h4>
<p>Sometimes, the order of the universes is weird</p>

<a name="127508090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508090" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508090">Reid Barton (Jun 03 2018 at 18:37)</a>:</h4>
<p><code>{v u}</code> gives many worse errors</p>

<a name="127508093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508093" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508093">Reid Barton (Jun 03 2018 at 18:37)</a>:</h4>
<p>I think if we could just, like, <code>include</code> the universe parameter <code>v</code>, then this would work</p>

<a name="127508095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508095" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508095">Simon Hudon (Jun 03 2018 at 18:37)</a>:</h4>
<p>Is the error on the equality?</p>

<a name="127508096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508096" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508096">Reid Barton (Jun 03 2018 at 18:37)</a>:</h4>
<p>The error is located on the word <code>example</code></p>

<a name="127508130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508130" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508130">Simon Hudon (Jun 03 2018 at 18:38)</a>:</h4>
<p>You may need <code>cat.x.{u v} Œ± = cat.x.{u v} Œ±</code></p>

<a name="127508153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508153" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508153">Simon Hudon (Jun 03 2018 at 18:39)</a>:</h4>
<p>This here works for me:</p>
<div class="codehilite"><pre><span></span>section
universes u v
variables {Œ± : Type u} [cat.{u v} Œ±]
example : cat.x.{u v} Œ± = cat.x Œ± := rfl
end
</pre></div>

<a name="127508207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508207" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508207">Reid Barton (Jun 03 2018 at 18:40)</a>:</h4>
<p>That does work</p>

<a name="127508220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508220" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508220">Simon Hudon (Jun 03 2018 at 18:41)</a>:</h4>
<p>Can you show me an example where using two universes is necessary? Maybe I can show you a way around it</p>

<a name="127508221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508221" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508221">Reid Barton (Jun 03 2018 at 18:41)</a>:</h4>
<p>But, this also works</p>

<a name="127508223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508223" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508223">Reid Barton (Jun 03 2018 at 18:41)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">section</span>
<span class="n">universes</span> <span class="n">u</span> <span class="n">v</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">cat</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">Œ±</span><span class="o">]</span>
<span class="c1">-- OK</span>
<span class="kn">example</span> <span class="o">:</span> <span class="n">cat</span><span class="bp">.</span><span class="n">x</span> <span class="n">Œ±</span> <span class="bp">=</span> <span class="n">cat</span><span class="bp">.</span><span class="n">x</span> <span class="n">Œ±</span> <span class="bp">‚àß</span> <span class="n">nonempty</span> <span class="o">(</span><span class="n">punit</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">})</span> <span class="o">:=</span> <span class="bp">‚ü®</span><span class="n">rfl</span><span class="o">,</span> <span class="bp">‚ü®‚ü®‚ü©‚ü©‚ü©</span>
<span class="kn">end</span>
</pre></div>

<a name="127508283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508283" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508283">Simon Hudon (Jun 03 2018 at 18:43)</a>:</h4>
<p>That makes sense. Every definition and theorem has an implicit list of free universe variables. The type of <code>example</code> did not mention <code>v</code> which meant that the instance of <code>cat</code> it needed was not necessarily parameterized by <code>v</code></p>

<a name="127508285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508285" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508285">Reid Barton (Jun 03 2018 at 18:43)</a>:</h4>
<p>So it really seems that the elaborator just does not understand that it ought to bind the universe variable <code>v</code></p>

<a name="127508326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508326" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508326">Reid Barton (Jun 03 2018 at 18:44)</a>:</h4>
<p>The type of <code>example</code> does mention <code>v</code> though</p>

<a name="127508327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508327" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508327">Simon Hudon (Jun 03 2018 at 18:44)</a>:</h4>
<p>I don't think I would say that it ought to.</p>

<a name="127508341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508341" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508341">Simon Hudon (Jun 03 2018 at 18:45)</a>:</h4>
<p>Only the versions that work</p>

<a name="127508343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508343" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508343">Reid Barton (Jun 03 2018 at 18:45)</a>:</h4>
<p>No, all of them</p>

<a name="127508344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508344" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508344">Reid Barton (Jun 03 2018 at 18:45)</a>:</h4>
<p>since they are really <code>‚àÄ {Œ± : Type u} [_inst_1 : cat.{u v} Œ±], ...</code></p>

<a name="127508386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508386" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508386">Reid Barton (Jun 03 2018 at 18:46)</a>:</h4>
<p>Consider the other original working version, which did not use <code>variables</code></p>

<a name="127508394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508394" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508394">Reid Barton (Jun 03 2018 at 18:47)</a>:</h4>
<p>Its full inferred type is <code>ok.{u_1 u_2} : ‚àÄ {Œ± : Type u_1} [_inst_1 : cat.{u_1 u_2} Œ±], cat.x.{u_1 u_2} Œ± = cat.x.{u_1 u_2} Œ±</code></p>

<a name="127508395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508395" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508395">Simon Hudon (Jun 03 2018 at 18:47)</a>:</h4>
<p><code>v</code> does not appear in it either. It is inferred</p>

<a name="127508442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508442" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508442">Simon Hudon (Jun 03 2018 at 18:48)</a>:</h4>
<p>Since it's not specified, it's found through unification. <code>v</code> starts off as a universe meta variable and <code>cat</code> and <code>cat.x</code> start off with different universe variables, we do instance resolution and then unification and then they are forced to be the same.</p>

<a name="127508453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508453" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508453">Simon Hudon (Jun 03 2018 at 18:49)</a>:</h4>
<p>The the example with <code>variable</code>, the <code>cat</code> instance already has a universe so it's not inferred during elaboration</p>

<a name="127508502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508502" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508502">Simon Hudon (Jun 03 2018 at 18:50)</a>:</h4>
<p>Universe polymorphism is a pretty nasty can of worms. Keep it to a minimum. <code>ulift</code> can help you with that.</p>

<a name="127508514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508514" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508514">Reid Barton (Jun 03 2018 at 18:51)</a>:</h4>
<p>I have to say I still don't really buy any of this!</p>

<a name="127508554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508554" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508554">Reid Barton (Jun 03 2018 at 18:52)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">section</span>
<span class="n">universes</span> <span class="n">u</span> <span class="n">v</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">cat</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">Œ±</span><span class="o">]</span> <span class="o">{</span><span class="n">Œ≥</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Œ≥</span><span class="o">)</span>
<span class="c1">-- OK</span>
<span class="n">def</span> <span class="n">foo</span> <span class="o">:</span> <span class="n">cat</span><span class="bp">.</span><span class="n">x</span> <span class="n">Œ±</span> <span class="bp">=</span> <span class="n">cat</span><span class="bp">.</span><span class="n">x</span> <span class="n">Œ±</span> <span class="bp">‚àß</span> <span class="n">nonempty</span> <span class="n">Œ≥</span> <span class="o">:=</span> <span class="bp">‚ü®</span><span class="n">rfl</span><span class="o">,</span> <span class="bp">‚ü®</span><span class="n">y</span><span class="bp">‚ü©‚ü©</span>
<span class="kn">end</span>
</pre></div>

<a name="127508558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508558" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508558">Simon Hudon (Jun 03 2018 at 18:52)</a>:</h4>
<p>This is consistent with my explanation</p>

<a name="127508570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508570" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508570">Simon Hudon (Jun 03 2018 at 18:53)</a>:</h4>
<p>Think of it as matching universe levels by name.</p>

<a name="127508627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508627" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508627">Reid Barton (Jun 03 2018 at 18:55)</a>:</h4>
<p>FWIW, this is the full error message with the failing version</p>
<div class="codehilite"><pre><span></span><span class="n">kernel</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">type</span> <span class="kn">check</span> <span class="n">declaration</span> <span class="err">&#39;</span><span class="n">test&#39;</span> <span class="n">this</span> <span class="n">is</span> <span class="n">usually</span> <span class="n">due</span> <span class="n">to</span> <span class="n">a</span> <span class="n">buggy</span> <span class="n">tactic</span> <span class="n">or</span> <span class="n">a</span> <span class="n">bug</span> <span class="k">in</span> <span class="n">the</span> <span class="n">builtin</span> <span class="n">elaborator</span>
<span class="n">elaborated</span> <span class="n">type</span><span class="o">:</span>
  <span class="bp">‚àÄ</span> <span class="o">{</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">cat</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">Œ±</span><span class="o">],</span>
    <span class="bp">@</span><span class="n">eq</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="bp">+</span><span class="mi">1</span><span class="o">}</span> <span class="o">(</span><span class="bp">@</span><span class="n">cat</span><span class="bp">.</span><span class="n">Œ≤</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">Œ±</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">)</span> <span class="o">(</span><span class="bp">@</span><span class="n">cat</span><span class="bp">.</span><span class="n">x</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">Œ±</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">)</span> <span class="o">(</span><span class="bp">@</span><span class="n">cat</span><span class="bp">.</span><span class="n">x</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">Œ±</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">)</span>
<span class="n">elaborated</span> <span class="n">value</span><span class="o">:</span>
  <span class="bp">Œª</span> <span class="o">{</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">cat</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">Œ±</span><span class="o">],</span> <span class="bp">@</span><span class="n">rfl</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="bp">+</span><span class="mi">1</span><span class="o">}</span> <span class="o">(</span><span class="bp">@</span><span class="n">cat</span><span class="bp">.</span><span class="n">Œ≤</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">Œ±</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">)</span> <span class="o">(</span><span class="bp">@</span><span class="n">cat</span><span class="bp">.</span><span class="n">x</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">Œ±</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">)</span>
<span class="n">nested</span> <span class="n">exception</span> <span class="n">message</span><span class="o">:</span>
<span class="n">invalid</span> <span class="n">reference</span> <span class="n">to</span> <span class="n">undefined</span> <span class="kn">universe</span> <span class="n">level</span> <span class="kn">parameter</span> <span class="err">&#39;</span><span class="n">v&#39;</span>
</pre></div>

<a name="127508628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508628" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508628">Simon Hudon (Jun 03 2018 at 18:56)</a>:</h4>
<p>In <code>cat.x</code> we don't what the universes will be so they start off as meta variables. <code>Œ±</code> brings in universe <code>u</code> and <code>Œ≥</code> brings in <code>v</code></p>

<a name="127508668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508668" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508668">Reid Barton (Jun 03 2018 at 18:56)</a>:</h4>
<p>So why doesn't the instance resolution of <code>cat.x</code> bring in <code>v</code>?</p>

<a name="127508674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508674" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508674">Simon Hudon (Jun 03 2018 at 18:57)</a>:</h4>
<p>Because its <code>v</code> is a local <code>v</code> to the class.</p>

<a name="127508714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508714" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508714">Reid Barton (Jun 03 2018 at 18:58)</a>:</h4>
<p>It's using this variable <code>_inst_1</code> whose type mentions <code>v</code>, and when I make it use the variables <code>Œ≥</code> and <code>y</code> then it understands that it should bring in <code>v</code>.</p>

<a name="127508717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508717" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508717">Simon Hudon (Jun 03 2018 at 18:58)</a>:</h4>
<p>I just tried:</p>
<div class="codehilite"><pre><span></span>universes u v

class cat (Œ± : Type u) :=
(Œ≤ : Type v)
(x : Œ≤)
</pre></div>


<p>and that doesn't work either. That's weird</p>

<a name="127508727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508727" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508727">Simon Hudon (Jun 03 2018 at 18:59)</a>:</h4>
<p>Ok, I'm not sure now. Maybe <span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> or <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> can come clear this up</p>

<a name="127508833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508833">Reid Barton (Jun 03 2018 at 19:03)</a>:</h4>
<p>I guess it cannot "see" the dependence on the <code>variable</code> which was used through instance resolution as easily as it can see a direct reference</p>

<a name="127508981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508981" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508981">Reid Barton (Jun 03 2018 at 19:08)</a>:</h4>
<p>Or, here is another way to look at it. Intuitively, I expect <code>variables &lt;bindings&gt;</code> to prepend <code>&lt;bindings&gt;</code> to the parameters of every definition/lemma. Well that's not quite true, I only expect bindings that are used somehow to get prepended.</p>

<a name="127508987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127508987" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127508987">Reid Barton (Jun 03 2018 at 19:09)</a>:</h4>
<p>Here lean obviously understands that it needs to include the <code>cat</code> instance, since otherwise there would be an error earlier about <code>cat.x</code>. But, if I just manually prepend both variables, as in the first example, then it works fine.</p>

<a name="127509033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127509033" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127509033">Reid Barton (Jun 03 2018 at 19:10)</a>:</h4>
<p>aha, here is another workaround!</p>
<div class="codehilite"><pre><span></span><span class="kn">section</span>
<span class="n">universes</span> <span class="n">u</span> <span class="n">v</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">inst</span> <span class="o">:</span> <span class="n">cat</span> <span class="n">Œ±</span><span class="o">]</span>
<span class="n">include</span> <span class="n">inst</span>
<span class="c1">-- OK</span>
<span class="n">def</span> <span class="n">ok</span> <span class="o">:</span> <span class="n">cat</span><span class="bp">.</span><span class="n">x</span> <span class="n">Œ±</span> <span class="bp">=</span> <span class="n">cat</span><span class="bp">.</span><span class="n">x</span> <span class="n">Œ±</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="kn">end</span>
</pre></div>

<a name="127509248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127509248" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127509248">Reid Barton (Jun 03 2018 at 19:18)</a>:</h4>
<p>not very surprising that that works, but certainly a palatable workaround. Actually, this could nicely solve my "upgrading" type class issue too. Just name both instances as variables and then <code>include</code> the one you want at any given time and <code>hide</code> it when done.</p>

<a name="127520290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127520290" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127520290">Scott Morrison (Jun 04 2018 at 02:03)</a>:</h4>
<p>Thanks for the interesting discussion here! I've absolutely run into this in my category theory library. Unfortunately, universe issues are a pain. Unavoidably, one needs to be able to discuss "small_category", where objects and morphisms live in the same universe, and "large_category", where objects live in a universe one higher than the morphisms.</p>

<a name="127520333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127520333" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127520333">Scott Morrison (Jun 04 2018 at 02:04)</a>:</h4>
<p>Rather than develop these in parallel (and deal with the combinatorial explosion of functors and natural transformations going between the worlds), I've settled on the somewhat ugly solution of having a single "category", with</p>

<a name="127520339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127520339" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127520339">Scott Morrison (Jun 04 2018 at 02:04)</a>:</h4>
<div class="codehilite"><pre><span></span>abbreviation large_category (C : Type (u+1)) : Type (u+1) := category.{u+1 u} C
abbreviation small_category (C : Type u)     : Type (u+1) := category.{u u} C
</pre></div>

<a name="127520354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127520354" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127520354">Scott Morrison (Jun 04 2018 at 02:05)</a>:</h4>
<p>If you're only dealing with small or large categories (or even one of each at the same time), everything works nicely, and typeclass inference remains your friend.</p>

<a name="127520378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127520378" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127520378">Scott Morrison (Jun 04 2018 at 02:06)</a>:</h4>
<p>If you're trying to write library code that covers both cases, it is slightly ugly, and we need to specify universes explicitly and do a certain amount of "including" typeclass instances.</p>

<a name="127520399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127520399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127520399">Reid Barton (Jun 04 2018 at 02:06)</a>:</h4>
<p>As you might have guessed, <code>cat</code> stands for your <code>category</code> class.<br>
In my so far limited use, I haven't had any issues just using <code>category</code> directly where mathematically reasonable, aside from the issue discussed in this topic, which I now have a workaround for.</p>

<a name="127520400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127520400" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127520400">Scott Morrison (Jun 04 2018 at 02:06)</a>:</h4>
<p>I have to write:</p>
<div class="codehilite"><pre><span></span>variable {C : Type u‚ÇÅ}
variable [ùíû : category.{u‚ÇÅ v‚ÇÅ} C]
variable {D : Type u‚ÇÇ}
variable [ùíü : category.{u‚ÇÇ v‚ÇÇ} D]
include ùíû ùíü
</pre></div>

<a name="127520402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127520402" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127520402">Scott Morrison (Jun 04 2018 at 02:06)</a>:</h4>
<p>quite often!</p>

<a name="127520406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127520406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127520406">Reid Barton (Jun 04 2018 at 02:06)</a>:</h4>
<p>Aha, so you already discovered the <code>include</code> workaround I guess.</p>

<a name="127520411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127520411" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127520411">Scott Morrison (Jun 04 2018 at 02:07)</a>:</h4>
<p>(But that said, that's usually as ugly as it gets, and after those includes everything works pretty naturally.)</p>

<a name="127559852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127559852" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127559852">Reid Barton (Jun 04 2018 at 20:50)</a>:</h4>
<p>Here's another, admittedly silly workaround for the issue here:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">Type‚ÇÇ</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="n">u</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="kt">Type</span> <span class="n">u</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">Type‚ÇÇ</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}}</span> <span class="o">[</span><span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span>
</pre></div>


<p>Now the type of <code>C</code> mentions <code>v</code>, so the elaborator correctly includes <code>v</code></p>

<a name="127779348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127779348" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127779348">Thang Nguyen (Jun 08 2018 at 17:59)</a>:</h4>
<p>Hi, I am new in lean programming. I am attending to Hanoi FABS summer school 2018 and really interested in doing. <br>
My homework is formalizing the statement of Polignac Conjecture: <strong>For every even number 2n, there are infinitely many pairs of consecutive primes which differ by 2n.</strong><br>
I have formalized and wonder regarding that: </p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Polignac</span> <span class="o">:</span><span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">‚àÄ</span> <span class="n">n</span><span class="o">,</span> <span class="n">isEven</span> <span class="n">n</span> <span class="bp">‚Üí</span> <span class="bp">‚àÄ</span> <span class="n">m</span><span class="o">,</span> <span class="bp">‚àÉ</span> <span class="n">p</span> <span class="n">q</span> <span class="bp">&gt;</span> <span class="n">m</span><span class="o">,</span> <span class="n">isPrime</span> <span class="n">p</span> <span class="bp">‚àß</span> <span class="n">isPrime</span> <span class="n">q</span> <span class="bp">‚àß</span> <span class="o">((</span><span class="n">p</span> <span class="bp">-</span> <span class="n">q</span><span class="o">)</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">‚à®</span> <span class="o">(</span><span class="n">q</span> <span class="bp">-</span> <span class="n">p</span><span class="o">)</span> <span class="bp">=</span><span class="n">n</span><span class="o">)</span>
</pre></div>


<p>I need your help!</p>

<a name="127779506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127779506" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127779506">Simon Hudon (Jun 08 2018 at 18:02)</a>:</h4>
<p>Can you be a bit more specific? Why do you wonder about that definition? Or more precisely, what is giving you trouble about that definition?</p>

<a name="127779510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127779510" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127779510">Patrick Massot (Jun 08 2018 at 18:02)</a>:</h4>
<p>It would be easier to actually use n as in the informal statement (and write <code>2*n</code> where you want 2n</p>

<a name="127779524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127779524" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127779524">Patrick Massot (Jun 08 2018 at 18:02)</a>:</h4>
<p>And the disjunction at the end is unnecessary</p>

<a name="127779645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127779645" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127779645">Patrick Massot (Jun 08 2018 at 18:05)</a>:</h4>
<p>Note also that your attempt says nothing about p and q being consecutive</p>

<a name="127779806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127779806" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127779806">Thang Nguyen (Jun 08 2018 at 18:08)</a>:</h4>
<p>I need to define the statement of Polignac Conjecture. And I defined it and dont know that is okay.</p>

<a name="127779824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127779824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127779824">Thang Nguyen (Jun 08 2018 at 18:09)</a>:</h4>
<blockquote>
<p>Note also that your attempt says nothing about p and q being consecutive</p>
</blockquote>
<p>so how to fix to p q consecutive</p>

<a name="127779871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127779871" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127779871">Patrick Massot (Jun 08 2018 at 18:10)</a>:</h4>
<p>What you wrote is not the correct statement, even assuming isEven and isPrime are defined</p>

<a name="127779910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127779910" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127779910">Simon Hudon (Jun 08 2018 at 18:11)</a>:</h4>
<p>You'd need to say every number between <code>p</code> and <code>q</code> is not prime. Using a different definition for that may be best</p>

<a name="127779911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127779911" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127779911">Patrick Massot (Jun 08 2018 at 18:11)</a>:</h4>
<p>You could add a condition that no natural number between p and q (p and q excluded) is prime</p>

<a name="127779916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127779916" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127779916">Patrick Massot (Jun 08 2018 at 18:11)</a>:</h4>
<p>And you don't need to have a notation for q</p>

<a name="127779926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127779926" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127779926">Patrick Massot (Jun 08 2018 at 18:11)</a>:</h4>
<p>You really want <code>n</code>, a prime <code>p</code> and asserting that <code>p+2*n</code> is also prime</p>

<a name="127779968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127779968" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127779968">Patrick Massot (Jun 08 2018 at 18:12)</a>:</h4>
<p>and there is no prime number in between</p>

<a name="127780320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127780320" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127780320">Thang Nguyen (Jun 08 2018 at 18:20)</a>:</h4>
<p>That is correct?</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Polignac</span> <span class="o">:</span><span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">‚àÄ</span> <span class="n">n</span> <span class="n">m</span><span class="o">:</span> <span class="n">nat</span><span class="o">,</span> <span class="bp">‚àÉ</span> <span class="n">p</span> <span class="o">:</span> <span class="n">nat</span><span class="o">,</span> <span class="n">isPrime</span> <span class="n">m</span> <span class="bp">‚Üí</span> <span class="o">(</span><span class="n">m</span> <span class="bp">=</span> <span class="n">p</span> <span class="bp">‚à®</span> <span class="n">m</span> <span class="bp">=</span> <span class="o">(</span><span class="n">p</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">*</span><span class="n">n</span><span class="o">))</span>
</pre></div>

<a name="127782321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127782321" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127782321">Patrick Massot (Jun 08 2018 at 19:07)</a>:</h4>
<p>No, it's not</p>

<a name="127785046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127785046" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127785046">Andrew Ashworth (Jun 08 2018 at 20:03)</a>:</h4>
<p>today I learned about <a href="https://en.wikipedia.org/wiki/Sexy_prime" target="_blank" title="https://en.wikipedia.org/wiki/Sexy_prime">https://en.wikipedia.org/wiki/Sexy_prime</a></p>

<a name="127785119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127785119" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127785119">Simon Hudon (Jun 08 2018 at 20:04)</a>:</h4>
<p>I learned that when I got married: our age is 6 apart and both of our ages were prime numbers. It's probably partly responsible for my saying yes</p>

<a name="127786525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127786525" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127786525">Patrick Massot (Jun 08 2018 at 20:33)</a>:</h4>
<p>(23, 29)?</p>

<a name="127786669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127786669" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127786669">Simon Hudon (Jun 08 2018 at 20:36)</a>:</h4>
<p>(31,37)</p>

<a name="127787334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127787334" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127787334">Andrew Ashworth (Jun 08 2018 at 20:51)</a>:</h4>
<p>Going back to his question, I feel like you would want to define a prime gap counting function, as in wikipedia (the number of prime gaps of size n below x). Then you take the limit as x goes to infinity. Is that a standard way to formalize it?</p>

<a name="127787405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127787405" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127787405">Johan Commelin (Jun 08 2018 at 20:52)</a>:</h4>
<p>Given <code>k</code>the size of the gaps, I would write: <code>\forall n, \ex p, p &gt; n \and is_prime_gap p k</code></p>

<a name="127787438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127787438" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127787438">Johan Commelin (Jun 08 2018 at 20:53)</a>:</h4>
<p>And then you need to express that <code>p</code> and <code>p+k</code> have a prime gap of size <code>k</code> in <code>is_prime_gap p k : Prop</code></p>

<a name="127889246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universe%20parameters%20of%20instances/near/127889246" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58083universeparametersofinstances.html#127889246">Scott Morrison (Jun 11 2018 at 10:38)</a>:</h4>
<p><span class="user-mention" data-user-id="117668">@Thang Nguyen</span>, just a suggestion --- in zulipchat you can set the "topic" name for a conversation, and it helps organise the conversation here a lot! For example, this one could have been "help with a statement about primes".</p>


{% endraw %}
