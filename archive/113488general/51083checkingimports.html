---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/51083checkingimports.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html">checking imports</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="135554082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135554082" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135554082">Jakob von Raumer (Oct 10 2018 at 16:59)</a>:</h4>
<p>whenever I open vscode, lean seems to re-check all imported files... wasn't this better some time ago?</p>

<a name="135554225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135554225" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135554225">Jakob von Raumer (Oct 10 2018 at 17:01)</a>:</h4>
<p>(my issue here is that I need to close all other programs, to check some imports from the hott3 library, they use up almost all of my RAM)</p>

<a name="135554646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135554646" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135554646">Chris Hughes (Oct 10 2018 at 17:09)</a>:</h4>
<p>Did you run <code>leanpkg build</code> in the appropriate directory?</p>

<a name="135555511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135555511" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135555511">Jakob von Raumer (Oct 10 2018 at 17:24)</a>:</h4>
<p>Nope, shame on my, kind of assumed that vscode would somehow invoke that... <span class="emoji emoji-1f601" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>

<a name="135555567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135555567" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135555567">Jakob von Raumer (Oct 10 2018 at 17:25)</a>:</h4>
<p>Uhm, and <code>leanpkg build</code> also doesn't eat all of my RAMs <span class="emoji emoji-1f40f" title="ram">:ram:</span></p>

<a name="135555870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135555870" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135555870">Jakob von Raumer (Oct 10 2018 at 17:30)</a>:</h4>
<p>But unfortunately it doesn't change the fact that vscode checks everything at startup, even after a successful <code>leanpkg build</code>...</p>

<a name="135555902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135555902" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135555902">Johan Commelin (Oct 10 2018 at 17:31)</a>:</h4>
<p>Are you using <code>elan</code>? Did you run <code>leanpkg build</code> in the root of your project, or in a subdir?</p>

<a name="135556008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135556008" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135556008">Jakob von Raumer (Oct 10 2018 at 17:33)</a>:</h4>
<p>In the root dir... What is <code>elan</code>?</p>

<a name="135556127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135556127" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135556127">Johan Commelin (Oct 10 2018 at 17:35)</a>:</h4>
<p>Ok, you are not using <code>elan</code>.</p>

<a name="135556135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135556135" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135556135">Johan Commelin (Oct 10 2018 at 17:35)</a>:</h4>
<p>Kevin wrote this page today: <a href="https://xenaproject.wordpress.com/installing-lean-and-mathlib/" target="_blank" title="https://xenaproject.wordpress.com/installing-lean-and-mathlib/">https://xenaproject.wordpress.com/installing-lean-and-mathlib/</a></p>

<a name="135556149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135556149" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135556149">Johan Commelin (Oct 10 2018 at 17:35)</a>:</h4>
<p>Jakob, how did you install lean and mathlib?</p>

<a name="135556619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135556619" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135556619">Jakob von Raumer (Oct 10 2018 at 17:45)</a>:</h4>
<p>Lean: Using the sources</p>

<a name="135556643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135556643" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135556643">Jakob von Raumer (Oct 10 2018 at 17:45)</a>:</h4>
<p>Mathlib: Not sure if I have it at all... but hott3 doesn't depend on it, does it?</p>

<a name="135556718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135556718" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135556718">Jakob von Raumer (Oct 10 2018 at 17:46)</a>:</h4>
<p>Oh, there's a global installation of mathlib at <code>~/.lean/_target/deps</code></p>

<a name="135557237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135557237" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135557237">Johan Commelin (Oct 10 2018 at 17:54)</a>:</h4>
<p>Hmmm... I don't really know enough to help you here.</p>

<a name="135557629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135557629" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135557629">Rob Lewis (Oct 10 2018 at 18:00)</a>:</h4>
<p>You have fresh .olean files in your Lean root directory, right? What exactly are you opening in VS Code?</p>

<a name="135559479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135559479" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135559479">Jakob von Raumer (Oct 10 2018 at 18:31)</a>:</h4>
<p>What's my lean root directory? I'm opening the folder of a project of mine in VS, which references <code>hott3</code> in its <code>.toml</code></p>

<a name="135560271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135560271" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135560271">Rob Lewis (Oct 10 2018 at 18:44)</a>:</h4>
<p>Wherever you built the executable. If the executable lies in <code>lean/bin/</code>, then you should also have <code>lean/library/</code> with the core lib. The <code>.lean</code> files there should have fresh <code>.olean</code> files. In your project folder, do you have <code>_target/deps/hott3</code>? Are there <code>olean</code> files in there?</p>

<a name="135560283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135560283" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135560283">Rob Lewis (Oct 10 2018 at 18:44)</a>:</h4>
<p>And are there compilation errors when you run <code>leanpkg build</code>?</p>

<a name="135561866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135561866" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135561866">Jakob von Raumer (Oct 10 2018 at 19:09)</a>:</h4>
<p>Yes there's <code>.olean</code> files in <code>_target/deps/hott3</code> and not so fresh ones in <code>lean/library</code>... <code>leanpkg buid</code> goes through with warning but no errors.</p>

<a name="135562001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135562001" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135562001">Jakob von Raumer (Oct 10 2018 at 19:11)</a>:</h4>
<p>Hm, but if I run <code>leanpkg build</code> in <code>~/.lean</code>, I get loads of errors</p>

<a name="135562103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135562103" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135562103">Jakob von Raumer (Oct 10 2018 at 19:12)</a>:</h4>
<p>Oh, that's because stuff is not in <code>LEAN_PATH</code></p>

<a name="135562473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135562473" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135562473">Jakob von Raumer (Oct 10 2018 at 19:18)</a>:</h4>
<p>Hu, but <code>lean --path</code> gives all I would expect...</p>

<a name="135563098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135563098" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135563098">Jakob von Raumer (Oct 10 2018 at 19:29)</a>:</h4>
<p>Should <code>leanpkg build</code> build all the deps or just the files needed?</p>

<a name="135563180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135563180" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135563180">Patrick Massot (Oct 10 2018 at 19:30)</a>:</h4>
<p>only needed</p>

<a name="135563290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135563290" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135563290">Jakob von Raumer (Oct 10 2018 at 19:32)</a>:</h4>
<p>Thanks.</p>

<a name="135563297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135563297" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135563297">Jakob von Raumer (Oct 10 2018 at 19:33)</a>:</h4>
<p>And should it build files that haven't changed since the last build?</p>

<a name="135563570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135563570" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135563570">Jakob von Raumer (Oct 10 2018 at 19:39)</a>:</h4>
<p>If there's only deps and no actual content in <code>~/.lean</code>, how come <code>leanpkg build</code> does anything at all, if I execute it there? <span class="emoji emoji-1f615" title="confused">:confused:</span></p>

<a name="135564693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135564693" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135564693">Gabriel Ebner (Oct 10 2018 at 20:00)</a>:</h4>
<p>Forget about <code>~/.lean</code>, it's independent and not used in this case (check <code>lean -p</code>, if it doesn't appear you don't need to worry about it).<br>
The easiest way to ensure all olean files are built is to run <code>lean --make</code> in the project folder.<br>
(You should also open the project folder in vscode (not a subfolder or superfolder), but I don't think that's the problem here.)</p>

<a name="135565841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135565841" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135565841">Jakob von Raumer (Oct 10 2018 at 20:20)</a>:</h4>
<p>Now it works <span class="emoji emoji-1f937" title="shrug">:shrug:</span> Not sure what was wrong. I did a rebuild of lean itself</p>

<a name="135565898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135565898" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135565898">Patrick Massot (Oct 10 2018 at 20:21)</a>:</h4>
<p>Why do you build Lean?</p>

<a name="135565994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135565994" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135565994">Jakob von Raumer (Oct 10 2018 at 20:23)</a>:</h4>
<p>I noticed it's been a while since I last built it</p>

<a name="135566068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135566068" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135566068">Patrick Massot (Oct 10 2018 at 20:25)</a>:</h4>
<p>Why building it at all? What's wrong with the distributed binaries? Are you modifying Lean?</p>

<a name="135566172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135566172" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135566172">Jakob von Raumer (Oct 10 2018 at 20:27)</a>:</h4>
<p>I used to,  ages ago. Before most of the library was moved to <code>mathlib</code>... I guess I could as well use the binaries now.</p>

<a name="135571392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/checking%20imports/near/135571392" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/51083checkingimports.html#135571392">Scott Morrison (Oct 10 2018 at 22:08)</a>:</h4>
<p>Yeah, while Lean itself is stable at the moment, all the instructions people are giving assume you're using a binary (ideally provided by elan). <code>lean --make</code> in the <code>library/</code> directory of a built-from-sources copy of Lean can help with the issue you were experiencing.</p>


{% endraw %}
