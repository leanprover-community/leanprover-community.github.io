---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/02074exprpis.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/02074exprpis.html">expr.pis</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="123711391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expr.pis/near/123711391" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/02074exprpis.html#123711391">Jakob von Raumer (Mar 14 2018 at 17:04)</a>:</h4>
<p>Why doesn't <code>#reduce expr.pis [expr.local_const  ` A `A binder_info.default `(Sort 1)] `(Sort 1)</code>terminate?</p>

<a name="123711636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expr.pis/near/123711636" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/02074exprpis.html#123711636">Kevin Buzzard (Mar 14 2018 at 17:09)</a>:</h4>
<p>In an ideal world you would go to the set_option docs and look at the section "how do I track down an excessive memory consumption error?"</p>

<a name="123711953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expr.pis/near/123711953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/02074exprpis.html#123711953">Gabriel Ebner (Mar 14 2018 at 17:16)</a>:</h4>
<p><span class="user-mention" data-user-id="110789">@Jakob von Raumer</span> You should use <code>#eval</code> since <code>expr.pis</code> is meta.</p>

<a name="123712203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expr.pis/near/123712203" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/02074exprpis.html#123712203">Gabriel Ebner (Mar 14 2018 at 17:21)</a>:</h4>
<p>And I think the following should explain why kernel reduction fails on this example:</p>
<div class="codehilite"><pre><span></span><span class="kn">set_option</span> <span class="n">pp</span><span class="bp">.</span><span class="n">all</span> <span class="n">true</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">raw</span> <span class="bp">`</span><span class="n">A</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">name.mk_string</span>
<span class="cm">  (string.str string.empty</span>
<span class="cm">     (char.of_nat</span>
<span class="cm">        (@bit1.{0} nat nat.has_one nat.has_add</span>
<span class="cm">           (@bit0.{0} nat nat.has_add</span>
<span class="cm">              (@bit0.{0} nat nat.has_add</span>
<span class="cm">                 (@bit0.{0} nat nat.has_add</span>
<span class="cm">                    (@bit0.{0} nat nat.has_add (@bit0.{0} nat nat.has_add (@has_one.one.{0} nat nat.has_one)))))))))</span>
<span class="cm">  name.anonymous</span>
<span class="cm">-/</span>
</pre></div>

<a name="123712256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expr.pis/near/123712256" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/02074exprpis.html#123712256">Gabriel Ebner (Mar 14 2018 at 17:22)</a>:</h4>
<p>(I just tried all subterms of the example, and already <code>#reduce `A</code> fails.)</p>

<a name="123712261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expr.pis/near/123712261" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/02074exprpis.html#123712261">Jakob von Raumer (Mar 14 2018 at 17:22)</a>:</h4>
<p>Thanks :)</p>

<a name="123712357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expr.pis/near/123712357" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/02074exprpis.html#123712357">Jakob von Raumer (Mar 14 2018 at 17:24)</a>:</h4>
<p>But for <code>#eval</code> I'm getting a "result type does not have an instance of type class 'has_repr', dumping internal representation"?</p>

<a name="123712411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expr.pis/near/123712411" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/02074exprpis.html#123712411">Gabriel Ebner (Mar 14 2018 at 17:25)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">meta</span> <span class="kn">instance</span><span class="o">:</span> <span class="n">has_repr</span> <span class="n">expr</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">expr</span><span class="bp">.</span><span class="n">to_string</span><span class="bp">⟩</span>
</pre></div>


<p><span class="emoji emoji-1f604" title="smile">:smile:</span> I'm not sure if Leo would like a PR though...</p>


{% endraw %}

{% include archive_update.html %}