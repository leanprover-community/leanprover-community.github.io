---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/60832listprod.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html">list.prod</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="128334739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128334739" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html#128334739">Kenny Lau (Jun 19 2018 at 23:30)</a>:</h4>
<p>Was there any point in time where <code>list.prod [t]</code> was definitionally equivalent to <code>t * 1</code>?</p>

<a name="128335761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128335761" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html#128335761">Kenny Lau (Jun 19 2018 at 23:57)</a>:</h4>
<p>and was there any point in time where <code>list.prod (x :: L) = x * list.prod L</code> was <code>rfl</code>?</p>

<a name="128335831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128335831" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html#128335831">Simon Hudon (Jun 19 2018 at 23:59)</a>:</h4>
<p>I think not. The foldl implementation is faster and Leo has been pretty aggressive with optimization from the start</p>

<a name="128335838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128335838" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html#128335838">Kenny Lau (Jun 19 2018 at 23:59)</a>:</h4>
<p>interesting. my category repo seems to answer yes to my questions</p>

<a name="128335887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128335887" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html#128335887">Kenny Lau (Jun 20 2018 at 00:00)</a>:</h4>
<p>i.e. a code worked some time ago, and now it doesn't</p>

<a name="128335915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128335915" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html#128335915">Simon Hudon (Jun 20 2018 at 00:00)</a>:</h4>
<p>You can have an even clearer answer and use <code>git blame</code> on the definition of <code>list.product</code></p>

<a name="128335924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128335924" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html#128335924">Kenny Lau (Jun 20 2018 at 00:01)</a>:</h4>
<p>how do I do that?</p>

<a name="128335941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128335941" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html#128335941">Simon Hudon (Jun 20 2018 at 00:01)</a>:</h4>
<p>Do you use emacs and magit?</p>

<a name="128335996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128335996" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html#128335996">Kenny Lau (Jun 20 2018 at 00:02)</a>:</h4>
<p>eh... not really</p>

<a name="128336002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128336002" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html#128336002">Simon Hudon (Jun 20 2018 at 00:02)</a>:</h4>
<p>You can get the instructions on using <code>git blame</code> by typing <code>man git-blame</code> in a terminal</p>

<a name="128347985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128347985" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html#128347985">Johan Commelin (Jun 20 2018 at 06:31)</a>:</h4>
<p>Alternatively, you go to GitHub, and lookup the relevant line: <a href="https://github.com/leanprover/mathlib/blob/e1f795d0d929fa6b5458a04bd6bb5889e503b0bf/data/list/basic.lean#L1054" target="_blank" title="https://github.com/leanprover/mathlib/blob/e1f795d0d929fa6b5458a04bd6bb5889e503b0bf/data/list/basic.lean#L1054">https://github.com/leanprover/mathlib/blob/e1f795d0d929fa6b5458a04bd6bb5889e503b0bf/data/list/basic.lean#L1054</a><br>
Then you click on the <code>...</code> to the left of that line, and choose <code>git blame</code>. That gives you <a href="https://github.com/leanprover/mathlib/blob/e1f795d0d929fa6b5458a04bd6bb5889e503b0bf/data/list/basic.lean#L1054" target="_blank" title="https://github.com/leanprover/mathlib/blob/e1f795d0d929fa6b5458a04bd6bb5889e503b0bf/data/list/basic.lean#L1054">https://github.com/leanprover/mathlib/blob/e1f795d0d929fa6b5458a04bd6bb5889e503b0bf/data/list/basic.lean#L1054</a></p>

<a name="128348026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128348026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html#128348026">Johan Commelin (Jun 20 2018 at 06:32)</a>:</h4>
<p>But I don't see an easy option to walk through the history of that line. On the command line you <em>can</em> do that, with <code>git log</code> and some options. See also <a href="https://flummox-engineering.blogspot.com/2016/05/view-specific-lines-of-source-code-in-git-history.html" target="_blank" title="https://flummox-engineering.blogspot.com/2016/05/view-specific-lines-of-source-code-in-git-history.html">https://flummox-engineering.blogspot.com/2016/05/view-specific-lines-of-source-code-in-git-history.html</a></p>

<a name="128362377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128362377" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html#128362377">Johannes HÃ¶lzl (Jun 20 2018 at 13:24)</a>:</h4>
<p>I traced it back, it was always <code>foldl</code>. I ported the definition from Lean2's library. I think we should change it to <code>foldr</code> then we get the expected equalities.</p>

<a name="128362751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128362751" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html#128362751">Simon Hudon (Jun 20 2018 at 13:35)</a>:</h4>
<p>Is there a way to use <code>foldr</code> as the definition but run <code>foldl</code> implementation in the VM?</p>

<a name="128362770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128362770" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html#128362770">Gabriel Ebner (Jun 20 2018 at 13:35)</a>:</h4>
<p>If you want to patch Lean, then yes.</p>

<a name="128362903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128362903" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html#128362903">Simon Hudon (Jun 20 2018 at 13:38)</a>:</h4>
<p>That sounds less trivial than the "yes" suggests <span class="emoji emoji-1f61d" title="stuck out tongue closed eyes">:stuck_out_tongue_closed_eyes:</span></p>

<a name="128364747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128364747" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html#128364747">Reid Barton (Jun 20 2018 at 14:18)</a>:</h4>
<p><code>{-# RULES #-}</code>with a proof obligation would be neat...</p>

<a name="128364931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128364931" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html#128364931">Simon Hudon (Jun 20 2018 at 14:22)</a>:</h4>
<p>you could probably write it <code>@[rule]</code> before a lemma</p>

<a name="128368155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128368155" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60832listprod.html#128368155">Chris Hughes (Jun 20 2018 at 15:34)</a>:</h4>
<blockquote>
<p>and was there any point in time where <code>list.prod (x :: L) = x * list.prod L</code> was <code>rfl</code>?</p>
</blockquote>
<p>I don't think it was even equal to that with non commutative multiplication, <code>list.prod (x :: L) = list.prod L * x</code>at the moment.</p>


{% endraw %}
