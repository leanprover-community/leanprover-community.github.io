---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/79327finitesumpuzzle.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html">finite sum puzzle</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="124390119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390119" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390119">Kevin Buzzard (Mar 29 2018 at 23:53)</a>:</h4>
<div class="codehilite"><pre><span></span>import tactic.ring

theorem  finset_sum_is_list_sum (f : ℕ → ℕ) (n : ℕ) :
(finset.range n).sum f = ((list.range n).map f).sum :=  sorry
</pre></div>

<a name="124390133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390133" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390133">Kevin Buzzard (Mar 29 2018 at 23:53)</a>:</h4>
<p>I've been thinking a lot about induction today.</p>

<a name="124390183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390183" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390183">Kevin Buzzard (Mar 29 2018 at 23:54)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Is there some super-cute way of doing this already?</p>

<a name="124390201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390201" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390201">Kevin Buzzard (Mar 29 2018 at 23:55)</a>:</h4>
<p>I have been trying to formalise quite an abstract approach to questions like these but for all I know this sort of thing is completely well-known. Note that a mathematician would say this proof was trivial and indeed it would be hard to explain to a mathematician why this needed a proof.</p>

<a name="124390250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390250" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390250">Mario Carneiro (Mar 29 2018 at 23:56)</a>:</h4>
<p>It should be by definition, more or less</p>

<a name="124390252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390252" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390252">Mario Carneiro (Mar 29 2018 at 23:57)</a>:</h4>
<p>does <code>rfl</code> work?</p>

<a name="124390310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390310" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390310">Mario Carneiro (Mar 29 2018 at 23:58)</a>:</h4>
<p>Also, of course that needs a proof, stop thinking that proofs that are simple by induction are trivial enough to not need a proof</p>

<a name="124390311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390311" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390311">Ching-Tsun Chou (Mar 29 2018 at 23:58)</a>:</h4>
<p>Don't you need the commutativity of "+" on natural numbers?</p>

<a name="124390315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390315" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390315">Mario Carneiro (Mar 29 2018 at 23:58)</a>:</h4>
<p>that's on the same lines as saying commutativity of natural numbers is trivial</p>

<a name="124390473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390473" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390473">Mario Carneiro (Mar 30 2018 at 00:03)</a>:</h4>
<p>Ah, it's not quite by definition, because multiset prod is not defined in terms of list prod but instead is defined using foldl. This works:</p>
<div class="codehilite"><pre><span></span>theorem finset_sum_is_list_sum (f : ℕ → ℕ) (n : ℕ) :
  (finset.range n).sum f = ((list.range n).map f).sum :=
multiset.coe_sum _
</pre></div>

<a name="124390533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390533" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390533">Mario Carneiro (Mar 30 2018 at 00:05)</a>:</h4>
<p>Here's a slightly less magical way to write it:</p>
<div class="codehilite"><pre><span></span>theorem finset_sum_is_list_sum (f : ℕ → ℕ) (n : ℕ) :
  (finset.range n).sum f = ((list.range n).map f).sum :=
show ((list.range n).map f : multiset ℕ).sum = ((list.range n).map f).sum, from
multiset.coe_sum _
</pre></div>

<a name="124390583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390583" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390583">Kevin Buzzard (Mar 30 2018 at 00:06)</a>:</h4>
<p><code>f</code> can map to an <code>add_comm_monoid</code></p>

<a name="124390587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390587" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390587">Mario Carneiro (Mar 30 2018 at 00:07)</a>:</h4>
<p>sure</p>

<a name="124390588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390588">Kevin Buzzard (Mar 30 2018 at 00:07)</a>:</h4>
<p>that's what you need, I believe.</p>

<a name="124390594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390594" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390594">Mario Carneiro (Mar 30 2018 at 00:07)</a>:</h4>
<p>the theorem you stated is not maximally general</p>

<a name="124390597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390597" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390597">Kevin Buzzard (Mar 30 2018 at 00:07)</a>:</h4>
<p>So this one seems genuinely easier than Chris' problem?</p>

<a name="124390600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390600" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390600">Mario Carneiro (Mar 30 2018 at 00:08)</a>:</h4>
<p>yes, because finset sum is defined as a multiset sum over the map</p>

<a name="124390837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390837" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390837">Kevin Buzzard (Mar 30 2018 at 00:15)</a>:</h4>
<p>Here's three more trivial statements:</p>

<a name="124390842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390842" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390842">Kevin Buzzard (Mar 30 2018 at 00:15)</a>:</h4>
<div class="codehilite"><pre><span></span>import tactic.ring
universe u
open nat

theorem list_range_map_sum_induction {X : Type u} [has_add X] [has_zero X] {n : ℕ} (f : ℕ → X) :
  ((list.range (succ n)).map f).sum = ((list.range n).map f).sum + f n := sorry

theorem finset_range_sum_induction {R : Type u} [add_comm_monoid R] {f : ℕ → R} {d : ℕ} :
  (finset.range (succ d)).sum f = (finset.range d).sum f + f d := sorry

theorem finset_univ_sum_fin_induction {R : Type u} [add_comm_monoid R] {d : ℕ}
  {f : fin (nat.succ d) → R} :
  finset.univ.sum f =
    finset.univ.sum (λ i : fin d, f ⟨i.val,lt_trans i.is_lt $ nat.lt_succ_self d⟩) -- d or _?
    + f ⟨d,nat.lt_succ_self _⟩ -- is _ or d better style at the end?
  := sorry
</pre></div>

<a name="124390886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390886" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390886">Kevin Buzzard (Mar 30 2018 at 00:16)</a>:</h4>
<p>They all say the same trivial thing in maths</p>

<a name="124390888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390888" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390888">Kevin Buzzard (Mar 30 2018 at 00:16)</a>:</h4>
<p>so I am really interested in the slickest possible proofs in Lean</p>

<a name="124390892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390892">Kevin Buzzard (Mar 30 2018 at 00:17)</a>:</h4>
<p>because I suspect that occasionally my students will want statements like this to just go away</p>

<a name="124390947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390947">Kevin Buzzard (Mar 30 2018 at 00:18)</a>:</h4>
<p>If these get unsorried then we get the following proof of Chris' problem from yesterday:</p>

<a name="124390956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390956" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390956">Kevin Buzzard (Mar 30 2018 at 00:19)</a>:</h4>
<div class="codehilite"><pre><span></span>theorem chris_example (n : ℕ) (f : ℕ → ℕ) (g : fin n → ℕ) (h : ∀ i : fin n, f i.1  = g i) :
(finset.range n).sum f = finset.univ.sum g := begin
induction n with d Hd, refl, -- base case trivial
-- for the inductive step it&#39;s handy to have notation for the restriction of g,
let gres : fin d → ℕ := λ i,g ⟨i.val,lt_trans i.is_lt $ nat.lt_succ_self d⟩,
-- goal now of form &quot;first kind of sum to succ d equals second kind&quot;
rw finset_range_sum_induction,
rw finset_univ_sum_fin_induction,
-- goal now &quot;first sum to d + f d = second sum to d + g d&quot;
rw [(Hd gres (λ i, h ⟨i.val,_⟩))], -- first sum equals second sum
rw h ⟨d,_⟩, -- f d = g d -- so done
end
</pre></div>

<a name="124390957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124390957" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124390957">Kevin Buzzard (Mar 30 2018 at 00:19)</a>:</h4>
<p>with not a <code>pmap</code> in sight</p>

<a name="124391040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391040" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391040">Kevin Buzzard (Mar 30 2018 at 00:21)</a>:</h4>
<p>I would argue that this was a "natural" proof which hides away the abstraction.</p>

<a name="124391103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391103" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391103">Kevin Buzzard (Mar 30 2018 at 00:23)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> Here's what another proof of your fin n question might look like.</p>

<a name="124391106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391106">Mario Carneiro (Mar 30 2018 at 00:23)</a>:</h4>
<p>By the way, here's a(nother) proof of chris's theorem:</p>
<div class="codehilite"><pre><span></span>example (n : ℕ) (f : ℕ → ℕ) (g : fin n → ℕ) (h : ∀ i : fin n, f i.1 = g i) :
  (finset.range n).sum f = finset.univ.sum g :=
show ((list.range n).map f : multiset ℕ).sum =
   (((list.range n).pmap fin.mk _).map g : multiset ℕ).sum,
by rw [multiset.coe_sum, multiset.coe_sum, ← (funext h : _ = g),
       list.map_pmap, ← list.pmap_eq_map]
</pre></div>

<a name="124391190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391190" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391190">Kevin Buzzard (Mar 30 2018 at 00:26)</a>:</h4>
<p>What I don't like about your proofs is that they seem (to me) to involve knowing about some internal implementation of things. My proof is implementation-free. The library maintainer just creates those <code>blah_sum_induction</code> proofs (the three things sorried above) , and then the end user can construct proofs of Chris' theorem without having to worry about any other implementation.</p>

<a name="124391225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391225" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391225">Kevin Buzzard (Mar 30 2018 at 00:26)</a>:</h4>
<p>Each of the induction laws gives rise to an abstraction which looks like this:</p>

<a name="124391233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391233" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391233">Mario Carneiro (Mar 30 2018 at 00:26)</a>:</h4>
<p>I agree, chris has found a hole in the mathlib coverage here</p>

<a name="124391244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391244" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391244">Mario Carneiro (Mar 30 2018 at 00:27)</a>:</h4>
<p>Your second theorem is provable by <code>simp</code>, but <code>list.range</code> doesn't break up nicely because the numbers are listed in increasing order</p>

<a name="124391303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391303" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391303">Mario Carneiro (Mar 30 2018 at 00:29)</a>:</h4>
<p>I'm not a big fan of your statement of <code>finset_univ_sum_fin_induction</code>, it's all too complicated in the theorem statement</p>

<a name="124391308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391308">Kevin Buzzard (Mar 30 2018 at 00:29)</a>:</h4>
<div class="codehilite"><pre><span></span>@[reducible] definition sum_map_range {R : Type u} [add_comm_monoid R] (addend : ℕ → R) : ℕ → R
| zero := (0 : R)
| (succ n) := sum_map_range n + addend n

theorem list_range_map_sum_abstraction {R : Type} [add_comm_monoid R]
  (f : ℕ → R) (n : ℕ) : ((list.range n).map f).sum = sum_map_range f n := sorry

theorem finset_range_sum_abstraction {R : Type u} [add_comm_monoid R] (f : ℕ → R) (n : ℕ) :
  (finset.range n).sum f = sum_map_range f n := sorry

theorem finset_univ_sum_fin_abstraction {R : Type u} [add_comm_monoid R] (f : ℕ → R) (n : ℕ) :
  finset.univ.sum (λ i : fin n, f(i.val)) = sum_map_range f n := sorry
</pre></div>

<a name="124391312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391312" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391312">Kevin Buzzard (Mar 30 2018 at 00:29)</a>:</h4>
<p>yes, the fin one stinks.</p>

<a name="124391365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391365" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391365">Kevin Buzzard (Mar 30 2018 at 00:30)</a>:</h4>
<p>If you use lists or finsets then f is a function on N, but to do Chris' problem you had to use a function on fin n</p>

<a name="124391367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391367" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391367">Mario Carneiro (Mar 30 2018 at 00:30)</a>:</h4>
<p>I think there are functions for raising <code>fin n</code> to <code>fin (n+1)</code>. Alternatively, you could use <code>fin2</code>, which has a natural inductive construction instead of being a subtype of nat</p>

<a name="124391379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391379" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391379">Mario Carneiro (Mar 30 2018 at 00:31)</a>:</h4>
<p><code>fin2</code> is not really developed much, but it is defined in <code>dioph.lean</code></p>

<a name="124391432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391432" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391432">Kevin Buzzard (Mar 30 2018 at 00:32)</a>:</h4>
<p>I specifically wanted to design functions which gave me the biggest chance of being covered for all variants of the following question:"this Lean statement is trivially true in maths because it says <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo>(</mo><mn>0</mn><mo>)</mo><mo>+</mo><mi>f</mi><mo>(</mo><mn>1</mn><mo>)</mo><mo>+</mo><mo>⋯</mo><mo>+</mo><mi>f</mi><mo>(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>)</mo><mo>=</mo><mi>f</mi><mo>(</mo><mn>0</mn><mo>)</mo><mo>+</mo><mi>f</mi><mo>(</mo><mn>1</mn><mo>)</mo><mo>+</mo><mo>⋯</mo><mo>+</mo><mi>f</mi><mo>(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">f(0)+f(1)+\cdots+f(n-1)=f(0)+f(1)+\cdots+f(n-1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathrm">0</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mbin">+</span><span class="minner">⋯</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathrm">0</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mbin">+</span><span class="minner">⋯</span><span class="mbin">+</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span>, so how do you prove it in Lean?"</p>

<a name="124391442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391442" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391442">Kevin Buzzard (Mar 30 2018 at 00:33)</a>:</h4>
<p>I feel like I have convinced myself that for any way of representing the set <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>}</mo></mrow><annotation encoding="application/x-tex">\{0,1,...,n-1\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mopen">{</span><span class="mord mathrm">0</span><span class="mpunct">,</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mord mathrm">.</span><span class="mpunct">,</span><span class="mord mathit">n</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">}</span></span></span></span> in Lean</p>

<a name="124391447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391447" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391447">Kevin Buzzard (Mar 30 2018 at 00:33)</a>:</h4>
<p>there is an induction principle and an abstraction principle.</p>

<a name="124391448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391448" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391448">Kevin Buzzard (Mar 30 2018 at 00:33)</a>:</h4>
<p>Do I have the right names for these things?</p>

<a name="124391500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391500" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391500">Kevin Buzzard (Mar 30 2018 at 00:35)</a>:</h4>
<p>As you can see, the examples I have attempted to work out are <code>list.range n</code>, <code>fin n</code> and <code>finset.range n</code></p>

<a name="124391502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391502" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391502">Kevin Buzzard (Mar 30 2018 at 00:36)</a>:</h4>
<p>Sounds like I need to do <code>fin2 n</code></p>

<a name="124391541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391541" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391541">Kevin Buzzard (Mar 30 2018 at 00:36)</a>:</h4>
<p>I should say that I have not proved the induction hypotheses in all cases yet.</p>

<a name="124391544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391544" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391544">Mario Carneiro (Mar 30 2018 at 00:36)</a>:</h4>
<p>It's mostly used for technical reasons; you can also define recursion principles on <code>fin n</code> with the same structure as <code>fin2</code></p>

<a name="124391552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391552" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391552">Mario Carneiro (Mar 30 2018 at 00:37)</a>:</h4>
<p>but I think that <code>fz</code> and <code>fs</code> are the right way to think about induction on <code>fin n</code></p>

<a name="124391555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391555" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391555">Kevin Buzzard (Mar 30 2018 at 00:37)</a>:</h4>
<p>But as a mathematician I would find a proof of these sorts of thing rather distasteful (they're all "obvious by induction")</p>

<a name="124391597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391597" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391597">Kevin Buzzard (Mar 30 2018 at 00:38)</a>:</h4>
<p>so I feel like they should be hidden from view.</p>

<a name="124391601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391601" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391601">Mario Carneiro (Mar 30 2018 at 00:38)</a>:</h4>
<p>It's always messy when the function is only partially defined, so that you can't even talk about it out of domain</p>

<a name="124391603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391603">Mario Carneiro (Mar 30 2018 at 00:38)</a>:</h4>
<p>that's what makes <code>list.pmap</code> necessary, and also what makes it a pain to work with</p>

<a name="124391610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391610" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391610">Mario Carneiro (Mar 30 2018 at 00:39)</a>:</h4>
<p>What makes Chris's problem hard is the usage of <code>g : fin n -&gt; N</code></p>

<a name="124391614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391614" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391614">Mario Carneiro (Mar 30 2018 at 00:39)</a>:</h4>
<p>same for your induction principle, <code>fin (succ n) -&gt; N</code> is even worse</p>

<a name="124391671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391671" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391671">Mario Carneiro (Mar 30 2018 at 00:40)</a>:</h4>
<p>I get the sense that you want to put everything in the form <code>map_sum_range</code> of something, but that doesn't work for partial functions</p>

<a name="124391812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391812" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391812">Kevin Buzzard (Mar 30 2018 at 00:45)</a>:</h4>
<p>Here's a 4th one</p>

<a name="124391815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391815" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391815">Kevin Buzzard (Mar 30 2018 at 00:45)</a>:</h4>
<div class="codehilite"><pre><span></span>theorem multiset_sum_map_range_induction {X : Type u} [add_comm_monoid X] {n : ℕ} (f : ℕ → X) :
  ((multiset.range (succ n)).map f).sum =
   ((multiset.range n).map f).sum + f n := sorry
</pre></div>

<a name="124391855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391855" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391855">Kevin Buzzard (Mar 30 2018 at 00:46)</a>:</h4>
<p>Corresponding to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>}</mo></mrow><annotation encoding="application/x-tex">\{0,1,\ldots,n-1\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base"><span class="mopen">{</span><span class="mord mathrm">0</span><span class="mpunct">,</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="minner">…</span><span class="mpunct">,</span><span class="mord mathit">n</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">}</span></span></span></span> = <code>multiset.range n</code></p>

<a name="124391859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391859" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391859">Kevin Buzzard (Mar 30 2018 at 00:46)</a>:</h4>
<p>Each model gives you a new induction principle</p>

<a name="124391867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391867" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391867">Kevin Buzzard (Mar 30 2018 at 00:47)</a>:</h4>
<p>which I think mathlib could offer with a standard name</p>

<a name="124391914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391914" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391914">Kevin Buzzard (Mar 30 2018 at 00:48)</a>:</h4>
<p>There are only a finite number of ways that a mathematician can say this trivial thing, and it would be nice if we could just pull a proof out of a hat for each one.</p>

<a name="124391923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391923" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391923">Kevin Buzzard (Mar 30 2018 at 00:48)</a>:</h4>
<p>Could I even write a tactic which proves all these things? Just in some stupid way -- it just tries all the proofs and chooses the one that works.</p>

<a name="124391932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391932" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391932">Kevin Buzzard (Mar 30 2018 at 00:49)</a>:</h4>
<p>aah, <code>simp</code> works on that one.</p>

<a name="124391981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391981" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391981">Mario Carneiro (Mar 30 2018 at 00:50)</a>:</h4>
<p>I support the definition of your <code>map_sum_range</code>, which I and I think chris called <code>series</code>; it's on my to do list</p>

<a name="124391984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391984" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391984">Mario Carneiro (Mar 30 2018 at 00:50)</a>:</h4>
<p>That would make your <code>multiset_sum_map_range_induction</code> theorem, which I might otherwise call <code>multiset.range_succ_map_sum</code>, just <code>series_succ</code></p>

<a name="124391992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124391992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124391992">Mario Carneiro (Mar 30 2018 at 00:51)</a>:</h4>
<p>It's not called <code>induction</code> because it's not an induction principle</p>

<a name="124392042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124392042" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124392042">Mario Carneiro (Mar 30 2018 at 00:53)</a>:</h4>
<p>As I've said, I think it will alleviate many of the issues you are having with these sums. If you urgently need it, why not try writing it yourself? Don't worry about connecting it to <code>finset.range</code>, just prove everything directly by induction. Then we can relate it to the other ways to talk about finite sums</p>

<a name="124392084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124392084" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124392084">Kevin Buzzard (Mar 30 2018 at 00:54)</a>:</h4>
<p><code>simp</code> does the multiset and finset variants, but not the list variant.</p>

<a name="124392096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124392096" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124392096">Kevin Buzzard (Mar 30 2018 at 00:55)</a>:</h4>
<p>Can you tell me exactly what you are suggesting I prove? I am interested in getting this done ASAP and I have some time now, term finished.</p>

<a name="124392135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124392135" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124392135">Kevin Buzzard (Mar 30 2018 at 00:56)</a>:</h4>
<p>I think your sketches above should enable me to prove everything</p>

<a name="124392154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124392154" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124392154">Kevin Buzzard (Mar 30 2018 at 00:57)</a>:</h4>
<p>Sorry about the induction name. I thought carefully about the abstract syntax of the names but I seem to have used the wrong term.</p>

<a name="124392315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124392315" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124392315">Kevin Buzzard (Mar 30 2018 at 01:03)</a>:</h4>
<p>I love <code>dioph.lean</code></p>

<a name="124392316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124392316" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124392316">Kevin Buzzard (Mar 30 2018 at 01:03)</a>:</h4>
<div class="codehilite"><pre><span></span>(D∃4 $ D∃5 $ D∃6 $ D∃7 $ D∃8 $
D&amp;7 D* D&amp;7 D- (D&amp;5 D* D&amp;5 D- D.1) D* D&amp;8 D* D&amp;8 D= D.1 D∧
D&amp;4 D* D&amp;4 D- (D&amp;5 D* D&amp;5 D- D.1) D* D&amp;3 D* D&amp;3 D= D.1 D∧
D&amp;2 D* D&amp;2 D- (D&amp;0 D* D&amp;0 D- D.1) D* D&amp;1 D* D&amp;1 D= D.1 D∧
</pre></div>

<a name="124392318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124392318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124392318">Kevin Buzzard (Mar 30 2018 at 01:03)</a>:</h4>
<p>who could fail to love that bit</p>

<a name="124392359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124392359" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124392359">Kevin Buzzard (Mar 30 2018 at 01:04)</a>:</h4>
<p>whatever is going on in that file</p>

<a name="124392429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124392429" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124392429">Mario Carneiro (Mar 30 2018 at 01:07)</a>:</h4>
<p>That's the closest lean comes to a domain specific language right now</p>

<a name="124392482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124392482" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124392482">Kevin Buzzard (Mar 30 2018 at 01:09)</a>:</h4>
<p>So there is <code>vector</code> and <code>vector3</code>. Is there a <code>vector2</code>? I can't find it. (<code>fin2</code> is used to build <code>vector3</code>)</p>

<a name="124392530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124392530" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124392530">Kevin Buzzard (Mar 30 2018 at 01:10)</a>:</h4>
<p>I have a Masters student working on Matiesevich's theorem for their project, so I showed them <code>dioph.lean</code>. They know no Lean. I'm not sure they found it very helpful.</p>

<a name="124392536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124392536" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124392536">Mario Carneiro (Mar 30 2018 at 01:11)</a>:</h4>
<p>There was once a vector2, but I deleted it because it wasn't needed. <code>vector2</code> was inductively defined by</p>
<div class="codehilite"><pre><span></span>inductive vector2 (A : Type u) : nat -&gt; Type u
| nil : vector2 0
| cons (n) : A -&gt; vector2 n -&gt; vector2 (succ n)
</pre></div>

<a name="124392542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124392542" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124392542">Mario Carneiro (Mar 30 2018 at 01:12)</a>:</h4>
<p>From the names, you can guess that <code>vector</code>, <code>vector2</code> and <code>vector3</code> are all isomorphic</p>

<a name="124392596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124392596" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124392596">Mario Carneiro (Mar 30 2018 at 01:13)</a>:</h4>
<p>I think you can find it in the file history of <code>dioph.lean</code></p>

<a name="124393725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124393725" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124393725">Kevin Buzzard (Mar 30 2018 at 01:55)</a>:</h4>
<p>I can't believe it. I feel like I have learnt something new about induction today, and I have been teaching it for 20 years.</p>

<a name="124393765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124393765" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124393765">Kenny Lau (Mar 30 2018 at 01:56)</a>:</h4>
<p>what is it?</p>

<a name="124393769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124393769" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124393769">Kenny Lau (Mar 30 2018 at 01:56)</a>:</h4>
<p>well there's always more to learn :P</p>

<a name="124393775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124393775" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124393775">Kevin Buzzard (Mar 30 2018 at 01:56)</a>:</h4>
<p>yes but I'm usually trying to look nearer the top</p>

<a name="124393844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124393844" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124393844">Kevin Buzzard (Mar 30 2018 at 01:59)</a>:</h4>
<p>There is one abstract principle of induction <code>g := lam n, sum_to_n f</code></p>

<a name="124393898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124393898" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124393898">Kevin Buzzard (Mar 30 2018 at 02:00)</a>:</h4>
<p>which you can prove assuming a hypothesis of the form <code>\forall n, g (succ n) = g n + f n</code></p>

<a name="124393911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124393911" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124393911">Kevin Buzzard (Mar 30 2018 at 02:01)</a>:</h4>
<p>but the problem is that there are several ways to encode <code>sum_to_n</code>in Lean</p>

<a name="124393915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124393915" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124393915">Kevin Buzzard (Mar 30 2018 at 02:01)</a>:</h4>
<p>e.g. the "pure" way via an inductive type</p>

<a name="124393963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124393963" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124393963">Kevin Buzzard (Mar 30 2018 at 02:02)</a>:</h4>
<p>or ways which create an auxiliary type along the way, like <code>sum_to_n f = ((list.range n).map f).sum</code> which at some point builds a list and then sums over it</p>

<a name="124394065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124394065" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124394065">Kevin Buzzard (Mar 30 2018 at 02:06)</a>:</h4>
<p>and for each of these design decisions about how you're going to sum this series (e.g. a design decision that some other program has forced upon you) you are given a definition of <code>sum_to_n : (ℕ → R) → (ℕ → R)</code></p>

<a name="124394071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124394071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124394071">Kevin Buzzard (Mar 30 2018 at 02:07)</a>:</h4>
<p>(e.g. <code>λ f, λ n ((list.range n).map f).sum</code> )</p>

<a name="124394119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124394119" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124394119">Kevin Buzzard (Mar 30 2018 at 02:08)</a>:</h4>
<p>it's now your job to prove <code>∀ n, sum_to_n (succ n) = sum_to_n n + f n</code></p>

<a name="124394220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124394220" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124394220">Kevin Buzzard (Mar 30 2018 at 02:12)</a>:</h4>
<p>And that's quite annoying because list doesn't deconstruct like that.</p>

<a name="124394520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124394520" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124394520">Kenny Lau (Mar 30 2018 at 02:24)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> do you have a list of goals?</p>

<a name="124394527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124394527" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124394527">Kevin Buzzard (Mar 30 2018 at 02:25)</a>:</h4>
<p>I'm writing a blog post about it. This has been a most enjoyable day.</p>

<a name="124394727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124394727" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124394727">Kenny Lau (Mar 30 2018 at 02:34)</a>:</h4>
<blockquote>
<p>it's now your job to prove <code>∀ n, sum_to_n (succ n) = sum_to_n n + f n</code></p>
</blockquote>
<p>done</p>

<a name="124394764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124394764" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124394764">Kenny Lau (Mar 30 2018 at 02:34)</a>:</h4>
<div class="codehilite"><pre><span></span>theorem sum_to_n.succ : sum_to_n (n+1) = sum_to_n n + f n :=
begin
  dsimp [sum_to_n],
  rw [list.range_concat],
  rw [list.map_append],
  rw [list.sum_append],
  rw [list.map_singleton],
  rw [list.sum_cons],
  rw [list.sum_nil],
  rw [add_zero]
end
</pre></div>

<a name="124394965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124394965" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124394965">Kenny Lau (Mar 30 2018 at 02:42)</a>:</h4>
<p>version 2</p>

<a name="124394966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124394966" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124394966">Kenny Lau (Mar 30 2018 at 02:42)</a>:</h4>
<div class="codehilite"><pre><span></span>theorem sum_to_n.succ : sum_to_n (n+1) = sum_to_n n + f n :=
by simp [sum_to_n, list.range_concat]
</pre></div>

<a name="124399570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124399570" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124399570">Kevin Buzzard (Mar 30 2018 at 05:24)</a>:</h4>
<p><a href="https://wordpress.com/post/xenaproject.wordpress.com/1344" target="_blank" title="https://wordpress.com/post/xenaproject.wordpress.com/1344">https://wordpress.com/post/xenaproject.wordpress.com/1344</a></p>

<a name="124399701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124399701" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124399701">Kenny Lau (Mar 30 2018 at 05:29)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> did you sleep?</p>

<a name="124399746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124399746" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124399746">Kevin Buzzard (Mar 30 2018 at 05:30)</a>:</h4>
<p>Meh <a href="https://xenaproject.wordpress.com/2018/03/30/proofs-by-induction/" target="_blank" title="https://xenaproject.wordpress.com/2018/03/30/proofs-by-induction/">https://xenaproject.wordpress.com/2018/03/30/proofs-by-induction/</a> is better</p>

<a name="124399747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124399747" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124399747">Kevin Buzzard (Mar 30 2018 at 05:30)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> or <span class="user-mention" data-user-id="110064">@Kenny Lau</span> Feel free to leave comments if you have definitions for <code>sum_to_n</code></p>

<a name="124399750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124399750" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124399750">Andrew Ashworth (Mar 30 2018 at 05:30)</a>:</h4>
<blockquote>
<p>but, unfortunately, because I fear that in practice people really might occasionally find themselves in a situation where they need a new kind of proof by induction </p>
</blockquote>
<p>writing new recursion principles is common and expected, from what i've seen out there</p>

<a name="124399807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124399807" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124399807">Kenny Lau (Mar 30 2018 at 05:32)</a>:</h4>
<p>“using the fucking ring tactic”</p>

<a name="124399819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124399819" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124399819">Andrew Ashworth (Mar 30 2018 at 05:34)</a>:</h4>
<p>you can see some of this in mathlib, where new elimination lemmas are defined fairly frequently</p>

<a name="124399859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124399859" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124399859">Andrew Ashworth (Mar 30 2018 at 05:34)</a>:</h4>
<p>if we go back to the nats, strong induction is commonplace yet requires a proof</p>

<a name="124399920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124399920" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124399920">Kevin Buzzard (Mar 30 2018 at 05:37)</a>:</h4>
<p>In lean web editor link, <code>tactic.ring</code> is not available so I had to prove it the old skool way! Thank you <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> for <code>tactic.ring</code>. No, it appears I didn't go to sleep and now the sun is up. Crap. I'm behaving like a kid.</p>

<a name="124399923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124399923" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124399923">Kenny Lau (Mar 30 2018 at 05:38)</a>:</h4>
<p>lol</p>

<a name="124399972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124399972" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124399972">Kenny Lau (Mar 30 2018 at 05:38)</a>:</h4>
<p>i am shocked</p>

<a name="124399975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124399975" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124399975">Kevin Buzzard (Mar 30 2018 at 05:38)</a>:</h4>
<blockquote>
<p>writing new recursion principles is common and expected, from what i've seen out there</p>
</blockquote>
<p>I realised that Chris could solve his problem with good recursion principles.</p>

<a name="124399979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124399979" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124399979">Kevin Buzzard (Mar 30 2018 at 05:39)</a>:</h4>
<p>I don't have to be up at 7am though, because the kids have finished school now.</p>

<a name="124399987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124399987" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124399987">Kenny Lau (Mar 30 2018 at 05:39)</a>:</h4>
<p>so the philosophy is to always write eliminators for the things you create?</p>

<a name="124399988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124399988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124399988">Kevin Buzzard (Mar 30 2018 at 05:39)</a>:</h4>
<p>If I don't get my act together I'll be up at 7am anyway.</p>

<a name="124399992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124399992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124399992">Kevin Buzzard (Mar 30 2018 at 05:39)</a>:</h4>
<p>I guess that might be what I am saying.</p>

<a name="124399993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124399993" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124399993">Andrew Ashworth (Mar 30 2018 at 05:39)</a>:</h4>
<p>also as a matter of style, you could give names to your function variables as opposed to always lambda-ing them</p>

<a name="124399994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124399994" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124399994">Kevin Buzzard (Mar 30 2018 at 05:39)</a>:</h4>
<p>Or some version of this.</p>

<a name="124399995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124399995" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124399995">Kenny Lau (Mar 30 2018 at 05:39)</a>:</h4>
<p>i am still shocked <span class="emoji emoji-1f61b" title="stuck out tongue">:stuck_out_tongue:</span></p>

<a name="124400038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124400038" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124400038">Andrew Ashworth (Mar 30 2018 at 05:40)</a>:</h4>
<p>for example <code>def square : ℕ → ℕ := λ i, i ^ 2 </code> could be <code>def square n : nat := n ^ 2</code></p>

<a name="124400039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124400039" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124400039">Kenny Lau (Mar 30 2018 at 05:40)</a>:</h4>
<p>fin has no eliminator though</p>

<a name="124400040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124400040" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124400040">Kenny Lau (Mar 30 2018 at 05:40)</a>:</h4>
<p>hence the problem</p>

<a name="124400041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124400041" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124400041">Kevin Buzzard (Mar 30 2018 at 05:40)</a>:</h4>
<p>yes, my approach with fin was not much fun.</p>

<a name="124400042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124400042" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124400042">Kevin Buzzard (Mar 30 2018 at 05:41)</a>:</h4>
<p>But I need to sleep.</p>

<a name="124400045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124400045" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124400045">Kenny Lau (Mar 30 2018 at 05:41)</a>:</h4>
<p><span class="user-mention" data-user-id="110025">@Andrew Ashworth</span> I think he decided he does not care about styles</p>

<a name="124400048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124400048" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124400048">Kevin Buzzard (Mar 30 2018 at 05:41)</a>:</h4>
<p>I just wrote it in the way that appealed to me most.</p>

<a name="124400052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124400052" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124400052">Kevin Buzzard (Mar 30 2018 at 05:41)</a>:</h4>
<p>I have also written three solutions to the problems.</p>

<a name="124400053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124400053" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124400053">Andrew Ashworth (Mar 30 2018 at 05:41)</a>:</h4>
<p>when you're a professor, you can write your homework exercises however you like, haha</p>

<a name="124400093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124400093" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124400093">Kevin Buzzard (Mar 30 2018 at 05:42)</a>:</h4>
<p>One of them is just "axiom axiom constant" etc etc, and it's very cool, you can still do the last part :-)</p>

<a name="124400096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124400096" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124400096">Kenny Lau (Mar 30 2018 at 05:42)</a>:</h4>
<p>constant name : false</p>

<a name="124400097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124400097" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124400097">Kenny Lau (Mar 30 2018 at 05:42)</a>:</h4>
<p>theorem RH : sorry := false.elim name</p>

<a name="124400099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124400099" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124400099">Kevin Buzzard (Mar 30 2018 at 05:42)</a>:</h4>
<p>I might be a professor but I am still very much a learner at this game. I'd be happy for any more stylistic comments.</p>

<a name="124400142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124400142" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124400142">Andrew Ashworth (Mar 30 2018 at 05:44)</a>:</h4>
<p>it's only really meaningful in large, complicated definitions</p>

<a name="124400143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124400143" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124400143">Andrew Ashworth (Mar 30 2018 at 05:44)</a>:</h4>
<p>of which square does not count</p>

<a name="124400146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124400146" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124400146">Andrew Ashworth (Mar 30 2018 at 05:44)</a>:</h4>
<p>i will continue to file nitpicking issues if i see them, though</p>

<a name="124400603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124400603" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124400603">Andrew Ashworth (Mar 30 2018 at 06:01)</a>:</h4>
<p>actually later on you give summand a nice name so i take back everything i wrote, haha</p>

<a name="124400647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124400647" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124400647">Kevin Buzzard (Mar 30 2018 at 06:02)</a>:</h4>
<p>In fact my initial draft had an error in which I only spotted when I tried to prove that my genuine summing function was equal the one I defined with constants and axioms</p>

<a name="124407580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finite%20sum%20puzzle/near/124407580" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/79327finitesumpuzzle.html#124407580">Chris Hughes (Mar 30 2018 at 10:08)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I did define sums and sums between nats here. <a href="https://github.com/dorhinj/lean/blob/master/sum_between_nats.lean" target="_blank" title="https://github.com/dorhinj/lean/blob/master/sum_between_nats.lean">https://github.com/dorhinj/lean/blob/master/sum_between_nats.lean</a> The proofs aren't mathlib ready and I don't think series is a particularly good name. I proved various basic properties as well.</p>


{% endraw %}
