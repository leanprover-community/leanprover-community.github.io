---
layout: archive
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/03873isleftassociative.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html">^ is left associative</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="123659529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123659529" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123659529">Kevin Buzzard (Mar 13 2018 at 15:44)</a>:</h4>
<p>Is that normal? <code>#eval 2^3^2</code> gives 64. I don't know any other language where this is the case. I just tried python, pari, sage and they all give me 2^(3^2)=512.</p>

<a name="123670890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123670890" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123670890">Kevin Buzzard (Mar 13 2018 at 20:30)</a>:</h4>
<p>Wikipedia page on associativity <a href="https://en.wikipedia.org/wiki/Operator_associativity" target="_blank" title="https://en.wikipedia.org/wiki/Operator_associativity">https://en.wikipedia.org/wiki/Operator_associativity</a> explicitly mentions <code>^</code> as being essentially a canonical example of a right associative operator. This is a very bizarre implementation decision. Whatever reason is there for it? <code>(a^b)^c</code> is just <code>a^(b*c)</code> but <code>a^(b^c)</code> cannot be written in any simpler way and is hence the natural choice. Should I file an issue? Is this just an oversight? Should I just fix it and submit a PR?</p>

<a name="123670972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123670972" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123670972">Simon Hudon (Mar 13 2018 at 20:33)</a>:</h4>
<p>I might be at fault for that issue. As far as I know, I was the first one to commit code for the exponential operator and I think I didn't put much thought into its associativity. It's worth filing an issue. It's also easy to fix so they might be happy if you file a PR that they just have to merge</p>

<a name="123671027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123671027" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123671027">Kevin Buzzard (Mar 13 2018 at 20:34)</a>:</h4>
<p>We're talking init/data/nat/basic.lean, copyright 2014 Floris van Doora and Leo de Moura</p>

<a name="123671157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123671157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123671157">Andrew Ashworth (Mar 13 2018 at 20:38)</a>:</h4>
<p>i think this falls under the nitpicking issues will not be tolerated clause</p>

<a name="123671166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123671166" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123671166">Andrew Ashworth (Mar 13 2018 at 20:38)</a>:</h4>
<p>:/ but i agree ideally it should be right associative</p>

<a name="123671419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123671419" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123671419">Kevin Buzzard (Mar 13 2018 at 20:44)</a>:</h4>
<p>:/</p>

<a name="123671428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123671428" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123671428">Kevin Buzzard (Mar 13 2018 at 20:44)</a>:</h4>
<p>It's not a nitpicking issue, it's a nitpicking PR!</p>

<a name="123671439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123671439" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123671439">Kevin Buzzard (Mar 13 2018 at 20:44)</a>:</h4>
<p>If it breaks anything, the thing it breaks deserves to be broken!</p>

<a name="123671737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123671737" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123671737">Simon Hudon (Mar 13 2018 at 20:50)</a>:</h4>
<blockquote>
<p>We're talking init/data/nat/basic.lean, copyright 2014 Floris van Doora and Leo de Moura</p>
</blockquote>
<p>I initially put it in a <code>pow</code> file. They probably merged it with basic and dropped my name</p>

<a name="123672684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123672684" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123672684">Sebastian Ullrich (Mar 13 2018 at 21:14)</a>:</h4>
<p>Wasn't there a discussion that this should be generalized to a typeclass anyway? If someone PRs those changes, they'll get a "looks good to me" from me.</p>

<a name="123673194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123673194" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123673194">Simon Hudon (Mar 13 2018 at 21:26)</a>:</h4>
<p>that type class exists in <code>mathlib</code>. It would be great indeed to move it to core. That would remove the operator clash</p>

<a name="123673243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123673243" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123673243">Sebastian Ullrich (Mar 13 2018 at 21:28)</a>:</h4>
<p>Alternatively, do a PR that removes the notation :P</p>

<a name="123673328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123673328" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123673328">Simon Hudon (Mar 13 2018 at 21:30)</a>:</h4>
<p>Isn't it used in core?</p>

<a name="123673342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123673342" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123673342">Simon Hudon (Mar 13 2018 at 21:31)</a>:</h4>
<p>I see that bitvec uses it</p>

<a name="123673469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123673469" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123673469">Simon Hudon (Mar 13 2018 at 21:34)</a>:</h4>
<p>Is that something that should be moved to <code>mathlib</code>?</p>

<a name="123673796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123673796" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123673796">Kevin Buzzard (Mar 13 2018 at 21:44)</a>:</h4>
<p>Well so far I have cloned lean, changed <code>infix `^` := pow</code> to <code>infixr `^` := pow</code>, recompiled, and found that <code>#print notation ^</code> still reports <code>_ `^`:80 _:80 := nat.pow #1 #0</code></p>

<a name="123673800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123673800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123673800">Kevin Buzzard (Mar 13 2018 at 21:44)</a>:</h4>
<p>I could have made a mistake I guess.</p>

<a name="123674953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123674953" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123674953">Kevin Buzzard (Mar 13 2018 at 22:19)</a>:</h4>
<p>Ok so I did it again and the same thing happened. Changing line 204 of <code>library/init/data/nat/basic.lean</code> from <code>infix `^` = pow</code> to <code>`infixr </code>^<code> = pow</code> and then compiling lean and feeding a test file into it directly with <code>./lean ~/test.lean</code> still gives me left associativity. Aah well.</p>

<a name="123675029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123675029" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123675029">Kevin Buzzard (Mar 13 2018 at 22:21)</a>:</h4>
<p>PS It's needed as a map <code>G x Z -&gt; G</code> (G a group, Z the integers), as a map <code>M x N -&gt; M</code> (M a multiplicative monoid, N the naturals) etc. Is a typeclass the best solution? I think Mario explained all this once to me on gitter but I doubt I'll ever find it :-/</p>

<a name="123675077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123675077" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123675077">Mario Carneiro (Mar 13 2018 at 22:22)</a>:</h4>
<p>Your modification is correct, I think you aren't compiling something</p>

<a name="123675099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123675099" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123675099">Kevin Buzzard (Mar 13 2018 at 22:23)</a>:</h4>
<p>I'm just cut and pasting from the generic build instructions like a moron</p>

<a name="123675109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123675109" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123675109">Kevin Buzzard (Mar 13 2018 at 22:24)</a>:</h4>
<p>I surely don't have to use git in any way?</p>

<a name="123675151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123675151" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123675151">Kevin Buzzard (Mar 13 2018 at 22:24)</a>:</h4>
<p>I am just cloning, editing the file, and then making</p>

<a name="123675216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%5E%20is%20left%20associative/near/123675216" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03873isleftassociative.html#123675216">Kevin Buzzard (Mar 13 2018 at 22:26)</a>:</h4>
<p>I've done it three times now so I suspect that it's not me failing to edit the file or failing to run the correct binary, I think now that it's more likely either that the generic build instructions are somehow clobbering my edits or that there's something else I'm missing. I've tried defining a new right associative operator to mean nat.pow and it works fine. It's just <code>^</code> that is still misbehaving</p>


{% endraw %}
