---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/92071rwtacticfailed.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html">rw tactic failed</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="124840698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124840698" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124840698">Kenny Lau (Apr 09 2018 at 17:23)</a>:</h4>
<div class="codehilite"><pre><span></span>rewrite tactic failed, did not find instance of the pattern in the target expression
  @has_add.add.{?l_1} ?m_2
    (@add_semigroup.to_has_add.{?l_1} ?m_2
       (@add_monoid.to_add_semigroup.{?l_1} ?m_2 (@add_group.to_add_monoid.{?l_1} ?m_2 ?m_3)))
    (@has_smul.smul.{0 ?l_1} int ?m_2 (@add_group.has_smul.{?l_1} ?m_2 ?m_3) ?m_4 ?m_5)
    (@has_smul.smul.{0 ?l_1} int ?m_2 (@add_group.has_smul.{?l_1} ?m_2 ?m_3) ?m_6 ?m_5)


⊢ [..]
          (@has_add.add.{u₁} α₁
             (@add_semigroup.to_has_add.{u₁} α₁
                (@add_monoid.to_add_semigroup.{u₁} α₁
                   (@add_comm_monoid.to_add_monoid.{u₁} α₁
                      (@add_comm_group.to_add_comm_monoid.{u₁} α₁
                         (@module.to_add_comm_group.{u u₁} α α₁ (@comm_ring.to_ring.{u} α _inst_1) _inst_4)))))
             (@has_smul.smul.{0 u₁} int α₁
                (@add_group.has_smul.{u₁} α₁
                   (@add_comm_group.to_add_group.{u₁} α₁
                      (@module.to_add_comm_group.{u u₁} α α₁ (@comm_ring.to_ring.{u} α _inst_1) _inst_4)))
                n
                (f (@prod.fst.{v w} β γ (@prod.mk.{v w} β γ x y₁))
                   (@prod.snd.{v w} β γ (@prod.mk.{v w} β γ x y₁))))
             (@has_smul.smul.{0 u₁} int α₁
                (@add_group.has_smul.{u₁} α₁
                   (@add_comm_group.to_add_group.{u₁} α₁
                      (@module.to_add_comm_group.{u u₁} α α₁ (@comm_ring.to_ring.{u} α _inst_1) _inst_4)))
                n
                (f (@prod.fst.{v w} β γ (@prod.mk.{v w} β γ x y₂))
                   (@prod.snd.{v w} β γ (@prod.mk.{v w} β γ x y₂)))))
</pre></div>

<a name="124840702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124840702" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124840702">Kenny Lau (Apr 09 2018 at 17:23)</a>:</h4>
<p>Lean, it's right there</p>

<a name="124840706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124840706" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124840706">Kenny Lau (Apr 09 2018 at 17:23)</a>:</h4>
<p>I know you want <code> (@add_group.to_add_monoid.{?l_1} ?m_2 ?m_3) </code></p>

<a name="124840714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124840714" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124840714">Kenny Lau (Apr 09 2018 at 17:23)</a>:</h4>
<p>but isn't <code> (@add_comm_monoid.to_add_monoid.{u₁} α₁
                      (@add_comm_group.to_add_comm_monoid.{u₁} α₁
                         (@module.to_add_comm_group.{u u₁} α α₁ (@comm_ring.to_ring.{u} α _inst_1) _inst_4)) </code> good enough for you</p>

<a name="124840765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124840765" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124840765">Kevin Buzzard (Apr 09 2018 at 17:24)</a>:</h4>
<p>they don't look the same to me</p>

<a name="124840772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124840772" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124840772">Kenny Lau (Apr 09 2018 at 17:24)</a>:</h4>
<p>they're both justifying why I have addition</p>

<a name="124840785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124840785" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124840785">Kenny Lau (Apr 09 2018 at 17:24)</a>:</h4>
<p>specifically here they're justifying why I have an add_monoid</p>

<a name="124840789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124840789" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124840789">Kevin Buzzard (Apr 09 2018 at 17:25)</a>:</h4>
<p>can you do some BS "change" or "show" beforehand?</p>

<a name="124840855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124840855" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124840855">Kevin Buzzard (Apr 09 2018 at 17:26)</a>:</h4>
<p>Is this one of these dreaded diamond things?</p>

<a name="124840877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124840877" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124840877">Kenny Lau (Apr 09 2018 at 17:27)</a>:</h4>
<p>yes</p>

<a name="124840945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124840945" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124840945">Kenny Lau (Apr 09 2018 at 17:28)</a>:</h4>
<p>I think the main concern is the one in the <code>gsmul</code> thread</p>

<a name="124840947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124840947" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124840947">Kenny Lau (Apr 09 2018 at 17:28)</a>:</h4>
<p>overloading is not good</p>

<a name="124840956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124840956" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124840956">Kevin Buzzard (Apr 09 2018 at 17:28)</a>:</h4>
<p>This is Mario's doing, right?</p>

<a name="124840967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124840967" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124840967">Kevin Buzzard (Apr 09 2018 at 17:29)</a>:</h4>
<p>So probably he will have some sensible solution</p>

<a name="124840979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124840979" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124840979">Kenny Lau (Apr 09 2018 at 17:29)</a>:</h4>
<p>well but that bullet wasn't in the global namespace before Lean updated</p>

<a name="124840988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124840988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124840988">Kevin Buzzard (Apr 09 2018 at 17:29)</a>:</h4>
<p>oh so it's Leo's doing?</p>

<a name="124840991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124840991" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124840991">Kenny Lau (Apr 09 2018 at 17:29)</a>:</h4>
<p>I would say so</p>

<a name="124840993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124840993" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124840993">Kevin Buzzard (Apr 09 2018 at 17:29)</a>:</h4>
<p>So probably Mario will have some clever workaround.</p>

<a name="124841050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124841050" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124841050">Kevin Buzzard (Apr 09 2018 at 17:30)</a>:</h4>
<p>I blame myself for all this</p>

<a name="124841057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124841057" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124841057">Kenny Lau (Apr 09 2018 at 17:30)</a>:</h4>
<p>you?</p>

<a name="124841059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124841059" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124841059">Kevin Buzzard (Apr 09 2018 at 17:30)</a>:</h4>
<p>I should never have mentioned that <code>^</code> had the wrong associativity</p>

<a name="124841066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124841066" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124841066">Kenny Lau (Apr 09 2018 at 17:30)</a>:</h4>
<p>what happened</p>

<a name="124841075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124841075" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124841075">Kevin Buzzard (Apr 09 2018 at 17:30)</a>:</h4>
<p>I got annoyed that <code>2^3^2</code> was 64 not 512</p>

<a name="124841079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124841079" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124841079">Kevin Buzzard (Apr 09 2018 at 17:31)</a>:</h4>
<p>so I opened an issue</p>

<a name="124841091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124841091" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124841091">Kevin Buzzard (Apr 09 2018 at 17:31)</a>:</h4>
<p>and all of a sudden there were lots of changes to <code>^</code></p>

<a name="124841100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124841100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124841100">Kenny Lau (Apr 09 2018 at 17:31)</a>:</h4>
<p>I see</p>

<a name="124841109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124841109" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124841109">Kevin Buzzard (Apr 09 2018 at 17:31)</a>:</h4>
<p><a href="https://github.com/leanprover/lean/issues/1951" target="_blank" title="https://github.com/leanprover/lean/issues/1951">https://github.com/leanprover/lean/issues/1951</a></p>

<a name="124841168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124841168" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124841168">Kevin Buzzard (Apr 09 2018 at 17:32)</a>:</h4>
<p>led to <a href="https://github.com/leanprover/lean/commit/d387103aa2bebfc98220733d9607a16663ec1ef2" target="_blank" title="https://github.com/leanprover/lean/commit/d387103aa2bebfc98220733d9607a16663ec1ef2">https://github.com/leanprover/lean/commit/d387103aa2bebfc98220733d9607a16663ec1ef2</a></p>

<a name="124841186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124841186" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124841186">Kevin Buzzard (Apr 09 2018 at 17:33)</a>:</h4>
<p>and then to <a href="https://github.com/leanprover/lean/commit/8f55ec4c50379c612731ced2424fd3eda0cf69a6" target="_blank" title="https://github.com/leanprover/lean/commit/8f55ec4c50379c612731ced2424fd3eda0cf69a6">https://github.com/leanprover/lean/commit/8f55ec4c50379c612731ced2424fd3eda0cf69a6</a></p>

<a name="124841195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124841195" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124841195">Kevin Buzzard (Apr 09 2018 at 17:33)</a>:</h4>
<p>and hmm I don't see the bullet</p>

<a name="124841205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124841205" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124841205">Kevin Buzzard (Apr 09 2018 at 17:33)</a>:</h4>
<p>maybe it's not my fault after all</p>

<a name="124841287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124841287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124841287">Kevin Buzzard (Apr 09 2018 at 17:35)</a>:</h4>
<p>nice to see presheaves being pulled into core lean though</p>

<a name="124841289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124841289" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124841289">Kevin Buzzard (Apr 09 2018 at 17:35)</a>:</h4>
<p><a href="https://github.com/leanprover/lean/commit/6e0bf8473b1980e6692a61a924b4c6eae195619d" target="_blank" title="https://github.com/leanprover/lean/commit/6e0bf8473b1980e6692a61a924b4c6eae195619d">https://github.com/leanprover/lean/commit/6e0bf8473b1980e6692a61a924b4c6eae195619d</a></p>

<a name="124841295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124841295" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124841295">Kenny Lau (Apr 09 2018 at 17:35)</a>:</h4>
<p>oh</p>

<a name="124841296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124841296" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124841296">Kenny Lau (Apr 09 2018 at 17:35)</a>:</h4>
<p>what a subversion</p>

<a name="124841420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124841420" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124841420">Kevin Buzzard (Apr 09 2018 at 17:38)</a>:</h4>
<p>Talking of presheaves, thanks for trying to fix that tensor product file. Presumably that's where this issue arose.</p>

<a name="124849118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20tactic%20failed/near/124849118" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/92071rwtacticfailed.html#124849118">Mario Carneiro (Apr 09 2018 at 20:43)</a>:</h4>
<p>I removed the <code>has_smul</code> typeclass from <code>group_power</code>, which should fix the notation overloading problem. This puts us back at square one <code>local infix</code> type solutions for using <code>gsmul</code>, but it shouldn't interfere with the module smul notation now. I'm not sure about registering every abelian group as a Z-module with an instance, since module still uses an <code>out_param</code> for the scalar ring which might get stuck on <code>int</code></p>


{% endraw %}
