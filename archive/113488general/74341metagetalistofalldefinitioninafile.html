---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/74341metagetalistofalldefinitioninafile.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/74341metagetalistofalldefinitioninafile.html">(meta) get a list of all definition in a file</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="132130403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28meta%29%20get%20a%20list%20of%20all%20definition%20in%20a%20file/near/132130403" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/74341metagetalistofalldefinitioninafile.html#132130403">Zesen Qian (Aug 14 2018 at 19:16)</a>:</h4>
<p>Hi, is it possible in meta-programming to get a list of all (non-meta) definitions in a file?</p>

<a name="132130541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28meta%29%20get%20a%20list%20of%20all%20definition%20in%20a%20file/near/132130541" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/74341metagetalistofalldefinitioninafile.html#132130541">Simon Hudon (Aug 14 2018 at 19:18)</a>:</h4>
<p>Yes. There are three parts to this: listing (or folding over) the visible definitions, determining that they are from the current file and determining whether they are definitions.</p>

<a name="132130754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28meta%29%20get%20a%20list%20of%20all%20definition%20in%20a%20file/near/132130754" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/74341metagetalistofalldefinitioninafile.html#132130754">Zesen Qian (Aug 14 2018 at 19:22)</a>:</h4>
<p>I guess the hard part is the first then. I browsed thorough tactic.lean and didn't find anything interesting.</p>

<a name="132130776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28meta%29%20get%20a%20list%20of%20all%20definition%20in%20a%20file/near/132130776" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/74341metagetalistofalldefinitioninafile.html#132130776">Simon Hudon (Aug 14 2018 at 19:23)</a>:</h4>
<p>In <code>init.meta.environment</code>, you can find <code>environment.fold</code>. It doesn't give you a list but it lets you iterate over all the definitions of a file and accumulate them. <code>get_env</code> gives you the current environment and <code>in_current_file'</code> tells you if a given name is defined / declared in the current file and finally, you can look at the <code>declaration</code> data structure and see the <code>trusted</code> bit for <code>definition</code> and <code>constant</code>.</p>

<a name="132130792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28meta%29%20get%20a%20list%20of%20all%20definition%20in%20a%20file/near/132130792" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/74341metagetalistofalldefinitioninafile.html#132130792">Zesen Qian (Aug 14 2018 at 19:24)</a>:</h4>
<p>that is very helpful. Thanks!</p>

<a name="132131037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28meta%29%20get%20a%20list%20of%20all%20definition%20in%20a%20file/near/132131037" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/74341metagetalistofalldefinitioninafile.html#132131037">Simon Hudon (Aug 14 2018 at 19:28)</a>:</h4>
<p>You're welcome!</p>


{% endraw %}

{% include archive_update.html %}