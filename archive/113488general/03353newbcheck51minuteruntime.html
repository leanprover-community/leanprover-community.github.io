---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/03353newbcheck51minuteruntime.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/03353newbcheck51minuteruntime.html">newb,  "#check 5" 1 minute runtime?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="127381913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/newb%2C%20%20%22%23check%205%22%201%20minute%20runtime%3F/near/127381913" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03353newbcheck51minuteruntime.html#127381913">drocta (May 31 2018 at 20:30)</a>:</h4>
<p>First, sorry if this is not the correct place for me to seek help for this. I haven't used zulip before and couldn't find a page with the rules to follow for this specific chat. (Should I have put this in an existing topic?)<br>
I tried installing Lean 3.4.1 on windows 7, and when I try to run a test2.lean which consists of just "#check 5", it takes a minute and 5 seconds before it gives me the output.</p>
<blockquote>
<p>5 : ℕ<br>
&lt;unknown&gt;:1:1: error: unknown declaration 'main'</p>
</blockquote>
<p>(when running "lean --run ../../progs/test2.lean" )<br>
Someone else let me know that they tried a similar file<br>
(specifically, </p>
<blockquote>
<p>constant m : nat<br>
#check m</p>
</blockquote>
<p>which I tried before "#check 5" and also takes a minute for me)<br>
 on linux, and for them it ran in under a second.<br>
They didn't have an idea for why it was running slowly except possibly my antivirus, but it still runs just as slow for me when I have that turned off.</p>
<p>I tend to have my computer's memory use fairly high. Would this cause Lean to run this slowly for this test case?</p>
<p>During the minute that it is running, my cpu use goes to around 100%  (from around 20%). I tried closing my antivirus software and it didn't seem to improve the running speed.</p>
<p>Could anyone provide me with advice for what to do differently?</p>
<p>Thank you for your consideration</p>

<a name="127382236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/newb%2C%20%20%22%23check%205%22%201%20minute%20runtime%3F/near/127382236" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03353newbcheck51minuteruntime.html#127382236">Patrick Massot (May 31 2018 at 20:38)</a>:</h4>
<blockquote>
<p>First, sorry if this is not the correct place for me to seek help for this. I haven't used zulip before and couldn't find a page with the rules to follow for this specific chat. (Should I have put this in an existing topic?)</p>
</blockquote>
<p>I don't think we have any specific rule. Mario only pretends to complain when he sees Lolcats or memes. We only try to minimize code when asking for help, and avoid asking Sebastian about Lean 4 progress every day. That being said, I have no Windows computer so I cannot help. I can only tell you this shouldn't happen</p>

<a name="127382343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/newb%2C%20%20%22%23check%205%22%201%20minute%20runtime%3F/near/127382343" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03353newbcheck51minuteruntime.html#127382343">drocta (May 31 2018 at 20:40)</a>:</h4>
<p>Alright, thank you</p>

<a name="127382889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/newb%2C%20%20%22%23check%205%22%201%20minute%20runtime%3F/near/127382889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03353newbcheck51minuteruntime.html#127382889">Reid Barton (May 31 2018 at 20:50)</a>:</h4>
<p>I don't think you want "--run"</p>

<a name="127382917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/newb%2C%20%20%22%23check%205%22%201%20minute%20runtime%3F/near/127382917" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03353newbcheck51minuteruntime.html#127382917">Reid Barton (May 31 2018 at 20:51)</a>:</h4>
<p>But I don't know whether that will make it not slow.</p>

<a name="127383242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/newb%2C%20%20%22%23check%205%22%201%20minute%20runtime%3F/near/127383242" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03353newbcheck51minuteruntime.html#127383242">drocta (May 31 2018 at 20:57)</a>:</h4>
<p>Ah! Thanks, I tried it without the "--run" , and it no longer complains about lacking main, though it still takes slightly over a minute.</p>

<a name="127383487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/newb%2C%20%20%22%23check%205%22%201%20minute%20runtime%3F/near/127383487" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03353newbcheck51minuteruntime.html#127383487">drocta (May 31 2018 at 21:02)</a>:</h4>
<p>Ah, I just tried running it with --profile , and, in addition to much more text than I expected, it ended with</p>
<blockquote>
<p>5 : ℕ<br>
cumulative profiling times:<br>
        compilation 6.75s<br>
        decl post-processing 2.45s<br>
        elaboration 85.4s<br>
        elaboration: tactic compilation 11.5s<br>
        elaboration: tactic execution 13.2s<br>
        parsing 12.9s<br>
        type checking 1.44s</p>
</blockquote>
<p>Which I suppose says something, thought I'm not quite sure what.</p>

<a name="127383840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/newb%2C%20%20%22%23check%205%22%201%20minute%20runtime%3F/near/127383840" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03353newbcheck51minuteruntime.html#127383840">Mario Carneiro (May 31 2018 at 21:10)</a>:</h4>
<p>Have you compiled the library files? If your core lean contains no .olean files then that could explain the long startup, since lean has to compile everything every time. Try running <code>lean --make</code> first</p>

<a name="127383863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/newb%2C%20%20%22%23check%205%22%201%20minute%20runtime%3F/near/127383863" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03353newbcheck51minuteruntime.html#127383863">Mario Carneiro (May 31 2018 at 21:11)</a>:</h4>
<p>You don't want to use <code>--run</code> unless you are using lean noninteractively</p>

<a name="127383870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/newb%2C%20%20%22%23check%205%22%201%20minute%20runtime%3F/near/127383870" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03353newbcheck51minuteruntime.html#127383870">Mario Carneiro (May 31 2018 at 21:11)</a>:</h4>
<p>it's basically the same as affixing <code>#eval main</code> to the end of the given file</p>

<a name="127383939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/newb%2C%20%20%22%23check%205%22%201%20minute%20runtime%3F/near/127383939" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03353newbcheck51minuteruntime.html#127383939">drocta (May 31 2018 at 21:13)</a>:</h4>
<p>Ah, I had not! I will run that now, Thank you!</p>

<a name="127384026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/newb%2C%20%20%22%23check%205%22%201%20minute%20runtime%3F/near/127384026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03353newbcheck51minuteruntime.html#127384026">drocta (May 31 2018 at 21:15)</a>:</h4>
<p>Ah, when I ran <code>lean --make</code>by itself it finished in under a second and didn't say anything, and then I tried <code>lean ../../progs/test2.lean</code> again and it still took a bit. I will time it to see if it is still taking a minute.</p>

<a name="127384140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/newb%2C%20%20%22%23check%205%22%201%20minute%20runtime%3F/near/127384140" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03353newbcheck51minuteruntime.html#127384140">drocta (May 31 2018 at 21:17)</a>:</h4>
<p>Still took a minute and 5 seconds.<br>
I noticed that when I ran <code>lean --path</code> it told me that "leanpkg_path_file" was "/could-not-find-home". Could that be related?</p>

<a name="127384205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/newb%2C%20%20%22%23check%205%22%201%20minute%20runtime%3F/near/127384205" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03353newbcheck51minuteruntime.html#127384205">drocta (May 31 2018 at 21:18)</a>:</h4>
<p>oh, I tried <code>lean --make ..\..\progs\test2.lean</code> and it is saying stuff</p>

<a name="127384302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/newb%2C%20%20%22%23check%205%22%201%20minute%20runtime%3F/near/127384302" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03353newbcheck51minuteruntime.html#127384302">drocta (May 31 2018 at 21:20)</a>:</h4>
<p>Ah! Great! It runs in 7 seconds now. There we go. Thank you!</p>

<a name="127387966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/newb%2C%20%20%22%23check%205%22%201%20minute%20runtime%3F/near/127387966" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03353newbcheck51minuteruntime.html#127387966">Reid Barton (May 31 2018 at 22:59)</a>:</h4>
<p>Interesting. I guess the precompiled binaries don't contain precompiled .olean files? Are they platform-dependent?</p>

<a name="127388291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/newb%2C%20%20%22%23check%205%22%201%20minute%20runtime%3F/near/127388291" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/03353newbcheck51minuteruntime.html#127388291">Kevin Buzzard (May 31 2018 at 23:07)</a>:</h4>
<p>I almost always use linux nightlies and they have plenty of .olean files usually</p>


{% endraw %}

{% include archive_update.html %}