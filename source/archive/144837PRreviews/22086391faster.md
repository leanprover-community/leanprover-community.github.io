---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/144837PRreviews/22086391faster.html
---

## [PR reviews](index.html)
### [#391 faster](22086391faster.html)

#### [Kenny Lau (Oct 07 2018 at 13:21)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349088):
How can I improve [the `faster` PR](https://github.com/leanprover/mathlib/pull/391)?

#### [Scott Morrison (Oct 07 2018 at 13:22)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349130):
I was wondering, Kenny, if it makes sense to rebase it onto the squeeze-simp PR?

#### [Scott Morrison (Oct 07 2018 at 13:22)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349132):
Presumably that one will be reviewed and merged first, since `faster` relies on it.

#### [Scott Morrison (Oct 07 2018 at 13:23)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349138):
If you like I can try doing that. If you don't mind compressing everything into a single commit it should be easy.

#### [Scott Morrison (Oct 07 2018 at 13:23)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349139):
Possibly harder if you want to preserve the individual commits, but leave out the ones that have already been separated out into `squeeze-simp`.

#### [Kenny Lau (Oct 07 2018 at 13:24)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349179):
I'll rebase it onto `squeeze-simp` once it (i.e. `squeeze-simp`) has been merged

#### [Scott Morrison (Oct 07 2018 at 13:28)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349283):
Ok, I guess that's fine. It's just a piece of cleaning up work that you could do already if you're in a hurry.

#### [Scott Morrison (Oct 07 2018 at 13:28)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349284):
I've had a scroll through the changes on this one, but I'm not really the one to comment. :-) Unreadable proofs beforehand, unreadable proofs afterwards, so if they're faster, I'd say go for it. :-)

#### [Kenny Lau (Oct 07 2018 at 13:29)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349287):
Ok, thanks for your review

#### [Scott Morrison (Oct 07 2018 at 13:33)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349408):
Some places make me a little sad:

#### [Scott Morrison (Oct 07 2018 at 13:33)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349409):
https://github.com/leanprover/mathlib/pull/391/files#diff-52b9e281e7667f88f8203fb617843d93L522

#### [Scott Morrison (Oct 07 2018 at 13:34)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349447):
When the proof used to just be `simp`, and now it's some rewrite.

#### [Kenny Lau (Oct 07 2018 at 13:34)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349455):
it saves a lot of speed though...

#### [Scott Morrison (Oct 07 2018 at 13:35)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349463):
Yes, but it's a tradeoff. It's very sad to have to write proofs of such simple things. I agree in the short term it's worth saving the speed.

#### [Scott Morrison (Oct 07 2018 at 13:35)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349464):
But in the long run, I have to say that this is the most depressing thing I've seen in Lean yet --- the fact that we are having to do this.

#### [Scott Morrison (Oct 07 2018 at 13:36)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349507):
I noticed there are some actual new features hiding in here: https://github.com/leanprover/mathlib/pull/391/files#diff-47cbe97193e277c9a413e62bc8afadff

#### [Scott Morrison (Oct 07 2018 at 13:37)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349513):
You should almost certainly take these out, and make a separate PR for them.

#### [Scott Morrison (Oct 07 2018 at 13:38)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349517):
Oh, I see, those are the parts that Simon wrote

#### [Scott Morrison (Oct 07 2018 at 13:38)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349556):
and that are in the separate PR already.

#### [Scott Morrison (Oct 07 2018 at 13:38)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349559):
(This is exactly why I suggested rebasing now --- so it's easy for us to review it already!)

#### [Kenny Lau (Oct 07 2018 at 13:39)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349562):
What do you mean by rebasing this PR onto squeeze_simp?

#### [Scott Morrison (Oct 07 2018 at 13:39)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349569):
At the moment there is a fork in the history --- leading out of master is one sequence of commits leading to squeeze-simp

#### [Scott Morrison (Oct 07 2018 at 13:40)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349614):
and another sequence of commits leading to faster

#### [Scott Morrison (Oct 07 2018 at 13:40)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349620):
I was proposing making that history linear again, but so all of squeeze-simp comes first, and then the rest of faster

#### [Kenny Lau (Oct 07 2018 at 13:40)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349627):
and how do I do that?

#### [Scott Morrison (Oct 07 2018 at 13:41)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349633):
Well -- do we care if all your commits get smushed into a single one?

#### [Scott Morrison (Oct 07 2018 at 13:41)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349634):
If that's okay, we can do a squash merge.

#### [Kenny Lau (Oct 07 2018 at 13:41)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349636):
how does that work?

#### [Scott Morrison (Oct 07 2018 at 13:41)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349638):
If that's not okay, I'd have to experiment --- it's at the limit of my rebase ability. :-)

#### [Scott Morrison (Oct 07 2018 at 13:41)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349640):
To do a squash merge, you would:

#### [Scott Morrison (Oct 07 2018 at 13:42)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349642):
`git checkout squeeze-simp`

#### [Scott Morrison (Oct 07 2018 at 13:42)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349681):
`git merge --squash faster`

#### [Scott Morrison (Oct 07 2018 at 13:42)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349684):
then look at the state of things, and make sure everything looks sane.

#### [Scott Morrison (Oct 07 2018 at 13:42)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349685):
if it does:

#### [Scott Morrison (Oct 07 2018 at 13:42)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349686):
`git branch faster2`

#### [Scott Morrison (Oct 07 2018 at 13:42)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349689):
`git checkout faster2`

#### [Scott Morrison (Oct 07 2018 at 13:43)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349692):
`git commit -m "feat(*): make mathlib faster using simp only, rw, and rfl"`

#### [Scott Morrison (Oct 07 2018 at 13:43)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349697):
then if everything looks okay, delete the faster branch, and rename faster2 back to faster

#### [Scott Morrison (Oct 07 2018 at 13:43)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349698):
and finally `git push --force community` to overwrite the old faster branch.

#### [Kenny Lau (Oct 07 2018 at 13:43)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349700):
how will this make the tactic changes disappear from the "Files changed"?

#### [Scott Morrison (Oct 07 2018 at 13:43)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349705):
So it won't do that immediately in files changed, but ...

#### [Kenny Lau (Oct 07 2018 at 13:44)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349745):
but?

#### [Scott Morrison (Oct 07 2018 at 13:45)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349756):
on the changes page, if you click on the `changes from all commits` text

#### [Scott Morrison (Oct 07 2018 at 13:45)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349757):
you get an option to just compare across a range.

#### [Scott Morrison (Oct 07 2018 at 13:46)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349803):
after the squash merge, the commits will be linearly ordered, so it's possible to just look at the changes after Simon was "finished" with squeeze-simp -- i.e. just showing yours

#### [Scott Morrison (Oct 07 2018 at 13:46)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349807):
and posting the URL for that range here would give anyone easy access to it.

#### [Scott Morrison (Oct 07 2018 at 13:46)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349809):
(I'm not strongly saying this is worth doing... it's a possibility if you want to clean up)

#### [Scott Morrison (Oct 07 2018 at 13:47)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349816):
Another suggestion, for cleaning up, is that you change the name of the PR, e.g. to `feat(*): make mathlib faster using simp only, rw, and rfl`

#### [Scott Morrison (Oct 07 2018 at 13:48)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349820):
the convention is `XXX(FFF): CCC`, where `XXX` is `doc`, `feat`, `bug`, or `chore`, `FFF` is the files affected (perhaps abbreviated some way), and `CCC` is a short summary

#### [Scott Morrison (Oct 07 2018 at 13:48)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349861):
When everything is finally merged, it will be squashed to a single commit, and it makes the maintainers life slightly easier if they've got a commit message in the right format in front of them.

#### [Kenny Lau (Oct 07 2018 at 13:49)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349865):
what is `feat`?

#### [Mario Carneiro (Oct 07 2018 at 13:49)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349870):
feature: it's for commits that add new stuff

#### [Mario Carneiro (Oct 07 2018 at 13:50)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349911):
I think `faster` is a `refactor` commit

#### [Kenny Lau (Oct 07 2018 at 13:50)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349916):
I don't think `refactor` is one of `doc`, `feat`, `bug`, or `chore`

#### [Mario Carneiro (Oct 07 2018 at 13:51)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349917):
The list is longer than that

#### [Johan Commelin (Oct 07 2018 at 13:51)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349922):
@**Mario Carneiro** Is there any reason why this PR is not a no-brainer?

#### [Kenny Lau (Oct 07 2018 at 13:51)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349923):
where can I find the list?

#### [Mario Carneiro (Oct 07 2018 at 13:51)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349924):
https://github.com/leanprover/lean/blob/master/doc/commit_convention.md

#### [Mario Carneiro (Oct 07 2018 at 13:51)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349925):
It's a large change, that's never a no-brainer

#### [Mario Carneiro (Oct 07 2018 at 13:52)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349966):
Kenny could you not replace `induction` with `nat.rec_on`? It's less readable

#### [Scott Morrison (Oct 07 2018 at 13:53)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349969):
@**Johan Commelin**, it's worth remembering that once a PR is in, little problems never get fixed again. :-)

#### [Scott Morrison (Oct 07 2018 at 13:53)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135349972):
This is a one moment where there's a chance to get things right. Saying "oh, we can fix it later" turns out to be false in practice!

#### [Kenny Lau (Oct 07 2018 at 13:54)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350012):
```
Kenny Lau@DESKTOP-F01EMD3 MINGW64 /c/mathlib
$ git branch
  direct_sum
* faster
  master
```

#### [Kenny Lau (Oct 07 2018 at 13:54)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350013):
@**Scott Morrison|110087** how do I add `squeeze_simp` to this list?

#### [Scott Morrison (Oct 07 2018 at 13:55)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350021):
`git checkout squeeze-simp`

#### [Scott Morrison (Oct 07 2018 at 13:55)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350022):
(it's a hypen, not an underscore)

#### [Scott Morrison (Oct 07 2018 at 13:56)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350060):
Do you have `community` set up as a remote?

#### [Kenny Lau (Oct 07 2018 at 13:56)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350063):
yes

#### [Scott Morrison (Oct 07 2018 at 13:56)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350064):
okay, then just `checkout` should be enough

#### [Kenny Lau (Oct 07 2018 at 13:57)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350067):
```
Kenny Lau@DESKTOP-F01EMD3 MINGW64 /c/mathlib
$ git checkout squeeze-simp
error: pathspec 'squeeze-simp' did not match any file(s) known to git.

Kenny Lau@DESKTOP-F01EMD3 MINGW64 /c/mathlib
$ git remote
lc
origin
```

#### [Scott Morrison (Oct 07 2018 at 13:58)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350115):
What does `git remote get-url lc` say?

#### [Scott Morrison (Oct 07 2018 at 13:58)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350116):
Have you run `git fetch`?

#### [Kenny Lau (Oct 07 2018 at 13:58)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350117):
```
Kenny Lau@DESKTOP-F01EMD3 MINGW64 /c/mathlib
$ git remote get-url lc
https://github.com/leanprover-community/mathlib
```

#### [Scott Morrison (Oct 07 2018 at 13:58)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350118):
You may need to do that, so it looks up all the available branches on that remote.

#### [Kenny Lau (Oct 07 2018 at 13:59)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350124):
```
Kenny Lau@DESKTOP-F01EMD3 MINGW64 /c/mathlib
$ git fetch
remote: Enumerating objects: 13, done.
remote: Counting objects: 100% (13/13), done.
remote: Compressing objects: 100% (6/6), done.
remote: Total 13 (delta 7), reused 9 (delta 7), pack-reused 0
Unpacking objects: 100% (13/13), done.
From https://github.com/leanprover/mathlib
   0ddb58c..e4ce469  master     -> origin/master

Kenny Lau@DESKTOP-F01EMD3 MINGW64 /c/mathlib
$ git checkout squeeze-simp
error: pathspec 'squeeze-simp' did not match any file(s) known to git.
```

#### [Scott Morrison (Oct 07 2018 at 13:59)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350125):
(By the way, you might like to learn how to use ssh URLs, rather than https ones, as then you can use an ssh key and never have to type a password.)

#### [Kenny Lau (Oct 07 2018 at 14:00)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350163):
I suppose some of the words mean something

#### [Scott Morrison (Oct 07 2018 at 14:00)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350177):
Hmm, I guess you'll need `git checkout -b squeeze-simp lc/squeeze-simp`

#### [Scott Morrison (Oct 07 2018 at 14:00)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350179):
Sorry, not sure why you can't just `checkout`, that seems to work for me.

#### [Scott Morrison (Oct 07 2018 at 14:01)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350187):
```quote
I suppose some of the words mean something
```
I'll let you google them later. :-)

#### [Kenny Lau (Oct 07 2018 at 14:01)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350188):
```
Kenny Lau@DESKTOP-F01EMD3 MINGW64 /c/mathlib
$ git checkout -b squeeze-simp lc/squeeze-simp
fatal: Cannot update paths and switch to branch 'squeeze-simp' at the same time.
Did you intend to checkout 'lc/squeeze-simp' which can not be resolved as commit?
```

#### [Scott Morrison (Oct 07 2018 at 14:03)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350239):
ugh, sorry, you've exceeded my knowledge of git at this point.

#### [Mario Carneiro (Oct 07 2018 at 14:04)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350241):
`git checkout lc/squeeze-simp`?

#### [Scott Morrison (Oct 07 2018 at 14:04)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350280):
ah --- also `git fetch lc` might be helpful

#### [Scott Morrison (Oct 07 2018 at 14:05)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350290):
I forgot when you ran `git fetch` above it only fetched from `origin`.

#### [Kenny Lau (Oct 07 2018 at 14:06)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350332):
```quote
`git checkout lc/squeeze-simp`?
```
no `-b`?

#### [Scott Morrison (Oct 07 2018 at 14:07)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350340):
I *think* if you run `git fetch lc` first, then both commands (with and without the `-b`) should have the same effect.

#### [Kenny Lau (Oct 07 2018 at 14:08)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350380):
I don't think so

#### [Johan Commelin (Oct 07 2018 at 14:08)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350381):
What does `git branch -a -v` give you?

#### [Kenny Lau (Oct 07 2018 at 14:08)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350384):
```
$ git branch -a -v
* (HEAD detached at lc/squeeze-simp)   136ab4a Provide a means for other tactics to use squeeze
  direct_sum                           009b95f refactor dfinsupp again
  faster                               ddae2b2 chore(data/finsupp): reduce build time
  master                               6434658 [behind 40] feat(analysis/topology): locally compact spaces and the compact-open topology
  remotes/lc/applicative               7a57a7f fix(data/vector2): traversable instance
  remotes/lc/auto-cases-iff            4e7bcd6 add Johan's test case
  remotes/lc/basis                     e0db366 remove pempty_equiv_empty
  remotes/lc/bifunctor                 1b63bf6 change direction of composition law
  remotes/lc/cfsg                      b583ad0 a start on the statement of the classification of finite simple groups
  remotes/lc/cleanup                   6e9a638 cleanup
  remotes/lc/coinductive-fixes         d2fdb5c fix(tactic/eval_expr): often crashes when reflecting expressions
  remotes/lc/coinductive-types         bf5f318 [WIP] coinductive type families
  remotes/lc/completions               125efed fail(analysis/topology/completion): fail to get topological ring strucutre on separation quotient
  remotes/lc/determinants              9280cbf core(data/fin): cleanup fin proofs
  remotes/lc/direct_limit              9b8259f Update direct_limit.lean
  remotes/lc/direct_sum                009b95f refactor dfinsupp again
  remotes/lc/dvd_add-lemmas            a0c1deb adding two lemmas about division
  remotes/lc/eckmann-hilton            ddd03a1 feat(group_theory/eckmann_hilton): add Eckmann-Hilton
  remotes/lc/elan-docs                 1f2e745 noting additional prerequisite on macOS
  remotes/lc/eval-expr-fix             d2fdb5c fix(tactic/eval_expr): often crashes when reflecting expressions
  remotes/lc/exp                       f77c3fe fix build
  remotes/lc/ext                       2d3b8d3 feat(tactic/ext): remove lambda abstractions when inferring a type's name
  remotes/lc/ext-goal-ordering         bb1a40a adding configuration to non-interactive ext1
  remotes/lc/faster                    ddae2b2 chore(data/finsupp): reduce build time
  remotes/lc/fin_cases                 ab2d3e6 removing guard
  remotes/lc/finmap                    6863745 feat(data/finmap): change keys to finset
  remotes/lc/fold                      0919259 reformulate `fold` to use `monoid` rather than `applicative
  remotes/lc/hlist                     b5d6d60 [WIP] hlist type
  remotes/lc/inner_product_spaces      2203545 Update herm_inner_product_space.lean
  remotes/lc/integral                  0d10db9 fix eapprox
  remotes/lc/kmb_hilbert2              3683d9d Merge remote-tracking branch 'origin/module' into kmb_hilbert2
  remotes/lc/kmb_hilbert_basis         651baa8 WIP
  remotes/lc/kmb_some_zerology         d3add5f fix(algebra/ring) : non_zero -> nonzero
  remotes/lc/kmb_zerology              a7edb2c feat(ring_theory/noetherian): zero ring (and finite rings) are Noetherian
  remotes/lc/lean-3.3.0                6a2607e fix(data/rat): backport bugfix
  remotes/lc/lean-3.4.1                905345a fix(data/array/lemmas,...): fix build
  remotes/lc/master                    0ddb58c workaround(tactic/tfae): tfae is broken, comment out its tests (#398)
  remotes/lc/matrix                    3dd7f4d feat(ring_theory/matrix): category of free modules; scalar matrices
  remotes/lc/module                    335fab4 refactor(linear_algebra/dimension): update for new modules
  remotes/lc/monoid_stuff              519f6d6 style(algebra/group): fix alignment of code
  remotes/lc/monotonicity              1138482 fix(tactic/mono): fix conflict with `has_lt`
  remotes/lc/monotonicity-updated      366bd52 feat(tactic/mono): update traversable
  remotes/lc/normed_space_instance     82d95ba fix(analysis/normed_space): Add instance showing that normed field is a normed space over itself
  remotes/lc/poly_coeffs               92c2cfc feat(data/polynomial): coeff is R-linear
  remotes/lc/scott/supremum            8b22c4d Merge branch 'solve_by_elim_congr' into scott/supremum
  remotes/lc/solve_by_elim_backtrack   501959b fix(data/real/cau_seq_filter): use new syntax for solve_by_elim
  remotes/lc/solve_by_elim_congr       fb5600b use non-interactive solve_by_elim in tfae
  remotes/lc/splitting_fields          9861ccd Work on lift
  remotes/lc/squeeze-simp              136ab4a Provide a means for other tactics to use squeeze
  remotes/lc/structure-stub            5f5e9b5 doc(hole/instance_stub)
  remotes/lc/subrings_subfields        986274a simplify a proof instance
  remotes/lc/sum-functor               d1cf30a feat(category/functor): make `sum` `functor` instance more universe polymorphic
  remotes/lc/sum-monad                 7e28be8 feat(data/sum): add monad instance
  remotes/lc/sylow                     cd0a486 Merge remote-tracking branch 'dorhinj/sylow' into sylow
  remotes/lc/tensor-product            5226782 namespace
  remotes/lc/tfae                      8bc42a0 perf(tactic/scc): produce smaller proofs
  remotes/lc/traversable-derive-lawful e597516 chore(traversable): merge with Mario's branch
  remotes/lc/traverse-finset           477104e finset traversable: proof of composition law
  remotes/lc/tutorials                 09982a9 fix finset
  remotes/lc/whiskering                95ff94b Merge pull request #5 from rwbarton/whiskering
  remotes/origin/HEAD                  -> origin/master
  remotes/origin/lean-3.3.0            6a2607e fix(data/rat): backport bugfix
  remotes/origin/lean-3.4.1            905345a fix(data/array/lemmas,...): fix build
  remotes/origin/master                e4ce469 fix(docs/elan): fix homebrew instructions for macOS (#395)
```

#### [Kenny Lau (Oct 07 2018 at 14:18)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350632):
```
$ git branch faster2
warning: refname 'lc/squeeze-simp' is ambiguous.
fatal: Ambiguous object name: 'lc/squeeze-simp'.
```

#### [Kenny Lau (Oct 07 2018 at 14:18)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350633):
@**Scott Morrison|110087**

#### [Scott Morrison (Oct 07 2018 at 14:19)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350641):
oof, you've done something strange!

#### [Scott Morrison (Oct 07 2018 at 14:19)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350642):
Let's try to get back to normal. `git checkout master`

#### [Scott Morrison (Oct 07 2018 at 14:19)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350643):
(perhaps copy and paste the outputs back here, so the peanut gallery can see what's going on)

#### [Kenny Lau (Oct 07 2018 at 14:20)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350688):
and then?

#### [Scott Morrison (Oct 07 2018 at 14:20)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350691):
What did `git checkout master` say?

#### [Kenny Lau (Oct 07 2018 at 14:20)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350695):
```
$ git checkout master
Switched to branch 'master'
Your branch is behind 'origin/master' by 40 commits, and can be fast-forwarded.
  (use "git pull" to update your local branch)
```

#### [Scott Morrison (Oct 07 2018 at 14:21)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350701):
`git checkout squeeze-simp`

#### [Kenny Lau (Oct 07 2018 at 14:21)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350707):
```
$ git checkout squeeze-simp
Branch squeeze-simp set up to track remote branch squeeze-simp from lc.
Switched to a new branch 'squeeze-simp'

Kenny Lau@DESKTOP-F01EMD3 MINGW64 /c/mathlib
$ git branch
  direct_sum
  faster
  lc/squeeze-simp
  master
* squeeze-simp
```

#### [Kenny Lau (Oct 07 2018 at 14:21)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350708):
what is this

#### [Scott Morrison (Oct 07 2018 at 14:22)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350735):
That sounds promising!

#### [Scott Morrison (Oct 07 2018 at 14:22)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350749):
Let's get rid of your `lc/squeeze-simp` though.

#### [Scott Morrison (Oct 07 2018 at 14:22)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350753):
`git branch -d lc/squeeze-simp`

#### [Scott Morrison (Oct 07 2018 at 14:22)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350755):
(don't worry, there's no danger that will actually kill the one on community !)

#### [Kenny Lau (Oct 07 2018 at 14:23)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350766):
```
$ git branch -D lc/squeeze-simp
Deleted branch lc/squeeze-simp (was cbbbd17).
```

#### [Scott Morrison (Oct 07 2018 at 14:23)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350768):
great.

#### [Scott Morrison (Oct 07 2018 at 14:24)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350803):
`git merge --squash faster`

#### [Scott Morrison (Oct 07 2018 at 14:24)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350807):
`git status`

#### [Kenny Lau (Oct 07 2018 at 14:25)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350813):
```
$ git merge --squash faster
Auto-merging tactic/squeeze.lean
CONFLICT (add/add): Merge conflict in tactic/squeeze.lean
Squash commit -- not updating HEAD
Automatic merge failed; fix conflicts and then commit the result.

$ git status
On branch squeeze-simp
Your branch is up-to-date with 'lc/squeeze-simp'.
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

        modified:   algebra/archimedean.lean
        modified:   algebra/big_operators.lean
        modified:   algebra/char_zero.lean
        modified:   algebra/euclidean_domain.lean
        modified:   algebra/field.lean
        modified:   algebra/field_power.lean
        modified:   algebra/gcd_domain.lean
        modified:   algebra/group.lean
        modified:   algebra/group_power.lean
        modified:   analysis/topology/topological_space.lean
        modified:   analysis/topology/uniform_space.lean
        modified:   computability/turing_machine.lean
        modified:   data/complex/basic.lean
        modified:   data/finset.lean
        modified:   data/finsupp.lean
        modified:   data/list/basic.lean
        modified:   data/multiset.lean
        modified:   data/polynomial.lean
        modified:   meta/rb_map.lean
        modified:   order/conditionally_complete_lattice.lean
        modified:   order/filter.lean
        modified:   order/lattice.lean
        modified:   set_theory/ordinal.lean
        modified:   tactic/tfae.lean
        modified:   tests/tactics.lean

Unmerged paths:
  (use "git reset HEAD <file>..." to unstage)
  (use "git add <file>..." to mark resolution)

        both added:      tactic/squeeze.lean
```

#### [Scott Morrison (Oct 07 2018 at 14:26)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350859):
hmm!

#### [Kenny Lau (Oct 07 2018 at 14:26)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350864):
(I can resolve the conflict myself)

#### [Scott Morrison (Oct 07 2018 at 14:26)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350865):
have a look at `squeeze.lean`, and try to make it look like Simon's version, I guess

#### [Kenny Lau (Oct 07 2018 at 14:28)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350909):
now what

#### [Scott Morrison (Oct 07 2018 at 14:30)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135350957):
`git status`

#### [Kenny Lau (Oct 07 2018 at 14:32)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351015):
```
$ git status
On branch squeeze-simp
Your branch is up-to-date with 'lc/squeeze-simp'.
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

        modified:   algebra/archimedean.lean
        modified:   algebra/big_operators.lean
        modified:   algebra/char_zero.lean
        modified:   algebra/euclidean_domain.lean
        modified:   algebra/field.lean
        modified:   algebra/field_power.lean
        modified:   algebra/gcd_domain.lean
        modified:   algebra/group.lean
        modified:   algebra/group_power.lean
        modified:   analysis/topology/topological_space.lean
        modified:   analysis/topology/uniform_space.lean
        modified:   computability/turing_machine.lean
        modified:   data/complex/basic.lean
        modified:   data/finset.lean
        modified:   data/finsupp.lean
        modified:   data/list/basic.lean
        modified:   data/multiset.lean
        modified:   data/polynomial.lean
        modified:   meta/rb_map.lean
        modified:   order/conditionally_complete_lattice.lean
        modified:   order/filter.lean
        modified:   order/lattice.lean
        modified:   set_theory/ordinal.lean
        modified:   tactic/squeeze.lean
        modified:   tactic/tfae.lean
        modified:   tests/tactics.lean
```

#### [Scott Morrison (Oct 07 2018 at 14:32)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351020):
`git commit -m "nice message here"`

#### [Scott Morrison (Oct 07 2018 at 14:32)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351021):
no no!

#### [Scott Morrison (Oct 07 2018 at 14:33)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351024):
oops, sorry we want to make a new branch first :-)

#### [Scott Morrison (Oct 07 2018 at 14:33)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351028):
so `git branch faster2`

#### [Kenny Lau (Oct 07 2018 at 14:33)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351029):
eh... I already committed

#### [Scott Morrison (Oct 07 2018 at 14:33)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351032):
okay :-)

#### [Kenny Lau (Oct 07 2018 at 14:33)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351033):
how do I reverse the commit?

#### [Kenny Lau (Oct 07 2018 at 14:33)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351038):
can I just delete this branch and redo it?

#### [Mario Carneiro (Oct 07 2018 at 14:34)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351079):
`git reset HEAD~` should work

#### [Kenny Lau (Oct 07 2018 at 14:35)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351087):
nice

#### [Kenny Lau (Oct 07 2018 at 14:37)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351133):
```
$ git add .

$ git branch faster2

$ git branch
  direct_sum
  faster
  faster2
  master
* squeeze-simp
```

#### [Scott Morrison (Oct 07 2018 at 14:37)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351134):
Do you think you can take it from here, Kenny? I have to head off.

#### [Kenny Lau (Oct 07 2018 at 14:37)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351135):
eh...

#### [Kenny Lau (Oct 07 2018 at 14:37)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351136):
kind of confused

#### [Scott Morrison (Oct 07 2018 at 14:38)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351174):
`git checkout faster2`

#### [Scott Morrison (Oct 07 2018 at 14:38)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351177):
`git commit -m "refactor(*): making mathlib faster"`

#### [Kenny Lau (Oct 07 2018 at 14:39)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351186):
and then?

#### [Scott Morrison (Oct 07 2018 at 14:39)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351188):
`git branch -d faster`

#### [Scott Morrison (Oct 07 2018 at 14:39)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351189):
probably get an error message, because it's not fully merged

#### [Scott Morrison (Oct 07 2018 at 14:39)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351190):
so

#### [Scott Morrison (Oct 07 2018 at 14:39)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351191):
`git branch -D faster`

#### [Scott Morrison (Oct 07 2018 at 14:39)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351193):
to force it to delete

#### [Scott Morrison (Oct 07 2018 at 14:40)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351231):
`git branch -m faster2 faster`

#### [Scott Morrison (Oct 07 2018 at 14:40)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351237):
to rename faster2 to faster

#### [Scott Morrison (Oct 07 2018 at 14:40)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351239):
and finally `git push --force lc`

#### [Scott Morrison (Oct 07 2018 at 14:41)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135351247):
Good luck! I'll have a look when I get up to see how you went. :-)

#### [Kenny Lau (Oct 07 2018 at 16:47)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135354608):
```quote
Kenny could you not replace `induction` with `nat.rec_on`? It's less readable
```
@**Mario Carneiro** can I use `match`?

#### [Kenny Lau (Oct 07 2018 at 19:53)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135360399):
[done](https://github.com/leanprover/mathlib/pull/391)

#### [Simon Hudon (Oct 08 2018 at 00:24)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135368048):
Do you intend to do all your speed up before merging your branch? I think there's a benefit to merging regularly

#### [Kenny Lau (Oct 08 2018 at 00:32)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135368287):
@**Simon Hudon** I don't understand your question

#### [Kenny Lau (Oct 08 2018 at 00:32)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135368288):
I can't control when my PR is merged

#### [Simon Hudon (Oct 08 2018 at 00:33)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135368297):
Yes, you have control. If you keep making commits to the same branch and don't ask @**Mario Carneiro** and @**Johannes HÃ¶lzl** to merge, they won't merge.

#### [Kenny Lau (Oct 08 2018 at 00:35)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135368348):
Mario asked me to not use `nat.rec_on`, so I changed `nat.rec_on` to `by induction` and pushed.

#### [Kenny Lau (Oct 08 2018 at 00:35)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135368351):
also why are we on this thread?

#### [Kenny Lau (Oct 08 2018 at 00:35)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135368355):
so I don't see what I should have done instead.

#### [Simon Hudon (Oct 08 2018 at 00:48)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135368779):
What I'm asking you is when do you intend for `faster` to get merged.

#### [Kenny Lau (Oct 08 2018 at 00:49)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135368804):
well, now, preferably

#### [Kenny Lau (Oct 08 2018 at 00:49)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135368808):
but I don't know what I can do.

#### [Simon Hudon (Oct 08 2018 at 00:50)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135368855):
Cool, thanks

#### [Kenny Lau (Oct 08 2018 at 00:50)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135368860):
could you move this discussion to the faster thread?

#### [Kenny Lau (Oct 08 2018 at 00:55)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135368970):
@**Simon Hudon** so what should I do now?

#### [Simon Hudon (Oct 08 2018 at 00:58)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135369071):
Nothing different. I didn't realize that you were trying to get it merged

#### [Mario Carneiro (Oct 08 2018 at 11:35)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135391043):
I notice you worked on `turing_machine.lean`. While I applaud your effort, I think it was probably not a good choice. The theorems there are still under construction, as it were; I'm not certain that they will keep their current form, and if so the original proofs with `simp` will be more robust to changes. Moreover, those proofs are very CSy in the sense that they are proving simple properties of complicated objects; it is in this situation where `simp` has the biggest advantage, and the proofs without it are much longer and more brittle.

I will accept the changes since the file is on mathlib and everyone feels the compilation overhead (at least, if they are compiling everything in mathlib - it's not a dependent of any other files), but probably I should move the file out of mathlib altogether.

#### [Mario Carneiro (Oct 08 2018 at 14:49)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135400485):
Oof, I was going well through the PR, and then I see this:
https://github.com/leanprover/mathlib/pull/391/files#diff-21d78f94c9e397a3a2d037174c0903d6R18

What is this? There is no way this huge list will make it in to mathlib

#### [Johan Commelin (Oct 08 2018 at 14:52)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135400637):
"with multiset" occurs 148 times on that page.

#### [Johan Commelin (Oct 08 2018 at 14:52)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135400643):
Also, I think you should ping @**Kenny Lau**

#### [Mario Carneiro (Oct 08 2018 at 14:53)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135400663):
I know, it gets used everywhere

#### [Mario Carneiro (Oct 08 2018 at 14:54)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135400707):
I don't see the point in adding the kitchen sink to a simp set, that's just reinventing the default simp set

#### [Kenny Lau (Oct 08 2018 at 14:54)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135400720):
that was added by @**Simon Hudon** to test an alternative way to reducing build time, i.e. by using simp attr

#### [Johan Commelin (Oct 08 2018 at 14:55)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135400733):
From the profile gist: `data/multiset.lean 99.3 --> 42.9 (Kenny)`

#### [Kenny Lau (Oct 08 2018 at 14:57)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135400838):
look at the history

#### [Johan Commelin (Oct 08 2018 at 14:58)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135400887):
I mostly wanted to point out the speed-up, not the guy behind it (-;

#### [Mario Carneiro (Oct 08 2018 at 14:58)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135400891):
okay, but that's a separate PR

#### [Mario Carneiro (Oct 08 2018 at 15:02)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135401088):
@**Simon Hudon** Could you extract the bits from the PR about the `multiset` simp set?

#### [Simon Hudon (Oct 08 2018 at 16:28)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135406953):
Actually, the best might just be to redo the work with `squeeze_simp`. That was before I wrote it and I was trying to leave the proofs mostly unchanged. I think `squeeze_simp` is better at this.

#### [Mario Carneiro (Oct 08 2018 at 20:33)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135420706):
The `faster` branch has been merged... mostly. The `multiset` file should be done without that simp set thing

#### [Johan Commelin (Oct 08 2018 at 20:37)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135420916):
Thank you very much @**Kenny Lau**  and @**Mario Carneiro**

#### [Johan Commelin (Oct 08 2018 at 20:37)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135420930):
I think it would be good to draw some lessons from this experience, before diving into the next 10 files.

#### [Johan Commelin (Oct 08 2018 at 20:38)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135420982):
@**Mario Carneiro** What are your thoughts and feelings about this battle?

#### [Johan Commelin (Oct 08 2018 at 20:39)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135421005):
Are we sacrificing too much readability for speed? Should we look for other methods of increasing speed?

#### [Mario Carneiro (Oct 08 2018 at 20:39)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135421008):
It took me a while to read all the proofs, and I'm sure Kenny learned a lot of math by osmosis

#### [Johan Commelin (Oct 08 2018 at 20:39)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135421036):
Your end goal is to "golf all of maths". Does this fit in well?

#### [Mario Carneiro (Oct 08 2018 at 20:40)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135421037):
Honestly, once I got used to the constraints it was like I'm doing metamath again, trying to minimize a *proof* not a proof script

#### [Mario Carneiro (Oct 08 2018 at 20:40)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135421088):
but I'm sure the thought of that does not appeal to most here

#### [Johan Commelin (Oct 08 2018 at 20:41)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135421119):
Do we have a choice?

#### [Johan Commelin (Oct 08 2018 at 20:41)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135421155):
Or is mathlib going to grind to a halt in a couple of months if we don't adapt to this spartan way of proofwriting?

#### [Mario Carneiro (Oct 08 2018 at 20:41)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135421167):
I think that I will not change the way we write proofs. I prefer the big sweep

#### [Mario Carneiro (Oct 08 2018 at 20:42)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135421228):
I think we should focus more on early files though

#### [Mario Carneiro (Oct 08 2018 at 20:42)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135421244):
i.e. it doesn't matter if `turing_machine` is slow, no one imports it

#### [Mario Carneiro (Oct 08 2018 at 20:43)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135421273):
but having basic files like `order.filter` being slow was a killer

#### [Kevin Buzzard (Oct 08 2018 at 20:44)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135421343):
```quote
i.e. it doesn't matter if `turing_machine` is slow, no one imports it
```
I always build everything, just to make life easy.

#### [Mario Carneiro (Oct 08 2018 at 20:45)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135421377):
Sure, but in that case you are already geared for a long compile

#### [Chris Hughes (Oct 08 2018 at 20:45)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135421382):
That doesn't help when you're writing a PR, and you change `nat.basic`

#### [Johan Commelin (Oct 08 2018 at 20:46)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135421432):
Well, if this big sweep goes on like it does, then "long compile" could be 10 minutes, instead of 60.

#### [Mario Carneiro (Oct 08 2018 at 20:47)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135421452):
Of course I suggested to go for the low hanging fruits first, the next third of compile time probably will be more work still

#### [Johan Commelin (Oct 08 2018 at 20:48)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135421529):
Anyway, does Github show which PR's have merge conflicts after this refactor?

#### [Johan Commelin (Oct 08 2018 at 20:49)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135421548):
Or does Chris have to write all of `exp` all over again [kidding] :upside_down:

#### [Kenny Lau (Oct 08 2018 at 20:57)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135421872):
Muito obrigado @**Mario Carneiro** .

#### [Bryan Gin-ge Chen (Oct 08 2018 at 21:34)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135423561):
`linear_algebra/dimension.lean` was broken by the merge @**Mario Carneiro**

#### [Kenny Lau (Oct 08 2018 at 21:40)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135423935):
and an extra import of `tactic.squeeze` in `algebra/big_operators.lean` as pointed out by Simon

#### [Patrick Massot (Oct 08 2018 at 21:42)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23391%20faster/near/135424021):
```quote
`linear_algebra/dimension.lean` was broken by the merge @**Mario Carneiro**
```
That file will be module-refactored anyway

